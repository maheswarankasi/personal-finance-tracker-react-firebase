/*! For license information please see charts.min.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react-dom"),require("lodash"),require("react")):"function"==typeof define&&define.amd?define(["react-dom","lodash","react"],e):"object"==typeof exports?exports.Charts=e(require("react-dom"),require("lodash"),require("react")):t.Charts=e(t.ReactDOM,t._,t.React)}(self,(t,e,n)=>(()=>{var r,i,o,a,s={66(t){var e=Array.isArray;t.exports=e},90(t,e,n){"use strict";var r=n(836);t.exports={longestPath:function(t){var e={};r.forEach(t.sources(),function n(i){var o=t.node(i);if(r.has(e,i))return o.rank;e[i]=!0;var a=r.min(r.map(t.outEdges(i),function(e){return n(e.w)-t.edge(e).minlen}));return a!==Number.POSITIVE_INFINITY&&null!=a||(a=0),o.rank=a})},slack:function(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}}},110(t,e,n){var r=n(2979),i=n(7920);t.exports=function(t,e){return r(t,e,function(e,n){return i(t,n)})}},129(t){var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},151(t,e,n){var r=n(398);function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(i.Cache||r),n}i.Cache=r,t.exports=i},186(t,e,n){var r=n(7578),i=n(8859),o=n(641),a=n(66),s=n(6014);t.exports=function(t){return"function"==typeof t?t:null==t?o:"object"==typeof t?a(t)?i(t[0],t[1]):r(t):s(t)}},198(t,e,n){var r=n(836),i=n(7437);function o(t,e,n,a,s,u,c){var l=t.children(c);if(l.length){var A=i.addBorderNode(t,"_bt"),f=i.addBorderNode(t,"_bb"),d=t.node(c);t.setParent(A,c),d.borderTop=A,t.setParent(f,c),d.borderBottom=f,r.forEach(l,function(r){o(t,e,n,a,s,u,r);var i=t.node(r),l=i.borderTop?i.borderTop:r,d=i.borderBottom?i.borderBottom:r,h=i.borderTop?a:2*a,p=l!==d?1:s-u[c]+1;t.setEdge(A,l,{weight:h,minlen:p,nestingEdge:!0}),t.setEdge(d,f,{weight:h,minlen:p,nestingEdge:!0})}),t.parent(c)||t.setEdge(e,A,{weight:0,minlen:s+u[c]})}else c!==e&&t.setEdge(e,c,{weight:0,minlen:n})}t.exports={run:function(t){var e=i.addDummyNode(t,"root",{},"_root"),n=function(t){var e={};function n(i,o){var a=t.children(i);a&&a.length&&r.forEach(a,function(t){n(t,o+1)}),e[i]=o}return r.forEach(t.children(),function(t){n(t,1)}),e}(t),a=r.max(r.values(n))-1,s=2*a+1;t.graph().nestingRoot=e,r.forEach(t.edges(),function(e){t.edge(e).minlen*=s});var u=function(t){return r.reduce(t.edges(),function(e,n){return e+t.edge(n).weight},0)}(t)+1;r.forEach(t.children(),function(r){o(t,e,s,u,a,n,r)}),t.graph().nodeRankFactor=s},cleanup:function(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,r.forEach(t.edges(),function(e){t.edge(e).nestingEdge&&t.removeEdge(e)})}}},211(t,e,n){var r=n(5043),i=n(4751);t.exports=function(t,e){return null!=t&&i(t,e,r)}},228(t,e,n){"use strict";var r=n(5073),i=Array.prototype.concat,o=Array.prototype.slice,a=t.exports=function(t){for(var e=[],n=0,a=t.length;n<a;n++){var s=t[n];r(s)?e=i.call(e,o.call(s)):e.push(s)}return e};a.wrap=function(t){return function(){return t(a(arguments))}}},229(t,e,n){var r=n(6280);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},250(t){t.exports=function(t){throw new TypeError('"'+t+'" is read-only')},t.exports.__esModule=!0,t.exports.default=t.exports},281(t){t.exports=function(t,e){return t===e||t!=t&&e!=e}},398(t,e,n){var r=n(9221),i=n(9941),o=n(748),a=n(7320),s=n(3928);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},461(t,e,n){var r=n(7883),i=n(5783);t.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},511(t,e,n){var r=n(1191),i=n(4463);t.exports=function(t){return i(t)&&"[object Arguments]"==r(t)}},517(t){var e=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=function(t){return e.test(t)}},556(t,e,n){var r=n(1191),i=n(5364),o=n(4463),a=Function.prototype,s=Object.prototype,u=a.toString,c=s.hasOwnProperty,l=u.call(Object);t.exports=function(t){if(!o(t)||"[object Object]"!=r(t))return!1;var e=i(t);if(null===e)return!0;var n=c.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==l}},557(t,e,n){var r=n(846),i=n(461);t.exports=function(t,e){var n=-1,o=i(t)?Array(t.length):[];return r(t,function(t,r,i){o[++n]=e(t,r,i)}),o}},641(t){t.exports=function(t){return t}},648(t,e,n){var r=n(6018),i=["LR","RL","TB","BT","H","V"],o=["LR","RL","H"],a=i[0];t.exports=function(t,e,n){var s=e.direction||a;if(e.isHorizontal=function(t){return o.indexOf(t)>-1}(s),s&&-1===i.indexOf(s))throw new TypeError("Invalid direction: "+s);if(s===i[0])n(t,e);else if(s===i[1])n(t,e),t.right2left();else if(s===i[2])n(t,e);else if(s===i[3])n(t,e),t.bottom2top();else if(s===i[4]||s===i[5]){var u=r(t,e),c=u.left,l=u.right;n(c,e),n(l,e),e.isHorizontal?c.right2left():c.bottom2top(),l.translate(c.x-l.x,c.y-l.y),t.x=c.x,t.y=l.y;var A=t.getBoundingBox();e.isHorizontal?A.top<0&&t.translate(0,-A.top):A.left<0&&t.translate(-A.left,0)}var f=e.fixedRoot;return void 0===f&&(f=!0),f&&t.translate(-(t.x+t.width/2+t.hgap),-(t.y+t.height/2+t.vgap)),function(t,e){if(e.radial){var n=e.isHorizontal?["x","y"]:["y","x"],r=n[0],i=n[1],o={x:1/0,y:1/0},a={x:-1/0,y:-1/0},s=0;t.DFTraverse(function(t){s++;var e=t.x,n=t.y;o.x=Math.min(o.x,e),o.y=Math.min(o.y,n),a.x=Math.max(a.x,e),a.y=Math.max(a.y,n)});var u=a[i]-o[i];if(0===u)return;var c=2*Math.PI/s;t.DFTraverse(function(e){var n=(e[i]-o[i])/u*(2*Math.PI-c)+c,a=e[r]-t[r];e.x=Math.cos(n)*a,e.y=Math.sin(n)*a})}}(t,e),t}},650(t,e,n){var r=n(4159)(n(1770),"WeakMap");t.exports=r},663(t){function e(n){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},687(t){t.exports=function(t,e,n){for(var r=-1,i=t.length,o=e.length,a={};++r<i;){var s=r<o?e[r]:void 0;n(a,t[r],s)}return a}},748(t,e,n){var r=n(4528);t.exports=function(t){return r(this,t).get(t)}},798(t,e,n){var r=n(8554),i=n(663);t.exports=function(t,e,n,o){var a=r(i(1&o?t.prototype:t),e,n);return 2&o&&"function"==typeof a?function(t){return a.apply(n,t)}:a},t.exports.__esModule=!0,t.exports.default=t.exports},836(t,e,n){var r;try{r={cloneDeep:n(4192),constant:n(1479),defaults:n(3305),each:n(4430),filter:n(1633),find:n(6860),flatten:n(9165),forEach:n(1229),forIn:n(8743),has:n(211),isUndefined:n(2751),last:n(6459),map:n(1853),mapValues:n(5711),max:n(7829),merge:n(959),min:n(2991),minBy:n(5358),now:n(4707),pick:n(7886),range:n(1346),reduce:n(5077),sortBy:n(7374),uniqueId:n(2889),values:n(1293),zipObject:n(3823)}}catch(t){}r||(r=window._),t.exports=r},846(t,e,n){var r=n(6998),i=n(8806)(r);t.exports=i},881(t,e,n){var r=n(4645).default,i=n(4260);t.exports=function(t){var e=i(t,"string");return"symbol"==r(e)?e:e+""},t.exports.__esModule=!0,t.exports.default=t.exports},905(t,e,n){var r=n(4159)(n(1770),"Promise");t.exports=r},940(t){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},959(t,e,n){var r=n(8543),i=n(2812)(function(t,e,n){r(t,e,n)});t.exports=i},994(t,e,n){var r=n(4520),i=n(8325),o=n(1468);t.exports=function(t,e,n,a,s,u){var c=1&n,l=t.length,A=e.length;if(l!=A&&!(c&&A>l))return!1;var f=u.get(t),d=u.get(e);if(f&&d)return f==e&&d==t;var h=-1,p=!0,v=2&n?new r:void 0;for(u.set(t,e),u.set(e,t);++h<l;){var g=t[h],y=e[h];if(a)var m=c?a(y,g,h,e,t,u):a(g,y,h,t,e,u);if(void 0!==m){if(m)continue;p=!1;break}if(v){if(!i(e,function(t,e){if(!o(v,e)&&(g===t||s(g,t,n,a,u)))return v.push(e)})){p=!1;break}}else if(g!==y&&!s(g,y,n,a,u)){p=!1;break}}return u.delete(t),u.delete(e),p}},1048(t){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}},1062(t){"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},1095(t,e,n){var r=n(836),i=n(7678).Graph;t.exports=function(t,e,n){var o=function(t){for(var e;t.hasNode(e=r.uniqueId("_root")););return e}(t),a=new i({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(function(e){return t.node(e)});return r.forEach(t.nodes(),function(i){var s=t.node(i),u=t.parent(i);(s.rank===e||s.minRank<=e&&e<=s.maxRank)&&(a.setNode(i),a.setParent(i,u||o),r.forEach(t[n](i),function(e){var n=e.v===i?e.w:e.v,o=a.edge(n,i),s=r.isUndefined(o)?0:o.weight;a.setEdge(n,i,{weight:t.edge(e).weight+s})}),r.has(s,"minRank")&&a.setNode(i,{borderLeft:s.borderLeft[e],borderRight:s.borderRight[e]}))}),a}},1118(t){t.exports=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}},1152(t,e,n){var r=n(2471),i=n(5364),o=n(6646);t.exports=function(t){return"function"!=typeof t.constructor||o(t)?{}:r(i(t))}},1191(t,e,n){var r=n(6126),i=n(9477),o=n(129),a=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?i(t):o(t)}},1224(t){var e=/\w*$/;t.exports=function(t){var n=new t.constructor(t.source,e.exec(t));return n.lastIndex=t.lastIndex,n}},1229(t,e,n){var r=n(8644),i=n(846),o=n(2713),a=n(66);t.exports=function(t,e){return(a(t)?r:i)(t,o(e))}},1293(t,e,n){var r=n(6093),i=n(5303);t.exports=function(t){return null==t?[]:r(t,i(t))}},1299(t,e,n){var r=n(281),i=n(461),o=n(2532),a=n(1384);t.exports=function(t,e,n){if(!a(n))return!1;var s=typeof e;return!!("number"==s?i(n)&&o(e,n.length):"string"==s&&e in n)&&r(n[e],t)}},1342(t,e,n){t=n.nmd(t);var r=n(3827),i=e&&!e.nodeType&&e,o=i&&t&&!t.nodeType&&t,a=o&&o.exports===i&&r.process,s=function(){try{return o&&o.require&&o.require("util").types||a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=s},1346(t,e,n){var r=n(8337)();t.exports=r},1367(t,e,n){"use strict";var r=n(836);t.exports=function(t){var e={},n=r.filter(t.nodes(),function(e){return!t.children(e).length}),i=r.max(r.map(n,function(e){return t.node(e).rank})),o=r.map(r.range(i+1),function(){return[]}),a=r.sortBy(n,function(e){return t.node(e).rank});return r.forEach(a,function n(i){if(!r.has(e,i)){e[i]=!0;var a=t.node(i);o[a.rank].push(i),r.forEach(t.successors(i),n)}}),o}},1384(t){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},1391(t,e,n){var r=n(5685),i=/^\s+/;t.exports=function(t){return t?t.slice(0,r(t)+1).replace(i,""):t}},1422(t){var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},1437(t){t.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},1468(t){t.exports=function(t,e){return t.has(e)}},1479(t){t.exports=function(t){return function(){return t}}},1554(t){t.exports=function(t,e,n,r){var i=n?n.call(r,t,e):void 0;if(void 0!==i)return!!i;if(t===e)return!0;if("object"!=typeof t||!t||"object"!=typeof e||!e)return!1;var o=Object.keys(t),a=Object.keys(e);if(o.length!==a.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(e),u=0;u<o.length;u++){var c=o[u];if(!s(c))return!1;var l=t[c],A=e[c];if(!1===(i=n?n.call(r,l,A,c):void 0)||void 0===i&&l!==A)return!1}return!0}},1622(t,e,n){var r=n(7532),i=n(9455);t.exports=function(t,e){return r(t,i(t),e)}},1633(t,e,n){var r=n(7155),i=n(5409),o=n(186),a=n(66);t.exports=function(t,e){return(a(t)?r:i)(t,o(e,3))}},1634(t,e,n){"use strict";var r=n(836),i=n(7678).Graph,o=n(7437);function a(t,e){var n={};return r.reduce(e,function(e,i){var o=0,a=0,s=e.length,c=r.last(i);return r.forEach(i,function(e,l){var A=function(t,e){if(t.node(e).dummy)return r.find(t.predecessors(e),function(e){return t.node(e).dummy})}(t,e),f=A?t.node(A).order:s;(A||e===c)&&(r.forEach(i.slice(a,l+1),function(e){r.forEach(t.predecessors(e),function(r){var i=t.node(r),a=i.order;!(a<o||f<a)||i.dummy&&t.node(e).dummy||u(n,r,e)})}),a=l+1,o=f)}),i}),n}function s(t,e){var n={};function i(e,i,o,a,s){var c;r.forEach(r.range(i,o),function(i){c=e[i],t.node(c).dummy&&r.forEach(t.predecessors(c),function(e){var r=t.node(e);r.dummy&&(r.order<a||r.order>s)&&u(n,e,c)})})}return r.reduce(e,function(e,n){var o,a=-1,s=0;return r.forEach(n,function(r,u){if("border"===t.node(r).dummy){var c=t.predecessors(r);c.length&&(o=t.node(c[0]).order,i(n,s,u,a,o),s=u,a=o)}i(n,s,n.length,o,e.length)}),n}),n}function u(t,e,n){if(e>n){var r=e;e=n,n=r}var i=t[e];i||(t[e]=i={}),i[n]=!0}function c(t,e,n){if(e>n){var i=e;e=n,n=i}return r.has(t[e],n)}function l(t,e,n,i){var o={},a={},s={};return r.forEach(e,function(t){r.forEach(t,function(t,e){o[t]=t,a[t]=t,s[t]=e})}),r.forEach(e,function(t){var e=-1;r.forEach(t,function(t){var u=i(t);if(u.length){u=r.sortBy(u,function(t){return s[t]});for(var l=(u.length-1)/2,A=Math.floor(l),f=Math.ceil(l);A<=f;++A){var d=u[A];a[t]===t&&e<s[d]&&!c(n,t,d)&&(a[d]=t,a[t]=o[t]=o[d],e=s[d])}}})}),{root:o,align:a}}function A(t,e,n,o,a){var s={},u=function(t,e,n,o){var a=new i,s=t.graph(),u=function(t,e,n){return function(i,o,a){var s,u=i.node(o),c=i.node(a),l=0;if(l+=u.width/2,r.has(u,"labelpos"))switch(u.labelpos.toLowerCase()){case"l":s=-u.width/2;break;case"r":s=u.width/2}if(s&&(l+=n?s:-s),s=0,l+=(u.dummy?e:t)/2,l+=(c.dummy?e:t)/2,l+=c.width/2,r.has(c,"labelpos"))switch(c.labelpos.toLowerCase()){case"l":s=c.width/2;break;case"r":s=-c.width/2}return s&&(l+=n?s:-s),s=0,l}}(s.nodesep,s.edgesep,o);return r.forEach(e,function(e){var i;r.forEach(e,function(e){var r=n[e];if(a.setNode(r),i){var o=n[i],s=a.edge(o,r);a.setEdge(o,r,Math.max(u(t,e,i),s||0))}i=e})}),a}(t,e,n,a),c=a?"borderLeft":"borderRight";function l(t,e){for(var n=u.nodes(),r=n.pop(),i={};r;)i[r]?t(r):(i[r]=!0,n.push(r),n=n.concat(e(r))),r=n.pop()}return l(function(t){s[t]=u.inEdges(t).reduce(function(t,e){return Math.max(t,s[e.v]+u.edge(e))},0)},u.predecessors.bind(u)),l(function(e){var n=u.outEdges(e).reduce(function(t,e){return Math.min(t,s[e.w]-u.edge(e))},Number.POSITIVE_INFINITY),r=t.node(e);n!==Number.POSITIVE_INFINITY&&r.borderType!==c&&(s[e]=Math.max(s[e],n))},u.successors.bind(u)),r.forEach(o,function(t){s[t]=s[n[t]]}),s}function f(t,e){return r.minBy(r.values(e),function(e){var n=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return r.forIn(e,function(e,r){var o=function(t,e){return t.node(e).width}(t,r)/2;n=Math.max(e+o,n),i=Math.min(e-o,i)}),n-i})}function d(t,e){var n=r.values(e),i=r.min(n),o=r.max(n);r.forEach(["u","d"],function(n){r.forEach(["l","r"],function(a){var s,u=n+a,c=t[u];if(c!==e){var l=r.values(c);(s="l"===a?i-r.min(l):o-r.max(l))&&(t[u]=r.mapValues(c,function(t){return t+s}))}})})}function h(t,e){return r.mapValues(t.ul,function(n,i){if(e)return t[e.toLowerCase()][i];var o=r.sortBy(r.map(t,i));return(o[1]+o[2])/2})}t.exports={positionX:function(t){var e,n=o.buildLayerMatrix(t),i=r.merge(a(t,n),s(t,n)),u={};r.forEach(["u","d"],function(o){e="u"===o?n:r.values(n).reverse(),r.forEach(["l","r"],function(n){"r"===n&&(e=r.map(e,function(t){return r.values(t).reverse()}));var a=("u"===o?t.predecessors:t.successors).bind(t),s=l(0,e,i,a),c=A(t,e,s.root,s.align,"r"===n);"r"===n&&(c=r.mapValues(c,function(t){return-t})),u[o+n]=c})});var c=f(t,u);return d(u,c),h(u,t.graph().align)},findType1Conflicts:a,findType2Conflicts:s,addConflict:u,hasConflict:c,verticalAlignment:l,horizontalCompaction:A,alignCoordinates:d,findSmallestWidthAlignment:f,balance:h}},1770(t,e,n){var r=n(3827),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},1779(t,e,n){var r=n(8637),i=n(5781),o=n(3386),a=n(4754),s=i(function(t){return o(r(t,1,a,!0))});t.exports=s},1804(t,e,n){var r=n(8650),i=n(5132),o=n(461);t.exports=function(t){return o(t)?r(t,!0):i(t)}},1827(t,e,n){var r=n(1770).Uint8Array;t.exports=r},1850(t,e,n){var r=n(8746);t.exports=function(t){return r(t,4)}},1853(t,e,n){var r=n(4739),i=n(186),o=n(557),a=n(66);t.exports=function(t,e){return(a(t)?r:o)(t,i(e,3))}},1858(t,e,n){"use strict";n.r(e),n.d(e,{default:()=>i});var r=n(3085);function i(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,r.isAnyArray)(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");if(void 0!==n.output){if(!(0,r.isAnyArray)(n.output))throw new TypeError("output option must be an array if specified");e=n.output}else e=new Array(t.length);var i=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,r.isAnyArray)(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var n=e.fromIndex,i=void 0===n?0:n,o=e.toIndex,a=void 0===o?t.length:o;if(i<0||i>=t.length||!Number.isInteger(i))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=i||a>t.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var s=t[i],u=i+1;u<a;u++)t[u]<s&&(s=t[u]);return s}(t),o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,r.isAnyArray)(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var n=e.fromIndex,i=void 0===n?0:n,o=e.toIndex,a=void 0===o?t.length:o;if(i<0||i>=t.length||!Number.isInteger(i))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=i||a>t.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var s=t[i],u=i+1;u<a;u++)t[u]>s&&(s=t[u]);return s}(t);if(i===o)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var a=n.min,s=void 0===a?n.autoMinMax?i:0:a,u=n.max,c=void 0===u?n.autoMinMax?o:1:u;if(s>=c)throw new RangeError("min option must be smaller than max option");for(var l=(c-s)/(o-i),A=0;A<t.length;A++)e[A]=(t[A]-i)*l+s;return e}},1893(t,e,n){var r=n(7218)(Object.keys,Object);t.exports=r},1922(t,e,n){var r=n(9723),i=n(3038),o=n(905),a=n(5164),s=n(650),u=n(1191),c=n(1422),l="[object Map]",A="[object Promise]",f="[object Set]",d="[object WeakMap]",h="[object DataView]",p=c(r),v=c(i),g=c(o),y=c(a),m=c(s),b=u;(r&&b(new r(new ArrayBuffer(1)))!=h||i&&b(new i)!=l||o&&b(o.resolve())!=A||a&&b(new a)!=f||s&&b(new s)!=d)&&(b=function(t){var e=u(t),n="[object Object]"==e?t.constructor:void 0,r=n?c(n):"";if(r)switch(r){case p:return h;case v:return l;case g:return A;case y:return f;case m:return d}return e}),t.exports=b},1978(t,e,n){var r=n(229),i=n(281),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var a=t[e];o.call(t,e)&&i(a,n)&&(void 0!==n||e in t)||r(t,e,n)}},1990(t,e,n){var r=n(9086),i=n(3348);t.exports=function(t,e,n,r){return function(t,e,n,r){var o,a,s={},u=new i,c=function(t){var e=t.v!==o?t.v:t.w,r=s[e],i=n(t),c=a.distance+i;if(i<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+i);c<r.distance&&(r.distance=c,r.predecessor=o,u.decrease(e,c))};for(t.nodes().forEach(function(t){var n=t===e?0:Number.POSITIVE_INFINITY;s[t]={distance:n},u.add(t,n)});u.size()>0&&(o=u.removeMin(),(a=s[o]).distance!==Number.POSITIVE_INFINITY);)r(o).forEach(c);return s}(t,String(e),n||o,r||function(e){return t.outEdges(e)})};var o=r.constant(1)},2002(t,e,n){var r=n(4739),i=n(6815),o=n(186),a=n(557),s=n(1118),u=n(8552),c=n(6811),l=n(641),A=n(66);t.exports=function(t,e,n){e=e.length?r(e,function(t){return A(t)?function(e){return i(e,1===t.length?t[0]:t)}:t}):[l];var f=-1;e=r(e,u(o));var d=a(t,function(t,n,i){return{criteria:r(e,function(e){return e(t)}),index:++f,value:t}});return s(d,function(t,e){return c(t,e,n)})}},2022(t,e,n){var r=n(1827);t.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}},2058(t){t.exports=function(t){return this.__data__.has(t)}},2108(t,e,n){var r=n(7118);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},2136(t,e,n){var r=n(6461);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},2319(t,e,n){"use strict";var r=n(836),i=n(3909),o=n(5198),a=n(8256),s=n(7437).normalizeRanks,u=n(8199),c=n(7437).removeEmptyRanks,l=n(198),A=n(8e3),f=n(4177),d=n(6706),h=n(6345),p=n(7437),v=n(7678).Graph;t.exports=function(t,e){var n=e&&e.debugTiming?p.time:p.notime;n("layout",function(){var e=n("  buildLayoutGraph",function(){return function(t){var e=new v({multigraph:!0,compound:!0}),n=O(t.graph());return e.setGraph(r.merge({},y,k(n,g),r.pick(n,m))),r.forEach(t.nodes(),function(n){var i=O(t.node(n));e.setNode(n,r.defaults(k(i,b),w)),e.setParent(n,t.parent(n))}),r.forEach(t.edges(),function(n){var i=O(t.edge(n));e.setEdge(n,r.merge({},E,k(i,x),r.pick(i,B)))}),e}(t)});n("  runLayout",function(){!function(t,e){e("    makeSpaceForEdgeLabels",function(){!function(t){var e=t.graph();e.ranksep/=2,r.forEach(t.edges(),function(n){var r=t.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===e.rankdir||"BT"===e.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)})}(t)}),e("    removeSelfEdges",function(){!function(t){r.forEach(t.edges(),function(e){if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e,label:t.edge(e)}),t.removeEdge(e)}})}(t)}),e("    acyclic",function(){i.run(t)}),e("    nestingGraph.run",function(){l.run(t)}),e("    rank",function(){a(p.asNonCompoundGraph(t))}),e("    injectEdgeLabelProxies",function(){!function(t){r.forEach(t.edges(),function(e){var n=t.edge(e);if(n.width&&n.height){var r=t.node(e.v),i={rank:(t.node(e.w).rank-r.rank)/2+r.rank,e};p.addDummyNode(t,"edge-proxy",i,"_ep")}})}(t)}),e("    removeEmptyRanks",function(){c(t)}),e("    nestingGraph.cleanup",function(){l.cleanup(t)}),e("    normalizeRanks",function(){s(t)}),e("    assignRankMinMax",function(){!function(t){var e=0;r.forEach(t.nodes(),function(n){var i=t.node(n);i.borderTop&&(i.minRank=t.node(i.borderTop).rank,i.maxRank=t.node(i.borderBottom).rank,e=r.max(e,i.maxRank))}),t.graph().maxRank=e}(t)}),e("    removeEdgeLabelProxies",function(){!function(t){r.forEach(t.nodes(),function(e){var n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))})}(t)}),e("    normalize.run",function(){o.run(t)}),e("    parentDummyChains",function(){u(t)}),e("    addBorderSegments",function(){A(t)}),e("    order",function(){d(t)}),e("    insertSelfEdges",function(){!function(t){var e=p.buildLayerMatrix(t);r.forEach(e,function(e){var n=0;r.forEach(e,function(e,i){var o=t.node(e);o.order=i+n,r.forEach(o.selfEdges,function(e){p.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:o.rank,order:i+ ++n,e:e.e,label:e.label},"_se")}),delete o.selfEdges})})}(t)}),e("    adjustCoordinateSystem",function(){f.adjust(t)}),e("    position",function(){h(t)}),e("    positionSelfEdges",function(){!function(t){r.forEach(t.nodes(),function(e){var n=t.node(e);if("selfedge"===n.dummy){var r=t.node(n.e.v),i=r.x+r.width/2,o=r.y,a=n.x-i,s=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:i+2*a/3,y:o-s},{x:i+5*a/6,y:o-s},{x:i+a,y:o},{x:i+5*a/6,y:o+s},{x:i+2*a/3,y:o+s}],n.label.x=n.x,n.label.y=n.y}})}(t)}),e("    removeBorderNodes",function(){!function(t){r.forEach(t.nodes(),function(e){if(t.children(e).length){var n=t.node(e),i=t.node(n.borderTop),o=t.node(n.borderBottom),a=t.node(r.last(n.borderLeft)),s=t.node(r.last(n.borderRight));n.width=Math.abs(s.x-a.x),n.height=Math.abs(o.y-i.y),n.x=a.x+n.width/2,n.y=i.y+n.height/2}}),r.forEach(t.nodes(),function(e){"border"===t.node(e).dummy&&t.removeNode(e)})}(t)}),e("    normalize.undo",function(){o.undo(t)}),e("    fixupEdgeLabelCoords",function(){!function(t){r.forEach(t.edges(),function(e){var n=t.edge(e);if(r.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}})}(t)}),e("    undoCoordinateSystem",function(){f.undo(t)}),e("    translateGraph",function(){!function(t){var e=Number.POSITIVE_INFINITY,n=0,i=Number.POSITIVE_INFINITY,o=0,a=t.graph(),s=a.marginx||0,u=a.marginy||0;function c(t){var r=t.x,a=t.y,s=t.width,u=t.height;e=Math.min(e,r-s/2),n=Math.max(n,r+s/2),i=Math.min(i,a-u/2),o=Math.max(o,a+u/2)}r.forEach(t.nodes(),function(e){c(t.node(e))}),r.forEach(t.edges(),function(e){var n=t.edge(e);r.has(n,"x")&&c(n)}),e-=s,i-=u,r.forEach(t.nodes(),function(n){var r=t.node(n);r.x-=e,r.y-=i}),r.forEach(t.edges(),function(n){var o=t.edge(n);r.forEach(o.points,function(t){t.x-=e,t.y-=i}),r.has(o,"x")&&(o.x-=e),r.has(o,"y")&&(o.y-=i)}),a.width=n-e+s,a.height=o-i+u}(t)}),e("    assignNodeIntersects",function(){!function(t){r.forEach(t.edges(),function(e){var n,r,i=t.edge(e),o=t.node(e.v),a=t.node(e.w);i.points?(n=i.points[0],r=i.points[i.points.length-1]):(i.points=[],n=a,r=o),i.points.unshift(p.intersectRect(o,n)),i.points.push(p.intersectRect(a,r))})}(t)}),e("    reversePoints",function(){!function(t){r.forEach(t.edges(),function(e){var n=t.edge(e);n.reversed&&n.points.reverse()})}(t)}),e("    acyclic.undo",function(){i.undo(t)})}(e,n)}),n("  updateInputGraph",function(){!function(t,e){r.forEach(t.nodes(),function(n){var r=t.node(n),i=e.node(n);r&&(r.x=i.x,r.y=i.y,e.children(n).length&&(r.width=i.width,r.height=i.height))}),r.forEach(t.edges(),function(n){var i=t.edge(n),o=e.edge(n);i.points=o.points,r.has(o,"x")&&(i.x=o.x,i.y=o.y)}),t.graph().width=e.graph().width,t.graph().height=e.graph().height}(t,e)})})};var g=["nodesep","edgesep","ranksep","marginx","marginy"],y={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},m=["acyclicer","ranker","rankdir","align"],b=["width","height"],w={width:0,height:0},x=["minlen","weight","width","height","labeloffset"],E={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},B=["labelpos"];function k(t,e){return r.mapValues(r.pick(t,e),Number)}function O(t){var e={};return r.forEach(t,function(t,n){e[n.toLowerCase()]=t}),e}},2457(t,e,n){var r=n(9086);t.exports=function(t,e,n){return function(t,e,n){var r={},i=t.nodes();return i.forEach(function(t){r[t]={},r[t][t]={distance:0},i.forEach(function(e){t!==e&&(r[t][e]={distance:Number.POSITIVE_INFINITY})}),n(t).forEach(function(n){var i=n.v===t?n.w:n.v,o=e(n);r[t][i]={distance:o,predecessor:t}})}),i.forEach(function(t){var e=r[t];i.forEach(function(n){var o=r[n];i.forEach(function(n){var r=o[t],i=e[n],a=o[n],s=r.distance+i.distance;s<a.distance&&(a.distance=s,a.predecessor=i.predecessor)})})}),r}(t,e||i,n||function(e){return t.outEdges(e)})};var i=r.constant(1)},2471(t,e,n){var r=n(1384),i=Object.create,o=function(){function t(){}return function(e){if(!r(e))return{};if(i)return i(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=o},2499(t,e,n){var r=n(8494);t.exports=function(){this.__data__=new r,this.size=0}},2532(t){var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,n){var r=typeof t;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&e.test(t))&&t>-1&&t%1==0&&t<n}},2582(t){t.exports=function(){return[]}},2613(t,e,n){var r=n(6461);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},2662(t){t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},2713(t,e,n){var r=n(641);t.exports=function(t){return"function"==typeof t?t:r}},2751(t){t.exports=function(t){return void 0===t}},2775(t){t.exports=function(t,e){return null==t?void 0:t[e]}},2780(t,e,n){var r=n(2022),i=n(8964),o=n(1224),a=n(5769),s=n(2783);t.exports=function(t,e,n){var u=t.constructor;switch(e){case"[object ArrayBuffer]":return r(t);case"[object Boolean]":case"[object Date]":return new u(+t);case"[object DataView]":return i(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(t,n);case"[object Map]":case"[object Set]":return new u;case"[object Number]":case"[object String]":return new u(t);case"[object RegExp]":return o(t);case"[object Symbol]":return a(t)}}},2783(t,e,n){var r=n(2022);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},2812(t,e,n){var r=n(5781),i=n(1299);t.exports=function(t){return r(function(e,n){var r=-1,o=n.length,a=o>1?n[o-1]:void 0,s=o>2?n[2]:void 0;for(a=t.length>3&&"function"==typeof a?(o--,a):void 0,s&&i(n[0],n[1],s)&&(a=o<3?void 0:a,o=1),e=Object(e);++r<o;){var u=n[r];u&&t(e,u,r,a)}return e})}},2818(t){var e=Math.ceil,n=Math.max;t.exports=function(t,r,i,o){for(var a=-1,s=n(e((r-t)/(i||1)),0),u=Array(s);s--;)u[o?s:++a]=t,t+=i;return u}},2848(t,e,n){var r=n(836),i=n(7437);function o(t,e,n){for(var i;e.length&&(i=r.last(e)).i<=n;)e.pop(),t.push(i.vs),n++;return n}t.exports=function(t,e){var n,a=i.partition(t,function(t){return r.has(t,"barycenter")}),s=a.lhs,u=r.sortBy(a.rhs,function(t){return-t.i}),c=[],l=0,A=0,f=0;s.sort((n=!!e,function(t,e){return t.barycenter<e.barycenter?-1:t.barycenter>e.barycenter?1:n?e.i-t.i:t.i-e.i})),f=o(c,u,f),r.forEach(s,function(t){f+=t.vs.length,c.push(t.vs),l+=t.barycenter*t.weight,A+=t.weight,f=o(c,u,f)});var d={vs:r.flatten(c,!0)};return A&&(d.barycenter=l/A,d.weight=A),d}},2885(t){t.exports=function(){this.__data__=[],this.size=0}},2887(t){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},2889(t,e,n){var r=n(5591),i=0;t.exports=function(t){var e=++i;return r(t)+e}},2958(t,e,n){var r=n(5664),i=n(5460),o=n(1804);t.exports=function(t){return r(t,o,i)}},2979(t,e,n){var r=n(6815),i=n(4107),o=n(9722);t.exports=function(t,e,n){for(var a=-1,s=e.length,u={};++a<s;){var c=e[a],l=r(t,c);n(l,c)&&i(u,o(c,t),l)}return u}},2991(t,e,n){var r=n(9608),i=n(3803),o=n(641);t.exports=function(t){return t&&t.length?r(t,o,i):void 0}},3038(t,e,n){var r=n(4159)(n(1770),"Map");t.exports=r},3058(t){t.exports=function(t){return this.__data__.has(t)}},3085(t,e,n){"use strict";n.r(e),n.d(e,{isAnyArray:()=>i});var r=Object.prototype.toString;function i(t){var e=r.call(t);return e.endsWith("Array]")&&!e.includes("Big")}},3101(t,e,n){var r=n(5664),i=n(9455),o=n(5303);t.exports=function(t){return r(t,o,i)}},3145(t,e,n){var r=n(186),i=n(461),o=n(5303);t.exports=function(t){return function(e,n,a){var s=Object(e);if(!i(e)){var u=r(n,3);e=o(e),n=function(t){return u(s[t],t,s)}}var c=t(e,n,a);return c>-1?s[u?e[c]:c]:void 0}}},3185(t,e,n){var r=n(4419),i={getId:function(t){return t.id||t.name},getPreH:function(t){return t.preH||0},getPreV:function(t){return t.preV||0},getHGap:function(t){return t.hgap||18},getVGap:function(t){return t.vgap||18},getChildren:function(t){return t.children},getHeight:function(t){return t.height||36},getWidth:function(t){var e=t.label||" ";return t.width||18*e.split("").length}};function o(t,e){var n=this;if(n.vgap=n.hgap=0,t instanceof o)return t;n.data=t;var r=e.getHGap(t),i=e.getVGap(t);return n.preH=e.getPreH(t),n.preV=e.getPreV(t),n.width=e.getWidth(t),n.height=e.getHeight(t),n.width+=n.preH,n.height+=n.preV,n.id=e.getId(t),n.x=n.y=0,n.depth=0,n.children||(n.children=[]),n.addGap(r,i),n}r.assign(o.prototype,{isRoot:function(){return 0===this.depth},isLeaf:function(){return 0===this.children.length},addGap:function(t,e){var n=this;n.hgap+=t,n.vgap+=e,n.width+=2*t,n.height+=2*e},eachNode:function(t){for(var e,n=[this];e=n.shift();)t(e),n=e.children.concat(n)},DFTraverse:function(t){this.eachNode(t)},BFTraverse:function(t){for(var e,n=[this];e=n.shift();)t(e),n=n.concat(e.children)},getBoundingBox:function(){var t={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(e){t.left=Math.min(t.left,e.x),t.top=Math.min(t.top,e.y),t.width=Math.max(t.width,e.x+e.width),t.height=Math.max(t.height,e.y+e.height)}),t},translate:function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.eachNode(function(n){n.x+=t,n.y+=e,n.x+=n.preH,n.y+=n.preV})},right2left:function(){var t=this,e=t.getBoundingBox();t.eachNode(function(t){t.x=t.x-2*(t.x-e.left)-t.width}),t.translate(e.width,0)},bottom2top:function(){var t=this,e=t.getBoundingBox();t.eachNode(function(t){t.y=t.y-2*(t.y-e.top)-t.height}),t.translate(0,e.height)}}),t.exports=function(t,e,n){void 0===e&&(e={});var a,s=new o(t,e=r.assign({},i,e)),u=[s];if(!n&&!t.collapsed)for(;a=u.shift();)if(!a.data.collapsed){var c=e.getChildren(a.data),l=c?c.length:0;if(a.children=new Array(l),c&&l)for(var A=0;A<l;A++){var f=new o(c[A],e);a.children[A]=f,u.push(f),f.parent=a,f.depth=a.depth+1}}return s}},3279(t){t.exports=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}},3305(t,e,n){var r=n(5781),i=n(281),o=n(1299),a=n(1804),s=Object.prototype,u=s.hasOwnProperty,c=r(function(t,e){t=Object(t);var n=-1,r=e.length,c=r>2?e[2]:void 0;for(c&&o(e[0],e[1],c)&&(r=1);++n<r;)for(var l=e[n],A=a(l),f=-1,d=A.length;++f<d;){var h=A[f],p=t[h];(void 0===p||i(p,s[h])&&!u.call(t,h))&&(t[h]=l[h])}return t});t.exports=c},3348(t,e,n){var r=n(9086);function i(){this._arr=[],this._keyIndices={}}t.exports=i,i.prototype.size=function(){return this._arr.length},i.prototype.keys=function(){return this._arr.map(function(t){return t.key})},i.prototype.has=function(t){return r.has(this._keyIndices,t)},i.prototype.priority=function(t){var e=this._keyIndices[t];if(void 0!==e)return this._arr[e].priority},i.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},i.prototype.add=function(t,e){var n=this._keyIndices;if(t=String(t),!r.has(n,t)){var i=this._arr,o=i.length;return n[t]=o,i.push({key:t,priority:e}),this._decrease(o),!0}return!1},i.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},i.prototype.decrease=function(t,e){var n=this._keyIndices[t];if(e>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[n].priority+" New: "+e);this._arr[n].priority=e,this._decrease(n)},i.prototype._heapify=function(t){var e=this._arr,n=2*t,r=n+1,i=t;n<e.length&&(i=e[n].priority<e[i].priority?n:i,r<e.length&&(i=e[r].priority<e[i].priority?r:i),i!==t&&(this._swap(t,i),this._heapify(i)))},i.prototype._decrease=function(t){for(var e,n=this._arr,r=n[t].priority;0!==t&&!(n[e=t>>1].priority<r);)this._swap(t,e),t=e},i.prototype._swap=function(t,e){var n=this._arr,r=this._keyIndices,i=n[t],o=n[e];n[t]=o,n[e]=i,r[o.key]=t,r[i.key]=e}},3381(t,e,n){var r=n(663),i=n(8893),o=n(9097);t.exports=function(t,e,n){return e=r(e),o(t,i()?Reflect.construct(e,n||[],r(t).constructor):e.apply(t,n))},t.exports.__esModule=!0,t.exports.default=t.exports},3386(t,e,n){var r=n(4520),i=n(6240),o=n(8808),a=n(1468),s=n(9060),u=n(1048);t.exports=function(t,e,n){var c=-1,l=i,A=t.length,f=!0,d=[],h=d;if(n)f=!1,l=o;else if(A>=200){var p=e?null:s(t);if(p)return u(p);f=!1,l=a,h=new r}else h=e?[]:d;t:for(;++c<A;){var v=t[c],g=e?e(v):v;if(v=n||0!==v?v:0,f&&g==g){for(var y=h.length;y--;)if(h[y]===g)continue t;e&&h.push(g),d.push(v)}else l(h,g,n)||(h!==d&&h.push(g),d.push(v))}return d}},3424(t,e,n){var r=n(9086);t.exports=function(t){var e,n={},i=[];function o(i){r.has(n,i)||(n[i]=!0,e.push(i),r.each(t.successors(i),o),r.each(t.predecessors(i),o))}return r.each(t.nodes(),function(t){e=[],o(t),e.length&&i.push(e)}),i}},3519(t,e,n){var r=n(1191),i=n(4463);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==r(t)}},3576(t,e,n){var r=n(6461),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},3623(t,e,n){var r=n(1479),i=n(6280),o=n(641),a=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:o;t.exports=a},3753(t){t.exports=function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}},3803(t){t.exports=function(t,e){return t<e}},3809(t,e,n){var r=n(663);t.exports=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t},t.exports.__esModule=!0,t.exports.default=t.exports},3823(t,e,n){var r=n(1978),i=n(687);t.exports=function(t,e){return i(t||[],e||[],r)}},3827(t,e,n){var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;t.exports=r},3837(t,e,n){"use strict";var r=Math.log(2),i=t.exports,o=n(4509);function a(t){return 1-Math.abs(t)}t.exports.getUnifiedMinMax=function(t,e){return i.getUnifiedMinMaxMulti([t],e)},t.exports.getUnifiedMinMaxMulti=function(t,e){e=e||{};var n=!1,r=!1,i=o.isNumber(e.width)?e.width:2,a=o.isNumber(e.size)?e.size:50,s=o.isNumber(e.min)?e.min:(n=!0,o.findMinMulti(t)),u=o.isNumber(e.max)?e.max:(r=!0,o.findMaxMulti(t)),c=(u-s)/(a-1);return n&&(s-=2*i*c),r&&(u+=2*i*c),{min:s,max:u}},t.exports.create=function(t,e){if(e=e||{},!t||0===t.length)return[];var n=o.isNumber(e.size)?e.size:50,r=o.isNumber(e.width)?e.width:2,s=i.getUnifiedMinMax(t,{size:n,width:r,min:e.min,max:e.max}),u=s.min,c=s.max-u,l=c/(n-1);if(0===c)return[{x:u,y:1}];for(var A=[],f=0;f<n;f++)A.push({x:u+f*l,y:0});var d=function(t,e){for(var n={},r=0,i=-e;i<=e;i++)r+=t(i/e),n[i]=r;return n}(a,r),h=d[r],p=d[r-1]-d[r-2],v=0;t.forEach(function(t){var e=function(t){return Math.floor((t-u)/l)}(t);if(!(e+r<0||e-r>=A.length)){var n=Math.max(e-r,0),i=e,a=Math.min(e+r,A.length-1),s=n-(e-r),c=e+r-a,f=d[-r-1+s]||0,g=d[-r-1+c]||0,y=h/(h-f-g);s>0&&(v+=y*(s-1)*p);var m=Math.max(0,e-r+1);o.inside(0,A.length-1,m)&&(A[m].y+=1*y*p),o.inside(0,A.length-1,i+1)&&(A[i+1].y-=2*y*p),o.inside(0,A.length-1,a+1)&&(A[a+1].y+=1*y*p)}});var g=v,y=0,m=0;return A.forEach(function(t){y+=t.y,g+=y,t.y=g,m+=g}),m>0&&A.forEach(function(t){t.y/=m}),A},t.exports.getExpectedValueFromPdf=function(t){if(t&&0!==t.length){var e=0;return t.forEach(function(t){e+=t.x*t.y}),e}},t.exports.getXWithLeftTailArea=function(t,e){if(t&&0!==t.length){for(var n=0,r=0,i=0;i<t.length&&(r=i,!((n+=t[i].y)>=e));i++);return t[r].x}},t.exports.getPerplexity=function(t){if(t&&0!==t.length){var e=0;return t.forEach(function(t){var n=Math.log(t.y);isFinite(n)&&(e+=t.y*n)}),e=-e/r,Math.pow(2,e)}}},3891(t,e,n){var r=n(7532),i=n(1804);t.exports=function(t){return r(t,i(t))}},3909(t,e,n){"use strict";var r=n(836),i=n(9318);t.exports={run:function(t){var e="greedy"===t.graph().acyclicer?i(t,function(t){return function(e){return t.edge(e).weight}}(t)):function(t){var e=[],n={},i={};return r.forEach(t.nodes(),function o(a){r.has(i,a)||(i[a]=!0,n[a]=!0,r.forEach(t.outEdges(a),function(t){r.has(n,t.w)?e.push(t):o(t.w)}),delete n[a])}),e}(t);r.forEach(e,function(e){var n=t.edge(e);t.removeEdge(e),n.forwardName=e.name,n.reversed=!0,t.setEdge(e.w,e.v,n,r.uniqueId("rev"))})},undo:function(t){r.forEach(t.edges(),function(e){var n=t.edge(e);if(n.reversed){t.removeEdge(e);var r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}})}}},3928(t,e,n){var r=n(4528);t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},4050(t,e,n){var r=n(881);function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,r(i.key),i)}}t.exports=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},4107(t,e,n){var r=n(1978),i=n(9722),o=n(2532),a=n(1384),s=n(6092);t.exports=function(t,e,n,u){if(!a(t))return t;for(var c=-1,l=(e=i(e,t)).length,A=l-1,f=t;null!=f&&++c<l;){var d=s(e[c]),h=n;if("__proto__"===d||"constructor"===d||"prototype"===d)return t;if(c!=A){var p=f[d];void 0===(h=u?u(p,d,f):void 0)&&(h=a(p)?p:o(e[c+1])?[]:{})}r(f,d,h),f=f[d]}return t}},4159(t,e,n){var r=n(6180),i=n(2775);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},4160(t){t.exports=function(t,e){return null!=t&&e in Object(t)}},4165(t,e,n){var r=n(5216),i=n(994),o=n(7721),a=n(4738),s=n(1922),u=n(66),c=n(5777),l=n(7142),A="[object Arguments]",f="[object Array]",d="[object Object]",h=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,p,v,g){var y=u(t),m=u(e),b=y?f:s(t),w=m?f:s(e),x=(b=b==A?d:b)==d,E=(w=w==A?d:w)==d,B=b==w;if(B&&c(t)){if(!c(e))return!1;y=!0,x=!1}if(B&&!x)return g||(g=new r),y||l(t)?i(t,e,n,p,v,g):o(t,e,b,n,p,v,g);if(!(1&n)){var k=x&&h.call(t,"__wrapped__"),O=E&&h.call(e,"__wrapped__");if(k||O){var C=k?t.value():t,M=O?e.value():e;return g||(g=new r),v(C,M,n,p,g)}}return!!B&&(g||(g=new r),a(t,e,n,p,v,g))}},4177(t,e,n){"use strict";var r=n(836);function i(t){r.forEach(t.nodes(),function(e){o(t.node(e))}),r.forEach(t.edges(),function(e){o(t.edge(e))})}function o(t){var e=t.width;t.width=t.height,t.height=e}function a(t){t.y=-t.y}function s(t){var e=t.x;t.x=t.y,t.y=e}t.exports={adjust:function(t){var e=t.graph().rankdir.toLowerCase();"lr"!==e&&"rl"!==e||i(t)},undo:function(t){var e=t.graph().rankdir.toLowerCase();"bt"!==e&&"rl"!==e||function(t){r.forEach(t.nodes(),function(e){a(t.node(e))}),r.forEach(t.edges(),function(e){var n=t.edge(e);r.forEach(n.points,a),r.has(n,"y")&&a(n)})}(t),"lr"!==e&&"rl"!==e||(function(t){r.forEach(t.nodes(),function(e){s(t.node(e))}),r.forEach(t.edges(),function(e){var n=t.edge(e);r.forEach(n.points,s),r.has(n,"x")&&s(n)})}(t),i(t))}}},4188(t,e,n){"use strict";var r=n(836),i=n(7678).Graph,o=n(90).slack;function a(t,e){return r.forEach(t.nodes(),function n(i){r.forEach(e.nodeEdges(i),function(r){var a=r.v,s=i===a?r.w:a;t.hasNode(s)||o(e,r)||(t.setNode(s,{}),t.setEdge(i,s,{}),n(s))})}),t.nodeCount()}function s(t,e){return r.minBy(e.edges(),function(n){if(t.hasNode(n.v)!==t.hasNode(n.w))return o(e,n)})}function u(t,e,n){r.forEach(t.nodes(),function(t){e.node(t).rank+=n})}t.exports=function(t){var e,n,r=new i({directed:!1}),c=t.nodes()[0],l=t.nodeCount();for(r.setNode(c,{});a(r,t)<l;)e=s(r,t),n=r.hasNode(e.v)?o(t,e):-o(t,e),u(r,t,n);return r}},4192(t,e,n){var r=n(8746);t.exports=function(t){return r(t,5)}},4201(t){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},4207(t,e,n){var r=n(4419);t.exports=function(t,e,n,i){var o=null;t.eachNode(function(t){!function(t,e,n,i,o){var a=("function"==typeof n?n(t):n)*t.depth;if(!i)try{if(t.id===t.parent.children[0].id)return t.x+=a,void(t.y=e?e.y:0)}catch(t){}if(t.x+=a,e){if(t.y=e.y+r.getHeight(e,t,o),e.parent&&t.parent.id!==e.parent.id){var s=e.parent,u=s.y+r.getHeight(s,t,o);t.y=u>t.y?u:t.y}}else t.y=0}(t,o,e,n,i),o=t})}},4260(t,e,n){var r=n(4645).default;t.exports=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)},t.exports.__esModule=!0,t.exports.default=t.exports},4301(t,e,n){var r=n(5395);t.exports=function(t,e,n){return t.set(r(t,e),n),n},t.exports.__esModule=!0,t.exports.default=t.exports},4334(t,e,n){var r=n(229),i=n(281);t.exports=function(t,e,n){(void 0!==n&&!i(t[e],n)||void 0===n&&!(e in t))&&r(t,e,n)}},4355(t){function e(n,r){return t.exports=e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n,r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},4415(t){t.exports="2.1.8"},4419(t){t.exports={assign:Object.assign,getHeight:function(t,e,n,r){return void 0===r&&(r="height"),"center"===n?(t[r]+e[r])/2:t.height}}},4430(t,e,n){t.exports=n(1229)},4463(t){t.exports=function(t){return null!=t&&"object"==typeof t}},4508(t,e,n){var r=n(6815);t.exports=function(t){return function(e){return r(e,t)}}},4509(t){"use strict";var e=t.exports;t.exports.isNumber=function(t){return"number"==typeof t},t.exports.findMin=function(t){if(0===t.length)return 1/0;for(var e=t[0],n=1;n<t.length;n++)e=Math.min(e,t[n]);return e},t.exports.findMax=function(t){if(0===t.length)return-1/0;for(var e=t[0],n=1;n<t.length;n++)e=Math.max(e,t[n]);return e},t.exports.findMinMulti=function(t){for(var n=e.findMin(t[0]),r=1;r<t.length;r++)n=Math.min(n,e.findMin(t[r]));return n},t.exports.findMaxMulti=function(t){for(var n=e.findMax(t[0]),r=1;r<t.length;r++)n=Math.max(n,e.findMax(t[r]));return n},t.exports.inside=function(t,e,n){return t<=n&&n<=e}},4520(t,e,n){var r=n(398),i=n(9129),o=n(2058);function a(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,t.exports=a},4528(t,e,n){var r=n(5791);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},4626(t,e,n){var r=n(6837);t.exports=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=r(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}},t.exports.__esModule=!0,t.exports.default=t.exports},4645(t){function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},4707(t,e,n){var r=n(1770);t.exports=function(){return r.Date.now()}},4737(t,e,n){var r=n(8190)("length");t.exports=r},4738(t,e,n){var r=n(3101),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,o,a,s){var u=1&n,c=r(t),l=c.length;if(l!=r(e).length&&!u)return!1;for(var A=l;A--;){var f=c[A];if(!(u?f in e:i.call(e,f)))return!1}var d=s.get(t),h=s.get(e);if(d&&h)return d==e&&h==t;var p=!0;s.set(t,e),s.set(e,t);for(var v=u;++A<l;){var g=t[f=c[A]],y=e[f];if(o)var m=u?o(y,g,f,e,t,s):o(g,y,f,t,e,s);if(!(void 0===m?g===y||a(g,y,n,o,s):m)){p=!1;break}v||(v="constructor"==f)}if(p&&!v){var b=t.constructor,w=e.constructor;b==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w||(p=!1)}return s.delete(t),s.delete(e),p}},4739(t){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},4751(t,e,n){var r=n(9722),i=n(6111),o=n(66),a=n(2532),s=n(5783),u=n(6092);t.exports=function(t,e,n){for(var c=-1,l=(e=r(e,t)).length,A=!1;++c<l;){var f=u(e[c]);if(!(A=null!=t&&n(t,f)))break;t=t[f]}return A||++c!=l?A:!!(l=null==t?0:t.length)&&s(l)&&a(f,l)&&(o(t)||i(t))}},4754(t,e,n){var r=n(461),i=n(4463);t.exports=function(t){return i(t)&&r(t)}},4761(t,e,n){function r(t,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r(t,e)}var i=n(9073),o=n(7984),a=n(648),s=n(4419),u=function(t){function e(){return t.apply(this,arguments)||this}return i=t,(n=e).prototype=Object.create(i.prototype),n.prototype.constructor=n,r(n,i),e.prototype.execute=function(){return a(this.rootNode,this.options,o)},e;var n,i}(i),c={};t.exports=function(t,e){return e=s.assign({},c,e),new u(t,e).execute()}},4789(t,e,n){var r=n(9086);function i(t,e,n,o,a,s){r.has(o,e)||(o[e]=!0,n||s.push(e),r.each(a(e),function(e){i(t,e,n,o,a,s)}),n&&s.push(e))}t.exports=function(t,e,n){r.isArray(e)||(e=[e]);var o=(t.isDirected()?t.successors:t.neighbors).bind(t),a=[],s={};return r.each(e,function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);i(t,e,"post"===n,s,o,a)}),a}},4811(t,e,n){var r=n(4165),i=n(4463);t.exports=function t(e,n,o,a,s){return e===n||(null==e||null==n||!i(e)&&!i(n)?e!=e&&n!=n:r(e,n,o,a,t,s))}},4817(t,e,n){var r=n(4334),i=n(7735),o=n(2783),a=n(6758),s=n(1152),u=n(6111),c=n(66),l=n(4754),A=n(5777),f=n(7883),d=n(1384),h=n(556),p=n(7142),v=n(3279),g=n(3891);t.exports=function(t,e,n,y,m,b,w){var x=v(t,n),E=v(e,n),B=w.get(E);if(B)r(t,n,B);else{var k=b?b(x,E,n+"",t,e,w):void 0,O=void 0===k;if(O){var C=c(E),M=!C&&A(E),S=!C&&!M&&p(E);k=E,C||M||S?c(x)?k=x:l(x)?k=a(x):M?(O=!1,k=i(E,!0)):S?(O=!1,k=o(E,!0)):k=[]:h(E)||u(E)?(k=x,u(x)?k=g(x):d(x)&&!f(x)||(k=s(E))):O=!1}O&&(w.set(E,k),m(k,E,y,b,w),w.delete(E)),r(t,n,k)}}},4834(t,e,n){var r=n(1770)["__core-js_shared__"];t.exports=r},4934(t){t.exports=function(t){return this.__data__.get(t)}},4985(t,e,n){var r=n(5497);t.exports=function(t){try{r(t)}catch(t){if(t instanceof r.CycleException)return!1;throw t}return!0}},5043(t){var e=Object.prototype.hasOwnProperty;t.exports=function(t,n){return null!=t&&e.call(t,n)}},5048(t,e,n){"use strict";var r=n(836);function i(t,e,n){for(var i=r.zipObject(n,r.map(n,function(t,e){return e})),o=r.flatten(r.map(e,function(e){return r.sortBy(r.map(t.outEdges(e),function(e){return{pos:i[e.w],weight:t.edge(e).weight}}),"pos")}),!0),a=1;a<n.length;)a<<=1;var s=2*a-1;a-=1;var u=r.map(new Array(s),function(){return 0}),c=0;return r.forEach(o.forEach(function(t){var e=t.pos+a;u[e]+=t.weight;for(var n=0;e>0;)e%2&&(n+=u[e+1]),u[e=e-1>>1]+=t.weight;c+=t.weight*n})),c}t.exports=function(t,e){for(var n=0,r=1;r<e.length;++r)n+=i(t,e[r-1],e[r]);return n}},5061(t){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},5073(t){t.exports=function(t){return!(!t||"string"==typeof t)&&(t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&"String"!==t.constructor.name))}},5077(t,e,n){var r=n(8711),i=n(846),o=n(186),a=n(8853),s=n(66);t.exports=function(t,e,n){var u=s(t)?r:a,c=arguments.length<3;return u(t,o(e,4),n,c,i)}},5088(t,e,n){var r=n(9086);t.exports=function(t){var e=0,n=[],i={},o=[];function a(s){var u=i[s]={onStack:!0,lowlink:e,index:e++};if(n.push(s),t.successors(s).forEach(function(t){r.has(i,t)?i[t].onStack&&(u.lowlink=Math.min(u.lowlink,i[t].index)):(a(t),u.lowlink=Math.min(u.lowlink,i[t].lowlink))}),u.lowlink===u.index){var c,l=[];do{c=n.pop(),i[c].onStack=!1,l.push(c)}while(s!==c);o.push(l)}}return t.nodes().forEach(function(t){r.has(i,t)||a(t)}),o}},5094(t,e,n){var r=n(3753),i=n(186),o=n(9598),a=Math.max;t.exports=function(t,e,n){var s=null==t?0:t.length;if(!s)return-1;var u=null==n?0:o(n);return u<0&&(u=a(s+u,0)),r(t,i(e,3),u)}},5124(t){t.exports=function(t,e){return t>e}},5132(t,e,n){var r=n(1384),i=n(6646),o=n(2662),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return o(t);var e=i(t),n=[];for(var s in t)("constructor"!=s||!e&&a.call(t,s))&&n.push(s);return n}},5164(t,e,n){var r=n(4159)(n(1770),"Set");t.exports=r},5191(t,e,n){var r=n(4789);t.exports=function(t,e){return r(t,e,"pre")}},5193(t,e,n){var r=n(1062),i=n(228),o=Object.hasOwnProperty,a=Object.create(null);for(var s in r)o.call(r,s)&&(a[r[s]]=s);var u=t.exports={to:{},get:{}};function c(t,e,n){return Math.min(Math.max(e,t),n)}function l(t){var e=Math.round(t).toString(16).toUpperCase();return e.length<2?"0"+e:e}u.get=function(t){var e,n;switch(t.substring(0,3).toLowerCase()){case"hsl":e=u.get.hsl(t),n="hsl";break;case"hwb":e=u.get.hwb(t),n="hwb";break;default:e=u.get.rgb(t),n="rgb"}return e?{model:n,value:e}:null},u.get.rgb=function(t){if(!t)return null;var e,n,i,a=[0,0,0,1];if(e=t.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(i=e[2],e=e[1],n=0;n<3;n++){var s=2*n;a[n]=parseInt(e.slice(s,s+2),16)}i&&(a[3]=parseInt(i,16)/255)}else if(e=t.match(/^#([a-f0-9]{3,4})$/i)){for(i=(e=e[1])[3],n=0;n<3;n++)a[n]=parseInt(e[n]+e[n],16);i&&(a[3]=parseInt(i+i,16)/255)}else if(e=t.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)){for(n=0;n<3;n++)a[n]=parseInt(e[n+1],0);e[4]&&(e[5]?a[3]=.01*parseFloat(e[4]):a[3]=parseFloat(e[4]))}else{if(!(e=t.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(e=t.match(/^(\w+)$/))?"transparent"===e[1]?[0,0,0,0]:o.call(r,e[1])?((a=r[e[1]])[3]=1,a):null:null;for(n=0;n<3;n++)a[n]=Math.round(2.55*parseFloat(e[n+1]));e[4]&&(e[5]?a[3]=.01*parseFloat(e[4]):a[3]=parseFloat(e[4]))}for(n=0;n<3;n++)a[n]=c(a[n],0,255);return a[3]=c(a[3],0,1),a},u.get.hsl=function(t){if(!t)return null;var e=t.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(e){var n=parseFloat(e[4]);return[(parseFloat(e[1])%360+360)%360,c(parseFloat(e[2]),0,100),c(parseFloat(e[3]),0,100),c(isNaN(n)?1:n,0,1)]}return null},u.get.hwb=function(t){if(!t)return null;var e=t.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(e){var n=parseFloat(e[4]);return[(parseFloat(e[1])%360+360)%360,c(parseFloat(e[2]),0,100),c(parseFloat(e[3]),0,100),c(isNaN(n)?1:n,0,1)]}return null},u.to.hex=function(){var t=i(arguments);return"#"+l(t[0])+l(t[1])+l(t[2])+(t[3]<1?l(Math.round(255*t[3])):"")},u.to.rgb=function(){var t=i(arguments);return t.length<4||1===t[3]?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"},u.to.rgb.percent=function(){var t=i(arguments),e=Math.round(t[0]/255*100),n=Math.round(t[1]/255*100),r=Math.round(t[2]/255*100);return t.length<4||1===t[3]?"rgb("+e+"%, "+n+"%, "+r+"%)":"rgba("+e+"%, "+n+"%, "+r+"%, "+t[3]+")"},u.to.hsl=function(){var t=i(arguments);return t.length<4||1===t[3]?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"},u.to.hwb=function(){var t=i(arguments),e="";return t.length>=4&&1!==t[3]&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"},u.to.keyword=function(t){return a[t.slice(0,3)]}},5198(t,e,n){"use strict";var r=n(836),i=n(7437);t.exports={run:function(t){t.graph().dummyChains=[],r.forEach(t.edges(),function(e){!function(t,e){var n,r,o,a=e.v,s=t.node(a).rank,u=e.w,c=t.node(u).rank,l=e.name,A=t.edge(e),f=A.labelRank;if(c!==s+1){for(t.removeEdge(e),o=0,++s;s<c;++o,++s)A.points=[],r={width:0,height:0,edgeLabel:A,edgeObj:e,rank:s},n=i.addDummyNode(t,"edge",r,"_d"),s===f&&(r.width=A.width,r.height=A.height,r.dummy="edge-label",r.labelpos=A.labelpos),t.setEdge(a,n,{weight:A.weight},l),0===o&&t.graph().dummyChains.push(n),a=n;t.setEdge(a,u,{weight:A.weight},l)}}(t,e)})},undo:function(t){r.forEach(t.graph().dummyChains,function(e){var n,r=t.node(e),i=r.edgeLabel;for(t.setEdge(r.edgeObj,i);r.dummy;)n=t.successors(e)[0],t.removeNode(e),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),e=n,r=t.node(e)})}}},5201(t,e,n){var r=n(9225),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(i,function(t,n,r,i){e.push(r?i.replace(o,"$1"):n||t)}),e});t.exports=a},5216(t,e,n){var r=n(8494),i=n(2499),o=n(2887),a=n(4934),s=n(3058),u=n(6554);function c(t){var e=this.__data__=new r(t);this.size=e.size}c.prototype.clear=i,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=s,c.prototype.set=u,t.exports=c},5303(t,e,n){var r=n(8650),i=n(5351),o=n(461);t.exports=function(t){return o(t)?r(t):i(t)}},5320(t,e,n){var r=n(9086),i=n(7895),o=n(3348);t.exports=function(t,e){var n,a=new i,s={},u=new o;function c(t){var r=t.v===n?t.w:t.v,i=u.priority(r);if(void 0!==i){var o=e(t);o<i&&(s[r]=n,u.decrease(r,o))}}if(0===t.nodeCount())return a;r.each(t.nodes(),function(t){u.add(t,Number.POSITIVE_INFINITY),a.setNode(t)}),u.decrease(t.nodes()[0],0);for(var l=!1;u.size()>0;){if(n=u.removeMin(),r.has(s,n))a.setEdge(n,s[n]);else{if(l)throw new Error("Input graph is not connected: "+t);l=!0}t.nodeEdges(n).forEach(c)}return a}},5346(t,e,n){var r=n(9356);t.exports=function(t,e,n){r(t,e),e.set(t,n)},t.exports.__esModule=!0,t.exports.default=t.exports},5351(t,e,n){var r=n(6646),i=n(1893),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=[];for(var n in Object(t))o.call(t,n)&&"constructor"!=n&&e.push(n);return e}},5358(t,e,n){var r=n(9608),i=n(186),o=n(3803);t.exports=function(t,e){return t&&t.length?r(t,i(e,2),o):void 0}},5364(t,e,n){var r=n(7218)(Object.getPrototypeOf,Object);t.exports=r},5395(t){t.exports=function(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")},t.exports.__esModule=!0,t.exports.default=t.exports},5407(t,e,n){var r=n(9086),i=n(5088);t.exports=function(t){return r.filter(i(t),function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])})}},5409(t,e,n){var r=n(846);t.exports=function(t,e){var n=[];return r(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}},5442(t){"use strict";t.exports=n},5446(t,e,n){var r=n(4737),i=n(517),o=n(5742);t.exports=function(t){return i(t)?o(t):r(t)}},5460(t,e,n){var r=n(1437),i=n(5364),o=n(9455),a=n(2582),s=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)r(e,o(t)),t=i(t);return e}:a;t.exports=s},5464(t,e,n){"use strict";var r=n(836);t.exports=function(t,e){var n={};return r.forEach(t,function(t,e){var i=n[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};r.isUndefined(t.barycenter)||(i.barycenter=t.barycenter,i.weight=t.weight)}),r.forEach(e.edges(),function(t){var e=n[t.v],i=n[t.w];r.isUndefined(e)||r.isUndefined(i)||(i.indegree++,e.out.push(n[t.w]))}),function(t){var e=[];function n(t){return function(e){var n,i,o,a;e.merged||(r.isUndefined(e.barycenter)||r.isUndefined(t.barycenter)||e.barycenter>=t.barycenter)&&(i=e,o=0,a=0,(n=t).weight&&(o+=n.barycenter*n.weight,a+=n.weight),i.weight&&(o+=i.barycenter*i.weight,a+=i.weight),n.vs=i.vs.concat(n.vs),n.barycenter=o/a,n.weight=a,n.i=Math.min(i.i,n.i),i.merged=!0)}}function i(e){return function(n){n.in.push(e),0===--n.indegree&&t.push(n)}}for(;t.length;){var o=t.pop();e.push(o),r.forEach(o.in.reverse(),n(o)),r.forEach(o.out,i(o))}return r.map(r.filter(e,function(t){return!t.merged}),function(t){return r.pick(t,["vs","i","barycenter","weight"])})}(r.filter(n,function(t){return!t.indegree}))}},5497(t,e,n){var r=n(9086);function i(t){var e={},n={},i=[];if(r.each(t.sinks(),function a(s){if(r.has(n,s))throw new o;r.has(e,s)||(n[s]=!0,e[s]=!0,r.each(t.predecessors(s),a),delete n[s],i.push(s))}),r.size(e)!==t.nodeCount())throw new o;return i}function o(){}t.exports=i,i.CycleException=o,o.prototype=new Error},5526(t,e,n){var r=n(9452),i=n(6247),o=n(6837),a=n(4201);t.exports=function(t,e){return r(t)||i(t,e)||o(t,e)||a()},t.exports.__esModule=!0,t.exports.default=t.exports},5591(t,e,n){var r=n(9959);t.exports=function(t){return null==t?"":r(t)}},5664(t,e,n){var r=n(1437),i=n(66);t.exports=function(t,e,n){var o=e(t);return i(t)?o:r(o,n(t))}},5670(t,e,n){var r=n(881);t.exports=function(t,e,n){return(e=r(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.__esModule=!0,t.exports.default=t.exports},5685(t){var e=/\s/;t.exports=function(t){for(var n=t.length;n--&&e.test(t.charAt(n)););return n}},5711(t,e,n){var r=n(229),i=n(6998),o=n(186);t.exports=function(t,e){var n={};return e=o(e,3),i(t,function(t,i,o){r(n,i,e(t,i,o))}),n}},5742(t){var e="\\ud800-\\udfff",n="["+e+"]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",o="[^"+e+"]",a="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",u="(?:"+r+"|"+i+")?",c="[\\ufe0e\\ufe0f]?",l=c+u+"(?:\\u200d(?:"+[o,a,s].join("|")+")"+c+u+")*",A="(?:"+[o+r+"?",r,a,s,n].join("|")+")",f=RegExp(i+"(?="+i+")|"+A+l,"g");t.exports=function(t){for(var e=f.lastIndex=0;f.test(t);)++e;return e}},5769(t,e,n){var r=n(6126),i=r?r.prototype:void 0,o=i?i.valueOf:void 0;t.exports=function(t){return o?Object(o.call(t)):{}}},5777(t,e,n){t=n.nmd(t);var r=n(1770),i=n(9800),o=e&&!e.nodeType&&e,a=o&&t&&!t.nodeType&&t,s=a&&a.exports===o?r.Buffer:void 0,u=(s?s.isBuffer:void 0)||i;t.exports=u},5781(t,e,n){var r=n(641),i=n(5950),o=n(9872);t.exports=function(t,e){return o(i(t,e,r),t+"")}},5783(t){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},5791(t){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},5803(t,e,n){var r=n(836),i=n(7621),o=n(5464),a=n(2848);t.exports=function t(e,n,s,u){var c=e.children(n),l=e.node(n),A=l?l.borderLeft:void 0,f=l?l.borderRight:void 0,d={};A&&(c=r.filter(c,function(t){return t!==A&&t!==f}));var h=i(e,c);r.forEach(h,function(n){if(e.children(n.v).length){var i=t(e,n.v,s,u);d[n.v]=i,r.has(i,"barycenter")&&(o=n,a=i,r.isUndefined(o.barycenter)?(o.barycenter=a.barycenter,o.weight=a.weight):(o.barycenter=(o.barycenter*o.weight+a.barycenter*a.weight)/(o.weight+a.weight),o.weight+=a.weight))}var o,a});var p=o(h,s);!function(t,e){r.forEach(t,function(t){t.vs=r.flatten(t.vs.map(function(t){return e[t]?e[t].vs:t}),!0)})}(p,d);var v=a(p,u);if(A&&(v.vs=r.flatten([A,v.vs,f],!0),e.predecessors(A).length)){var g=e.node(e.predecessors(A)[0]),y=e.node(e.predecessors(f)[0]);r.has(v,"barycenter")||(v.barycenter=0,v.weight=0),v.barycenter=(v.barycenter*v.weight+g.order+y.order)/(v.weight+2),v.weight+=2}return v}},5809(t){t.exports=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}},5838(t,e,n){"use strict";n.d(e,{A:()=>i});var r=n(7141);function i(){var t,e,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function s(n,i,o,a){var s=i&&i.prototype instanceof c?i:c,l=Object.create(s.prototype);return(0,r.A)(l,"_invoke",function(n,r,i){var o,a,s,c=0,l=i||[],A=!1,f={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return o=e,a=0,s=t,f.n=n,u}};function d(n,r){for(a=n,s=r,e=0;!A&&c&&!i&&e<l.length;e++){var i,o=l[e],d=f.p,h=o[2];n>3?(i=h===r)&&(s=o[(a=o[4])?5:(a=3,3)],o[4]=o[5]=t):o[0]<=d&&((i=n<2&&d<o[1])?(a=0,f.v=r,f.n=o[1]):d<h&&(i=n<3||o[0]>r||r>h)&&(o[4]=n,o[5]=r,f.n=h,a=0))}if(i||n>1)return u;throw A=!0,r}return function(i,l,h){if(c>1)throw TypeError("Generator is already running");for(A&&1===l&&d(l,h),a=l,s=h;(e=a<2?t:s)||!A;){o||(a?a<3?(a>1&&(f.n=-1),d(a,s)):f.n=s:f.v=s);try{if(c=2,o){if(a||(i="next"),e=o[i]){if(!(e=e.call(o,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,a<2&&(a=0)}else 1===a&&(e=o.return)&&e.call(o),a<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),a=1);o=t}else if((e=(A=f.n<0)?s:n.call(r,f))!==u)break}catch(e){o=t,a=1,s=e}finally{c=1}}return{value:e,done:A}}}(n,o,a),!0),l}var u={};function c(){}function l(){}function A(){}e=Object.getPrototypeOf;var f=[][o]?e(e([][o]())):((0,r.A)(e={},o,function(){return this}),e),d=A.prototype=c.prototype=Object.create(f);function h(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,A):(t.__proto__=A,(0,r.A)(t,a,"GeneratorFunction")),t.prototype=Object.create(d),t}return l.prototype=A,(0,r.A)(d,"constructor",A),(0,r.A)(A,"constructor",l),l.displayName="GeneratorFunction",(0,r.A)(A,a,"GeneratorFunction"),(0,r.A)(d),(0,r.A)(d,a,"Generator"),(0,r.A)(d,o,function(){return this}),(0,r.A)(d,"toString",function(){return"[object Generator]"}),(i=function(){return{w:s,m:h}})()}},5860(t,e,n){function r(t,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r(t,e)}var i=n(9073),o=n(4207),a=n(6018),s=n(4419),u=["LR","RL","H"],c=u[0],l=function(t){function e(){return t.apply(this,arguments)||this}return i=t,(n=e).prototype=Object.create(i.prototype),n.prototype.constructor=n,r(n,i),e.prototype.execute=function(){var t=this.options,e=this.rootNode;t.isHorizontal=!0;var n=t.indent,r=void 0===n?20:n,i=t.dropCap,s=void 0===i||i,l=t.direction,A=void 0===l?c:l,f=t.align;if(A&&-1===u.indexOf(A))throw new TypeError("Invalid direction: "+A);if(A===u[0])o(e,r,s,f);else if(A===u[1])o(e,r,s,f),e.right2left();else if(A===u[2]){var d=a(e,t),h=d.left,p=d.right;o(h,r,s,f),h.right2left(),o(p,r,s,f);var v=h.getBoundingBox();p.translate(v.width,0),e.x=p.x-e.width/2}return e},e;var n,i}(i),A={};t.exports=function(t,e){return e=s.assign({},A,e),new l(t,e).execute()}},5886(t){function e(){var t={};t._next=t._prev=t,this._sentinel=t}function n(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function r(t,e){if("_next"!==t&&"_prev"!==t)return e}t.exports=e,e.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return n(e),e},e.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&n(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e},e.prototype.toString=function(){for(var t=[],e=this._sentinel,n=e._prev;n!==e;)t.push(JSON.stringify(n,r)),n=n._prev;return"["+t.join(", ")+"]"}},5950(t,e,n){var r=n(6644),i=Math.max;t.exports=function(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){for(var o=arguments,a=-1,s=i(o.length-e,0),u=Array(s);++a<s;)u[a]=o[e+a];a=-1;for(var c=Array(e+1);++a<e;)c[a]=o[a];return c[e]=n(u),r(t,this,c)}}},5994(t,e,n){var r=n(3753),i=n(7090),o=n(5809);t.exports=function(t,e,n){return e==e?o(t,e,n):r(t,i,n)}},6003(e){"use strict";e.exports=t},6014(t,e,n){var r=n(8190),i=n(4508),o=n(6615),a=n(6092);t.exports=function(t){return o(t)?r(a(t)):i(t)}},6018(t,e,n){var r=n(3185);t.exports=function(t,e){for(var n=r(t.data,e,!0),i=r(t.data,e,!0),o=t.children.length,a=Math.round(o/2),s=e.getSide||function(t,e){return e<a?"right":"left"},u=0;u<o;u++){var c=t.children[u];"right"===s(c,u)?i.children.push(c):n.children.push(c)}return n.eachNode(function(t){t.isRoot()||(t.side="left")}),i.eachNode(function(t){t.isRoot()||(t.side="right")}),{left:n,right:i}}},6092(t,e,n){var r=n(3519);t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},6093(t,e,n){var r=n(4739);t.exports=function(t,e){return r(e,function(e){return t[e]})}},6111(t,e,n){var r=n(511),i=n(4463),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return i(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=u},6126(t,e,n){var r=n(1770).Symbol;t.exports=r},6134(t,e,n){var r=n(1191),i=n(66),o=n(4463);t.exports=function(t){return"string"==typeof t||!i(t)&&o(t)&&"[object String]"==r(t)}},6180(t,e,n){var r=n(7883),i=n(7219),o=n(1384),a=n(1422),s=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,l=u.toString,A=c.hasOwnProperty,f=RegExp("^"+l.call(A).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||i(t))&&(r(t)?f:s).test(a(t))}},6200(t){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r},t.exports.__esModule=!0,t.exports.default=t.exports},6201(t,e,n){"use strict";var r=n(836),i=n(4188),o=n(90).slack,a=n(90).longestPath,s=n(7678).alg.preorder,u=n(7678).alg.postorder,c=n(7437).simplify;function l(t){t=c(t),a(t);var e,n=i(t);for(d(n),A(n,t);e=p(n);)g(n,t,e,v(n,t,e))}function A(t,e){var n=u(t,t.nodes());n=n.slice(0,n.length-1),r.forEach(n,function(n){!function(t,e,n){var r=t.node(n).parent;t.edge(n,r).cutvalue=f(t,e,n)}(t,e,n)})}function f(t,e,n){var i=t.node(n).parent,o=!0,a=e.edge(n,i),s=0;return a||(o=!1,a=e.edge(i,n)),s=a.weight,r.forEach(e.nodeEdges(n),function(r){var a,u,c=r.v===n,l=c?r.w:r.v;if(l!==i){var A=c===o,f=e.edge(r).weight;if(s+=A?f:-f,a=n,u=l,t.hasEdge(a,u)){var d=t.edge(n,l).cutvalue;s+=A?-d:d}}}),s}function d(t,e){arguments.length<2&&(e=t.nodes()[0]),h(t,{},1,e)}function h(t,e,n,i,o){var a=n,s=t.node(i);return e[i]=!0,r.forEach(t.neighbors(i),function(o){r.has(e,o)||(n=h(t,e,n,o,i))}),s.low=a,s.lim=n++,o?s.parent=o:delete s.parent,n}function p(t){return r.find(t.edges(),function(e){return t.edge(e).cutvalue<0})}function v(t,e,n){var i=n.v,a=n.w;e.hasEdge(i,a)||(i=n.w,a=n.v);var s=t.node(i),u=t.node(a),c=s,l=!1;s.lim>u.lim&&(c=u,l=!0);var A=r.filter(e.edges(),function(e){return l===y(0,t.node(e.v),c)&&l!==y(0,t.node(e.w),c)});return r.minBy(A,function(t){return o(e,t)})}function g(t,e,n,i){var o=n.v,a=n.w;t.removeEdge(o,a),t.setEdge(i.v,i.w,{}),d(t),A(t,e),function(t,e){var n=r.find(t.nodes(),function(t){return!e.node(t).parent}),i=s(t,n);i=i.slice(1),r.forEach(i,function(n){var r=t.node(n).parent,i=e.edge(n,r),o=!1;i||(i=e.edge(r,n),o=!0),e.node(n).rank=e.node(r).rank+(o?i.minlen:-i.minlen)})}(t,e)}function y(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}t.exports=l,l.initLowLimValues=d,l.initCutValues=A,l.calcCutValue=f,l.leaveEdge=p,l.enterEdge=v,l.exchangeEdges=g},6240(t,e,n){var r=n(5994);t.exports=function(t,e){return!(null==t||!t.length)&&r(t,e,0)>-1}},6247(t){t.exports=function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){c=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}},t.exports.__esModule=!0,t.exports.default=t.exports},6248(t,e,n){var r=n(7118);t.exports=function(t){return r(this.__data__,t)>-1}},6280(t,e,n){var r=n(4159),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=i},6338(t,e,n){var r=n(836),i=n(7437),o=n(7678).Graph;t.exports={debugOrdering:function(t){var e=i.buildLayerMatrix(t),n=new o({compound:!0,multigraph:!0}).setGraph({});return r.forEach(t.nodes(),function(e){n.setNode(e,{label:e}),n.setParent(e,"layer"+t.node(e).rank)}),r.forEach(t.edges(),function(t){n.setEdge(t.v,t.w,{},t.name)}),r.forEach(e,function(t,e){var i="layer"+e;n.setNode(i,{rank:"same"}),r.reduce(t,function(t,e){return n.setEdge(t,e,{style:"invis"}),e})}),n}}},6342(t,e,n){var r=n(5351),i=n(1922),o=n(461),a=n(6134),s=n(5446);t.exports=function(t){if(null==t)return 0;if(o(t))return a(t)?s(t):t.length;var e=i(t);return"[object Map]"==e||"[object Set]"==e?t.size:r(t).length}},6345(t,e,n){"use strict";var r=n(836),i=n(7437),o=n(1634).positionX;t.exports=function(t){(function(t){var e=i.buildLayerMatrix(t),n=t.graph().ranksep,o=0;r.forEach(e,function(e){var i=r.max(r.map(e,function(e){return t.node(e).height}));r.forEach(e,function(e){t.node(e).y=o+i/2}),o+=i+n})})(t=i.asNonCompoundGraph(t)),r.forEach(o(t),function(e,n){t.node(n).x=e})}},6459(t){t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},6461(t,e,n){var r=n(4159)(Object,"create");t.exports=r},6536(t,e,n){var r=n(8144)();t.exports=r},6554(t,e,n){var r=n(8494),i=n(3038),o=n(398);t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!i||a.length<199)return a.push([t,e]),this.size=++n.size,this;n=this.__data__=new o(a)}return n.set(t,e),this.size=n.size,this}},6601(t,e,n){var r=n(8311),i=1/0;t.exports=function(t){return t?(t=r(t))===i||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}},6606(t,e,n){var r=n(2613),i=n(9845),o=n(9532),a=n(3576),s=n(2136);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},6615(t,e,n){var r=n(66),i=n(3519),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||a.test(t)||!o.test(t)||null!=e&&t in Object(e)}},6626(t,e,n){function r(t,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r(t,e)}var i=n(9073),o=n(9977),a=n(648),s=n(4419),u=function(t){function e(){return t.apply(this,arguments)||this}return i=t,(n=e).prototype=Object.create(i.prototype),n.prototype.constructor=n,r(n,i),e.prototype.execute=function(){return a(this.rootNode,this.options,o)},e;var n,i}(i),c={};t.exports=function(t,e){return e=s.assign({},c,e),new u(t,e).execute()}},6644(t){t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},6646(t){var e=Object.prototype;t.exports=function(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||e)}},6662(t,e,n){var r=n(6126),i=n(6111),o=n(66),a=r?r.isConcatSpreadable:void 0;t.exports=function(t){return o(t)||i(t)||!!(a&&t&&t[a])}},6670(t,e,n){function r(t,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r(t,e)}var i=n(9073),o=n(7713),a=n(648),s=n(4419),u=function(t){function e(){return t.apply(this,arguments)||this}return i=t,(n=e).prototype=Object.create(i.prototype),n.prototype.constructor=n,r(n,i),e.prototype.execute=function(){var t=this;return t.rootNode.width=0,a(t.rootNode,t.options,o)},e;var n,i}(i),c={};t.exports=function(t,e){return e=s.assign({},c,e),new u(t,e).execute()}},6706(t,e,n){"use strict";var r=n(836),i=n(1367),o=n(5048),a=n(5803),s=n(1095),u=n(9969),c=n(7678).Graph,l=n(7437);function A(t,e,n){return r.map(e,function(e){return s(t,e,n)})}function f(t,e){var n=new c;r.forEach(t,function(t){var i=t.graph().root,o=a(t,i,n,e);r.forEach(o.vs,function(e,n){t.node(e).order=n}),u(t,n,o.vs)})}function d(t,e){r.forEach(e,function(e){r.forEach(e,function(e,n){t.node(e).order=n})})}t.exports=function(t){var e=l.maxRank(t),n=A(t,r.range(1,e+1),"inEdges"),a=A(t,r.range(e-1,-1,-1),"outEdges"),s=i(t);d(t,s);for(var u,c=Number.POSITIVE_INFINITY,h=0,p=0;p<4;++h,++p){f(h%2?n:a,h%4>=2),s=l.buildLayerMatrix(t);var v=o(t,s);v<c&&(p=0,u=r.cloneDeep(s),c=v)}d(t,u)}},6708(t){t.exports=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}}},6735(t,e,n){t.exports={Graph:n(7895),version:n(4415)}},6758(t){t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},6775(t,e,n){var r=n(9356);t.exports=function(t,e){r(t,e),e.add(t)},t.exports.__esModule=!0,t.exports.default=t.exports},6811(t,e,n){var r=n(7333);t.exports=function(t,e,n){for(var i=-1,o=t.criteria,a=e.criteria,s=o.length,u=n.length;++i<s;){var c=r(o[i],a[i]);if(c)return i>=u?c:c*("desc"==n[i]?-1:1)}return t.index-e.index}},6815(t,e,n){var r=n(9722),i=n(6092);t.exports=function(t,e){for(var n=0,o=(e=r(e,t)).length;null!=t&&n<o;)t=t[i(e[n++])];return n&&n==o?t:void 0}},6837(t,e,n){var r=n(6200);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},6860(t,e,n){var r=n(3145)(n(5094));t.exports=r},6998(t,e,n){var r=n(6536),i=n(5303);t.exports=function(t,e){return t&&r(t,e,i)}},7008(t,e,n){var r=n(4789);t.exports=function(t,e){return r(t,e,"post")}},7061(t){t.exports="0.8.5"},7063(t,e,n){"use strict";var r=n(798).default,i=n(5346).default,o=n(4301).default,a=n(9593).default,s=n(3381).default,u=n(9988).default,c=n(6775).default,l=n(5670).default,A=n(5395).default,f=n(5526).default,d=n(4626).default,h=n(9832).default,p=(n(250).default,n(940).default),v=n(4050).default,g=n(3085),y=n(1858),m=" ".repeat(2),b=" ".repeat(4);function w(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.maxRows,r=void 0===n?15:n,i=e.maxColumns,o=void 0===i?10:i,a=e.maxNumSize,s=void 0===a?8:a,u=e.padMinus,c=void 0===u?"auto":u;return"".concat(t.constructor.name," {\n").concat(m,"[\n").concat(b).concat(function(t,e,n,r,i){var o=t.rows,a=t.columns,s=Math.min(o,e),u=Math.min(a,n),c=[];if("auto"===i){i=!1;t:for(var l=0;l<s;l++)for(var A=0;A<u;A++)if(t.get(l,A)<0){i=!0;break t}}for(var f=0;f<s;f++){for(var d=[],h=0;h<u;h++)d.push(x(t.get(f,h),r,i));c.push("".concat(d.join(" ")))}return u!==a&&(c[c.length-1]+=" ... ".concat(a-n," more columns")),s!==o&&c.push("... ".concat(o-e," more rows")),c.join("\n".concat(b))}(t,r,o,s,c),"\n").concat(m,"]\n").concat(m,"rows: ").concat(t.rows,"\n").concat(m,"columns: ").concat(t.columns,"\n}")}function x(t,e,n){return(t>=0&&n?" ".concat(E(t,e-1)):E(t,e)).padEnd(e)}function E(t,e){var n=t.toString();if(n.length<=e)return n;var r=t.toFixed(e);if(r.length>e&&(r=t.toFixed(Math.max(0,e-(r.length-e)))),r.length<=e&&!r.startsWith("0.000")&&!r.startsWith("-0.000"))return r;var i=t.toExponential(e);return i.length>e&&(i=t.toExponential(Math.max(0,e-(i.length-e)))),i.slice(0)}function B(t,e,n){var r=n?t.rows:t.rows-1;if(e<0||e>r)throw new RangeError("Row index out of range")}function k(t,e,n){var r=n?t.columns:t.columns-1;if(e<0||e>r)throw new RangeError("Column index out of range")}function O(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function C(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function M(t,e){if(!g.isAnyArray(e))throw new TypeError("row indices must be an array");for(var n=0;n<e.length;n++)if(e[n]<0||e[n]>=t.rows)throw new RangeError("row indices are out of range")}function S(t,e){if(!g.isAnyArray(e))throw new TypeError("column indices must be an array");for(var n=0;n<e.length;n++)if(e[n]<0||e[n]>=t.columns)throw new RangeError("column indices are out of range")}function F(t,e,n,r,i){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(P("startRow",e),P("endRow",n),P("startColumn",r),P("endColumn",i),e>n||r>i||e<0||e>=t.rows||n<0||n>=t.rows||r<0||r>=t.columns||i<0||i>=t.columns)throw new RangeError("Submatrix indices are out of range")}function T(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],r=0;r<t;r++)n.push(e);return n}function P(t,e){if("number"!=typeof e)throw new TypeError("".concat(t," must be a number"))}function I(t){if(t.isEmpty())throw new Error("Empty matrix has no elements to index")}var N=function(){function t(){p(this,t)}return v(t,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(t){if("function"!=typeof t)throw new TypeError("callback must be a function");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.call(this,e,n);return this}},{key:"to1DArray",value:function(){for(var t=[],e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.push(this.get(e,n));return t}},{key:"to2DArray",value:function(){for(var t=[],e=0;e<this.rows;e++){t.push([]);for(var n=0;n<this.columns;n++)t[e].push(this.get(e,n))}return t}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return 1===this.rows}},{key:"isColumnVector",value:function(){return 1===this.columns}},{key:"isVector",value:function(){return 1===this.rows||1===this.columns}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return 0===this.rows||0===this.columns}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}},{key:"isDistance",value:function(){if(!this.isSymmetric())return!1;for(var t=0;t<this.rows;t++)if(0!==this.get(t,t))return!1;return!0}},{key:"isEchelonForm",value:function(){for(var t=0,e=0,n=-1,r=!0,i=!1;t<this.rows&&r;){for(e=0,i=!1;e<this.columns&&!1===i;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>n?(i=!0,n=e):(r=!1,i=!0);t++}return r}},{key:"isReducedEchelonForm",value:function(){for(var t=0,e=0,n=-1,r=!0,i=!1;t<this.rows&&r;){for(e=0,i=!1;e<this.columns&&!1===i;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>n?(i=!0,n=e):(r=!1,i=!0);for(var o=e+1;o<this.rows;o++)0!==this.get(t,o)&&(r=!1);t++}return r}},{key:"echelonForm",value:function(){for(var t=this.clone(),e=0,n=0;e<t.rows&&n<t.columns;){for(var r=e,i=e;i<t.rows;i++)t.get(i,n)>t.get(r,n)&&(r=i);if(0===t.get(r,n))n++;else{t.swapRows(e,r);for(var o=t.get(e,n),a=n;a<t.columns;a++)t.set(e,a,t.get(e,a)/o);for(var s=e+1;s<t.rows;s++){var u=t.get(s,n)/t.get(e,n);t.set(s,n,0);for(var c=n+1;c<t.columns;c++)t.set(s,c,t.get(s,c)-t.get(e,c)*u)}e++,n++}}return t}},{key:"reducedEchelonForm",value:function(){for(var t=this.echelonForm(),e=t.columns,n=t.rows,r=n-1;r>=0;)if(0===t.maxRow(r))r--;else{for(var i=0,o=!1;i<n&&!1===o;)1===t.get(r,i)?o=!0:i++;for(var a=0;a<r;a++)for(var s=t.get(a,i),u=i;u<e;u++){var c=t.get(a,u)-s*t.get(r,u);t.set(a,u,c)}r--}return t}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!=typeof t)throw new TypeError("options must be an object");var e=t.rows,n=void 0===e?1:e,r=t.columns,i=void 0===r?1:r;if(!Number.isInteger(n)||n<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(i)||i<=0)throw new TypeError("columns must be a positive integer");for(var o=new U(this.rows*n,this.columns*i),a=0;a<n;a++)for(var s=0;s<i;s++)o.setSubMatrix(this,this.rows*a,this.columns*s);return o}},{key:"fill",value:function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,t);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(t){B(this,t);for(var e=[],n=0;n<this.columns;n++)e.push(this.get(t,n));return e}},{key:"getRowVector",value:function(t){return U.rowVector(this.getRow(t))}},{key:"setRow",value:function(t,e){B(this,t),e=O(this,e);for(var n=0;n<this.columns;n++)this.set(t,n,e[n]);return this}},{key:"swapRows",value:function(t,e){B(this,t),B(this,e);for(var n=0;n<this.columns;n++){var r=this.get(t,n);this.set(t,n,this.get(e,n)),this.set(e,n,r)}return this}},{key:"getColumn",value:function(t){k(this,t);for(var e=[],n=0;n<this.rows;n++)e.push(this.get(n,t));return e}},{key:"getColumnVector",value:function(t){return U.columnVector(this.getColumn(t))}},{key:"setColumn",value:function(t,e){k(this,t),e=C(this,e);for(var n=0;n<this.rows;n++)this.set(n,t,e[n]);return this}},{key:"swapColumns",value:function(t,e){k(this,t),k(this,e);for(var n=0;n<this.rows;n++){var r=this.get(n,t);this.set(n,t,this.get(n,e)),this.set(n,e,r)}return this}},{key:"addRowVector",value:function(t){t=O(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[n]);return this}},{key:"subRowVector",value:function(t){t=O(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[n]);return this}},{key:"mulRowVector",value:function(t){t=O(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[n]);return this}},{key:"divRowVector",value:function(t){t=O(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[n]);return this}},{key:"addColumnVector",value:function(t){t=C(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[e]);return this}},{key:"subColumnVector",value:function(t){t=C(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[e]);return this}},{key:"mulColumnVector",value:function(t){t=C(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[e]);return this}},{key:"divColumnVector",value:function(t){t=C(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[e]);return this}},{key:"mulRow",value:function(t,e){B(this,t);for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e);return this}},{key:"mulColumn",value:function(t,e){k(this,t);for(var n=0;n<this.rows;n++)this.set(n,t,this.get(n,t)*e);return this}},{key:"max",value:function(t){if(this.isEmpty())return NaN;switch(t){case"row":for(var e=new Array(this.rows).fill(Number.NEGATIVE_INFINITY),n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)>e[n]&&(e[n]=this.get(n,r));return e;case"column":for(var i=new Array(this.columns).fill(Number.NEGATIVE_INFINITY),o=0;o<this.rows;o++)for(var a=0;a<this.columns;a++)this.get(o,a)>i[a]&&(i[a]=this.get(o,a));return i;case void 0:for(var s=this.get(0,0),u=0;u<this.rows;u++)for(var c=0;c<this.columns;c++)this.get(u,c)>s&&(s=this.get(u,c));return s;default:throw new Error("invalid option: ".concat(t))}}},{key:"maxIndex",value:function(){I(this);for(var t=this.get(0,0),e=[0,0],n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)>t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}},{key:"min",value:function(t){if(this.isEmpty())return NaN;switch(t){case"row":for(var e=new Array(this.rows).fill(Number.POSITIVE_INFINITY),n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)<e[n]&&(e[n]=this.get(n,r));return e;case"column":for(var i=new Array(this.columns).fill(Number.POSITIVE_INFINITY),o=0;o<this.rows;o++)for(var a=0;a<this.columns;a++)this.get(o,a)<i[a]&&(i[a]=this.get(o,a));return i;case void 0:for(var s=this.get(0,0),u=0;u<this.rows;u++)for(var c=0;c<this.columns;c++)this.get(u,c)<s&&(s=this.get(u,c));return s;default:throw new Error("invalid option: ".concat(t))}}},{key:"minIndex",value:function(){I(this);for(var t=this.get(0,0),e=[0,0],n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)<t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}},{key:"maxRow",value:function(t){if(B(this,t),this.isEmpty())return NaN;for(var e=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n));return e}},{key:"maxRowIndex",value:function(t){B(this,t),I(this);for(var e=this.get(t,0),n=[t,0],r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r),n[1]=r);return n}},{key:"minRow",value:function(t){if(B(this,t),this.isEmpty())return NaN;for(var e=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n));return e}},{key:"minRowIndex",value:function(t){B(this,t),I(this);for(var e=this.get(t,0),n=[t,0],r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r),n[1]=r);return n}},{key:"maxColumn",value:function(t){if(k(this,t),this.isEmpty())return NaN;for(var e=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t));return e}},{key:"maxColumnIndex",value:function(t){k(this,t),I(this);for(var e=this.get(0,t),n=[0,t],r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t),n[0]=r);return n}},{key:"minColumn",value:function(t){if(k(this,t),this.isEmpty())return NaN;for(var e=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t));return e}},{key:"minColumnIndex",value:function(t){k(this,t),I(this);for(var e=this.get(0,t),n=[0,t],r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t),n[0]=r);return n}},{key:"diag",value:function(){for(var t=Math.min(this.rows,this.columns),e=[],n=0;n<t;n++)e.push(this.get(n,n));return e}},{key:"norm",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"frobenius";switch(t){case"max":return this.max();case"frobenius":return Math.sqrt(this.dot(this));default:throw new RangeError("unknown norm type: ".concat(t))}}},{key:"cumulativeSum",value:function(){for(var t=0,e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t+=this.get(e,n),this.set(e,n,t);return this}},{key:"dot",value:function(e){t.isMatrix(e)&&(e=e.to1DArray());var n=this.to1DArray();if(n.length!==e.length)throw new RangeError("vectors do not have the same size");for(var r=0,i=0;i<n.length;i++)r+=n[i]*e[i];return r}},{key:"mmul",value:function(t){t=U.checkMatrix(t);for(var e=this.rows,n=this.columns,r=t.columns,i=new U(e,r),o=new Float64Array(n),a=0;a<r;a++){for(var s=0;s<n;s++)o[s]=t.get(s,a);for(var u=0;u<e;u++){for(var c=0,l=0;l<n;l++)c+=this.get(u,l)*o[l];i.set(u,a,c)}}return i}},{key:"mpow",value:function(t){if(!this.isSquare())throw new RangeError("Matrix must be square");if(!Number.isInteger(t)||t<0)throw new RangeError("Exponent must be a non-negative integer");for(var e=U.eye(this.rows),n=this,r=t;r>=1;r/=2)1&r&&(e=e.mmul(n)),n=n.mmul(n);return e}},{key:"strassen2x2",value:function(t){t=U.checkMatrix(t);var e=new U(2,2),n=this.get(0,0),r=t.get(0,0),i=this.get(0,1),o=t.get(0,1),a=this.get(1,0),s=t.get(1,0),u=this.get(1,1),c=t.get(1,1),l=(n+u)*(r+c),A=(a+u)*r,f=n*(o-c),d=u*(s-r),h=(n+i)*c,p=l+d-h+(i-u)*(s+c),v=f+h,g=A+d,y=l-A+f+(a-n)*(r+o);return e.set(0,0,p),e.set(0,1,v),e.set(1,0,g),e.set(1,1,y),e}},{key:"strassen3x3",value:function(t){t=U.checkMatrix(t);var e=new U(3,3),n=this.get(0,0),r=this.get(0,1),i=this.get(0,2),o=this.get(1,0),a=this.get(1,1),s=this.get(1,2),u=this.get(2,0),c=this.get(2,1),l=this.get(2,2),A=t.get(0,0),f=t.get(0,1),d=t.get(0,2),h=t.get(1,0),p=t.get(1,1),v=t.get(1,2),g=t.get(2,0),y=t.get(2,1),m=t.get(2,2),b=(n-o)*(-f+p),w=(-n+o+a)*(A-f+p),x=(o+a)*(-A+f),E=n*A,B=(-n+u+c)*(A-d+v),k=(-n+u)*(d-v),O=(u+c)*(-A+d),C=(-i+c+l)*(p+g-y),M=(i-l)*(p-y),S=i*g,F=(c+l)*(-g+y),T=(-i+a+s)*(v+g-m),P=(i-s)*(v-m),I=(a+s)*(-g+m),N=E+S+r*h,L=(n+r+i-o-a-c-l)*p+w+x+E+C+S+F,_=E+B+O+(n+r+i-a-s-u-c)*v+S+T+I,Q=b+a*(-A+f+h-p-v-g+m)+w+E+S+T+P,j=b+w+x+E+s*y,D=S+T+P+I+o*d,R=E+B+k+c*(-A+d+h-p-v-g+y)+C+M+S,H=C+M+S+F+u*f,z=E+B+k+O+l*m;return e.set(0,0,N),e.set(0,1,L),e.set(0,2,_),e.set(1,0,Q),e.set(1,1,j),e.set(1,2,D),e.set(2,0,R),e.set(2,1,H),e.set(2,2,z),e}},{key:"mmulStrassen",value:function(e){e=U.checkMatrix(e);var n=this.clone(),r=n.rows,i=n.columns,o=e.rows,a=e.columns;function s(e,n,r){var i=e.rows,o=e.columns;if(i===n&&o===r)return e;var a=t.zeros(n,r);return a.setSubMatrix(e,0,0)}i!==o&&console.warn("Multiplying ".concat(r," x ").concat(i," and ").concat(o," x ").concat(a," matrix: dimensions do not match."));var u=Math.max(r,o),c=Math.max(i,a);return function e(n,r,i,o){if(i<=512||o<=512)return n.mmul(r);i%2==1&&o%2==1?(n=s(n,i+1,o+1),r=s(r,i+1,o+1)):i%2==1?(n=s(n,i+1,o),r=s(r,i+1,o)):o%2==1&&(n=s(n,i,o+1),r=s(r,i,o+1));var a=parseInt(n.rows/2,10),u=parseInt(n.columns/2,10),c=n.subMatrix(0,a-1,0,u-1),l=r.subMatrix(0,a-1,0,u-1),A=n.subMatrix(0,a-1,u,n.columns-1),f=r.subMatrix(0,a-1,u,r.columns-1),d=n.subMatrix(a,n.rows-1,0,u-1),h=r.subMatrix(a,r.rows-1,0,u-1),p=n.subMatrix(a,n.rows-1,u,n.columns-1),v=r.subMatrix(a,r.rows-1,u,r.columns-1),g=e(t.add(c,p),t.add(l,v),a,u),y=e(t.add(d,p),l,a,u),m=e(c,t.sub(f,v),a,u),b=e(p,t.sub(h,l),a,u),w=e(t.add(c,A),v,a,u),x=e(t.sub(d,c),t.add(l,f),a,u),E=e(t.sub(A,p),t.add(h,v),a,u),B=t.add(g,b);B.sub(w),B.add(E);var k=t.add(m,w),O=t.add(y,b),C=t.sub(g,y);C.add(m),C.add(x);var M=t.zeros(2*B.rows,2*B.columns);return(M=(M=(M=(M=M.setSubMatrix(B,0,0)).setSubMatrix(k,B.rows,0)).setSubMatrix(O,0,B.columns)).setSubMatrix(C,B.rows,B.columns)).subMatrix(0,i-1,0,o-1)}(n=s(n,u,c),e=s(e,u,c),u,c)}},{key:"scaleRows",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!=typeof t)throw new TypeError("options must be an object");var e=t.min,n=void 0===e?0:e,r=t.max,i=void 0===r?1:r;if(!Number.isFinite(n))throw new TypeError("min must be a number");if(!Number.isFinite(i))throw new TypeError("max must be a number");if(n>=i)throw new RangeError("min must be smaller than max");for(var o=new U(this.rows,this.columns),a=0;a<this.rows;a++){var s=this.getRow(a);s.length>0&&y(s,{min:n,max:i,output:s}),o.setRow(a,s)}return o}},{key:"scaleColumns",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!=typeof t)throw new TypeError("options must be an object");var e=t.min,n=void 0===e?0:e,r=t.max,i=void 0===r?1:r;if(!Number.isFinite(n))throw new TypeError("min must be a number");if(!Number.isFinite(i))throw new TypeError("max must be a number");if(n>=i)throw new RangeError("min must be smaller than max");for(var o=new U(this.rows,this.columns),a=0;a<this.columns;a++){var s=this.getColumn(a);s.length&&y(s,{min:n,max:i,output:s}),o.setColumn(a,s)}return o}},{key:"flipRows",value:function(){for(var t=Math.ceil(this.columns/2),e=0;e<this.rows;e++)for(var n=0;n<t;n++){var r=this.get(e,n),i=this.get(e,this.columns-1-n);this.set(e,n,i),this.set(e,this.columns-1-n,r)}return this}},{key:"flipColumns",value:function(){for(var t=Math.ceil(this.rows/2),e=0;e<this.columns;e++)for(var n=0;n<t;n++){var r=this.get(n,e),i=this.get(this.rows-1-n,e);this.set(n,e,i),this.set(this.rows-1-n,e,r)}return this}},{key:"kroneckerProduct",value:function(t){t=U.checkMatrix(t);for(var e=this.rows,n=this.columns,r=t.rows,i=t.columns,o=new U(e*r,n*i),a=0;a<e;a++)for(var s=0;s<n;s++)for(var u=0;u<r;u++)for(var c=0;c<i;c++)o.set(r*a+u,i*s+c,this.get(a,s)*t.get(u,c));return o}},{key:"kroneckerSum",value:function(t){if(t=U.checkMatrix(t),!this.isSquare()||!t.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");var e=this.rows,n=t.rows,r=this.kroneckerProduct(U.eye(n,n)),i=U.eye(e,e).kroneckerProduct(t);return r.add(i)}},{key:"transpose",value:function(){for(var t=new U(this.columns,this.rows),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.set(n,e,this.get(e,n));return t}},{key:"sortRows",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}},{key:"sortColumns",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}},{key:"subMatrix",value:function(t,e,n,r){F(this,t,e,n,r);for(var i=new U(e-t+1,r-n+1),o=t;o<=e;o++)for(var a=n;a<=r;a++)i.set(o-t,a-n,this.get(o,a));return i}},{key:"subMatrixRow",value:function(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.columns-1),e>n||e<0||e>=this.columns||n<0||n>=this.columns)throw new RangeError("Argument out of range");for(var r=new U(t.length,n-e+1),i=0;i<t.length;i++)for(var o=e;o<=n;o++){if(t[i]<0||t[i]>=this.rows)throw new RangeError("Row index out of range: ".concat(t[i]));r.set(i,o-e,this.get(t[i],o))}return r}},{key:"subMatrixColumn",value:function(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.rows-1),e>n||e<0||e>=this.rows||n<0||n>=this.rows)throw new RangeError("Argument out of range");for(var r=new U(n-e+1,t.length),i=0;i<t.length;i++)for(var o=e;o<=n;o++){if(t[i]<0||t[i]>=this.columns)throw new RangeError("Column index out of range: ".concat(t[i]));r.set(o-e,i,this.get(o,t[i]))}return r}},{key:"setSubMatrix",value:function(t,e,n){if((t=U.checkMatrix(t)).isEmpty())return this;F(this,e,e+t.rows-1,n,n+t.columns-1);for(var r=0;r<t.rows;r++)for(var i=0;i<t.columns;i++)this.set(e+r,n+i,t.get(r,i));return this}},{key:"selection",value:function(t,e){M(this,t),S(this,e);for(var n=new U(t.length,e.length),r=0;r<t.length;r++)for(var i=t[r],o=0;o<e.length;o++){var a=e[o];n.set(r,o,this.get(i,a))}return n}},{key:"trace",value:function(){for(var t=Math.min(this.rows,this.columns),e=0,n=0;n<t;n++)e+=this.get(n,n);return e}},{key:"clone",value:function(){return this.constructor.copy(this,new U(this.rows,this.columns))}},{key:"sum",value:function(t){switch(t){case"row":return function(t){for(var e=T(t.rows),n=0;n<t.rows;++n)for(var r=0;r<t.columns;++r)e[n]+=t.get(n,r);return e}(this);case"column":return function(t){for(var e=T(t.columns),n=0;n<t.rows;++n)for(var r=0;r<t.columns;++r)e[r]+=t.get(n,r);return e}(this);case void 0:return function(t){for(var e=0,n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)e+=t.get(n,r);return e}(this);default:throw new Error("invalid option: ".concat(t))}}},{key:"product",value:function(t){switch(t){case"row":return function(t){for(var e=T(t.rows,1),n=0;n<t.rows;++n)for(var r=0;r<t.columns;++r)e[n]*=t.get(n,r);return e}(this);case"column":return function(t){for(var e=T(t.columns,1),n=0;n<t.rows;++n)for(var r=0;r<t.columns;++r)e[r]*=t.get(n,r);return e}(this);case void 0:return function(t){for(var e=1,n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)e*=t.get(n,r);return e}(this);default:throw new Error("invalid option: ".concat(t))}}},{key:"mean",value:function(t){var e=this.sum(t);switch(t){case"row":for(var n=0;n<this.rows;n++)e[n]/=this.columns;return e;case"column":for(var r=0;r<this.columns;r++)e[r]/=this.rows;return e;case void 0:return e/this.size;default:throw new Error("invalid option: ".concat(t))}}},{key:"variance",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw new TypeError("options must be an object");var n=e,r=n.unbiased,i=void 0===r||r,o=n.mean,a=void 0===o?this.mean(t):o;if("boolean"!=typeof i)throw new TypeError("unbiased must be a boolean");switch(t){case"row":if(!g.isAnyArray(a))throw new TypeError("mean must be an array");return function(t,e,n){for(var r=t.rows,i=t.columns,o=[],a=0;a<r;a++){for(var s=0,u=0,c=0,l=0;l<i;l++)s+=c=t.get(a,l)-n[a],u+=c*c;e?o.push((u-s*s/i)/(i-1)):o.push((u-s*s/i)/i)}return o}(this,i,a);case"column":if(!g.isAnyArray(a))throw new TypeError("mean must be an array");return function(t,e,n){for(var r=t.rows,i=t.columns,o=[],a=0;a<i;a++){for(var s=0,u=0,c=0,l=0;l<r;l++)s+=c=t.get(l,a)-n[a],u+=c*c;e?o.push((u-s*s/r)/(r-1)):o.push((u-s*s/r)/r)}return o}(this,i,a);case void 0:if("number"!=typeof a)throw new TypeError("mean must be a number");return function(t,e,n){for(var r=t.rows,i=t.columns,o=r*i,a=0,s=0,u=0,c=0;c<r;c++)for(var l=0;l<i;l++)a+=u=t.get(c,l)-n,s+=u*u;return e?(s-a*a/o)/(o-1):(s-a*a/o)/o}(this,i,a);default:throw new Error("invalid option: ".concat(t))}}},{key:"standardDeviation",value:function(t,e){"object"==typeof t&&(e=t,t=void 0);var n=this.variance(t,e);if(void 0===t)return Math.sqrt(n);for(var r=0;r<n.length;r++)n[r]=Math.sqrt(n[r]);return n}},{key:"center",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw new TypeError("options must be an object");var n=e.center,r=void 0===n?this.mean(t):n;switch(t){case"row":if(!g.isAnyArray(r))throw new TypeError("center must be an array");return function(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e[n])}(this,r),this;case"column":if(!g.isAnyArray(r))throw new TypeError("center must be an array");return function(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e[r])}(this,r),this;case void 0:if("number"!=typeof r)throw new TypeError("center must be a number");return function(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e)}(this,r),this;default:throw new Error("invalid option: ".concat(t))}}},{key:"scale",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw new TypeError("options must be an object");var n=e.scale;switch(t){case"row":if(void 0===n)n=function(t){for(var e=[],n=0;n<t.rows;n++){for(var r=0,i=0;i<t.columns;i++)r+=Math.pow(t.get(n,i),2)/(t.columns-1);e.push(Math.sqrt(r))}return e}(this);else if(!g.isAnyArray(n))throw new TypeError("scale must be an array");return function(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e[n])}(this,n),this;case"column":if(void 0===n)n=function(t){for(var e=[],n=0;n<t.columns;n++){for(var r=0,i=0;i<t.rows;i++)r+=Math.pow(t.get(i,n),2)/(t.rows-1);e.push(Math.sqrt(r))}return e}(this);else if(!g.isAnyArray(n))throw new TypeError("scale must be an array");return function(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e[r])}(this,n),this;case void 0:if(void 0===n)n=function(t){for(var e=t.size-1,n=0,r=0;r<t.columns;r++)for(var i=0;i<t.rows;i++)n+=Math.pow(t.get(i,r),2)/e;return Math.sqrt(n)}(this);else if("number"!=typeof n)throw new TypeError("scale must be a number");return function(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e)}(this,n),this;default:throw new Error("invalid option: ".concat(t))}}},{key:"toString",value:function(t){return w(this,t)}},{key:Symbol.iterator,value:function(){return this.entries()}},{key:"entries",value:h().m(function t(){var e,n;return h().w(function(t){for(;;)switch(t.n){case 0:e=0;case 1:if(!(e<this.rows)){t.n=5;break}n=0;case 2:if(!(n<this.columns)){t.n=4;break}return t.n=3,[e,n,this.get(e,n)];case 3:n++,t.n=2;break;case 4:e++,t.n=1;break;case 5:return t.a(2)}},t,this)})},{key:"values",value:h().m(function t(){var e,n;return h().w(function(t){for(;;)switch(t.n){case 0:e=0;case 1:if(!(e<this.rows)){t.n=5;break}n=0;case 2:if(!(n<this.columns)){t.n=4;break}return t.n=3,this.get(e,n);case 3:n++,t.n=2;break;case 4:e++,t.n=1;break;case 5:return t.a(2)}},t,this)})}],[{key:"from1DArray",value:function(t,e,n){if(t*e!==n.length)throw new RangeError("data length does not match given dimensions");for(var r=new U(t,e),i=0;i<t;i++)for(var o=0;o<e;o++)r.set(i,o,n[i*e+o]);return r}},{key:"rowVector",value:function(t){for(var e=new U(1,t.length),n=0;n<t.length;n++)e.set(0,n,t[n]);return e}},{key:"columnVector",value:function(t){for(var e=new U(t.length,1),n=0;n<t.length;n++)e.set(n,0,t[n]);return e}},{key:"zeros",value:function(t,e){return new U(t,e)}},{key:"ones",value:function(t,e){return new U(t,e).fill(1)}},{key:"rand",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"!=typeof n)throw new TypeError("options must be an object");for(var r=n.random,i=void 0===r?Math.random:r,o=new U(t,e),a=0;a<t;a++)for(var s=0;s<e;s++)o.set(a,s,i());return o}},{key:"randInt",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"!=typeof n)throw new TypeError("options must be an object");var r=n.min,i=void 0===r?0:r,o=n.max,a=void 0===o?1e3:o,s=n.random,u=void 0===s?Math.random:s;if(!Number.isInteger(i))throw new TypeError("min must be an integer");if(!Number.isInteger(a))throw new TypeError("max must be an integer");if(i>=a)throw new RangeError("min must be smaller than max");for(var c=a-i,l=new U(t,e),A=0;A<t;A++)for(var f=0;f<e;f++){var d=i+Math.round(u()*c);l.set(A,f,d)}return l}},{key:"eye",value:function(t,e,n){void 0===e&&(e=t),void 0===n&&(n=1);for(var r=Math.min(t,e),i=this.zeros(t,e),o=0;o<r;o++)i.set(o,o,n);return i}},{key:"diag",value:function(t,e,n){var r=t.length;void 0===e&&(e=r),void 0===n&&(n=e);for(var i=Math.min(r,e,n),o=this.zeros(e,n),a=0;a<i;a++)o.set(a,a,t[a]);return o}},{key:"min",value:function(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var n=t.rows,r=t.columns,i=new U(n,r),o=0;o<n;o++)for(var a=0;a<r;a++)i.set(o,a,Math.min(t.get(o,a),e.get(o,a)));return i}},{key:"max",value:function(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var n=t.rows,r=t.columns,i=new this(n,r),o=0;o<n;o++)for(var a=0;a<r;a++)i.set(o,a,Math.max(t.get(o,a),e.get(o,a)));return i}},{key:"checkMatrix",value:function(e){return t.isMatrix(e)?e:new U(e)}},{key:"isMatrix",value:function(t){return null!=t&&"Matrix"===t.klass}},{key:"copy",value:function(t,e){var n,r=d(t.entries());try{for(r.s();!(n=r.n()).done;){var i=f(n.value,3),o=i[0],a=i[1],s=i[2];e.set(o,a,s)}}catch(t){r.e(t)}finally{r.f()}return e}}])}();function L(t,e){return t-e}function _(t){return t.every(function(t){return"number"==typeof t})}N.prototype.klass="Matrix","undefined"!=typeof Symbol&&(N.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return w(this)}),N.random=N.rand,N.randomInt=N.randInt,N.diagonal=N.diag,N.prototype.diagonal=N.prototype.diag,N.identity=N.eye,N.prototype.negate=N.prototype.neg,N.prototype.tensorProduct=N.prototype.kroneckerProduct;var Q=new WeakSet,U=function(t){function e(t,n){var r;if(p(this,e),r=s(this,e),c(r,Q),l(r,"data",void 0),e.isMatrix(t))A(Q,r,j).call(r,t.rows,t.columns),e.copy(t,r);else if(Number.isInteger(t)&&t>=0)A(Q,r,j).call(r,t,n);else{if(!g.isAnyArray(t))throw new TypeError("First argument must be a positive number or an array");var i=t;if("number"!=typeof(n=(t=i.length)?i[0].length:0))throw new TypeError("Data must be a 2D array with at least one element");r.data=[];for(var o=0;o<t;o++){if(i[o].length!==n)throw new RangeError("Inconsistent array dimensions");if(!_(i[o]))throw new TypeError("Input data contains non-numeric values");r.data.push(Float64Array.from(i[o]))}r.rows=t,r.columns=n}return r}return u(e,t),v(e,[{key:"set",value:function(t,e,n){return this.data[t][e]=n,this}},{key:"get",value:function(t,e){return this.data[t][e]}},{key:"removeRow",value:function(t){return B(this,t),this.data.splice(t,1),this.rows-=1,this}},{key:"addRow",value:function(t,e){return void 0===e&&(e=t,t=this.rows),B(this,t,!0),e=Float64Array.from(O(this,e)),this.data.splice(t,0,e),this.rows+=1,this}},{key:"removeColumn",value:function(t){k(this,t);for(var e=0;e<this.rows;e++){for(var n=new Float64Array(this.columns-1),r=0;r<t;r++)n[r]=this.data[e][r];for(var i=t+1;i<this.columns;i++)n[i-1]=this.data[e][i];this.data[e]=n}return this.columns-=1,this}},{key:"addColumn",value:function(t,e){void 0===e&&(e=t,t=this.columns),k(this,t,!0),e=C(this,e);for(var n=0;n<this.rows;n++){for(var r=new Float64Array(this.columns+1),i=0;i<t;i++)r[i]=this.data[n][i];for(r[i++]=e[n];i<this.columns+1;i++)r[i]=this.data[n][i-1];this.data[n]=r}return this.columns+=1,this}}])}(N);function j(t,e){if(this.data=[],!(Number.isInteger(e)&&e>=0))throw new TypeError("nColumns must be a positive integer");for(var n=0;n<t;n++)this.data.push(new Float64Array(e));this.rows=t,this.columns=e}!function(t,e){t.prototype.add=function(t){return"number"==typeof t?this.addS(t):this.addM(t)},t.prototype.addS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t);return this},t.prototype.addM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)+t.get(n,r));return this},t.add=function(t,n){return new e(t).add(n)},t.prototype.sub=function(t){return"number"==typeof t?this.subS(t):this.subM(t)},t.prototype.subS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t);return this},t.prototype.subM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)-t.get(n,r));return this},t.sub=function(t,n){return new e(t).sub(n)},t.prototype.subtract=t.prototype.sub,t.prototype.subtractS=t.prototype.subS,t.prototype.subtractM=t.prototype.subM,t.subtract=t.sub,t.prototype.mul=function(t){return"number"==typeof t?this.mulS(t):this.mulM(t)},t.prototype.mulS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t);return this},t.prototype.mulM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)*t.get(n,r));return this},t.mul=function(t,n){return new e(t).mul(n)},t.prototype.multiply=t.prototype.mul,t.prototype.multiplyS=t.prototype.mulS,t.prototype.multiplyM=t.prototype.mulM,t.multiply=t.mul,t.prototype.div=function(t){return"number"==typeof t?this.divS(t):this.divM(t)},t.prototype.divS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t);return this},t.prototype.divM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)/t.get(n,r));return this},t.div=function(t,n){return new e(t).div(n)},t.prototype.divide=t.prototype.div,t.prototype.divideS=t.prototype.divS,t.prototype.divideM=t.prototype.divM,t.divide=t.div,t.prototype.mod=function(t){return"number"==typeof t?this.modS(t):this.modM(t)},t.prototype.modS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)%t);return this},t.prototype.modM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)%t.get(n,r));return this},t.mod=function(t,n){return new e(t).mod(n)},t.prototype.modulus=t.prototype.mod,t.prototype.modulusS=t.prototype.modS,t.prototype.modulusM=t.prototype.modM,t.modulus=t.mod,t.prototype.and=function(t){return"number"==typeof t?this.andS(t):this.andM(t)},t.prototype.andS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)&t);return this},t.prototype.andM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)&t.get(n,r));return this},t.and=function(t,n){return new e(t).and(n)},t.prototype.or=function(t){return"number"==typeof t?this.orS(t):this.orM(t)},t.prototype.orS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)|t);return this},t.prototype.orM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)|t.get(n,r));return this},t.or=function(t,n){return new e(t).or(n)},t.prototype.xor=function(t){return"number"==typeof t?this.xorS(t):this.xorM(t)},t.prototype.xorS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)^t);return this},t.prototype.xorM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)^t.get(n,r));return this},t.xor=function(t,n){return new e(t).xor(n)},t.prototype.leftShift=function(t){return"number"==typeof t?this.leftShiftS(t):this.leftShiftM(t)},t.prototype.leftShiftS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)<<t);return this},t.prototype.leftShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)<<t.get(n,r));return this},t.leftShift=function(t,n){return new e(t).leftShift(n)},t.prototype.signPropagatingRightShift=function(t){return"number"==typeof t?this.signPropagatingRightShiftS(t):this.signPropagatingRightShiftM(t)},t.prototype.signPropagatingRightShiftS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>t);return this},t.prototype.signPropagatingRightShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)>>t.get(n,r));return this},t.signPropagatingRightShift=function(t,n){return new e(t).signPropagatingRightShift(n)},t.prototype.rightShift=function(t){return"number"==typeof t?this.rightShiftS(t):this.rightShiftM(t)},t.prototype.rightShiftS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>>t);return this},t.prototype.rightShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)>>>t.get(n,r));return this},t.rightShift=function(t,n){return new e(t).rightShift(n)},t.prototype.zeroFillRightShift=t.prototype.rightShift,t.prototype.zeroFillRightShiftS=t.prototype.rightShiftS,t.prototype.zeroFillRightShiftM=t.prototype.rightShiftM,t.zeroFillRightShift=t.rightShift,t.prototype.not=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,~this.get(t,e));return this},t.not=function(t){return new e(t).not()},t.prototype.abs=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.abs(this.get(t,e)));return this},t.abs=function(t){return new e(t).abs()},t.prototype.acos=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.acos(this.get(t,e)));return this},t.acos=function(t){return new e(t).acos()},t.prototype.acosh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.acosh(this.get(t,e)));return this},t.acosh=function(t){return new e(t).acosh()},t.prototype.asin=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.asin(this.get(t,e)));return this},t.asin=function(t){return new e(t).asin()},t.prototype.asinh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.asinh(this.get(t,e)));return this},t.asinh=function(t){return new e(t).asinh()},t.prototype.atan=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.atan(this.get(t,e)));return this},t.atan=function(t){return new e(t).atan()},t.prototype.atanh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.atanh(this.get(t,e)));return this},t.atanh=function(t){return new e(t).atanh()},t.prototype.cbrt=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.cbrt(this.get(t,e)));return this},t.cbrt=function(t){return new e(t).cbrt()},t.prototype.ceil=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.ceil(this.get(t,e)));return this},t.ceil=function(t){return new e(t).ceil()},t.prototype.clz32=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.clz32(this.get(t,e)));return this},t.clz32=function(t){return new e(t).clz32()},t.prototype.cos=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.cos(this.get(t,e)));return this},t.cos=function(t){return new e(t).cos()},t.prototype.cosh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.cosh(this.get(t,e)));return this},t.cosh=function(t){return new e(t).cosh()},t.prototype.exp=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.exp(this.get(t,e)));return this},t.exp=function(t){return new e(t).exp()},t.prototype.expm1=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.expm1(this.get(t,e)));return this},t.expm1=function(t){return new e(t).expm1()},t.prototype.floor=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.floor(this.get(t,e)));return this},t.floor=function(t){return new e(t).floor()},t.prototype.fround=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.fround(this.get(t,e)));return this},t.fround=function(t){return new e(t).fround()},t.prototype.log=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log(this.get(t,e)));return this},t.log=function(t){return new e(t).log()},t.prototype.log1p=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log1p(this.get(t,e)));return this},t.log1p=function(t){return new e(t).log1p()},t.prototype.log10=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log10(this.get(t,e)));return this},t.log10=function(t){return new e(t).log10()},t.prototype.log2=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log2(this.get(t,e)));return this},t.log2=function(t){return new e(t).log2()},t.prototype.round=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.round(this.get(t,e)));return this},t.round=function(t){return new e(t).round()},t.prototype.sign=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sign(this.get(t,e)));return this},t.sign=function(t){return new e(t).sign()},t.prototype.sin=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sin(this.get(t,e)));return this},t.sin=function(t){return new e(t).sin()},t.prototype.sinh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sinh(this.get(t,e)));return this},t.sinh=function(t){return new e(t).sinh()},t.prototype.sqrt=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sqrt(this.get(t,e)));return this},t.sqrt=function(t){return new e(t).sqrt()},t.prototype.tan=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.tan(this.get(t,e)));return this},t.tan=function(t){return new e(t).tan()},t.prototype.tanh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.tanh(this.get(t,e)));return this},t.tanh=function(t){return new e(t).tanh()},t.prototype.trunc=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.trunc(this.get(t,e)));return this},t.trunc=function(t){return new e(t).trunc()},t.pow=function(t,n){return new e(t).pow(n)},t.prototype.pow=function(t){return"number"==typeof t?this.powS(t):this.powM(t)},t.prototype.powS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.pow(this.get(e,n),t));return this},t.prototype.powM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.set(n,r,Math.pow(this.get(n,r),t.get(n,r)));return this}}(N,U);var D=new WeakMap,R=function(t){function e(t){var n;if(p(this,e),n=s(this,e),i(n,D,void 0),U.isMatrix(t)){if(!t.isSymmetric())throw new TypeError("not symmetric data");o(D,n,U.copy(t,new U(t.rows,t.rows)))}else if(Number.isInteger(t)&&t>=0)o(D,n,new U(t,t));else if(o(D,n,new U(t)),!n.isSymmetric())throw new TypeError("not symmetric data");return n}return u(e,t),v(e,[{key:"size",get:function(){return a(D,this).size}},{key:"rows",get:function(){return a(D,this).rows}},{key:"columns",get:function(){return a(D,this).columns}},{key:"diagonalSize",get:function(){return this.rows}},{key:"clone",value:function(){var t,n=new e(this.diagonalSize),r=d(this.upperRightEntries());try{for(r.s();!(t=r.n()).done;){var i=f(t.value,3),o=i[0],a=i[1],s=i[2];n.set(o,a,s)}}catch(t){r.e(t)}finally{r.f()}return n}},{key:"toMatrix",value:function(){return new U(this)}},{key:"get",value:function(t,e){return a(D,this).get(t,e)}},{key:"set",value:function(t,e,n){return a(D,this).set(t,e,n),a(D,this).set(e,t,n),this}},{key:"removeCross",value:function(t){return a(D,this).removeRow(t),a(D,this).removeColumn(t),this}},{key:"addCross",value:function(t,e){void 0===e&&(e=t,t=this.diagonalSize);var n=e.slice();return n.splice(t,1),a(D,this).addRow(t,n),a(D,this).addColumn(t,e),this}},{key:"applyMask",value:function(t){if(t.length!==this.diagonalSize)throw new RangeError("Mask size do not match with matrix size");var e,n=[],r=d(t.entries());try{for(r.s();!(e=r.n()).done;){var i=f(e.value,2),o=i[0];i[1]||n.push(o)}}catch(t){r.e(t)}finally{r.f()}n.reverse();for(var a=0,s=n;a<s.length;a++){var u=s[a];this.removeCross(u)}return this}},{key:"toCompact",value:function(){for(var t=this.diagonalSize,e=new Array(t*(t+1)/2),n=0,r=0,i=0;i<e.length;i++)e[i]=this.get(r,n),++n>=t&&(n=++r);return e}},{key:"upperRightEntries",value:h().m(function t(){var e,n,r;return h().w(function(t){for(;;)switch(t.n){case 0:e=0,n=0;case 1:if(!(e<this.diagonalSize)){t.n=4;break}return r=this.get(e,n),t.n=2,[e,n,r];case 2:++n>=this.diagonalSize&&(n=++e);case 3:t.n=1;break;case 4:return t.a(2)}},t,this)})},{key:"upperRightValues",value:h().m(function t(){var e,n,r;return h().w(function(t){for(;;)switch(t.n){case 0:e=0,n=0;case 1:if(!(e<this.diagonalSize)){t.n=4;break}return r=this.get(e,n),t.n=2,r;case 2:++n>=this.diagonalSize&&(n=++e);case 3:t.n=1;break;case 4:return t.a(2)}},t,this)})}],[{key:"isSymmetricMatrix",value:function(t){return U.isMatrix(t)&&"SymmetricMatrix"===t.klassType}},{key:"zeros",value:function(t){return new this(t)}},{key:"ones",value:function(t){return new this(t).fill(1)}},{key:"fromCompact",value:function(t){var n=t.length,r=(Math.sqrt(8*n+1)-1)/2;if(!Number.isInteger(r))throw new TypeError("This array is not a compact representation of a Symmetric Matrix, ".concat(JSON.stringify(t)));for(var i=new e(r),o=0,a=0,s=0;s<n;s++)i.set(o,a,t[s]),++o>=r&&(o=++a);return i}}])}(N);R.prototype.klassType="SymmetricMatrix";var H=function(t){function e(t){var n;if(p(this,e),!(n=s(this,e,[t])).isDistance())throw new TypeError("Provided arguments do no produce a distance matrix");return n}return u(e,t),v(e,[{key:"set",value:function(t,n,i){return t===n&&(i=0),r(e,"set",this,3)([t,n,i])}},{key:"addCross",value:function(t,n){return void 0===n&&(n=t,t=this.diagonalSize),(n=n.slice())[t]=0,r(e,"addCross",this,3)([t,n])}},{key:"toSymmetricMatrix",value:function(){return new R(this)}},{key:"clone",value:function(){var t,n=new e(this.diagonalSize),r=d(this.upperRightEntries());try{for(r.s();!(t=r.n()).done;){var i=f(t.value,3),o=i[0],a=i[1],s=i[2];o!==a&&n.set(o,a,s)}}catch(t){r.e(t)}finally{r.f()}return n}},{key:"toCompact",value:function(){for(var t=this.diagonalSize,e=new Array((t-1)*t/2),n=1,r=0,i=0;i<e.length;i++)e[i]=this.get(r,n),++n>=t&&(n=1+ ++r);return e}}],[{key:"isDistanceMatrix",value:function(t){return R.isSymmetricMatrix(t)&&"DistanceMatrix"===t.klassSubType}},{key:"fromCompact",value:function(t){var e=t.length;if(0===e)return new this(0);var n=(Math.sqrt(8*e+1)+1)/2;if(!Number.isInteger(n))throw new TypeError("This array is not a compact representation of a DistanceMatrix, ".concat(JSON.stringify(t)));for(var r=new this(n),i=1,o=0,a=0;a<e;a++)r.set(i,o,t[a]),++i>=n&&(i=1+ ++o);return r}}])}(R);H.prototype.klassSubType="DistanceMatrix";var z=function(t){function e(t,n,r){var i;return p(this,e),(i=s(this,e)).matrix=t,i.rows=n,i.columns=r,i}return u(e,t),v(e)}(N),K=function(t){function e(t,n){var r;return p(this,e),k(t,n),(r=s(this,e,[t,t.rows,1])).column=n,r}return u(e,t),v(e,[{key:"set",value:function(t,e,n){return this.matrix.set(t,this.column,n),this}},{key:"get",value:function(t){return this.matrix.get(t,this.column)}}])}(z),G=function(t){function e(t,n){var r;return p(this,e),S(t,n),(r=s(this,e,[t,t.rows,n.length])).columnIndices=n,r}return u(e,t),v(e,[{key:"set",value:function(t,e,n){return this.matrix.set(t,this.columnIndices[e],n),this}},{key:"get",value:function(t,e){return this.matrix.get(t,this.columnIndices[e])}}])}(z),V=function(t){function e(t){return p(this,e),s(this,e,[t,t.rows,t.columns])}return u(e,t),v(e,[{key:"set",value:function(t,e,n){return this.matrix.set(t,this.columns-e-1,n),this}},{key:"get",value:function(t,e){return this.matrix.get(t,this.columns-e-1)}}])}(z),W=function(t){function e(t){return p(this,e),s(this,e,[t,t.rows,t.columns])}return u(e,t),v(e,[{key:"set",value:function(t,e,n){return this.matrix.set(this.rows-t-1,e,n),this}},{key:"get",value:function(t,e){return this.matrix.get(this.rows-t-1,e)}}])}(z),Y=function(t){function e(t,n){var r;return p(this,e),B(t,n),(r=s(this,e,[t,1,t.columns])).row=n,r}return u(e,t),v(e,[{key:"set",value:function(t,e,n){return this.matrix.set(this.row,e,n),this}},{key:"get",value:function(t,e){return this.matrix.get(this.row,e)}}])}(z),X=function(t){function e(t,n){var r;return p(this,e),M(t,n),(r=s(this,e,[t,n.length,t.columns])).rowIndices=n,r}return u(e,t),v(e,[{key:"set",value:function(t,e,n){return this.matrix.set(this.rowIndices[t],e,n),this}},{key:"get",value:function(t,e){return this.matrix.get(this.rowIndices[t],e)}}])}(z),q=function(t){function e(t,n,r){var i;return p(this,e),M(t,n),S(t,r),(i=s(this,e,[t,n.length,r.length])).rowIndices=n,i.columnIndices=r,i}return u(e,t),v(e,[{key:"set",value:function(t,e,n){return this.matrix.set(this.rowIndices[t],this.columnIndices[e],n),this}},{key:"get",value:function(t,e){return this.matrix.get(this.rowIndices[t],this.columnIndices[e])}}])}(z),Z=function(t){function e(t,n,r,i,o){var a;return p(this,e),F(t,n,r,i,o),(a=s(this,e,[t,r-n+1,o-i+1])).startRow=n,a.startColumn=i,a}return u(e,t),v(e,[{key:"set",value:function(t,e,n){return this.matrix.set(this.startRow+t,this.startColumn+e,n),this}},{key:"get",value:function(t,e){return this.matrix.get(this.startRow+t,this.startColumn+e)}}])}(z),J=function(t){function e(t){return p(this,e),s(this,e,[t,t.columns,t.rows])}return u(e,t),v(e,[{key:"set",value:function(t,e,n){return this.matrix.set(e,t,n),this}},{key:"get",value:function(t,e){return this.matrix.get(e,t)}}])}(z),$=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p(this,e);var i=r.rows,o=void 0===i?1:i;if(t.length%o!==0)throw new Error("the data length is not divisible by the number of rows");return(n=s(this,e)).rows=o,n.columns=t.length/o,n.data=t,n}return u(e,t),v(e,[{key:"set",value:function(t,e,n){var r=this._calculateIndex(t,e);return this.data[r]=n,this}},{key:"get",value:function(t,e){var n=this._calculateIndex(t,e);return this.data[n]}},{key:"_calculateIndex",value:function(t,e){return t*this.columns+e}}])}(N),tt=function(t){function e(t){var n;return p(this,e),(n=s(this,e)).data=t,n.rows=t.length,n.columns=t[0].length,n}return u(e,t),v(e,[{key:"set",value:function(t,e,n){return this.data[t][e]=n,this}},{key:"get",value:function(t,e){return this.data[t][e]}}])}(N),et=function(){return v(function t(e){p(this,t);var n,r,i,o,a,s,u,c,l,A=(e=tt.checkMatrix(e)).clone(),f=A.rows,d=A.columns,h=new Float64Array(f),v=1;for(n=0;n<f;n++)h[n]=n;for(c=new Float64Array(f),r=0;r<d;r++){for(n=0;n<f;n++)c[n]=A.get(n,r);for(n=0;n<f;n++){for(l=Math.min(n,r),a=0,i=0;i<l;i++)a+=A.get(n,i)*c[i];c[n]-=a,A.set(n,r,c[n])}for(o=r,n=r+1;n<f;n++)Math.abs(c[n])>Math.abs(c[o])&&(o=n);if(o!==r){for(i=0;i<d;i++)s=A.get(o,i),A.set(o,i,A.get(r,i)),A.set(r,i,s);u=h[o],h[o]=h[r],h[r]=u,v=-v}if(r<f&&0!==A.get(r,r))for(n=r+1;n<f;n++)A.set(n,r,A.get(n,r)/A.get(r,r))}this.LU=A,this.pivotVector=h,this.pivotSign=v},[{key:"isSingular",value:function(){for(var t=this.LU,e=t.columns,n=0;n<e;n++)if(0===t.get(n,n))return!0;return!1}},{key:"solve",value:function(t){t=U.checkMatrix(t);var e=this.LU;if(e.rows!==t.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var n,r,i,o=t.columns,a=t.subMatrixRow(this.pivotVector,0,o-1),s=e.columns;for(i=0;i<s;i++)for(n=i+1;n<s;n++)for(r=0;r<o;r++)a.set(n,r,a.get(n,r)-a.get(i,r)*e.get(n,i));for(i=s-1;i>=0;i--){for(r=0;r<o;r++)a.set(i,r,a.get(i,r)/e.get(i,i));for(n=0;n<i;n++)for(r=0;r<o;r++)a.set(n,r,a.get(n,r)-a.get(i,r)*e.get(n,i))}return a}},{key:"determinant",get:function(){var t=this.LU;if(!t.isSquare())throw new Error("Matrix must be square");for(var e=this.pivotSign,n=t.columns,r=0;r<n;r++)e*=t.get(r,r);return e}},{key:"lowerTriangularMatrix",get:function(){for(var t=this.LU,e=t.rows,n=t.columns,r=new U(e,n),i=0;i<e;i++)for(var o=0;o<n;o++)i>o?r.set(i,o,t.get(i,o)):i===o?r.set(i,o,1):r.set(i,o,0);return r}},{key:"upperTriangularMatrix",get:function(){for(var t=this.LU,e=t.rows,n=t.columns,r=new U(e,n),i=0;i<e;i++)for(var o=0;o<n;o++)i<=o?r.set(i,o,t.get(i,o)):r.set(i,o,0);return r}},{key:"pivotPermutationVector",get:function(){return Array.from(this.pivotVector)}}])}();function nt(t,e){var n=0;return Math.abs(t)>Math.abs(e)?(n=e/t,Math.abs(t)*Math.sqrt(1+n*n)):0!==e?(n=t/e,Math.abs(e)*Math.sqrt(1+n*n)):0}var rt=function(){return v(function t(e){p(this,t);var n,r,i,o,a=(e=tt.checkMatrix(e)).clone(),s=e.rows,u=e.columns,c=new Float64Array(u);for(i=0;i<u;i++){var l=0;for(n=i;n<s;n++)l=nt(l,a.get(n,i));if(0!==l){for(a.get(i,i)<0&&(l=-l),n=i;n<s;n++)a.set(n,i,a.get(n,i)/l);for(a.set(i,i,a.get(i,i)+1),r=i+1;r<u;r++){for(o=0,n=i;n<s;n++)o+=a.get(n,i)*a.get(n,r);for(o=-o/a.get(i,i),n=i;n<s;n++)a.set(n,r,a.get(n,r)+o*a.get(n,i))}}c[i]=-l}this.QR=a,this.Rdiag=c},[{key:"solve",value:function(t){t=U.checkMatrix(t);var e=this.QR,n=e.rows;if(t.rows!==n)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var r,i,o,a,s=t.columns,u=t.clone(),c=e.columns;for(o=0;o<c;o++)for(i=0;i<s;i++){for(a=0,r=o;r<n;r++)a+=e.get(r,o)*u.get(r,i);for(a=-a/e.get(o,o),r=o;r<n;r++)u.set(r,i,u.get(r,i)+a*e.get(r,o))}for(o=c-1;o>=0;o--){for(i=0;i<s;i++)u.set(o,i,u.get(o,i)/this.Rdiag[o]);for(r=0;r<o;r++)for(i=0;i<s;i++)u.set(r,i,u.get(r,i)-u.get(o,i)*e.get(r,o))}return u.subMatrix(0,c-1,0,s-1)}},{key:"isFullRank",value:function(){for(var t=this.QR.columns,e=0;e<t;e++)if(0===this.Rdiag[e])return!1;return!0}},{key:"upperTriangularMatrix",get:function(){var t,e,n=this.QR,r=n.columns,i=new U(r,r);for(t=0;t<r;t++)for(e=0;e<r;e++)t<e?i.set(t,e,n.get(t,e)):t===e?i.set(t,e,this.Rdiag[t]):i.set(t,e,0);return i}},{key:"orthogonalMatrix",get:function(){var t,e,n,r,i=this.QR,o=i.rows,a=i.columns,s=new U(o,a);for(n=a-1;n>=0;n--){for(t=0;t<o;t++)s.set(t,n,0);for(s.set(n,n,1),e=n;e<a;e++)if(0!==i.get(n,n)){for(r=0,t=n;t<o;t++)r+=i.get(t,n)*s.get(t,e);for(r=-r/i.get(n,n),t=n;t<o;t++)s.set(t,e,s.get(t,e)+r*i.get(t,n))}}return s}}])}(),it=function(){return v(function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(p(this,t),(e=tt.checkMatrix(e)).isEmpty())throw new Error("Matrix must be non-empty");var r,i=e.rows,o=e.columns,a=n.computeLeftSingularVectors,s=void 0===a||a,u=n.computeRightSingularVectors,c=void 0===u||u,l=n.autoTranspose,A=void 0!==l&&l,f=Boolean(s),d=Boolean(c),h=!1;if(i<o)if(A){i=(r=e.transpose()).rows,o=r.columns,h=!0;var v=f;f=d,d=v}else r=e.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else r=e.clone();for(var g=Math.min(i,o),y=Math.min(i+1,o),m=new Float64Array(y),b=new U(i,g),w=new U(o,o),x=new Float64Array(o),E=new Float64Array(i),B=new Float64Array(y),k=0;k<y;k++)B[k]=k;for(var O=Math.min(i-1,o),C=Math.max(0,Math.min(o-2,i)),M=Math.max(O,C),S=0;S<M;S++){if(S<O){m[S]=0;for(var F=S;F<i;F++)m[S]=nt(m[S],r.get(F,S));if(0!==m[S]){r.get(S,S)<0&&(m[S]=-m[S]);for(var T=S;T<i;T++)r.set(T,S,r.get(T,S)/m[S]);r.set(S,S,r.get(S,S)+1)}m[S]=-m[S]}for(var P=S+1;P<o;P++){if(S<O&&0!==m[S]){for(var I=0,N=S;N<i;N++)I+=r.get(N,S)*r.get(N,P);I=-I/r.get(S,S);for(var L=S;L<i;L++)r.set(L,P,r.get(L,P)+I*r.get(L,S))}x[P]=r.get(S,P)}if(f&&S<O)for(var _=S;_<i;_++)b.set(_,S,r.get(_,S));if(S<C){x[S]=0;for(var Q=S+1;Q<o;Q++)x[S]=nt(x[S],x[Q]);if(0!==x[S]){x[S+1]<0&&(x[S]=0-x[S]);for(var j=S+1;j<o;j++)x[j]/=x[S];x[S+1]+=1}if(x[S]=-x[S],S+1<i&&0!==x[S]){for(var D=S+1;D<i;D++)E[D]=0;for(var R=S+1;R<i;R++)for(var H=S+1;H<o;H++)E[R]+=x[H]*r.get(R,H);for(var z=S+1;z<o;z++)for(var K=-x[z]/x[S+1],G=S+1;G<i;G++)r.set(G,z,r.get(G,z)+K*E[G])}if(d)for(var V=S+1;V<o;V++)w.set(V,S,x[V])}}var W=Math.min(o,i+1);if(O<o&&(m[O]=r.get(O,O)),i<W&&(m[W-1]=0),C+1<W&&(x[C]=r.get(C,W-1)),x[W-1]=0,f){for(var Y=O;Y<g;Y++){for(var X=0;X<i;X++)b.set(X,Y,0);b.set(Y,Y,1)}for(var q=O-1;q>=0;q--)if(0!==m[q]){for(var Z=q+1;Z<g;Z++){for(var J=0,$=q;$<i;$++)J+=b.get($,q)*b.get($,Z);J=-J/b.get(q,q);for(var et=q;et<i;et++)b.set(et,Z,b.get(et,Z)+J*b.get(et,q))}for(var rt=q;rt<i;rt++)b.set(rt,q,-b.get(rt,q));b.set(q,q,1+b.get(q,q));for(var it=0;it<q-1;it++)b.set(it,q,0)}else{for(var ot=0;ot<i;ot++)b.set(ot,q,0);b.set(q,q,1)}}if(d)for(var at=o-1;at>=0;at--){if(at<C&&0!==x[at])for(var st=at+1;st<o;st++){for(var ut=0,ct=at+1;ct<o;ct++)ut+=w.get(ct,at)*w.get(ct,st);ut=-ut/w.get(at+1,at);for(var lt=at+1;lt<o;lt++)w.set(lt,st,w.get(lt,st)+ut*w.get(lt,at))}for(var At=0;At<o;At++)w.set(At,at,0);w.set(at,at,1)}for(var ft=W-1,dt=Number.EPSILON;W>0;){var ht=void 0,pt=void 0;for(ht=W-2;ht>=-1&&-1!==ht;ht--){var vt=Number.MIN_VALUE+dt*Math.abs(m[ht]+Math.abs(m[ht+1]));if(Math.abs(x[ht])<=vt||Number.isNaN(x[ht])){x[ht]=0;break}}if(ht===W-2)pt=4;else{var gt=void 0;for(gt=W-1;gt>=ht&&gt!==ht;gt--){var yt=(gt!==W?Math.abs(x[gt]):0)+(gt!==ht+1?Math.abs(x[gt-1]):0);if(Math.abs(m[gt])<=dt*yt){m[gt]=0;break}}gt===ht?pt=3:gt===W-1?pt=1:(pt=2,ht=gt)}switch(ht++,pt){case 1:var mt=x[W-2];x[W-2]=0;for(var bt=W-2;bt>=ht;bt--){var wt=nt(m[bt],mt),xt=m[bt]/wt,Et=mt/wt;if(m[bt]=wt,bt!==ht&&(mt=-Et*x[bt-1],x[bt-1]=xt*x[bt-1]),d)for(var Bt=0;Bt<o;Bt++)wt=xt*w.get(Bt,bt)+Et*w.get(Bt,W-1),w.set(Bt,W-1,-Et*w.get(Bt,bt)+xt*w.get(Bt,W-1)),w.set(Bt,bt,wt)}break;case 2:var kt=x[ht-1];x[ht-1]=0;for(var Ot=ht;Ot<W;Ot++){var Ct=nt(m[Ot],kt),Mt=m[Ot]/Ct,St=kt/Ct;if(m[Ot]=Ct,kt=-St*x[Ot],x[Ot]=Mt*x[Ot],f)for(var Ft=0;Ft<i;Ft++)Ct=Mt*b.get(Ft,Ot)+St*b.get(Ft,ht-1),b.set(Ft,ht-1,-St*b.get(Ft,Ot)+Mt*b.get(Ft,ht-1)),b.set(Ft,Ot,Ct)}break;case 3:var Tt=Math.max(Math.abs(m[W-1]),Math.abs(m[W-2]),Math.abs(x[W-2]),Math.abs(m[ht]),Math.abs(x[ht])),Pt=m[W-1]/Tt,It=m[W-2]/Tt,Nt=x[W-2]/Tt,Lt=m[ht]/Tt,_t=x[ht]/Tt,Qt=((It+Pt)*(It-Pt)+Nt*Nt)/2,Ut=Pt*Nt*(Pt*Nt),jt=0;0===Qt&&0===Ut||(jt=Ut/(Qt+(jt=Qt<0?0-Math.sqrt(Qt*Qt+Ut):Math.sqrt(Qt*Qt+Ut))));for(var Dt=(Lt+Pt)*(Lt-Pt)+jt,Rt=Lt*_t,Ht=ht;Ht<W-1;Ht++){var zt=nt(Dt,Rt);0===zt&&(zt=Number.MIN_VALUE);var Kt=Dt/zt,Gt=Rt/zt;if(Ht!==ht&&(x[Ht-1]=zt),Dt=Kt*m[Ht]+Gt*x[Ht],x[Ht]=Kt*x[Ht]-Gt*m[Ht],Rt=Gt*m[Ht+1],m[Ht+1]=Kt*m[Ht+1],d)for(var Vt=0;Vt<o;Vt++)zt=Kt*w.get(Vt,Ht)+Gt*w.get(Vt,Ht+1),w.set(Vt,Ht+1,-Gt*w.get(Vt,Ht)+Kt*w.get(Vt,Ht+1)),w.set(Vt,Ht,zt);if(0===(zt=nt(Dt,Rt))&&(zt=Number.MIN_VALUE),Kt=Dt/zt,Gt=Rt/zt,m[Ht]=zt,Dt=Kt*x[Ht]+Gt*m[Ht+1],m[Ht+1]=-Gt*x[Ht]+Kt*m[Ht+1],Rt=Gt*x[Ht+1],x[Ht+1]=Kt*x[Ht+1],f&&Ht<i-1)for(var Wt=0;Wt<i;Wt++)zt=Kt*b.get(Wt,Ht)+Gt*b.get(Wt,Ht+1),b.set(Wt,Ht+1,-Gt*b.get(Wt,Ht)+Kt*b.get(Wt,Ht+1)),b.set(Wt,Ht,zt)}x[W-2]=Dt;break;case 4:if(m[ht]<=0&&(m[ht]=m[ht]<0?-m[ht]:0,d))for(var Yt=0;Yt<=ft;Yt++)w.set(Yt,ht,-w.get(Yt,ht));for(;ht<ft&&!(m[ht]>=m[ht+1]);){var Xt=m[ht];if(m[ht]=m[ht+1],m[ht+1]=Xt,d&&ht<o-1)for(var qt=0;qt<o;qt++)Xt=w.get(qt,ht+1),w.set(qt,ht+1,w.get(qt,ht)),w.set(qt,ht,Xt);if(f&&ht<i-1)for(var Zt=0;Zt<i;Zt++)Xt=b.get(Zt,ht+1),b.set(Zt,ht+1,b.get(Zt,ht)),b.set(Zt,ht,Xt);ht++}W--}}if(h){var Jt=w;w=b,b=Jt}this.m=i,this.n=o,this.s=m,this.U=b,this.V=w},[{key:"solve",value:function(t){for(var e=t,n=this.threshold,r=this.s.length,i=U.zeros(r,r),o=0;o<r;o++)Math.abs(this.s[o])<=n?i.set(o,o,0):i.set(o,o,1/this.s[o]);for(var a=this.U,s=this.rightSingularVectors,u=s.mmul(i),c=s.rows,l=a.rows,A=U.zeros(c,l),f=0;f<c;f++)for(var d=0;d<l;d++){for(var h=0,p=0;p<r;p++)h+=u.get(f,p)*a.get(d,p);A.set(f,d,h)}return A.mmul(e)}},{key:"solveForDiagonal",value:function(t){return this.solve(U.diag(t))}},{key:"inverse",value:function(){for(var t=this.V,e=this.threshold,n=t.rows,r=t.columns,i=new U(n,this.s.length),o=0;o<n;o++)for(var a=0;a<r;a++)Math.abs(this.s[a])>e&&i.set(o,a,t.get(o,a)/this.s[a]);for(var s=this.U,u=s.rows,c=s.columns,l=new U(n,u),A=0;A<n;A++)for(var f=0;f<u;f++){for(var d=0,h=0;h<c;h++)d+=i.get(A,h)*s.get(f,h);l.set(A,f,d)}return l}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,n=this.s,r=0,i=n.length;r<i;r++)n[r]>t&&e++;return e}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return U.diag(this.s)}}])}();function ot(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t=tt.checkMatrix(t),e=tt.checkMatrix(e),n?new it(t).solve(e):t.isSquare()?new et(t).solve(e):new rt(t).solve(e)}function at(t,e){for(var n=[],r=0;r<t;r++)r!==e&&n.push(r);return n}function st(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-9;if(t>(arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e-9))return new Array(e.rows+1).fill(0);for(var i=e.addRow(n,[0]),o=0;o<i.rows;o++)Math.abs(i.get(o,0))<r&&i.set(o,0,0);return i.to1DArray()}var ut=function(){return v(function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p(this,t);var r=n.assumeSymmetric,i=void 0!==r&&r;if(!(e=tt.checkMatrix(e)).isSquare())throw new Error("Matrix is not a square matrix");if(e.isEmpty())throw new Error("Matrix must be non-empty");var o,a,s=e.columns,u=new U(s,s),c=new Float64Array(s),l=new Float64Array(s),A=e;if(i||e.isSymmetric()){for(o=0;o<s;o++)for(a=0;a<s;a++)u.set(o,a,A.get(o,a));!function(t,e,n,r){var i,o,a,s,u,c,l,A;for(u=0;u<t;u++)n[u]=r.get(t-1,u);for(s=t-1;s>0;s--){for(A=0,a=0,c=0;c<s;c++)A+=Math.abs(n[c]);if(0===A)for(e[s]=n[s-1],u=0;u<s;u++)n[u]=r.get(s-1,u),r.set(s,u,0),r.set(u,s,0);else{for(c=0;c<s;c++)n[c]/=A,a+=n[c]*n[c];for(i=n[s-1],o=Math.sqrt(a),i>0&&(o=-o),e[s]=A*o,a-=i*o,n[s-1]=i-o,u=0;u<s;u++)e[u]=0;for(u=0;u<s;u++){for(i=n[u],r.set(u,s,i),o=e[u]+r.get(u,u)*i,c=u+1;c<=s-1;c++)o+=r.get(c,u)*n[c],e[c]+=r.get(c,u)*i;e[u]=o}for(i=0,u=0;u<s;u++)e[u]/=a,i+=e[u]*n[u];for(l=i/(a+a),u=0;u<s;u++)e[u]-=l*n[u];for(u=0;u<s;u++){for(i=n[u],o=e[u],c=u;c<=s-1;c++)r.set(c,u,r.get(c,u)-(i*e[c]+o*n[c]));n[u]=r.get(s-1,u),r.set(s,u,0)}}n[s]=a}for(s=0;s<t-1;s++){if(r.set(t-1,s,r.get(s,s)),r.set(s,s,1),0!==(a=n[s+1])){for(c=0;c<=s;c++)n[c]=r.get(c,s+1)/a;for(u=0;u<=s;u++){for(o=0,c=0;c<=s;c++)o+=r.get(c,s+1)*r.get(c,u);for(c=0;c<=s;c++)r.set(c,u,r.get(c,u)-o*n[c])}}for(c=0;c<=s;c++)r.set(c,s+1,0)}for(u=0;u<t;u++)n[u]=r.get(t-1,u),r.set(t-1,u,0);r.set(t-1,t-1,1),e[0]=0}(s,l,c,u),function(t,e,n,r){var i,o,a,s,u,c,l,A,f,d,h,p,v,g,y,m;for(a=1;a<t;a++)e[a-1]=e[a];e[t-1]=0;var b=0,w=0,x=Number.EPSILON;for(c=0;c<t;c++){for(w=Math.max(w,Math.abs(n[c])+Math.abs(e[c])),l=c;l<t&&!(Math.abs(e[l])<=x*w);)l++;if(l>c)do{for(i=n[c],f=nt(A=(n[c+1]-i)/(2*e[c]),1),A<0&&(f=-f),n[c]=e[c]/(A+f),n[c+1]=e[c]*(A+f),d=n[c+1],o=i-n[c],a=c+2;a<t;a++)n[a]-=o;for(b+=o,A=n[l],p=h=1,v=h,g=e[c+1],y=0,m=0,a=l-1;a>=c;a--)for(v=p,p=h,m=y,i=h*e[a],o=h*A,f=nt(A,e[a]),e[a+1]=y*f,y=e[a]/f,A=(h=A/f)*n[a]-y*i,n[a+1]=o+y*(h*i+y*n[a]),u=0;u<t;u++)o=r.get(u,a+1),r.set(u,a+1,y*r.get(u,a)+h*o),r.set(u,a,h*r.get(u,a)-y*o);A=-y*m*v*g*e[c]/d,e[c]=y*A,n[c]=h*A}while(Math.abs(e[c])>x*w);n[c]=n[c]+b,e[c]=0}for(a=0;a<t-1;a++){for(u=a,A=n[a],s=a+1;s<t;s++)n[s]<A&&(u=s,A=n[s]);if(u!==a)for(n[u]=n[a],n[a]=A,s=0;s<t;s++)A=r.get(s,a),r.set(s,a,r.get(s,u)),r.set(s,u,A)}}(s,l,c,u)}else{var f=new U(s,s),d=new Float64Array(s);for(a=0;a<s;a++)for(o=0;o<s;o++)f.set(o,a,A.get(o,a));!function(t,e,n,r){var i,o,a,s,u,c,l,A=t-1;for(c=1;c<=A-1;c++){for(l=0,s=c;s<=A;s++)l+=Math.abs(e.get(s,c-1));if(0!==l){for(a=0,s=A;s>=c;s--)n[s]=e.get(s,c-1)/l,a+=n[s]*n[s];for(o=Math.sqrt(a),n[c]>0&&(o=-o),a-=n[c]*o,n[c]=n[c]-o,u=c;u<t;u++){for(i=0,s=A;s>=c;s--)i+=n[s]*e.get(s,u);for(i/=a,s=c;s<=A;s++)e.set(s,u,e.get(s,u)-i*n[s])}for(s=0;s<=A;s++){for(i=0,u=A;u>=c;u--)i+=n[u]*e.get(s,u);for(i/=a,u=c;u<=A;u++)e.set(s,u,e.get(s,u)-i*n[u])}n[c]=l*n[c],e.set(c,c-1,l*o)}}for(s=0;s<t;s++)for(u=0;u<t;u++)r.set(s,u,s===u?1:0);for(c=A-1;c>=1;c--)if(0!==e.get(c,c-1)){for(s=c+1;s<=A;s++)n[s]=e.get(s,c-1);for(u=c;u<=A;u++){for(o=0,s=c;s<=A;s++)o+=n[s]*r.get(s,u);for(o=o/n[c]/e.get(c,c-1),s=c;s<=A;s++)r.set(s,u,r.get(s,u)+o*n[s])}}}(s,f,d,u),function(t,e,n,r,i){var o,a,s,u,c,l,A,f,d,h,p,v,g,y,m,b=t-1,w=t-1,x=Number.EPSILON,E=0,B=0,k=0,O=0,C=0,M=0,S=0,F=0;for(o=0;o<t;o++)for((o<0||o>w)&&(n[o]=i.get(o,o),e[o]=0),a=Math.max(o-1,0);a<t;a++)B+=Math.abs(i.get(o,a));for(;b>=0;){for(u=b;u>0&&(0===(M=Math.abs(i.get(u-1,u-1))+Math.abs(i.get(u,u)))&&(M=B),!(Math.abs(i.get(u,u-1))<x*M));)u--;if(u===b)i.set(b,b,i.get(b,b)+E),n[b]=i.get(b,b),e[b]=0,b--,F=0;else if(u===b-1){if(A=i.get(b,b-1)*i.get(b-1,b),O=(k=(i.get(b-1,b-1)-i.get(b,b))/2)*k+A,S=Math.sqrt(Math.abs(O)),i.set(b,b,i.get(b,b)+E),i.set(b-1,b-1,i.get(b-1,b-1)+E),f=i.get(b,b),O>=0){for(S=k>=0?k+S:k-S,n[b-1]=f+S,n[b]=n[b-1],0!==S&&(n[b]=f-A/S),e[b-1]=0,e[b]=0,k=(f=i.get(b,b-1))/(M=Math.abs(f)+Math.abs(S)),O=S/M,k/=C=Math.sqrt(k*k+O*O),O/=C,a=b-1;a<t;a++)S=i.get(b-1,a),i.set(b-1,a,O*S+k*i.get(b,a)),i.set(b,a,O*i.get(b,a)-k*S);for(o=0;o<=b;o++)S=i.get(o,b-1),i.set(o,b-1,O*S+k*i.get(o,b)),i.set(o,b,O*i.get(o,b)-k*S);for(o=0;o<=w;o++)S=r.get(o,b-1),r.set(o,b-1,O*S+k*r.get(o,b)),r.set(o,b,O*r.get(o,b)-k*S)}else n[b-1]=f+k,n[b]=f+k,e[b-1]=S,e[b]=-S;b-=2,F=0}else{if(f=i.get(b,b),d=0,A=0,u<b&&(d=i.get(b-1,b-1),A=i.get(b,b-1)*i.get(b-1,b)),10===F){for(E+=f,o=0;o<=b;o++)i.set(o,o,i.get(o,o)-f);f=d=.75*(M=Math.abs(i.get(b,b-1))+Math.abs(i.get(b-1,b-2))),A=-.4375*M*M}if(30===F&&(M=(M=(d-f)/2)*M+A)>0){for(M=Math.sqrt(M),d<f&&(M=-M),M=f-A/((d-f)/2+M),o=0;o<=b;o++)i.set(o,o,i.get(o,o)-M);E+=M,f=d=A=.964}for(F+=1,c=b-2;c>=u&&(k=((C=f-(S=i.get(c,c)))*(M=d-S)-A)/i.get(c+1,c)+i.get(c,c+1),O=i.get(c+1,c+1)-S-C-M,C=i.get(c+2,c+1),k/=M=Math.abs(k)+Math.abs(O)+Math.abs(C),O/=M,C/=M,c!==u)&&!(Math.abs(i.get(c,c-1))*(Math.abs(O)+Math.abs(C))<x*(Math.abs(k)*(Math.abs(i.get(c-1,c-1))+Math.abs(S)+Math.abs(i.get(c+1,c+1)))));)c--;for(o=c+2;o<=b;o++)i.set(o,o-2,0),o>c+2&&i.set(o,o-3,0);for(s=c;s<=b-1&&(y=s!==b-1,s!==c&&(k=i.get(s,s-1),O=i.get(s+1,s-1),C=y?i.get(s+2,s-1):0,0!==(f=Math.abs(k)+Math.abs(O)+Math.abs(C))&&(k/=f,O/=f,C/=f)),0!==f);s++)if(M=Math.sqrt(k*k+O*O+C*C),k<0&&(M=-M),0!==M){for(s!==c?i.set(s,s-1,-M*f):u!==c&&i.set(s,s-1,-i.get(s,s-1)),f=(k+=M)/M,d=O/M,S=C/M,O/=k,C/=k,a=s;a<t;a++)k=i.get(s,a)+O*i.get(s+1,a),y&&(k+=C*i.get(s+2,a),i.set(s+2,a,i.get(s+2,a)-k*S)),i.set(s,a,i.get(s,a)-k*f),i.set(s+1,a,i.get(s+1,a)-k*d);for(o=0;o<=Math.min(b,s+3);o++)k=f*i.get(o,s)+d*i.get(o,s+1),y&&(k+=S*i.get(o,s+2),i.set(o,s+2,i.get(o,s+2)-k*C)),i.set(o,s,i.get(o,s)-k),i.set(o,s+1,i.get(o,s+1)-k*O);for(o=0;o<=w;o++)k=f*r.get(o,s)+d*r.get(o,s+1),y&&(k+=S*r.get(o,s+2),r.set(o,s+2,r.get(o,s+2)-k*C)),r.set(o,s,r.get(o,s)-k),r.set(o,s+1,r.get(o,s+1)-k*O)}}}if(0!==B){for(b=t-1;b>=0;b--)if(k=n[b],0===(O=e[b]))for(u=b,i.set(b,b,1),o=b-1;o>=0;o--){for(A=i.get(o,o)-k,C=0,a=u;a<=b;a++)C+=i.get(o,a)*i.get(a,b);if(e[o]<0)S=A,M=C;else if(u=o,0===e[o]?i.set(o,b,0!==A?-C/A:-C/(x*B)):(f=i.get(o,o+1),d=i.get(o+1,o),l=(f*M-S*C)/(O=(n[o]-k)*(n[o]-k)+e[o]*e[o]),i.set(o,b,l),i.set(o+1,b,Math.abs(f)>Math.abs(S)?(-C-A*l)/f:(-M-d*l)/S)),x*(l=Math.abs(i.get(o,b)))*l>1)for(a=o;a<=b;a++)i.set(a,b,i.get(a,b)/l)}else if(O<0)for(u=b-1,Math.abs(i.get(b,b-1))>Math.abs(i.get(b-1,b))?(i.set(b-1,b-1,O/i.get(b,b-1)),i.set(b-1,b,-(i.get(b,b)-k)/i.get(b,b-1))):(m=ct(0,-i.get(b-1,b),i.get(b-1,b-1)-k,O),i.set(b-1,b-1,m[0]),i.set(b-1,b,m[1])),i.set(b,b-1,0),i.set(b,b,1),o=b-2;o>=0;o--){for(h=0,p=0,a=u;a<=b;a++)h+=i.get(o,a)*i.get(a,b-1),p+=i.get(o,a)*i.get(a,b);if(A=i.get(o,o)-k,e[o]<0)S=A,C=h,M=p;else if(u=o,0===e[o]?(m=ct(-h,-p,A,O),i.set(o,b-1,m[0]),i.set(o,b,m[1])):(f=i.get(o,o+1),d=i.get(o+1,o),v=(n[o]-k)*(n[o]-k)+e[o]*e[o]-O*O,g=2*(n[o]-k)*O,0===v&&0===g&&(v=x*B*(Math.abs(A)+Math.abs(O)+Math.abs(f)+Math.abs(d)+Math.abs(S))),m=ct(f*C-S*h+O*p,f*M-S*p-O*h,v,g),i.set(o,b-1,m[0]),i.set(o,b,m[1]),Math.abs(f)>Math.abs(S)+Math.abs(O)?(i.set(o+1,b-1,(-h-A*i.get(o,b-1)+O*i.get(o,b))/f),i.set(o+1,b,(-p-A*i.get(o,b)-O*i.get(o,b-1))/f)):(m=ct(-C-d*i.get(o,b-1),-M-d*i.get(o,b),S,O),i.set(o+1,b-1,m[0]),i.set(o+1,b,m[1]))),x*(l=Math.max(Math.abs(i.get(o,b-1)),Math.abs(i.get(o,b))))*l>1)for(a=o;a<=b;a++)i.set(a,b-1,i.get(a,b-1)/l),i.set(a,b,i.get(a,b)/l)}for(o=0;o<t;o++)if(o<0||o>w)for(a=o;a<t;a++)r.set(o,a,i.get(o,a));for(a=t-1;a>=0;a--)for(o=0;o<=w;o++){for(S=0,s=0;s<=Math.min(a,w);s++)S+=r.get(o,s)*i.get(s,a);r.set(o,a,S)}}}(s,l,c,u,f)}this.n=s,this.e=l,this.d=c,this.V=u},[{key:"realEigenvalues",get:function(){return Array.from(this.d)}},{key:"imaginaryEigenvalues",get:function(){return Array.from(this.e)}},{key:"eigenvectorMatrix",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){var t,e,n=this.n,r=this.e,i=this.d,o=new U(n,n);for(t=0;t<n;t++){for(e=0;e<n;e++)o.set(t,e,0);o.set(t,t,i[t]),r[t]>0?o.set(t,t+1,r[t]):r[t]<0&&o.set(t,t-1,r[t])}return o}}])}();function ct(t,e,n,r){var i,o;return Math.abs(n)>Math.abs(r)?[(t+(i=r/n)*e)/(o=n+i*r),(e-i*t)/o]:[((i=n/r)*t+e)/(o=r+i*n),(i*e-t)/o]}var lt=function(){return v(function t(e){if(p(this,t),!(e=tt.checkMatrix(e)).isSymmetric())throw new Error("Matrix is not symmetric");var n,r,i,o=e,a=o.rows,s=new U(a,a),u=!0;for(r=0;r<a;r++){var c=0;for(i=0;i<r;i++){var l=0;for(n=0;n<i;n++)l+=s.get(i,n)*s.get(r,n);l=(o.get(r,i)-l)/s.get(i,i),s.set(r,i,l),c+=l*l}for(c=o.get(r,r)-c,u&&(u=c>0),s.set(r,r,Math.sqrt(Math.max(c,0))),i=r+1;i<a;i++)s.set(r,i,0)}this.L=s,this.positiveDefinite=u},[{key:"isPositiveDefinite",value:function(){return this.positiveDefinite}},{key:"solve",value:function(t){t=tt.checkMatrix(t);var e=this.L,n=e.rows;if(t.rows!==n)throw new Error("Matrix dimensions do not match");if(!1===this.isPositiveDefinite())throw new Error("Matrix is not positive definite");var r,i,o,a=t.columns,s=t.clone();for(o=0;o<n;o++)for(i=0;i<a;i++){for(r=0;r<o;r++)s.set(o,i,s.get(o,i)-s.get(r,i)*e.get(o,r));s.set(o,i,s.get(o,i)/e.get(o,o))}for(o=n-1;o>=0;o--)for(i=0;i<a;i++){for(r=o+1;r<n;r++)s.set(o,i,s.get(o,i)-s.get(r,i)*e.get(r,o));s.set(o,i,s.get(o,i)/e.get(o,o))}return s}},{key:"lowerTriangularMatrix",get:function(){return this.L}}])}(),At=v(function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p(this,t),e=tt.checkMatrix(e);var r,i=n.Y,o=n.scaleScores,a=void 0!==o&&o,s=n.maxIterations,u=void 0===s?1e3:s,c=n.terminationCriteria,l=void 0===c?1e-10:c;if(i){if((i=g.isAnyArray(i)&&"number"==typeof i[0]?U.columnVector(i):tt.checkMatrix(i)).rows!==e.rows)throw new Error("Y should have the same number of rows as X");r=i.getColumnVector(0)}else r=e.getColumnVector(0);for(var A,f,d,h,v=1,y=0;y<u&&v>l;y++)d=(d=e.transpose().mmul(r).div(r.transpose().mmul(r).get(0,0))).div(d.norm()),A=e.mmul(d).div(d.transpose().mmul(d).get(0,0)),y>0&&(v=A.clone().sub(h).pow(2).sum()),h=A.clone(),i?(f=(f=i.transpose().mmul(A).div(A.transpose().mmul(A).get(0,0))).div(f.norm()),r=i.mmul(f).div(f.transpose().mmul(f).get(0,0))):r=A;if(i){var m=e.transpose().mmul(A).div(A.transpose().mmul(A).get(0,0));m=m.div(m.norm());var b=e.clone().sub(A.clone().mmul(m.transpose())),w=r.transpose().mmul(A).div(A.transpose().mmul(A).get(0,0)),x=i.clone().sub(A.clone().mulS(w.get(0,0)).mmul(f.transpose()));this.t=A,this.p=m.transpose(),this.w=d.transpose(),this.q=f,this.u=r,this.s=A.transpose().mmul(A),this.xResidual=b,this.yResidual=x,this.betas=w}else this.w=d.transpose(),this.s=A.transpose().mmul(A).sqrt(),this.t=a?A.clone().div(this.s.get(0,0)):A,this.xResidual=e.sub(A.mmul(d.transpose()))});e.y3=N,e.jy=lt,e.oN=lt,e.Hc=H,e.cg=ut,e.hj=ut,e.LU=et,e.Tb=et,e.uq=U,e.Zm=G,e.Dq=K,e.__=V,e.q0=W,e.lh=X,e.pI=Y,e.zC=q,e.zg=Z,e.g6=J,e.OL=At,e.ks=At,e.QR=rt,e.jp=rt,e.mk=it,e.W2=it,e.l=R,e.KY=$,e.dv=tt,e.BR=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t=new U(t);var r=!1;if("object"!=typeof e||U.isMatrix(e)||g.isAnyArray(e)?e=new U(e):(n=e,e=t,r=!0),t.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");var i=n,o=i.center,a=void 0===o||o,s=i.scale,u=void 0===s||s;a&&(t.center("column"),r||e.center("column")),u&&(t.scale("column"),r||e.scale("column"));for(var c=t.standardDeviation("column",{unbiased:!0}),l=r?c:e.standardDeviation("column",{unbiased:!0}),A=t.transpose().mmul(e),f=0;f<A.rows;f++)for(var d=0;d<A.columns;d++)A.set(f,d,A.get(f,d)*(1/(c[f]*l[d]))*(1/(t.rows-1)));return A},e.Wu=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t=new U(t);var r=!1;if("object"!=typeof e||U.isMatrix(e)||g.isAnyArray(e)?e=new U(e):(n=e,e=t,r=!0),t.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");var i=n.center;(void 0===i||i)&&(t=t.center("column"),r||(e=e.center("column")));for(var o=t.transpose().mmul(e),a=0;a<o.rows;a++)for(var s=0;s<o.columns;s++)o.set(a,s,o.get(a,s)*(1/(t.rows-1)));return o},e.a4=function t(e){var n,r,i,o,a,s;if((e=U.checkMatrix(e)).isSquare())return 0===e.columns?1:2===e.columns?(n=e.get(0,0),r=e.get(0,1),i=e.get(1,0),n*e.get(1,1)-r*i):3===e.columns?(o=new q(e,[1,2],[1,2]),a=new q(e,[1,2],[0,2]),s=new q(e,[1,2],[0,1]),n=e.get(0,0),r=e.get(0,1),i=e.get(0,2),n*t(o)-r*t(a)+i*t(s)):new et(e).determinant;throw Error("determinant can only be calculated for a square matrix")},e.DI=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t=tt.checkMatrix(t),e?new it(t).inverse():ot(t,U.eye(t.rows))},e.Jo=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.thresholdValue,r=void 0===n?1e-9:n,i=e.thresholdError,o=void 0===i?1e-9:i,a=(t=U.checkMatrix(t)).rows,s=new U(a,a),u=0;u<a;u++){var c=U.columnVector(t.getRow(u)),l=t.subMatrixRow(at(a,u)).transpose(),A=new it(l).solve(c),f=U.sub(c,l.mmul(A)).abs().max();s.setRow(u,st(f,A,u,r,o))}return s},e.Zi=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.EPSILON;if((t=U.checkMatrix(t)).isEmpty())return t.transpose();for(var n=new it(t,{autoTranspose:!0}),r=n.leftSingularVectors,i=n.rightSingularVectors,o=n.diagonal,a=0;a<o.length;a++)Math.abs(o[a])>e?o[a]=1/o[a]:o[a]=0;return i.mmul(U.diag(o).mmul(r.transpose()))},e.kH=ot,e.LV=function(t,e){if(g.isAnyArray(t))return t[0]&&g.isAnyArray(t[0])?new tt(t):new $(t,e);throw new Error("the argument is not an array")}},7075(t,e,n){var r=n(1922),i=n(4463);t.exports=function(t){return i(t)&&"[object Set]"==r(t)}},7089(t,e,n){var r=n(7532),i=n(5460);t.exports=function(t,e){return r(t,i(t),e)}},7090(t){t.exports=function(t){return t!=t}},7118(t,e,n){var r=n(281);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},7141(t,e,n){"use strict";function r(t,e,n,i){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}r=function(t,e,n,i){function a(e,n){r(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!i,configurable:!i,writable:!i}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},r(t,e,n,i)}n.d(e,{A:()=>r})},7142(t,e,n){var r=n(7942),i=n(8552),o=n(1342),a=o&&o.isTypedArray,s=a?i(a):r;t.exports=s},7155(t){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}},7218(t){t.exports=function(t,e){return function(n){return t(e(n))}}},7219(t,e,n){var r,i=n(4834),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(t){return!!o&&o in t}},7269(t,e,n){var r=n(7118),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0||(n==e.length-1?e.pop():i.call(e,n,1),--this.size,0))}},7320(t,e,n){var r=n(4528);t.exports=function(t){return r(this,t).has(t)}},7333(t,e,n){var r=n(3519);t.exports=function(t,e){if(t!==e){var n=void 0!==t,i=null===t,o=t==t,a=r(t),s=void 0!==e,u=null===e,c=e==e,l=r(e);if(!u&&!l&&!a&&t>e||a&&s&&c&&!u&&!l||i&&s&&c||!n&&c||!o)return 1;if(!i&&!a&&!l&&t<e||l&&n&&o&&!i&&!a||u&&n&&o||!s&&o||!c)return-1}return 0}},7355(t,e,n){var r=n(9165),i=n(5950),o=n(9872);t.exports=function(t){return o(i(t,void 0,r),t+"")}},7374(t,e,n){var r=n(8637),i=n(2002),o=n(5781),a=n(1299),s=o(function(t,e){if(null==t)return[];var n=e.length;return n>1&&a(t,e[0],e[1])?e=[]:n>2&&a(e[0],e[1],e[2])&&(e=[e[0]]),i(t,r(e,1),[])});t.exports=s},7422(t){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.__esModule=!0,t.exports.default=t.exports},7437(t,e,n){"use strict";var r=n(836),i=n(7678).Graph;function o(t,e,n,i){var o;do{o=r.uniqueId(i)}while(t.hasNode(o));return n.dummy=e,t.setNode(o,n),o}function a(t){return r.max(r.map(t.nodes(),function(e){var n=t.node(e).rank;if(!r.isUndefined(n))return n}))}t.exports={addDummyNode:o,simplify:function(t){var e=(new i).setGraph(t.graph());return r.forEach(t.nodes(),function(n){e.setNode(n,t.node(n))}),r.forEach(t.edges(),function(n){var r=e.edge(n.v,n.w)||{weight:0,minlen:1},i=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),e},asNonCompoundGraph:function(t){var e=new i({multigraph:t.isMultigraph()}).setGraph(t.graph());return r.forEach(t.nodes(),function(n){t.children(n).length||e.setNode(n,t.node(n))}),r.forEach(t.edges(),function(n){e.setEdge(n,t.edge(n))}),e},successorWeights:function(t){var e=r.map(t.nodes(),function(e){var n={};return r.forEach(t.outEdges(e),function(e){n[e.w]=(n[e.w]||0)+t.edge(e).weight}),n});return r.zipObject(t.nodes(),e)},predecessorWeights:function(t){var e=r.map(t.nodes(),function(e){var n={};return r.forEach(t.inEdges(e),function(e){n[e.v]=(n[e.v]||0)+t.edge(e).weight}),n});return r.zipObject(t.nodes(),e)},intersectRect:function(t,e){var n,r,i=t.x,o=t.y,a=e.x-i,s=e.y-o,u=t.width/2,c=t.height/2;if(!a&&!s)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(s)*u>Math.abs(a)*c?(s<0&&(c=-c),n=c*a/s,r=c):(a<0&&(u=-u),n=u,r=u*s/a),{x:i+n,y:o+r}},buildLayerMatrix:function(t){var e=r.map(r.range(a(t)+1),function(){return[]});return r.forEach(t.nodes(),function(n){var i=t.node(n),o=i.rank;r.isUndefined(o)||(e[o][i.order]=n)}),e},normalizeRanks:function(t){var e=r.min(r.map(t.nodes(),function(e){return t.node(e).rank}));r.forEach(t.nodes(),function(n){var i=t.node(n);r.has(i,"rank")&&(i.rank-=e)})},removeEmptyRanks:function(t){var e=r.min(r.map(t.nodes(),function(e){return t.node(e).rank})),n=[];r.forEach(t.nodes(),function(r){var i=t.node(r).rank-e;n[i]||(n[i]=[]),n[i].push(r)});var i=0,o=t.graph().nodeRankFactor;r.forEach(n,function(e,n){r.isUndefined(e)&&n%o!==0?--i:i&&r.forEach(e,function(e){t.node(e).rank+=i})})},addBorderNode:function(t,e,n,r){var i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=r),o(t,"border",i,e)},maxRank:a,partition:function(t,e){var n={lhs:[],rhs:[]};return r.forEach(t,function(t){e(t)?n.lhs.push(t):n.rhs.push(t)}),n},time:function(t,e){var n=r.now();try{return e()}finally{console.log(t+" time: "+(r.now()-n)+"ms")}},notime:function(t,e){return e()}}},7471(t){function e(n,r,i,o){var a=Object.defineProperty;try{a({},"",{})}catch(n){a=0}t.exports=e=function(t,n,r,i){function o(n,r){e(t,n,function(t){return this._invoke(n,r,t)})}n?a?a(t,n,{value:r,enumerable:!i,configurable:!i,writable:!i}):t[n]=r:(o("next",0),o("throw",1),o("return",2))},t.exports.__esModule=!0,t.exports.default=t.exports,e(n,r,i,o)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},7504(t){var e=Date.now;t.exports=function(t){var n=0,r=0;return function(){var i=e(),o=16-(i-r);if(r=i,o>0){if(++n>=800)return arguments[0]}else n=0;return t.apply(void 0,arguments)}}},7532(t,e,n){var r=n(1978),i=n(229);t.exports=function(t,e,n,o){var a=!n;n||(n={});for(var s=-1,u=e.length;++s<u;){var c=e[s],l=o?o(n[c],t[c],c,n,t):void 0;void 0===l&&(l=t[c]),a?i(n,c,l):r(n,c,l)}return n}},7578(t,e,n){var r=n(7806),i=n(7595),o=n(6708);t.exports=function(t){var e=i(t);return 1==e.length&&e[0][2]?o(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}},7595(t,e,n){var r=n(9447),i=n(5303);t.exports=function(t){for(var e=i(t),n=e.length;n--;){var o=e[n],a=t[o];e[n]=[o,a,r(a)]}return e}},7621(t,e,n){var r=n(836);t.exports=function(t,e){return r.map(e,function(e){var n=t.inEdges(e);if(n.length){var i=r.reduce(n,function(e,n){var r=t.edge(n),i=t.node(n.v);return{sum:e.sum+r.weight*i.order,weight:e.weight+r.weight}},{sum:0,weight:0});return{v:e,barycenter:i.sum/i.weight,weight:i.weight}}return{v:e}})}},7678(t,e,n){var r;try{r=n(8991)}catch(t){}r||(r=window.graphlib),t.exports=r},7713(t,e,n){var r=n(4419);function i(t,e){void 0===t&&(t=0),void 0===e&&(e=[]);var n=this;n.x=n.y=0,n.leftChild=n.rightChild=null,n.height=0,n.children=e}var o={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function a(t,e,n){n?(e.x=t.x,e.y=t.y):(e.x=t.y,e.y=t.x),t.children.forEach(function(t,r){a(t,e.children[r],n)})}t.exports=function(t,e){void 0===e&&(e={}),e=r.assign({},o,e);var n,s=0,u=function t(e){if(!e)return null;e.width=0,e.depth&&e.depth>s&&(s=e.depth);var n=e.children,r=n.length,o=new i(e.height,[]);return n.forEach(function(e,n){var i=t(e);o.children.push(i),0===n&&(o.leftChild=i),n===r-1&&(o.rightChild=i)}),o.originNode=e,o.isLeaf=e.isLeaf(),o}(t);return function t(e){if(e.isLeaf||0===e.children.length)e.drawingDepth=s;else{var n=e.children.map(function(e){return t(e)}),r=Math.min.apply(null,n);e.drawingDepth=r-1}return e.drawingDepth}(u),function t(r){r.x=r.drawingDepth*e.rankSep,r.isLeaf?(r.y=0,n&&(r.y=n.y+n.height+e.nodeSep,r.originNode.parent!==n.originNode.parent&&(r.y+=e.subTreeSep)),n=r):(r.children.forEach(function(e){t(e)}),r.y=(r.leftChild.y+r.rightChild.y)/2)}(u),a(u,t,e.isHorizontal),t}},7721(t,e,n){var r=n(6126),i=n(1827),o=n(281),a=n(994),s=n(9922),u=n(1048),c=r?r.prototype:void 0,l=c?c.valueOf:void 0;t.exports=function(t,e,n,r,c,A,f){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!A(new i(t),new i(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var d=s;case"[object Set]":var h=1&r;if(d||(d=u),t.size!=e.size&&!h)return!1;var p=f.get(t);if(p)return p==e;r|=2,f.set(t,e);var v=a(d(t),d(e),r,c,A,f);return f.delete(t),v;case"[object Symbol]":if(l)return l.call(t)==l.call(e)}return!1}},7735(t,e,n){t=n.nmd(t);var r=n(1770),i=e&&!e.nodeType&&e,o=i&&t&&!t.nodeType&&t,a=o&&o.exports===i?r.Buffer:void 0,s=a?a.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=s?s(n):new t.constructor(n);return t.copy(r),r}},7797(t,e,n){var r=n(8165),i=n(8552),o=n(1342),a=o&&o.isMap,s=a?i(a):r;t.exports=s},7806(t,e,n){var r=n(5216),i=n(4811);t.exports=function(t,e,n,o){var a=n.length,s=a,u=!o;if(null==t)return!s;for(t=Object(t);a--;){var c=n[a];if(u&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++a<s;){var l=(c=n[a])[0],A=t[l],f=c[1];if(u&&c[2]){if(void 0===A&&!(l in t))return!1}else{var d=new r;if(o)var h=o(A,f,l,t,e,d);if(!(void 0===h?i(f,A,3,o,d):h))return!1}}return!0}},7829(t,e,n){var r=n(9608),i=n(5124),o=n(641);t.exports=function(t){return t&&t.length?r(t,o,i):void 0}},7883(t,e,n){var r=n(1191),i=n(1384);t.exports=function(t){if(!i(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},7886(t,e,n){var r=n(110),i=n(7355)(function(t,e){return null==t?{}:r(t,e)});t.exports=i},7895(t,e,n){"use strict";var r=n(9086);t.exports=o;var i="\0";function o(t){this._isDirected=!r.has(t,"directed")||t.directed,this._isMultigraph=!!r.has(t,"multigraph")&&t.multigraph,this._isCompound=!!r.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=r.constant(void 0),this._defaultEdgeLabelFn=r.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[i]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function a(t,e){t[e]?t[e]++:t[e]=1}function s(t,e){--t[e]||delete t[e]}function u(t,e,n,i){var o=""+e,a=""+n;if(!t&&o>a){var s=o;o=a,a=s}return o+""+a+""+(r.isUndefined(i)?"\0":i)}function c(t,e){return u(t,e.v,e.w,e.name)}o.prototype._nodeCount=0,o.prototype._edgeCount=0,o.prototype.isDirected=function(){return this._isDirected},o.prototype.isMultigraph=function(){return this._isMultigraph},o.prototype.isCompound=function(){return this._isCompound},o.prototype.setGraph=function(t){return this._label=t,this},o.prototype.graph=function(){return this._label},o.prototype.setDefaultNodeLabel=function(t){return r.isFunction(t)||(t=r.constant(t)),this._defaultNodeLabelFn=t,this},o.prototype.nodeCount=function(){return this._nodeCount},o.prototype.nodes=function(){return r.keys(this._nodes)},o.prototype.sources=function(){var t=this;return r.filter(this.nodes(),function(e){return r.isEmpty(t._in[e])})},o.prototype.sinks=function(){var t=this;return r.filter(this.nodes(),function(e){return r.isEmpty(t._out[e])})},o.prototype.setNodes=function(t,e){var n=arguments,i=this;return r.each(t,function(t){n.length>1?i.setNode(t,e):i.setNode(t)}),this},o.prototype.setNode=function(t,e){return r.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=i,this._children[t]={},this._children[i][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},o.prototype.node=function(t){return this._nodes[t]},o.prototype.hasNode=function(t){return r.has(this._nodes,t)},o.prototype.removeNode=function(t){var e=this;if(r.has(this._nodes,t)){var n=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],r.each(this.children(t),function(t){e.setParent(t)}),delete this._children[t]),r.each(r.keys(this._in[t]),n),delete this._in[t],delete this._preds[t],r.each(r.keys(this._out[t]),n),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},o.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(r.isUndefined(e))e=i;else{for(var n=e+="";!r.isUndefined(n);n=this.parent(n))if(n===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},o.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},o.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if(e!==i)return e}},o.prototype.children=function(t){if(r.isUndefined(t)&&(t=i),this._isCompound){var e=this._children[t];if(e)return r.keys(e)}else{if(t===i)return this.nodes();if(this.hasNode(t))return[]}},o.prototype.predecessors=function(t){var e=this._preds[t];if(e)return r.keys(e)},o.prototype.successors=function(t){var e=this._sucs[t];if(e)return r.keys(e)},o.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return r.union(e,this.successors(t))},o.prototype.isLeaf=function(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length},o.prototype.filterNodes=function(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var n=this;r.each(this._nodes,function(n,r){t(r)&&e.setNode(r,n)}),r.each(this._edgeObjs,function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,n.edge(t))});var i={};function o(t){var r=n.parent(t);return void 0===r||e.hasNode(r)?(i[t]=r,r):r in i?i[r]:o(r)}return this._isCompound&&r.each(e.nodes(),function(t){e.setParent(t,o(t))}),e},o.prototype.setDefaultEdgeLabel=function(t){return r.isFunction(t)||(t=r.constant(t)),this._defaultEdgeLabelFn=t,this},o.prototype.edgeCount=function(){return this._edgeCount},o.prototype.edges=function(){return r.values(this._edgeObjs)},o.prototype.setPath=function(t,e){var n=this,i=arguments;return r.reduce(t,function(t,r){return i.length>1?n.setEdge(t,r,e):n.setEdge(t,r),r}),this},o.prototype.setEdge=function(){var t,e,n,i,o=!1,s=arguments[0];"object"==typeof s&&null!==s&&"v"in s?(t=s.v,e=s.w,n=s.name,2===arguments.length&&(i=arguments[1],o=!0)):(t=s,e=arguments[1],n=arguments[3],arguments.length>2&&(i=arguments[2],o=!0)),t=""+t,e=""+e,r.isUndefined(n)||(n=""+n);var c=u(this._isDirected,t,e,n);if(r.has(this._edgeLabels,c))return o&&(this._edgeLabels[c]=i),this;if(!r.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[c]=o?i:this._defaultEdgeLabelFn(t,e,n);var l=function(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var a=i;i=o,o=a}var s={v:i,w:o};return r&&(s.name=r),s}(this._isDirected,t,e,n);return t=l.v,e=l.w,Object.freeze(l),this._edgeObjs[c]=l,a(this._preds[e],t),a(this._sucs[t],e),this._in[e][c]=l,this._out[t][c]=l,this._edgeCount++,this},o.prototype.edge=function(t,e,n){var r=1===arguments.length?c(this._isDirected,arguments[0]):u(this._isDirected,t,e,n);return this._edgeLabels[r]},o.prototype.hasEdge=function(t,e,n){var i=1===arguments.length?c(this._isDirected,arguments[0]):u(this._isDirected,t,e,n);return r.has(this._edgeLabels,i)},o.prototype.removeEdge=function(t,e,n){var r=1===arguments.length?c(this._isDirected,arguments[0]):u(this._isDirected,t,e,n),i=this._edgeObjs[r];return i&&(t=i.v,e=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],s(this._preds[e],t),s(this._sucs[t],e),delete this._in[e][r],delete this._out[t][r],this._edgeCount--),this},o.prototype.inEdges=function(t,e){var n=this._in[t];if(n){var i=r.values(n);return e?r.filter(i,function(t){return t.v===e}):i}},o.prototype.outEdges=function(t,e){var n=this._out[t];if(n){var i=r.values(n);return e?r.filter(i,function(t){return t.w===e}):i}},o.prototype.nodeEdges=function(t,e){var n=this.inEdges(t,e);if(n)return n.concat(this.outEdges(t,e))}},7914(t){var e=Object.prototype.hasOwnProperty;t.exports=function(t){var n=t.length,r=new t.constructor(n);return n&&"string"==typeof t[0]&&e.call(t,"index")&&(r.index=t.index,r.input=t.input),r}},7920(t,e,n){var r=n(4160),i=n(4751);t.exports=function(t,e){return null!=t&&i(t,e,r)}},7942(t,e,n){var r=n(1191),i=n(5783),o=n(4463),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&i(t.length)&&!!a[r(t)]}},7984(t,e,n){var r=n(4419);function i(t,e){var n=0;return t.children.length?t.children.forEach(function(t){n+=i(t,e)}):n=t.height,t._subTreeSep=e.getSubTreeSep(t.data),t.totalHeight=Math.max(t.height,n)+2*t._subTreeSep,t.totalHeight}function o(t){var e=t.children,n=e.length;if(n){e.forEach(function(t){o(t)});var r=e[0],i=e[n-1],a=i.y-r.y+i.height,s=0;if(e.forEach(function(t){s+=t.totalHeight}),a>t.height)t.y=r.y+a/2-t.height/2;else if(1!==e.length||t.height>s){var u=t.y+(t.height-a)/2-r.y;e.forEach(function(t){t.translate(0,u)})}else t.y=(r.y+r.height/2+i.y+i.height/2)/2-t.height/2}}var a={getSubTreeSep:function(){return 0}};t.exports=function(t,e){void 0===e&&(e={}),e=r.assign({},a,e),t.parent={x:0,width:0,height:0,y:0},t.BFTraverse(function(t){t.x=t.parent.x+t.parent.width}),t.parent=null,i(t,e),t.startY=0,t.y=t.totalHeight/2-t.height/2,t.eachNode(function(t){var e=t.children,n=e.length;if(n){var r=e[0];if(r.startY=t.startY+t._subTreeSep,1===n)r.y=t.y+t.height/2-r.height/2;else{r.y=r.startY+r.totalHeight/2-r.height/2;for(var i=1;i<n;i++){var o=e[i];o.startY=e[i-1].startY+e[i-1].totalHeight,o.y=o.startY+o.totalHeight/2-o.height/2}}}}),o(t)}},8e3(t,e,n){var r=n(836),i=n(7437);function o(t,e,n,r,o,a){var s={width:0,height:0,rank:a,borderType:e},u=o[e][a-1],c=i.addDummyNode(t,"border",s,n);o[e][a]=c,t.setParent(c,r),u&&t.setEdge(u,c,{weight:1})}t.exports=function(t){r.forEach(t.children(),function e(n){var i=t.children(n),a=t.node(n);if(i.length&&r.forEach(i,e),r.has(a,"minRank")){a.borderLeft=[],a.borderRight=[];for(var s=a.minRank,u=a.maxRank+1;s<u;++s)o(t,"borderLeft","_bl",n,a,s),o(t,"borderRight","_br",n,a,s)}})}},8144(t){t.exports=function(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}},8165(t,e,n){var r=n(1922),i=n(4463);t.exports=function(t){return i(t)&&"[object Map]"==r(t)}},8190(t){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},8199(t,e,n){var r=n(836);t.exports=function(t){var e=function(t){var e={},n=0;return r.forEach(t.children(),function i(o){var a=n;r.forEach(t.children(o),i),e[o]={low:a,lim:n++}}),e}(t);r.forEach(t.graph().dummyChains,function(n){for(var r=t.node(n),i=r.edgeObj,o=function(t,e,n,r){var i,o,a=[],s=[],u=Math.min(e[n].low,e[r].low),c=Math.max(e[n].lim,e[r].lim);i=n;do{i=t.parent(i),a.push(i)}while(i&&(e[i].low>u||c>e[i].lim));for(o=i,i=r;(i=t.parent(i))!==o;)s.push(i);return{path:a.concat(s.reverse()),lca:o}}(t,e,i.v,i.w),a=o.path,s=o.lca,u=0,c=a[u],l=!0;n!==i.w;){if(r=t.node(n),l){for(;(c=a[u])!==s&&t.node(c).maxRank<r.rank;)u++;c===s&&(l=!1)}if(!l){for(;u<a.length-1&&t.node(c=a[u+1]).minRank<=r.rank;)u++;c=a[u]}t.setParent(n,c),n=t.successors(n)[0]}})}},8256(t,e,n){"use strict";var r=n(90).longestPath,i=n(4188),o=n(6201);t.exports=function(t){switch(t.graph().ranker){case"network-simplex":default:!function(t){o(t)}(t);break;case"tight-tree":!function(t){r(t),i(t)}(t);break;case"longest-path":a(t)}};var a=r},8257(t,e,n){var r=n(7532),i=n(1804);t.exports=function(t,e){return t&&r(e,i(e),t)}},8267(t,e,n){var r=n(1990),i=n(9086);t.exports=function(t,e,n){return i.transform(t.nodes(),function(i,o){i[o]=r(t,o,e,n)},{})}},8311(t,e,n){var r=n(1391),i=n(1384),o=n(3519),a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=r(t);var n=s.test(t);return n||u.test(t)?c(t.slice(2),n?2:8):a.test(t)?NaN:+t}},8325(t){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},8331(t,e,n){var r={compactBox:n(6626),dendrogram:n(6670),indented:n(5860),mindmap:n(4761)};t.exports=r},8337(t,e,n){var r=n(2818),i=n(1299),o=n(6601);t.exports=function(t){return function(e,n,a){return a&&"number"!=typeof a&&i(e,n,a)&&(n=a=void 0),e=o(e),void 0===n?(n=e,e=0):n=o(n),a=void 0===a?e<n?1:-1:o(a),r(e,n,a,t)}}},8494(t,e,n){var r=n(2885),i=n(7269),o=n(2108),a=n(6248),s=n(8728);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},8543(t,e,n){var r=n(5216),i=n(4334),o=n(6536),a=n(4817),s=n(1384),u=n(1804),c=n(3279);t.exports=function t(e,n,l,A,f){e!==n&&o(n,function(o,u){if(f||(f=new r),s(o))a(e,n,u,l,t,A,f);else{var d=A?A(c(e,u),o,u+"",e,n,f):void 0;void 0===d&&(d=o),i(e,u,d)}},u)}},8552(t){t.exports=function(t){return function(e){return t(e)}}},8554(t,e,n){var r=n(3809);function i(){return t.exports=i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=r(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},t.exports.__esModule=!0,t.exports.default=t.exports,i.apply(null,arguments)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},8637(t,e,n){var r=n(1437),i=n(6662);t.exports=function t(e,n,o,a,s){var u=-1,c=e.length;for(o||(o=i),s||(s=[]);++u<c;){var l=e[u];n>0&&o(l)?n>1?t(l,n-1,o,a,s):r(s,l):a||(s[s.length]=l)}return s}},8644(t){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},8650(t,e,n){var r=n(5061),i=n(6111),o=n(66),a=n(5777),s=n(2532),u=n(7142),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=o(t),l=!n&&i(t),A=!n&&!l&&a(t),f=!n&&!l&&!A&&u(t),d=n||l||A||f,h=d?r(t.length,String):[],p=h.length;for(var v in t)!e&&!c.call(t,v)||d&&("length"==v||A&&("offset"==v||"parent"==v)||f&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||s(v,p))||h.push(v);return h}},8711(t){t.exports=function(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}},8728(t,e,n){var r=n(7118);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},8743(t,e,n){var r=n(6536),i=n(2713),o=n(1804);t.exports=function(t,e){return null==t?t:r(t,i(e),o)}},8746(t,e,n){var r=n(5216),i=n(8644),o=n(1978),a=n(9622),s=n(8257),u=n(7735),c=n(6758),l=n(1622),A=n(7089),f=n(3101),d=n(2958),h=n(1922),p=n(7914),v=n(2780),g=n(1152),y=n(66),m=n(5777),b=n(7797),w=n(1384),x=n(9331),E=n(5303),B=n(1804),k="[object Arguments]",O="[object Function]",C="[object Object]",M={};M[k]=M["[object Array]"]=M["[object ArrayBuffer]"]=M["[object DataView]"]=M["[object Boolean]"]=M["[object Date]"]=M["[object Float32Array]"]=M["[object Float64Array]"]=M["[object Int8Array]"]=M["[object Int16Array]"]=M["[object Int32Array]"]=M["[object Map]"]=M["[object Number]"]=M[C]=M["[object RegExp]"]=M["[object Set]"]=M["[object String]"]=M["[object Symbol]"]=M["[object Uint8Array]"]=M["[object Uint8ClampedArray]"]=M["[object Uint16Array]"]=M["[object Uint32Array]"]=!0,M["[object Error]"]=M[O]=M["[object WeakMap]"]=!1,t.exports=function t(e,n,S,F,T,P){var I,N=1&n,L=2&n,_=4&n;if(S&&(I=T?S(e,F,T,P):S(e)),void 0!==I)return I;if(!w(e))return e;var Q=y(e);if(Q){if(I=p(e),!N)return c(e,I)}else{var U=h(e),j=U==O||"[object GeneratorFunction]"==U;if(m(e))return u(e,N);if(U==C||U==k||j&&!T){if(I=L||j?{}:g(e),!N)return L?A(e,s(I,e)):l(e,a(I,e))}else{if(!M[U])return T?e:{};I=v(e,U,N)}}P||(P=new r);var D=P.get(e);if(D)return D;P.set(e,I),x(e)?e.forEach(function(r){I.add(t(r,n,S,r,e,P))}):b(e)&&e.forEach(function(r,i){I.set(i,t(r,n,S,i,e,P))});var R=Q?void 0:(_?L?d:f:L?B:E)(e);return i(R||e,function(r,i){R&&(r=e[i=r]),o(I,i,t(r,n,S,i,e,P))}),I}},8806(t,e,n){var r=n(461);t.exports=function(t,e){return function(n,i){if(null==n)return n;if(!r(n))return t(n,i);for(var o=n.length,a=e?o:-1,s=Object(n);(e?a--:++a<o)&&!1!==i(s[a],a,s););return n}}},8808(t){t.exports=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}},8853(t){t.exports=function(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}},8859(t,e,n){var r=n(4811),i=n(8975),o=n(7920),a=n(6615),s=n(9447),u=n(6708),c=n(6092);t.exports=function(t,e){return a(t)&&s(e)?u(c(t),e):function(n){var a=i(n,t);return void 0===a&&a===e?o(n,t):r(e,a,3)}}},8893(t){function e(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(t.exports=e=function(){return!!n},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},8964(t,e,n){var r=n(2022);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},8975(t,e,n){var r=n(6815);t.exports=function(t,e,n){var i=null==t?void 0:r(t,e);return void 0===i?n:i}},8991(t,e,n){var r=n(6735);t.exports={Graph:r.Graph,json:n(9025),alg:n(9966),version:r.version}},9025(t,e,n){var r=n(9086),i=n(7895);function o(t){return r.map(t.nodes(),function(e){var n=t.node(e),i=t.parent(e),o={v:e};return r.isUndefined(n)||(o.value=n),r.isUndefined(i)||(o.parent=i),o})}function a(t){return r.map(t.edges(),function(e){var n=t.edge(e),i={v:e.v,w:e.w};return r.isUndefined(e.name)||(i.name=e.name),r.isUndefined(n)||(i.value=n),i})}t.exports={write:function(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:o(t),edges:a(t)};return r.isUndefined(t.graph())||(e.value=r.clone(t.graph())),e},read:function(t){var e=new i(t.options).setGraph(t.value);return r.each(t.nodes,function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)}),r.each(t.edges,function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)}),e}}},9060(t,e,n){var r=n(5164),i=n(9915),o=n(1048),a=r&&1/o(new r([,-0]))[1]==1/0?function(t){return new r(t)}:i;t.exports=a},9070(t,e,n){var r=n(5351),i=n(1922),o=n(6111),a=n(66),s=n(461),u=n(5777),c=n(6646),l=n(7142),A=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(s(t)&&(a(t)||"string"==typeof t||"function"==typeof t.splice||u(t)||l(t)||o(t)))return!t.length;var e=i(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(c(t))return!r(t).length;for(var n in t)if(A.call(t,n))return!1;return!0}},9073(t,e,n){var r=n(3185),i=function(){function t(t,e){void 0===e&&(e={}),this.options=e,this.rootNode=r(t,e)}return t.prototype.execute=function(){throw new Error("please override this method")},t}();t.exports=i},9086(t,e,n){var r;try{r={clone:n(1850),constant:n(1479),each:n(4430),filter:n(1633),has:n(211),isArray:n(66),isEmpty:n(9070),isFunction:n(7883),isUndefined:n(2751),keys:n(5303),map:n(1853),reduce:n(5077),size:n(6342),transform:n(9279),union:n(1779),values:n(1293)}}catch(t){}r||(r=window._),t.exports=r},9097(t,e,n){var r=n(4645).default,i=n(7422);t.exports=function(t,e){if(e&&("object"==r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return i(t)},t.exports.__esModule=!0,t.exports.default=t.exports},9129(t){t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},9165(t,e,n){var r=n(8637);t.exports=function(t){return null!=t&&t.length?r(t,1):[]}},9221(t,e,n){var r=n(6606),i=n(8494),o=n(3038);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},9225(t,e,n){var r=n(151);t.exports=function(t){var e=r(t,function(t){return 500===n.size&&n.clear(),t}),n=e.cache;return e}},9269(t,e,n){t.exports={graphlib:n(7678),layout:n(2319),debug:n(6338),util:{time:n(7437).time,notime:n(7437).notime},version:n(7061)}},9276(t){"use strict";t.exports=e},9279(t,e,n){var r=n(8644),i=n(2471),o=n(6998),a=n(186),s=n(5364),u=n(66),c=n(5777),l=n(7883),A=n(1384),f=n(7142);t.exports=function(t,e,n){var d=u(t),h=d||c(t)||f(t);if(e=a(e,4),null==n){var p=t&&t.constructor;n=h?d?new p:[]:A(t)&&l(p)?i(s(t)):{}}return(h?r:o)(t,function(t,r,i){return e(n,t,r,i)}),n}},9318(t,e,n){var r=n(836),i=n(7678).Graph,o=n(5886);t.exports=function(t,e){if(t.nodeCount()<=1)return[];var n=function(t,e){var n=new i,a=0,s=0;r.forEach(t.nodes(),function(t){n.setNode(t,{v:t,in:0,out:0})}),r.forEach(t.edges(),function(t){var r=n.edge(t.v,t.w)||0,i=e(t),o=r+i;n.setEdge(t.v,t.w,o),s=Math.max(s,n.node(t.v).out+=i),a=Math.max(a,n.node(t.w).in+=i)});var c=r.range(s+a+3).map(function(){return new o}),l=a+1;return r.forEach(n.nodes(),function(t){u(c,l,n.node(t))}),{graph:n,buckets:c,zeroIdx:l}}(t,e||a),c=function(t,e,n){for(var r,i=[],o=e[e.length-1],a=e[0];t.nodeCount();){for(;r=a.dequeue();)s(t,e,n,r);for(;r=o.dequeue();)s(t,e,n,r);if(t.nodeCount())for(var u=e.length-2;u>0;--u)if(r=e[u].dequeue()){i=i.concat(s(t,e,n,r,!0));break}}return i}(n.graph,n.buckets,n.zeroIdx);return r.flatten(r.map(c,function(e){return t.outEdges(e.v,e.w)}),!0)};var a=r.constant(1);function s(t,e,n,i,o){var a=o?[]:void 0;return r.forEach(t.inEdges(i.v),function(r){var i=t.edge(r),s=t.node(r.v);o&&a.push({v:r.v,w:r.w}),s.out-=i,u(e,n,s)}),r.forEach(t.outEdges(i.v),function(r){var i=t.edge(r),o=r.w,a=t.node(o);a.in-=i,u(e,n,a)}),t.removeNode(i.v),a}function u(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}},9331(t,e,n){var r=n(7075),i=n(8552),o=n(1342),a=o&&o.isSet,s=a?i(a):r;t.exports=s},9356(t){t.exports=function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")},t.exports.__esModule=!0,t.exports.default=t.exports},9447(t,e,n){var r=n(1384);t.exports=function(t){return t==t&&!r(t)}},9452(t){t.exports=function(t){if(Array.isArray(t))return t},t.exports.__esModule=!0,t.exports.default=t.exports},9455(t,e,n){var r=n(7155),i=n(2582),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(t){return null==t?[]:(t=Object(t),r(a(t),function(e){return o.call(t,e)}))}:i;t.exports=s},9477(t,e,n){var r=n(6126),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;t.exports=function(t){var e=o.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(t){}var i=a.call(t);return r&&(e?t[s]=n:delete t[s]),i}},9532(t,e,n){var r=n(6461),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(e,t)?e[t]:void 0}},9593(t,e,n){var r=n(5395);t.exports=function(t,e){return t.get(r(t,e))},t.exports.__esModule=!0,t.exports.default=t.exports},9598(t,e,n){var r=n(6601);t.exports=function(t){var e=r(t),n=e%1;return e==e?n?e-n:e:0}},9608(t,e,n){var r=n(3519);t.exports=function(t,e,n){for(var i=-1,o=t.length;++i<o;){var a=t[i],s=e(a);if(null!=s&&(void 0===u?s==s&&!r(s):n(s,u)))var u=s,c=a}return c}},9622(t,e,n){var r=n(7532),i=n(5303);t.exports=function(t,e){return t&&r(e,i(e),t)}},9722(t,e,n){var r=n(66),i=n(6615),o=n(5201),a=n(5591);t.exports=function(t,e){return r(t)?t:i(t,e)?[t]:o(a(t))}},9723(t,e,n){var r=n(4159)(n(1770),"DataView");t.exports=r},9800(t){t.exports=function(){return!1}},9832(t,e,n){var r=n(7471);function i(){var e,n,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.toStringTag||"@@toStringTag";function u(t,i,o,a){var s=i&&i.prototype instanceof l?i:l,u=Object.create(s.prototype);return r(u,"_invoke",function(t,r,i){var o,a,s,u=0,l=i||[],A=!1,f={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,n){return o=t,a=0,s=e,f.n=n,c}};function d(t,r){for(a=t,s=r,n=0;!A&&u&&!i&&n<l.length;n++){var i,o=l[n],d=f.p,h=o[2];t>3?(i=h===r)&&(s=o[(a=o[4])?5:(a=3,3)],o[4]=o[5]=e):o[0]<=d&&((i=t<2&&d<o[1])?(a=0,f.v=r,f.n=o[1]):d<h&&(i=t<3||o[0]>r||r>h)&&(o[4]=t,o[5]=r,f.n=h,a=0))}if(i||t>1)return c;throw A=!0,r}return function(i,l,h){if(u>1)throw TypeError("Generator is already running");for(A&&1===l&&d(l,h),a=l,s=h;(n=a<2?e:s)||!A;){o||(a?a<3?(a>1&&(f.n=-1),d(a,s)):f.n=s:f.v=s);try{if(u=2,o){if(a||(i="next"),n=o[i]){if(!(n=n.call(o,s)))throw TypeError("iterator result is not an object");if(!n.done)return n;s=n.value,a<2&&(a=0)}else 1===a&&(n=o.return)&&n.call(o),a<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),a=1);o=e}else if((n=(A=f.n<0)?s:t.call(r,f))!==c)break}catch(t){o=e,a=1,s=t}finally{u=1}}return{value:n,done:A}}}(t,o,a),!0),u}var c={};function l(){}function A(){}function f(){}n=Object.getPrototypeOf;var d=[][a]?n(n([][a]())):(r(n={},a,function(){return this}),n),h=f.prototype=l.prototype=Object.create(d);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,r(t,s,"GeneratorFunction")),t.prototype=Object.create(h),t}return A.prototype=f,r(h,"constructor",f),r(f,"constructor",A),A.displayName="GeneratorFunction",r(f,s,"GeneratorFunction"),r(h),r(h,s,"Generator"),r(h,a,function(){return this}),r(h,"toString",function(){return"[object Generator]"}),(t.exports=i=function(){return{w:u,m:p}},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},9845(t){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},9872(t,e,n){var r=n(3623),i=n(7504)(r);t.exports=i},9896(t){"use strict";var e=Object.prototype.hasOwnProperty,n="~";function r(){}function i(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(t,e,r,o,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||t,a),u=n?n+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],s]:t._events[u].push(s):(t._events[u]=s,t._eventsCount++),t}function a(t,e){0===--t._eventsCount?t._events=new r:delete t._events[e]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var t,r,i=[];if(0===this._eventsCount)return i;for(r in t=this._events)e.call(t,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},s.prototype.listeners=function(t){var e=n?n+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(t){var e=n?n+t:t,r=this._events[e];return r?r.fn?1:r.length:0},s.prototype.emit=function(t,e,r,i,o,a){var s=n?n+t:t;if(!this._events[s])return!1;var u,c,l=this._events[s],A=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),A){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,r),!0;case 4:return l.fn.call(l.context,e,r,i),!0;case 5:return l.fn.call(l.context,e,r,i,o),!0;case 6:return l.fn.call(l.context,e,r,i,o,a),!0}for(c=1,u=new Array(A-1);c<A;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var f,d=l.length;for(c=0;c<d;c++)switch(l[c].once&&this.removeListener(t,l[c].fn,void 0,!0),A){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,e);break;case 3:l[c].fn.call(l[c].context,e,r);break;case 4:l[c].fn.call(l[c].context,e,r,i);break;default:if(!u)for(f=1,u=new Array(A-1);f<A;f++)u[f-1]=arguments[f];l[c].fn.apply(l[c].context,u)}}return!0},s.prototype.on=function(t,e,n){return o(this,t,e,n,!1)},s.prototype.once=function(t,e,n){return o(this,t,e,n,!0)},s.prototype.removeListener=function(t,e,r,i){var o=n?n+t:t;if(!this._events[o])return this;if(!e)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==e||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var u=0,c=[],l=s.length;u<l;u++)(s[u].fn!==e||i&&!s[u].once||r&&s[u].context!==r)&&c.push(s[u]);c.length?this._events[o]=1===c.length?c[0]:c:a(this,o)}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&a(this,e)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,t.exports=s},9915(t){t.exports=function(){}},9922(t){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}},9941(t,e,n){var r=n(4528);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},9959(t,e,n){var r=n(6126),i=n(4739),o=n(66),a=n(3519),s=r?r.prototype:void 0,u=s?s.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(o(e))return i(e,t)+"";if(a(e))return u?u.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},9966(t,e,n){t.exports={components:n(3424),dijkstra:n(1990),dijkstraAll:n(8267),findCycles:n(5407),floydWarshall:n(2457),isAcyclic:n(4985),postorder:n(7008),preorder:n(5191),prim:n(5320),tarjan:n(5088),topsort:n(5497)}},9969(t,e,n){var r=n(836);t.exports=function(t,e,n){var i,o={};r.forEach(n,function(n){for(var r,a,s=t.parent(n);s;){if((r=t.parent(s))?(a=o[r],o[r]=s):(a=i,i=s),a&&a!==s)return void e.setEdge(a,s);s=r}})}},9977(t){function e(t,e,n,r){void 0===r&&(r=[]);var i=this;i.w=t||0,i.h=e||0,i.y=n||0,i.x=0,i.c=r||[],i.cs=r.length,i.prelim=0,i.mod=0,i.shift=0,i.change=0,i.tl=null,i.tr=null,i.el=null,i.er=null,i.msel=0,i.mser=0}function n(t,e,r){r?t.y+=e:t.x+=e,t.children.forEach(function(t){n(t,e,r)})}function r(t,e){var n=e?t.y:t.x;return t.children.forEach(function(t){n=Math.min(r(t,e),n)}),n}function i(t,e){n(t,-r(t,e),e)}function o(t,e,n){n?e.y=t.x:e.x=t.x,t.c.forEach(function(t,r){o(t,e.children[r],n)})}function a(t,e,n){void 0===n&&(n=0),e?(t.x=n,n+=t.width):(t.y=n,n+=t.height),t.children.forEach(function(t){a(t,e,n)})}e.fromNode=function(t,n){if(!t)return null;var r=[];return t.children.forEach(function(t){r.push(e.fromNode(t,n))}),n?new e(t.height,t.width,t.x,r):new e(t.width,t.height,t.y,r)},t.exports=function(t,n){void 0===n&&(n={});var r=n.isHorizontal;function s(t){0===t.cs?(t.el=t,t.er=t,t.msel=t.mser=0):(t.el=t.c[0].el,t.msel=t.c[0].msel,t.er=t.c[t.cs-1].er,t.mser=t.c[t.cs-1].mser)}function u(t,e,n){for(var r=t.c[e-1],i=r.mod,o=t.c[e],a=o.mod;null!==r&&null!==o;){f(r)>n.low&&(n=n.nxt);var s=i+r.prelim+r.w-(a+o.prelim);s>0&&(a+=s,c(t,e,n.index,s));var u=f(r),d=f(o);u<=d&&null!==(r=A(r))&&(i+=r.mod),u>=d&&null!==(o=l(o))&&(a+=o.mod)}!r&&o?function(t,e,n,r){var i=t.c[0].el;i.tl=n;var o=r-n.mod-t.c[0].msel;i.mod+=o,i.prelim-=o,t.c[0].el=t.c[e].el,t.c[0].msel=t.c[e].msel}(t,e,o,a):r&&!o&&function(t,e,n,r){var i=t.c[e].er;i.tr=n;var o=r-n.mod-t.c[e].mser;i.mod+=o,i.prelim-=o,t.c[e].er=t.c[e-1].er,t.c[e].mser=t.c[e-1].mser}(t,e,r,i)}function c(t,e,n,r){t.c[e].mod+=r,t.c[e].msel+=r,t.c[e].mser+=r,function(t,e,n,r){if(n!==e-1){var i=e-n;t.c[n+1].shift+=r/i,t.c[e].shift-=r/i,t.c[e].change-=r-r/i}}(t,e,n,r)}function l(t){return 0===t.cs?t.tl:t.c[0]}function A(t){return 0===t.cs?t.tr:t.c[t.cs-1]}function f(t){return t.y+t.h}function d(t,e,n){for(;null!==n&&t>=n.low;)n=n.nxt;return{low:t,index:e,nxt:n}}a(t,r);var h=e.fromNode(t,r);return function t(e){if(0!==e.cs){t(e.c[0]);for(var n=d(f(e.c[0].el),0,null),r=1;r<e.cs;++r){t(e.c[r]);var i=f(e.c[r].er);u(e,r,n),n=d(i,r,n)}!function(t){t.prelim=(t.c[0].prelim+t.c[0].mod+t.c[t.cs-1].mod+t.c[t.cs-1].prelim+t.c[t.cs-1].w)/2-t.w/2}(e),s(e)}else s(e)}(h),function t(e,n){n+=e.mod,e.x=e.prelim+n,function(t){for(var e=0,n=0,r=0;r<t.cs;r++)n+=(e+=t.c[r].shift)+t.c[r].change,t.c[r].mod+=n}(e);for(var r=0;r<e.cs;r++)t(e.c[r],n)}(h,0),o(h,t,r),i(t,r),t}},9988(t,e,n){var r=n(4355);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&r(t,e)},t.exports.__esModule=!0,t.exports.default=t.exports}},u={};function c(t){var e=u[t];if(void 0!==e)return e.exports;var n=u[t]={id:t,loaded:!1,exports:{}};return s[t](n,n.exports,c),n.loaded=!0,n.exports}c.m=s,c.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return c.d(e,{a:e}),e},i=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,c.t=function(t,e){if(1&e&&(t=this(t)),8&e)return t;if("object"==typeof t&&t){if(4&e&&t.__esModule)return t;if(16&e&&"function"==typeof t.then)return t}var n=Object.create(null);c.r(n);var o={};r=r||[null,i({}),i([]),i(i)];for(var a=2&e&&t;("object"==typeof a||"function"==typeof a)&&!~r.indexOf(a);a=i(a))Object.getOwnPropertyNames(a).forEach(e=>o[e]=()=>t[e]);return o.default=()=>t,c.d(n,o),n},c.d=(t,e)=>{for(var n in e)c.o(e,n)&&!c.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},c.f={},c.e=t=>Promise.all(Object.keys(c.f).reduce((e,n)=>(c.f[n](t,e),e),[])),c.u=t=>t+".min.js",c.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),c.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o={},a="Charts:",c.l=(t,e,n,r)=>{if(o[t])o[t].push(e);else{var i,s;if(void 0!==n)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var A=u[l];if(A.getAttribute("src")==t||A.getAttribute("data-webpack")==a+n){i=A;break}}i||(s=!0,(i=document.createElement("script")).charset="utf-8",c.nc&&i.setAttribute("nonce",c.nc),i.setAttribute("data-webpack",a+n),i.src=t),o[t]=[e];var f=(e,n)=>{i.onerror=i.onload=null,clearTimeout(d);var r=o[t];if(delete o[t],i.parentNode&&i.parentNode.removeChild(i),r&&r.forEach(t=>t(n)),e)return e(n)},d=setTimeout(f.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=f.bind(null,i.onerror),i.onload=f.bind(null,i.onload),s&&document.head.appendChild(i)}},c.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t;c.g.importScripts&&(t=c.g.location+"");var e=c.g.document;if(!t&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&(!t||!/^http(s?):/.test(t));)t=n[r--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),c.p=t})(),(()=>{c.b="undefined"!=typeof document&&document.baseURI||self.location.href;var t={176:0};c.f.j=(e,n)=>{var r=c.o(t,e)?t[e]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise((n,i)=>r=t[e]=[n,i]);n.push(r[2]=i);var o=c.p+c.u(e),a=new Error;c.l(o,n=>{if(c.o(t,e)&&(0!==(r=t[e])&&(t[e]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;a.message="Loading chunk "+e+" failed.\n("+i+": "+o+")",a.name="ChunkLoadError",a.type=i,a.request=o,r[1](a)}},"chunk-"+e,e)}};var e=(e,n)=>{var r,i,[o,a,s]=n,u=0;if(o.some(e=>0!==t[e])){for(r in a)c.o(a,r)&&(c.m[r]=a[r]);s&&s(c)}for(e&&e(n);u<o.length;u++)i=o[u],c.o(t,i)&&t[i]&&t[i][0](),t[i]=0},n=self.webpackChunkCharts=self.webpackChunkCharts||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})(),c.nc=void 0;var l={};return(()=>{"use strict";c.r(l),c.d(l,{Area:()=>lpt,Bar:()=>Apt,Base:()=>ipt,BidirectionalBar:()=>Qpt,Box:()=>Opt,Bullet:()=>Spt,ChartEvent:()=>o3,CirclePacking:()=>Lpt,CollapseExpandIcon:()=>r,Column:()=>fpt,ConfigProvider:()=>hpt,Dendrogram:()=>hH,DualAxes:()=>ppt,Fishbone:()=>bH,FlowDirectionGraph:()=>kH,FlowGraph:()=>FH,Funnel:()=>vpt,G2:()=>A,G6:()=>n,Gauge:()=>Fpt,Heatmap:()=>kpt,Histogram:()=>Bpt,IndentedTree:()=>HH,Line:()=>gpt,Liquid:()=>Tpt,MindMap:()=>YH,Mix:()=>jpt,NetworkGraph:()=>ZH,OrganizationChart:()=>nz,Pie:()=>ypt,RCNode:()=>i,Radar:()=>bpt,RadialBar:()=>Npt,Rose:()=>xpt,Sankey:()=>Cpt,Scatter:()=>mpt,Stock:()=>Mpt,Sunburst:()=>Dpt,Tiny:()=>wpt,Treemap:()=>Ipt,Venn:()=>Upt,Violin:()=>_pt,Waterfall:()=>Ept,WordCloud:()=>Ppt,getNodeSide:()=>PH,measureTextSize:()=>pH,measureTextWidth:()=>zAt,mergeOptions:()=>cH,register:()=>xAt});var t={};c.r(t),c.d(t,{add:()=>Wt,adjoint:()=>At,clone:()=>it,copy:()=>ot,create:()=>rt,decompose:()=>Tt,determinant:()=>ft,equals:()=>Jt,exactEquals:()=>Zt,frob:()=>Vt,fromQuat:()=>Nt,fromQuat2:()=>Ct,fromRotation:()=>xt,fromRotationTranslation:()=>Ot,fromRotationTranslationScale:()=>Pt,fromRotationTranslationScaleOrigin:()=>It,fromScaling:()=>wt,fromTranslation:()=>bt,fromValues:()=>at,fromXRotation:()=>Et,fromYRotation:()=>Bt,fromZRotation:()=>kt,frustum:()=>Lt,getRotation:()=>Ft,getScaling:()=>St,getTranslation:()=>Mt,identity:()=>ut,invert:()=>lt,lookAt:()=>zt,mul:()=>$t,multiply:()=>dt,multiplyScalar:()=>Xt,multiplyScalarAndAdd:()=>qt,ortho:()=>Rt,orthoNO:()=>Dt,orthoZO:()=>Ht,perspective:()=>Qt,perspectiveFromFieldOfView:()=>jt,perspectiveNO:()=>_t,perspectiveZO:()=>Ut,rotate:()=>vt,rotateX:()=>gt,rotateY:()=>yt,rotateZ:()=>mt,scale:()=>pt,set:()=>st,str:()=>Gt,sub:()=>te,subtract:()=>Yt,targetTo:()=>Kt,translate:()=>ht,transpose:()=>ct});var e={};c.r(e),c.d(e,{circle:()=>gE,diamond:()=>mE,rect:()=>wE,simple:()=>EE,triangle:()=>yE,triangleRect:()=>xE,vee:()=>bE});var n={};c.r(n),c.d(n,{AntVDagreLayout:()=>CO,AutoAdaptLabel:()=>Gm,Background:()=>cS,Badge:()=>dw,BaseBehavior:()=>Km,BaseCombo:()=>Vx,BaseEdge:()=>kE,BaseLayout:()=>EB,BaseNode:()=>Ow,BasePlugin:()=>aS,BaseShape:()=>cw,BaseTransform:()=>O_,BrushSelect:()=>Nb,BubbleSets:()=>GS,CameraSetting:()=>YS,Canvas:()=>z_,CanvasEvent:()=>Jg,Circle:()=>Cw,CircleCombo:()=>Wx,CircularLayout:()=>TO,ClickSelect:()=>zb,CollapseExpand:()=>aB,ComboCombinedLayout:()=>CC,ComboEvent:()=>$g,CommonEvent:()=>ty,CompactBoxLayout:()=>DB.compactBox,ConcentricLayout:()=>QO,ContainerEvent:()=>ey,Contextmenu:()=>ZS,CreateEdge:()=>lB,Cubic:()=>OE,CubicHorizontal:()=>CE,CubicRadial:()=>ME,CubicVertical:()=>SE,D3ForceLayout:()=>vM,DagreLayout:()=>bM,DendrogramLayout:()=>DB.dendrogram,Diamond:()=>Sw,Donut:()=>Fw,DragCanvas:()=>dB,DragElement:()=>pB,DragElementForce:()=>SB,EdgeBundling:()=>JS,EdgeEvent:()=>ny,EdgeFilterLens:()=>sF,Ellipse:()=>Iw,ExtensionCategory:()=>uy,FishboneLayout:()=>JM,Fisheye:()=>cF,FixElementSize:()=>TB,FocusElement:()=>PB,ForceAtlas2Layout:()=>kM,ForceLayout:()=>oC,FruchtermanLayout:()=>CM,Fullscreen:()=>lF,Graph:()=>XQ,GraphEvent:()=>ry,GridLayout:()=>SM,GridLine:()=>AF,HTML:()=>jx,Hexagon:()=>Nw,History:()=>vF,HistoryEvent:()=>iy,HoverActivate:()=>IB,Hull:()=>WF,Icon:()=>Ew,Image:()=>Rx,IndentedLayout:()=>DB.indented,Label:()=>fw,LassoSelect:()=>NB,Legend:()=>EP,Line:()=>FE,MDSLayout:()=>wC,MapNodeSize:()=>tU,MindmapLayout:()=>DB.mindmap,Minimap:()=>BP,NodeEvent:()=>oy,OptimizeViewportTransform:()=>LB,PlaceRadialLabels:()=>eU,Polyline:()=>DE,ProcessParallelEdges:()=>rU,Quadratic:()=>RE,RadialLayout:()=>HM,RandomLayout:()=>XM,Rect:()=>Hx,RectCombo:()=>Yx,ScrollCanvas:()=>QB,Shortcut:()=>Ib,SnakeLayout:()=>nS,Snapline:()=>SP,Star:()=>zx,Timebar:()=>KL,Title:()=>t_,Toolbar:()=>i_,Tooltip:()=>f_,Triangle:()=>Kx,Watermark:()=>m_,ZoomCanvas:()=>jB,effect:()=>N_,getExtension:()=>fy,getExtensions:()=>dy,iconfont:()=>lU,idOf:()=>Sm,invokeLayoutMethod:()=>CB,isCollapsed:()=>Kb,omitStyleProps:()=>Zb,parseSize:()=>Jb,positionOf:()=>pb,register:()=>__,setVisibility:()=>Rm,subStyleProps:()=>Xb,treeToGraphData:()=>ZQ,version:()=>hy});var r={};c.r(r),c.d(r,{ArrowCountIcon:()=>hR,PlusMinusIcon:()=>vR});var i={};c.r(i),c.d(i,{OrganizationChartNode:()=>yR,TextNode:()=>jR});var o={};c.r(o),c.d(o,{area:()=>I2,bottom:()=>R2,bottomLeft:()=>R2,bottomRight:()=>R2,inside:()=>R2,left:()=>R2,outside:()=>G2,right:()=>R2,spider:()=>q2,surround:()=>J2,top:()=>R2,topLeft:()=>R2,topRight:()=>R2});var a={};c.r(a),c.d(a,{interpolateBlues:()=>o5,interpolateBrBG:()=>g4,interpolateBuGn:()=>L4,interpolateBuPu:()=>Q4,interpolateCividis:()=>v5,interpolateCool:()=>M5,interpolateCubehelixDefault:()=>O5,interpolateGnBu:()=>j4,interpolateGreens:()=>s5,interpolateGreys:()=>c5,interpolateInferno:()=>j5,interpolateMagma:()=>U5,interpolateOrRd:()=>R4,interpolateOranges:()=>p5,interpolatePRGn:()=>m4,interpolatePiYG:()=>w4,interpolatePlasma:()=>D5,interpolatePuBu:()=>G4,interpolatePuBuGn:()=>z4,interpolatePuOr:()=>E4,interpolatePuRd:()=>W4,interpolatePurples:()=>A5,interpolateRainbow:()=>F5,interpolateRdBu:()=>k4,interpolateRdGy:()=>C4,interpolateRdPu:()=>X4,interpolateRdYlBu:()=>S4,interpolateRdYlGn:()=>T4,interpolateReds:()=>d5,interpolateSinebow:()=>N5,interpolateSpectral:()=>I4,interpolateTurbo:()=>L5,interpolateViridis:()=>Q5,interpolateWarm:()=>C5,interpolateYlGn:()=>$4,interpolateYlGnBu:()=>Z4,interpolateYlOrBr:()=>e5,interpolateYlOrRd:()=>r5,schemeAccent:()=>y3,schemeBlues:()=>i5,schemeBrBG:()=>v4,schemeBuGn:()=>N4,schemeBuPu:()=>_4,schemeCategory10:()=>g3,schemeDark2:()=>m3,schemeGnBu:()=>U4,schemeGreens:()=>a5,schemeGreys:()=>u5,schemeObservable10:()=>b3,schemeOrRd:()=>D4,schemeOranges:()=>h5,schemePRGn:()=>y4,schemePaired:()=>w3,schemePastel1:()=>x3,schemePastel2:()=>E3,schemePiYG:()=>b4,schemePuBu:()=>K4,schemePuBuGn:()=>H4,schemePuOr:()=>x4,schemePuRd:()=>V4,schemePurples:()=>l5,schemeRdBu:()=>B4,schemeRdGy:()=>O4,schemeRdPu:()=>Y4,schemeRdYlBu:()=>M4,schemeRdYlGn:()=>F4,schemeReds:()=>f5,schemeSet1:()=>B3,schemeSet2:()=>k3,schemeSet3:()=>O3,schemeSpectral:()=>P4,schemeTableau10:()=>C3,schemeYlGn:()=>J4,schemeYlGnBu:()=>q4,schemeYlOrBr:()=>t5,schemeYlOrRd:()=>n5});var s={};c.r(s),c.d(s,{geoAlbers:()=>Vot,geoAlbersUsa:()=>Wot,geoAzimuthalEqualArea:()=>Zot,geoAzimuthalEqualAreaRaw:()=>qot,geoAzimuthalEquidistant:()=>$ot,geoAzimuthalEquidistantRaw:()=>Jot,geoConicConformal:()=>oat,geoConicConformalRaw:()=>iat,geoConicEqualArea:()=>Got,geoConicEqualAreaRaw:()=>Kot,geoConicEquidistant:()=>cat,geoConicEquidistantRaw:()=>uat,geoEqualEarth:()=>vat,geoEqualEarthRaw:()=>pat,geoEquirectangular:()=>sat,geoEquirectangularRaw:()=>aat,geoGnomonic:()=>yat,geoGnomonicRaw:()=>gat,geoIdentity:()=>mat,geoMercator:()=>eat,geoMercatorRaw:()=>tat,geoNaturalEarth1:()=>wat,geoNaturalEarth1Raw:()=>bat,geoOrthographic:()=>Eat,geoOrthographicRaw:()=>xat,geoProjection:()=>Rot,geoProjectionMutator:()=>Hot,geoStereographic:()=>kat,geoStereographicRaw:()=>Bat,geoTransverseMercator:()=>Cat,geoTransverseMercatorRaw:()=>Oat});var u={};c.r(u),c.d(u,{frequency:()=>Kst,id:()=>Gst,name:()=>Vst,weight:()=>zst});var A={};function f(t){if(Array.isArray(t))return t}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function h(t,e){if(t){if("string"==typeof t)return d(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}function p(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v(t,e){return f(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){c=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||h(t,e)||p()}function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function y(t){var e=function(t){if("object"!=g(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==g(e)?e:e+""}function m(t,e,n){return(e=y(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach(function(e){m(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function x(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,y(r.key),r)}}function B(t,e,n){return e&&E(t.prototype,e),n&&E(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function k(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function O(t){return function(t){if(Array.isArray(t))return d(t)}(t)||k(t)||h(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(t){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},C(t)}function M(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(M=function(){return!!t})()}function S(t,e){if(e&&("object"==g(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function F(t,e,n){return e=C(e),S(t,M()?Reflect.construct(e,n||[],C(t).constructor):e.apply(t,n))}function T(t,e){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},T(t,e)}function P(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T(t,e)}c.r(A),c.d(A,{AREA_CLASS_NAME:()=>S$,Academy:()=>PJ,Bin:()=>fet,BinX:()=>det,COMPONENT_CLASS_NAME:()=>C$,Chart:()=>FAt,ChartEvent:()=>o3,Classic:()=>CJ,ClassicDark:()=>FJ,Dark:()=>SJ,DiffY:()=>wet,DodgeX:()=>het,ELEMENT_CLASS_NAME:()=>B$,Filter:()=>Get,FlexX:()=>Det,Group:()=>Pet,GroupColor:()=>Let,GroupX:()=>Iet,GroupY:()=>Net,Jitter:()=>get,JitterX:()=>yet,JitterY:()=>met,LABEL_CLASS_NAME:()=>M$,LABEL_LAYER_CLASS_NAME:()=>E$,Light:()=>OJ,LinearAxis:()=>A$,MAIN_LAYER_CLASS_NAME:()=>x$,MASK_CLASS_NAME:()=>F$,MaybeDefaultX:()=>iq,MaybeDefaultY:()=>sq,MaybeFunctionAttribute:()=>gq,MaybeGradient:()=>IW,MaybeIdentityX:()=>pX,MaybeIdentityY:()=>hX,MaybeKey:()=>IV,MaybeSeries:()=>NW,MaybeSize:()=>jY,MaybeStackY:()=>kAt,MaybeTitle:()=>TV,MaybeTooltip:()=>PV,MaybeTuple:()=>qY,MaybeTupleX:()=>zX,MaybeTupleY:()=>VX,MaybeVisualPosition:()=>JY,MaybeZeroPadding:()=>eX,MaybeZeroX:()=>Cz,MaybeZeroY:()=>UY,MaybeZeroY1:()=>Oz,MaybeZeroZ:()=>OAt,NormalizeY:()=>Eet,PLOT_CLASS_NAME:()=>O$,Pack:()=>Het,Runtime:()=>EAt,Sample:()=>Ket,Select:()=>Met,SelectX:()=>Fet,SelectY:()=>Tet,Selection:()=>xG,SortColor:()=>jet,SortX:()=>Qet,SortY:()=>Uet,StackEnter:()=>xet,StackY:()=>_tt,SymmetryY:()=>bet,VIEW_CLASS_NAME:()=>k$,corelib:()=>urt,dataOf:()=>iG,extend:()=>tct,geolib:()=>Pat,graphlib:()=>out,litelib:()=>$ut,plotlib:()=>Zut,register:()=>xAt,render:()=>Vlt,renderToMountedElement:()=>Wlt,select:()=>wG,selectG2Elements:()=>t0,selectPlotArea:()=>r0,seriesOf:()=>oG,stdlib:()=>Jut});const I=c(9896);var N=1e-6,L="undefined"!=typeof Float32Array?Float32Array:Array;function _(){var t=new L(3);return L!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Q(t){var e=new L(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function U(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}function j(t,e,n){var r=new L(3);return r[0]=t,r[1]=e,r[2]=n,r}function D(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function R(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function H(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function z(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function K(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function G(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function V(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function W(t,e,n,r){var i=e[0],o=e[1],a=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t}function Y(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t}function X(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}function q(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],a=e[1],s=e[2];return Math.abs(n-o)<=N*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=N*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-s)<=N*Math.max(1,Math.abs(i),Math.abs(s))}Math.random,Math.PI,Math.PI;var Z=z,J=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(n*n+r*r+i*i)},$=U;function tt(){var t=new L(4);return L!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function et(t,e,n,r){var i=new L(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function nt(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}function rt(){var t=new L(16);return L!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function it(t){var e=new L(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function ot(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function at(t,e,n,r,i,o,a,s,u,c,l,A,f,d,h,p){var v=new L(16);return v[0]=t,v[1]=e,v[2]=n,v[3]=r,v[4]=i,v[5]=o,v[6]=a,v[7]=s,v[8]=u,v[9]=c,v[10]=l,v[11]=A,v[12]=f,v[13]=d,v[14]=h,v[15]=p,v}function st(t,e,n,r,i,o,a,s,u,c,l,A,f,d,h,p,v){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=c,t[9]=l,t[10]=A,t[11]=f,t[12]=d,t[13]=h,t[14]=p,t[15]=v,t}function ut(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ct(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function lt(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],A=e[9],f=e[10],d=e[11],h=e[12],p=e[13],v=e[14],g=e[15],y=n*s-r*a,m=n*u-i*a,b=n*c-o*a,w=r*u-i*s,x=r*c-o*s,E=i*c-o*u,B=l*p-A*h,k=l*v-f*h,O=l*g-d*h,C=A*v-f*p,M=A*g-d*p,S=f*g-d*v,F=y*S-m*M+b*C+w*O-x*k+E*B;return F?(F=1/F,t[0]=(s*S-u*M+c*C)*F,t[1]=(i*M-r*S-o*C)*F,t[2]=(p*E-v*x+g*w)*F,t[3]=(f*x-A*E-d*w)*F,t[4]=(u*O-a*S-c*k)*F,t[5]=(n*S-i*O+o*k)*F,t[6]=(v*b-h*E-g*m)*F,t[7]=(l*E-f*b+d*m)*F,t[8]=(a*M-s*O+c*B)*F,t[9]=(r*O-n*M-o*B)*F,t[10]=(h*x-p*b+g*y)*F,t[11]=(A*b-l*x-d*y)*F,t[12]=(s*k-a*C-u*B)*F,t[13]=(n*C-r*k+i*B)*F,t[14]=(p*m-h*w-v*y)*F,t[15]=(l*w-A*m+f*y)*F,t):null}function At(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],A=e[9],f=e[10],d=e[11],h=e[12],p=e[13],v=e[14],g=e[15],y=n*s-r*a,m=n*u-i*a,b=n*c-o*a,w=r*u-i*s,x=r*c-o*s,E=i*c-o*u,B=l*p-A*h,k=l*v-f*h,O=l*g-d*h,C=A*v-f*p,M=A*g-d*p,S=f*g-d*v;return t[0]=s*S-u*M+c*C,t[1]=i*M-r*S-o*C,t[2]=p*E-v*x+g*w,t[3]=f*x-A*E-d*w,t[4]=u*O-a*S-c*k,t[5]=n*S-i*O+o*k,t[6]=v*b-h*E-g*m,t[7]=l*E-f*b+d*m,t[8]=a*M-s*O+c*B,t[9]=r*O-n*M-o*B,t[10]=h*x-p*b+g*y,t[11]=A*b-l*x-d*y,t[12]=s*k-a*C-u*B,t[13]=n*C-r*k+i*B,t[14]=p*m-h*w-v*y,t[15]=l*w-A*m+f*y,t}function ft(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],l=t[9],A=t[10],f=t[11],d=t[12],h=t[13],p=t[14],v=e*a-n*o,g=e*s-r*o,y=n*s-r*a,m=c*h-l*d,b=c*p-A*d,w=l*p-A*h;return u*(e*w-n*b+r*m)-i*(o*w-a*b+s*m)+t[15]*(c*y-l*g+A*v)-f*(d*y-h*g+p*v)}function dt(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],A=e[8],f=e[9],d=e[10],h=e[11],p=e[12],v=e[13],g=e[14],y=e[15],m=n[0],b=n[1],w=n[2],x=n[3];return t[0]=m*r+b*s+w*A+x*p,t[1]=m*i+b*u+w*f+x*v,t[2]=m*o+b*c+w*d+x*g,t[3]=m*a+b*l+w*h+x*y,m=n[4],b=n[5],w=n[6],x=n[7],t[4]=m*r+b*s+w*A+x*p,t[5]=m*i+b*u+w*f+x*v,t[6]=m*o+b*c+w*d+x*g,t[7]=m*a+b*l+w*h+x*y,m=n[8],b=n[9],w=n[10],x=n[11],t[8]=m*r+b*s+w*A+x*p,t[9]=m*i+b*u+w*f+x*v,t[10]=m*o+b*c+w*d+x*g,t[11]=m*a+b*l+w*h+x*y,m=n[12],b=n[13],w=n[14],x=n[15],t[12]=m*r+b*s+w*A+x*p,t[13]=m*i+b*u+w*f+x*v,t[14]=m*o+b*c+w*d+x*g,t[15]=m*a+b*l+w*h+x*y,t}function ht(t,e,n){var r,i,o,a,s,u,c,l,A,f,d,h,p=n[0],v=n[1],g=n[2];return e===t?(t[12]=e[0]*p+e[4]*v+e[8]*g+e[12],t[13]=e[1]*p+e[5]*v+e[9]*g+e[13],t[14]=e[2]*p+e[6]*v+e[10]*g+e[14],t[15]=e[3]*p+e[7]*v+e[11]*g+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],A=e[8],f=e[9],d=e[10],h=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=c,t[7]=l,t[8]=A,t[9]=f,t[10]=d,t[11]=h,t[12]=r*p+s*v+A*g+e[12],t[13]=i*p+u*v+f*g+e[13],t[14]=o*p+c*v+d*g+e[14],t[15]=a*p+l*v+h*g+e[15]),t}function pt(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function vt(t,e,n,r){var i,o,a,s,u,c,l,A,f,d,h,p,v,g,y,m,b,w,x,E,B,k,O,C,M=r[0],S=r[1],F=r[2],T=Math.sqrt(M*M+S*S+F*F);return T<N?null:(M*=T=1/T,S*=T,F*=T,i=Math.sin(n),a=1-(o=Math.cos(n)),s=e[0],u=e[1],c=e[2],l=e[3],A=e[4],f=e[5],d=e[6],h=e[7],p=e[8],v=e[9],g=e[10],y=e[11],m=M*M*a+o,b=S*M*a+F*i,w=F*M*a-S*i,x=M*S*a-F*i,E=S*S*a+o,B=F*S*a+M*i,k=M*F*a+S*i,O=S*F*a-M*i,C=F*F*a+o,t[0]=s*m+A*b+p*w,t[1]=u*m+f*b+v*w,t[2]=c*m+d*b+g*w,t[3]=l*m+h*b+y*w,t[4]=s*x+A*E+p*B,t[5]=u*x+f*E+v*B,t[6]=c*x+d*E+g*B,t[7]=l*x+h*E+y*B,t[8]=s*k+A*O+p*C,t[9]=u*k+f*O+v*C,t[10]=c*k+d*O+g*C,t[11]=l*k+h*O+y*C,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function gt(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],l=e[9],A=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+c*r,t[5]=a*i+l*r,t[6]=s*i+A*r,t[7]=u*i+f*r,t[8]=c*i-o*r,t[9]=l*i-a*r,t[10]=A*i-s*r,t[11]=f*i-u*r,t}function yt(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[8],l=e[9],A=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-c*r,t[1]=a*i-l*r,t[2]=s*i-A*r,t[3]=u*i-f*r,t[8]=o*r+c*i,t[9]=a*r+l*i,t[10]=s*r+A*i,t[11]=u*r+f*i,t}function mt(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[4],l=e[5],A=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+c*r,t[1]=a*i+l*r,t[2]=s*i+A*r,t[3]=u*i+f*r,t[4]=c*i-o*r,t[5]=l*i-a*r,t[6]=A*i-s*r,t[7]=f*i-u*r,t}function bt(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function wt(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function xt(t,e,n){var r,i,o,a=n[0],s=n[1],u=n[2],c=Math.sqrt(a*a+s*s+u*u);return c<N?null:(a*=c=1/c,s*=c,u*=c,r=Math.sin(e),o=1-(i=Math.cos(e)),t[0]=a*a*o+i,t[1]=s*a*o+u*r,t[2]=u*a*o-s*r,t[3]=0,t[4]=a*s*o-u*r,t[5]=s*s*o+i,t[6]=u*s*o+a*r,t[7]=0,t[8]=a*u*o+s*r,t[9]=s*u*o-a*r,t[10]=u*u*o+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function Et(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Bt(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function kt(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Ot(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=r+r,u=i+i,c=o+o,l=r*s,A=r*u,f=r*c,d=i*u,h=i*c,p=o*c,v=a*s,g=a*u,y=a*c;return t[0]=1-(d+p),t[1]=A+y,t[2]=f-g,t[3]=0,t[4]=A-y,t[5]=1-(l+p),t[6]=h+v,t[7]=0,t[8]=f+g,t[9]=h-v,t[10]=1-(l+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function Ct(t,e){var n=new L(3),r=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],A=r*r+i*i+o*o+a*a;return A>0?(n[0]=2*(s*a+l*r+u*o-c*i)/A,n[1]=2*(u*a+l*i+c*r-s*o)/A,n[2]=2*(c*a+l*o+s*i-u*r)/A):(n[0]=2*(s*a+l*r+u*o-c*i),n[1]=2*(u*a+l*i+c*r-s*o),n[2]=2*(c*a+l*o+s*i-u*r)),Ot(t,e,n),t}function Mt(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function St(t,e){var n=e[0],r=e[1],i=e[2],o=e[4],a=e[5],s=e[6],u=e[8],c=e[9],l=e[10];return t[0]=Math.sqrt(n*n+r*r+i*i),t[1]=Math.sqrt(o*o+a*a+s*s),t[2]=Math.sqrt(u*u+c*c+l*l),t}function Ft(t,e){var n=new L(3);St(n,e);var r=1/n[0],i=1/n[1],o=1/n[2],a=e[0]*r,s=e[1]*i,u=e[2]*o,c=e[4]*r,l=e[5]*i,A=e[6]*o,f=e[8]*r,d=e[9]*i,h=e[10]*o,p=a+l+h,v=0;return p>0?(v=2*Math.sqrt(p+1),t[3]=.25*v,t[0]=(A-d)/v,t[1]=(f-u)/v,t[2]=(s-c)/v):a>l&&a>h?(v=2*Math.sqrt(1+a-l-h),t[3]=(A-d)/v,t[0]=.25*v,t[1]=(s+c)/v,t[2]=(f+u)/v):l>h?(v=2*Math.sqrt(1+l-a-h),t[3]=(f-u)/v,t[0]=(s+c)/v,t[1]=.25*v,t[2]=(A+d)/v):(v=2*Math.sqrt(1+h-a-l),t[3]=(s-c)/v,t[0]=(f+u)/v,t[1]=(A+d)/v,t[2]=.25*v),t}function Tt(t,e,n,r){e[0]=r[12],e[1]=r[13],e[2]=r[14];var i=r[0],o=r[1],a=r[2],s=r[4],u=r[5],c=r[6],l=r[8],A=r[9],f=r[10];n[0]=Math.sqrt(i*i+o*o+a*a),n[1]=Math.sqrt(s*s+u*u+c*c),n[2]=Math.sqrt(l*l+A*A+f*f);var d=1/n[0],h=1/n[1],p=1/n[2],v=i*d,g=o*h,y=a*p,m=s*d,b=u*h,w=c*p,x=l*d,E=A*h,B=f*p,k=v+b+B,O=0;return k>0?(O=2*Math.sqrt(k+1),t[3]=.25*O,t[0]=(w-E)/O,t[1]=(x-y)/O,t[2]=(g-m)/O):v>b&&v>B?(O=2*Math.sqrt(1+v-b-B),t[3]=(w-E)/O,t[0]=.25*O,t[1]=(g+m)/O,t[2]=(x+y)/O):b>B?(O=2*Math.sqrt(1+b-v-B),t[3]=(x-y)/O,t[0]=(g+m)/O,t[1]=.25*O,t[2]=(w+E)/O):(O=2*Math.sqrt(1+B-v-b),t[3]=(g-m)/O,t[0]=(x+y)/O,t[1]=(w+E)/O,t[2]=.25*O),t}function Pt(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3],u=i+i,c=o+o,l=a+a,A=i*u,f=i*c,d=i*l,h=o*c,p=o*l,v=a*l,g=s*u,y=s*c,m=s*l,b=r[0],w=r[1],x=r[2];return t[0]=(1-(h+v))*b,t[1]=(f+m)*b,t[2]=(d-y)*b,t[3]=0,t[4]=(f-m)*w,t[5]=(1-(A+v))*w,t[6]=(p+g)*w,t[7]=0,t[8]=(d+y)*x,t[9]=(p-g)*x,t[10]=(1-(A+h))*x,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function It(t,e,n,r,i){var o=e[0],a=e[1],s=e[2],u=e[3],c=o+o,l=a+a,A=s+s,f=o*c,d=o*l,h=o*A,p=a*l,v=a*A,g=s*A,y=u*c,m=u*l,b=u*A,w=r[0],x=r[1],E=r[2],B=i[0],k=i[1],O=i[2],C=(1-(p+g))*w,M=(d+b)*w,S=(h-m)*w,F=(d-b)*x,T=(1-(f+g))*x,P=(v+y)*x,I=(h+m)*E,N=(v-y)*E,L=(1-(f+p))*E;return t[0]=C,t[1]=M,t[2]=S,t[3]=0,t[4]=F,t[5]=T,t[6]=P,t[7]=0,t[8]=I,t[9]=N,t[10]=L,t[11]=0,t[12]=n[0]+B-(C*B+F*k+I*O),t[13]=n[1]+k-(M*B+T*k+N*O),t[14]=n[2]+O-(S*B+P*k+L*O),t[15]=1,t}function Nt(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,c=n*a,l=r*a,A=r*s,f=i*a,d=i*s,h=i*u,p=o*a,v=o*s,g=o*u;return t[0]=1-A-h,t[1]=l+g,t[2]=f-v,t[3]=0,t[4]=l-g,t[5]=1-c-h,t[6]=d+p,t[7]=0,t[8]=f+v,t[9]=d-p,t[10]=1-c-A,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Lt(t,e,n,r,i,o,a){var s=1/(n-e),u=1/(i-r),c=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*u,t[10]=(a+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*c,t[15]=0,t}function _t(t,e,n,r,i){var o=1/Math.tan(e/2);if(t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0){var a=1/(r-i);t[10]=(i+r)*a,t[14]=2*i*r*a}else t[10]=-1,t[14]=-2*r;return t}_(),tt();var Qt=_t;function Ut(t,e,n,r,i){var o=1/Math.tan(e/2);if(t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0){var a=1/(r-i);t[10]=i*a,t[14]=i*r*a}else t[10]=-1,t[14]=-r;return t}function jt(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(a+s),c=2/(i+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(a-s)*u*.5,t[9]=(i-o)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function Dt(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*c,t[15]=1,t}var Rt=Dt;function Ht(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=o*c,t[15]=1,t}function zt(t,e,n,r){var i,o,a,s,u,c,l,A,f,d,h=e[0],p=e[1],v=e[2],g=r[0],y=r[1],m=r[2],b=n[0],w=n[1],x=n[2];return Math.abs(h-b)<N&&Math.abs(p-w)<N&&Math.abs(v-x)<N?ut(t):(l=h-b,A=p-w,f=v-x,i=y*(f*=d=1/Math.sqrt(l*l+A*A+f*f))-m*(A*=d),o=m*(l*=d)-g*f,a=g*A-y*l,(d=Math.sqrt(i*i+o*o+a*a))?(i*=d=1/d,o*=d,a*=d):(i=0,o=0,a=0),s=A*a-f*o,u=f*i-l*a,c=l*o-A*i,(d=Math.sqrt(s*s+u*u+c*c))?(s*=d=1/d,u*=d,c*=d):(s=0,u=0,c=0),t[0]=i,t[1]=s,t[2]=l,t[3]=0,t[4]=o,t[5]=u,t[6]=A,t[7]=0,t[8]=a,t[9]=c,t[10]=f,t[11]=0,t[12]=-(i*h+o*p+a*v),t[13]=-(s*h+u*p+c*v),t[14]=-(l*h+A*p+f*v),t[15]=1,t)}function Kt(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=r[0],u=r[1],c=r[2],l=i-n[0],A=o-n[1],f=a-n[2],d=l*l+A*A+f*f;d>0&&(l*=d=1/Math.sqrt(d),A*=d,f*=d);var h=u*f-c*A,p=c*l-s*f,v=s*A-u*l;return(d=h*h+p*p+v*v)>0&&(h*=d=1/Math.sqrt(d),p*=d,v*=d),t[0]=h,t[1]=p,t[2]=v,t[3]=0,t[4]=A*v-f*p,t[5]=f*h-l*v,t[6]=l*p-A*h,t[7]=0,t[8]=l,t[9]=A,t[10]=f,t[11]=0,t[12]=i,t[13]=o,t[14]=a,t[15]=1,t}function Gt(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Vt(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]+t[3]*t[3]+t[4]*t[4]+t[5]*t[5]+t[6]*t[6]+t[7]*t[7]+t[8]*t[8]+t[9]*t[9]+t[10]*t[10]+t[11]*t[11]+t[12]*t[12]+t[13]*t[13]+t[14]*t[14]+t[15]*t[15])}function Wt(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function Yt(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function Xt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function qt(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function Zt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Jt(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=t[8],A=t[9],f=t[10],d=t[11],h=t[12],p=t[13],v=t[14],g=t[15],y=e[0],m=e[1],b=e[2],w=e[3],x=e[4],E=e[5],B=e[6],k=e[7],O=e[8],C=e[9],M=e[10],S=e[11],F=e[12],T=e[13],P=e[14],I=e[15];return Math.abs(n-y)<=N*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(r-m)<=N*Math.max(1,Math.abs(r),Math.abs(m))&&Math.abs(i-b)<=N*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(o-w)<=N*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(a-x)<=N*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(s-E)<=N*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(u-B)<=N*Math.max(1,Math.abs(u),Math.abs(B))&&Math.abs(c-k)<=N*Math.max(1,Math.abs(c),Math.abs(k))&&Math.abs(l-O)<=N*Math.max(1,Math.abs(l),Math.abs(O))&&Math.abs(A-C)<=N*Math.max(1,Math.abs(A),Math.abs(C))&&Math.abs(f-M)<=N*Math.max(1,Math.abs(f),Math.abs(M))&&Math.abs(d-S)<=N*Math.max(1,Math.abs(d),Math.abs(S))&&Math.abs(h-F)<=N*Math.max(1,Math.abs(h),Math.abs(F))&&Math.abs(p-T)<=N*Math.max(1,Math.abs(p),Math.abs(T))&&Math.abs(v-P)<=N*Math.max(1,Math.abs(v),Math.abs(P))&&Math.abs(g-I)<=N*Math.max(1,Math.abs(g),Math.abs(I))}var $t=dt,te=Yt;function ee(){var t=new L(9);return L!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function ne(){var t=new L(4);return L!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function re(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function ie(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1],c=n[2],l=n[3];return t[0]=r*l+a*s+i*c-o*u,t[1]=i*l+a*u+o*s-r*c,t[2]=o*l+a*c+r*u-i*s,t[3]=a*l-r*s-i*u-o*c,t}function oe(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o,s=a?1/a:0;return t[0]=-n*s,t[1]=-r*s,t[2]=-i*s,t[3]=o*s,t}function ae(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"zyx",o=Math.PI/360;e*=o,r*=o,n*=o;var a=Math.sin(e),s=Math.cos(e),u=Math.sin(n),c=Math.cos(n),l=Math.sin(r),A=Math.cos(r);switch(i){case"xyz":t[0]=a*c*A+s*u*l,t[1]=s*u*A-a*c*l,t[2]=s*c*l+a*u*A,t[3]=s*c*A-a*u*l;break;case"xzy":t[0]=a*c*A-s*u*l,t[1]=s*u*A-a*c*l,t[2]=s*c*l+a*u*A,t[3]=s*c*A+a*u*l;break;case"yxz":t[0]=a*c*A+s*u*l,t[1]=s*u*A-a*c*l,t[2]=s*c*l-a*u*A,t[3]=s*c*A+a*u*l;break;case"yzx":t[0]=a*c*A+s*u*l,t[1]=s*u*A+a*c*l,t[2]=s*c*l-a*u*A,t[3]=s*c*A-a*u*l;break;case"zxy":t[0]=a*c*A-s*u*l,t[1]=s*u*A+a*c*l,t[2]=s*c*l+a*u*A,t[3]=s*c*A-a*u*l;break;case"zyx":t[0]=a*c*A-s*u*l,t[1]=s*u*A+a*c*l,t[2]=s*c*l-a*u*A,t[3]=s*c*A+a*u*l;break;default:throw new Error("Unknown angle order "+i)}return t}var se=et,ue=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},ce=function(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t},le=ie,Ae=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=o*a,t};function fe(){var t=new L(2);return L!=Float32Array&&(t[0]=0,t[1]=0),t}function de(t){return"number"==typeof t}function he(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}function pe(t){return null==t}function ve(t){return"string"==typeof t}_(),j(1,0,0),j(0,1,0),ne(),ne(),ee(),fe();const ge=function(t,e,n){return t<e?e:t>n?n:t};var ye=function(t,e){return ye=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},ye(t,e)};function me(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}ye(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var be=function(){return be=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},be.apply(this,arguments)};function we(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function xe(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())})}function Ee(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Be(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function ke(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function Oe(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var Ce={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function Me(t){return Array.isArray(t)&&t.every(function(t){var e=t[0].toLowerCase();return Ce[e]===t.length-1&&"achlmqstvz".includes(e)})}function Se(t){return Me(t)&&t.every(function(t){var e=t[0];return e===e.toUpperCase()})}function Fe(t){return Se(t)&&t.every(function(t){var e=t[0];return"ACLMQZ".includes(e)})}var Te={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function Pe(t){for(var e=t.pathValue[t.segmentStart],n=e.toLowerCase(),r=t.data;r.length>=Ce[n]&&("m"===n&&r.length>2?(t.segments.push([e].concat(r.splice(0,2))),n="l",e="m"===e?"l":"L"):t.segments.push([e].concat(r.splice(0,Ce[n]))),Ce[n]););}function Ie(t){var e=t.index,n=t.pathValue,r=n.charCodeAt(e);return 48===r?(t.param=0,void(t.index+=1)):49===r?(t.param=1,void(t.index+=1)):void(t.err='[path-util]: invalid Arc flag "'.concat(n[e],'", expecting 0 or 1 at index ').concat(e))}function Ne(t){return t>=48&&t<=57||43===t||45===t||46===t}function Le(t){return t>=48&&t<=57}function _e(t){var e,n=t.max,r=t.pathValue,i=t.index,o=i,a=!1,s=!1,u=!1,c=!1;if(o>=n)t.err="[path-util]: Invalid path value at index ".concat(o,', "pathValue" is missing param');else if(43!==(e=r.charCodeAt(o))&&45!==e||(o+=1,e=r.charCodeAt(o)),Le(e)||46===e){if(46!==e){if(a=48===e,o+=1,e=r.charCodeAt(o),a&&o<n&&e&&Le(e))return void(t.err="[path-util]: Invalid path value at index ".concat(i,', "').concat(r[i],'" illegal number'));for(;o<n&&Le(r.charCodeAt(o));)o+=1,s=!0;e=r.charCodeAt(o)}if(46===e){for(c=!0,o+=1;Le(r.charCodeAt(o));)o+=1,u=!0;e=r.charCodeAt(o)}if(101===e||69===e){if(c&&!s&&!u)return void(t.err="[path-util]: Invalid path value at index ".concat(o,', "').concat(r[o],'" invalid float exponent'));if(o+=1,43!==(e=r.charCodeAt(o))&&45!==e||(o+=1),!(o<n&&Le(r.charCodeAt(o))))return void(t.err="[path-util]: Invalid path value at index ".concat(o,', "').concat(r[o],'" invalid integer exponent'));for(;o<n&&Le(r.charCodeAt(o));)o+=1}t.index=o,t.param=+t.pathValue.slice(i,o)}else t.err="[path-util]: Invalid path value at index ".concat(o,', "').concat(r[o],'" is not a number')}function Qe(t){return 10===t||13===t||8232===t||8233===t||32===t||9===t||11===t||12===t||160===t||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(t)}function Ue(t){for(var e=t.pathValue,n=t.max;t.index<n&&Qe(e.charCodeAt(t.index));)t.index+=1}function je(t){return 97==(32|t)}function De(t){var e=t.max,n=t.pathValue,r=t.index,i=n.charCodeAt(r),o=Ce[n[r].toLowerCase()];if(t.segmentStart=r,function(t){switch(32|t){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}(i))if(t.index+=1,Ue(t),t.data=[],o){for(;;){for(var a=o;a>0;a-=1){if(!je(i)||3!==a&&4!==a?_e(t):Ie(t),t.err.length)return;t.data.push(t.param),Ue(t),t.index<e&&44===n.charCodeAt(t.index)&&(t.index+=1,Ue(t))}if(t.index>=t.max)break;if(!Ne(n.charCodeAt(t.index)))break}Pe(t)}else Pe(t);else t.err='[path-util]: Invalid path value "'.concat(n[r],'" is not a path command')}var Re=function(t){this.pathValue=t,this.segments=[],this.max=t.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""};function He(t,e){var n=t[0],r=e.x1,i=e.y1,o=e.x2,a=e.y2,s=t.slice(1).map(Number),u=t;if("TQ".includes(n)||(e.qx=null,e.qy=null),"H"===n)u=["L",t[1],i];else if("V"===n)u=["L",r,t[1]];else if("S"===n){var c=2*r-o,l=2*i-a;e.x1=c,e.y1=l,u=["C",c,l].concat(s)}else if("T"===n){var A=2*r-e.qx,f=2*i-e.qy;e.qx=A,e.qy=f,u=["Q",A,f].concat(s)}else if("Q"===n){var d=s[0],h=s[1];e.qx=d,e.qy=h}return u}function ze(t){if(Fe(t))return[].concat(t);for(var e=function(t){if(Se(t))return[].concat(t);var e=function(t){if(Me(t))return[].concat(t);var e=new Re(t);for(Ue(e);e.index<e.max&&!e.err.length;)De(e);return e.err?e.err:e.segments}(t),n=0,r=0,i=0,o=0;return e.map(function(t){var e,a=t.slice(1).map(Number),s=t[0],u=s.toUpperCase();if("M"===s)return n=a[0],r=a[1],i=n,o=r,["M",n,r];if(s!==u)switch(u){case"A":e=[u,a[0],a[1],a[2],a[3],a[4],a[5]+n,a[6]+r];break;case"V":e=[u,a[0]+r];break;case"H":e=[u,a[0]+n];break;default:var c=a.map(function(t,e){return t+(e%2?r:n)});e=[u].concat(c)}else e=[u].concat(a);var l=e.length;switch(u){case"Z":n=i,r=o;break;case"H":n=e[1];break;case"V":r=e[1];break;default:n=e[l-2],r=e[l-1],"M"===u&&(i=n,o=r)}return e})}(t),n=be({},Te),r=0;r<e.length;r+=1){e[r]=He(e[r],n);var i=e[r],o=i.length;n.x1=+i[o-2],n.y1=+i[o-1],n.x2=+i[o-4]||n.x1,n.y2=+i[o-3]||n.y1}return e}function Ke(t,e,n){var r=t[0],i=t[1];return[r+(e[0]-r)*n,i+(e[1]-i)*n]}function Ge(t,e,n,r,i){var o=he([t,e],[n,r]),a={x:0,y:0};if("number"==typeof i)if(i<=0)a={x:t,y:e};else if(i>=o)a={x:n,y:r};else{var s=Ke([t,e],[n,r],i/o);a={x:s[0],y:s[1]}}return{length:o,point:a,min:{x:Math.min(t,n),y:Math.min(e,r)},max:{x:Math.max(t,n),y:Math.max(e,r)}}}function Ve(t,e){var n=t.x,r=t.y,i=e.x,o=e.y,a=n*i+r*o,s=Math.sqrt((Math.pow(n,2)+Math.pow(r,2))*(Math.pow(i,2)+Math.pow(o,2)));return(n*o-r*i<0?-1:1)*Math.acos(a/s)}function We(t,e,n,r,i,o,a,s,u,c){var l=Math.abs,A=Math.sin,f=Math.cos,d=Math.sqrt,h=Math.PI,p=l(n),v=l(r),g=(i%360+360)%360*(h/180);if(t===s&&e===u)return{x:t,y:e};if(0===p||0===v)return Ge(t,e,s,u,c).point;var y=(t-s)/2,m=(e-u)/2,b={x:f(g)*y+A(g)*m,y:-A(g)*y+f(g)*m},w=Math.pow(b.x,2)/Math.pow(p,2)+Math.pow(b.y,2)/Math.pow(v,2);w>1&&(p*=d(w),v*=d(w));var x=(Math.pow(p,2)*Math.pow(v,2)-Math.pow(p,2)*Math.pow(b.y,2)-Math.pow(v,2)*Math.pow(b.x,2))/(Math.pow(p,2)*Math.pow(b.y,2)+Math.pow(v,2)*Math.pow(b.x,2)),E=(o!==a?1:-1)*d(x=x<0?0:x),B=E*(p*b.y/v),k=E*(-v*b.x/p),O=f(g)*B-A(g)*k+(t+s)/2,C=A(g)*B+f(g)*k+(e+u)/2,M={x:(b.x-B)/p,y:(b.y-k)/v},S=Ve({x:1,y:0},M),F=Ve(M,{x:(-b.x-B)/p,y:(-b.y-k)/v});!a&&F>0?F-=2*h:a&&F<0&&(F+=2*h);var T=S+(F%=2*h)*c,P=p*f(T),I=v*A(T);return{x:f(g)*P-A(g)*I+O,y:A(g)*P+f(g)*I+C}}function Ye(t,e,n,r,i,o,a,s,u,c,l){var A,f=l.bbox,d=void 0===f||f,h=l.length,p=void 0===h||h,v=l.sampleSize,g=void 0===v?30:v,y="number"==typeof c,m=t,b=e,w=0,x=[m,b,w],E=[m,b],B={x:0,y:0},k=[{x:m,y:b}];y&&c<=0&&(B={x:m,y:b});for(var O=0;O<=g;O+=1){if(m=(A=We(t,e,n,r,i,o,a,s,u,O/g)).x,b=A.y,d&&k.push({x:m,y:b}),p&&(w+=he(E,[m,b])),E=[m,b],y&&w>=c&&c>x[2]){var C=(w-c)/(w-x[2]);B={x:E[0]*(1-C)+x[0]*C,y:E[1]*(1-C)+x[1]*C}}x=[m,b,w]}return y&&c>=w&&(B={x:s,y:u}),{length:w,point:B,min:{x:Math.min.apply(null,k.map(function(t){return t.x})),y:Math.min.apply(null,k.map(function(t){return t.y}))},max:{x:Math.max.apply(null,k.map(function(t){return t.x})),y:Math.max.apply(null,k.map(function(t){return t.y}))}}}function Xe(t,e,n,r,i,o,a,s,u){var c=1-u;return{x:Math.pow(c,3)*t+3*Math.pow(c,2)*u*n+3*c*Math.pow(u,2)*i+Math.pow(u,3)*a,y:Math.pow(c,3)*e+3*Math.pow(c,2)*u*r+3*c*Math.pow(u,2)*o+Math.pow(u,3)*s}}function qe(t,e,n,r,i,o,a,s,u,c){var l,A=c.bbox,f=void 0===A||A,d=c.length,h=void 0===d||d,p=c.sampleSize,v=void 0===p?10:p,g="number"==typeof u,y=t,m=e,b=0,w=[y,m,b],x=[y,m],E={x:0,y:0},B=[{x:y,y:m}];g&&u<=0&&(E={x:y,y:m});for(var k=0;k<=v;k+=1){if(y=(l=Xe(t,e,n,r,i,o,a,s,k/v)).x,m=l.y,f&&B.push({x:y,y:m}),h&&(b+=he(x,[y,m])),x=[y,m],g&&b>=u&&u>w[2]){var O=(b-u)/(b-w[2]);E={x:x[0]*(1-O)+w[0]*O,y:x[1]*(1-O)+w[1]*O}}w=[y,m,b]}return g&&u>=b&&(E={x:a,y:s}),{length:b,point:E,min:{x:Math.min.apply(null,B.map(function(t){return t.x})),y:Math.min.apply(null,B.map(function(t){return t.y}))},max:{x:Math.max.apply(null,B.map(function(t){return t.x})),y:Math.max.apply(null,B.map(function(t){return t.y}))}}}function Ze(t,e,n,r,i,o,a){var s=1-a;return{x:Math.pow(s,2)*t+2*s*a*n+Math.pow(a,2)*i,y:Math.pow(s,2)*e+2*s*a*r+Math.pow(a,2)*o}}function Je(t,e,n,r,i,o,a,s){var u,c=s.bbox,l=void 0===c||c,A=s.length,f=void 0===A||A,d=s.sampleSize,h=void 0===d?10:d,p="number"==typeof a,v=t,g=e,y=0,m=[v,g,y],b=[v,g],w={x:0,y:0},x=[{x:v,y:g}];p&&a<=0&&(w={x:v,y:g});for(var E=0;E<=h;E+=1){if(v=(u=Ze(t,e,n,r,i,o,E/h)).x,g=u.y,l&&x.push({x:v,y:g}),f&&(y+=he(b,[v,g])),b=[v,g],p&&y>=a&&a>m[2]){var B=(y-a)/(y-m[2]);w={x:b[0]*(1-B)+m[0]*B,y:b[1]*(1-B)+m[1]*B}}m=[v,g,y]}return p&&a>=y&&(w={x:i,y:o}),{length:y,point:w,min:{x:Math.min.apply(null,x.map(function(t){return t.x})),y:Math.min.apply(null,x.map(function(t){return t.y}))},max:{x:Math.max.apply(null,x.map(function(t){return t.x})),y:Math.max.apply(null,x.map(function(t){return t.y}))}}}function $e(t,e,n){for(var r,i,o,a,s,u,c,l,A,f=ze(t),d="number"==typeof e,h=[],p=0,v=0,g=0,y=0,m=[],b=[],w=0,x={x:0,y:0},E=x,B=x,k=x,O=0,C=0,M=f.length;C<M;C+=1)h=(c="M"===(l=(A=f[C])[0]))?h:[p,v].concat(A.slice(1)),c?(E=x={x:g=A[1],y:y=A[2]},w=0,d&&e<.001&&(k=x)):"L"===l?(w=(r=Ge(h[0],h[1],h[2],h[3],(e||0)-O)).length,x=r.min,E=r.max,B=r.point):"A"===l?(w=(i=Ye(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8],(e||0)-O,n||{})).length,x=i.min,E=i.max,B=i.point):"C"===l?(w=(o=qe(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],(e||0)-O,n||{})).length,x=o.min,E=o.max,B=o.point):"Q"===l?(w=(a=Je(h[0],h[1],h[2],h[3],h[4],h[5],(e||0)-O,n||{})).length,x=a.min,E=a.max,B=a.point):"Z"===l&&(w=(s=Ge((h=[p,v,g,y])[0],h[1],h[2],h[3],(e||0)-O)).length,x=s.min,E=s.max,B=s.point),d&&O<e&&O+w>=e&&(k=B),b.push(E),m.push(x),O+=w,p=(u="Z"!==l?A.slice(-2):[g,y])[0],v=u[1];return d&&e>=O&&(k={x:p,y:v}),{length:O,point:k,min:{x:Math.min.apply(null,m.map(function(t){return t.x})),y:Math.min.apply(null,m.map(function(t){return t.y}))},max:{x:Math.max.apply(null,b.map(function(t){return t.x})),y:Math.max.apply(null,b.map(function(t){return t.y}))}}}function tn(t){return Array.isArray(t)}const en=function(t){if(tn(t))return t.reduce(function(t,e){return Math.min(t,e)},t[0])};function nn(t){if(!Array.isArray(t))return-1/0;var e=t.length;if(!e)return-1/0;for(var n=t[0],r=1;r<e;r++)n=Math.max(n,t[r]);return n}function rn(t,e,n){return void 0===n&&(n=1e-5),t===e||Math.abs(t-e)<n}const on=function(t,e){return(t%e+e)%e};function an(t,e,n){if(t[n].length>7){t[n].shift();for(var r=t[n],i=n;r.length;)e[n]="A",t.splice(i+=1,0,["C"].concat(r.splice(0,6)));t.splice(n,1)}}function sn(t,e,n){return{x:t*Math.cos(n)-e*Math.sin(n),y:t*Math.sin(n)+e*Math.cos(n)}}function un(t,e,n,r,i,o,a,s,u,c){var l,A,f,d,h,p=t,v=e,g=n,y=r,m=s,b=u,w=120*Math.PI/180,x=Math.PI/180*(+i||0),E=[];if(c)A=c[0],f=c[1],d=c[2],h=c[3];else{p=(l=sn(p,v,-x)).x,v=l.y;var B=(p-(m=(l=sn(m,b,-x)).x))/2,k=(v-(b=l.y))/2,O=B*B/(g*g)+k*k/(y*y);O>1&&(g*=O=Math.sqrt(O),y*=O);var C=g*g,M=y*y,S=(o===a?-1:1)*Math.sqrt(Math.abs((C*M-C*k*k-M*B*B)/(C*k*k+M*B*B)));d=S*g*k/y+(p+m)/2,h=S*-y*B/g+(v+b)/2,A=Math.asin(((v-h)/y*Math.pow(10,9)|0)/Math.pow(10,9)),f=Math.asin(((b-h)/y*Math.pow(10,9)|0)/Math.pow(10,9)),A=p<d?Math.PI-A:A,f=m<d?Math.PI-f:f,A<0&&(A=2*Math.PI+A),f<0&&(f=2*Math.PI+f),a&&A>f&&(A-=2*Math.PI),!a&&f>A&&(f-=2*Math.PI)}var F=f-A;if(Math.abs(F)>w){var T=f,P=m,I=b;f=A+w*(a&&f>A?1:-1),E=un(m=d+g*Math.cos(f),b=h+y*Math.sin(f),g,y,i,0,a,P,I,[f,T,d,h])}F=f-A;var N=Math.cos(A),L=Math.sin(A),_=Math.cos(f),Q=Math.sin(f),U=Math.tan(F/4),j=4/3*g*U,D=4/3*y*U,R=[p,v],H=[p+j*L,v-D*N],z=[m+j*Q,b-D*_],K=[m,b];if(H[0]=2*R[0]-H[0],H[1]=2*R[1]-H[1],c)return H.concat(z,K,E);for(var G=[],V=0,W=(E=H.concat(z,K,E)).length;V<W;V+=1)G[V]=V%2?sn(E[V-1],E[V],x).y:sn(E[V],E[V+1],x).x;return G}var cn=function(t,e,n,r){return ke(ke([],Ke([t,e],[n,r],.5),!0),[n,r,n,r],!1)};function ln(t,e){var n,r=t[0],i=t.slice(1).map(Number),o=i[0],a=i[1],s=e.x1,u=e.y1,c=e.x,l=e.y;switch("TQ".includes(r)||(e.qx=null,e.qy=null),r){case"M":return e.x=o,e.y=a,t;case"A":return n=[s,u].concat(i),["C"].concat(un(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9]));case"Q":return e.qx=o,e.qy=a,n=[s,u].concat(i),["C"].concat(function(t,e,n,r,i,o){var a=1/3,s=2/3;return[a*t+s*n,a*e+s*r,a*i+s*n,a*o+s*r,i,o]}(n[0],n[1],n[2],n[3],n[4],n[5]));case"L":return["C"].concat(cn(s,u,o,a));case"Z":return s===c&&u===l?["C",s,u,c,l,c,l]:["C"].concat(cn(s,u,c,l))}return t}function An(t,e){if(void 0===e&&(e=!1),function(t){return Fe(t)&&t.every(function(t){var e=t[0];return"MC".includes(e)})}(t)){var n=[].concat(t);return e?[n,[]]:n}for(var r,i,o=ze(t),a=be({},Te),s=[],u="",c=o.length,l=[],A=0;A<c;A+=1){o[A]&&(u=o[A][0]),s[A]=u;var f=ln(o[A],a);o[A]=f,an(o,s,A),c=o.length,"Z"===u&&l.push(A),i=(r=o[A]).length,a.x1=+r[i-2],a.y1=+r[i-1],a.x2=+r[i-4]||a.x1,a.y2=+r[i-3]||a.y1}return e?[o,l]:o}function fn(t){return t.map(function(t,e,n){var r=e&&n[e-1].slice(-2).concat(t.slice(1)),i=e?qe(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],{bbox:!1}).length:0;return{s:t,ss:e?i?function(t,e){void 0===e&&(e=.5);var n=t.slice(0,2),r=t.slice(2,4),i=t.slice(4,6),o=t.slice(6,8),a=Ke(n,r,e),s=Ke(r,i,e),u=Ke(i,o,e),c=Ke(a,s,e),l=Ke(s,u,e),A=Ke(c,l,e);return[["C"].concat(a,c,A),["C"].concat(l,u,o)]}(r):[t,t]:[t],l:i}})}function dn(t,e,n,r){if(void 0===r&&(r=0),r>50)return console.warn("Maximum recursion depth reached in equalizeSegments"),[t,e];var i=fn(t),o=fn(e),a=i.length,s=o.length,u=i.filter(function(t){return t.l}).length,c=o.filter(function(t){return t.l}).length,l=i.filter(function(t){return t.l}).reduce(function(t,e){return t+e.l},0)/u||0,A=o.filter(function(t){return t.l}).reduce(function(t,e){return t+e.l},0)/c||0,f=n||Math.max(a,s),d=[l,A],h=[f-a,f-s],p=0,v=[i,o].map(function(t,e){return t.l===f?t.map(function(t){return t.s}):t.map(function(t,n){return p=n&&h[e]&&t.l>=d[e],h[e]-=p?1:0,p?t.ss:[t.s]}).flat()});return v[0].length===v[1].length?v:dn(v[0],v[1],f,r+1)}function hn(t){return function(t){var e=0,n=0,r=0;return An(t).map(function(t){var i;if("M"===t[0])return e=t[1],n=t[2],0;var o=t.slice(1),a=o[0],s=o[1],u=o[2],c=o[3],l=o[4],A=o[5];return r=function(t,e,n,r,i,o,a,s){return 3*((s-e)*(n+i)-(a-t)*(r+o)+r*(t-i)-n*(e-o)+s*(i+t/3)-a*(o+e/3))/20}(e,n,a,s,u,c,l,A),i=t.slice(-2),e=i[0],n=i[1],r}).reduce(function(t,e){return t+e},0)}(t)>=0}const pn=function(t){return void 0===t};var vn={}.toString;const gn=function(t,e){return vn.call(t)==="[object "+e+"]"},yn=function(t){return gn(t,"Boolean")};function mn(t){return"function"==typeof t}const bn=function(t){var e=typeof t;return null!==t&&"object"===e||"function"===e};function wn(){return wn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=C(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},wn.apply(null,arguments)}function xn(t,e,n,r){var i=wn(C(1&r?t.prototype:t),e,n);return 2&r&&"function"==typeof i?function(t){return i.apply(n,t)}:i}function En(t,e,n,r){var i=t-n,o=e-r;return Math.sqrt(i*i+o*o)}function Bn(t,e){var n=Math.min.apply(Math,O(t)),r=Math.min.apply(Math,O(e));return{x:n,y:r,width:Math.max.apply(Math,O(t))-n,height:Math.max.apply(Math,O(e))-r}}function kn(t,e,n,r,i,o){return n*Math.cos(i)*Math.cos(o)-r*Math.sin(i)*Math.sin(o)+t}function On(t,e,n,r,i,o){return n*Math.sin(i)*Math.cos(o)+r*Math.cos(i)*Math.sin(o)+e}function Cn(t,e,n,r,i,o,a){for(var s=function(t,e,n){return Math.atan(-e/t*Math.tan(n))}(n,r,i),u=1/0,c=-1/0,l=[o,a],A=2*-Math.PI;A<=2*Math.PI;A+=Math.PI){var f=s+A;o<a?o<f&&f<a&&l.push(f):a<f&&f<o&&l.push(f)}for(var d=0;d<l.length;d++){var h=kn(t,0,n,r,i,l[d]);h<u&&(u=h),h>c&&(c=h)}for(var p=function(t,e,n){return Math.atan(e/(t*Math.tan(n)))}(n,r,i),v=1/0,g=-1/0,y=[o,a],m=2*-Math.PI;m<=2*Math.PI;m+=Math.PI){var b=p+m;o<a?o<b&&b<a&&y.push(b):a<b&&b<o&&y.push(b)}for(var w=0;w<y.length;w++){var x=On(0,e,n,r,i,y[w]);x<v&&(v=x),x>g&&(g=x)}return{x:u,y:v,width:c-u,height:g-v}}function Mn(t,e,n,r,i,o){var a=-1,s=1/0,u=[n,r],c=20;o&&o>200&&(c=o/10);for(var l=1/c,A=l/10,f=0;f<=c;f++){var d=f*l,h=[i.apply(void 0,O(t.concat([d]))),i.apply(void 0,O(e.concat([d])))],p=En(u[0],u[1],h[0],h[1]);p<s&&(a=d,s=p)}if(0===a)return{x:t[0],y:e[0]};if(1===a){var v=t.length;return{x:t[v-1],y:e[v-1]}}s=1/0;for(var g=0;g<32&&!(A<1e-4);g++){var y=a-A,m=a+A,b=[i.apply(void 0,O(t.concat([y]))),i.apply(void 0,O(e.concat([y])))],w=En(u[0],u[1],b[0],b[1]);if(y>=0&&w<s)a=y,s=w;else{var x=[i.apply(void 0,O(t.concat([m]))),i.apply(void 0,O(e.concat([m])))],E=En(u[0],u[1],x[0],x[1]);m<=1&&E<s?(a=m,s=E):A*=.5}}return{x:i.apply(void 0,O(t.concat([a]))),y:i.apply(void 0,O(e.concat([a])))}}function Sn(t,e,n,r){return En(t,e,n,r)}function Fn(t,e,n,r,i){return{x:(1-i)*t+i*n,y:(1-i)*e+i*r}}function Tn(t,e,n,r,i){var o=1-i;return o*o*o*t+3*e*i*o*o+3*n*i*i*o+r*i*i*i}function Pn(t,e,n,r){var i,o,a,s=-3*t+9*e-9*n+3*r,u=6*t-12*e+6*n,c=3*e-3*t,l=[];if(rn(s,0))rn(u,0)||(i=-c/u)>=0&&i<=1&&l.push(i);else{var A=u*u-4*s*c;rn(A,0)?l.push(-u/(2*s)):A>0&&(o=(-u-(a=Math.sqrt(A)))/(2*s),(i=(-u+a)/(2*s))>=0&&i<=1&&l.push(i),o>=0&&o<=1&&l.push(o))}return l}function In(t,e,n,r,i,o,a,s){for(var u=[t,a],c=[e,s],l=Pn(t,n,i,a),A=Pn(e,r,o,s),f=0;f<l.length;f++)u.push(Tn(t,n,i,a,l[f]));for(var d=0;d<A.length;d++)c.push(Tn(e,r,o,s,A[d]));return Bn(u,c)}function Nn(t,e,n,r,i,o,a,s,u,c,l){var A=function(t,e,n,r,i,o,a,s,u,c,l){return Mn([t,n,i,a],[e,r,o,s],u,c,Tn,l)}(t,e,n,r,i,o,a,s,u,c,l);return En(A.x,A.y,u,c)}function Ln(t,e,n,r){var i=1-r;return i*i*t+2*r*i*e+r*r*n}function _n(t,e,n){var r=t+n-2*e;if(rn(r,0))return[.5];var i=(t-e)/r;return i<=1&&i>=0?[i]:[]}function Qn(t,e,n,r,i,o){var a=_n(t,n,i)[0],s=_n(e,r,o)[0],u=[t,i],c=[e,o];return void 0!==a&&u.push(Ln(t,n,i,a)),void 0!==s&&c.push(Ln(e,r,o,s)),Bn(u,c)}function Un(t,e,n,r,i,o,a,s){var u=function(t,e,n,r,i,o,a,s){return Mn([t,n,i],[e,r,o],a,s,Ln)}(t,e,n,r,i,o,a,s);return En(u.x,u.y,a,s)}function jn(t,e){this.v=t,this.k=e}var Dn=c(5838),Rn=c(7141);function Hn(t,e){function n(r,i,o,a){try{var s=t[r](i),u=s.value;return u instanceof jn?e.resolve(u.v).then(function(t){n("next",t,o,a)},function(t){n("throw",t,o,a)}):e.resolve(u).then(function(t){s.value=t,o(s)},function(t){return n("throw",t,o,a)})}catch(t){a(t)}}var r;this.next||((0,Rn.A)(Hn.prototype),(0,Rn.A)(Hn.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),(0,Rn.A)(this,"_invoke",function(t,i,o){function a(){return new e(function(e,r){n(t,o,e,r)})}return r=r?r.then(a,a):a()},!0)}function zn(t,e,n,r,i){return new Hn((0,Dn.A)().w(t,e,n,r),i||Promise)}function Kn(t,e,n,r,i){var o=zn(t,e,n,r,i);return o.next().then(function(t){return t.done?t.value:o.next()})}function Gn(t){var e=Object(t),n=[];for(var r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Vn(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError(g(t)+" is not iterable")}function Wn(){var t=(0,Dn.A)(),e=t.m(Wn),n=(Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__).constructor;function r(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===n||"GeneratorFunction"===(e.displayName||e.name))}var i={throw:1,return:2,break:3,continue:3};function o(t){var e,n;return function(r){e||(e={stop:function(){return n(r.a,2)},catch:function(){return r.v},abrupt:function(t,e){return n(r.a,i[t],e)},delegateYield:function(t,i,o){return e.resultName=i,n(r.d,Vn(t),o)},finish:function(t){return n(r.f,t)}},n=function(t,n,i){r.p=e.prev,r.n=e.next;try{return t(n,i)}finally{e.next=r.n}}),e.resultName&&(e[e.resultName]=r.v,e.resultName=void 0),e.sent=r.v,e.next=r.n;try{return t.call(this,e)}finally{r.p=e.prev,r.n=e.next}}}return(Wn=function(){return{wrap:function(e,n,r,i){return t.w(o(e),n,r,i&&i.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,e){return new jn(t,e)},AsyncIterator:Hn,async:function(t,e,n,i,a){return(r(e)?zn:Kn)(o(t),e,n,i,a)},keys:Gn,values:Vn}})()}function Yn(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function Xn(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(t){Yn(o,r,i,a,s,"next",t)}function s(t){Yn(o,r,i,a,s,"throw",t)}a(void 0)})}}function qn(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=h(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Zn(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(-1!==e.indexOf(r))continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var Jn=function(t){return t.GROUP="g",t.FRAGMENT="fragment",t.CIRCLE="circle",t.ELLIPSE="ellipse",t.IMAGE="image",t.RECT="rect",t.LINE="line",t.POLYLINE="polyline",t.POLYGON="polygon",t.TEXT="text",t.PATH="path",t.HTML="html",t.MESH="mesh",t}({}),$n=function(t){return t[t.ZERO=0]="ZERO",t[t.NEGATIVE_ONE=1]="NEGATIVE_ONE",t}({}),tr=function(){return B(function t(){x(this,t),this.plugins=[]},[{key:"addRenderingPlugin",value:function(t){this.plugins.push(t),this.context.renderingPlugins.push(t)}},{key:"removeAllRenderingPlugins",value:function(){var t=this;this.plugins.forEach(function(e){var n=t.context.renderingPlugins.indexOf(e);n>=0&&t.context.renderingPlugins.splice(n,1)})}}])}(),er=function(){return B(function t(e){x(this,t),this.clipSpaceNearZ=$n.NEGATIVE_ONE,this.plugins=[],this.config=w({enableDirtyCheck:!0,enableCulling:!1,enableAutoRendering:!0,enableDirtyRectangleRendering:!0,enableDirtyRectangleRenderingDebug:!1,enableSizeAttenuation:!0,enableRenderingOptimization:!1},e)},[{key:"registerPlugin",value:function(t){var e=this.plugins.findIndex(function(e){return e===t});-1===e&&this.plugins.push(t)}},{key:"unregisterPlugin",value:function(t){var e=this.plugins.findIndex(function(e){return e===t});e>-1&&this.plugins.splice(e,1)}},{key:"getPlugins",value:function(){return this.plugins}},{key:"getPlugin",value:function(t){return this.plugins.find(function(e){return e.name===t})}},{key:"getConfig",value:function(){return this.config}},{key:"setConfig",value:function(t){Object.assign(this.config,t)}}])}(),nr=H,rr=D,ir=K,or=Z,ar=function(){function t(){x(this,t),this.center=[0,0,0],this.halfExtents=[0,0,0],this.min=[0,0,0],this.max=[0,0,0]}return B(t,[{key:"update",value:function(t,e){rr(this.center,t),rr(this.halfExtents,e),or(this.min,this.center,this.halfExtents),nr(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(t,e){nr(this.center,e,t),ir(this.center,this.center,.5),or(this.halfExtents,e,t),ir(this.halfExtents,this.halfExtents,.5),rr(this.min,t),rr(this.max,e)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(e){if(!t.isEmpty(e))if(t.isEmpty(this))this.setMinMax(e.getMin(),e.getMax());else{var n=this.center,r=n[0],i=n[1],o=n[2],a=this.halfExtents,s=a[0],u=a[1],c=a[2],l=r-s,A=r+s,f=i-u,d=i+u,h=o-c,p=o+c,v=e.center,g=v[0],y=v[1],m=v[2],b=e.halfExtents,w=b[0],x=b[1],E=b[2],B=g-w,k=g+w,O=y-x,C=y+x,M=m-E,S=m+E;B<l&&(l=B),k>A&&(A=k),O<f&&(f=O),C>d&&(d=C),M<h&&(h=M),S>p&&(p=S),n[0]=.5*(l+A),n[1]=.5*(f+d),n[2]=.5*(h+p),a[0]=.5*(A-l),a[1]=.5*(d-f),a[2]=.5*(p-h),this.min[0]=l,this.min[1]=f,this.min[2]=h,this.max[0]=A,this.max[1]=d,this.max[2]=p}}},{key:"setFromTransformedAABB",value:function(t,e){var n=this.center,r=this.halfExtents,i=t.center,o=t.halfExtents,a=e[0],s=e[4],u=e[8],c=e[1],l=e[5],A=e[9],f=e[2],d=e[6],h=e[10],p=Math.abs(a),v=Math.abs(s),g=Math.abs(u),y=Math.abs(c),m=Math.abs(l),b=Math.abs(A),w=Math.abs(f),x=Math.abs(d),E=Math.abs(h);n[0]=e[12]+a*i[0]+s*i[1]+u*i[2],n[1]=e[13]+c*i[0]+l*i[1]+A*i[2],n[2]=e[14]+f*i[0]+d*i[1]+h*i[2],r[0]=p*o[0]+v*o[1]+g*o[2],r[1]=y*o[0]+m*o[1]+b*o[2],r[2]=w*o[0]+x*o[1]+E*o[2],or(this.min,n,r),nr(this.max,n,r)}},{key:"intersects",value:function(t){var e=this.getMax(),n=this.getMin(),r=t.getMax(),i=t.getMin();return n[0]<=r[0]&&e[0]>=i[0]&&n[1]<=r[1]&&e[1]>=i[1]&&n[2]<=r[2]&&e[2]>=i[2]}},{key:"intersection",value:function(e){if(!this.intersects(e))return null;var n,r,i,o=new t,a=(n=[0,0,0],r=this.getMin(),i=e.getMin(),n[0]=Math.max(r[0],i[0]),n[1]=Math.max(r[1],i[1]),n[2]=Math.max(r[2],i[2]),n),s=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}([0,0,0],this.getMax(),e.getMax());return o.setMinMax(a,s),o}},{key:"getNegativeFarPoint",value:function(t){return 273===t.pnVertexFlag?rr([0,0,0],this.min):272===t.pnVertexFlag?[this.min[0],this.min[1],this.max[2]]:257===t.pnVertexFlag?[this.min[0],this.max[1],this.min[2]]:256===t.pnVertexFlag?[this.min[0],this.max[1],this.max[2]]:17===t.pnVertexFlag?[this.max[0],this.min[1],this.min[2]]:16===t.pnVertexFlag?[this.max[0],this.min[1],this.max[2]]:1===t.pnVertexFlag?[this.max[0],this.max[1],this.min[2]]:[this.max[0],this.max[1],this.max[2]]}},{key:"getPositiveFarPoint",value:function(t){return 273===t.pnVertexFlag?rr([0,0,0],this.max):272===t.pnVertexFlag?[this.max[0],this.max[1],this.min[2]]:257===t.pnVertexFlag?[this.max[0],this.min[1],this.max[2]]:256===t.pnVertexFlag?[this.max[0],this.min[1],this.min[2]]:17===t.pnVertexFlag?[this.min[0],this.max[1],this.max[2]]:16===t.pnVertexFlag?[this.min[0],this.max[1],this.min[2]]:1===t.pnVertexFlag?[this.min[0],this.min[1],this.max[2]]:[this.min[0],this.min[1],this.min[2]]}}],[{key:"isEmpty",value:function(t){return!t||0===t.halfExtents[0]&&0===t.halfExtents[1]&&0===t.halfExtents[2]}}])}(),sr=function(){return B(function t(e,n){x(this,t),this.distance=e||0,this.normal=n||j(0,1,0),this.updatePNVertexFlag()},[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(Number(this.normal[0]>=0)<<8)+(Number(this.normal[1]>=0)<<4)+Number(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(t){return V(t,this.normal)-this.distance}},{key:"normalize",value:function(){var t=1/$(this.normal);K(this.normal,this.normal,t),this.distance*=t}},{key:"intersectsLine",value:function(t,e,n){var r=this.distanceToPoint(t),i=r/(r-this.distanceToPoint(e)),o=i>=0&&i<=1;return o&&n&&W(n,t,e,i),o}}])}(),ur=function(t){return t[t.OUTSIDE=4294967295]="OUTSIDE",t[t.INSIDE=0]="INSIDE",t[t.INDETERMINATE=2147483647]="INDETERMINATE",t}({}),cr=function(){return B(function t(e){if(x(this,t),this.planes=[],e)this.planes=e;else for(var n=0;n<6;n++)this.planes.push(new sr)},[{key:"extractFromVPMatrix",value:function(t){var e=v(t,16),n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],A=e[9],f=e[10],d=e[11],h=e[12],p=e[13],g=e[14],y=e[15];R(this.planes[0].normal,o-n,c-a,d-l),this.planes[0].distance=y-h,R(this.planes[1].normal,o+n,c+a,d+l),this.planes[1].distance=y+h,R(this.planes[2].normal,o+r,c+s,d+A),this.planes[2].distance=y+p,R(this.planes[3].normal,o-r,c-s,d-A),this.planes[3].distance=y-p,R(this.planes[4].normal,o-i,c-u,d-f),this.planes[4].distance=y-g,R(this.planes[5].normal,o+i,c+u,d+f),this.planes[5].distance=y+g,this.planes.forEach(function(t){t.normalize(),t.updatePNVertexFlag()})}}])}(),lr=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;x(this,t),this.x=0,this.y=0,this.x=e,this.y=n}return B(t,[{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"copyFrom",value:function(t){this.x=t.x,this.y=t.y}}])}(),Ar=function(){function t(e,n,r,i){x(this,t),this.x=e,this.y=n,this.width=r,this.height=i,this.left=e,this.right=e+r,this.top=n,this.bottom=n+i}return B(t,[{key:"toJSON",value:function(){}}],[{key:"fromRect",value:function(e){return new t(e.x,e.y,e.width,e.height)}},{key:"applyTransform",value:function(e,n){var r=et(e.x,e.y,0,1),i=et(e.x+e.width,e.y,0,1),o=et(e.x,e.y+e.height,0,1),a=et(e.x+e.width,e.y+e.height,0,1),s=tt(),u=tt(),c=tt(),l=tt();nt(s,r,n),nt(u,i,n),nt(c,o,n),nt(l,a,n);var A=Math.min(s[0],u[0],c[0],l[0]),f=Math.min(s[1],u[1],c[1],l[1]),d=Math.max(s[0],u[0],c[0],l[0]),h=Math.max(s[1],u[1],c[1],l[1]);return t.fromRect({x:A,y:f,width:d-A,height:h-f})}}])}(),fr="Method not implemented.",dr="Use document.documentElement instead.";function hr(t){return void 0===t?0:t>360||t<-360?t%360:t}var pr=_();function vr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return Array.isArray(t)&&3===t.length?r?Q(t):D(pr,t):de(t)?r?j(t,e,n):R(pr,t,e,n):r?j(t[0],t[1]||e,t[2]||n):R(pr,t[0],t[1]||e,t[2]||n)}var gr=Math.PI/180;function yr(t){return t*gr}var mr=180/Math.PI;function br(t){return t*mr}var wr=Math.PI/2;function xr(t,e){return 16===e.length?function(t,e){var n,r,i=v(St(_(),e),3),o=i[0],a=i[1],s=i[2],u=Math.asin(-e[2]/o);return u<wr?u>-wr?(n=Math.atan2(e[6]/a,e[10]/s),r=Math.atan2(e[1]/o,e[0]/o)):(r=0,n=-Math.atan2(e[4]/a,e[5]/a)):(r=0,n=Math.atan2(e[4]/a,e[5]/a)),t[0]=n,t[1]=u,t[2]=r,t}(t,e):function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=r*r,s=i*i,u=o*o,c=n*n+a+s+u,l=n*o-r*i;return l>.499995*c?(t[0]=wr,t[1]=2*Math.atan2(r,n),t[2]=0):l<-.499995*c?(t[0]=-wr,t[1]=2*Math.atan2(r,n),t[2]=0):(t[0]=Math.asin(2*(n*i-o*r)),t[1]=Math.atan2(2*(n*o+r*i),1-2*(s+u)),t[2]=Math.atan2(2*(n*r+i*o),1-2*(a+s))),t}(t,e)}function Er(t){var e=t[0],n=t[1],r=t[3],i=t[4],o=Math.sqrt(e*e+n*n),a=Math.sqrt(r*r+i*i);if(e*i-n*r<0&&(e<i?o=-o:a=-a),o){var s=1/o;e*=s,n*=s}if(a){var u=1/a;r*=u,i*=u}var c=br(Math.atan2(n,e));return[t[6],t[7],o,a,c]}var Br=rt(),kr=rt(),Or=tt(),Cr=[_(),_(),_()],Mr=_();function Sr(t,e,n,r,i){t[0]=e[0]*r+n[0]*i,t[1]=e[1]*r+n[1]*i,t[2]=e[2]*r+n[2]*i}var Fr=function(t){return t[t.ORBITING=0]="ORBITING",t[t.EXPLORING=1]="EXPLORING",t[t.TRACKING=2]="TRACKING",t}({}),Tr=function(t){return t[t.DEFAULT=0]="DEFAULT",t[t.ROTATIONAL=1]="ROTATIONAL",t[t.TRANSLATIONAL=2]="TRANSLATIONAL",t[t.CINEMATIC=3]="CINEMATIC",t}({}),Pr=function(t){return t[t.ORTHOGRAPHIC=0]="ORTHOGRAPHIC",t[t.PERSPECTIVE=1]="PERSPECTIVE",t}({}),Ir="updated",Nr=2e-4,Lr=function(){return B(function t(){x(this,t),this.clipSpaceNearZ=$n.NEGATIVE_ONE,this.eventEmitter=new I,this.matrix=rt(),this.right=j(1,0,0),this.up=j(0,1,0),this.forward=j(0,0,1),this.position=j(0,0,1),this.focalPoint=j(0,0,0),this.distanceVector=j(0,0,-1),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.zoom=1,this.rotateWorld=!1,this.fov=30,this.near=.1,this.far=1e3,this.aspect=1,this.projectionMatrix=rt(),this.projectionMatrixInverse=rt(),this.jitteredProjectionMatrix=void 0,this.enableUpdate=!0,this.type=Fr.EXPLORING,this.trackingMode=Tr.DEFAULT,this.projectionMode=Pr.PERSPECTIVE,this.frustum=new cr,this.orthoMatrix=rt()},[{key:"isOrtho",value:function(){return this.projectionMode===Pr.ORTHOGRAPHIC}},{key:"getProjectionMode",value:function(){return this.projectionMode}},{key:"getPerspective",value:function(){return this.jitteredProjectionMatrix||this.projectionMatrix}},{key:"getPerspectiveInverse",value:function(){return this.projectionMatrixInverse}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getDollyingStep",value:function(){return this.dollyingStep}},{key:"getNear",value:function(){return this.near}},{key:"getFar",value:function(){return this.far}},{key:"getZoom",value:function(){return this.zoom}},{key:"getOrthoMatrix",value:function(){return this.orthoMatrix}},{key:"getView",value:function(){return this.view}},{key:"setEnableUpdate",value:function(t){this.enableUpdate=t}},{key:"setType",value:function(t,e){return this.type=t,this.type===Fr.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===Fr.TRACKING&&void 0!==e&&this.setTrackingMode(e),this}},{key:"setProjectionMode",value:function(t){return this.projectionMode=t,this}},{key:"setTrackingMode",value:function(t){if(this.type!==Fr.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=t,this}},{key:"setWorldRotation",value:function(t){return this.rotateWorld=t,this._getAngles(),this}},{key:"getViewTransform",value:function(){return lt(rt(),this.matrix)}},{key:"getWorldTransform",value:function(){return this.matrix}},{key:"jitterProjectionMatrix",value:function(t,e){var n=bt(rt(),[t,e,0]);this.jitteredProjectionMatrix=dt(rt(),n,this.projectionMatrix)}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0}},{key:"setMatrix",value:function(t){return this.matrix=t,this._update(),this}},{key:"setProjectionMatrix",value:function(t){this.projectionMatrix=t}},{key:"setFov",value:function(t){return this.setPerspective(this.near,this.far,t,this.aspect),this}},{key:"setAspect",value:function(t){return this.setPerspective(this.near,this.far,this.fov,t),this}},{key:"setNear",value:function(t){return this.projectionMode===Pr.PERSPECTIVE?this.setPerspective(t,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,t,this.far),this}},{key:"setFar",value:function(t){return this.projectionMode===Pr.PERSPECTIVE?this.setPerspective(this.near,t,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,t),this}},{key:"setViewOffset",value:function(t,e,n,r,i,o){return this.aspect=t/e,void 0===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.projectionMode===Pr.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return void 0!==this.view&&(this.view.enabled=!1),this.projectionMode===Pr.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setZoom",value:function(t){return this.zoom=t,this.projectionMode===Pr.ORTHOGRAPHIC?this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far):this.projectionMode===Pr.PERSPECTIVE&&this.setPerspective(this.near,this.far,this.fov,this.aspect),this}},{key:"setZoomByViewportPoint",value:function(t,e){var n=this.canvas.viewport2Canvas({x:e[0],y:e[1]}),r=n.x,i=n.y,o=this.roll;this.rotate(0,0,-o),this.setPosition(r,i),this.setFocalPoint(r,i),this.setZoom(t),this.rotate(0,0,o);var a=this.canvas.viewport2Canvas({x:e[0],y:e[1]}),s=j(a.x-r,a.y-i,0),u=V(s,this.right)/U(this.right),c=V(s,this.up)/U(this.up),l=v(this.getPosition(),2),A=l[0],f=l[1],d=v(this.getFocalPoint(),2),h=d[0],p=d[1];return this.setPosition(A-u,f-c),this.setFocalPoint(h-u,p-c),this}},{key:"setPerspective",value:function(t,e,n,r){var i;this.projectionMode=Pr.PERSPECTIVE,this.fov=n,this.near=t,this.far=e,this.aspect=r;var o=this.near*Math.tan(yr(.5*this.fov))/this.zoom,a=2*o,s=this.aspect*a,u=-.5*s;if(null!==(i=this.view)&&void 0!==i&&i.enabled){var c=this.view.fullWidth,l=this.view.fullHeight;u+=this.view.offsetX*s/c,o-=this.view.offsetY*a/l,s*=this.view.width/c,a*=this.view.height/l}return function(t,e,n,r,i,o,a){var s,u,c=2*o,l=n-e,A=r-i,f=c/l,d=c/A,h=(n+e)/l,p=(r+i)/A,v=a-o,g=a*o;arguments.length>7&&void 0!==arguments[7]&&arguments[7]?(s=-a/v,u=-g/v):(s=-(a+o)/v,u=-2*g/v),t[0]=f,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=d,t[6]=0,t[7]=0,t[8]=h,t[9]=p,t[10]=s,t[11]=-1,t[12]=0,t[13]=0,t[14]=u,t[15]=0}(this.projectionMatrix,u,u+s,o-a,o,t,this.far,this.clipSpaceNearZ===$n.ZERO),lt(this.projectionMatrixInverse,this.projectionMatrix),this.triggerUpdate(),this}},{key:"setOrthographic",value:function(t,e,n,r,i,o){var a;this.projectionMode=Pr.ORTHOGRAPHIC,this.rright=e,this.left=t,this.top=n,this.bottom=r,this.near=i,this.far=o;var s=(this.rright-this.left)/(2*this.zoom),u=(this.top-this.bottom)/(2*this.zoom),c=(this.rright+this.left)/2,l=(this.top+this.bottom)/2,A=c-s,f=c+s,d=l+u,h=l-u;if(null!==(a=this.view)&&void 0!==a&&a.enabled){var p=(this.rright-this.left)/this.view.fullWidth/this.zoom,v=(this.top-this.bottom)/this.view.fullHeight/this.zoom;f=(A+=p*this.view.offsetX)+p*this.view.width,h=(d-=v*this.view.offsetY)-v*this.view.height}return this.clipSpaceNearZ===$n.NEGATIVE_ONE?Rt(this.projectionMatrix,A,f,d,h,i,o):Ht(this.projectionMatrix,A,f,d,h,i,o),lt(this.projectionMatrixInverse,this.projectionMatrix),this._getOrthoMatrix(),this.triggerUpdate(),this}},{key:"setPosition",value:function(t){var e=vr(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.position[1],arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.position[2]);return this._setPosition(e),this.setFocalPoint(this.focalPoint),this.triggerUpdate(),this}},{key:"setFocalPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.focalPoint[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.focalPoint[2],r=j(0,1,0);if(this.focalPoint=vr(t,e,n),this.trackingMode===Tr.CINEMATIC){var i=z(_(),this.focalPoint,this.position);t=i[0],e=i[1],n=i[2];var o=U(i),a=br(Math.asin(e/o)),s=90+br(Math.atan2(n,t)),u=rt();yt(u,u,yr(s)),gt(u,u,yr(a)),r=Y(_(),[0,1,0],u)}return lt(this.matrix,zt(rt(),this.position,this.focalPoint,r)),this._getAxes(),this._getDistance(),this._getAngles(),this.triggerUpdate(),this}},{key:"getDistance",value:function(){return this.distance}},{key:"getDistanceVector",value:function(){return this.distanceVector}},{key:"setDistance",value:function(t){if(this.distance===t||t<0)return this;this.distance=t,this.distance<Nr&&(this.distance=Nr),this.dollyingStep=this.distance/100;var e=_();t=this.distance;var n=this.forward,r=this.focalPoint;return e[0]=t*n[0]+r[0],e[1]=t*n[1]+r[1],e[2]=t*n[2]+r[2],this._setPosition(e),this.triggerUpdate(),this}},{key:"setMaxDistance",value:function(t){return this.maxDistance=t,this}},{key:"setMinDistance",value:function(t){return this.minDistance=t,this}},{key:"setAzimuth",value:function(t){return this.azimuth=hr(t),this.computeMatrix(),this._getAxes(),this.type===Fr.ORBITING||this.type===Fr.EXPLORING?this._getPosition():this.type===Fr.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(t){return this.elevation=hr(t),this.computeMatrix(),this._getAxes(),this.type===Fr.ORBITING||this.type===Fr.EXPLORING?this._getPosition():this.type===Fr.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getElevation",value:function(){return this.elevation}},{key:"setRoll",value:function(t){return this.roll=hr(t),this.computeMatrix(),this._getAxes(),this.type===Fr.ORBITING||this.type===Fr.EXPLORING?this._getPosition():this.type===Fr.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getRoll",value:function(){return this.roll}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles(),this._getOrthoMatrix(),this.triggerUpdate()}},{key:"computeMatrix",value:function(){var t=re(ne(),[0,0,1],yr(this.roll));ut(this.matrix);var e=re(ne(),[1,0,0],yr((this.rotateWorld&&this.type!==Fr.TRACKING||this.type===Fr.TRACKING?1:-1)*this.elevation)),n=re(ne(),[0,1,0],yr((this.rotateWorld&&this.type!==Fr.TRACKING||this.type===Fr.TRACKING?1:-1)*this.azimuth)),r=ie(ne(),n,e);r=ie(ne(),r,t);var i=Nt(rt(),r);this.type===Fr.ORBITING||this.type===Fr.EXPLORING?(ht(this.matrix,this.matrix,this.focalPoint),dt(this.matrix,this.matrix,i),ht(this.matrix,this.matrix,[0,0,this.distance])):this.type===Fr.TRACKING&&(ht(this.matrix,this.matrix,this.position),dt(this.matrix,this.matrix,i))}},{key:"_setPosition",value:function(t,e,n){this.position=vr(t,e,n);var r=this.matrix;r[12]=this.position[0],r[13]=this.position[1],r[14]=this.position[2],r[15]=1,this._getOrthoMatrix()}},{key:"_getAxes",value:function(){D(this.right,vr(nt(tt(),[1,0,0,0],this.matrix))),D(this.up,vr(nt(tt(),[0,1,0,0],this.matrix))),D(this.forward,vr(nt(tt(),[0,0,1,0],this.matrix))),G(this.right,this.right),G(this.up,this.up),G(this.forward,this.forward)}},{key:"_getAngles",value:function(){var t=this.distanceVector[0],e=this.distanceVector[1],n=this.distanceVector[2],r=U(this.distanceVector);if(0===r)return this.elevation=0,void(this.azimuth=0);this.type===Fr.TRACKING||this.rotateWorld?(this.elevation=br(Math.asin(e/r)),this.azimuth=br(Math.atan2(-t,-n))):(this.elevation=-br(Math.asin(e/r)),this.azimuth=-br(Math.atan2(-t,-n)))}},{key:"_getPosition",value:function(){D(this.position,vr(nt(tt(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){var t,e;X(this.distanceVector,[0,0,-this.distance],(t=ee(),e=this.matrix,t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t)),H(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=z(_(),this.focalPoint,this.position),this.distance=U(this.distanceVector),this.dollyingStep=this.distance/100}},{key:"_getOrthoMatrix",value:function(){if(this.projectionMode===Pr.ORTHOGRAPHIC){var t=this.position,e=re(ne(),[0,0,1],-this.roll*Math.PI/180);It(this.orthoMatrix,e,j((this.rright-this.left)/2-t[0],(this.top-this.bottom)/2-t[1],0),j(this.zoom,this.zoom,1),t)}}},{key:"triggerUpdate",value:function(){if(this.enableUpdate){var t=this.getViewTransform(),e=dt(rt(),this.getPerspective(),t);this.getFrustum().extractFromVPMatrix(e),this.eventEmitter.emit(Ir)}}},{key:"rotate",value:function(t,e,n){throw new Error(fr)}},{key:"pan",value:function(t,e){throw new Error(fr)}},{key:"dolly",value:function(t){throw new Error(fr)}},{key:"createLandmark",value:function(t,e){throw new Error(fr)}},{key:"gotoLandmark",value:function(t,e){throw new Error(fr)}},{key:"cancelLandmarkAnimation",value:function(){throw new Error(fr)}}])}(),_r=function(t){return t[t.Standard=0]="Standard",t}({}),Qr=function(t){return t[t.ADDED=0]="ADDED",t[t.REMOVED=1]="REMOVED",t[t.Z_INDEX_CHANGED=2]="Z_INDEX_CHANGED",t}({}),Ur=_(),jr=rt(),Dr=ne();function Rr(t){if(t.localDirtyFlag){if(0!==t.localSkew[0]||0!==t.localSkew[1]){It(t.localTransform,t.localRotation,t.localPosition,j(1,1,1),t.origin),0===t.localSkew[0]&&0===t.localSkew[1]||(ut(jr),jr[4]=Math.tan(t.localSkew[0]),jr[1]=Math.tan(t.localSkew[1]),dt(t.localTransform,t.localTransform,jr));var e=It(jr,ce(Dr,0,0,0,1),R(Ur,1,1,1),t.localScale,t.origin);dt(t.localTransform,t.localTransform,e)}else{var n=t.localTransform,r=t.localPosition,i=t.localRotation,o=t.localScale,a=t.origin,s=0!==r[0]||0!==r[1]||0!==r[2],u=1!==i[3]||0!==i[0]||0!==i[1]||0!==i[2],c=1!==o[0]||1!==o[1]||1!==o[2],l=0!==a[0]||0!==a[1]||0!==a[2];u||c||l?It(n,i,r,o,a):s?bt(n,r):ut(n)}t.localDirtyFlag=!1}}var Hr={absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new Ar(0,0,0,0)},zr=function(t){return t.COORDINATE="<coordinate>",t.COLOR="<color>",t.PAINT="<paint>",t.NUMBER="<number>",t.ANGLE="<angle>",t.OPACITY_VALUE="<opacity-value>",t.SHADOW_BLUR="<shadow-blur>",t.LENGTH="<length>",t.PERCENTAGE="<percentage>",t.LENGTH_PERCENTAGE="<length> | <percentage>",t.LENGTH_PERCENTAGE_12="[<length> | <percentage>]{1,2}",t.LENGTH_PERCENTAGE_14="[<length> | <percentage>]{1,4}",t.LIST_OF_POINTS="<list-of-points>",t.PATH="<path>",t.FILTER="<filter>",t.Z_INDEX="<z-index>",t.OFFSET_DISTANCE="<offset-distance>",t.DEFINED_PATH="<defined-path>",t.MARKER="<marker>",t.TRANSFORM="<transform>",t.TRANSFORM_ORIGIN="<transform-origin>",t.TEXT="<text>",t.TEXT_TRANSFORM="<text-transform>",t}({});function Kr(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Gr(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Vr(){}var Wr=.7,Yr=1/Wr,Xr="\\s*([+-]?\\d+)\\s*",qr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Zr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Jr=/^#([0-9a-f]{3,8})$/,$r=new RegExp("^rgb\\(".concat(Xr,",").concat(Xr,",").concat(Xr,"\\)$")),ti=new RegExp("^rgb\\(".concat(Zr,",").concat(Zr,",").concat(Zr,"\\)$")),ei=new RegExp("^rgba\\(".concat(Xr,",").concat(Xr,",").concat(Xr,",").concat(qr,"\\)$")),ni=new RegExp("^rgba\\(".concat(Zr,",").concat(Zr,",").concat(Zr,",").concat(qr,"\\)$")),ri=new RegExp("^hsl\\(".concat(qr,",").concat(Zr,",").concat(Zr,"\\)$")),ii=new RegExp("^hsla\\(".concat(qr,",").concat(Zr,",").concat(Zr,",").concat(qr,"\\)$")),oi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ai(){return this.rgb().formatHex()}function si(){return this.rgb().formatRgb()}function ui(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Jr.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?ci(e):3===n?new Ai(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?li(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?li(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=$r.exec(t))?new Ai(e[1],e[2],e[3],1):(e=ti.exec(t))?new Ai(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=ei.exec(t))?li(e[1],e[2],e[3],e[4]):(e=ni.exec(t))?li(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=ri.exec(t))?gi(e[1],e[2]/100,e[3]/100,1):(e=ii.exec(t))?gi(e[1],e[2]/100,e[3]/100,e[4]):oi.hasOwnProperty(t)?ci(oi[t]):"transparent"===t?new Ai(NaN,NaN,NaN,0):null}function ci(t){return new Ai(t>>16&255,t>>8&255,255&t,1)}function li(t,e,n,r){return r<=0&&(t=e=n=NaN),new Ai(t,e,n,r)}function Ai(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function fi(){return"#".concat(vi(this.r)).concat(vi(this.g)).concat(vi(this.b))}function di(){var t=hi(this.opacity);return"".concat(1===t?"rgb(":"rgba(").concat(pi(this.r),", ").concat(pi(this.g),", ").concat(pi(this.b)).concat(1===t?")":", ".concat(t,")"))}function hi(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function pi(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function vi(t){return((t=pi(t))<16?"0":"")+t.toString(16)}function gi(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new mi(t,e,n,r)}function yi(t){if(t instanceof mi)return new mi(t.h,t.s,t.l,t.opacity);if(t instanceof Vr||(t=ui(t)),!t)return new mi;if(t instanceof mi)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new mi(a,s,u,t.opacity)}function mi(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function bi(t){return(t=(t||0)%360)<0?t+360:t}function wi(t){return Math.max(0,Math.min(1,t||0))}function xi(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Ei(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=e?e.apply(this,i):i[0],s=n.cache;if(s.has(a))return s.get(a);var u=t.apply(this,i);return n.cache=s.set(a,u)||s,u};return n.cache=new(Ei.Cache||Map),Ei.cacheList.push(n.cache),n}Kr(Vr,ui,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:ai,formatHex:ai,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return yi(this).formatHsl()},formatRgb:si,toString:si}),Kr(Ai,function(t,e,n,r){return 1===arguments.length?((i=t)instanceof Vr||(i=ui(i)),i?new Ai((i=i.rgb()).r,i.g,i.b,i.opacity):new Ai):new Ai(t,e,n,null==r?1:r);var i},Gr(Vr,{brighter:function(t){return t=null==t?Yr:Math.pow(Yr,t),new Ai(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?Wr:Math.pow(Wr,t),new Ai(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},clamp:function(){return new Ai(pi(this.r),pi(this.g),pi(this.b),hi(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fi,formatHex:fi,formatHex8:function(){return"#".concat(vi(this.r)).concat(vi(this.g)).concat(vi(this.b)).concat(vi(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:di,toString:di})),Kr(mi,function(t,e,n,r){return 1===arguments.length?yi(t):new mi(t,e,n,null==r?1:r)},Gr(Vr,{brighter:function(t){return t=null==t?Yr:Math.pow(Yr,t),new mi(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?Wr:Math.pow(Wr,t),new mi(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Ai(xi(t>=240?t-240:t+120,i,r),xi(t,i,r),xi(t<120?t+240:t-120,i,r),this.opacity)},clamp:function(){return new mi(bi(this.h),wi(this.s),wi(this.l),hi(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=hi(this.opacity);return"".concat(1===t?"hsl(":"hsla(").concat(bi(this.h),", ").concat(100*wi(this.s),"%, ").concat(100*wi(this.l),"%").concat(1===t?")":", ".concat(t,")"))}})),Ei.Cache=Map,Ei.cacheList=[],Ei.clearCache=function(){Ei.cacheList.forEach(function(t){return t.clear()})};var Bi=function(t){return t[t.kUnknown=0]="kUnknown",t[t.kNumber=1]="kNumber",t[t.kPercentage=2]="kPercentage",t[t.kEms=3]="kEms",t[t.kPixels=4]="kPixels",t[t.kRems=5]="kRems",t[t.kDegrees=6]="kDegrees",t[t.kRadians=7]="kRadians",t[t.kGradians=8]="kGradians",t[t.kTurns=9]="kTurns",t[t.kMilliseconds=10]="kMilliseconds",t[t.kSeconds=11]="kSeconds",t[t.kInteger=12]="kInteger",t}({}),ki=function(t){return t[t.kUNumber=0]="kUNumber",t[t.kUPercent=1]="kUPercent",t[t.kULength=2]="kULength",t[t.kUAngle=3]="kUAngle",t[t.kUTime=4]="kUTime",t[t.kUOther=5]="kUOther",t}({}),Oi=function(t){return t[t.kYes=0]="kYes",t[t.kNo=1]="kNo",t}({}),Ci=function(t){return t[t.kYes=0]="kYes",t[t.kNo=1]="kNo",t}({}),Mi=[{name:"em",unit_type:Bi.kEms},{name:"px",unit_type:Bi.kPixels},{name:"deg",unit_type:Bi.kDegrees},{name:"rad",unit_type:Bi.kRadians},{name:"grad",unit_type:Bi.kGradians},{name:"ms",unit_type:Bi.kMilliseconds},{name:"s",unit_type:Bi.kSeconds},{name:"rem",unit_type:Bi.kRems},{name:"turn",unit_type:Bi.kTurns}],Si=function(t){return t[t.kUnknownType=0]="kUnknownType",t[t.kUnparsedType=1]="kUnparsedType",t[t.kKeywordType=2]="kKeywordType",t[t.kUnitType=3]="kUnitType",t[t.kSumType=4]="kSumType",t[t.kProductType=5]="kProductType",t[t.kNegateType=6]="kNegateType",t[t.kInvertType=7]="kInvertType",t[t.kMinType=8]="kMinType",t[t.kMaxType=9]="kMaxType",t[t.kClampType=10]="kClampType",t[t.kTransformType=11]="kTransformType",t[t.kPositionType=12]="kPositionType",t[t.kURLImageType=13]="kURLImageType",t[t.kColorType=14]="kColorType",t[t.kUnsupportedColorType=15]="kUnsupportedColorType",t}({}),Fi=function(t){var e=1;switch(t){case Bi.kPixels:case Bi.kDegrees:case Bi.kSeconds:break;case Bi.kMilliseconds:e=.001;break;case Bi.kRadians:e=180/Math.PI;break;case Bi.kGradians:e=.9;break;case Bi.kTurns:e=360}return e},Ti=function(t){switch(t){case Bi.kNumber:case Bi.kInteger:return"";case Bi.kPercentage:return"%";case Bi.kEms:return"em";case Bi.kRems:return"rem";case Bi.kPixels:return"px";case Bi.kDegrees:return"deg";case Bi.kRadians:return"rad";case Bi.kGradians:return"grad";case Bi.kMilliseconds:return"ms";case Bi.kSeconds:return"s";case Bi.kTurns:return"turn"}return""},Pi=function(){return B(function t(){x(this,t)},[{key:"toString",value:function(){return this.buildCSSText(Oi.kNo,Ci.kNo,"")}},{key:"isNumericValue",value:function(){return this.getType()>=Si.kUnitType&&this.getType()<=Si.kClampType}}],[{key:"isAngle",value:function(t){return t===Bi.kDegrees||t===Bi.kRadians||t===Bi.kGradians||t===Bi.kTurns}},{key:"isLength",value:function(t){return t>=Bi.kEms&&t<Bi.kDegrees}},{key:"isRelativeUnit",value:function(t){return t===Bi.kPercentage||t===Bi.kEms||t===Bi.kRems}},{key:"isTime",value:function(t){return t===Bi.kSeconds||t===Bi.kMilliseconds}}])}(),Ii=function(t){function e(t){var n;return x(this,e),(n=F(this,e)).colorSpace=t,n}return P(e,t),B(e,[{key:"getType",value:function(){return Si.kColorType}},{key:"to",value:function(t){return this}}])}(Pi),Ni=function(t){return t[t.Constant=0]="Constant",t[t.LinearGradient=1]="LinearGradient",t[t.RadialGradient=2]="RadialGradient",t}({}),Li=function(t){function e(t,n){var r;return x(this,e),(r=F(this,e)).type=t,r.value=n,r}return P(e,t),B(e,[{key:"clone",value:function(){return new e(this.type,this.value)}},{key:"buildCSSText",value:function(t,e,n){return n}},{key:"getType",value:function(){return Si.kColorType}}])}(Pi),_i=function(t){function e(t){var n;return x(this,e),(n=F(this,e)).value=t,n}return P(e,t),B(e,[{key:"clone",value:function(){return new e(this.value)}},{key:"getType",value:function(){return Si.kKeywordType}},{key:"buildCSSText",value:function(t,e,n){return n+this.value}}])}(Pi),Qi=function(t){return function(t){switch(t){case ki.kUNumber:return Bi.kNumber;case ki.kULength:return Bi.kPixels;case ki.kUPercent:return Bi.kPercentage;case ki.kUTime:return Bi.kSeconds;case ki.kUAngle:return Bi.kDegrees;default:return Bi.kUnknown}}(function(t){switch(t){case Bi.kNumber:case Bi.kInteger:return ki.kUNumber;case Bi.kPercentage:return ki.kUPercent;case Bi.kPixels:return ki.kULength;case Bi.kMilliseconds:case Bi.kSeconds:return ki.kUTime;case Bi.kDegrees:case Bi.kRadians:case Bi.kGradians:case Bi.kTurns:return ki.kUAngle;default:return ki.kUOther}}(t))},Ui=function(t){function e(t){var n,r,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bi.kNumber;return x(this,e),n=F(this,e),r="string"==typeof o?(i=o)?"number"===i?Bi.kNumber:"percent"===i||"%"===i?Bi.kPercentage:function(t){return Mi.find(function(e){return e.name===t}).unit_type}(i):Bi.kUnknown:o,n.unit=r,n.value=t,n}return P(e,t),B(e,[{key:"clone",value:function(){return new e(this.value,this.unit)}},{key:"equals",value:function(t){var e=t;return this.value===e.value&&this.unit===e.unit}},{key:"getType",value:function(){return Si.kUnitType}},{key:"convertTo",value:function(t){if(this.unit===t)return new e(this.value,this.unit);var n=Qi(this.unit);if(n!==Qi(t)||n===Bi.kUnknown)return null;var r=Fi(this.unit)/Fi(t);return new e(this.value*r,t)}},{key:"buildCSSText",value:function(t,e,n){var r;switch(this.unit){case Bi.kUnknown:break;case Bi.kInteger:r=Number(this.value).toFixed(0);break;case Bi.kNumber:case Bi.kPercentage:case Bi.kEms:case Bi.kRems:case Bi.kPixels:case Bi.kDegrees:case Bi.kRadians:case Bi.kGradians:case Bi.kMilliseconds:case Bi.kSeconds:case Bi.kTurns:var i=this.value,o=Ti(this.unit);if(i<-999999||i>999999){var a=Ti(this.unit);r=!Number.isFinite(i)||Number.isNaN(i)?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(Number.isFinite(t)?"NaN":t>0?"infinity":"-infinity")+e}(i,a):i+(a||"")}else r="".concat(i).concat(o)}return n+r}}])}(Pi),ji=new Ui(0,"px");new Ui(1,"px");var Di=new Ui(0,"deg"),Ri=function(t){function e(t,n,r){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return x(this,e),(i=F(this,e,["rgb"])).r=t,i.g=n,i.b=r,i.alpha=o,i.isNone=a,i}return P(e,t),B(e,[{key:"clone",value:function(){return new e(this.r,this.g,this.b,this.alpha)}},{key:"buildCSSText",value:function(t,e,n){return"".concat(n,"rgba(").concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.alpha,")")}}])}(Ii),Hi=new _i("unset"),zi={"":Hi,unset:Hi,initial:new _i("initial"),inherit:new _i("inherit")},Ki=new Ri(0,0,0,0,!0),Gi=new Ri(0,0,0,0),Vi=Ei(function(t,e,n,r){return new Ri(t,e,n,r)},function(t,e,n,r){return"rgba(".concat(t,",").concat(e,",").concat(n,",").concat(r,")")}),Wi=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bi.kNumber;return new Ui(t,e)};function Yi(t){var e=t.type,n=t.value;return"hex"===e?"#".concat(n):"literal"===e?n:"rgb"===e?"rgb(".concat(n.join(","),")"):"rgba(".concat(n.join(","),")")}new Ui(50,"%");var Xi=function(){var t=/^(linear\-gradient)/i,e=/^(repeating\-linear\-gradient)/i,n=/^(radial\-gradient)/i,r=/^(repeating\-radial\-gradient)/i,i=/^(conic\-gradient)/i,o=/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,a=/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,s=/^(left|center|right|top|bottom)/i,u=/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,c=/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,l=/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,A=/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,f=/^\(/,d=/^\)/,h=/^,/,p=/^\#([0-9a-fA-F]+)/,v=/^([a-zA-Z]+)/,g=/^rgb/i,y=/^rgba/i,m=/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/,b="";function w(t){throw new Error("".concat(b,": ").concat(t))}function x(){return E("linear-gradient",t,k)||E("repeating-linear-gradient",e,k)||E("radial-gradient",n,O)||E("repeating-radial-gradient",r,O)||E("conic-gradient",i,O)}function E(t,e,n){return B(e,function(e){var r=n();return r&&(Q(h)||w("Missing comma before color stops")),{type:t,orientation:r,colorStops:T(P)}})}function B(t,e){var n=Q(t);if(n){Q(f)||w("Missing (");var r=e(n);return Q(d)||w("Missing )"),r}}function k(){return _("directional",o,1)||_("angular",A,1)}function O(){var t,e,n=C();return n&&((t=[]).push(n),e=b,Q(h)&&((n=C())?t.push(n):b=e)),t}function C(){var t,e=function(){var t=_("shape",/^(circle)/i,0);return t&&(t.style=L()||M()),t}()||((t=_("shape",/^(ellipse)/i,0))&&(t.style=N()||M()),t);if(e)e.at=S();else{var n=M();if(n){e=n;var r=S();r&&(e.at=r)}else{var i=F();i&&(e={type:"default-radial",at:i})}}return e}function M(){return _("extent-keyword",a,1)}function S(){if(_("position",/^at/,0)){var t=F();return t||w("Missing positioning value"),t}}function F(){var t={x:N(),y:N()};if(t.x||t.y)return{type:"position",value:t}}function T(t){var e=t(),n=[];if(e)for(n.push(e);Q(h);)(e=t())?n.push(e):w("One extra comma");return n}function P(){var t=_("hex",p,1)||B(y,function(){return{type:"rgba",value:T(I)}})||B(g,function(){return{type:"rgb",value:T(I)}})||_("literal",v,0);return t||w("Expected color definition"),t.length=N(),t}function I(){return Q(m)[1]}function N(){return _("%",c,1)||_("position-keyword",s,1)||L()}function L(){return _("px",u,1)||_("em",l,1)}function _(t,e,n){var r=Q(e);if(r)return{type:t,value:r[n]}}function Q(t){var e=/^[\n\r\t\s]+/.exec(b);e&&U(e[0].length);var n=t.exec(b);return n&&U(n[0].length),n}function U(t){b=b.substring(t)}return function(t){return b=t,e=T(x),b.length>0&&w("Invalid input not EOF"),e;var e}}(),qi=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Zi=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Ji=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,$i=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,to={left:180,top:-90,bottom:90,right:0,"left top":225,"top left":225,"left bottom":135,"bottom left":135,"right top":-45,"top right":-45,"right bottom":45,"bottom right":45},eo=Ei(function(t){var e;return e="angular"===t.type?Number(t.value):to[t.value]||0,Wi(e,"deg")}),no=Ei(function(t){var e=50,n=50,r="%",i="%";if("position"===(null==t?void 0:t.type)){var o=t.value,a=o.x,s=o.y;"position-keyword"===(null==a?void 0:a.type)&&("left"===a.value?e=0:"center"===a.value?e=50:"right"===a.value?e=100:"top"===a.value?n=0:"bottom"===a.value&&(n=100)),"position-keyword"===(null==s?void 0:s.type)&&("left"===s.value?e=0:"center"===s.value?n=50:"right"===s.value?e=100:"top"===s.value?n=0:"bottom"===s.value&&(n=100)),"px"!==(null==a?void 0:a.type)&&"%"!==(null==a?void 0:a.type)&&"em"!==(null==a?void 0:a.type)||(r=null==a?void 0:a.type,e=Number(a.value)),"px"!==(null==s?void 0:s.type)&&"%"!==(null==s?void 0:s.type)&&"em"!==(null==s?void 0:s.type)||(i=null==s?void 0:s.type,n=Number(s.value))}return{cx:Wi(e,r),cy:Wi(n,i)}}),ro=Ei(function(t){if(t.indexOf("linear")>-1||t.indexOf("radial")>-1)return Xi(t).map(function(t){var e=t.type,n=t.orientation,r=t.colorStops;!function(t){var e,n,r=t.length;t[r-1].length=null!==(e=t[r-1].length)&&void 0!==e?e:{type:"%",value:"100"},r>1&&(t[0].length=null!==(n=t[0].length)&&void 0!==n?n:{type:"%",value:"0"});for(var i=0,o=Number(t[0].length.value),a=1;a<r;a++){var s,u=null===(s=t[a].length)||void 0===s?void 0:s.value;if(!pe(u)&&!pe(o)){for(var c=1;c<a-i;c++)t[i+c].length={type:"%",value:"".concat(o+(Number(u)-o)*c/(a-i))};i=a,o=Number(u)}}}(r);var i,o=r.map(function(t){return{offset:Wi(Number(t.length.value),"%"),color:Yi(t)}});if("linear-gradient"===e)return new Li(Ni.LinearGradient,{angle:n?eo(n):Di,steps:o});if("radial-gradient"===e&&(n||(n=[{type:"shape",value:"circle"}]),"shape"===n[0].type&&"circle"===n[0].value)){var a,s=no(n[0].at),u=s.cx,c=s.cy;if(n[0].style){var l=n[0].style,A=l.type,f=l.value;"extent-keyword"===A?(zi[i=f]||(zi[i]=new _i(i)),a=zi[i]):a=Wi(f,A)}return new Li(Ni.RadialGradient,{cx:u,cy:c,size:a,steps:o})}});var e=t[0];if("("===t[1]||"("===t[2])if("l"===e){var n=qi.exec(t);if(n){var r,i=(null===(r=n[2].match($i))||void 0===r?void 0:r.map(function(t){return t.split(":")}))||[];return[new Li(Ni.LinearGradient,{angle:Wi(parseFloat(n[1]),"deg"),steps:i.map(function(t){var e=v(t,2),n=e[0],r=e[1];return{offset:Wi(100*Number(n),"%"),color:r}})})]}}else if("r"===e){var o=function(t){var e=Zi.exec(t);if(e){var n,r=(null===(n=e[4].match($i))||void 0===n?void 0:n.map(function(t){return t.split(":")}))||[];return{cx:Wi(50,"%"),cy:Wi(50,"%"),steps:r.map(function(t){var e=v(t,2),n=e[0],r=e[1];return{offset:Wi(100*Number(n),"%"),color:r}})}}return null}(t);if(o){if(!ve(o))return[new Li(Ni.RadialGradient,o)];t=o}}else if("p"===e)return function(t){var e=Ji.exec(t);if(e){var n=e[1],r=e[2];switch(n){case"a":n="repeat";break;case"x":n="repeat-x";break;case"y":n="repeat-y";break;default:n="no-repeat"}return{image:r,repetition:n}}return null}(t)});function io(t){return t&&!!t.image}function oo(t){return t&&!pe(t.r)&&!pe(t.g)&&!pe(t.b)}var ao=Ei(function(t){if(io(t))return w({repetition:"repeat"},t);if(pe(t)&&(t=""),"transparent"===t)return Gi;if("currentColor"===t)t="black";else if("none"===t)return Ki;var e=ro(t);if(e)return e;var n=ui(t),r=[0,0,0,0];return null!==n&&(r[0]=n.r||0,r[1]=n.g||0,r[2]=n.b||0,r[3]=n.opacity),Vi.apply(void 0,r)});function so(t,e){if(oo(t)&&oo(e))return[[Number(t.r),Number(t.g),Number(t.b),Number(t.alpha)],[Number(e.r),Number(e.g),Number(e.b),Number(e.alpha)],function(t){var e=t.slice();if(e[3])for(var n=0;n<3;n++)e[n]=Math.round(ge(e[n],0,255));return e[3]=ge(e[3],0,1),"rgba(".concat(e.join(","),")")}]}function uo(t,e){if(pe(e))return Wi(0,"px");if(e="".concat(e).trim().toLowerCase(),isFinite(Number(e))){if("px".search(t)>=0)return Wi(Number(e),"px");if("deg".search(t)>=0)return Wi(Number(e),"deg")}var n=[];e=e.replace(t,function(t){return n.push(t),"U".concat(t)});var r="U(".concat(t.source,")");return n.map(function(t){return Wi(Number(e.replace(new RegExp("U".concat(t),"g"),"").replace(new RegExp(r,"g"),"*0")),t)})[0]}var co=function(t){return uo(new RegExp("px","g"),t)},lo=Ei(co);Ei(function(t){return uo(new RegExp("%","g"),t)});var Ao=function(t){return de(t)||isFinite(Number(t))?Wi(Number(t)||0,"px"):uo(new RegExp("px|%|em|rem","g"),t)},fo=Ei(Ao),ho=function(t){return uo(new RegExp("deg|rad|grad|turn","g"),t)},po=Ei(ho);function vo(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o="",a=t.value||0,s=e.value||0,u=Qi(t.unit),c=t.convertTo(u),l=e.convertTo(u);return c&&l?(a=c.value,s=l.value,o=Ti(t.unit)):(Ui.isLength(t.unit)||Ui.isLength(e.unit))&&(a=mo(t,i,n),s=mo(e,i,n),o="px"),[a,s,function(t){return r&&(t=Math.max(t,0)),t+o}]}function go(t){var e=0;return t.unit===Bi.kDegrees?e=t.value:t.unit===Bi.kRadians?e=br(Number(t.value)):t.unit===Bi.kTurns?e=360*Number(t.value):t.value&&(e=t.value),e}function yo(t,e){var n;return Array.isArray(t)?n=t.map(function(t){return Number(t)}):ve(t)?n=t.split(" ").map(function(t){return Number(t)}):de(t)&&(n=[t]),2===e?1===n.length?[n[0],n[0]]:[n[0],n[1]]:4===e?1===n.length?[n[0],n[0],n[0],n[0]]:2===n.length?[n[0],n[1],n[0],n[1]]:3===n.length?[n[0],n[1],n[2],n[1]]:[n[0],n[1],n[2],n[3]]:"even"===e&&n.length%2==1?[].concat(O(n),O(n)):n}function mo(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t.unit===Bi.kPixels)return Number(t.value);if(t.unit===Bi.kPercentage&&n){var i=n.nodeName===Jn.GROUP?n.getLocalBounds():n.getGeometryBounds();return(r?i.min[e]:0)+t.value/100*i.halfExtents[e]*2}return 0}var bo=["blur","brightness","drop-shadow","contrast","grayscale","sepia","saturate","hue-rotate","invert"];function wo(t){return t.toString()}var xo=function(t){return"number"==typeof t?Wi(t):/^\s*[-+]?(\d*\.)?\d+\s*$/.test(t)?Wi(Number(t)):Wi(0)},Eo=Ei(xo);function Bo(t,e){return[t,e,wo]}function ko(t,e){return function(n,r){return[n,r,function(n){return wo(ge(n,t,e))}]}}function Oo(t,e){if(t.length===e.length)return[t,e,function(t){return t}]}function Co(t){return 0===t.parsedStyle.d.totalLength&&(t.parsedStyle.d.totalLength=$e(t.parsedStyle.d.absolutePath,void 0,be(be({},undefined),{bbox:!1,length:!0})).length),t.parsedStyle.d.totalLength}function Mo(t){return 0===t.parsedStyle.points.totalLength&&(t.parsedStyle.points.totalLength=function(t){if(t.length<2)return 0;for(var e=0,n=0;n<t.length-1;n++){var r=t[n],i=t[n+1];e+=En(r[0],r[1],i[0],i[1])}return e}(t.parsedStyle.points.points)),t.parsedStyle.points.totalLength}function So(t,e){return t[0]===e[0]&&t[1]===e[1]}function Fo(t,e){var n=t.prePoint,r=t.currentPoint,i=t.nextPoint,o=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),a=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),s=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),u=Math.acos((o+a-s)/(2*Math.sqrt(o)*Math.sqrt(a)));if(!u||0===Math.sin(u)||rn(u,0))return{xExtra:0,yExtra:0};var c=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),l=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));return c=c>Math.PI/2?Math.PI-c:c,l=l>Math.PI/2?Math.PI-l:l,{xExtra:Math.cos(u/2-c)*(e/2*(1/Math.sin(u/2)))-e/2||0,yExtra:Math.cos(l-u/2)*(e/2*(1/Math.sin(u/2)))-e/2||0}}function To(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}Ei(function(t){return ve(t)?t.split(" ").map(Eo):t.map(Eo)});var Po=function(t,e){var n=t.x*e.x+t.y*e.y,r=Math.sqrt((Math.pow(t.x,2)+Math.pow(t.y,2))*(Math.pow(e.x,2)+Math.pow(e.y,2)));return(t.x*e.y-t.y*e.x<0?-1:1)*Math.acos(n/r)},Io=function(t,e,n,r,i,o,a,s){e=Math.abs(e),n=Math.abs(n);var u=yr(r=on(r,360));if(t.x===a.x&&t.y===a.y)return{x:t.x,y:t.y,ellipticalArcAngle:0};if(0===e||0===n)return{x:0,y:0,ellipticalArcAngle:0};var c=(t.x-a.x)/2,l=(t.y-a.y)/2,A={x:Math.cos(u)*c+Math.sin(u)*l,y:-Math.sin(u)*c+Math.cos(u)*l},f=Math.pow(A.x,2)/Math.pow(e,2)+Math.pow(A.y,2)/Math.pow(n,2);f>1&&(e*=Math.sqrt(f),n*=Math.sqrt(f));var d=(Math.pow(e,2)*Math.pow(n,2)-Math.pow(e,2)*Math.pow(A.y,2)-Math.pow(n,2)*Math.pow(A.x,2))/(Math.pow(e,2)*Math.pow(A.y,2)+Math.pow(n,2)*Math.pow(A.x,2));d=d<0?0:d;var h=(i!==o?1:-1)*Math.sqrt(d),p=h*(e*A.y/n),v=h*(-n*A.x/e),g={x:Math.cos(u)*p-Math.sin(u)*v+(t.x+a.x)/2,y:Math.sin(u)*p+Math.cos(u)*v+(t.y+a.y)/2},y={x:(A.x-p)/e,y:(A.y-v)/n},m=Po({x:1,y:0},y),b=Po(y,{x:(-A.x-p)/e,y:(-A.y-v)/n});!o&&b>0?b-=2*Math.PI:o&&b<0&&(b+=2*Math.PI);var w=m+(b%=2*Math.PI)*s,x=e*Math.cos(w),E=n*Math.sin(w);return{x:Math.cos(u)*x-Math.sin(u)*E+g.x,y:Math.sin(u)*x+Math.cos(u)*E+g.y,ellipticalArcStartAngle:m,ellipticalArcEndAngle:m+b,ellipticalArcAngle:w,ellipticalArcCenter:g,resultantRx:e,resultantRy:n}};function No(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=t.arcParams,i=r.rx,o=void 0===i?0:i,a=r.ry,s=void 0===a?0:a,u=r.xRotation,c=r.arcFlag,l=r.sweepFlag,A=Io({x:t.prePoint[0],y:t.prePoint[1]},o,s,u,!!c,!!l,{x:t.currentPoint[0],y:t.currentPoint[1]},e),f=Io({x:t.prePoint[0],y:t.prePoint[1]},o,s,u,!!c,!!l,{x:t.currentPoint[0],y:t.currentPoint[1]},n?e+.005:e-.005),d=f.x-A.x,h=f.y-A.y,p=Math.sqrt(d*d+h*h);return{x:-d/p,y:-h/p}}function Lo(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function _o(t,e){return Lo(t)*Lo(e)?(t[0]*e[0]+t[1]*e[1])/(Lo(t)*Lo(e)):1}function Qo(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(_o(t,e))}function Uo(t,e){var n=e[1],r=e[2],i=on(yr(e[3]),2*Math.PI),o=e[4],a=e[5],s=t[0],u=t[1],c=e[6],l=e[7],A=Math.cos(i)*(s-c)/2+Math.sin(i)*(u-l)/2,f=-1*Math.sin(i)*(s-c)/2+Math.cos(i)*(u-l)/2,d=A*A/(n*n)+f*f/(r*r);d>1&&(n*=Math.sqrt(d),r*=Math.sqrt(d));var h=n*n*(f*f)+r*r*(A*A),p=h?Math.sqrt((n*n*(r*r)-h)/h):1;o===a&&(p*=-1),isNaN(p)&&(p=0);var v=r?p*n*f/r:0,g=n?p*-r*A/n:0,y=(s+c)/2+Math.cos(i)*v-Math.sin(i)*g,m=(u+l)/2+Math.sin(i)*v+Math.cos(i)*g,b=[(A-v)/n,(f-g)/r],w=[(-1*A-v)/n,(-1*f-g)/r],x=Qo([1,0],b),E=Qo(b,w);return _o(b,w)<=-1&&(E=Math.PI),_o(b,w)>=1&&(E=0),0===a&&E>0&&(E-=2*Math.PI),1===a&&E<0&&(E+=2*Math.PI),{cx:y,cy:m,rx:So(t,[c,l])?0:n,ry:So(t,[c,l])?0:r,startAngle:x,endAngle:x+E,xRotation:i,arcFlag:o,sweepFlag:a}}function jo(t,e,n,r){var i=(-1+Math.sqrt(2))/3*4,o=t*i,a=e*i,s=n-t,u=n+t,c=r-e,l=r+e;return[["M",s,r],["C",s,r-a,n-o,c,n,c],["C",n+o,c,u,r-a,u,r],["C",u,r+a,n+o,l,n,l],["C",n-o,l,s,r+a,s,r],["Z"]]}var Do=function(t){if(""===t||Array.isArray(t)&&0===t.length)return{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:{x:0,y:0,width:0,height:0}};var e;try{e=ze(t)}catch(n){e=ze(""),console.error("[g]: Invalid SVG Path definition: ".concat(t))}!function(t){for(var e=0;e<t.length;e++){var n=t[e-1],r=t[e];if("M"===r[0]&&n){var i=n[0],o=[r[1],r[2]],a=void 0;"L"===i||"M"===i?a=[n[1],n[2]]:"C"!==i&&"A"!==i&&"Q"!==i||(a=[n[n.length-2],n[n.length-1]]),a&&So(o,a)&&(t.splice(e,1),e--)}}}(e);var n=function(t){for(var e=!1,n=t.length,r=0;r<n;r++){var i=t[r][0];if("C"===i||"A"===i||"Q"===i){e=!0;break}}return e}(e),r=function(t){for(var e=[],n=[],r=[],i=0;i<t.length;i++){var o=t[i],a=o[0];"M"===a?(r.length&&(n.push(r),r=[]),r.push([o[1],o[2]])):"Z"===a?r.length&&(e.push(r),r=[]):r.push([o[1],o[2]])}return r.length>0&&n.push(r),{polygons:e,polylines:n}}(e),i=r.polygons,o=r.polylines,a=function(t){for(var e=[],n=null,r=null,i=null,o=0,a=t.length,s=0;s<a;s++){var u=t[s];r=t[s+1];var c=u[0],l={command:c,prePoint:n,params:u,startTangent:null,endTangent:null,currentPoint:null,nextPoint:null,arcParams:null,box:null,cubicParams:null};switch(c){case"M":i=[u[1],u[2]],o=s;break;case"A":var A=Uo(n,u);l.arcParams=A}if("Z"===c)n=i,r=t[o+1];else{var f=u.length;n=[u[f-2],u[f-1]]}r&&"Z"===r[0]&&(r=t[o],e[o]&&(e[o].prePoint=n)),l.currentPoint=n,e[o]&&So(n,e[o].currentPoint)&&(e[o].prePoint=l.prePoint);var d=r?[r[r.length-2],r[r.length-1]]:null;l.nextPoint=d;var h=l.prePoint;if(["L","H","V"].includes(c))l.startTangent=[h[0]-n[0],h[1]-n[1]],l.endTangent=[n[0]-h[0],n[1]-h[1]];else if("Q"===c){var p=[u[1],u[2]];l.startTangent=[h[0]-p[0],h[1]-p[1]],l.endTangent=[n[0]-p[0],n[1]-p[1]]}else if("T"===c){var v=e[s-1],g=To(v.currentPoint,h);"Q"===v.command?(l.command="Q",l.startTangent=[h[0]-g[0],h[1]-g[1]],l.endTangent=[n[0]-g[0],n[1]-g[1]]):(l.command="TL",l.startTangent=[h[0]-n[0],h[1]-n[1]],l.endTangent=[n[0]-h[0],n[1]-h[1]])}else if("C"===c){var y=[u[1],u[2]],m=[u[3],u[4]];l.startTangent=[h[0]-y[0],h[1]-y[1]],l.endTangent=[n[0]-m[0],n[1]-m[1]],0===l.startTangent[0]&&0===l.startTangent[1]&&(l.startTangent=[y[0]-m[0],y[1]-m[1]]),0===l.endTangent[0]&&0===l.endTangent[1]&&(l.endTangent=[m[0]-y[0],m[1]-y[1]])}else if("S"===c){var b=e[s-1],w=To(b.currentPoint,h),x=[u[1],u[2]];"C"===b.command?(l.command="C",l.startTangent=[h[0]-w[0],h[1]-w[1]],l.endTangent=[n[0]-x[0],n[1]-x[1]]):(l.command="SQ",l.startTangent=[h[0]-x[0],h[1]-x[1]],l.endTangent=[n[0]-x[0],n[1]-x[1]])}else if("A"===c){var E=No(l,0),B=E.x,k=E.y,O=No(l,1,!1),C=O.x,M=O.y;l.startTangent=[B,k],l.endTangent=[C,M]}e.push(l)}return e}(e),s=function(t){for(var e=[],n=[],r=[],i=0;i<t.length;i++){var o=t[i],a=o.currentPoint,s=o.params,u=o.prePoint,c=void 0;switch(o.command){case"Q":c=Qn(u[0],u[1],s[1],s[2],s[3],s[4]);break;case"C":c=In(u[0],u[1],s[1],s[2],s[3],s[4],s[5],s[6]);break;case"A":var l=o.arcParams;c=Cn(l.cx,l.cy,l.rx,l.ry,l.xRotation,l.startAngle,l.endAngle);break;default:e.push(a[0]),n.push(a[1])}c&&(o.box=c,e.push(c.x,c.x+c.width),n.push(c.y,c.y+c.height))}e=e.filter(function(t){return!Number.isNaN(t)&&t!==1/0&&t!==-1/0}),n=n.filter(function(t){return!Number.isNaN(t)&&t!==1/0&&t!==-1/0});var A=en(e),f=en(n),d=nn(e),h=nn(n);if(0===r.length)return{x:A,y:f,width:d-A,height:h-f};for(var p=0;p<r.length;p++){var v=r[p],g=v.currentPoint;g[0]===A?A-=Fo(v,0).xExtra:g[0]===d&&(d+=Fo(v,0).xExtra),g[1]===f?f-=Fo(v,0).yExtra:g[1]===h&&(h+=Fo(v,0).yExtra)}return{x:A,y:f,width:d-A,height:h-f}}(a),u=s.x,c=s.y,l=s.width,A=s.height;return{absolutePath:e,hasArc:n,segments:a,polygons:i,polylines:o,totalLength:0,rect:{x:Number.isFinite(u)?u:0,y:Number.isFinite(c)?c:0,width:Number.isFinite(l)?l:0,height:Number.isFinite(A)?A:0}}},Ro=Ei(Do);function Ho(t){return ve(t)?Ro(t):Do(t)}function zo(t,e,n){var r=t.curve,i=e.curve;r&&0!==r.length||(r=An(t.absolutePath,!1),t.curve=r),i&&0!==i.length||(i=An(e.absolutePath,!1),e.curve=i);var o=[r,i];r.length!==i.length&&(o=dn(r,i));var a,s,u,c,l,A,f,d,h=hn(o[0])!==hn(o[1])?(s=(a=o[0]).slice(1).map(function(t,e,n){return e?n[e-1].slice(-2).concat(t.slice(1)):a[0].slice(1).concat(t.slice(1))}).map(function(t){return t.map(function(e,n){return t[t.length-n-2*(1-n%2)]})}).reverse(),[["M"].concat(s[0].slice(0,2))].concat(s.map(function(t){return["C"].concat(t.slice(2))}))):o[0].map(function(t){return Array.isArray(t)?[].concat(t):t});return[h,(u=o[1],c=h,l=u.length-1,A=[],f=0,d=function(t){var e=t.length,n=e-1;return t.map(function(r,i){return t.map(function(r,o){var a,s=i+o;return 0===o||t[s]&&"M"===t[s][0]?(a=t[s],["M"].concat(a.slice(-2))):(s>=e&&(s-=n),t[s])})})}(u),d.forEach(function(t,e){u.slice(1).forEach(function(t,n){f+=he(u[(e+n)%l].slice(-2),c[n%l].slice(-2))}),A[e]=f,f=0}),d[A.indexOf(Math.min.apply(null,A))]),function(t){return t}]}function Ko(t,e){return[t.points,e.points,function(t){return t}]}var Go=null,Vo=/\s*(\w+)\(([^)]*)\)/g;function Wo(t){return function(e){var n=0;return t.map(function(t){return t===Go?e[n++]:t})}}function Yo(t){return t}var Xo={matrix:["NNNNNN",[Go,Go,0,0,Go,Go,0,0,0,0,1,0,Go,Go,0,1],Yo],matrix3d:["NNNNNNNNNNNNNNNN",Yo],rotate:["A"],rotateX:["A"],rotateY:["A"],rotateZ:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",Wo([Go,Go,new Ui(1)]),Yo],scaleX:["N",Wo([Go,new Ui(1),new Ui(1)]),Wo([Go,new Ui(1)])],scaleY:["N",Wo([new Ui(1),Go,new Ui(1)]),Wo([new Ui(1),Go])],scaleZ:["N",Wo([new Ui(1),new Ui(1),Go])],scale3d:["NNN",Yo],skew:["Aa",null,Yo],skewX:["A",null,Wo([Go,Di])],skewY:["A",null,Wo([Di,Go])],translate:["Tt",Wo([Go,Go,ji]),Yo],translateX:["T",Wo([Go,ji,ji]),Wo([Go,ji])],translateY:["T",Wo([ji,Go,ji]),Wo([ji,Go])],translateZ:["L",Wo([ji,ji,Go])],translate3d:["TTL",Yo]};function qo(t){for(var e=[],n=t.length,r=0;r<n;r++){var i=t[r],o=i[0],a=i.slice(1);if("translate"===o||"skew"===o?1===a.length&&a.push(0):"scale"===o&&1===a.length&&a.push(a[0]),!Xo[o])return[];var s=a.map(function(t){return Wi(t)});e.push({t:o,d:s})}return e}function Zo(t){if(Array.isArray(t))return qo(t);if("none"===(t=(t||"none").trim()))return[];var e,n=[],r=0;for(Vo.lastIndex=0;e=Vo.exec(t);){if(e.index!==r)return[];r=e.index+e[0].length;var i=e[1],o=Xo[i];if(!o)return[];var a=e[2].split(","),s=o[0];if(s.length<a.length)return[];for(var u=[],c=0;c<s.length;c++){var l,A=a[c],f=s[c];if(l=A?{A:function(t){return"0"===t.trim()?Di:po(t)},N:Eo,T:fo,L:lo}[f.toUpperCase()](A):{a:Di,n:u[0],t:ji}[f],void 0===l)return[];u.push(l)}if(n.push({t:i,d:u}),Vo.lastIndex===t.length)return n}return[]}function Jo(t){if(Array.isArray(t))return qo(t);if("none"===(t=(t||"none").trim()))return[];var e,n=[],r=0;for(Vo.lastIndex=0;e=Vo.exec(t);){if(e.index!==r)return[];r=e.index+e[0].length;var i=e[1],o=Xo[i];if(!o)return[];var a=e[2].split(","),s=o[0];if(s.length<a.length)return[];for(var u=[],c=0;c<s.length;c++){var l,A=a[c],f=s[c];if(l=A?{A:function(t){return"0"===t.trim()?Di:ho(t)},N:xo,T:Ao,L:co}[f.toUpperCase()](A):{a:Di,n:u[0],t:ji}[f],void 0===l)return[];u.push(l)}if(n.push({t:i,d:u}),Vo.lastIndex===t.length)return n}return[]}function $o(t){var e,n,r,i;switch(t.t){case"rotateX":return i=yr(go(t.d[0])),[1,0,0,0,0,Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1];case"rotateY":return i=yr(go(t.d[0])),[Math.cos(i),0,-Math.sin(i),0,0,1,0,0,Math.sin(i),0,Math.cos(i),0,0,0,0,1];case"rotate":case"rotateZ":return i=yr(go(t.d[0])),[Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1,0,0,0,0,1];case"rotate3d":e=t.d[0].value,n=t.d[1].value,r=t.d[2].value,i=yr(go(t.d[3]));var o=e*e+n*n+r*r;if(0===o)e=1,n=0,r=0;else if(1!==o){var a=Math.sqrt(o);e/=a,n/=a,r/=a}var s=Math.sin(i/2),u=s*Math.cos(i/2),c=s*s;return[1-2*(n*n+r*r)*c,2*(e*n*c+r*u),2*(e*r*c-n*u),0,2*(e*n*c-r*u),1-2*(e*e+r*r)*c,2*(n*r*c+e*u),0,2*(e*r*c+n*u),2*(n*r*c-e*u),1-2*(e*e+n*n)*c,0,0,0,0,1];case"scale":return[t.d[0].value,0,0,0,0,t.d[1].value,0,0,0,0,1,0,0,0,0,1];case"scaleX":return[t.d[0].value,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaleY":return[1,0,0,0,0,t.d[0].value,0,0,0,0,1,0,0,0,0,1];case"scaleZ":return[1,0,0,0,0,1,0,0,0,0,t.d[0].value,0,0,0,0,1];case"scale3d":return[t.d[0].value,0,0,0,0,t.d[1].value,0,0,0,0,t.d[2].value,0,0,0,0,1];case"skew":var l=yr(go(t.d[0])),A=yr(go(t.d[1]));return[1,Math.tan(A),0,0,Math.tan(l),1,0,0,0,0,1,0,0,0,0,1];case"skewX":return i=yr(go(t.d[0])),[1,0,0,0,Math.tan(i),1,0,0,0,0,1,0,0,0,0,1];case"skewY":return i=yr(go(t.d[0])),[1,Math.tan(i),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":return[1,0,0,0,0,1,0,0,0,0,1,0,e=mo(t.d[0],0,null)||0,n=mo(t.d[1],0,null)||0,0,1];case"translateX":return[1,0,0,0,0,1,0,0,0,0,1,0,e=mo(t.d[0],0,null)||0,0,0,1];case"translateY":return[1,0,0,0,0,1,0,0,0,0,1,0,0,n=mo(t.d[0],0,null)||0,0,1];case"translateZ":return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,r=mo(t.d[0],0,null)||0,1];case"translate3d":return[1,0,0,0,0,1,0,0,0,0,1,0,e=mo(t.d[0],0,null)||0,n=mo(t.d[1],0,null)||0,r=mo(t.d[2],0,null)||0,1];case"perspective":var f=mo(t.d[0],0,null)||0;return[1,0,0,0,0,1,0,0,0,0,1,f?-1/f:0,0,0,0,1];case"matrix":return[t.d[0].value,t.d[1].value,0,0,t.d[2].value,t.d[3].value,0,0,0,0,1,0,t.d[4].value,t.d[5].value,0,1];case"matrix3d":return t.d.map(function(t){return t.value})}}function ta(t,e){return[t[0]*e[0]+t[4]*e[1]+t[8]*e[2]+t[12]*e[3],t[1]*e[0]+t[5]*e[1]+t[9]*e[2]+t[13]*e[3],t[2]*e[0]+t[6]*e[1]+t[10]*e[2]+t[14]*e[3],t[3]*e[0]+t[7]*e[1]+t[11]*e[2]+t[15]*e[3],t[0]*e[4]+t[4]*e[5]+t[8]*e[6]+t[12]*e[7],t[1]*e[4]+t[5]*e[5]+t[9]*e[6]+t[13]*e[7],t[2]*e[4]+t[6]*e[5]+t[10]*e[6]+t[14]*e[7],t[3]*e[4]+t[7]*e[5]+t[11]*e[6]+t[15]*e[7],t[0]*e[8]+t[4]*e[9]+t[8]*e[10]+t[12]*e[11],t[1]*e[8]+t[5]*e[9]+t[9]*e[10]+t[13]*e[11],t[2]*e[8]+t[6]*e[9]+t[10]*e[10]+t[14]*e[11],t[3]*e[8]+t[7]*e[9]+t[11]*e[10]+t[15]*e[11],t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12]*e[15],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13]*e[15],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14]*e[15],t[3]*e[12]+t[7]*e[13]+t[11]*e[14]+t[15]*e[15]]}function ea(t){var e=[0,0,0],n=[1,1,1],r=[0,0,0],i=[0,0,0,1],o=[0,0,0,1];return function(t,e,n,r,i,o){if(!function(t,e){var n=e[15];if(0===n)return!1;for(var r=1/n,i=0;i<16;i++)t[i]=e[i]*r;return!0}(Br,t))return!1;if(ot(kr,Br),kr[3]=0,kr[7]=0,kr[11]=0,kr[15]=1,Math.abs(ft(kr))<1e-8)return!1;var a,s,u=Br[3],c=Br[7],l=Br[11],A=Br[12],f=Br[13],d=Br[14],h=Br[15];if(0!==u||0!==c||0!==l){if(Or[0]=u,Or[1]=c,Or[2]=l,Or[3]=h,!lt(kr,kr))return!1;ct(kr,kr),nt(i,Or,kr)}else i[0]=i[1]=i[2]=0,i[3]=1;if(e[0]=A,e[1]=f,e[2]=d,s=Br,(a=Cr)[0][0]=s[0],a[0][1]=s[1],a[0][2]=s[2],a[1][0]=s[4],a[1][1]=s[5],a[1][2]=s[6],a[2][0]=s[8],a[2][1]=s[9],a[2][2]=s[10],n[0]=U(Cr[0]),G(Cr[0],Cr[0]),r[0]=V(Cr[0],Cr[1]),Sr(Cr[1],Cr[1],Cr[0],1,-r[0]),n[1]=U(Cr[1]),G(Cr[1],Cr[1]),r[0]/=n[1],r[1]=V(Cr[0],Cr[2]),Sr(Cr[2],Cr[2],Cr[0],1,-r[1]),r[2]=V(Cr[1],Cr[2]),Sr(Cr[2],Cr[2],Cr[1],1,-r[2]),n[2]=U(Cr[2]),G(Cr[2],Cr[2]),r[1]/=n[2],r[2]/=n[2],function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2];t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a}(Mr,Cr[1],Cr[2]),V(Cr[0],Mr)<0)for(var p=0;p<3;p++)n[p]*=-1,Cr[p][0]*=-1,Cr[p][1]*=-1,Cr[p][2]*=-1;o[0]=.5*Math.sqrt(Math.max(1+Cr[0][0]-Cr[1][1]-Cr[2][2],0)),o[1]=.5*Math.sqrt(Math.max(1-Cr[0][0]+Cr[1][1]-Cr[2][2],0)),o[2]=.5*Math.sqrt(Math.max(1-Cr[0][0]-Cr[1][1]+Cr[2][2],0)),o[3]=.5*Math.sqrt(Math.max(1+Cr[0][0]+Cr[1][1]+Cr[2][2],0)),Cr[2][1]>Cr[1][2]&&(o[0]=-o[0]),Cr[0][2]>Cr[2][0]&&(o[1]=-o[1]),Cr[1][0]>Cr[0][1]&&(o[2]=-o[2])}(function(t){return 0===t.length?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:t.map($o).reduce(ta)}(t),e,n,r,i,o),[[e,n,r,o,i]]}var na=function(){function t(t,e){for(var n=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],r=0;r<4;r++)for(var i=0;i<4;i++)for(var o=0;o<4;o++)n[r][i]+=e[r][o]*t[o][i];return n}return function(e,n,r,i,o){for(var a=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],s=0;s<4;s++)a[s][3]=o[s];for(var u=0;u<3;u++)for(var c=0;c<3;c++)a[3][u]+=e[c]*a[c][u];var l=i[0],A=i[1],f=i[2],d=i[3],h=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];h[0][0]=1-2*(A*A+f*f),h[0][1]=2*(l*A-f*d),h[0][2]=2*(l*f+A*d),h[1][0]=2*(l*A+f*d),h[1][1]=1-2*(l*l+f*f),h[1][2]=2*(A*f-l*d),h[2][0]=2*(l*f-A*d),h[2][1]=2*(A*f+l*d),h[2][2]=1-2*(l*l+A*A),a=t(a,h);var p=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];r[2]&&(p[2][1]=r[2],a=t(a,p)),r[1]&&(p[2][1]=0,p[2][0]=r[0],a=t(a,p)),r[0]&&(p[2][0]=0,p[1][0]=r[0],a=t(a,p));for(var v=0;v<3;v++)for(var g=0;g<3;g++)a[v][g]*=n[v];return function(t){return 0===t[0][2]&&0===t[0][3]&&0===t[1][2]&&0===t[1][3]&&0===t[2][0]&&0===t[2][1]&&1===t[2][2]&&0===t[2][3]&&0===t[3][2]&&1===t[3][3]}(a)?[a[0][0],a[0][1],a[1][0],a[1][1],a[3][0],a[3][1]]:a[0].concat(a[1],a[2],a[3])}}();function ra(t){return t.toFixed(6).replace(".000000","")}function ia(t,e){var n,r;return t.decompositionPair!==e&&(t.decompositionPair=e,n=ea(t)),e.decompositionPair!==t&&(e.decompositionPair=t,r=ea(e)),null===n[0]||null===r[0]?[[!1],[!0],function(n){return n?e[0].d:t[0].d}]:(n[0].push(0),r[0].push(1),[n,r,function(t){var e=function(t,e,n){var r=function(t,e){for(var n=0,r=0;r<t.length;r++)n+=t[r]*e[r];return n}(t,e),i=[];if(1===(r=ge(r,-1,1)))i=t;else for(var o=Math.acos(r),a=1*Math.sin(n*o)/Math.sqrt(1-r*r),s=0;s<4;s++)i.push(t[s]*(Math.cos(n*o)-r*a)+e[s]*a);return i}(n[0][3],r[0][3],t[5]);return na(t[0],t[1],t[2],e,t[4]).map(ra).join(",")}])}function oa(t){return t.replace(/[XY]/,"")}function aa(t){return t.replace(/(X|Y|Z|3d)?$/,"3d")}var sa=function(t,e){return"perspective"===t&&"perspective"===e||("matrix"===t||"matrix3d"===t)&&("matrix"===e||"matrix3d"===e)};function ua(t,e,n){var r=!1;if(!t.length||!e.length){t.length||(r=!0,t=e,e=[]);for(var i=function(){var n=t[o],r=n.t,i=n.d,a="scale"===r.substring(0,5)?1:0;e.push({t:r,d:i.map(function(t){return"number"==typeof t?Wi(a):Wi(a,t.unit)})})},o=0;o<t.length;o++)i()}var a=[],s=[],u=[];if(t.length!==e.length){var c=ia(t,e);a=[c[0]],s=[c[1]],u=[["matrix",[c[2]]]]}else for(var l=0;l<t.length;l++){var A=t[l].t,f=e[l].t,d=t[l].d,h=e[l].d,p=Xo[A],v=Xo[f],g=void 0;if(sa(A,f)){var y=ia([t[l]],[e[l]]);a.push(y[0]),s.push(y[1]),u.push(["matrix",[y[2]]])}else{if(A===f)g=A;else if(p[2]&&v[2]&&oa(A)===oa(f))g=oa(A),d=p[2](d),h=v[2](h);else{if(!p[1]||!v[1]||aa(A)!==aa(f)){var m=ia(t,e);a=[m[0]],s=[m[1]],u=[["matrix",[m[2]]]];break}g=aa(A),d=p[1](d),h=v[1](h)}for(var b=[],w=[],x=[],E=0;E<d.length;E++){var B=vo(d[E],h[E],n,!1,E);b[E]=B[0],w[E]=B[1],x.push(B[2])}a.push(b),s.push(w),u.push([g,x])}}if(r){var k=a;a=s,s=k}return[a,s,function(t){return t.map(function(t,e){var n=t.map(function(t,n){return u[e][1][n](t)}).join(",");return"matrix"===u[e][0]&&16===n.split(",").length&&(u[e][0]="matrix3d"),"matrix3d"===u[e][0]&&6===n.split(",").length&&(u[e][0]="matrix"),"".concat(u[e][0],"(").concat(n,")")}).join(" ")}]}var ca=Ei(function(t){if(ve(t)){if("text-anchor"===t)return[Wi(0,"px"),Wi(0,"px")];var e=t.split(" ");return 1===e.length&&("top"===e[0]||"bottom"===e[0]?(e[1]=e[0],e[0]="center"):e[1]="center"),2!==e.length?null:[fo(la(e[0])),fo(la(e[1]))]}return[Wi(t[0]||0,"px"),Wi(t[1]||0,"px")]});function la(t){return"center"===t?"50%":"left"===t||"top"===t?"0%":"right"===t||"bottom"===t?"100%":t}var Aa=[{n:"display",k:["none"]},{n:"opacity",int:!0,inh:!0,d:"1",syntax:zr.OPACITY_VALUE},{n:"fillOpacity",int:!0,inh:!0,d:"1",syntax:zr.OPACITY_VALUE},{n:"strokeOpacity",int:!0,inh:!0,d:"1",syntax:zr.OPACITY_VALUE},{n:"fill",int:!0,k:["none"],d:"none",syntax:zr.PAINT},{n:"fillRule",k:["nonzero","evenodd"],d:"nonzero"},{n:"stroke",int:!0,k:["none"],d:"none",syntax:zr.PAINT,l:!0},{n:"shadowType",k:["inner","outer","both"],d:"outer",l:!0},{n:"shadowColor",int:!0,syntax:zr.COLOR},{n:"shadowOffsetX",int:!0,l:!0,d:"0",syntax:zr.LENGTH_PERCENTAGE},{n:"shadowOffsetY",int:!0,l:!0,d:"0",syntax:zr.LENGTH_PERCENTAGE},{n:"shadowBlur",int:!0,l:!0,d:"0",syntax:zr.SHADOW_BLUR},{n:"lineWidth",int:!0,inh:!0,d:"1",l:!0,a:["strokeWidth"],syntax:zr.LENGTH_PERCENTAGE},{n:"increasedLineWidthForHitTesting",inh:!0,d:"0",l:!0,syntax:zr.LENGTH_PERCENTAGE},{n:"lineJoin",inh:!0,l:!0,a:["strokeLinejoin"],k:["miter","bevel","round"],d:"miter"},{n:"lineCap",inh:!0,l:!0,a:["strokeLinecap"],k:["butt","round","square"],d:"butt"},{n:"lineDash",int:!0,inh:!0,k:["none"],a:["strokeDasharray"],syntax:zr.LENGTH_PERCENTAGE_12},{n:"lineDashOffset",int:!0,inh:!0,d:"0",a:["strokeDashoffset"],syntax:zr.LENGTH_PERCENTAGE},{n:"offsetPath",syntax:zr.DEFINED_PATH},{n:"offsetDistance",int:!0,syntax:zr.OFFSET_DISTANCE},{n:"dx",int:!0,l:!0,d:"0",syntax:zr.LENGTH_PERCENTAGE},{n:"dy",int:!0,l:!0,d:"0",syntax:zr.LENGTH_PERCENTAGE},{n:"zIndex",ind:!0,int:!0,d:"0",k:["auto"],syntax:zr.Z_INDEX},{n:"visibility",k:["visible","hidden"],ind:!0,inh:!0,int:!0,d:"visible"},{n:"pointerEvents",inh:!0,k:["none","auto","stroke","fill","painted","visible","visiblestroke","visiblefill","visiblepainted","all"],d:"auto"},{n:"filter",ind:!0,l:!0,k:["none"],d:"none",syntax:zr.FILTER},{n:"clipPath",syntax:zr.DEFINED_PATH},{n:"textPath",syntax:zr.DEFINED_PATH},{n:"textPathSide",k:["left","right"],d:"left"},{n:"textPathStartOffset",l:!0,d:"0",syntax:zr.LENGTH_PERCENTAGE},{n:"transform",p:100,int:!0,k:["none"],d:"none",syntax:zr.TRANSFORM},{n:"transformOrigin",p:100,d:"0 0",l:!0,syntax:zr.TRANSFORM_ORIGIN},{n:"cx",int:!0,l:!0,d:"0",syntax:zr.COORDINATE},{n:"cy",int:!0,l:!0,d:"0",syntax:zr.COORDINATE},{n:"cz",int:!0,l:!0,d:"0",syntax:zr.COORDINATE},{n:"r",int:!0,l:!0,d:"0",syntax:zr.LENGTH_PERCENTAGE},{n:"rx",int:!0,l:!0,d:"0",syntax:zr.LENGTH_PERCENTAGE},{n:"ry",int:!0,l:!0,d:"0",syntax:zr.LENGTH_PERCENTAGE},{n:"x",int:!0,l:!0,d:"0",syntax:zr.COORDINATE},{n:"y",int:!0,l:!0,d:"0",syntax:zr.COORDINATE},{n:"z",int:!0,l:!0,d:"0",syntax:zr.COORDINATE},{n:"width",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:zr.LENGTH_PERCENTAGE},{n:"height",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:zr.LENGTH_PERCENTAGE},{n:"radius",int:!0,l:!0,d:"0",syntax:zr.LENGTH_PERCENTAGE_14},{n:"x1",int:!0,l:!0,syntax:zr.COORDINATE},{n:"y1",int:!0,l:!0,syntax:zr.COORDINATE},{n:"z1",int:!0,l:!0,syntax:zr.COORDINATE},{n:"x2",int:!0,l:!0,syntax:zr.COORDINATE},{n:"y2",int:!0,l:!0,syntax:zr.COORDINATE},{n:"z2",int:!0,l:!0,syntax:zr.COORDINATE},{n:"d",int:!0,l:!0,d:"",syntax:zr.PATH,p:50},{n:"points",int:!0,l:!0,syntax:zr.LIST_OF_POINTS,p:50},{n:"text",l:!0,d:"",syntax:zr.TEXT,p:50},{n:"textTransform",l:!0,inh:!0,k:["capitalize","uppercase","lowercase","none"],d:"none",syntax:zr.TEXT_TRANSFORM,p:51},{n:"font",l:!0},{n:"fontSize",int:!0,inh:!0,d:"16px",l:!0,syntax:zr.LENGTH_PERCENTAGE},{n:"fontFamily",l:!0,inh:!0,d:"sans-serif"},{n:"fontStyle",l:!0,inh:!0,k:["normal","italic","oblique"],d:"normal"},{n:"fontWeight",l:!0,inh:!0,k:["normal","bold","bolder","lighter"],d:"normal"},{n:"fontVariant",l:!0,inh:!0,k:["normal","small-caps"],d:"normal"},{n:"lineHeight",l:!0,syntax:zr.LENGTH,int:!0,d:"0"},{n:"letterSpacing",l:!0,syntax:zr.LENGTH,int:!0,d:"0"},{n:"miterLimit",l:!0,syntax:zr.NUMBER,d:function(t){return t===Jn.PATH||t===Jn.POLYGON||t===Jn.POLYLINE?"4":"10"}},{n:"wordWrap",l:!0},{n:"wordWrapWidth",l:!0},{n:"maxLines",l:!0},{n:"textOverflow",l:!0,d:"clip"},{n:"leading",l:!0},{n:"textBaseline",l:!0,inh:!0,k:["top","hanging","middle","alphabetic","ideographic","bottom"],d:"alphabetic"},{n:"textAlign",l:!0,inh:!0,k:["start","center","middle","end","left","right"],d:"start"},{n:"markerStart",syntax:zr.MARKER},{n:"markerEnd",syntax:zr.MARKER},{n:"markerMid",syntax:zr.MARKER},{n:"markerStartOffset",syntax:zr.LENGTH,l:!0,int:!0,d:"0"},{n:"markerEndOffset",syntax:zr.LENGTH,l:!0,int:!0,d:"0"}],fa=new Set(Aa.filter(function(t){return!!t.l}).map(function(t){return t.n})),da={},ha=function(){return B(function t(e){var n=this;x(this,t),this.runtime=e,Aa.forEach(function(t){n.registerMetadata(t)})},[{key:"registerMetadata",value:function(t){[t.n].concat(O(t.a||[])).forEach(function(e){da[e]=t})}},{key:"getPropertySyntax",value:function(t){return this.runtime.CSSPropertySyntaxFactory[t]}},{key:"processProperties",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{skipUpdateAttribute:!1,skipParse:!1,forceUpdateGeometry:!1,usedAttributes:[],memoize:!0};Object.assign(t.attributes,e);var r=t.parsedStyle.clipPath,i=t.parsedStyle.offsetPath;!function(t,e){var n=pa(t);for(var r in e)n.has(r)&&(t.parsedStyle[r]=e[r])}(t,e);var o=!!n.forceUpdateGeometry;if(!o)for(var a in e)if(fa.has(a)){o=!0;break}var s,u=pa(t);u.has("fill")&&e.fill&&(t.parsedStyle.fill=ao(e.fill)),u.has("stroke")&&e.stroke&&(t.parsedStyle.stroke=ao(e.stroke)),u.has("shadowColor")&&e.shadowColor&&(t.parsedStyle.shadowColor=ao(e.shadowColor)),u.has("filter")&&e.filter&&(t.parsedStyle.filter=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if("none"===(t=t.toLowerCase().trim()))return[];for(var e,n=/\s*([\w-]+)\(([^)]*)\)/g,r=[],i=0;e=n.exec(t);){if(e.index!==i)return[];if(i=e.index+e[0].length,bo.indexOf(e[1])>-1&&r.push({name:e[1],params:e[2].split(" ").map(function(t){return uo(/deg|rad|grad|turn|px|%/g,t)||ao(t)})}),n.lastIndex===t.length)return r}return[]}(e.filter)),u.has("radius")&&!pe(e.radius)&&(t.parsedStyle.radius=yo(e.radius,4)),u.has("lineDash")&&!pe(e.lineDash)&&(t.parsedStyle.lineDash=yo(e.lineDash,"even")),u.has("points")&&e.points&&(t.parsedStyle.points={points:ve(s=e.points)?s.split(" ").map(function(t){var e=v(t.split(","),2),n=e[0],r=e[1];return[Number(n),Number(r)]}):s,totalLength:0,segments:[]}),u.has("d")&&""===e.d&&(t.parsedStyle.d=w({},Hr)),u.has("d")&&e.d&&(t.parsedStyle.d=Ho(e.d)),u.has("textTransform")&&e.textTransform&&this.runtime.CSSPropertySyntaxFactory[zr.TEXT_TRANSFORM].calculator(null,null,{value:e.textTransform},t,null),u.has("clipPath")&&!pn(e.clipPath)&&this.runtime.CSSPropertySyntaxFactory[zr.DEFINED_PATH].calculator("clipPath",r,e.clipPath,t,this.runtime),u.has("offsetPath")&&e.offsetPath&&this.runtime.CSSPropertySyntaxFactory[zr.DEFINED_PATH].calculator("offsetPath",i,e.offsetPath,t,this.runtime),u.has("transform")&&e.transform&&(t.parsedStyle.transform=Zo(e.transform)),u.has("transformOrigin")&&e.transformOrigin&&(t.parsedStyle.transformOrigin=ca(e.transformOrigin)),u.has("markerStart")&&e.markerStart&&(t.parsedStyle.markerStart=this.runtime.CSSPropertySyntaxFactory[zr.MARKER].calculator(null,e.markerStart,e.markerStart,null,null)),u.has("markerEnd")&&e.markerEnd&&(t.parsedStyle.markerEnd=this.runtime.CSSPropertySyntaxFactory[zr.MARKER].calculator(null,e.markerEnd,e.markerEnd,null,null)),u.has("markerMid")&&e.markerMid&&(t.parsedStyle.markerMid=this.runtime.CSSPropertySyntaxFactory[zr.MARKER].calculator("",e.markerMid,e.markerMid,null,null)),u.has("zIndex")&&!pe(e.zIndex)&&this.runtime.CSSPropertySyntaxFactory[zr.Z_INDEX].postProcessor(t),u.has("offsetDistance")&&!pe(e.offsetDistance)&&this.runtime.CSSPropertySyntaxFactory[zr.OFFSET_DISTANCE].postProcessor(t),u.has("transform")&&e.transform&&this.runtime.CSSPropertySyntaxFactory[zr.TRANSFORM].postProcessor(t),u.has("transformOrigin")&&e.transformOrigin&&this.runtime.CSSPropertySyntaxFactory[zr.TRANSFORM_ORIGIN].postProcessor(t),o&&(t.dirty(!0,!0),n.forceUpdateGeometry||this.runtime.sceneGraphService.dirtyToRoot(t))}},{key:"updateGeometry",value:function(t){var e=t.nodeName,n=this.runtime.geometryUpdaterFactory[e];if(n){var r=t.geometry;r.contentBounds||(r.contentBounds=new ar),r.renderBounds||(r.renderBounds=new ar);var i=t.parsedStyle,o=n.update(i,t),a=o.cx,s=void 0===a?0:a,u=o.cy,c=void 0===u?0:u,l=o.cz,A=void 0===l?0:l,f=o.hwidth,d=void 0===f?0:f,h=o.hheight,p=void 0===h?0:h,v=o.hdepth,g=void 0===v?0:v,y=[Math.abs(d),Math.abs(p),g],m=i.stroke,b=i.lineWidth,w=void 0===b?1:b,x=i.increasedLineWidthForHitTesting,E=void 0===x?0:x,B=i.shadowType,k=void 0===B?"outer":B,O=i.shadowColor,C=i.filter,M=void 0===C?[]:C,S=i.transformOrigin,F=[s,c,A];r.contentBounds.update(F,y);var T=e===Jn.POLYLINE||e===Jn.POLYGON||e===Jn.PATH?Math.SQRT2:.5;if(m&&!m.isNone){var P=((w||0)+(E||0))*T;y[0]+=P,y[1]+=P}if(r.renderBounds.update(F,y),O&&k&&"inner"!==k){var I=r.renderBounds,N=I.min,L=I.max,_=i.shadowBlur||0,Q=i.shadowOffsetX||0,U=i.shadowOffsetY||0,j=N[0]-_+Q,D=L[0]+_+Q,R=N[1]-_+U,z=L[1]+_+U;N[0]=Math.min(N[0],j),L[0]=Math.max(L[0],D),N[1]=Math.min(N[1],R),L[1]=Math.max(L[1],z),r.renderBounds.setMinMax(N,L)}M.forEach(function(t){var e=t.name,n=t.params;if("blur"===e){var i=n[0].value;r.renderBounds.update(r.renderBounds.center,H(r.renderBounds.halfExtents,r.renderBounds.halfExtents,[i,i,0]))}else if("drop-shadow"===e){var o=n[0].value,a=n[1].value,s=n[2].value,u=r.renderBounds,c=u.min,l=u.max,A=c[0]-s+o,f=l[0]+s+o,d=c[1]-s+a,h=l[1]+s+a;c[0]=Math.min(c[0],A),l[0]=Math.max(l[0],f),c[1]=Math.min(c[1],d),l[1]=Math.max(l[1],h),r.renderBounds.setMinMax(c,l)}}),t.geometry.dirty=!1;var K=p<0,G=(d<0?-1:1)*(S?mo(S[0],0,t,!0):0),V=(K?-1:1)*(S?mo(S[1],1,t,!0):0);(G||V)&&t.setOrigin(G,V)}}},{key:"updateSizeAttenuation",value:function(t,e){t.style.isSizeAttenuation?(t.style.rawLineWidth||(t.style.rawLineWidth=t.style.lineWidth),t.style.lineWidth=(t.style.rawLineWidth||1)/e,t.nodeName===Jn.CIRCLE&&(t.style.rawR||(t.style.rawR=t.style.r),t.style.r=(t.style.rawR||1)/e)):(t.style.rawLineWidth&&(t.style.lineWidth=t.style.rawLineWidth,delete t.style.rawLineWidth),t.nodeName===Jn.CIRCLE&&t.style.rawR&&(t.style.r=t.style.rawR,delete t.style.rawR))}}])}();function pa(t){return t.constructor.PARSED_STYLE_LIST}var va=function(){return B(function t(){x(this,t),this.mixer=Bo},[{key:"calculator",value:function(t,e,n,r){return go(n)}}])}(),ga=function(){return B(function t(){x(this,t)},[{key:"calculator",value:function(t,e,n,r,i){return n instanceof _i&&(n=null),i.sceneGraphService.updateDisplayObjectDependency(t,e,n,r),"clipPath"===t&&r.forEach(function(t){0===t.childNodes.length&&i.sceneGraphService.dirtyToRoot(t)}),n}}])}(),ya=function(){return B(function t(){x(this,t),this.parser=ao,this.mixer=so},[{key:"calculator",value:function(t,e,n,r){return n instanceof _i?"none"===n.value?Ki:Gi:n}}])}(),ma=function(){return B(function t(){x(this,t)},[{key:"calculator",value:function(t,e,n){return n instanceof _i?[]:n}}])}();function ba(t){var e=t.parsedStyle.fontSize;return pe(e)?null:e}var wa=function(){return B(function t(){x(this,t),this.mixer=Bo},[{key:"calculator",value:function(t,e,n,r,i){if(de(n))return n;if(!Ui.isRelativeUnit(n.unit))return n.value;if(n.unit===Bi.kPercentage)return 0;if(n.unit===Bi.kEms){if(r.parentNode){var o=ba(r.parentNode);if(o)return o*n.value}return 0}if(n.unit===Bi.kRems){var a;if(null!=r&&null!==(a=r.ownerDocument)&&void 0!==a&&a.documentElement){var s=ba(r.ownerDocument.documentElement);if(s)return s*n.value}return 0}}}])}(),xa=function(){return B(function t(){x(this,t),this.mixer=Oo},[{key:"calculator",value:function(t,e,n){return n.map(function(t){return t.value})}}])}(),Ea=function(){return B(function t(){x(this,t),this.mixer=Oo},[{key:"calculator",value:function(t,e,n){return n.map(function(t){return t.value})}}])}(),Ba=function(){return B(function t(){x(this,t)},[{key:"calculator",value:function(t,e,n,r){var i;n instanceof _i&&(n=null);var o=null===(i=n)||void 0===i?void 0:i.cloneNode(!0);return o&&(o.style.isMarker=!0),o}}])}(),ka=function(){return B(function t(){x(this,t),this.mixer=Bo},[{key:"calculator",value:function(t,e,n){return n.value}}])}(),Oa=function(){return B(function t(){x(this,t),this.mixer=ko(0,1)},[{key:"calculator",value:function(t,e,n){return n.value}},{key:"postProcessor",value:function(t){var e=t.parsedStyle,n=e.offsetPath,r=e.offsetDistance;if(n){var i=n.nodeName;if(i===Jn.LINE||i===Jn.PATH||i===Jn.POLYLINE){var o=n.getPoint(r);o&&t.setLocalPosition(o.x,o.y)}}}}])}(),Ca=function(){return B(function t(){x(this,t),this.mixer=ko(0,1)},[{key:"calculator",value:function(t,e,n){return n.value}}])}(),Ma=function(){return B(function t(){x(this,t),this.parser=Ho,this.mixer=zo},[{key:"calculator",value:function(t,e,n){return n instanceof _i&&"unset"===n.value?{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new Ar(0,0,0,0)}:n}}])}(),Sa=B(function t(){x(this,t),this.mixer=Ko}),Fa=function(t){function e(){var t;x(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=F(this,e,[].concat(r))).mixer=ko(0,1/0),t}return P(e,t),B(e)}(wa),Ta=function(){return B(function t(){x(this,t)},[{key:"calculator",value:function(t,e,n,r){return n instanceof _i?"unset"===n.value?"":n.value:"".concat(n)}},{key:"postProcessor",value:function(t){t.nodeValue="".concat(t.parsedStyle.text)||""}}])}(),Pa=function(){return B(function t(){x(this,t)},[{key:"calculator",value:function(t,e,n,r){var i=r.getAttribute("text");if(i){var o=i;"capitalize"===n.value?o=i.charAt(0).toUpperCase()+i.slice(1):"lowercase"===n.value?o=i.toLowerCase():"uppercase"===n.value&&(o=i.toUpperCase()),r.parsedStyle.text=o}return n.value}}])}(),Ia=new WeakMap,Na="undefined"!=typeof window&&void 0!==window.document;function La(t){return!!t.getAttribute}function _a(t,e){var n=Number(t.parsedStyle.zIndex||0),r=Number(e.parsedStyle.zIndex||0);if(n===r){var i=t.parentNode;if(i){var o=i.childNodes||[];return o.indexOf(t)-o.indexOf(e)}}return n-r}function Qa(t){var e=t;do{var n;if(null===(n=e.parsedStyle)||void 0===n?void 0:n.clipPath)return e;e=e.parentElement}while(null!==e);return null}function Ua(t,e){if(Na)return document.defaultView.getComputedStyle(t,null).getPropertyValue(e)}var ja={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Da="object"==typeof performance&&performance.now?performance:Date;function Ra(t){return t.nodeName===Jn.FRAGMENT||t.getRootNode().nodeName===Jn.FRAGMENT}function Ha(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"auto",e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=!1,i=!1,o=!!e&&!e.isNone,a=!!n&&!n.isNone;return"visiblepainted"===t||"painted"===t||"auto"===t?(r=o,i=a):"visiblefill"===t||"fill"===t?r=!0:"visiblestroke"===t||"stroke"===t?i=!0:"visible"!==t&&"all"!==t||(r=!0,i=!0),[r,i]}var za=1,Ka="object"==typeof self&&self.self===self?self:"object"==typeof c.g&&c.g.global===c.g?c.g:{},Ga=Date.now(),Va={},Wa=Date.now(),Ya=function(t){if("function"!=typeof t)throw new TypeError("".concat(t," is not a function"));var e=Date.now(),n=e-Wa,r=n>16?0:16-n,i=za++;return Va[i]=t,Object.keys(Va).length>1||setTimeout(function(){Wa=e;var t=Va;Va={},Object.keys(t).forEach(function(e){return t[e](Ka.performance&&"function"==typeof Ka.performance.now?Ka.performance.now():Date.now()-Ga)})},r),i},Xa=function(t){delete Va[t]},qa=function(t){return"string"!=typeof t?Ya:""===t?Ka.requestAnimationFrame:Ka["".concat(t,"RequestAnimationFrame")]},Za=function(t,e){for(var n=0;void 0!==t[n];){if(e(t[n]))return t[n];n+=1}}(["","webkit","moz","ms","o"],function(t){return!!qa(t)}),Ja=qa(Za),$a=function(t){return"string"!=typeof t?Xa:""===t?Ka.cancelAnimationFrame:Ka["".concat(t,"CancelAnimationFrame")]||Ka["".concat(t,"CancelRequestAnimationFrame")]}(Za);Ka.requestAnimationFrame=Ja,Ka.cancelAnimationFrame=$a;var ts=function(){return B(function t(){x(this,t),this.callbacks=[]},[{key:"getCallbacksNum",value:function(){return this.callbacks.length}},{key:"tapPromise",value:function(t,e){this.callbacks.push(e)}},{key:"promise",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Promise.all(this.callbacks.map(function(t){return t.apply(void 0,e)}))}}])}(),es=function(){return B(function t(){x(this,t),this.callbacks=[]},[{key:"tapPromise",value:function(t,e){this.callbacks.push(e)}},{key:"promise",value:(t=Xn(Wn().mark(function t(){var e,n,r,i,o=arguments;return Wn().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.callbacks.length){t.next=6;break}return t.next=1,(e=this.callbacks)[0].apply(e,o);case 1:n=t.sent,r=1;case 2:if(!(r<this.callbacks.length)){t.next=5;break}return i=this.callbacks[r],t.next=3,i(n);case 3:n=t.sent;case 4:r++,t.next=2;break;case 5:return t.abrupt("return",n);case 6:return t.abrupt("return",null);case 7:case"end":return t.stop()}},t,this)})),function(){return t.apply(this,arguments)})}]);var t}(),ns=function(){return B(function t(){x(this,t),this.callbacks=[]},[{key:"tap",value:function(t,e){this.callbacks.push(e)}},{key:"call",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=arguments;this.callbacks.forEach(function(t){t.apply(void 0,r)})}}])}(),rs=function(){return B(function t(){x(this,t),this.callbacks=[]},[{key:"tap",value:function(t,e){this.callbacks.push(e)}},{key:"call",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(this.callbacks.length){for(var r=arguments,i=this.callbacks[0].apply(void 0,r),o=1;o<this.callbacks.length;o++)i=(0,this.callbacks[o])(i);return i}return null}}])}(),is=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],os=/([\"\'])[^\'\"]+\1/;function as(t){var e=t.fontSize,n=void 0===e?16:e,r=t.fontFamily,i=void 0===r?"sans-serif":r,o=t.fontStyle,a=void 0===o?"normal":o,s=t.fontVariant,u=void 0===s?"normal":s,c=t.fontWeight;return{fontSize:n,fontFamily:i,fontStyle:a,fontVariant:u,fontWeight:void 0===c?"normal":c}}var ss=Ei(function(t){for(var e=as(t),n=e.fontSize,r=e.fontFamily,i=e.fontStyle,o=e.fontVariant,a=e.fontWeight,s=de(n)&&"".concat(n,"px")||"16px",u=r.split(","),c=u.length-1;c>=0;c--){var l=u[c].trim();!os.test(l)&&is.indexOf(l)<0&&(l='"'.concat(l,'"')),u[c]=l}return"".concat(i," ").concat(o," ").concat(a," ").concat(s," ").concat(u.join(","))},function(t){var e=as(t),n=e.fontSize,r=e.fontFamily,i=e.fontStyle,o=e.fontVariant,a=e.fontWeight;return"".concat(i,"_").concat(o,"_").concat(a,"_").concat(n,"_").concat(r)}),us=function(t){return Math.max(t,1e-6)};function cs(t,e,n){return ut(t),t[4]=Math.tan(e),t[1]=Math.tan(n),t}var ls=rt(),As=rt(),fs={scale:function(t){wt(ls,[t[0].value,t[1].value,1].map(function(t){return us(t)}))},scaleX:function(t){wt(ls,[t[0].value,1,1].map(function(t){return us(t)}))},scaleY:function(t){wt(ls,[1,t[0].value,1].map(function(t){return us(t)}))},scaleZ:function(t){wt(ls,[1,1,t[0].value].map(function(t){return us(t)}))},scale3d:function(t){wt(ls,[t[0].value,t[1].value,t[2].value].map(function(t){return us(t)}))},translate:function(t){bt(ls,[t[0].value,t[1].value,0])},translateX:function(t){bt(ls,[t[0].value,0,0])},translateY:function(t){bt(ls,[0,t[0].value,0])},translateZ:function(t){bt(ls,[0,0,t[0].value])},translate3d:function(t){bt(ls,[t[0].value,t[1].value,t[2].value])},rotate:function(t){kt(ls,yr(go(t[0])))},rotateX:function(t){Et(ls,yr(go(t[0])))},rotateY:function(t){Bt(ls,yr(go(t[0])))},rotateZ:function(t){kt(ls,yr(go(t[0])))},rotate3d:function(t){xt(ls,yr(go(t[3])),[t[0].value,t[1].value,t[2].value])},skew:function(t){cs(ls,yr(t[0].value),yr(t[1].value))},skewX:function(t){cs(ls,yr(t[0].value),0)},skewY:function(t){cs(ls,0,yr(t[0].value))},matrix:function(t){st(ls,t[0].value,t[1].value,0,0,t[2].value,t[3].value,0,0,0,0,1,0,t[4].value,t[5].value,0,1)},matrix3d:function(e){st.apply(t,[ls].concat(O(e.map(function(t){return t.value}))))}},ds=j(1,1,1),hs=_(),ps={translate:function(t,e){yu.sceneGraphService.setLocalScale(t,ds,!1),yu.sceneGraphService.setLocalEulerAngles(t,hs,void 0,void 0,!1),yu.sceneGraphService.setLocalPosition(t,[e[0].value,e[1].value,0],!1),yu.sceneGraphService.dirtyLocalTransform(t,t.transformable)}};function vs(t,e){if(t.length){if(1===t.length&&ps[t[0].t])return void ps[t[0].t](e,t[0].d);for(var n=ut(As),r=0;r<t.length;r++){var i=t[r],o=i.t,a=i.d,s=fs[o];s&&(s(a),$t(n,n,ls))}e.setLocalTransform(n)}else e.resetLocalTransform();return e.getLocalTransform()}var gs=function(){return B(function t(){x(this,t),this.parser=Jo,this.mixer=ua},[{key:"calculator",value:function(t,e,n,r){return n instanceof _i?[]:n}},{key:"postProcessor",value:function(t){vs(t.parsedStyle.transform,t)}}])}(),ys=function(){return B(function t(){x(this,t)},[{key:"postProcessor",value:function(t){var e=t.parsedStyle.transformOrigin;e[0].unit===Bi.kPixels&&e[1].unit===Bi.kPixels?t.setOrigin(e[0].value,e[1].value):t.getGeometryBounds()}}])}(),ms=function(){return B(function t(){x(this,t)},[{key:"calculator",value:function(t,e,n,r){return n.value}},{key:"postProcessor",value:function(t){if(t.parentNode){var e=t.parentNode,n=e.renderable,r=e.sortable;n&&e.dirty(),r&&(r.dirty=!0,r.dirtyReason=Qr.Z_INDEX_CHANGED)}}}])}(),bs=function(){return B(function t(){x(this,t)},[{key:"update",value:function(t,e){var n=t.cx,r=void 0===n?0:n,i=t.cy,o=void 0===i?0:i,a=t.r,s=void 0===a?0:a;return{cx:r,cy:o,hwidth:s,hheight:s}}}])}(),ws=function(){return B(function t(){x(this,t)},[{key:"update",value:function(t,e){var n=t.cx,r=void 0===n?0:n,i=t.cy,o=void 0===i?0:i,a=t.rx,s=void 0===a?0:a,u=t.ry;return{cx:r,cy:o,hwidth:s,hheight:void 0===u?0:u}}}])}(),xs=function(){return B(function t(){x(this,t)},[{key:"update",value:function(t){var e=t.x1,n=t.y1,r=t.x2,i=t.y2,o=Math.min(e,r),a=Math.max(e,r),s=Math.min(n,i),u=(a-o)/2,c=(Math.max(n,i)-s)/2;return{cx:o+u,cy:s+c,hwidth:u,hheight:c}}}])}(),Es=function(){return B(function t(){x(this,t)},[{key:"update",value:function(t){var e=t.d.rect,n=e.x,r=e.y,i=e.width/2,o=e.height/2;return{cx:n+i,cy:r+o,hwidth:i,hheight:o}}}])}(),Bs=function(){return B(function t(){x(this,t)},[{key:"update",value:function(t){if(t.points&&tn(t.points.points)){var e=t.points.points,n=Math.min.apply(Math,O(e.map(function(t){return t[0]}))),r=Math.max.apply(Math,O(e.map(function(t){return t[0]}))),i=Math.min.apply(Math,O(e.map(function(t){return t[1]}))),o=Math.max.apply(Math,O(e.map(function(t){return t[1]}))),a=(r-n)/2,s=(o-i)/2;return{cx:n+a,cy:i+s,hwidth:a,hheight:s}}return{cx:0,cy:0,hwidth:0,hheight:0}}}])}(),ks=function(){return B(function t(){x(this,t)},[{key:"update",value:function(t,e){var n=t.x,r=void 0===n?0:n,i=t.y,o=void 0===i?0:i,a=t.src,s=t.width,u=void 0===s?0:s,c=t.height,l=u,A=void 0===c?0:c;return a&&!ve(a)&&(l||(l=a.width,t.width=l),A||(A=a.height,t.height=A)),{cx:r+l/2,cy:o+A/2,hwidth:l/2,hheight:A/2}}}])}(),Os=function(){return B(function t(e){x(this,t),this.globalRuntime=e},[{key:"isReadyToMeasure",value:function(t,e){return t.text}},{key:"update",value:function(t,e){var n,r=t.text,i=t.textAlign,o=void 0===i?"start":i,a=t.lineWidth,s=void 0===a?1:a,u=t.textBaseline,c=void 0===u?"alphabetic":u,l=t.dx,A=void 0===l?0:l,f=t.dy,d=void 0===f?0:f,h=t.x,p=void 0===h?0:h,v=t.y,g=void 0===v?0:v;if(!this.isReadyToMeasure(t,e))return t.metrics={font:"",width:0,height:0,lines:[],lineWidths:[],lineHeight:0,maxLineWidth:0,fontProperties:{ascent:0,descent:0,fontSize:0},lineMetrics:[]},{hwidth:0,hheight:0,cx:0,cy:0};var y=((null==e||null===(n=e.ownerDocument)||void 0===n||null===(n=n.defaultView)||void 0===n?void 0:n.getConfig())||{}).offscreenCanvas,m=this.globalRuntime.textService.measureText(r,t,y);t.metrics=m;var b=m.width/2,w=m.height/2,x=p+b;"center"===o||"middle"===o?x+=s/2-b:"right"!==o&&"end"!==o||(x+=s-2*b);var E=g-w;return"middle"===c?E+=w:"top"===c||"hanging"===c?E+=2*w:"alphabetic"===c||"bottom"!==c&&"ideographic"!==c||(E+=0),A&&(x+=A),d&&(E+=d),{cx:x,cy:E,hwidth:b,hheight:w}}}])}(),Cs=function(){return B(function t(){x(this,t)},[{key:"update",value:function(t,e){return{cx:0,cy:0,hwidth:0,hheight:0}}}])}(),Ms=function(){return B(function t(){x(this,t)},[{key:"update",value:function(t,e){var n=t.x,r=void 0===n?0:n,i=t.y,o=void 0===i?0:i,a=t.width,s=void 0===a?0:a,u=t.height,c=void 0===u?0:u;return{cx:r+s/2,cy:o+c/2,hwidth:s/2,hheight:c/2}}}])}(),Ss=function(){return B(function t(e){x(this,t),this.eventPhase=t.prototype.NONE,this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.defaultPrevented=!1,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new lr,this.page=new lr,this.canvas=new lr,this.viewport=new lr,this.composed=!1,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e},[{key:"name",get:function(){return this.type}},{key:"layerX",get:function(){return this.layer.x}},{key:"layerY",get:function(){return this.layer.y}},{key:"pageX",get:function(){return this.page.x}},{key:"pageY",get:function(){return this.page.y}},{key:"x",get:function(){return this.canvas.x}},{key:"y",get:function(){return this.canvas.y}},{key:"canvasX",get:function(){return this.canvas.x}},{key:"canvasY",get:function(){return this.canvas.y}},{key:"viewportX",get:function(){return this.viewport.x}},{key:"viewportY",get:function(){return this.viewport.y}},{key:"composedPath",value:function(){return!this.manager||this.path&&this.path[0]===this.target||(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}},{key:"propagationPath",get:function(){return this.composedPath()}},{key:"preventDefault",value:function(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}},{key:"stopImmediatePropagation",value:function(){this.propagationImmediatelyStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"initEvent",value:function(){}},{key:"initUIEvent",value:function(){}},{key:"clone",value:function(){throw new Error(fr)}}])}(),Fs=function(t){function e(){var t;x(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=F(this,e,[].concat(r))).client=new lr,t.movement=new lr,t.offset=new lr,t.global=new lr,t.screen=new lr,t}return P(e,t),B(e,[{key:"clientX",get:function(){return this.client.x}},{key:"clientY",get:function(){return this.client.y}},{key:"movementX",get:function(){return this.movement.x}},{key:"movementY",get:function(){return this.movement.y}},{key:"offsetX",get:function(){return this.offset.x}},{key:"offsetY",get:function(){return this.offset.y}},{key:"globalX",get:function(){return this.global.x}},{key:"globalY",get:function(){return this.global.y}},{key:"screenX",get:function(){return this.screen.x}},{key:"screenY",get:function(){return this.screen.y}},{key:"getModifierState",value:function(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}},{key:"initMouseEvent",value:function(){throw new Error(fr)}}])}(Ss),Ts=function(t){function e(){var t;x(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=F(this,e,[].concat(r))).width=0,t.height=0,t.isPrimary=!1,t}return P(e,t),B(e,[{key:"getCoalescedEvents",value:function(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[]}},{key:"getPredictedEvents",value:function(){throw new Error("getPredictedEvents is not supported!")}},{key:"clone",value:function(){return this.manager.clonePointerEvent(this)}}])}(Fs),Ps=function(t){function e(){return x(this,e),F(this,e,arguments)}return P(e,t),B(e,[{key:"clone",value:function(){return this.manager.cloneWheelEvent(this)}}])}(Fs),Is=function(t){function e(t,n){var r;return x(this,e),(r=F(this,e,[null])).type=t,r.detail=null==n?void 0:n.detail,n&&!("detail"in n)&&(r.detail=n),Object.assign(r,n),r}return P(e,t),B(e)}(Ss),Ns=function(){return B(function t(){x(this,t),this.emitter=new I},[{key:"on",value:function(t,e,n){return this.addEventListener(t,e,n),this}},{key:"addEventListener",value:function(t,e,n){var r=!1,i=!1;if(yn(n))r=n;else if(n){var o=n.capture;r=void 0!==o&&o;var a=n.once;i=void 0!==a&&a}r&&(t+="capture"),e=mn(e)?e:e.handleEvent;var s=mn(e)?void 0:e;return i?this.emitter.once(t,e,s):this.emitter.on(t,e,s),this}},{key:"off",value:function(t,e,n){return t?this.removeEventListener(t,e,n):this.removeAllEventListeners(),this}},{key:"removeAllEventListeners",value:function(){var t;null===(t=this.emitter)||void 0===t||t.removeAllListeners()}},{key:"removeEventListener",value:function(t,e,n){var r;if(!this.emitter)return this;(yn(n)?n:null==n?void 0:n.capture)&&(t+="capture"),e=mn(e)?e:null===(r=e)||void 0===r?void 0:r.handleEvent;var i=mn(e)?void 0:e;return this.emitter.off(t,e,i),this}},{key:"emit",value:function(t,e){this.dispatchEvent(new Is(t,e))}},{key:"dispatchEventToSelf",value:function(t){t.target||(t.target=this),t.currentTarget=this,this.emitter.emit(t.type,t)}},{key:"dispatchEvent",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(arguments.length>2?arguments[2]:void 0)return this.dispatchEventToSelf(t),!0;if(this.document)e=this;else if(this.defaultView)e=this.defaultView;else{var r;e=null===(r=this.ownerDocument)||void 0===r?void 0:r.defaultView}if(e){if(t.manager=e.getEventService(),!t.manager)return!1;t.defaultPrevented=!1,t.path?t.path.length=0:t.page=[],n||(t.target=this),t.manager.dispatchEvent(t,t.type,n)}else this.dispatchEventToSelf(t);return!t.defaultPrevented}}])}(),Ls=function(t){function e(){var t;x(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=F(this,e,[].concat(r))).shadow=!1,t.ownerDocument=null,t.isConnected=!1,t.baseURI="",t.childNodes=[],t.nodeType=0,t.nodeName="",t.nodeValue=null,t.mutations=void 0,t.parentNode=null,t.destroyed=!1,t}return P(e,t),B(e,[{key:"textContent",get:function(){var t="";this.nodeName===Jn.TEXT&&(t+=this.style.text);var e,n=qn(this.childNodes);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.nodeName===Jn.TEXT?t+=r.nodeValue:t+=r.textContent}}catch(t){n.e(t)}finally{n.f()}return t},set:function(t){var e=this;this.childNodes.slice().forEach(function(t){e.removeChild(t)}),this.nodeName===Jn.TEXT&&(this.style.text="".concat(t))}},{key:"getRootNode",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.parentNode?this.parentNode.getRootNode(t):t.composed&&this.host?this.host.getRootNode(t):this}},{key:"hasChildNodes",value:function(){return this.childNodes.length>0}},{key:"isDefaultNamespace",value:function(t){throw new Error(fr)}},{key:"lookupNamespaceURI",value:function(t){throw new Error(fr)}},{key:"lookupPrefix",value:function(t){throw new Error(fr)}},{key:"normalize",value:function(){throw new Error(fr)}},{key:"isEqualNode",value:function(t){return this===t}},{key:"isSameNode",value:function(t){return this.isEqualNode(t)}},{key:"parent",get:function(){return this.parentNode}},{key:"parentElement",get:function(){return null}},{key:"nextSibling",get:function(){return null}},{key:"previousSibling",get:function(){return null}},{key:"firstChild",get:function(){return this.childNodes.length>0?this.childNodes[0]:null}},{key:"lastChild",get:function(){return this.childNodes.length>0?this.childNodes[this.childNodes.length-1]:null}},{key:"compareDocumentPosition",value:function(t){if(t===this)return 0;for(var n=t,r=this,i=[n],o=[r];null!==(a=n.parentNode)&&void 0!==a?a:r.parentNode;){var a;n=n.parentNode?(i.push(n.parentNode),n.parentNode):n,r=r.parentNode?(o.push(r.parentNode),r.parentNode):r}if(n!==r)return e.DOCUMENT_POSITION_DISCONNECTED|e.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|e.DOCUMENT_POSITION_PRECEDING;var s=i.length>o.length?i:o,u=s===i?o:i;if(s[s.length-u.length]===u[0])return s===i?e.DOCUMENT_POSITION_CONTAINED_BY|e.DOCUMENT_POSITION_FOLLOWING:e.DOCUMENT_POSITION_CONTAINS|e.DOCUMENT_POSITION_PRECEDING;for(var c=s.length-u.length,l=u.length-1;l>=0;l--){var A=u[l],f=s[c+l];if(f!==A){var d=A.parentNode.childNodes;return d.indexOf(A)<d.indexOf(f)?u===i?e.DOCUMENT_POSITION_PRECEDING:e.DOCUMENT_POSITION_FOLLOWING:s===i?e.DOCUMENT_POSITION_PRECEDING:e.DOCUMENT_POSITION_FOLLOWING}}return e.DOCUMENT_POSITION_FOLLOWING}},{key:"contain",value:function(t){return this.contains(t)}},{key:"contains",value:function(t){for(var e=t;e&&this!==e;)e=e.parentNode;return!!e}},{key:"getAncestor",value:function(t){for(var e=this;t>0&&e;)e=e.parentNode,t--;return e}},{key:"forEach",value:function(t){for(var e=[this];e.length>0;){var n=e.pop();if(!1===t(n))break;for(var r=n.childNodes.length-1;r>=0;r--)e.push(n.childNodes[r])}}}],[{key:"isNode",value:function(t){return!!t.childNodes}}])}(Ns);Ls.DOCUMENT_POSITION_DISCONNECTED=1,Ls.DOCUMENT_POSITION_PRECEDING=2,Ls.DOCUMENT_POSITION_FOLLOWING=4,Ls.DOCUMENT_POSITION_CONTAINS=8,Ls.DOCUMENT_POSITION_CONTAINED_BY=16,Ls.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32;var _s=function(){return B(function t(e,n){var r=this;x(this,t),this.nativeHTMLMap=new WeakMap,this.cursor="default",this.mappingTable={},this.mappingState={trackingData:{}},this.eventPool=new Map,this.tmpMatrix=rt(),this.tmpVec3=_(),this.onPointerDown=function(t){var e=r.createPointerEvent(t);if(r.dispatchEvent(e,"pointerdown"),"touch"===e.pointerType)r.dispatchEvent(e,"touchstart");else if("mouse"===e.pointerType||"pen"===e.pointerType){var n=2===e.button;r.dispatchEvent(e,n?"rightdown":"mousedown")}r.trackingData(t.pointerId).pressTargetsByButton[t.button]=e.composedPath(),r.freeEvent(e)},this.onPointerUp=function(t){var e=Da.now(),n=r.createPointerEvent(t,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);if(r.dispatchEvent(n,"pointerup"),"touch"===n.pointerType)r.dispatchEvent(n,"touchend");else if("mouse"===n.pointerType||"pen"===n.pointerType){var i=2===n.button;r.dispatchEvent(n,i?"rightup":"mouseup")}var o=r.trackingData(t.pointerId),a=r.findMountedTarget(o.pressTargetsByButton[t.button]),s=a;if(a&&!n.composedPath().includes(a)){for(var u=a;u&&!n.composedPath().includes(u);){if(n.currentTarget=u,r.notifyTarget(n,"pointerupoutside"),"touch"===n.pointerType)r.notifyTarget(n,"touchendoutside");else if("mouse"===n.pointerType||"pen"===n.pointerType){var c=2===n.button;r.notifyTarget(n,c?"rightupoutside":"mouseupoutside")}Ls.isNode(u)&&(u=u.parentNode)}delete o.pressTargetsByButton[t.button],s=u}if(s){var l,A=r.clonePointerEvent(n,"click");A.target=s,A.path=[],o.clicksByButton[t.button]||(o.clicksByButton[t.button]={clickCount:0,target:A.target,timeStamp:e});var f=r.context.renderingContext.root.ownerDocument.defaultView,d=o.clicksByButton[t.button];d.target===A.target&&e-d.timeStamp<f.getConfig().dblClickSpeed?++d.clickCount:d.clickCount=1,d.target=A.target,d.timeStamp=e,A.detail=d.clickCount,null!==(l=n.detail)&&void 0!==l&&l.preventClick||(r.context.config.useNativeClickEvent||"mouse"!==A.pointerType&&"touch"!==A.pointerType||r.dispatchEvent(A,"click"),r.dispatchEvent(A,"pointertap")),r.freeEvent(A)}r.freeEvent(n)},this.onPointerMove=function(t){var e=r.createPointerEvent(t,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0),n="mouse"===e.pointerType||"pen"===e.pointerType,i=r.trackingData(t.pointerId),o=r.findMountedTarget(i.overTargets);if(i.overTargets&&o!==e.target){var a="mousemove"===t.type?"mouseout":"pointerout",s=r.createPointerEvent(t,a,o||void 0);if(r.dispatchEvent(s,"pointerout"),n&&r.dispatchEvent(s,"mouseout"),!e.composedPath().includes(o)){var u=r.createPointerEvent(t,"pointerleave",o||void 0);for(u.eventPhase=u.AT_TARGET;u.target&&!e.composedPath().includes(u.target);)u.currentTarget=u.target,r.notifyTarget(u),n&&r.notifyTarget(u,"mouseleave"),Ls.isNode(u.target)&&(u.target=u.target.parentNode);r.freeEvent(u)}r.freeEvent(s)}if(o!==e.target){var c="mousemove"===t.type?"mouseover":"pointerover",l=r.clonePointerEvent(e,c);r.dispatchEvent(l,"pointerover"),n&&r.dispatchEvent(l,"mouseover");for(var A=o&&Ls.isNode(o)&&o.parentNode;A&&A!==(Ls.isNode(r.rootTarget)&&r.rootTarget.parentNode)&&A!==e.target;)A=A.parentNode;if(!A||A===(Ls.isNode(r.rootTarget)&&r.rootTarget.parentNode)){var f=r.clonePointerEvent(e,"pointerenter");for(f.eventPhase=f.AT_TARGET;f.target&&f.target!==o&&f.target!==(Ls.isNode(r.rootTarget)&&r.rootTarget.parentNode);)f.currentTarget=f.target,r.notifyTarget(f),n&&r.notifyTarget(f,"mouseenter"),Ls.isNode(f.target)&&(f.target=f.target.parentNode);r.freeEvent(f)}r.freeEvent(l)}r.dispatchEvent(e,"pointermove"),"touch"===e.pointerType&&r.dispatchEvent(e,"touchmove"),n&&(r.dispatchEvent(e,"mousemove"),r.cursor=r.getCursor(e.target)),i.overTargets=e.composedPath(),r.freeEvent(e)},this.onPointerOut=function(t){var e=r.trackingData(t.pointerId);if(e.overTargets){var n="mouse"===t.pointerType||"pen"===t.pointerType,i=r.findMountedTarget(e.overTargets),o=r.createPointerEvent(t,"pointerout",i||void 0);r.dispatchEvent(o),n&&r.dispatchEvent(o,"mouseout");var a=r.createPointerEvent(t,"pointerleave",i||void 0);for(a.eventPhase=a.AT_TARGET;a.target&&a.target!==(Ls.isNode(r.rootTarget)&&r.rootTarget.parentNode);)a.currentTarget=a.target,r.notifyTarget(a),n&&r.notifyTarget(a,"mouseleave"),Ls.isNode(a.target)&&(a.target=a.target.parentNode);e.overTargets=null,r.freeEvent(o),r.freeEvent(a)}r.cursor=null},this.onPointerOver=function(t){var e=r.trackingData(t.pointerId),n=r.createPointerEvent(t),i="mouse"===n.pointerType||"pen"===n.pointerType;r.dispatchEvent(n,"pointerover"),i&&r.dispatchEvent(n,"mouseover"),"mouse"===n.pointerType&&(r.cursor=r.getCursor(n.target));var o=r.clonePointerEvent(n,"pointerenter");for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==(Ls.isNode(r.rootTarget)&&r.rootTarget.parentNode);)o.currentTarget=o.target,r.notifyTarget(o),i&&r.notifyTarget(o,"mouseenter"),Ls.isNode(o.target)&&(o.target=o.target.parentNode);e.overTargets=n.composedPath(),r.freeEvent(n),r.freeEvent(o)},this.onPointerUpOutside=function(t){var e=r.trackingData(t.pointerId),n=r.findMountedTarget(e.pressTargetsByButton[t.button]),i=r.createPointerEvent(t);if(n){for(var o=n;o;)i.currentTarget=o,r.notifyTarget(i,"pointerupoutside"),"touch"===i.pointerType||"mouse"!==i.pointerType&&"pen"!==i.pointerType||r.notifyTarget(i,2===i.button?"rightupoutside":"mouseupoutside"),Ls.isNode(o)&&(o=o.parentNode);delete e.pressTargetsByButton[t.button]}r.freeEvent(i)},this.onWheel=function(t){var e=r.createWheelEvent(t);r.dispatchEvent(e),r.freeEvent(e)},this.onClick=function(t){if(r.context.config.useNativeClickEvent){var e=r.createPointerEvent(t);r.dispatchEvent(e),r.freeEvent(e)}},this.onPointerCancel=function(t){var e=r.createPointerEvent(t,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);r.dispatchEvent(e),r.freeEvent(e)},this.globalRuntime=e,this.context=n},[{key:"init",value:function(){this.rootTarget=this.context.renderingContext.root.parentNode,this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointercancel",this.onPointerCancel),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel),this.addEventMapping("click",this.onClick)}},{key:"destroy",value:function(){this.mappingTable={},this.mappingState={},this.eventPool.clear()}},{key:"getScale",value:function(){var t=this.context.contextService.getBoundingClientRect(),e=1,n=1,r=this.context.contextService.getDomElement();if(r&&t){var i=r.offsetWidth,o=r.offsetHeight;i&&o&&(e=t.width/i,n=t.height/o)}return{scaleX:e,scaleY:n,bbox:t}}},{key:"client2Viewport",value:function(t){var e=this.getScale(),n=e.scaleX,r=e.scaleY,i=e.bbox;return new lr((t.x-((null==i?void 0:i.left)||0))/n,(t.y-((null==i?void 0:i.top)||0))/r)}},{key:"viewport2Client",value:function(t){var e=this.getScale(),n=e.scaleX,r=e.scaleY,i=e.bbox;return new lr((t.x+((null==i?void 0:i.left)||0))*n,(t.y+((null==i?void 0:i.top)||0))*r)}},{key:"viewport2Canvas",value:function(t){var e=t.x,n=t.y,r=this.rootTarget.defaultView.getCamera(),i=this.context.config,o=i.width,a=i.height,s=r.getPerspectiveInverse(),u=r.getWorldTransform(),c=dt(this.tmpMatrix,u,s),l=R(this.tmpVec3,e/o*2-1,2*(1-n/a)-1,0);return Y(l,l,c),new lr(l[0],l[1])}},{key:"canvas2Viewport",value:function(t){var e=this.rootTarget.defaultView.getCamera(),n=e.getPerspective(),r=e.getViewTransform(),i=dt(this.tmpMatrix,n,r),o=R(this.tmpVec3,t.x,t.y,0);Y(this.tmpVec3,this.tmpVec3,i);var a=this.context.config,s=a.width,u=a.height;return new lr((o[0]+1)/2*s,(1-(o[1]+1)/2)*u)}},{key:"setPickHandler",value:function(t){this.pickHandler=t}},{key:"addEventMapping",value:function(t,e){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:e,priority:0}),this.mappingTable[t].sort(function(t,e){return t.priority-e.priority})}},{key:"mapEvent",value:function(t){if(this.rootTarget){var e=this.mappingTable[t.type];if(e)for(var n=0,r=e.length;n<r;n++)e[n].fn(t);else console.warn("[EventService]: Event mapping not defined for ".concat(t.type))}}},{key:"dispatchEvent",value:function(t,e,n){if(n){t.eventPhase=t.AT_TARGET;var r=this.rootTarget.defaultView||null;t.currentTarget=r,this.notifyListeners(t,e)}else t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,e)}},{key:"propagate",value:function(t,e){if(t.target){var n=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(var r=n.length-1;r>=1;r--)if(t.currentTarget=n[r],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,e),!t.propagationStopped&&!t.propagationImmediatelyStopped){var i=n.indexOf(t.currentTarget);t.eventPhase=t.BUBBLING_PHASE;for(var o=i+1;o<n.length;o++)if(t.currentTarget=n[o],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return}}}},{key:"propagationPath",value:function(t){var e=[t],n=this.rootTarget.defaultView||null;if(n&&n===t)return e.unshift(n.document),e;for(var r=0;r<2048&&t!==this.rootTarget;r++)Ls.isNode(t)&&t.parentNode&&(e.push(t.parentNode),t=t.parentNode);return n&&e.push(n),e}},{key:"hitTest",value:function(t){var e=t.viewportX,n=t.viewportY,r=this.context.config,i=r.width,o=r.height,a=r.disableHitTesting;return e<0||n<0||e>i||n>o?null:!a&&this.pickHandler(t)||this.rootTarget||null}},{key:"isNativeEventFromCanvas",value:function(t,e){var n,r=null==e?void 0:e.target;if(null!==(n=r)&&void 0!==n&&n.shadowRoot&&(r=e.composedPath()[0]),r){if(r===t)return!0;if(t&&t.contains)return t.contains(r)}return!(null==e||!e.composedPath)&&e.composedPath().indexOf(t)>-1}},{key:"getExistedHTML",value:function(t){if(t.nativeEvent.composedPath)for(var e=0,n=t.nativeEvent.composedPath();e<n.length;e++){var r=n[e],i=this.nativeHTMLMap.get(r);if(i)return i}return null}},{key:"pickTarget",value:function(t){return this.hitTest({clientX:t.clientX,clientY:t.clientY,viewportX:t.viewportX,viewportY:t.viewportY,x:t.canvasX,y:t.canvasY})}},{key:"createPointerEvent",value:function(t,e,n,r){var i=this.allocateEvent(Ts);this.copyPointerData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.nativeEvent=t.nativeEvent,i.originalEvent=t;var o=this.getExistedHTML(i),a=this.context.contextService.getDomElement();return i.target=null!=n?n:o||this.isNativeEventFromCanvas(a,i.nativeEvent)&&this.pickTarget(i)||r,"string"==typeof e&&(i.type=e),i}},{key:"createWheelEvent",value:function(t){var e=this.allocateEvent(Ps);this.copyWheelData(t,e),this.copyMouseData(t,e),this.copyData(t,e),e.nativeEvent=t.nativeEvent,e.originalEvent=t;var n=this.getExistedHTML(e),r=this.context.contextService.getDomElement();return e.target=n||this.isNativeEventFromCanvas(r,e.nativeEvent)&&this.pickTarget(e),e}},{key:"trackingData",value:function(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}},{key:"cloneWheelEvent",value:function(t){var e=this.allocateEvent(Ps);return e.nativeEvent=t.nativeEvent,e.originalEvent=t.originalEvent,this.copyWheelData(t,e),this.copyMouseData(t,e),this.copyData(t,e),e.target=t.target,e.path=t.composedPath().slice(),e.type=t.type,e}},{key:"clonePointerEvent",value:function(t,e){var n=this.allocateEvent(Ts);return n.nativeEvent=t.nativeEvent,n.originalEvent=t.originalEvent,this.copyPointerData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.target=t.target,n.path=t.composedPath().slice(),n.type=null!=e?e:n.type,n}},{key:"copyPointerData",value:function(t,e){e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist}},{key:"copyMouseData",value:function(t,e){e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.shiftKey=t.shiftKey,e.client.copyFrom(t.client),e.movement.copyFrom(t.movement),e.canvas.copyFrom(t.canvas),e.screen.copyFrom(t.screen),e.global.copyFrom(t.global),e.offset.copyFrom(t.offset)}},{key:"copyWheelData",value:function(t,e){e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ}},{key:"copyData",value:function(t,e){e.isTrusted=t.isTrusted,e.timeStamp=Da.now(),e.type=t.type,e.detail=t.detail,e.view=t.view,e.page.copyFrom(t.page),e.viewport.copyFrom(t.viewport)}},{key:"allocateEvent",value:function(t){this.eventPool.has(t)||this.eventPool.set(t,[]);var e=this.eventPool.get(t).pop()||new t(this);return e.eventPhase=e.NONE,e.currentTarget=null,e.path=[],e.target=null,e}},{key:"freeEvent",value:function(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");var e=t.constructor;this.eventPool.has(e)||this.eventPool.set(e,[]),this.eventPool.get(e).push(t)}},{key:"notifyTarget",value:function(t,e){e=null!=e?e:t.type;var n=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?"".concat(e,"capture"):e;this.notifyListeners(t,n),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,e)}},{key:"notifyListeners",value:function(t,e){var n=t.currentTarget.emitter,r=n._events[e];if(r)if("fn"in r)r.once&&n.removeListener(e,r.fn,void 0,!0),r.fn.call(t.currentTarget||r.context,t);else for(var i=0;i<r.length&&!t.propagationImmediatelyStopped;i++)r[i].once&&n.removeListener(e,r[i].fn,void 0,!0),r[i].fn.call(t.currentTarget||r[i].context,t)}},{key:"findMountedTarget",value:function(t){if(!t)return null;for(var e=t[t.length-1],n=t.length-2;n>=0;n--){var r=t[n];if(!(r===this.rootTarget||Ls.isNode(r)&&r.parentNode===e))break;e=t[n]}return e}},{key:"getCursor",value:function(t){for(var e=t;e;){var n=La(e)&&e.getAttribute("cursor");if(n)return n;e=Ls.isNode(e)&&e.parentNode}}}])}(),Qs=function(){return B(function t(){x(this,t)},[{key:"getOrCreateCanvas",value:function(t,e){if(this.canvas)return this.canvas;if(t||yu.offscreenCanvas)this.canvas=t||yu.offscreenCanvas,this.context=this.canvas.getContext("2d",w({willReadFrequently:!0},e));else try{this.canvas=new window.OffscreenCanvas(0,0),this.context=this.canvas.getContext("2d",w({willReadFrequently:!0},e)),this.context&&this.context.measureText||(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"))}catch(t){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d",w({willReadFrequently:!0},e))}return this.canvas.width=10,this.canvas.height=10,this.canvas}},{key:"getOrCreateContext",value:function(t,e){return this.context||this.getOrCreateCanvas(t,e),this.context}}],[{key:"createCanvas",value:function(){try{return new window.OffscreenCanvas(0,0)}catch(t){}try{return document.createElement("canvas")}catch(t){}return null}}])}(),Us=function(t){return t[t.CAMERA_CHANGED=0]="CAMERA_CHANGED",t[t.DISPLAY_OBJECT_CHANGED=1]="DISPLAY_OBJECT_CHANGED",t[t.NONE=2]="NONE",t}({}),js=function(){return B(function t(e,n){x(this,t),this.inited=!1,this.stats={total:0,rendered:0},this.zIndexCounter=0,this.hooks={init:new ns,initAsync:new ts,dirtycheck:new rs,cull:new rs,beginFrame:new ns,beforeRender:new ns,render:new ns,afterRender:new ns,endFrame:new ns,destroy:new ns,pick:new es,pickSync:new rs,pointerDown:new ns,pointerUp:new ns,pointerMove:new ns,pointerOut:new ns,pointerOver:new ns,pointerWheel:new ns,pointerCancel:new ns,click:new ns},this.globalRuntime=e,this.context=n},[{key:"init",value:function(t){var e=this,n=w(w({},this.globalRuntime),this.context);this.context.renderingPlugins.forEach(function(t){t.apply(n,e.globalRuntime)}),this.hooks.init.call(),0===this.hooks.initAsync.getCallbacksNum()?(this.inited=!0,t()):this.hooks.initAsync.promise().then(function(){e.inited=!0,t()}).catch(function(t){})}},{key:"getStats",value:function(){return this.stats}},{key:"disableDirtyRectangleRendering",value:function(){return!this.context.config.renderer.getConfig().enableDirtyRectangleRendering||this.context.renderingContext.renderReasons.has(Us.CAMERA_CHANGED)}},{key:"render",value:function(t,e,n){var r=this,i=t.getConfig(),o=this.context.renderingContext;if(this.stats.total=0,this.stats.rendered=0,this.zIndexCounter=0,this.globalRuntime.sceneGraphService.syncHierarchy(o.root),this.globalRuntime.sceneGraphService.notifyMutationObservers(t),o.renderReasons.size&&this.inited){o.dirtyRectangleRenderingDisabled=this.disableDirtyRectangleRendering();var a=1===o.renderReasons.size&&o.renderReasons.has(Us.CAMERA_CHANGED),s=!i.disableRenderHooks||!a;s&&this.renderDisplayObject(o.root,i,o),this.hooks.beginFrame.call(e),s&&o.renderListCurrentFrame.forEach(function(t){r.hooks.beforeRender.call(t),r.hooks.render.call(t),r.hooks.afterRender.call(t)}),this.hooks.endFrame.call(e),o.renderListCurrentFrame=[],o.renderReasons.clear(),n()}}},{key:"renderDisplayObject",value:function(t,e,n){var r=this,i=e.renderer.getConfig(),o=i.enableDirtyCheck,a=i.enableCulling;function s(t){var e=t.renderable,i=t.sortable,s=o?e.dirty||n.dirtyRectangleRenderingDisabled?t:null:t,u=null;s&&(u=a?r.hooks.cull.call(s,r.context.camera):s)&&(r.stats.rendered+=1,n.renderListCurrentFrame.push(u)),t.dirty(!1),i.renderOrder=r.zIndexCounter,r.zIndexCounter+=1,r.stats.total+=1,i.dirty&&(r.sort(t,i),i.dirty=!1,i.dirtyChildren=[],i.dirtyReason=void 0)}for(var u=[t];u.length>0;){var c,l=u.pop();s(l);for(var A=(null===(c=l.sortable)||void 0===c||null===(c=c.sorted)||void 0===c?void 0:c.length)>0?l.sortable.sorted:l.childNodes,f=A.length-1;f>=0;f--)u.push(A[f])}}},{key:"sort",value:function(t,e){var n,r;(null==e||null===(n=e.sorted)||void 0===n?void 0:n.length)>0&&e.dirtyReason!==Qr.Z_INDEX_CHANGED?e.dirtyChildren.forEach(function(n){var r=e.sorted.indexOf(n);if(r>-1&&e.sorted.splice(r,1),t.childNodes.indexOf(n)>-1)if(0===e.sorted.length)e.sorted.push(n);else{var i=function(t,e){for(var n=0,r=t.length;n<r;){var i=n+r>>>1;_a(t[i],e)<0?n=i+1:r=i}return n}(e.sorted,n);e.sorted.splice(i,0,n)}}):e.sorted=t.childNodes.slice().sort(_a),(null===(r=e.sorted)||void 0===r?void 0:r.length)>0&&0===t.childNodes.filter(function(t){return t.parsedStyle.zIndex}).length&&(e.sorted=[])}},{key:"destroy",value:function(){this.inited=!1,this.hooks.destroy.call()}},{key:"dirty",value:function(){this.context.renderingContext.renderReasons.add(Us.DISPLAY_OBJECT_CHANGED)}}])}(),Ds=/\[\s*(.*)=(.*)\s*\]/,Rs=function(){return B(function t(){x(this,t)},[{key:"selectOne",value:function(t,e){var n=this;if(t.startsWith("."))return e.find(function(e){return((null==e?void 0:e.classList)||[]).indexOf(n.getIdOrClassname(t))>-1});if(t.startsWith("#"))return e.find(function(e){return e.id===n.getIdOrClassname(t)});if(t.startsWith("[")){var r=this.getAttribute(t),i=r.name,o=r.value;return i?e.find(function(t){return e!==t&&("name"===i?t.name===o:n.attributeToString(t,i)===o)}):null}return e.find(function(n){return e!==n&&n.nodeName===t})}},{key:"selectAll",value:function(t,e){var n=this;if(t.startsWith("."))return e.findAll(function(r){return e!==r&&((null==r?void 0:r.classList)||[]).indexOf(n.getIdOrClassname(t))>-1});if(t.startsWith("#"))return e.findAll(function(r){return e!==r&&r.id===n.getIdOrClassname(t)});if(t.startsWith("[")){var r=this.getAttribute(t),i=r.name,o=r.value;return i?e.findAll(function(t){return e!==t&&("name"===i?t.name===o:n.attributeToString(t,i)===o)}):[]}return e.findAll(function(n){return e!==n&&n.nodeName===t})}},{key:"is",value:function(t,e){if(t.startsWith("."))return e.className===this.getIdOrClassname(t);if(t.startsWith("#"))return e.id===this.getIdOrClassname(t);if(t.startsWith("[")){var n=this.getAttribute(t),r=n.name,i=n.value;return"name"===r?e.name===i:this.attributeToString(e,r)===i}return e.nodeName===t}},{key:"getIdOrClassname",value:function(t){return t.substring(1)}},{key:"getAttribute",value:function(t){var e=t.match(Ds),n="",r="";return e&&e.length>2&&(n=e[1].replace(/"/g,""),r=e[2].replace(/"/g,"")),{name:n,value:r}}},{key:"attributeToString",value:function(t,e){if(!t.getAttribute)return"";var n=t.getAttribute(e);return pe(n)?"":n.toString?n.toString():""}}])}(),Hs=function(t){return t.ATTR_MODIFIED="DOMAttrModified",t.INSERTED="DOMNodeInserted",t.MOUNTED="DOMNodeInsertedIntoDocument",t.REMOVED="removed",t.UNMOUNTED="DOMNodeRemovedFromDocument",t.REPARENT="reparent",t.DESTROY="destroy",t.BOUNDS_CHANGED="bounds-changed",t.CULLED="culled",t}({}),zs=function(t){function e(t,n,r,i,o,a,s,u){var c;return x(this,e),(c=F(this,e,[null])).relatedNode=n,c.prevValue=r,c.newValue=i,c.attrName=o,c.attrChange=a,c.prevParsedValue=s,c.newParsedValue=u,c.type=t,c}return P(e,t),B(e)}(Ss);zs.ADDITION=2,zs.MODIFICATION=1,zs.REMOVAL=3;var Ks,Gs,Vs,Ws=new zs(Hs.REPARENT,null,"","","",0,"",""),Ys=fe(),Xs=_(),qs=j(1,1,1),Zs=rt(),Js=fe(),$s=_(),tu=rt(),eu=ne(),nu=_(),ru=ne(),iu=_(),ou=_(),au=_(),su=rt(),uu=ne(),cu=ne(),lu=ne(),Au=function(){return B(function t(e){x(this,t),this.displayObjectDependencyMap=new WeakMap,this.runtime=e},[{key:"matches",value:function(t,e){return this.runtime.sceneGraphSelector.is(t,e)}},{key:"querySelector",value:function(t,e){return this.runtime.sceneGraphSelector.selectOne(t,e)}},{key:"querySelectorAll",value:function(t,e){return this.runtime.sceneGraphSelector.selectAll(t,e)}},{key:"attach",value:function(t,e,n){var r,i=!1;t.parentNode&&(i=t.parentNode!==e,this.detach(t));var o=t.nodeName===Jn.FRAGMENT,a=Ra(e);t.parentNode=e;var s=o?t.childNodes:[t];de(n)?s.forEach(function(t){e.childNodes.splice(n,0,t),t.parentNode=e}):s.forEach(function(t){e.childNodes.push(t),t.parentNode=e});var u=e.sortable;if((null!=u&&null!==(r=u.sorted)&&void 0!==r&&r.length||u.dirty||t.parsedStyle.zIndex)&&(-1===u.dirtyChildren.indexOf(t)&&u.dirtyChildren.push(t),u.dirty=!0,u.dirtyReason=Qr.ADDED),!a){if(o)this.dirtyFragment(t);else{var c=t.transformable;c&&this.dirtyWorldTransform(t,c)}if(i){var l,A=!0===(null===(l=e.ownerDocument)||void 0===l||null===(l=l.defaultView)||void 0===l||null===(l=l.getConfig())||void 0===l||null===(l=l.future)||void 0===l?void 0:l.experimentalCancelEventPropagation);t.dispatchEvent(Ws,A,A)}}}},{key:"detach",value:function(t){var e,n;if(t.parentNode){var r=t.transformable,i=t.parentNode.sortable;(null!=i&&null!==(e=i.sorted)&&void 0!==e&&e.length||null!==(n=t.style)&&void 0!==n&&n.zIndex)&&(-1===i.dirtyChildren.indexOf(t)&&i.dirtyChildren.push(t),i.dirty=!0,i.dirtyReason=Qr.REMOVED);var o=t.parentNode.childNodes.indexOf(t);o>-1&&t.parentNode.childNodes.splice(o,1),r&&this.dirtyWorldTransform(t,r),t.parentNode=null}}},{key:"getLocalPosition",value:function(t){return t.transformable.localPosition}},{key:"getLocalRotation",value:function(t){return t.transformable.localRotation}},{key:"getLocalScale",value:function(t){return t.transformable.localScale}},{key:"getLocalSkew",value:function(t){return t.transformable.localSkew}},{key:"getLocalTransform",value:function(t){var e=t.transformable;return Rr(e),e.localTransform}},{key:"setLocalPosition",value:function(t,e){var n,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=t.transformable;ou[0]=e[0],ou[1]=e[1],ou[2]=null!==(n=e[2])&&void 0!==n?n:0,q(i.localPosition,ou)||(D(i.localPosition,ou),r&&this.dirtyLocalTransform(t,i))}},{key:"translateLocal",value:function(t,e){"number"==typeof e&&(e=j(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0));var n=t.transformable;q(e,Xs)||(function(t,e,n){var r=n[0],i=n[1],o=n[2],a=n[3],s=e[0],u=e[1],c=e[2],l=i*c-o*u,A=o*s-r*c,f=r*u-i*s;l+=l,A+=A,f+=f,t[0]=s+a*l+i*f-o*A,t[1]=u+a*A+o*l-r*f,t[2]=c+a*f+r*A-i*l}(e,e,n.localRotation),H(n.localPosition,n.localPosition,e),this.dirtyLocalTransform(t,n))}},{key:"setLocalRotation",value:function(t,e,n,r,i){var o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];"number"==typeof e&&(e=ce(eu,e,n,r,i));var a=t.transformable;ue(a.localRotation,e),o&&this.dirtyLocalTransform(t,a)}},{key:"rotateLocal",value:function(t,e){"number"==typeof e&&(e=j(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0));var n=t.transformable;ae(cu,e[0],e[1],e[2]),le(n.localRotation,n.localRotation,cu),this.dirtyLocalTransform(t,n)}},{key:"setLocalScale",value:function(t,e){var n,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=t.transformable;R($s,e[0],e[1],null!==(n=e[2])&&void 0!==n?n:i.localScale[2]),q($s,i.localScale)||(D(i.localScale,$s),r&&this.dirtyLocalTransform(t,i))}},{key:"scaleLocal",value:function(t,e){var n,r,i,o,a=t.transformable;r=a.localScale,i=a.localScale,o=R($s,e[0],e[1],null!==(n=e[2])&&void 0!==n?n:1),r[0]=i[0]*o[0],r[1]=i[1]*o[1],r[2]=i[2]*o[2],this.dirtyLocalTransform(t,a)}},{key:"setLocalSkew",value:function(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];"number"==typeof e&&(e=function(t,e,n){return t[0]=e,t[1]=n,t}(Js,e,n));var i,o,a=t.transformable;i=a.localSkew,o=e,i[0]=o[0],i[1]=o[1],r&&this.dirtyLocalTransform(t,a)}},{key:"setLocalEulerAngles",value:function(t,e){var n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];"number"==typeof e&&(e=j(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0));var r=t.transformable;ae(r.localRotation,e[0],e[1],e[2]),n&&this.dirtyLocalTransform(t,r)}},{key:"setLocalTransform",value:function(t,e){var n=Mt(nu,e),r=Ft(ru,e),i=St(iu,e);this.setLocalScale(t,i,!1),this.setLocalPosition(t,n,!1),this.setLocalRotation(t,r,void 0,void 0,void 0,!1),this.dirtyLocalTransform(t,t.transformable)}},{key:"resetLocalTransform",value:function(t){this.setLocalScale(t,qs,!1),this.setLocalPosition(t,Xs,!1),this.setLocalEulerAngles(t,Xs,void 0,void 0,!1),this.setLocalSkew(t,Ys,void 0,!1),this.dirtyLocalTransform(t,t.transformable)}},{key:"getPosition",value:function(t){var e=t.transformable;return Mt(e.position,this.getWorldTransform(t,e))}},{key:"getRotation",value:function(t){var e=t.transformable;return Ft(e.rotation,this.getWorldTransform(t,e))}},{key:"getScale",value:function(t){var e=t.transformable;return St(e.scaling,this.getWorldTransform(t,e))}},{key:"getOrigin",value:function(t){return t.getGeometryBounds(),t.transformable.origin}},{key:"getWorldTransform",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.transformable;return e.localDirtyFlag||e.dirtyFlag?(t.parentNode&&t.parentNode.transformable&&this.getWorldTransform(t.parentNode),this.internalUpdateTransform(t),e.worldTransform):e.worldTransform}},{key:"setPosition",value:function(t,e){var n,r=t.transformable;if(au[0]=e[0],au[1]=e[1],au[2]=null!==(n=e[2])&&void 0!==n?n:0,!q(this.getPosition(t),au)){if(D(r.position,au),null!==t.parentNode&&t.parentNode.transformable){var i=t.parentNode.transformable;ot(su,i.worldTransform),lt(su,su),Y(r.localPosition,au,su)}else D(r.localPosition,au);this.dirtyLocalTransform(t,r)}}},{key:"translate",value:function(t,e){"number"==typeof e&&(e=R($s,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0)),q(e,Xs)||(H($s,this.getPosition(t),e),this.setPosition(t,$s))}},{key:"setRotation",value:function(t,e,n,r,i){var o=t.transformable;if("number"==typeof e&&(e=se(e,n,r,i)),null!==t.parentNode&&t.parentNode.transformable){var a=this.getRotation(t.parentNode);ue(eu,a),oe(eu,eu),ie(o.localRotation,eu,e),Ae(o.localRotation,o.localRotation),this.dirtyLocalTransform(t,o)}else this.setLocalRotation(t,e)}},{key:"rotate",value:function(t,e){"number"==typeof e&&(e=j(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0));var n=t.transformable;if(null!==t.parentNode&&t.parentNode.transformable){var r=eu;ae(r,e[0],e[1],e[2]);var i=this.getRotation(t),o=this.getRotation(t.parentNode);ue(lu,o),oe(lu,lu),ie(r,lu,r),ie(n.localRotation,r,i),Ae(n.localRotation,n.localRotation),this.dirtyLocalTransform(t,n)}else this.rotateLocal(t,e)}},{key:"setOrigin",value:function(t,e){"number"==typeof e&&(e=[e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0]);var n=t.transformable;if(e[0]!==n.origin[0]||e[1]!==n.origin[1]||e[2]!==n.origin[2]){var r=n.origin;r[0]=e[0],r[1]=e[1],r[2]=e[2]||0,this.dirtyLocalTransform(t,n)}}},{key:"setEulerAngles",value:function(t,e){"number"==typeof e&&(e=j(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0));var n=t.transformable;if(null!==t.parentNode&&t.parentNode.transformable){ae(n.localRotation,e[0],e[1],e[2]);var r=this.getRotation(t.parentNode);ue(uu,oe(eu,r)),le(n.localRotation,n.localRotation,uu),this.dirtyLocalTransform(t,n)}else this.setLocalEulerAngles(t,e)}},{key:"getGeometryBounds",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.geometry;return n.dirty&&yu.styleValueRegistry.updateGeometry(t),(e?n.renderBounds:n.contentBounds||null)||new ar}},{key:"getTransformedGeometryBounds",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this.getGeometryBounds(t,e);if(!ar.isEmpty(r)){var i=n||new ar;return i.setFromTransformedAABB(r,this.getWorldTransform(t)),i}return null}},{key:"getBounds",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.renderable;if(!r.boundsDirty&&!n&&r.bounds)return r.bounds;if(!r.renderBoundsDirty&&n&&r.renderBounds)return r.renderBounds;var i=n?r.renderBounds:r.bounds,o=this.getTransformedGeometryBounds(t,n,i);if(t.childNodes.forEach(function(t){var r=e.getBounds(t,n);r&&(o?o.add(r):(o=i||new ar).update(r.center,r.halfExtents))}),o||(o=new ar),n){var a=Qa(t);if(a){var s=a.parsedStyle.clipPath.getBounds(n);o?s&&(o=s.intersection(o)):o.update(s.center,s.halfExtents)}}return n?(r.renderBounds=o,r.renderBoundsDirty=!1):(r.bounds=o,r.boundsDirty=!1),o}},{key:"getLocalBounds",value:function(t){if(t.parentNode){var e=Zs;t.parentNode.transformable&&(e=lt(tu,this.getWorldTransform(t.parentNode)));var n=this.getBounds(t);if(!ar.isEmpty(n)){var r=new ar;return r.setFromTransformedAABB(n,e),r}}return this.getBounds(t)}},{key:"getBoundingClientRect",value:function(t){var e,n,r=this.getGeometryBounds(t);ar.isEmpty(r)||(n=new ar).setFromTransformedAABB(r,this.getWorldTransform(t));var i=null===(e=t.ownerDocument)||void 0===e||null===(e=e.defaultView)||void 0===e?void 0:e.getContextService().getBoundingClientRect();if(n){var o=v(n.getMin(),2),a=o[0],s=o[1],u=v(n.getMax(),2),c=u[0],l=u[1];return new Ar(a+((null==i?void 0:i.left)||0),s+((null==i?void 0:i.top)||0),c-a,l-s)}return new Ar((null==i?void 0:i.left)||0,(null==i?void 0:i.top)||0,0,0)}},{key:"internalUpdateTransform",value:function(t){var e,n=null===(e=t.parentNode)||void 0===e?void 0:e.transformable;Rr(t.transformable),function(t,e){t.dirtyFlag&&(e?dt(t.worldTransform,e.worldTransform,t.localTransform):ot(t.worldTransform,t.localTransform),t.dirtyFlag=!1)}(t.transformable,n)}},{key:"internalUpdateElement",value:function(t,e){var n,r,i,o,a,s,u=!0===(null===(n=t.ownerDocument)||void 0===n||null===(n=n.defaultView)||void 0===n||null===(n=n.getConfig())||void 0===n||null===(n=n.future)||void 0===n?void 0:n.experimentalAttributeUpdateOptimization),c=e[e.length-1],l=(null==c?void 0:c.transformDirty)||(null===(r=t.transformable)||void 0===r?void 0:r.localDirtyFlag);t.transformable&&((a=t.transformable).dirtyFlag||(a.dirtyFlag=l)),this.internalUpdateTransform(t),l&&(null===(s=t.dirty)||void 0===s||s.call(t,!0,!0));var A=(null===(i=t.renderable)||void 0===i?void 0:i.boundsDirty)||(null===(o=t.renderable)||void 0===o?void 0:o.renderBoundsDirty);if((l||A)&&!1===(null==c?void 0:c.shapeUpdated)&&u)for(var f=e.length-1;f>=0;){var d,h,p=e[f];if(p.shapeUpdated)break;null===(d=(h=p.node).dirty)||void 0===d||d.call(h,!0,!0),p.shapeUpdated=!0,f-=1}return l}},{key:"syncHierarchy",value:function(t){for(var e,n,r=[t],i=t.parentNode?[{node:t.parentNode,transformDirty:(null===(e=t.parentNode.transformable)||void 0===e?void 0:e.localDirtyFlag)||(null===(n=t.parentNode.transformable)||void 0===n?void 0:n.dirtyFlag),shapeUpdated:!1}]:[];r.length>0;){for(var o=r.pop(),a=i[i.length-1];i.length>0&&o.parentNode!==a.node;)a=i.pop();var s=this.internalUpdateElement(o,i);if(o.childNodes.length>0){for(var u=o.childNodes.length-1;u>=0;u--)r.push(o.childNodes[u]);i.push({node:o,transformDirty:s,shapeUpdated:!1})}}}},{key:"dirtyLocalTransform",value:function(t,e){Ra(t)||e.localDirtyFlag||(e.localDirtyFlag=!0,e.dirtyFlag||this.dirtyWorldTransform(t,e))}},{key:"dirtyWorldTransform",value:function(t,e){this.dirtyWorldInternal(t,e),this.dirtyToRoot(t,!0)}},{key:"dirtyWorldInternal",value:function(t,e){var n,r=this,i=!0===(null===(n=t.ownerDocument)||void 0===n||null===(n=n.defaultView)||void 0===n||null===(n=n.getConfig())||void 0===n||null===(n=n.future)||void 0===n?void 0:n.experimentalAttributeUpdateOptimization);e.dirtyFlag||(e.dirtyFlag=!0,t.dirty(!0,!0),i||t.childNodes.forEach(function(t){var e=t.transformable;r.dirtyWorldInternal(t,e)}))}},{key:"dirtyToRoot",value:function(t){for(var e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t,i=!0===(null===(e=t.ownerDocument)||void 0===e||null===(e=e.defaultView)||void 0===e||null===(e=e.getConfig())||void 0===e||null===(e=e.future)||void 0===e?void 0:e.experimentalAttributeUpdateOptimization);r;){var o,a;if(null===(o=(a=r).dirty)||void 0===o||o.call(a,!0,!0),i)break;r=r.parentNode}n&&t.forEach(function(t){var e;null===(e=t.dirty)||void 0===e||e.call(t,!0,!0)}),this.informDependentDisplayObjects(t);var s=t.mutations||[],u=s.find(function(t){return"attributes"===t.type&&t._boundsChangeData});u?u._boundsChangeData={affectChildren:u._boundsChangeData.affectChildren||n}:(u={type:"attributes",target:t,_boundsChangeData:{affectChildren:n}},s.push(u)),t.mutations=s}},{key:"dirtyFragment",value:function(t){var e,n,r=t.transformable;r&&(r.dirtyFlag=!0,r.localDirtyFlag=!0),null===(e=(n=t).dirty)||void 0===e||e.call(n,!0,!0);for(var i=t.childNodes.length,o=0;o<i;o++)this.dirtyFragment(t.childNodes[o])}},{key:"notifyMutationObservers",value:function(t){var e=new Set;if(t.getRoot().forEach(function(t){(t.mutations||[]).forEach(function(n){"attributes"===n.type&&n._boundsChangeData&&(n._boundsChangeData.affectChildren?t.forEach(function(t){var r=w({},n);r.target=t,e.add(r)}):e.add(n))}),t.mutations=void 0}),e.size>0){var n=new Is(Hs.BOUNDS_CHANGED,{detail:Array.from(e)});t.dispatchEvent(n,!0,!0)}}},{key:"updateDisplayObjectDependency",value:function(t,e,n,r){if(e&&e!==n){var i=this.displayObjectDependencyMap.get(e);if(i&&i[t]){var o=i[t].indexOf(r);i[t].splice(o,1)}}if(n){var a=this.displayObjectDependencyMap.get(n);a||(this.displayObjectDependencyMap.set(n,{}),a=this.displayObjectDependencyMap.get(n)),a[t]||(a[t]=[]),a[t].push(r)}}},{key:"informDependentDisplayObjects",value:function(t){var e,n=this,r=this.displayObjectDependencyMap.get(t);if(r){var i=null===(e=t.ownerDocument)||void 0===e||null===(e=e.defaultView)||void 0===e||null===(e=e.getConfig())||void 0===e||null===(e=e.future)||void 0===e?void 0:e.experimentalCancelEventPropagation;Object.keys(r).forEach(function(t){r[t].forEach(function(e){n.dirtyToRoot(e,!0),e.dispatchEvent(new zs(Hs.ATTR_MODIFIED,e,n,n,t,zs.MODIFICATION,n,n),i,i),e.isCustomElement&&e.isConnected&&e.attributeChangedCallback&&e.attributeChangedCallback(t,n,n)})})}}}])}(),fu=function(){return B(function t(e){if(x(this,t),e<=0)throw new Error("LRU capacity must be a positive number.");this.capacity=e,this.cache=new Map},[{key:"get",value:function(t){if(this.cache.has(t)){var e=this.cache.get(t);return this.cache.delete(t),this.cache.set(t,e),e}}},{key:"put",value:function(t,e){if(this.cache.has(t)&&this.cache.delete(t),this.cache.set(t,e),this.cache.size>this.capacity){var n=this.cache.keys().next().value;this.cache.delete(n)}}},{key:"len",value:function(){return this.cache.size}},{key:"clear",value:function(){this.cache.clear()}}])}(),du={MetricsString:"|q",BaselineSymbol:"M",BaselineMultiplier:1.4,HeightMultiplier:2,Newlines:[10,13],BreakingSpaces:[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},hu=/[a-zA-Z0-9\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u00ff!"#$%&'()*+,-./:;]/,pu=new RegExp("".concat(/[!%),.:;?\]}'""]/.source,"|").concat(/[!),.:;?\]}'""]/.source,"|").concat(/[)\]'"?!:;,.]/.source,"|").concat(/[!%),.:;?\]}'"]/.source)),vu=new RegExp("".concat(/[$('"]/.source,"|").concat(/[([{'"]/.source,"|").concat(/[(['"...]/.source,"|").concat(/[$([{'"#]/.source)),gu=function(){return B(function t(e){var n=this;x(this,t),this.fontMetricsCache={},this.shouldBreakByKinsokuShorui=function(t,e){return!n.isBreakingSpace(e)&&!(!t||!vu.exec(e)&&!pu.exec(t))},this.trimByKinsokuShorui=function(t){var e=O(t),n=e[e.length-2];if(!n)return t;var r=n[n.length-1];return e[e.length-2]=n.slice(0,-1),e[e.length-1]=r+e[e.length-1],e},this.runtime=e,this.charWidthCache=new fu(100)},[{key:"measureFont",value:function(t,e){if(this.fontMetricsCache[t])return this.fontMetricsCache[t];var n={ascent:0,descent:0,fontSize:0},r=this.runtime.offscreenCanvasCreator.getOrCreateCanvas(e),i=this.runtime.offscreenCanvasCreator.getOrCreateContext(e,{willReadFrequently:!0});i.font=t;var o=du.MetricsString+du.BaselineSymbol,a=Math.ceil(i.measureText(o).width),s=Math.ceil(i.measureText(du.BaselineSymbol).width),u=du.HeightMultiplier*s;s=s*du.BaselineMultiplier|0,r.width=a,r.height=u,i.fillStyle="#f00",i.fillRect(0,0,a,u),i.font=t,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(o,0,s);var c=i.getImageData(0,0,a||1,u||1).data,l=c.length,A=4*a,f=0,d=0,h=!1;for(f=0;f<s;++f){for(var p=0;p<A;p+=4)if(255!==c[d+p]){h=!0;break}if(h)break;d+=A}for(n.ascent=s-f,d=l-A,h=!1,f=u;f>s;--f){for(var v=0;v<A;v+=4)if(255!==c[d+v]){h=!0;break}if(h)break;d-=A}return n.descent=f-s,n.fontSize=n.ascent+n.descent,this.fontMetricsCache[t]=n,n}},{key:"measureText",value:function(t,e,n){var r=e.fontSize,i=void 0===r?16:r,o=e.wordWrap,a=void 0!==o&&o,s=e.lineHeight,u=e.lineWidth,c=void 0===u?1:u,l=e.textBaseline,A=void 0===l?"alphabetic":l,f=e.textAlign,d=void 0===f?"start":f,h=e.letterSpacing,p=void 0===h?0:h,v=e.textPath;e.textPathSide,e.textPathStartOffset;var g=e.leading,y=void 0===g?0:g,m=ss(e),b=this.measureFont(m,n);0===b.fontSize&&(b.fontSize=i,b.ascent=i);var w=this.runtime.offscreenCanvasCreator.getOrCreateContext(n);w.font=m,e.isOverflowing=!1;var x=(a?this.wordWrap(t,e,n):t).split(/(?:\r\n|\r|\n)/),E=new Array(x.length),B=0;if(!v){for(var k=0;k<x.length;k++){var O=w.measureText(x[k]).width+(x[k].length-1)*p;E[k]=O,B=Math.max(B,O)}var C=B+c,M=s||b.fontSize+c,S=Math.max(M,b.fontSize+c)+(x.length-1)*(M+y),F=0;return"middle"===A?F=-S/2:"bottom"===A||"alphabetic"===A||"ideographic"===A?F=-S:"top"!==A&&"hanging"!==A||(F=0),{font:m,width:C,height:S,lines:x,lineWidths:E,lineHeight:M+=y,maxLineWidth:B,fontProperties:b,lineMetrics:E.map(function(t,e){var n=0;return"center"===d||"middle"===d?n-=t/2:"right"!==d&&"end"!==d||(n-=t),new Ar(n-c/2,F+e*M,t+c,M)})}}v.getTotalLength();for(var T=0;T<x.length;T++)w.measureText(x[T]).width,x[T].length}},{key:"wordWrap",value:function(t,e,n){var r=this,i=Array.from(t);if(0===i.length)return"";var o=this,a=e.wordWrapWidth,s=void 0===a?0:a,u=e.letterSpacing,c=void 0===u?0:u,l=e.maxLines,A=void 0===l?1/0:l,f=e.textOverflow,d=this.runtime.offscreenCanvasCreator.getOrCreateContext(n),h=s+c,p="";"ellipsis"===f?p="...":f&&"clip"!==f&&(p=f);var v=[""],g=0,y=0,m=-1,b=ss(e),w=this.charWidthCache.get(b);w||(w=new fu(500),this.charWidthCache.put(b,w));var x=function(t){return r.getFromCache(t,c,w,d)},E=x(p);function B(t,e,n,r){for(;x(t)<r&&e<i.length-1&&!o.isNewline(i[e+1]);)t+=i[e+=1];for(;x(t)>r&&e>=n;)e-=1,t=t.slice(0,-1);return{lineTxt:t,txtLastCharIndex:e}}function k(t,e){if(!(E<=0||E>h))if(v[t]){var n=B(v[t],e,m+1,h-E);v[t]=n.lineTxt+p}else v[t]=p}for(var O=0;O<i.length;O++){var C=i[O],M=i[O-1],S=i[O+1],F=x(C);if(this.isNewline(C)){if(g+1>=A){O<i.length-1&&k(g,O-1),e.isOverflowing=!0;break}m=O-1,y=0,v[g+=1]=""}else{if(F>h){k(g,O-1),e.isOverflowing=!0;break}if(y>0&&y+F>h){var T=B(v[g],O-1,m+1,h);if(T.txtLastCharIndex!==O-1){if(v[g]=T.lineTxt,T.txtLastCharIndex===i.length-1)break;O=T.txtLastCharIndex+1,C=i[O],M=i[O-1],S=i[O+1],F=x(C)}if(g+1>=A){k(g,O-1),e.isOverflowing=!0;break}if(m=O-1,y=0,v[g+=1]="",this.isBreakingSpace(C))continue;this.canBreakInLastChar(C)||(v=this.trimToBreakable(v),y=this.sumTextWidthByCache(v[g]||"",x)),this.shouldBreakByKinsokuShorui(C,S)&&(v=this.trimByKinsokuShorui(v),y+=x(M||""))}y+=F,v[g]+=C}}return v.join("\n")}},{key:"isBreakingSpace",value:function(t){return"string"==typeof t&&du.BreakingSpaces.indexOf(t.charCodeAt(0))>=0}},{key:"isNewline",value:function(t){return"string"==typeof t&&du.Newlines.indexOf(t.charCodeAt(0))>=0}},{key:"trimToBreakable",value:function(t){var e=O(t),n=e[e.length-2],r=this.findBreakableIndex(n);if(-1===r||!n)return e;var i=n.slice(r,r+1),o=r+1,a=r+(this.isBreakingSpace(i)?0:1);return e[e.length-1]+=n.slice(o,n.length),e[e.length-2]=n.slice(0,a),e}},{key:"canBreakInLastChar",value:function(t){return!t||!hu.test(t)}},{key:"sumTextWidthByCache",value:function(t,e){return t.split("").reduce(function(t,n){return t+e(n)},0)}},{key:"findBreakableIndex",value:function(t){for(var e=t.length-1;e>=0;e--)if(!hu.test(t[e]))return e;return-1}},{key:"getFromCache",value:function(t,e,n,r){var i=n.get(t);if("number"!=typeof i){var o=t.length*e;i=r.measureText(t).width+o,n.put(t,i)}return i}},{key:"clearCache",value:function(){this.fontMetricsCache={},this.charWidthCache.clear()}}])}(),yu={},mu=(Gs=new ks,Vs=new Bs,m(m(m(m(m(m(m(m(m(m(Ks={},Jn.FRAGMENT,null),Jn.CIRCLE,new bs),Jn.ELLIPSE,new ws),Jn.RECT,Gs),Jn.IMAGE,Gs),Jn.GROUP,new Cs),Jn.LINE,new xs),Jn.TEXT,new Os(yu)),Jn.POLYLINE,Vs),Jn.POLYGON,Vs),m(m(m(Ks,Jn.PATH,new Es),Jn.HTML,new Ms),Jn.MESH,null)),bu=function(t){var e=new ya,n=new wa;return m(m(m(m(m(m(m(m(m(m(t={},zr.PERCENTAGE,null),zr.NUMBER,new ka),zr.ANGLE,new va),zr.DEFINED_PATH,new ga),zr.PAINT,e),zr.COLOR,e),zr.FILTER,new ma),zr.LENGTH,n),zr.LENGTH_PERCENTAGE,n),zr.LENGTH_PERCENTAGE_12,new xa),m(m(m(m(m(m(m(m(m(m(t,zr.LENGTH_PERCENTAGE_14,new Ea),zr.COORDINATE,new wa),zr.OFFSET_DISTANCE,new Oa),zr.OPACITY_VALUE,new Ca),zr.PATH,new Ma),zr.LIST_OF_POINTS,new Sa),zr.SHADOW_BLUR,new Fa),zr.TEXT,new Ta),zr.TEXT_TRANSFORM,new Pa),zr.TRANSFORM,new gs),m(m(m(t,zr.TRANSFORM_ORIGIN,new ys),zr.Z_INDEX,new ms),zr.MARKER,new Ba)}();yu.CameraContribution=Lr,yu.AnimationTimeline=null,yu.EasingFunction=null,yu.offscreenCanvasCreator=new Qs,yu.sceneGraphSelector=new Rs,yu.sceneGraphService=new Au(yu),yu.textService=new gu(yu),yu.geometryUpdaterFactory=mu,yu.CSSPropertySyntaxFactory=bu,yu.styleValueRegistry=new ha(yu),yu.layoutRegistry=null,yu.globalThis="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==c.g?c.g:{},yu.enableStyleSyntax=!0,yu.enableSizeAttenuation=!1;var wu=0,xu=new zs(Hs.INSERTED,null,"","","",0,"",""),Eu=new zs(Hs.REMOVED,null,"","","",0,"",""),Bu=new Is(Hs.DESTROY),ku=function(t){function e(){var t;x(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=F(this,e,[].concat(r))).entity=wu++,t.transformable={dirtyFlag:!1,localDirtyFlag:!1,localPosition:[0,0,0],localRotation:[0,0,0,1],localScale:[1,1,1],localTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],localSkew:[0,0],position:[0,0,0],rotation:[0,0,0,1],scaling:[1,1,1],worldTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],origin:[0,0,0]},t.renderable={bounds:void 0,boundsDirty:!0,renderBounds:void 0,renderBoundsDirty:!0,dirtyRenderBounds:void 0,dirty:!1},t.geometry={contentBounds:void 0,renderBounds:void 0,dirty:!0},t.cullable={strategy:_r.Standard,visibilityPlaneMask:-1,visible:!0,enable:!0},t.sortable={dirty:!1,sorted:void 0,renderOrder:0,dirtyChildren:[],dirtyReason:void 0},t.rBushNode={aabb:void 0},t.namespaceURI="g",t.scrollLeft=0,t.scrollTop=0,t.clientTop=0,t.clientLeft=0,t.style={},t.computedStyle={},t.parsedStyle={},t.attributes={},t}return P(e,t),B(e,[{key:"dirty",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1?arguments[1]:void 0;this.renderable.dirty=t,void 0!==e&&(this.renderable.boundsDirty=e,this.renderable.renderBoundsDirty=e,this.geometry.dirty=e)}},{key:"className",get:function(){return this.getAttribute("class")||""},set:function(t){this.setAttribute("class",t)}},{key:"classList",get:function(){return this.className.split(" ").filter(function(t){return""!==t})}},{key:"tagName",get:function(){return this.nodeName}},{key:"children",get:function(){return this.childNodes}},{key:"childElementCount",get:function(){return this.childNodes.length}},{key:"firstElementChild",get:function(){return this.firstChild}},{key:"lastElementChild",get:function(){return this.lastChild}},{key:"parentElement",get:function(){return this.parentNode}},{key:"nextSibling",get:function(){if(this.parentNode){var t=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[t+1]||null}return null}},{key:"previousSibling",get:function(){if(this.parentNode){var t=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[t-1]||null}return null}},{key:"cloneNode",value:function(t){throw new Error(fr)}},{key:"appendChild",value:function(t,e){var n;if(t.destroyed)throw new Error("Cannot append a destroyed element.");return yu.sceneGraphService.attach(t,this,e),null!==(n=this.ownerDocument)&&void 0!==n&&n.defaultView&&(Ra(this)||t.nodeName!==Jn.FRAGMENT?this.ownerDocument.defaultView.mountChildren(t):this.ownerDocument.defaultView.mountFragment(t)),this.isMutationObserved&&(xu.relatedNode=this,t.dispatchEvent(xu)),t}},{key:"insertBefore",value:function(t,e){if(e){t.parentElement&&t.parentElement.removeChild(t);var n=this.childNodes.indexOf(e);-1===n?this.appendChild(t):this.appendChild(t,n)}else this.appendChild(t);return t}},{key:"replaceChild",value:function(t,e){var n=this.childNodes.indexOf(e);return this.removeChild(e),this.appendChild(t,n),e}},{key:"removeChild",value:function(t){var e,n,r=!0===(null===(e=this.ownerDocument)||void 0===e||null===(e=e.defaultView)||void 0===e||null===(e=e.getConfig().future)||void 0===e?void 0:e.experimentalCancelEventPropagation);return Eu.relatedNode=this,t.dispatchEvent(Eu,r,r),null!==(n=t.ownerDocument)&&void 0!==n&&n.defaultView&&t.ownerDocument.defaultView.unmountChildren(t),yu.sceneGraphService.detach(t),t}},{key:"removeChildren",value:function(){for(var t=this.childNodes.length-1;t>=0;t--){var e=this.childNodes[t];this.removeChild(e)}}},{key:"destroyChildren",value:function(){for(var t=this.childNodes.length-1;t>=0;t--){var e=this.childNodes[t];e.childNodes.length>0&&e.destroyChildren(),e.destroy()}}},{key:"matches",value:function(t){return yu.sceneGraphService.matches(t,this)}},{key:"getElementById",value:function(t){return yu.sceneGraphService.querySelector("#".concat(t),this)}},{key:"getElementsByName",value:function(t){return yu.sceneGraphService.querySelectorAll('[name="'.concat(t,'"]'),this)}},{key:"getElementsByClassName",value:function(t){return yu.sceneGraphService.querySelectorAll(".".concat(t),this)}},{key:"getElementsByTagName",value:function(t){return yu.sceneGraphService.querySelectorAll(t,this)}},{key:"querySelector",value:function(t){return yu.sceneGraphService.querySelector(t,this)}},{key:"querySelectorAll",value:function(t){return yu.sceneGraphService.querySelectorAll(t,this)}},{key:"closest",value:function(t){var e=this;do{if(yu.sceneGraphService.matches(t,e))return e;e=e.parentElement}while(null!==e);return null}},{key:"find",value:function(t){var e=this,n=null;return this.forEach(function(r){return r===e||!t(r)||(n=r,!1)}),n}},{key:"findAll",value:function(t){var e=this,n=[];return this.forEach(function(r){r!==e&&t(r)&&n.push(r)}),n}},{key:"after",value:function(){var t=this;if(this.parentNode){for(var e=this.parentNode.childNodes.indexOf(this),n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];r.forEach(function(n,r){var i;return null===(i=t.parentNode)||void 0===i?void 0:i.appendChild(n,e+r+1)})}}},{key:"before",value:function(){if(this.parentNode){for(var t,e=this.parentNode.childNodes.indexOf(this),n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=r[0],a=d(r).slice(1);this.parentNode.appendChild(o,e),(t=o).after.apply(t,O(a))}}},{key:"replaceWith",value:function(){this.after.apply(this,arguments),this.remove()}},{key:"append",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach(function(e){return t.appendChild(e)})}},{key:"prepend",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach(function(e,n){return t.appendChild(e,n)})}},{key:"replaceChildren",value:function(){for(;this.childNodes.length&&this.firstChild;)this.removeChild(this.firstChild);this.append.apply(this,arguments)}},{key:"remove",value:function(){return this.parentNode?this.parentNode.removeChild(this):this}},{key:"destroy",value:function(){var t,e=!0===(null===(t=this.ownerDocument)||void 0===t||null===(t=t.defaultView)||void 0===t||null===(t=t.getConfig().future)||void 0===t?void 0:t.experimentalCancelEventPropagation);this.destroyChildren(),this.dispatchEvent(Bu,e,e),this.remove(),this.emitter.removeAllListeners(),this.destroyed=!0}},{key:"getGeometryBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return yu.sceneGraphService.getGeometryBounds(this,t)}},{key:"getTransformedGeometryBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return yu.sceneGraphService.getTransformedGeometryBounds(this,t)}},{key:"getBounds",value:function(){return yu.sceneGraphService.getBounds(this)}},{key:"getRenderBounds",value:function(){return yu.sceneGraphService.getBounds(this,!0)}},{key:"getLocalBounds",value:function(){return yu.sceneGraphService.getLocalBounds(this)}},{key:"getBoundingClientRect",value:function(){return yu.sceneGraphService.getBoundingClientRect(this)}},{key:"getClientRects",value:function(){return[this.getBoundingClientRect()]}},{key:"computedStyleMap",value:function(){return new Map(Object.entries(this.computedStyle))}},{key:"getAttributeNames",value:function(){return Object.keys(this.attributes)}},{key:"getAttribute",value:function(t){if("symbol"!=typeof t)return this.attributes[t]}},{key:"hasAttribute",value:function(t){return this.getAttributeNames().includes(t)}},{key:"hasAttributes",value:function(){return!!this.getAttributeNames().length}},{key:"removeAttribute",value:function(t){this.setAttribute(t,null),delete this.attributes[t]}},{key:"setAttribute",value:function(t,e){this.attributes[t]=e}},{key:"getAttributeNS",value:function(t,e){throw new Error(fr)}},{key:"getAttributeNode",value:function(t){throw new Error(fr)}},{key:"getAttributeNodeNS",value:function(t,e){throw new Error(fr)}},{key:"hasAttributeNS",value:function(t,e){throw new Error(fr)}},{key:"removeAttributeNS",value:function(t,e){throw new Error(fr)}},{key:"removeAttributeNode",value:function(t){throw new Error(fr)}},{key:"setAttributeNS",value:function(t,e,n){throw new Error(fr)}},{key:"setAttributeNode",value:function(t){throw new Error(fr)}},{key:"setAttributeNodeNS",value:function(t){throw new Error(fr)}},{key:"toggleAttribute",value:function(t,e){throw new Error(fr)}}])}(Ls);function Ou(t){return!(null==t||!t.nodeName)}var Cu=yu.globalThis.Proxy?yu.globalThis.Proxy:function(){},Mu=new zs(Hs.ATTR_MODIFIED,null,null,null,null,zs.MODIFICATION,null,null),Su=_(),Fu=ne(),Tu=function(t){function e(t){var n;return x(this,e),(n=F(this,e)).isCustomElement=!1,n.isMutationObserved=!1,n.activeAnimations=[],n.config=t,n.id=t.id||"",n.name=t.name||"",(t.className||t.class)&&(n.className=t.className||t.class),n.nodeName=t.type||Jn.GROUP,t.initialParsedStyle&&Object.assign(n.parsedStyle,t.initialParsedStyle),n.initAttributes(t.style),yu.enableStyleSyntax&&(n.style=new Cu({setProperty:function(t,e){n.setAttribute(t,e)},getPropertyValue:function(t){return n.getAttribute(t)},removeProperty:function(t){n.removeAttribute(t)},item:function(){return""}},{get:function(t,e){return void 0!==t[e]?t[e]:n.getAttribute(e)},set:function(t,e,r){return n.setAttribute(e,r),!0}})),n}return P(e,t),B(e,[{key:"destroy",value:function(){xn(e,"destroy",this,3)([]),this.getAnimations().forEach(function(t){t.cancel()})}},{key:"cloneNode",value:function(t,e){var n=w({},this.attributes);for(var r in n){var i=n[r];Ou(i)&&"clipPath"!==r&&"offsetPath"!==r&&"textPath"!==r&&(n[r]=i.cloneNode(t)),e&&(n[r]=e(r,i))}var o=new this.constructor(w(w({},this.config),{},{style:n}));return o.setLocalTransform(this.getLocalTransform()),t&&this.children.forEach(function(e){if(!e.style.isMarker){var n=e.cloneNode(t);o.appendChild(n)}}),o}},{key:"initAttributes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};yu.styleValueRegistry.processProperties(this,t,{forceUpdateGeometry:!0}),this.dirty()}},{key:"setAttribute",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];pn(n)||(r||n!==this.attributes[t])&&(this.internalSetAttribute(t,n,{memoize:i}),xn(e,"setAttribute",this,3)([t,n]))}},{key:"internalSetAttribute",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.attributes[t],i=this.parsedStyle[t];yu.styleValueRegistry.processProperties(this,m({},t,e),n),this.dirty();var o,a=this.parsedStyle[t];if(this.isConnected)if(Mu.relatedNode=this,Mu.prevValue=r,Mu.newValue=e,Mu.attrName=t,Mu.prevParsedValue=i,Mu.newParsedValue=a,this.isMutationObserved)this.dispatchEvent(Mu);else{var s,u=!0===(null===(s=this.ownerDocument.defaultView.getConfig().future)||void 0===s?void 0:s.experimentalCancelEventPropagation);Mu.target=this,this.ownerDocument.defaultView.dispatchEvent(Mu,!0,u)}(this.isCustomElement&&this.isConnected||!this.isCustomElement)&&(null===(o=this.attributeChangedCallback)||void 0===o||o.call(this,t,r,e,i,a))}},{key:"getBBox",value:function(){var t=this.getBounds(),e=v(t.getMin(),2),n=e[0],r=e[1],i=v(t.getMax(),2),o=i[0],a=i[1];return new Ar(n,r,o-n,a-r)}},{key:"setOrigin",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return yu.sceneGraphService.setOrigin(this,vr(t,e,n,!1)),this}},{key:"getOrigin",value:function(){return yu.sceneGraphService.getOrigin(this)}},{key:"setPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return yu.sceneGraphService.setPosition(this,vr(t,e,n,!1)),this}},{key:"setLocalPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return yu.sceneGraphService.setLocalPosition(this,vr(t,e,n,!1)),this}},{key:"translate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return yu.sceneGraphService.translate(this,vr(t,e,n,!1)),this}},{key:"translateLocal",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return yu.sceneGraphService.translateLocal(this,vr(t,e,n,!1)),this}},{key:"getPosition",value:function(){return yu.sceneGraphService.getPosition(this)}},{key:"getLocalPosition",value:function(){return yu.sceneGraphService.getLocalPosition(this)}},{key:"scale",value:function(t,e,n){return this.scaleLocal(t,e,n)}},{key:"scaleLocal",value:function(t,e,n){return"number"==typeof t&&(t=vr(t,e=e||t,n=n||t,!1)),yu.sceneGraphService.scaleLocal(this,t),this}},{key:"setLocalScale",value:function(t,e,n){return"number"==typeof t&&(t=vr(t,e=e||t,n=n||t,!1)),yu.sceneGraphService.setLocalScale(this,t),this}},{key:"getLocalScale",value:function(){return yu.sceneGraphService.getLocalScale(this)}},{key:"getScale",value:function(){return yu.sceneGraphService.getScale(this)}},{key:"getEulerAngles",value:function(){return br(v(xr(Su,yu.sceneGraphService.getWorldTransform(this)),3)[2])}},{key:"getLocalEulerAngles",value:function(){return br(v(xr(Su,yu.sceneGraphService.getLocalRotation(this)),3)[2])}},{key:"setEulerAngles",value:function(t){return yu.sceneGraphService.setEulerAngles(this,0,0,t),this}},{key:"setLocalEulerAngles",value:function(t){return yu.sceneGraphService.setLocalEulerAngles(this,0,0,t),this}},{key:"rotateLocal",value:function(t,e,n){return pe(e)&&pe(n)?yu.sceneGraphService.rotateLocal(this,0,0,t):yu.sceneGraphService.rotateLocal(this,t,e,n),this}},{key:"rotate",value:function(t,e,n){return pe(e)&&pe(n)?yu.sceneGraphService.rotate(this,0,0,t):yu.sceneGraphService.rotate(this,t,e,n),this}},{key:"setRotation",value:function(t,e,n,r){return yu.sceneGraphService.setRotation(this,t,e,n,r),this}},{key:"setLocalRotation",value:function(t,e,n,r){return yu.sceneGraphService.setLocalRotation(this,t,e,n,r),this}},{key:"setLocalSkew",value:function(t,e){return yu.sceneGraphService.setLocalSkew(this,t,e),this}},{key:"getRotation",value:function(){return yu.sceneGraphService.getRotation(this)}},{key:"getLocalRotation",value:function(){return yu.sceneGraphService.getLocalRotation(this)}},{key:"getLocalSkew",value:function(){return yu.sceneGraphService.getLocalSkew(this)}},{key:"getLocalTransform",value:function(){return yu.sceneGraphService.getLocalTransform(this)}},{key:"getWorldTransform",value:function(){return yu.sceneGraphService.getWorldTransform(this)}},{key:"setLocalTransform",value:function(t){return yu.sceneGraphService.setLocalTransform(this,t),this}},{key:"resetLocalTransform",value:function(){yu.sceneGraphService.resetLocalTransform(this)}},{key:"getAnimations",value:function(){return this.activeAnimations}},{key:"animate",value:function(t,e){var n,r=null===(n=this.ownerDocument)||void 0===n?void 0:n.timeline;return r?r.play(this,t,e):null}},{key:"isVisible",value:function(){var t;return"hidden"!==(null===(t=this.parsedStyle)||void 0===t?void 0:t.visibility)}},{key:"interactive",get:function(){return this.isInteractive()},set:function(t){this.style.pointerEvents=t?"auto":"none"}},{key:"isInteractive",value:function(){var t;return"none"!==(null===(t=this.parsedStyle)||void 0===t?void 0:t.pointerEvents)}},{key:"isCulled",value:function(){return!(!this.cullable||!this.cullable.enable||this.cullable.visible)}},{key:"toFront",value:function(){return this.parentNode&&(this.style.zIndex=Math.max.apply(Math,O(this.parentNode.children.map(function(t){return Number(t.style.zIndex)})))+1),this}},{key:"toBack",value:function(){return this.parentNode&&(this.style.zIndex=Math.min.apply(Math,O(this.parentNode.children.map(function(t){return Number(t.style.zIndex)})))-1),this}},{key:"getConfig",value:function(){return this.config}},{key:"attr",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],o=n[1];return i?bn(i)?(Object.keys(i).forEach(function(e){t.setAttribute(e,i[e])}),this):2===n.length?(this.setAttribute(i,o),this):this.attributes[i]:this.attributes}},{key:"getMatrix",value:function(t){var e=t||this.getWorldTransform(),n=v(Mt(Su,e),2),r=n[0],i=n[1],o=v(St(Su,e),2),a=o[0],s=o[1],u=Ft(Fu,e),c=v(xr(Su,u),3),l=c[0],A=c[2];return function(t,e,n,r,i){var o,a,s,u,c,l,A,f=Math.cos(t),d=Math.sin(t);return o=r*f,a=i*d,s=-r*d,u=i*f,c=e,l=n,(A=new L(9))[0]=o,A[1]=a,A[2]=0,A[3]=s,A[4]=u,A[5]=0,A[6]=c,A[7]=l,A[8]=1,A}(l||A,r,i,a,s)}},{key:"getLocalMatrix",value:function(){return this.getMatrix(this.getLocalTransform())}},{key:"setMatrix",value:function(t){var e=v(Er(t),5),n=e[0],r=e[1],i=e[2],o=e[3],a=e[4];this.setEulerAngles(a).setPosition(n,r).setLocalScale(i,o)}},{key:"setLocalMatrix",value:function(t){var e=v(Er(t),5),n=e[0],r=e[1],i=e[2],o=e[3],a=e[4];this.setLocalEulerAngles(a).setLocalPosition(n,r).setLocalScale(i,o)}},{key:"show",value:function(){this.forEach(function(t){t.style.visibility="visible"})}},{key:"hide",value:function(){this.forEach(function(t){t.style.visibility="hidden"})}},{key:"getCount",value:function(){return this.childElementCount}},{key:"getParent",value:function(){return this.parentElement}},{key:"getChildren",value:function(){return this.children}},{key:"getFirst",value:function(){return this.firstElementChild}},{key:"getLast",value:function(){return this.lastElementChild}},{key:"getChildByIndex",value:function(t){return this.children[t]||null}},{key:"add",value:function(t,e){return this.appendChild(t,e)}},{key:"set",value:function(t,e){this.config[t]=e}},{key:"get",value:function(t){return this.config[t]}},{key:"moveTo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.setPosition(t,e,n),this}},{key:"move",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.setPosition(t,e,n),this}},{key:"setZIndex",value:function(t){return this.style.zIndex=t,this}}])}(ku);Tu.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","display","draggable","droppable","fill","fillOpacity","fillRule","filter","increasedLineWidthForHitTesting","lineCap","lineDash","lineDashOffset","lineJoin","lineWidth","miterLimit","hitArea","offsetDistance","offsetPath","offsetX","offsetY","opacity","pointerEvents","shadowColor","shadowType","shadowBlur","shadowOffsetX","shadowOffsetY","stroke","strokeOpacity","strokeWidth","strokeLinecap","strokeLineJoin","strokeDasharray","strokeDashoffset","transform","transformOrigin","textTransform","visibility","zIndex"]);var Pu=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return x(this,e),F(this,e,[w({type:Jn.CIRCLE},t)])}return P(e,t),B(e)}(Tu);Pu.PARSED_STYLE_LIST=new Set([].concat(O(Tu.PARSED_STYLE_LIST),["cx","cy","cz","r","isBillboard","isSizeAttenuation"]));var Iu=["style"],Nu=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.style,i=Zn(n,Iu);return x(this,e),(t=F(this,e,[w({style:r},i)])).isCustomElement=!0,t}return P(e,t),B(e)}(Tu);Nu.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","draggable","droppable","opacity","pointerEvents","transform","transformOrigin","zIndex","visibility"]);var Lu=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return x(this,e),F(this,e,[w({type:Jn.ELLIPSE},t)])}return P(e,t),B(e)}(Tu);Lu.PARSED_STYLE_LIST=new Set([].concat(O(Tu.PARSED_STYLE_LIST),["cx","cy","cz","rx","ry","isBillboard","isSizeAttenuation"])),(function(t){function e(){return x(this,e),F(this,e,[{type:Jn.FRAGMENT}])}return P(e,t),B(e)}(Tu)).PARSED_STYLE_LIST=new Set(["class","className"]);var _u=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return x(this,e),F(this,e,[w({type:Jn.GROUP},t)])}return P(e,t),B(e)}(Tu);_u.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","draggable","droppable","opacity","pointerEvents","transform","transformOrigin","zIndex","visibility"]);var Qu=["style"],Uu=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.style,i=Zn(n,Qu);return x(this,e),(t=F(this,e,[w({type:Jn.HTML,style:r},i)])).cullable.enable=!1,t}return P(e,t),B(e,[{key:"getDomElement",value:function(){return this.parsedStyle.$el}},{key:"getClientRects",value:function(){return[this.getBoundingClientRect()]}},{key:"getLocalBounds",value:function(){if(this.parentNode){var t=lt(rt(),this.parentNode.getWorldTransform()),e=this.getBounds();if(!ar.isEmpty(e)){var n=new ar;return n.setFromTransformedAABB(e,t),n}}return this.getBounds()}}])}(Tu);Uu.PARSED_STYLE_LIST=new Set([].concat(O(Tu.PARSED_STYLE_LIST),["x","y","$el","innerHTML","width","height"]));var ju=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return x(this,e),F(this,e,[w({type:Jn.IMAGE},t)])}return P(e,t),B(e)}(Tu);ju.PARSED_STYLE_LIST=new Set([].concat(O(Tu.PARSED_STYLE_LIST),["x","y","z","src","width","height","isBillboard","billboardRotation","isSizeAttenuation","keepAspectRatio"]));var Du=["style"],Ru=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.style,i=Zn(n,Du);x(this,e),(t=F(this,e,[w({type:Jn.LINE,style:w({x1:0,y1:0,x2:0,y2:0,z1:0,z2:0},r)},i)])).markerStartAngle=0,t.markerEndAngle=0;var o=t.parsedStyle,a=o.markerStart,s=o.markerEnd;return a&&Ou(a)&&(t.markerStartAngle=a.getLocalEulerAngles(),t.appendChild(a)),s&&Ou(s)&&(t.markerEndAngle=s.getLocalEulerAngles(),t.appendChild(s)),t.transformMarker(!0),t.transformMarker(!1),t}return P(e,t),B(e,[{key:"attributeChangedCallback",value:function(t,e,n,r,i){"x1"===t||"y1"===t||"x2"===t||"y2"===t||"markerStartOffset"===t||"markerEndOffset"===t?(this.transformMarker(!0),this.transformMarker(!1)):"markerStart"===t?(r&&Ou(r)&&(this.markerStartAngle=0,r.remove()),i&&Ou(i)&&(this.markerStartAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!0))):"markerEnd"===t&&(r&&Ou(r)&&(this.markerEndAngle=0,r.remove()),i&&Ou(i)&&(this.markerEndAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!1)))}},{key:"transformMarker",value:function(t){var e,n,r,i,o,a,s,u=this.parsedStyle,c=u.markerStart,l=u.markerEnd,A=u.markerStartOffset,f=u.markerEndOffset,d=u.x1,h=u.x2,p=u.y1,v=u.y2,g=t?c:l;g&&Ou(g)&&(t?(i=d,o=p,n=h-d,r=v-p,a=A||0,s=this.markerStartAngle):(i=h,o=v,n=d-h,r=p-v,a=f||0,s=this.markerEndAngle),e=Math.atan2(r,n),g.setLocalEulerAngles(180*e/Math.PI+s),g.setLocalPosition(i+Math.cos(e)*a,o+Math.sin(e)*a))}},{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.parsedStyle,r=Fn(n.x1,n.y1,n.x2,n.y2,t),i=r.x,o=r.y,a=Y(_(),j(i,o,0),e?this.getWorldTransform():this.getLocalTransform());return new lr(a[0],a[1])}},{key:"getPointAtLength",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getPoint(t/this.getTotalLength(),e)}},{key:"getTotalLength",value:function(){var t=this.parsedStyle;return Sn(t.x1,t.y1,t.x2,t.y2)}}])}(Tu);Ru.PARSED_STYLE_LIST=new Set([].concat(O(Tu.PARSED_STYLE_LIST),["x1","y1","x2","y2","z1","z2","isBillboard","isSizeAttenuation","markerStart","markerEnd","markerStartOffset","markerEndOffset"]));var Hu=["style"],zu=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.style,i=Zn(n,Hu);x(this,e),(t=F(this,e,[w({type:Jn.PATH,style:r,initialParsedStyle:{miterLimit:4,d:w({},Hr)}},i)])).markerStartAngle=0,t.markerEndAngle=0,t.markerMidList=[];var o=t.parsedStyle,a=o.markerStart,s=o.markerEnd,u=o.markerMid;return a&&Ou(a)&&(t.markerStartAngle=a.getLocalEulerAngles(),t.appendChild(a)),u&&Ou(u)&&t.placeMarkerMid(u),s&&Ou(s)&&(t.markerEndAngle=s.getLocalEulerAngles(),t.appendChild(s)),t.transformMarker(!0),t.transformMarker(!1),t}return P(e,t),B(e,[{key:"attributeChangedCallback",value:function(t,e,n,r,i){"d"===t?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):"markerStartOffset"===t||"markerEndOffset"===t?(this.transformMarker(!0),this.transformMarker(!1)):"markerStart"===t?(r&&Ou(r)&&(this.markerStartAngle=0,r.remove()),i&&Ou(i)&&(this.markerStartAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!0))):"markerEnd"===t?(r&&Ou(r)&&(this.markerEndAngle=0,r.remove()),i&&Ou(i)&&(this.markerEndAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!1))):"markerMid"===t&&this.placeMarkerMid(i)}},{key:"transformMarker",value:function(t){var e=this.parsedStyle,n=e.markerStart,r=e.markerEnd,i=e.markerStartOffset,o=e.markerEndOffset,a=t?n:r;if(a&&Ou(a)){var s,u,c,l,A,f,d;if(t){var h=v(this.getStartTangent(),2),p=h[0],g=h[1];l=g[0],A=g[1],u=p[0]-g[0],c=p[1]-g[1],f=i||0,d=this.markerStartAngle}else{var y=v(this.getEndTangent(),2),m=y[0],b=y[1];l=b[0],A=b[1],u=m[0]-b[0],c=m[1]-b[1],f=o||0,d=this.markerEndAngle}s=Math.atan2(c,u),a.setLocalEulerAngles(180*s/Math.PI+d),a.setLocalPosition(l+Math.cos(s)*f,A+Math.sin(s)*f)}}},{key:"placeMarkerMid",value:function(t){var e=this.parsedStyle.d.segments;if(this.markerMidList.forEach(function(t){t.remove()}),t&&Ou(t))for(var n=1;n<e.length-1;n++){var r=v(e[n].currentPoint,2),i=r[0],o=r[1],a=1===n?t:t.cloneNode(!0);this.markerMidList.push(a),this.appendChild(a),a.setLocalPosition(i,o)}}},{key:"getTotalLength",value:function(){return Co(this)}},{key:"getPointAtLength",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=function(t,e){return $e(t,e,be(be({},void 0),{bbox:!1,length:!0})).point}(this.parsedStyle.d.absolutePath,t),r=n.x,i=n.y,o=Y(_(),j(r,i,0),e?this.getWorldTransform():this.getLocalTransform());return new lr(o[0],o[1])}},{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getPointAtLength(t*Co(this),e)}},{key:"getStartTangent",value:function(){var t=this.parsedStyle.d.segments,e=[];if(t.length>1){var n=t[0].currentPoint,r=t[1].currentPoint,i=t[1].startTangent;e=[],i?(e.push([n[0]-i[0],n[1]-i[1]]),e.push([n[0],n[1]])):(e.push([r[0],r[1]]),e.push([n[0],n[1]]))}return e}},{key:"getEndTangent",value:function(){var t=this.parsedStyle.d.segments,e=t.length,n=[];if(e>1){var r=t[e-2].currentPoint,i=t[e-1].currentPoint,o=t[e-1].endTangent;n=[],o?(n.push([i[0]-o[0],i[1]-o[1]]),n.push([i[0],i[1]])):(n.push([r[0],r[1]]),n.push([i[0],i[1]]))}return n}}])}(Tu);zu.PARSED_STYLE_LIST=new Set([].concat(O(Tu.PARSED_STYLE_LIST),["d","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isBillboard","isSizeAttenuation"]));var Ku=["style"],Gu=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.style,i=Zn(n,Ku);x(this,e),(t=F(this,e,[w({type:Jn.POLYGON,style:r,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!0}},i)])).markerStartAngle=0,t.markerEndAngle=0,t.markerMidList=[];var o=t.parsedStyle,a=o.markerStart,s=o.markerEnd,u=o.markerMid;return a&&Ou(a)&&(t.markerStartAngle=a.getLocalEulerAngles(),t.appendChild(a)),u&&Ou(u)&&t.placeMarkerMid(u),s&&Ou(s)&&(t.markerEndAngle=s.getLocalEulerAngles(),t.appendChild(s)),t.transformMarker(!0),t.transformMarker(!1),t}return P(e,t),B(e,[{key:"attributeChangedCallback",value:function(t,e,n,r,i){"points"===t?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):"markerStartOffset"===t||"markerEndOffset"===t?(this.transformMarker(!0),this.transformMarker(!1)):"markerStart"===t?(r&&Ou(r)&&(this.markerStartAngle=0,r.remove()),i&&Ou(i)&&(this.markerStartAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!0))):"markerEnd"===t?(r&&Ou(r)&&(this.markerEndAngle=0,r.remove()),i&&Ou(i)&&(this.markerEndAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!1))):"markerMid"===t&&this.placeMarkerMid(i)}},{key:"transformMarker",value:function(t){var e=this.parsedStyle,n=e.markerStart,r=e.markerEnd,i=e.markerStartOffset,o=e.markerEndOffset,a=(e.points||{}).points,s=t?n:r;if(s&&Ou(s)&&a){var u,c,l,A,f,d,h;if(A=a[0][0],f=a[0][1],t)c=a[1][0]-a[0][0],l=a[1][1]-a[0][1],d=i||0,h=this.markerStartAngle;else{var p=a.length;this.parsedStyle.isClosed?(c=a[p-1][0]-a[0][0],l=a[p-1][1]-a[0][1]):(A=a[p-1][0],f=a[p-1][1],c=a[p-2][0]-a[p-1][0],l=a[p-2][1]-a[p-1][1]),d=o||0,h=this.markerEndAngle}u=Math.atan2(l,c),s.setLocalEulerAngles(180*u/Math.PI+h),s.setLocalPosition(A+Math.cos(u)*d,f+Math.sin(u)*d)}}},{key:"placeMarkerMid",value:function(t){var e=(this.parsedStyle.points||{}).points;if(this.markerMidList.forEach(function(t){t.remove()}),this.markerMidList=[],t&&Ou(t)&&e)for(var n=1;n<(this.parsedStyle.isClosed?e.length:e.length-1);n++){var r=e[n][0],i=e[n][1],o=1===n?t:t.cloneNode(!0);this.markerMidList.push(o),this.appendChild(o),o.setLocalPosition(r,i)}}}])}(Tu);Gu.PARSED_STYLE_LIST=new Set([].concat(O(Tu.PARSED_STYLE_LIST),["points","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isClosed","isBillboard","isSizeAttenuation"]));var Vu=["style"],Wu=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.style,r=Zn(t,Vu);return x(this,e),F(this,e,[w({type:Jn.POLYLINE,style:n,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!1}},r)])}return P(e,t),B(e,[{key:"getTotalLength",value:function(){return Mo(this)}},{key:"getPointAtLength",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getPoint(t/this.getTotalLength(),e)}},{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.parsedStyle.points.points;if(0===this.parsedStyle.points.segments.length){var r,i,o=[],a=0,s=this.getTotalLength();n.forEach(function(t,e){n[e+1]&&((r=[0,0])[0]=a/s,i=Sn(t[0],t[1],n[e+1][0],n[e+1][1]),a+=i,r[1]=a/s,o.push(r))}),this.parsedStyle.points.segments=o}var u=0,c=0;this.parsedStyle.points.segments.forEach(function(e,n){t>=e[0]&&t<=e[1]&&(u=(t-e[0])/(e[1]-e[0]),c=n)});var l=Fn(n[c][0],n[c][1],n[c+1][0],n[c+1][1],u),A=l.x,f=l.y,d=Y(_(),j(A,f,0),e?this.getWorldTransform():this.getLocalTransform());return new lr(d[0],d[1])}},{key:"getStartTangent",value:function(){var t=this.parsedStyle.points.points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e}},{key:"getEndTangent",value:function(){var t=this.parsedStyle.points.points,e=t.length-1,n=[];return n.push([t[e-1][0],t[e-1][1]]),n.push([t[e][0],t[e][1]]),n}}])}(Gu);Wu.PARSED_STYLE_LIST=new Set([].concat(O(Gu.PARSED_STYLE_LIST),["points","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isBillboard"]));var Yu=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return x(this,e),F(this,e,[w({type:Jn.RECT},t)])}return P(e,t),B(e)}(Tu);Yu.PARSED_STYLE_LIST=new Set([].concat(O(Tu.PARSED_STYLE_LIST),["x","y","z","width","height","isBillboard","isSizeAttenuation","radius"]));var Xu=["style"],qu=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.style,r=Zn(t,Xu);return x(this,e),F(this,e,[w({type:Jn.TEXT,style:w({fill:"black"},n)},r)])}return P(e,t),B(e,[{key:"getComputedTextLength",value:function(){var t;return this.getGeometryBounds(),(null===(t=this.parsedStyle.metrics)||void 0===t?void 0:t.maxLineWidth)||0}},{key:"getLineBoundingRects",value:function(){var t;return this.getGeometryBounds(),(null===(t=this.parsedStyle.metrics)||void 0===t?void 0:t.lineMetrics)||[]}},{key:"isOverflowing",value:function(){return this.getGeometryBounds(),!!this.parsedStyle.isOverflowing}}])}(Tu);qu.PARSED_STYLE_LIST=new Set([].concat(O(Tu.PARSED_STYLE_LIST),["x","y","z","isBillboard","billboardRotation","isSizeAttenuation","text","textAlign","textBaseline","fontStyle","fontSize","fontFamily","fontWeight","fontVariant","lineHeight","letterSpacing","leading","wordWrap","wordWrapWidth","maxLines","textOverflow","isOverflowing","textPath","textDecorationLine","textDecorationColor","textDecorationStyle","textDecorationThickness","textPathSide","textPathStartOffset","metrics","dx","dy"]));var Zu=function(){return B(function t(){x(this,t),this.registry={},this.define(Jn.CIRCLE,Pu),this.define(Jn.ELLIPSE,Lu),this.define(Jn.RECT,Yu),this.define(Jn.IMAGE,ju),this.define(Jn.LINE,Ru),this.define(Jn.GROUP,_u),this.define(Jn.PATH,zu),this.define(Jn.POLYGON,Gu),this.define(Jn.POLYLINE,Wu),this.define(Jn.TEXT,qu),this.define(Jn.HTML,Uu)},[{key:"define",value:function(t,e){this.registry[t]=e}},{key:"get",value:function(t){return this.registry[t]}}])}(),Ju=function(t){var e=t.name,n=t.inherits,r=t.interpolable,i=t.initialValue,o=t.syntax;yu.styleValueRegistry.registerMetadata({n:e,inh:n,int:r,d:i,syntax:o})},$u=function(t){function e(){var t;x(this,e),(t=F(this,e)).defaultView=null,t.ownerDocument=null,t.nodeName="document";try{t.timeline=new yu.AnimationTimeline(t)}catch(t){}var n={};return Aa.forEach(function(t){var e=t.n,r=t.inh,i=t.d;r&&i&&(n[e]=mn(i)?i(Jn.GROUP):i)}),t.documentElement=new _u({id:"g-root",style:n}),t.documentElement.ownerDocument=t,t.documentElement.parentNode=t,t.childNodes=[t.documentElement],t}return P(e,t),B(e,[{key:"children",get:function(){return this.childNodes}},{key:"childElementCount",get:function(){return this.childNodes.length}},{key:"firstElementChild",get:function(){return this.firstChild}},{key:"lastElementChild",get:function(){return this.lastChild}},{key:"createElement",value:function(t,e){if("svg"===t)return this.documentElement;var n=this.defaultView.customElements.get(t);n||(console.warn("Unsupported tagName: ",t),n="tspan"===t?qu:_u);var r=new n(e);return r.ownerDocument=this,r}},{key:"createElementNS",value:function(t,e,n){return this.createElement(e,n)}},{key:"cloneNode",value:function(t){throw new Error(fr)}},{key:"destroy",value:function(){try{this.documentElement.destroyChildren(),this.timeline.destroy()}catch(t){}}},{key:"elementsFromBBox",value:function(t,e,n,r){var i=[],o=function(a){if(a.isInteractive()&&!a.isCulled()){var s=a.parsedStyle.pointerEvents;if(!["auto","visiblepainted","visiblefill","visiblestroke","visible"].includes(void 0===s?"auto":s)||a.isVisible()){var u=a.getTransformedGeometryBounds(!0);u&&!ar.isEmpty(u)&&u.max[0]>=t&&u.min[0]<=n&&u.max[1]>=e&&u.min[1]<=r&&i.push(a)}a.childNodes&&a.childNodes.forEach(function(t){t instanceof Tu&&o(t)})}};return o(this.documentElement),i.sort(function(t,e){return e.sortable.renderOrder-t.sortable.renderOrder}),i}},{key:"elementFromPointSync",value:function(t,e){var n=this.defaultView.canvas2Viewport({x:t,y:e}),r=n.x,i=n.y,o=this.defaultView.getConfig(),a=o.width,s=o.height;if(r<0||i<0||r>a||i>s)return null;var u=this.defaultView.viewport2Client({x:r,y:i}),c=u.x,l=u.y,A=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!0,position:{x:t,y:e,viewportX:r,viewportY:i,clientX:c,clientY:l},picked:[]}).picked;return A&&A[0]||this.documentElement}},{key:"elementFromPoint",value:(r=Xn(Wn().mark(function t(e,n){var r,i,o,a,s,u,c,l,A,f,d;return Wn().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.defaultView.canvas2Viewport({x:e,y:n}),i=r.x,o=r.y,a=this.defaultView.getConfig(),s=a.width,u=a.height,!(i<0||o<0||i>s||o>u)){t.next=1;break}return t.abrupt("return",null);case 1:return c=this.defaultView.viewport2Client({x:i,y:o}),l=c.x,A=c.y,t.next=2,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!0,position:{x:e,y:n,viewportX:i,viewportY:o,clientX:l,clientY:A},picked:[]});case 2:return f=t.sent,d=f.picked,t.abrupt("return",d&&d[0]||this.documentElement);case 3:case"end":return t.stop()}},t,this)})),function(t,e){return r.apply(this,arguments)})},{key:"elementsFromPointSync",value:function(t,e){var n=this.defaultView.canvas2Viewport({x:t,y:e}),r=n.x,i=n.y,o=this.defaultView.getConfig(),a=o.width,s=o.height;if(r<0||i<0||r>a||i>s)return[];var u=this.defaultView.viewport2Client({x:r,y:i}),c=u.x,l=u.y,A=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!1,position:{x:t,y:e,viewportX:r,viewportY:i,clientX:c,clientY:l},picked:[]}).picked;return A[A.length-1]!==this.documentElement&&A.push(this.documentElement),A}},{key:"elementsFromPoint",value:(n=Xn(Wn().mark(function t(e,n){var r,i,o,a,s,u,c,l,A,f,d;return Wn().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.defaultView.canvas2Viewport({x:e,y:n}),i=r.x,o=r.y,a=this.defaultView.getConfig(),s=a.width,u=a.height,!(i<0||o<0||i>s||o>u)){t.next=1;break}return t.abrupt("return",[]);case 1:return c=this.defaultView.viewport2Client({x:i,y:o}),l=c.x,A=c.y,t.next=2,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!1,position:{x:e,y:n,viewportX:i,viewportY:o,clientX:l,clientY:A},picked:[]});case 2:return f=t.sent,(d=f.picked)[d.length-1]!==this.documentElement&&d.push(this.documentElement),t.abrupt("return",d);case 3:case"end":return t.stop()}},t,this)})),function(t,e){return n.apply(this,arguments)})},{key:"appendChild",value:function(t,e){throw new Error(dr)}},{key:"insertBefore",value:function(t,e){throw new Error(dr)}},{key:"removeChild",value:function(t,e){throw new Error(dr)}},{key:"replaceChild",value:function(t,e,n){throw new Error(dr)}},{key:"append",value:function(){throw new Error(dr)}},{key:"prepend",value:function(){throw new Error(dr)}},{key:"getElementById",value:function(t){return this.documentElement.getElementById(t)}},{key:"getElementsByName",value:function(t){return this.documentElement.getElementsByName(t)}},{key:"getElementsByTagName",value:function(t){return this.documentElement.getElementsByTagName(t)}},{key:"getElementsByClassName",value:function(t){return this.documentElement.getElementsByClassName(t)}},{key:"querySelector",value:function(t){return this.documentElement.querySelector(t)}},{key:"querySelectorAll",value:function(t){return this.documentElement.querySelectorAll(t)}},{key:"find",value:function(t){return this.documentElement.find(t)}},{key:"findAll",value:function(t){return this.documentElement.findAll(t)}}]);var n,r}(Ls),tc=function(){function t(e){x(this,t),this.strategies=e}return B(t,[{key:"apply",value:function(e){var n=e.config,r=e.camera,i=e.renderingService,o=e.renderingContext,a=this.strategies;i.hooks.cull.tap(t.tag,function(t){if(t){var e,i=t.cullable;if(0===a.length?i.visible=o.unculledEntities.indexOf(t.entity)>-1:i.visible=a.every(function(e){return e.isVisible(r,t)}),!t.isCulled()&&t.isVisible())return t;var s=!0===(null===(e=n.future)||void 0===e?void 0:e.experimentalCancelEventPropagation);return t.dispatchEvent(new Is(Hs.CULLED),s,s),null}return t}),i.hooks.afterRender.tap(t.tag,function(t){t.cullable.visibilityPlaneMask=-1})}}])}();tc.tag="Culling";var ec=function(){function t(){var e=this;x(this,t),this.autoPreventDefault=!1,this.rootPointerEvent=new Ts(null),this.rootWheelEvent=new Ps(null),this.onPointerMove=function(t){var n,r=null===(n=e.context.renderingContext.root)||void 0===n||null===(n=n.ownerDocument)||void 0===n?void 0:n.defaultView;if(!r.supportsTouchEvents||"touch"!==t.pointerType){var i,o=qn(e.normalizeToPointerEvent(t,r));try{for(o.s();!(i=o.n()).done;){var a=i.value,s=e.bootstrapEvent(e.rootPointerEvent,a,r,t);e.context.eventService.mapEvent(s)}}catch(t){o.e(t)}finally{o.f()}e.setCursor(e.context.eventService.cursor)}},this.onClick=function(t){var n,r,i=null===(n=e.context.renderingContext.root)||void 0===n||null===(n=n.ownerDocument)||void 0===n?void 0:n.defaultView,o=qn(e.normalizeToPointerEvent(t,i));try{for(o.s();!(r=o.n()).done;){var a=r.value,s=e.bootstrapEvent(e.rootPointerEvent,a,i,t);e.context.eventService.mapEvent(s)}}catch(t){o.e(t)}finally{o.f()}e.setCursor(e.context.eventService.cursor)}}return B(t,[{key:"apply",value:function(e){var n=this;this.context=e;var r=e.renderingService,i=this.context.renderingContext.root.ownerDocument.defaultView;this.context.eventService.setPickHandler(function(t){return n.context.renderingService.hooks.pickSync.call({position:t,picked:[],topmost:!0}).picked[0]||null}),r.hooks.pointerWheel.tap(t.tag,function(t){var e=n.normalizeWheelEvent(t);n.context.eventService.mapEvent(e)}),r.hooks.pointerDown.tap(t.tag,function(t){if(!i.supportsTouchEvents||"touch"!==t.pointerType){var e=n.normalizeToPointerEvent(t,i);n.autoPreventDefault&&e[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();var r,o=qn(e);try{for(o.s();!(r=o.n()).done;){var a=r.value,s=n.bootstrapEvent(n.rootPointerEvent,a,i,t);n.context.eventService.mapEvent(s)}}catch(t){o.e(t)}finally{o.f()}n.setCursor(n.context.eventService.cursor)}}),r.hooks.pointerUp.tap(t.tag,function(t){if(!i.supportsTouchEvents||"touch"!==t.pointerType){var e,r=n.context.contextService.getDomElement(),o=n.context.eventService.isNativeEventFromCanvas(r,t)?"":"outside",a=qn(n.normalizeToPointerEvent(t,i));try{for(a.s();!(e=a.n()).done;){var s=e.value,u=n.bootstrapEvent(n.rootPointerEvent,s,i,t);u.type+=o,n.context.eventService.mapEvent(u)}}catch(t){a.e(t)}finally{a.f()}n.setCursor(n.context.eventService.cursor)}}),r.hooks.pointerMove.tap(t.tag,this.onPointerMove),r.hooks.pointerOver.tap(t.tag,this.onPointerMove),r.hooks.pointerOut.tap(t.tag,this.onPointerMove),r.hooks.click.tap(t.tag,this.onClick),r.hooks.pointerCancel.tap(t.tag,function(t){var e,r=qn(n.normalizeToPointerEvent(t,i));try{for(r.s();!(e=r.n()).done;){var o=e.value,a=n.bootstrapEvent(n.rootPointerEvent,o,i,t);n.context.eventService.mapEvent(a)}}catch(t){r.e(t)}finally{r.f()}n.setCursor(n.context.eventService.cursor)})}},{key:"bootstrapEvent",value:function(t,e,n,r){t.view=n,t.originalEvent=null,t.nativeEvent=r,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e);var i=this.context.eventService.client2Viewport({x:e.clientX,y:e.clientY}),o=i.x,a=i.y;t.viewport.x=o,t.viewport.y=a;var s=this.context.eventService.viewport2Canvas(t.viewport),u=s.x,c=s.y;return t.canvas.x=u,t.canvas.y=c,t.global.copyFrom(t.canvas),t.offset.copyFrom(t.canvas),t.isTrusted=r.isTrusted,"pointerleave"===t.type&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=ja[t.type]||t.type),t}},{key:"normalizeWheelEvent",value:function(t){var e=this.rootWheelEvent;this.transferMouseData(e,t),e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ;var n=this.context.eventService.client2Viewport({x:t.clientX,y:t.clientY}),r=n.x,i=n.y;e.viewport.x=r,e.viewport.y=i;var o=this.context.eventService.viewport2Canvas(e.viewport),a=o.x,s=o.y;return e.canvas.x=a,e.canvas.y=s,e.global.copyFrom(e.canvas),e.offset.copyFrom(e.canvas),e.nativeEvent=t,e.type=t.type,e}},{key:"transferMouseData",value:function(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=Da.now(),t.type=e.type,t.altKey=e.altKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.ctrlKey=e.ctrlKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.screen.x=e.screenX,t.screen.y=e.screenY,t.relatedTarget=null}},{key:"setCursor",value:function(t){this.context.contextService.applyCursorStyle(t||this.context.config.cursor||"default")}},{key:"normalizeToPointerEvent",value:function(t,e){var n=[];if(e.isTouchEvent(t))for(var r=0;r<t.changedTouches.length;r++){var i=t.changedTouches[r];pn(i.button)&&(i.button=0),pn(i.buttons)&&(i.buttons=1),pn(i.isPrimary)&&(i.isPrimary=1===t.touches.length&&"touchstart"===t.type),pn(i.width)&&(i.width=i.radiusX||1),pn(i.height)&&(i.height=i.radiusY||1),pn(i.tiltX)&&(i.tiltX=0),pn(i.tiltY)&&(i.tiltY=0),pn(i.pointerType)&&(i.pointerType="touch"),pn(i.pointerId)&&(i.pointerId=i.identifier||0),pn(i.pressure)&&(i.pressure=i.force||.5),pn(i.twist)&&(i.twist=0),pn(i.tangentialPressure)&&(i.tangentialPressure=0),i.isNormalized=!0,i.type=t.type,n.push(i)}else if(e.isMouseEvent(t)){var o=t;pn(o.isPrimary)&&(o.isPrimary=!0),pn(o.width)&&(o.width=1),pn(o.height)&&(o.height=1),pn(o.tiltX)&&(o.tiltX=0),pn(o.tiltY)&&(o.tiltY=0),pn(o.pointerType)&&(o.pointerType="mouse"),pn(o.pointerId)&&(o.pointerId=1),pn(o.pressure)&&(o.pressure=.5),pn(o.twist)&&(o.twist=0),pn(o.tangentialPressure)&&(o.tangentialPressure=0),o.isNormalized=!0,n.push(o)}else n.push(t);return n}}])}();ec.tag="Event";var nc=[Jn.CIRCLE,Jn.ELLIPSE,Jn.IMAGE,Jn.RECT,Jn.LINE,Jn.POLYLINE,Jn.POLYGON,Jn.TEXT,Jn.PATH,Jn.HTML],rc=function(){return B(function t(){x(this,t)},[{key:"isVisible",value:function(t,e){var n,r=e.cullable;if(!r.enable)return!0;var i=e.getRenderBounds();if(ar.isEmpty(i))return!1;var o=t.getFrustum(),a=null===(n=e.parentNode)||void 0===n||null===(n=n.cullable)||void 0===n?void 0:n.visibilityPlaneMask;return r.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(e,i,a||ur.INDETERMINATE,o.planes),r.visible=r.visibilityPlaneMask!==ur.OUTSIDE,r.visible}},{key:"computeVisibilityWithPlaneMask",value:function(t,e,n,r){if(n===ur.OUTSIDE||n===ur.INSIDE)return n;for(var i=ur.INSIDE,o=nc.indexOf(t.nodeName)>-1,a=0,s=r.length;a<s;++a){var u=1<<a;if(0!==(n&u)&&(!o||4!==a&&5!==a)){var c=r[a],l=c.normal,A=c.distance;if(V(l,e.getPositiveFarPoint(r[a]))+A<0)return ur.OUTSIDE;V(l,e.getNegativeFarPoint(r[a]))+A<0&&(i|=u)}}return i}}])}(),ic=function(){function t(){x(this,t),this.mutationRecords=[],this.isFirstTimeRendering=!0,this.isFirstTimeRenderingFinished=!1}return B(t,[{key:"apply",value:function(e){var n,r=this,i=e.renderingService,o=e.renderingContext.root.ownerDocument.defaultView,a=function(t){i.dirty()},s=function(t){var e,n=t.detail;(e=r.mutationRecords).push.apply(e,O(n)),i.dirty()},u=function(t){var e=t.target;yu.enableSizeAttenuation&&yu.styleValueRegistry.updateSizeAttenuation(e,o.getCamera().getZoom())},c=function(t){var e=t.target;yu.sceneGraphService.dirtyToRoot(e),i.dirty()};i.hooks.init.tap(t.tag,function(){o.addEventListener(Hs.MOUNTED,u),o.addEventListener(Hs.UNMOUNTED,c),o.addEventListener(Hs.ATTR_MODIFIED,a),o.addEventListener(Hs.BOUNDS_CHANGED,s)}),i.hooks.destroy.tap(t.tag,function(){o.removeEventListener(Hs.MOUNTED,u),o.removeEventListener(Hs.UNMOUNTED,c),o.removeEventListener(Hs.ATTR_MODIFIED,a),o.removeEventListener(Hs.BOUNDS_CHANGED,s),r.mutationRecords=[]});var l=null!==(n=yu.globalThis.requestIdleCallback)&&void 0!==n?n:Ja.bind(yu.globalThis);i.hooks.endFrame.tap(t.tag,function(){r.isFirstTimeRendering&&(r.isFirstTimeRendering=!1,l(function(){r.isFirstTimeRenderingFinished=!0})),r.mutationRecords=[]})}}])}();ic.tag="Prepare";var oc=function(t){return t.READY="ready",t.BEFORE_RENDER="beforerender",t.RERENDER="rerender",t.AFTER_RENDER="afterrender",t.BEFORE_DESTROY="beforedestroy",t.AFTER_DESTROY="afterdestroy",t.RESIZE="resize",t.DIRTY_RECTANGLE="dirtyrectangle",t.RENDERER_CHANGED="rendererchanged",t}({}),ac=new Is(Hs.MOUNTED),sc=new Is(Hs.UNMOUNTED),uc=new Is(oc.BEFORE_RENDER),cc=new Is(oc.RERENDER),lc=new Is(oc.AFTER_RENDER),Ac=function(t){function e(t){var n;x(this,e),(n=F(this,e)).Element=Tu,n.inited=!1,n.context={};var r=t.container,i=t.canvas,o=t.renderer,a=t.width,s=t.height,u=t.background,c=t.cursor,l=t.supportsMutipleCanvasesInOneContainer,A=t.cleanUpOnDestroy,f=void 0===A||A,d=t.offscreenCanvas,h=t.devicePixelRatio,p=t.requestAnimationFrame,v=t.cancelAnimationFrame,g=t.createImage,y=t.supportsTouchEvents,m=t.supportsPointerEvents,b=t.isTouchEvent,E=t.isMouseEvent,B=t.dblClickSpeed,k=a,O=s,C=h||Na&&window.devicePixelRatio||1;return C=C>=1?Math.ceil(C):1,i&&(k=a||function(t){var e=Ua(t,"width");return"auto"===e?t.offsetWidth:parseFloat(e)}(i)||i.width/C,O=s||function(t){var e=Ua(t,"height");return"auto"===e?t.offsetHeight:parseFloat(e)}(i)||i.height/C),n.customElements=new Zu,n.devicePixelRatio=C,n.requestAnimationFrame=null!=p?p:Ja.bind(yu.globalThis),n.cancelAnimationFrame=null!=v?v:$a.bind(yu.globalThis),n.createImage=null!=g?g:function(){return new window.Image},n.supportsTouchEvents=null!=y?y:"ontouchstart"in yu.globalThis,n.supportsPointerEvents=null!=m?m:!!yu.globalThis.PointerEvent,n.isTouchEvent=null!=b?b:function(t){return n.supportsTouchEvents&&t instanceof yu.globalThis.TouchEvent},n.isMouseEvent=null!=E?E:function(t){return!yu.globalThis.MouseEvent||t instanceof yu.globalThis.MouseEvent&&(!n.supportsPointerEvents||!(t instanceof yu.globalThis.PointerEvent))},d&&(yu.offscreenCanvas=d),n.document=new $u,n.document.defaultView=n,l||function(t,e,n){if(t){var r="string"==typeof t?document.getElementById(t):t;Ia.has(r)&&Ia.get(r).destroy(n),Ia.set(r,e)}}(r,n,f),n.initRenderingContext(w(w({},t),{},{width:k,height:O,background:null!=u?u:"transparent",cursor:null!=c?c:"default",cleanUpOnDestroy:f,devicePixelRatio:C,requestAnimationFrame:n.requestAnimationFrame,cancelAnimationFrame:n.cancelAnimationFrame,createImage:n.createImage,supportsTouchEvents:n.supportsTouchEvents,supportsPointerEvents:n.supportsPointerEvents,isTouchEvent:n.isTouchEvent,isMouseEvent:n.isMouseEvent,dblClickSpeed:null!=B?B:200})),n.initDefaultCamera(k,O,o.clipSpaceNearZ),n.initRenderer(o,!0),n}return P(e,t),B(e,[{key:"initRenderingContext",value:function(t){this.context.config=t,this.context.renderingContext={root:this.document.documentElement,unculledEntities:[],renderListCurrentFrame:[],renderReasons:new Set,force:!1,dirty:!1}}},{key:"initDefaultCamera",value:function(t,e,n){var r=this,i=new yu.CameraContribution;i.clipSpaceNearZ=n,i.setType(Fr.EXPLORING,Tr.DEFAULT).setPosition(t/2,e/2,500).setFocalPoint(t/2,e/2,0).setOrthographic(t/-2,t/2,e/2,e/-2,.1,1e3),i.canvas=this,i.eventEmitter.on(Ir,function(){r.context.renderingContext.renderReasons.add(Us.CAMERA_CHANGED),yu.enableSizeAttenuation&&r.getConfig().renderer.getConfig().enableSizeAttenuation&&r.updateSizeAttenuation()}),this.context.camera=i}},{key:"updateSizeAttenuation",value:function(){var t=this.getCamera().getZoom();this.document.documentElement.forEach(function(e){yu.styleValueRegistry.updateSizeAttenuation(e,t)})}},{key:"getConfig",value:function(){return this.context.config}},{key:"getRoot",value:function(){return this.document.documentElement}},{key:"getCamera",value:function(){return this.context.camera}},{key:"getContextService",value:function(){return this.context.contextService}},{key:"getEventService",value:function(){return this.context.eventService}},{key:"getRenderingService",value:function(){return this.context.renderingService}},{key:"getRenderingContext",value:function(){return this.context.renderingContext}},{key:"getStats",value:function(){return this.getRenderingService().getStats()}},{key:"ready",get:function(){var t=this;return this.readyPromise||(this.readyPromise=new Promise(function(e){t.resolveReadyPromise=function(){e(t)}}),this.inited&&this.resolveReadyPromise()),this.readyPromise}},{key:"destroy",value:function(){var t,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1?arguments[1]:void 0;Ei.clearCache();var r=!0===(null===(t=this.getConfig().future)||void 0===t?void 0:t.experimentalCancelEventPropagation);n||this.dispatchEvent(new Is(oc.BEFORE_DESTROY),r,r),this.frameId&&this.cancelAnimationFrame(this.frameId);var i=this.getRoot();e&&(this.unmountChildren(i),this.document.destroy(),this.getEventService().destroy()),this.getRenderingService().destroy(),this.getContextService().destroy(),n||this.dispatchEvent(new Is(oc.AFTER_DESTROY),r,r);var o=function(t){t.currentTarget=null,t.manager=null,t.target=null,t.relatedNode=null};o(ac),o(sc),o(uc),o(cc),o(lc),o(Mu),o(xu),o(Eu),o(Bu),yu.textService.clearCache()}},{key:"changeSize",value:function(t,e){this.resize(t,e)}},{key:"resize",value:function(t,e){var n,r=this.context.config;r.width=t,r.height=e,this.getContextService().resize(t,e);var i=this.context.camera,o=i.getProjectionMode();i.setPosition(t/2,e/2,500).setFocalPoint(t/2,e/2,0),o===Pr.ORTHOGRAPHIC?i.setOrthographic(t/-2,t/2,e/2,e/-2,i.getNear(),i.getFar()):i.setAspect(t/e);var a=!0===(null===(n=r.future)||void 0===n?void 0:n.experimentalCancelEventPropagation);this.dispatchEvent(new Is(oc.RESIZE,{width:t,height:e}),a,a)}},{key:"appendChild",value:function(t,e){return this.document.documentElement.appendChild(t,e)}},{key:"insertBefore",value:function(t,e){return this.document.documentElement.insertBefore(t,e)}},{key:"removeChild",value:function(t){return this.document.documentElement.removeChild(t)}},{key:"removeChildren",value:function(){this.document.documentElement.removeChildren()}},{key:"destroyChildren",value:function(){this.document.documentElement.destroyChildren()}},{key:"render",value:function(t){var e,n=this;t&&(uc.detail=t,lc.detail=t);var r=!0===(null===(e=this.getConfig().future)||void 0===e?void 0:e.experimentalCancelEventPropagation);this.dispatchEvent(uc,r,r),this.getRenderingService().render(this,t,function(){n.dispatchEvent(cc,r,r)}),this.dispatchEvent(lc,r,r)}},{key:"run",value:function(){var t=this,e=function(n,r){t.render(r),t.frameId=t.requestAnimationFrame(e)};e()}},{key:"initRenderer",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t)throw new Error("Renderer is required.");this.inited=!1,this.readyPromise=void 0,this.context.renderingPlugins=[],this.context.renderingPlugins.push(new ec,new ic,new tc([new rc])),this.loadRendererContainerModule(t),this.context.contextService=new this.context.ContextService(w(w({},yu),this.context)),this.context.renderingService=new js(yu,this.context),this.context.eventService=new _s(yu,this.context),this.context.eventService.init(),this.context.contextService.init?(this.context.contextService.init(),this.initRenderingService(t,n,!0)):this.context.contextService.initAsync().then(function(){e.initRenderingService(t,n)}).catch(function(t){console.error(t)})}},{key:"initRenderingService",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.context.renderingService.init(function(){var i;e.inited=!0;var o=!0===(null===(i=e.getConfig().future)||void 0===i?void 0:i.experimentalCancelEventPropagation);n?r?e.requestAnimationFrame(function(){e.dispatchEvent(new Is(oc.READY),o,o)}):e.dispatchEvent(new Is(oc.READY),o,o):e.dispatchEvent(new Is(oc.RENDERER_CHANGED),o,o),e.readyPromise&&e.resolveReadyPromise(),n||e.getRoot().forEach(function(t){var e,n;null===(e=(n=t).dirty)||void 0===e||e.call(n,!0,!0)}),e.mountChildren(e.getRoot()),t.getConfig().enableAutoRendering&&e.run()})}},{key:"loadRendererContainerModule",value:function(t){var e=this;t.getPlugins().forEach(function(t){t.context=e.context,t.init(yu)})}},{key:"setRenderer",value:function(t){var e=this.getConfig();if(e.renderer!==t){var n=e.renderer;e.renderer=t,this.destroy(!1,!0),O((null==n?void 0:n.getPlugins())||[]).reverse().forEach(function(t){t.destroy(yu)}),this.initRenderer(t)}}},{key:"setCursor",value:function(t){this.getConfig().cursor=t,this.getContextService().applyCursorStyle(t)}},{key:"unmountChildren",value:function(t){var e=this;if(t.childNodes.forEach(function(t){e.unmountChildren(t)}),this.inited){if(t.isMutationObserved)t.dispatchEvent(sc);else{var n,r=!0===(null===(n=this.getConfig().future)||void 0===n?void 0:n.experimentalCancelEventPropagation);sc.target=t,this.dispatchEvent(sc,!0,r)}t!==this.document.documentElement&&(t.ownerDocument=null),t.isConnected=!1}t.isCustomElement&&t.disconnectedCallback&&t.disconnectedCallback()}},{key:"mountChildren",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ra(t);if(this.inited){if(!t.isConnected&&(t.ownerDocument=this.document,t.isConnected=!0,!n))if(t.isMutationObserved)t.dispatchEvent(ac);else{var r,i=!0===(null===(r=this.getConfig().future)||void 0===r?void 0:r.experimentalCancelEventPropagation);ac.target=t,this.dispatchEvent(ac,!0,i)}}else console.warn("[g]: You are trying to call `canvas.appendChild` before canvas' initialization finished. You can either await `canvas.ready` or listen to `CanvasEvent.READY` manually.","appended child: ",t.nodeName);t.childNodes.forEach(function(t){e.mountChildren(t,n)}),t.isCustomElement&&t.connectedCallback&&t.connectedCallback()}},{key:"mountFragment",value:function(t){this.mountChildren(t,!1)}},{key:"client2Viewport",value:function(t){return this.getEventService().client2Viewport(t)}},{key:"viewport2Client",value:function(t){return this.getEventService().viewport2Client(t)}},{key:"viewport2Canvas",value:function(t){return this.getEventService().viewport2Canvas(t)}},{key:"canvas2Viewport",value:function(t){return this.getEventService().canvas2Viewport(t)}},{key:"getPointByClient",value:function(t,e){return this.client2Viewport({x:t,y:e})}},{key:"getClientByPoint",value:function(t,e){return this.viewport2Client({x:t,y:e})}}])}(Ns);new WeakMap;var fc=function(){return B(function t(){x(this,t),this.cacheStore=new Map},[{key:"onRefAdded",value:function(t){}},{key:"has",value:function(t){return this.cacheStore.has(t)}},{key:"put",value:function(t,e,n){return!this.cacheStore.has(t)&&(this.cacheStore.set(t,{value:e,counter:new Set([n.entity])}),this.onRefAdded(n),!0)}},{key:"get",value:function(t,e){var n=this.cacheStore.get(t);return n?(n.counter.has(e.entity)||(n.counter.add(e.entity),this.onRefAdded(e)),n.value):null}},{key:"update",value:function(t,e,n){var r=this.cacheStore.get(t);return!!r&&(r.value=w(w({},r.value),e),r.counter.has(n.entity)||(r.counter.add(n.entity),this.onRefAdded(n)),!0)}},{key:"release",value:function(t,e){var n=this.cacheStore.get(t);return!!n&&(n.counter.delete(e.entity),n.counter.size<=0&&this.cacheStore.delete(t),!0)}},{key:"releaseRef",value:function(t){var e=this;Array.from(this.cacheStore.keys()).forEach(function(n){e.release(n,t)})}},{key:"getSize",value:function(){return this.cacheStore.size}},{key:"clear",value:function(){this.cacheStore.clear()}}])}(),dc=[],hc=[],pc=function(){function t(){x(this,t)}return B(t,null,[{key:"stop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.api;t.rafId&&(e.cancelAnimationFrame(t.rafId),t.rafId=null)}},{key:"executeTask",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.api;dc.length<=0&&hc.length<=0||(hc.forEach(function(t){return t()}),hc=dc.splice(0,t.TASK_NUM_PER_FRAME),t.rafId=e.requestAnimationFrame(function(){t.executeTask(e)}))}},{key:"sliceImage",value:function(e,n,r,i){for(var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:t.api,s=e.naturalWidth||e.width,u=e.naturalHeight||e.height,c=n-o,l=r-o,A=Math.ceil(s/c),f=Math.ceil(u/l),d={tileSize:[n,r],gridSize:[f,A],tiles:Array(f).fill(null).map(function(){return Array(A).fill(null)})},h=function(t){for(var o=function(o){dc.push(function(){var A=o*c,f=t*l,h=[Math.min(n,s-A),Math.min(r,u-f)],p=h[0],v=h[1],g=a.createCanvas();g.width=n,g.height=r,g.getContext("2d").drawImage(e,A,f,p,v,0,0,p,v),d.tiles[t][o]={x:A,y:f,tileX:o,tileY:t,data:g},i()})},f=0;f<A;f++)o(f)},p=0;p<f;p++)h(p);return t.stop(),t.executeTask(),d}}])}();pc.TASK_NUM_PER_FRAME=10;var vc=new fc;vc.onRefAdded=function(t){var e=this;t.addEventListener(Hs.DESTROY,function(){e.releaseRef(t)},{once:!0})};var gc=function(){return B(function t(e,n){x(this,t),this.gradientCache={},this.patternCache={},this.context=e,this.runtime=n},[{key:"getImageSync",value:function(t,e,n){var r=ve(t)?t:t.src;if(vc.has(r)){var i=vc.get(r,e);if(i.img.complete)return null==n||n(i),i}return this.getOrCreateImage(t,e).then(function(t){null==n||n(t)}).catch(function(t){console.error(t)}),null}},{key:"getOrCreateImage",value:function(t,e){var n=this,r=ve(t)?t:t.src;if(!ve(t)&&!vc.has(r)){var i={img:t,size:[t.naturalWidth||t.width,t.naturalHeight||t.height],tileSize:yc(t)};vc.put(r,i,e)}if(vc.has(r)){var o=vc.get(r,e);return o.img.complete?Promise.resolve(o):new Promise(function(t,e){o.img.addEventListener("load",function(){o.size=[o.img.naturalWidth||o.img.width,o.img.naturalHeight||o.img.height],o.tileSize=yc(o.img),t(o)}),o.img.addEventListener("error",function(t){e(t)})})}return new Promise(function(t,i){var o=n.context.config.createImage();if(o){var a={img:o,size:[0,0],tileSize:yc(o)};vc.put(r,a,e),o.onload=function(){a.size=[o.naturalWidth||o.width,o.naturalHeight||o.height],a.tileSize=yc(a.img),t(a)},o.onerror=function(t){i(t)},o.crossOrigin="Anonymous",o.src=r}})}},{key:"createDownSampledImage",value:(e=Xn(Wn().mark(function t(e,n){var r,i,o,a,s,u,c,l,A,f,d,h,p,g;return Wn().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=1,this.getOrCreateImage(e,n);case 1:if(void 0===(r=t.sent).downSamplingRate){t.next=2;break}return t.abrupt("return",r);case 2:if(i=this.context.config.enableLargeImageOptimization,a=(o="boolean"==typeof i?{}:i).maxDownSampledImageSize,s=void 0===a?2048:a,u=o.downSamplingRateThreshold,c=void 0===u?.5:u,l=this.runtime.globalThis.createImageBitmap,A=v(r.size,2),f=A[0],d=A[1],h=r.img,p=Math.min((s+s)/(f+d),Math.max(.01,Math.min(c,.5))),g=w(w({},r),{},{downSamplingRate:p}),vc.update(r.img.src,g,n),!l){t.next=7;break}return t.prev=3,t.next=4,l(r.img,{resizeWidth:f*p,resizeHeight:d*p});case 4:h=t.sent,t.next=6;break;case 5:t.prev=5,t.catch(3),p=1;case 6:t.next=8;break;case 7:p=1;case 8:return g=w(w({},this.getImageSync(e,n)),{},{downSampled:h,downSamplingRate:p}),vc.update(r.img.src,g,n),t.abrupt("return",g);case 9:case"end":return t.stop()}},t,this,[[3,5]])})),function(t,n){return e.apply(this,arguments)})},{key:"createImageTiles",value:(t=Xn(Wn().mark(function t(e,n,r,i){var o,a,s,u,c;return Wn().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=1,this.getOrCreateImage(e,i);case 1:return o=t.sent,a=i.ownerDocument.defaultView,s=a.requestAnimationFrame,u=a.cancelAnimationFrame,pc.api={requestAnimationFrame:s,cancelAnimationFrame:u,createCanvas:function(){return Qs.createCanvas()}},c=w(w({},o),pc.sliceImage(o.img,o.tileSize[0],o.tileSize[0],r)),vc.update(o.img.src,c,i),t.abrupt("return",c);case 2:case"end":return t.stop()}},t,this)})),function(e,n,r,i){return t.apply(this,arguments)})},{key:"releaseImage",value:function(t,e){vc.release(ve(t)?t:t.src,e)}},{key:"releaseImageRef",value:function(t){vc.releaseRef(t)}},{key:"getOrCreatePatternSync",value:function(t,e,n,r,i,o,a){var s=this.generatePatternKey(e);if(s&&this.patternCache[s])return this.patternCache[s];var u,c=e.image,l=e.repetition,A=e.transform,f=!1;if(ve(c)){var d=this.getImageSync(c,t,a);u=null==d?void 0:d.img}else r?(u=r,f=!0):u=c;var h,p=u&&n.createPattern(u,l);return p&&(h=A?vs(Zo(A),new Tu({})):ut(rt()),f&&pt(h,h,[1/i,1/i,1]),p.setTransform({a:h[0],b:h[1],c:h[4],d:h[5],e:h[12]+o[0],f:h[13]+o[1]})),s&&p&&(this.patternCache[s]=p),p}},{key:"getOrCreateGradient",value:function(t,e){var n=this.generateGradientKey(t),r=t.type,i=t.steps,o=t.min,a=t.width,s=t.height,u=t.angle,c=t.cx,l=t.cy,A=t.size;if(this.gradientCache[n])return this.gradientCache[n];var f=null;if(r===Ni.LinearGradient){var d=function(t,e,n,r){var i=yr(r.value),o=0+e/2,a=0+n/2,s=Math.abs(e*Math.cos(i))+Math.abs(n*Math.sin(i));return{x1:t[0]+o-Math.cos(i)*s/2,y1:t[1]+a-Math.sin(i)*s/2,x2:t[0]+o+Math.cos(i)*s/2,y2:t[1]+a+Math.sin(i)*s/2}}(o,a,s,u),h=d.x1,p=d.y1,v=d.x2,g=d.y2;f=e.createLinearGradient(h,p,v,g)}else if(r===Ni.RadialGradient){var y=function(t,e,n,r,i,o){var a=r.value,s=i.value;r.unit===Bi.kPercentage&&(a=r.value/100*e),i.unit===Bi.kPercentage&&(s=i.value/100*n);var u=Math.max(he([0,0],[a,s]),he([0,n],[a,s]),he([e,n],[a,s]),he([e,0],[a,s]));return o&&(o instanceof Ui?u=o.value:o instanceof _i&&("closest-side"===o.value?u=Math.min(a,e-a,s,n-s):"farthest-side"===o.value?u=Math.max(a,e-a,s,n-s):"closest-corner"===o.value&&(u=Math.min(he([0,0],[a,s]),he([0,n],[a,s]),he([e,n],[a,s]),he([e,0],[a,s]))))),{x:a+t[0],y:s+t[1],r:u}}(o,a,s,c,l,A),m=y.x,b=y.y,w=y.r;f=e.createRadialGradient(m,b,0,m,b,w)}return f&&(i.forEach(function(t){var e,n=t.offset,r=t.color;n.unit===Bi.kPercentage&&(null===(e=f)||void 0===e||e.addColorStop(n.value/100,r.toString()))}),this.gradientCache[n]=f),this.gradientCache[n]}},{key:"generateGradientKey",value:function(t){var e=t.type,n=t.min,r=t.width,i=t.height,o=t.steps,a=t.angle,s=t.cx,u=t.cy,c=t.size;return"gradient-".concat(e,"-").concat((null==a?void 0:a.toString())||0,"-").concat((null==s?void 0:s.toString())||0,"-").concat((null==u?void 0:u.toString())||0,"-").concat((null==c?void 0:c.toString())||0,"-").concat(n[0],"-").concat(n[1],"-").concat(r,"-").concat(i,"-").concat(o.map(function(t){var e=t.offset,n=t.color;return"".concat(e).concat(n)}).join("-"))}},{key:"generatePatternKey",value:function(t){var e=t.image,n=t.repetition;return ve(e)?"pattern-".concat(e,"-").concat(n):"rect"===e.nodeName?"pattern-".concat(e.entity,"-").concat(n):void 0}}]);var t,e}();function yc(t){if(!t.complete)return[0,0];var e=t.naturalWidth||t.width,n=t.naturalHeight||t.height,r=256;return[256,512].forEach(function(t){Math.ceil(n/t)*Math.ceil(e/t)<1e3&&(r=t)}),[r,r]}gc.isSupportTile=!!Qs.createCanvas();var mc=function(){function t(){x(this,t)}return B(t,[{key:"apply",value:function(e){var n=e.renderingService,r=e.renderingContext,i=e.imagePool,o=r.root.ownerDocument.defaultView,a=function(t,e,n){var r=t.parsedStyle,i=r.width,o=r.height;i&&!o?t.setAttribute("height",n/e*i):!i&&o&&t.setAttribute("width",e/n*o)},s=function(t){var e=t.target,r=e.nodeName,o=e.attributes;if(r===Jn.IMAGE){var s=o.src,u=o.keepAspectRatio;i.getImageSync(s,e,function(t){var r=t.img,i=r.width,o=r.height;u&&a(e,i,o),e.dirty(),n.dirty()})}},u=function(t){var e=t.target,r=t.attrName,o=t.prevValue,s=t.newValue;e.nodeName===Jn.IMAGE&&"src"===r&&(o!==s&&i.releaseImage(o,e),ve(s)&&i.getOrCreateImage(s,e).then(function(t){var r=t.img,i=r.width,o=r.height;e.attributes.keepAspectRatio&&a(e,i,o),e.dirty(),n.dirty()}).catch(function(){}))};n.hooks.init.tap(t.tag,function(){o.addEventListener(Hs.MOUNTED,s),o.addEventListener(Hs.ATTR_MODIFIED,u)}),n.hooks.destroy.tap(t.tag,function(){o.removeEventListener(Hs.MOUNTED,s),o.removeEventListener(Hs.ATTR_MODIFIED,u)})}}])}();mc.tag="LoadImage";var bc=function(t){function e(){var t;x(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=F(this,e,[].concat(r))).name="image-loader",t}return P(e,t),B(e,[{key:"init",value:function(t){this.context.imagePool=new gc(this.context,t),this.addRenderingPlugin(new mc)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(tr),wc=Object.freeze({__proto__:null,ImagePool:gc,Plugin:bc}),xc=function(){function t(){x(this,t),this.displayObjectHTMLElementMap=new WeakMap}return B(t,[{key:"joinTransformMatrix",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return"matrix(".concat([t[0],t[1],t[4],t[5],t[12]+e[0],t[13]+e[1]].join(","),")")}},{key:"apply",value:function(e,n){var r=this,i=e.camera,o=e.renderingContext,a=e.renderingService;this.context=e;var s=o.root.ownerDocument.defaultView,u=s.context.eventService.nativeHTMLMap,c=function(t,e){e.style.transform=r.joinTransformMatrix(t.getWorldTransform(),t.getOrigin())},l=function(t){var e=t.target;if(e.nodeName===Jn.HTML){r.$camera||(r.$camera=r.createCamera(i));var n=r.getOrCreateEl(e);r.$camera.appendChild(n),Object.keys(e.attributes).forEach(function(t){r.updateAttribute(t,e)}),c(e,n),u.set(n,e)}},A=function(t){var e=t.target;if(e.nodeName===Jn.HTML&&r.$camera){var n=r.getOrCreateEl(e);n&&(n.remove(),u.delete(n))}},f=function(t){var e=t.target;if(e.nodeName===Jn.HTML){var n=t.attrName;r.updateAttribute(n,e)}},d=function(t){for(var e=t.detail,n=0;n<e.length;n++){var i=e[n].target;(i.nodeName===Jn.FRAGMENT?i.childNodes:[i]).forEach(function(t){if(t.nodeName===Jn.HTML){var e=r.getOrCreateEl(t);c(t,e)}})}},h=function(){if(r.$camera){var t=r.context.config,e=t.width,n=t.height;r.$camera.parentElement.style.width="".concat(e||0,"px"),r.$camera.parentElement.style.height="".concat(n||0,"px")}};a.hooks.init.tap(t.tag,function(){s.addEventListener(oc.RESIZE,h),s.addEventListener(Hs.MOUNTED,l),s.addEventListener(Hs.UNMOUNTED,A),s.addEventListener(Hs.ATTR_MODIFIED,f),s.addEventListener(Hs.BOUNDS_CHANGED,d)}),a.hooks.endFrame.tap(t.tag,function(){r.$camera&&o.renderReasons.has(Us.CAMERA_CHANGED)&&(r.$camera.style.transform=r.joinTransformMatrix(i.getOrthoMatrix()))}),a.hooks.destroy.tap(t.tag,function(){r.$camera&&r.$camera.remove(),s.removeEventListener(oc.RESIZE,h),s.removeEventListener(Hs.MOUNTED,l),s.removeEventListener(Hs.UNMOUNTED,A),s.removeEventListener(Hs.ATTR_MODIFIED,f),s.removeEventListener(Hs.BOUNDS_CHANGED,d)})}},{key:"createCamera",value:function(t){var e=this.context.config,n=e.document,r=e.width,i=e.height,o=this.context.contextService.getDomElement(),a=o.parentNode;if(a){var s="g-canvas-camera",u=a.querySelector("#".concat(s));if(!u){var c=(n||document).createElement("div");c.style.overflow="hidden",c.style.pointerEvents="none",c.style.position="absolute",c.style.left="0px",c.style.top="0px",c.style.width="".concat(r||0,"px"),c.style.height="".concat(i||0,"px");var l=(n||document).createElement("div");u=l,l.id=s,l.style.position="absolute",l.style.left="".concat(o.offsetLeft||0,"px"),l.style.top="".concat(o.offsetTop||0,"px"),l.style.transformOrigin="left top",l.style.transform=this.joinTransformMatrix(t.getOrthoMatrix()),l.style.pointerEvents="none",l.style.width="100%",l.style.height="100%",c.appendChild(l),a.appendChild(c)}return u}return null}},{key:"getOrCreateEl",value:function(t){var e=this.context.config.document,n=this.displayObjectHTMLElementMap.get(t);return n||(n=(e||document).createElement("div"),t.parsedStyle.$el=n,this.displayObjectHTMLElementMap.set(t,n),t.id&&(n.id=t.id),t.name&&n.setAttribute("name",t.name),t.className&&(n.className=t.className),n.style.position="absolute",n.style["will-change"]="transform",n.style.transform=this.joinTransformMatrix(t.getWorldTransform(),t.getOrigin())),n}},{key:"updateAttribute",value:function(t,e){var n=this.getOrCreateEl(e);switch(t){case"innerHTML":var r=e.parsedStyle.innerHTML;ve(r)?n.innerHTML=r:(n.innerHTML="",n.appendChild(r));break;case"x":n.style.left="".concat(e.parsedStyle.x,"px");break;case"y":n.style.top="".concat(e.parsedStyle.y,"px");break;case"transformOrigin":var i=e.parsedStyle.transformOrigin;n.style["transform-origin"]="".concat(i[0].buildCSSText(null,null,"")," ").concat(i[1].buildCSSText(null,null,""));break;case"width":var o=e.parsedStyle.width;n.style.width=de(o)?"".concat(o,"px"):o.toString();break;case"height":var a=e.parsedStyle.height;n.style.height=de(a)?"".concat(a,"px"):a.toString();break;case"zIndex":var s=e.parsedStyle.zIndex;n.style["z-index"]="".concat(s);break;case"visibility":var u=e.parsedStyle.visibility;n.style.visibility=u;break;case"pointerEvents":var c=e.parsedStyle.pointerEvents,l=void 0===c?"auto":c;n.style.pointerEvents=l;break;case"opacity":var A=e.parsedStyle.opacity;n.style.opacity="".concat(A);break;case"fill":var f=e.parsedStyle.fill,d="";oo(f)?d=f.isNone?"transparent":e.getAttribute("fill"):Array.isArray(f)?d=e.getAttribute("fill"):io(f),n.style.background=d;break;case"stroke":var h=e.parsedStyle.stroke,p="";oo(h)?p=h.isNone?"transparent":e.getAttribute("stroke"):Array.isArray(h)?p=e.getAttribute("stroke"):io(h),n.style["border-color"]=p,n.style["border-style"]="solid";break;case"lineWidth":var v=e.parsedStyle.lineWidth;n.style["border-width"]="".concat(v||0,"px");break;case"lineDash":n.style["border-style"]="dashed";break;case"filter":var g=e.style.filter;n.style.filter=g;break;default:pe(e.style[t])||""===e.style[t]||(n.style[t]=e.style[t])}}}])}();xc.tag="HTMLRendering";var Ec=function(t){function e(){var t;x(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=F(this,e,[].concat(r))).name="html-renderer",t}return P(e,t),B(e,[{key:"init",value:function(){this.addRenderingPlugin(new xc)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(tr),Bc=Object.freeze({__proto__:null,Plugin:Ec}),kc=function(){function t(){x(this,t)}return B(t,[{key:"apply",value:function(e,n){var r=this,i=e.renderingService,o=e.renderingContext,a=e.config;this.context=e;var s=o.root.ownerDocument.defaultView,u=function(t){i.hooks.pointerMove.call(t)},c=function(t){i.hooks.pointerUp.call(t)},l=function(t){i.hooks.pointerDown.call(t)},A=function(t){i.hooks.pointerOver.call(t)},f=function(t){i.hooks.pointerOut.call(t)},d=function(t){i.hooks.pointerCancel.call(t)},h=function(t){i.hooks.pointerWheel.call(t)},p=function(t){i.hooks.click.call(t)};i.hooks.init.tap(t.tag,function(){var t=r.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(t.style.msContentZooming="none",t.style.msTouchAction="none"):s.supportsPointerEvents&&(t.style.touchAction="none"),s.supportsPointerEvents?function(t){n.globalThis.document.addEventListener("pointermove",u,!0),t.addEventListener("pointerdown",l,!0),t.addEventListener("pointerleave",f,!0),t.addEventListener("pointerover",A,!0),n.globalThis.addEventListener("pointerup",c,!0),n.globalThis.addEventListener("pointercancel",d,!0)}(t):function(t){n.globalThis.document.addEventListener("mousemove",u,!0),t.addEventListener("mousedown",l,!0),t.addEventListener("mouseout",f,!0),t.addEventListener("mouseover",A,!0),n.globalThis.addEventListener("mouseup",c,!0)}(t),s.supportsTouchEvents&&function(t){t.addEventListener("touchstart",l,!0),t.addEventListener("touchend",c,!0),t.addEventListener("touchmove",u,!0),t.addEventListener("touchcancel",d,!0)}(t),a.useNativeClickEvent&&t.addEventListener("click",p,!0),t.addEventListener("wheel",h,{passive:!0,capture:!0})}),i.hooks.destroy.tap(t.tag,function(){var t=r.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(t.style.msContentZooming="",t.style.msTouchAction=""):s.supportsPointerEvents&&(t.style.touchAction=""),s.supportsPointerEvents?function(t){n.globalThis.document.removeEventListener("pointermove",u,!0),t.removeEventListener("pointerdown",l,!0),t.removeEventListener("pointerleave",f,!0),t.removeEventListener("pointerover",A,!0),n.globalThis.removeEventListener("pointerup",c,!0),n.globalThis.removeEventListener("pointercancel",d,!0)}(t):function(t){n.globalThis.document.removeEventListener("mousemove",u,!0),t.removeEventListener("mousedown",l,!0),t.removeEventListener("mouseout",f,!0),t.removeEventListener("mouseover",A,!0),n.globalThis.removeEventListener("mouseup",c,!0)}(t),s.supportsTouchEvents&&function(t){t.removeEventListener("touchstart",l,!0),t.removeEventListener("touchend",c,!0),t.removeEventListener("touchmove",u,!0),t.removeEventListener("touchcancel",d,!0)}(t),a.useNativeClickEvent&&t.removeEventListener("click",p,!0),t.removeEventListener("wheel",h,!0)})}}])}();kc.tag="DOMInteraction";var Oc=function(t){function e(){var t;x(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=F(this,e,[].concat(r))).name="dom-interaction",t}return P(e,t),B(e,[{key:"init",value:function(){this.addRenderingPlugin(new kc)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(tr),Cc=Object.freeze({__proto__:null,Plugin:Oc});(function(){function t(){x(this,t)}return B(t,[{key:"apply",value:function(e){var n=e.renderingService,r=e.contextService,i=e.config,o=r.getDomElement(),a=function(t){n.hooks.pointerDown.call(t)},s=function(t){n.hooks.pointerUp.call(t)},u=function(t){n.hooks.pointerMove.call(t)},c=function(t){n.hooks.pointerOver.call(t)},l=function(t){n.hooks.pointerOut.call(t)},A=function(t){n.hooks.click.call(t)},f=function(t){n.hooks.pointerCancel.call(t)};n.hooks.init.tap(t.tag,function(){o.addEventListener("touchstart",a,!0),o.addEventListener("touchend",s,!0),o.addEventListener("touchmove",u,!0),o.addEventListener("touchcancel",f,!0),o.addEventListener("mouseout",l,!0),o.addEventListener("mouseover",c,!0),i.useNativeClickEvent&&o.addEventListener("click",A,!0)}),n.hooks.destroy.tap(t.tag,function(){o.removeEventListener("touchstart",a,!0),o.removeEventListener("touchend",s,!0),o.removeEventListener("touchmove",u,!0),o.removeEventListener("touchcancel",f,!0),o.removeEventListener("mouseout",l,!0),o.removeEventListener("mouseover",c,!0),i.useNativeClickEvent&&o.removeEventListener("click",A,!0)})}}])}()).tag="MobileInteraction";var Mc=function(t,e){return Mc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},Mc(t,e)};function Sc(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Mc(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function Fc(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())})}function Tc(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function Pc(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||e)}for(var Ic=function(){function t(t,e,n,r){this.left=t,this.top=e,this.width=n,this.height=r}return t.prototype.add=function(e,n,r,i){return new t(this.left+e,this.top+n,this.width+r,this.height+i)},t.fromClientRect=function(e,n){return new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height)},t.fromDOMRectList=function(e,n){var r=Array.from(n).find(function(t){return 0!==t.width});return r?new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),Nc=function(t,e){return Ic.fromClientRect(t,e.getBoundingClientRect())},Lc=function(t){for(var e=[],n=0,r=t.length;n<r;){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=t.charCodeAt(n++);56320==(64512&o)?e.push(((1023&i)<<10)+(1023&o)+65536):(e.push(i),n--)}else e.push(i)}return e},_c=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],i=-1,o="";++i<n;){var a=t[i];a<=65535?r.push(a):(a-=65536,r.push(55296+(a>>10),a%1024+56320)),(i+1===n||r.length>16384)&&(o+=String.fromCharCode.apply(String,r),r.length=0)}return o},Qc="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Uc=0;Uc<64;Uc++)Qc["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(Uc)]=Uc;for(var jc="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Dc=0;Dc<64;Dc++)jc["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(Dc)]=Dc;for(var Rc=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},Hc=function(){function t(t,e,n,r,i,o){this.initialValue=t,this.errorValue=e,this.highStart=n,this.highValueIndex=r,this.index=i,this.data=o}return t.prototype.get=function(t){var e;if(t>=0){if(t<55296||t>56319&&t<=65535)return e=((e=this.index[t>>5])<<2)+(31&t),this.data[e];if(t<=65535)return e=((e=this.index[2048+(t-55296>>5)])<<2)+(31&t),this.data[e];if(t<this.highStart)return e=2080+(t>>11),e=this.index[e],e+=t>>5&63,e=((e=this.index[e])<<2)+(31&t),this.data[e];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),zc="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Kc=0;Kc<64;Kc++)zc["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(Kc)]=Kc;var Gc=10,Vc=13,Wc=15,Yc=17,Xc=18,qc=19,Zc=20,Jc=21,$c=22,tl=24,el=25,nl=26,rl=27,il=28,ol=30,al=32,sl=33,ul=34,cl=35,ll=37,Al=38,fl=39,dl=40,hl=42,pl=[9001,65288],vl="",gl="",yl=function(){var t,e,n,r=function(t){var e,n,r,i,o,a=.75*t.length,s=t.length,u=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var c="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(a):new Array(a),l=Array.isArray(c)?c:new Uint8Array(c);for(e=0;e<s;e+=4)n=jc[t.charCodeAt(e)],r=jc[t.charCodeAt(e+1)],i=jc[t.charCodeAt(e+2)],o=jc[t.charCodeAt(e+3)],l[u++]=n<<2|r>>4,l[u++]=(15&r)<<4|i>>2,l[u++]=(3&i)<<6|63&o;return c}("KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=="),i=Array.isArray(r)?function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n}(r):new Uint32Array(r),o=Array.isArray(r)?function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n}(r):new Uint16Array(r),a=Rc(o,12,i[4]/2),s=2===i[5]?Rc(o,(24+i[4])/2):(t=i,e=Math.ceil((24+i[4])/4),t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n)));return new Hc(i[0],i[1],i[2],i[3],a,s)}(),ml=[ol,36],bl=[1,2,3,5],wl=[Gc,8],xl=[rl,nl],El=bl.concat(wl),Bl=[Al,fl,dl,ul,cl],kl=[Wc,Vc],Ol=function(t,e,n,r){var i=r[n];if(Array.isArray(t)?-1!==t.indexOf(i):t===i)for(var o=n;o<=r.length;){if((u=r[++o])===e)return!0;if(u!==Gc)break}if(i===Gc)for(o=n;o>0;){var a=r[--o];if(Array.isArray(t)?-1!==t.indexOf(a):t===a)for(var s=n;s<=r.length;){var u;if((u=r[++s])===e)return!0;if(u!==Gc)break}if(a!==Gc)break}return!1},Cl=function(t,e){for(var n=t;n>=0;){var r=e[n];if(r!==Gc)return r;n--}return 0},Ml=function(t,e,n,r,i){if(0===n[r])return vl;var o=r-1;if(Array.isArray(i)&&!0===i[o])return vl;var a=o-1,s=o+1,u=e[o],c=a>=0?e[a]:0,l=e[s];if(2===u&&3===l)return vl;if(-1!==bl.indexOf(u))return"!";if(-1!==bl.indexOf(l))return vl;if(-1!==wl.indexOf(l))return vl;if(8===Cl(o,e))return gl;if(11===yl.get(t[o]))return vl;if((u===al||u===sl)&&11===yl.get(t[s]))return vl;if(7===u||7===l)return vl;if(9===u)return vl;if(-1===[Gc,Vc,Wc].indexOf(u)&&9===l)return vl;if(-1!==[Yc,Xc,qc,tl,il].indexOf(l))return vl;if(Cl(o,e)===$c)return vl;if(Ol(23,$c,o,e))return vl;if(Ol([Yc,Xc],Jc,o,e))return vl;if(Ol(12,12,o,e))return vl;if(u===Gc)return gl;if(23===u||23===l)return vl;if(16===l||16===u)return gl;if(-1!==[Vc,Wc,Jc].indexOf(l)||14===u)return vl;if(36===c&&-1!==kl.indexOf(u))return vl;if(u===il&&36===l)return vl;if(l===Zc)return vl;if(-1!==ml.indexOf(l)&&u===el||-1!==ml.indexOf(u)&&l===el)return vl;if(u===rl&&-1!==[ll,al,sl].indexOf(l)||-1!==[ll,al,sl].indexOf(u)&&l===nl)return vl;if(-1!==ml.indexOf(u)&&-1!==xl.indexOf(l)||-1!==xl.indexOf(u)&&-1!==ml.indexOf(l))return vl;if(-1!==[rl,nl].indexOf(u)&&(l===el||-1!==[$c,Wc].indexOf(l)&&e[s+1]===el)||-1!==[$c,Wc].indexOf(u)&&l===el||u===el&&-1!==[el,il,tl].indexOf(l))return vl;if(-1!==[el,il,tl,Yc,Xc].indexOf(l))for(var A=o;A>=0;){if((f=e[A])===el)return vl;if(-1===[il,tl].indexOf(f))break;A--}if(-1!==[rl,nl].indexOf(l))for(A=-1!==[Yc,Xc].indexOf(u)?a:o;A>=0;){var f;if((f=e[A])===el)return vl;if(-1===[il,tl].indexOf(f))break;A--}if(Al===u&&-1!==[Al,fl,ul,cl].indexOf(l)||-1!==[fl,ul].indexOf(u)&&-1!==[fl,dl].indexOf(l)||-1!==[dl,cl].indexOf(u)&&l===dl)return vl;if(-1!==Bl.indexOf(u)&&-1!==[Zc,nl].indexOf(l)||-1!==Bl.indexOf(l)&&u===rl)return vl;if(-1!==ml.indexOf(u)&&-1!==ml.indexOf(l))return vl;if(u===tl&&-1!==ml.indexOf(l))return vl;if(-1!==ml.concat(el).indexOf(u)&&l===$c&&-1===pl.indexOf(t[s])||-1!==ml.concat(el).indexOf(l)&&u===Xc)return vl;if(41===u&&41===l){for(var d=n[o],h=1;d>0&&41===e[--d];)h++;if(h%2!=0)return vl}return u===al&&l===sl?vl:gl},Sl=function(){function t(t,e,n,r){this.codePoints=t,this.required="!"===e,this.start=n,this.end=r}return t.prototype.slice=function(){return _c.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),Fl=45,Tl=43,Pl=-1,Il=function(t){return t>=48&&t<=57},Nl=function(t){return Il(t)||t>=65&&t<=70||t>=97&&t<=102},Ll=function(t){return 10===t||9===t||32===t},_l=function(t){return function(t){return function(t){return t>=97&&t<=122}(t)||function(t){return t>=65&&t<=90}(t)}(t)||function(t){return t>=128}(t)||95===t},Ql=function(t){return _l(t)||Il(t)||t===Fl},Ul=function(t){return t>=0&&t<=8||11===t||t>=14&&t<=31||127===t},jl=function(t,e){return 92===t&&10!==e},Dl=function(t,e,n){return t===Fl?_l(e)||jl(e,n):!!_l(t)||!(92!==t||!jl(t,e))},Rl=function(t,e,n){return t===Tl||t===Fl?!!Il(e)||46===e&&Il(n):Il(46===t?e:t)},Hl=function(t){var e=0,n=1;t[e]!==Tl&&t[e]!==Fl||(t[e]===Fl&&(n=-1),e++);for(var r=[];Il(t[e]);)r.push(t[e++]);var i=r.length?parseInt(_c.apply(void 0,r),10):0;46===t[e]&&e++;for(var o=[];Il(t[e]);)o.push(t[e++]);var a=o.length,s=a?parseInt(_c.apply(void 0,o),10):0;69!==t[e]&&101!==t[e]||e++;var u=1;t[e]!==Tl&&t[e]!==Fl||(t[e]===Fl&&(u=-1),e++);for(var c=[];Il(t[e]);)c.push(t[e++]);var l=c.length?parseInt(_c.apply(void 0,c),10):0;return n*(i+s*Math.pow(10,-a))*Math.pow(10,u*l)},zl={type:2},Kl={type:3},Gl={type:4},Vl={type:13},Wl={type:8},Yl={type:21},Xl={type:9},ql={type:10},Zl={type:11},Jl={type:12},$l={type:14},tA={type:23},eA={type:1},nA={type:25},rA={type:24},iA={type:26},oA={type:27},aA={type:28},sA={type:29},uA={type:31},cA={type:32},lA=function(){function t(){this._value=[]}return t.prototype.write=function(t){this._value=this._value.concat(Lc(t))},t.prototype.read=function(){for(var t=[],e=this.consumeToken();e!==cA;)t.push(e),e=this.consumeToken();return t},t.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case 34:return this.consumeStringToken(34);case 35:var e=this.peekCodePoint(0),n=this.peekCodePoint(1),r=this.peekCodePoint(2);if(Ql(e)||jl(n,r)){var i=Dl(e,n,r)?2:1;return{type:5,value:this.consumeName(),flags:i}}break;case 36:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Vl;break;case 39:return this.consumeStringToken(39);case 40:return zl;case 41:return Kl;case 42:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),$l;break;case Tl:if(Rl(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case 44:return Gl;case Fl:var o=t,a=this.peekCodePoint(0),s=this.peekCodePoint(1);if(Rl(o,a,s))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(Dl(o,a,s))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(a===Fl&&62===s)return this.consumeCodePoint(),this.consumeCodePoint(),rA;break;case 46:if(Rl(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case 47:if(42===this.peekCodePoint(0))for(this.consumeCodePoint();;){var u=this.consumeCodePoint();if(42===u&&47===(u=this.consumeCodePoint()))return this.consumeToken();if(u===Pl)return this.consumeToken()}break;case 58:return iA;case 59:return oA;case 60:if(33===this.peekCodePoint(0)&&this.peekCodePoint(1)===Fl&&this.peekCodePoint(2)===Fl)return this.consumeCodePoint(),this.consumeCodePoint(),nA;break;case 64:var c=this.peekCodePoint(0),l=this.peekCodePoint(1),A=this.peekCodePoint(2);if(Dl(c,l,A))return{type:7,value:this.consumeName()};break;case 91:return aA;case 92:if(jl(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case 93:return sA;case 61:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Wl;break;case 123:return Zl;case 125:return Jl;case 117:case 85:var f=this.peekCodePoint(0),d=this.peekCodePoint(1);return f!==Tl||!Nl(d)&&63!==d||(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case 124:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Xl;if(124===this.peekCodePoint(0))return this.consumeCodePoint(),Yl;break;case 126:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),ql;break;case Pl:return cA}return Ll(t)?(this.consumeWhiteSpace(),uA):Il(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):_l(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:_c(t)}},t.prototype.consumeCodePoint=function(){var t=this._value.shift();return void 0===t?-1:t},t.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},t.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},t.prototype.consumeUnicodeRangeToken=function(){for(var t=[],e=this.consumeCodePoint();Nl(e)&&t.length<6;)t.push(e),e=this.consumeCodePoint();for(var n=!1;63===e&&t.length<6;)t.push(e),e=this.consumeCodePoint(),n=!0;if(n)return{type:30,start:parseInt(_c.apply(void 0,t.map(function(t){return 63===t?48:t})),16),end:parseInt(_c.apply(void 0,t.map(function(t){return 63===t?70:t})),16)};var r=parseInt(_c.apply(void 0,t),16);if(this.peekCodePoint(0)===Fl&&Nl(this.peekCodePoint(1))){this.consumeCodePoint(),e=this.consumeCodePoint();for(var i=[];Nl(e)&&i.length<6;)i.push(e),e=this.consumeCodePoint();return{type:30,start:r,end:parseInt(_c.apply(void 0,i),16)}}return{type:30,start:r,end:r}},t.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return"url"===t.toLowerCase()&&40===this.peekCodePoint(0)?(this.consumeCodePoint(),this.consumeUrlToken()):40===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},t.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Pl)return{type:22,value:""};var e=this.peekCodePoint(0);if(39===e||34===e){var n=this.consumeStringToken(this.consumeCodePoint());return 0===n.type&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Pl||41===this.peekCodePoint(0))?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),tA)}for(;;){var r=this.consumeCodePoint();if(r===Pl||41===r)return{type:22,value:_c.apply(void 0,t)};if(Ll(r))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Pl||41===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:22,value:_c.apply(void 0,t)}):(this.consumeBadUrlRemnants(),tA);if(34===r||39===r||40===r||Ul(r))return this.consumeBadUrlRemnants(),tA;if(92===r){if(!jl(r,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),tA;t.push(this.consumeEscapedCodePoint())}else t.push(r)}},t.prototype.consumeWhiteSpace=function(){for(;Ll(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(41===t||t===Pl)return;jl(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(t){for(var e="";t>0;){var n=Math.min(5e4,t);e+=_c.apply(void 0,this._value.splice(0,n)),t-=n}return this._value.shift(),e},t.prototype.consumeStringToken=function(t){for(var e="",n=0;;){var r=this._value[n];if(r===Pl||void 0===r||r===t)return{type:0,value:e+=this.consumeStringSlice(n)};if(10===r)return this._value.splice(0,n),eA;if(92===r){var i=this._value[n+1];i!==Pl&&void 0!==i&&(10===i?(e+=this.consumeStringSlice(n),n=-1,this._value.shift()):jl(r,i)&&(e+=this.consumeStringSlice(n),e+=_c(this.consumeEscapedCodePoint()),n=-1))}n++}},t.prototype.consumeNumber=function(){var t=[],e=4,n=this.peekCodePoint(0);for(n!==Tl&&n!==Fl||t.push(this.consumeCodePoint());Il(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0);var r=this.peekCodePoint(1);if(46===n&&Il(r))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),e=8;Il(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0),r=this.peekCodePoint(1);var i=this.peekCodePoint(2);if((69===n||101===n)&&((r===Tl||r===Fl)&&Il(i)||Il(r)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),e=8;Il(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[Hl(t),e]},t.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),e=t[0],n=t[1],r=this.peekCodePoint(0),i=this.peekCodePoint(1),o=this.peekCodePoint(2);return Dl(r,i,o)?{type:15,number:e,flags:n,unit:this.consumeName()}:37===r?(this.consumeCodePoint(),{type:16,number:e,flags:n}):{type:17,number:e,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(Nl(t)){for(var e=_c(t);Nl(this.peekCodePoint(0))&&e.length<6;)e+=_c(this.consumeCodePoint());Ll(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(e,16);return 0===n||function(t){return t>=55296&&t<=57343}(n)||n>1114111?65533:n}return t===Pl?65533:t},t.prototype.consumeName=function(){for(var t="";;){var e=this.consumeCodePoint();if(Ql(e))t+=_c(e);else{if(!jl(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),t;t+=_c(this.consumeEscapedCodePoint())}}},t}(),AA=function(){function t(t){this._tokens=t}return t.create=function(e){var n=new lA;return n.write(e),new t(n.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var t=this.consumeToken();31===t.type;)t=this.consumeToken();if(32===t.type)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var e=this.consumeComponentValue();do{t=this.consumeToken()}while(31===t.type);if(32===t.type)return e;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var t=[];;){var e=this.consumeComponentValue();if(32===e.type)return t;t.push(e),t.push()}},t.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},t.prototype.consumeSimpleBlock=function(t){for(var e={type:t,values:[]},n=this.consumeToken();;){if(32===n.type||bA(n,t))return e;this.reconsumeToken(n),e.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(t){for(var e={name:t.value,values:[],type:18};;){var n=this.consumeToken();if(32===n.type||3===n.type)return e;this.reconsumeToken(n),e.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var t=this._tokens.shift();return void 0===t?cA:t},t.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},t}(),fA=function(t){return 15===t.type},dA=function(t){return 17===t.type},hA=function(t){return 20===t.type},pA=function(t){return 0===t.type},vA=function(t,e){return hA(t)&&t.value===e},gA=function(t){return 31!==t.type},yA=function(t){return 31!==t.type&&4!==t.type},mA=function(t){var e=[],n=[];return t.forEach(function(t){if(4===t.type){if(0===n.length)throw new Error("Error parsing function args, zero tokens for arg");return e.push(n),void(n=[])}31!==t.type&&n.push(t)}),n.length&&e.push(n),e},bA=function(t,e){return 11===e&&12===t.type||28===e&&29===t.type||2===e&&3===t.type},wA=function(t){return 17===t.type||15===t.type},xA=function(t){return 16===t.type||wA(t)},EA=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},BA={type:17,number:0,flags:4},kA={type:16,number:50,flags:4},OA={type:16,number:100,flags:4},CA=function(t,e,n){var r=t[0],i=t[1];return[MA(r,e),MA(void 0!==i?i:r,n)]},MA=function(t,e){if(16===t.type)return t.number/100*e;if(fA(t))switch(t.unit){case"rem":case"em":return 16*t.number;default:return t.number}return t.number},SA="grad",FA="turn",TA=function(t,e){if(15===e.type)switch(e.unit){case"deg":return Math.PI*e.number/180;case SA:return Math.PI/200*e.number;case"rad":return e.number;case FA:return 2*Math.PI*e.number}throw new Error("Unsupported angle type")},PA=function(t){return 15===t.type&&("deg"===t.unit||t.unit===SA||"rad"===t.unit||t.unit===FA)},IA=function(t){switch(t.filter(hA).map(function(t){return t.value}).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[BA,BA];case"to top":case"bottom":return NA(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[BA,OA];case"to right":case"left":return NA(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[OA,OA];case"to bottom":case"top":return NA(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[OA,BA];case"to left":case"right":return NA(270)}return 0},NA=function(t){return Math.PI*t/180},LA=function(t,e){if(18===e.type){var n=KA[e.name];if(void 0===n)throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return n(t,e.values)}if(5===e.type){if(3===e.value.length){var r=e.value.substring(0,1),i=e.value.substring(1,2),o=e.value.substring(2,3);return UA(parseInt(r+r,16),parseInt(i+i,16),parseInt(o+o,16),1)}if(4===e.value.length){r=e.value.substring(0,1),i=e.value.substring(1,2),o=e.value.substring(2,3);var a=e.value.substring(3,4);return UA(parseInt(r+r,16),parseInt(i+i,16),parseInt(o+o,16),parseInt(a+a,16)/255)}if(6===e.value.length)return r=e.value.substring(0,2),i=e.value.substring(2,4),o=e.value.substring(4,6),UA(parseInt(r,16),parseInt(i,16),parseInt(o,16),1);if(8===e.value.length)return r=e.value.substring(0,2),i=e.value.substring(2,4),o=e.value.substring(4,6),a=e.value.substring(6,8),UA(parseInt(r,16),parseInt(i,16),parseInt(o,16),parseInt(a,16)/255)}if(20===e.type){var s=VA[e.value.toUpperCase()];if(void 0!==s)return s}return VA.TRANSPARENT},_A=function(t){return!(255&t)},QA=function(t){var e=255&t,n=255&t>>8,r=255&t>>16,i=255&t>>24;return e<255?"rgba("+i+","+r+","+n+","+e/255+")":"rgb("+i+","+r+","+n+")"},UA=function(t,e,n,r){return(t<<24|e<<16|n<<8|Math.round(255*r))>>>0},jA=function(t,e){if(17===t.type)return t.number;if(16===t.type){var n=3===e?1:255;return 3===e?t.number/100*n:Math.round(t.number/100*n)}return 0},DA=function(t,e){var n=e.filter(yA);if(3===n.length){var r=n.map(jA),i=r[0],o=r[1],a=r[2];return UA(i,o,a,1)}if(4===n.length){var s=n.map(jA),u=(i=s[0],o=s[1],a=s[2],s[3]);return UA(i,o,a,u)}return 0};function RA(t,e,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(e-t)*n*6+t:n<.5?e:n<2/3?6*(e-t)*(2/3-n)+t:t}var HA,zA=function(t,e){var n=e.filter(yA),r=n[0],i=n[1],o=n[2],a=n[3],s=(17===r.type?NA(r.number):TA(0,r))/(2*Math.PI),u=xA(i)?i.number/100:0,c=xA(o)?o.number/100:0,l=void 0!==a&&xA(a)?MA(a,1):1;if(0===u)return UA(255*c,255*c,255*c,1);var A=c<=.5?c*(u+1):c+u-c*u,f=2*c-A,d=RA(f,A,s+1/3),h=RA(f,A,s),p=RA(f,A,s-1/3);return UA(255*d,255*h,255*p,l)},KA={hsl:zA,hsla:zA,rgb:DA,rgba:DA},GA=function(t,e){return LA(t,AA.create(e).parseComponentValue())},VA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},WA={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(t){if(hA(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},YA={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},XA=function(t,e){var n=LA(t,e[0]),r=e[1];return r&&xA(r)?{color:n,stop:r}:{color:n,stop:null}},qA=function(t,e){var n=t[0],r=t[t.length-1];null===n.stop&&(n.stop=BA),null===r.stop&&(r.stop=OA);for(var i=[],o=0,a=0;a<t.length;a++){var s=t[a].stop;if(null!==s){var u=MA(s,e);u>o?i.push(u):i.push(o),o=u}else i.push(null)}var c=null;for(a=0;a<i.length;a++){var l=i[a];if(null===l)null===c&&(c=a);else if(null!==c){for(var A=a-c,f=(l-i[c-1])/(A+1),d=1;d<=A;d++)i[c+d-1]=f*d;c=null}}return t.map(function(t,n){return{color:t.color,stop:Math.max(Math.min(1,i[n]/e),0)}})},ZA=function(t,e){return Math.sqrt(t*t+e*e)},JA=function(t,e,n,r,i){return[[0,0],[0,e],[t,0],[t,e]].reduce(function(t,e){var o=e[0],a=e[1],s=ZA(n-o,r-a);return(i?s<t.optimumDistance:s>t.optimumDistance)?{optimumCorner:e,optimumDistance:s}:t},{optimumDistance:i?1/0:-1/0,optimumCorner:null}).optimumCorner},$A=function(t,e){var n=NA(180),r=[];return mA(e).forEach(function(e,i){if(0===i){var o=e[0];if(20===o.type&&-1!==["top","left","right","bottom"].indexOf(o.value))return void(n=IA(e));if(PA(o))return void(n=(TA(0,o)+NA(270))%NA(360))}var a=XA(t,e);r.push(a)}),{angle:n,stops:r,type:1}},tf="closest-side",ef="farthest-side",nf="closest-corner",rf="farthest-corner",of="circle",af="ellipse",sf="cover",uf="contain",cf=function(t,e){var n=0,r=3,i=[],o=[];return mA(e).forEach(function(e,a){var s=!0;if(0===a?s=e.reduce(function(t,e){if(hA(e))switch(e.value){case"center":return o.push(kA),!1;case"top":case"left":return o.push(BA),!1;case"right":case"bottom":return o.push(OA),!1}else if(xA(e)||wA(e))return o.push(e),!1;return t},s):1===a&&(s=e.reduce(function(t,e){if(hA(e))switch(e.value){case of:return n=0,!1;case af:return n=1,!1;case uf:case tf:return r=0,!1;case ef:return r=1,!1;case nf:return r=2,!1;case sf:case rf:return r=3,!1}else if(wA(e)||xA(e))return Array.isArray(r)||(r=[]),r.push(e),!1;return t},s)),s){var u=XA(t,e);i.push(u)}}),{size:r,shape:n,stops:i,position:o,type:2}},lf=function(t,e){if(22===e.type){var n={url:e.value,type:0};return t.cache.addImage(e.value),n}if(18===e.type){var r=Af[e.name];if(void 0===r)throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return r(t,e.values)}throw new Error("Unsupported image type "+e.type)},Af={"linear-gradient":function(t,e){var n=NA(180),r=[];return mA(e).forEach(function(e,i){if(0===i){var o=e[0];if(20===o.type&&"to"===o.value)return void(n=IA(e));if(PA(o))return void(n=TA(0,o))}var a=XA(t,e);r.push(a)}),{angle:n,stops:r,type:1}},"-moz-linear-gradient":$A,"-ms-linear-gradient":$A,"-o-linear-gradient":$A,"-webkit-linear-gradient":$A,"radial-gradient":function(t,e){var n=0,r=3,i=[],o=[];return mA(e).forEach(function(e,a){var s=!0;if(0===a){var u=!1;s=e.reduce(function(t,e){if(u)if(hA(e))switch(e.value){case"center":return o.push(kA),t;case"top":case"left":return o.push(BA),t;case"right":case"bottom":return o.push(OA),t}else(xA(e)||wA(e))&&o.push(e);else if(hA(e))switch(e.value){case of:return n=0,!1;case af:return n=1,!1;case"at":return u=!0,!1;case tf:return r=0,!1;case sf:case ef:return r=1,!1;case uf:case nf:return r=2,!1;case rf:return r=3,!1}else if(wA(e)||xA(e))return Array.isArray(r)||(r=[]),r.push(e),!1;return t},s)}if(s){var c=XA(t,e);i.push(c)}}),{size:r,shape:n,stops:i,position:o,type:2}},"-moz-radial-gradient":cf,"-ms-radial-gradient":cf,"-o-radial-gradient":cf,"-webkit-radial-gradient":cf,"-webkit-gradient":function(t,e){var n=NA(180),r=[],i=1;return mA(e).forEach(function(e,n){var o=e[0];if(0===n){if(hA(o)&&"linear"===o.value)return void(i=1);if(hA(o)&&"radial"===o.value)return void(i=2)}if(18===o.type)if("from"===o.name){var a=LA(t,o.values[0]);r.push({stop:BA,color:a})}else if("to"===o.name)a=LA(t,o.values[0]),r.push({stop:OA,color:a});else if("color-stop"===o.name){var s=o.values.filter(yA);if(2===s.length){a=LA(t,s[1]);var u=s[0];dA(u)&&r.push({stop:{type:16,number:100*u.number,flags:u.flags},color:a})}}}),1===i?{angle:(n+NA(180))%NA(360),stops:r,type:i}:{size:3,shape:0,stops:r,position:[],type:i}}},ff={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(0===e.length)return[];var n=e[0];return 20===n.type&&"none"===n.value?[]:e.filter(function(t){return yA(t)&&function(t){return!(20===t.type&&"none"===t.value||18===t.type&&!Af[t.name])}(t)}).map(function(e){return lf(t,e)})}},df={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(t){if(hA(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},hf={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return mA(e).map(function(t){return t.filter(xA)}).map(EA)}},pf={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return mA(e).map(function(t){return t.filter(hA).map(function(t){return t.value}).join(" ")}).map(vf)}},vf=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}};!function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"}(HA||(HA={}));var gf,yf={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return mA(e).map(function(t){return t.filter(mf)})}},mf=function(t){return hA(t)||xA(t)},bf=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},wf=bf("top"),xf=bf("right"),Ef=bf("bottom"),Bf=bf("left"),kf=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(t,e){return EA(e.filter(xA))}}},Of=kf("top-left"),Cf=kf("top-right"),Mf=kf("bottom-right"),Sf=kf("bottom-left"),Ff=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,e){switch(e){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},Tf=Ff("top"),Pf=Ff("right"),If=Ff("bottom"),Nf=Ff("left"),Lf=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return fA(e)?e.number:0}}},_f=Lf("top"),Qf=Lf("right"),Uf=Lf("bottom"),jf=Lf("left"),Df={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Rf={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){return"rtl"===e?1:0}},Hf={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(hA).reduce(function(t,e){return t|zf(e.value)},0)}},zf=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Kf={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Gf={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return 20===e.type&&"normal"===e.value?0:17===e.type||15===e.type?e.number:0}};!function(t){t.NORMAL="normal",t.STRICT="strict"}(gf||(gf={}));var Vf,Wf={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){return"strict"===e?gf.STRICT:gf.NORMAL}},Yf={name:"line-height",initialValue:"normal",prefix:!1,type:4},Xf=function(t,e){return hA(t)&&"normal"===t.value?1.2*e:17===t.type?e*t.number:xA(t)?MA(t,e):e},qf={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return 20===e.type&&"none"===e.value?null:lf(t,e)}},Zf={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){return"inside"===e?0:1}},Jf={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},$f=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},td=$f("top"),ed=$f("right"),nd=$f("bottom"),rd=$f("left"),id={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(hA).map(function(t){switch(t.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}})}},od={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){return"break-word"===e?"break-word":"normal"}},ad=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},sd=ad("top"),ud=ad("right"),cd=ad("bottom"),ld=ad("left"),Ad={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},fd={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},dd={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return 1===e.length&&vA(e[0],"none")?[]:mA(e).map(function(e){for(var n={color:VA.TRANSPARENT,offsetX:BA,offsetY:BA,blur:BA},r=0,i=0;i<e.length;i++){var o=e[i];wA(o)?(0===r?n.offsetX=o:1===r?n.offsetY=o:n.blur=o,r++):n.color=LA(t,o)}return n})}},hd={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},pd={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(20===e.type&&"none"===e.value)return null;if(18===e.type){var n=vd[e.name];if(void 0===n)throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return n(e.values)}return null}},vd={matrix:function(t){var e=t.filter(function(t){return 17===t.type}).map(function(t){return t.number});return 6===e.length?e:null},matrix3d:function(t){var e=t.filter(function(t){return 17===t.type}).map(function(t){return t.number}),n=e[0],r=e[1];e[2],e[3];var i=e[4],o=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var a=e[12],s=e[13];return e[14],e[15],16===e.length?[n,r,i,o,a,s]:null}},gd={type:16,number:50,flags:4},yd=[gd,gd],md={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var n=e.filter(xA);return 2!==n.length?yd:[n[0],n[1]]}},bd={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;default:return 0}}};!function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"}(Vf||(Vf={}));for(var wd={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return Vf.BREAK_ALL;case"keep-all":return Vf.KEEP_ALL;default:return Vf.NORMAL}}},xd={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(20===e.type)return{auto:!0,order:0};if(dA(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},Ed=function(t,e){if(15===e.type)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")},Bd={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return dA(e)?e.number:1}},kd={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Od={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(hA).map(function(t){switch(t.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(t){return 0!==t})}},Cd={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var n=[],r=[];return e.forEach(function(t){switch(t.type){case 20:case 0:n.push(t.value);break;case 17:n.push(t.number.toString());break;case 4:r.push(n.join(" ")),n.length=0}}),n.length&&r.push(n.join(" ")),r.map(function(t){return-1===t.indexOf(" ")?t:"'"+t+"'"})}},Md={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},Sd={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){return dA(e)?e.number:hA(e)&&"bold"===e.value?700:400}},Fd={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(hA).map(function(t){return t.value})}},Td={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},Pd=function(t,e){return 0!==(t&e)},Id={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(0===e.length)return[];var n=e[0];return 20===n.type&&"none"===n.value?[]:e}},Nd={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(0===e.length)return null;var n=e[0];if(20===n.type&&"none"===n.value)return null;for(var r=[],i=e.filter(gA),o=0;o<i.length;o++){var a=i[o],s=i[o+1];if(20===a.type){var u=s&&dA(s)?s.number:1;r.push({counter:a.value,increment:u})}}return r}},Ld={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(0===e.length)return[];for(var n=[],r=e.filter(gA),i=0;i<r.length;i++){var o=r[i],a=r[i+1];if(hA(o)&&"none"!==o.value){var s=a&&dA(a)?a.number:0;n.push({counter:o.value,reset:s})}}return n}},_d={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(fA).map(function(t){return Ed(0,t)})}},Qd={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(0===e.length)return null;var n=e[0];if(20===n.type&&"none"===n.value)return null;var r=[],i=e.filter(pA);if(i.length%2!=0)return null;for(var o=0;o<i.length;o+=2){var a=i[o].value,s=i[o+1].value;r.push({open:a,close:s})}return r}},Ud=function(t,e,n){if(!t)return"";var r=t[Math.min(e,t.length-1)];return r?n?r.open:r.close:""},jd={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return 1===e.length&&vA(e[0],"none")?[]:mA(e).map(function(e){for(var n={color:255,offsetX:BA,offsetY:BA,blur:BA,spread:BA,inset:!1},r=0,i=0;i<e.length;i++){var o=e[i];vA(o,"inset")?n.inset=!0:wA(o)?(0===r?n.offsetX=o:1===r?n.offsetY=o:2===r?n.blur=o:n.spread=o,r++):n.color=LA(t,o)}return n})}},Dd={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var n=[];return e.filter(hA).forEach(function(t){switch(t.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2)}}),[0,1,2].forEach(function(t){-1===n.indexOf(t)&&n.push(t)}),n}},Rd={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Hd={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return fA(e)?e.number:0}},zd=function(){function t(t,e){var n,r;this.animationDuration=Vd(t,_d,e.animationDuration),this.backgroundClip=Vd(t,WA,e.backgroundClip),this.backgroundColor=Vd(t,YA,e.backgroundColor),this.backgroundImage=Vd(t,ff,e.backgroundImage),this.backgroundOrigin=Vd(t,df,e.backgroundOrigin),this.backgroundPosition=Vd(t,hf,e.backgroundPosition),this.backgroundRepeat=Vd(t,pf,e.backgroundRepeat),this.backgroundSize=Vd(t,yf,e.backgroundSize),this.borderTopColor=Vd(t,wf,e.borderTopColor),this.borderRightColor=Vd(t,xf,e.borderRightColor),this.borderBottomColor=Vd(t,Ef,e.borderBottomColor),this.borderLeftColor=Vd(t,Bf,e.borderLeftColor),this.borderTopLeftRadius=Vd(t,Of,e.borderTopLeftRadius),this.borderTopRightRadius=Vd(t,Cf,e.borderTopRightRadius),this.borderBottomRightRadius=Vd(t,Mf,e.borderBottomRightRadius),this.borderBottomLeftRadius=Vd(t,Sf,e.borderBottomLeftRadius),this.borderTopStyle=Vd(t,Tf,e.borderTopStyle),this.borderRightStyle=Vd(t,Pf,e.borderRightStyle),this.borderBottomStyle=Vd(t,If,e.borderBottomStyle),this.borderLeftStyle=Vd(t,Nf,e.borderLeftStyle),this.borderTopWidth=Vd(t,_f,e.borderTopWidth),this.borderRightWidth=Vd(t,Qf,e.borderRightWidth),this.borderBottomWidth=Vd(t,Uf,e.borderBottomWidth),this.borderLeftWidth=Vd(t,jf,e.borderLeftWidth),this.boxShadow=Vd(t,jd,e.boxShadow),this.color=Vd(t,Df,e.color),this.direction=Vd(t,Rf,e.direction),this.display=Vd(t,Hf,e.display),this.float=Vd(t,Kf,e.cssFloat),this.fontFamily=Vd(t,Cd,e.fontFamily),this.fontSize=Vd(t,Md,e.fontSize),this.fontStyle=Vd(t,Td,e.fontStyle),this.fontVariant=Vd(t,Fd,e.fontVariant),this.fontWeight=Vd(t,Sd,e.fontWeight),this.letterSpacing=Vd(t,Gf,e.letterSpacing),this.lineBreak=Vd(t,Wf,e.lineBreak),this.lineHeight=Vd(t,Yf,e.lineHeight),this.listStyleImage=Vd(t,qf,e.listStyleImage),this.listStylePosition=Vd(t,Zf,e.listStylePosition),this.listStyleType=Vd(t,Jf,e.listStyleType),this.marginTop=Vd(t,td,e.marginTop),this.marginRight=Vd(t,ed,e.marginRight),this.marginBottom=Vd(t,nd,e.marginBottom),this.marginLeft=Vd(t,rd,e.marginLeft),this.opacity=Vd(t,Bd,e.opacity);var i=Vd(t,id,e.overflow);this.overflowX=i[0],this.overflowY=i[i.length>1?1:0],this.overflowWrap=Vd(t,od,e.overflowWrap),this.paddingTop=Vd(t,sd,e.paddingTop),this.paddingRight=Vd(t,ud,e.paddingRight),this.paddingBottom=Vd(t,cd,e.paddingBottom),this.paddingLeft=Vd(t,ld,e.paddingLeft),this.paintOrder=Vd(t,Dd,e.paintOrder),this.position=Vd(t,fd,e.position),this.textAlign=Vd(t,Ad,e.textAlign),this.textDecorationColor=Vd(t,kd,null!==(n=e.textDecorationColor)&&void 0!==n?n:e.color),this.textDecorationLine=Vd(t,Od,null!==(r=e.textDecorationLine)&&void 0!==r?r:e.textDecoration),this.textShadow=Vd(t,dd,e.textShadow),this.textTransform=Vd(t,hd,e.textTransform),this.transform=Vd(t,pd,e.transform),this.transformOrigin=Vd(t,md,e.transformOrigin),this.visibility=Vd(t,bd,e.visibility),this.webkitTextStrokeColor=Vd(t,Rd,e.webkitTextStrokeColor),this.webkitTextStrokeWidth=Vd(t,Hd,e.webkitTextStrokeWidth),this.wordBreak=Vd(t,wd,e.wordBreak),this.zIndex=Vd(t,xd,e.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&0===this.visibility},t.prototype.isTransparent=function(){return _A(this.backgroundColor)},t.prototype.isTransformed=function(){return null!==this.transform},t.prototype.isPositioned=function(){return 0!==this.position},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return 0!==this.float},t.prototype.isInlineLevel=function(){return Pd(this.display,4)||Pd(this.display,33554432)||Pd(this.display,268435456)||Pd(this.display,536870912)||Pd(this.display,67108864)||Pd(this.display,134217728)},t}(),Kd=function(t,e){this.content=Vd(t,Id,e.content),this.quotes=Vd(t,Qd,e.quotes)},Gd=function(t,e){this.counterIncrement=Vd(t,Nd,e.counterIncrement),this.counterReset=Vd(t,Ld,e.counterReset)},Vd=function(t,e,n){var r=new lA,i=null!=n?n.toString():e.initialValue;r.write(i);var o=new AA(r.read());switch(e.type){case 2:var a=o.parseComponentValue();return e.parse(t,hA(a)?a.value:e.initialValue);case 0:return e.parse(t,o.parseComponentValue());case 1:return e.parse(t,o.parseComponentValues());case 4:return o.parseComponentValue();case 3:switch(e.format){case"angle":return TA(0,o.parseComponentValue());case"color":return LA(t,o.parseComponentValue());case"image":return lf(t,o.parseComponentValue());case"length":var s=o.parseComponentValue();return wA(s)?s:BA;case"length-percentage":var u=o.parseComponentValue();return xA(u)?u:BA;case"time":return Ed(0,o.parseComponentValue())}}},Wd=function(t,e){var n=function(t){switch(t.getAttribute("data-html2canvas-debug")){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}}(t);return 1===n||e===n},Yd=function(t,e){this.context=t,this.textNodes=[],this.elements=[],this.flags=0,Wd(e,3),this.styles=new zd(t,window.getComputedStyle(e,null)),Wh(e)&&(this.styles.animationDuration.some(function(t){return t>0})&&(e.style.animationDuration="0s"),null!==this.styles.transform&&(e.style.transform="none")),this.bounds=Nc(this.context,e),Wd(e,4)&&(this.flags|=16)},Xd="undefined"==typeof Uint8Array?[]:new Uint8Array(256),qd=0;qd<64;qd++)Xd["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(qd)]=qd;for(var Zd=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},Jd=function(){function t(t,e,n,r,i,o){this.initialValue=t,this.errorValue=e,this.highStart=n,this.highValueIndex=r,this.index=i,this.data=o}return t.prototype.get=function(t){var e;if(t>=0){if(t<55296||t>56319&&t<=65535)return e=((e=this.index[t>>5])<<2)+(31&t),this.data[e];if(t<=65535)return e=((e=this.index[2048+(t-55296>>5)])<<2)+(31&t),this.data[e];if(t<this.highStart)return e=2080+(t>>11),e=this.index[e],e+=t>>5&63,e=((e=this.index[e])<<2)+(31&t),this.data[e];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),$d="undefined"==typeof Uint8Array?[]:new Uint8Array(256),th=0;th<64;th++)$d["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(th)]=th;var eh,nh=8,rh=9,ih=11,oh=12,ah=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],i=-1,o="";++i<n;){var a=t[i];a<=65535?r.push(a):(a-=65536,r.push(55296+(a>>10),a%1024+56320)),(i+1===n||r.length>16384)&&(o+=String.fromCharCode.apply(String,r),r.length=0)}return o},sh=function(){var t,e,n,r=function(t){var e,n,r,i,o,a=.75*t.length,s=t.length,u=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var c="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(a):new Array(a),l=Array.isArray(c)?c:new Uint8Array(c);for(e=0;e<s;e+=4)n=Xd[t.charCodeAt(e)],r=Xd[t.charCodeAt(e+1)],i=Xd[t.charCodeAt(e+2)],o=Xd[t.charCodeAt(e+3)],l[u++]=n<<2|r>>4,l[u++]=(15&r)<<4|i>>2,l[u++]=(3&i)<<6|63&o;return c}("AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA="),i=Array.isArray(r)?function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n}(r):new Uint32Array(r),o=Array.isArray(r)?function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n}(r):new Uint16Array(r),a=Zd(o,12,i[4]/2),s=2===i[5]?Zd(o,(24+i[4])/2):(t=i,e=Math.ceil((24+i[4])/4),t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n)));return new Jd(i[0],i[1],i[2],i[3],a,s)}(),uh="",ch=function(t){return sh.get(t)},lh=function(t,e,n){var r=n-2,i=e[r],o=e[n-1],a=e[n];if(2===o&&3===a)return uh;if(2===o||3===o||4===o)return"";if(2===a||3===a||4===a)return"";if(o===nh&&-1!==[nh,rh,ih,oh].indexOf(a))return uh;if(!(o!==ih&&o!==rh||a!==rh&&10!==a))return uh;if((o===oh||10===o)&&10===a)return uh;if(13===a||5===a)return uh;if(7===a)return uh;if(1===o)return uh;if(13===o&&14===a){for(;5===i;)i=e[--r];if(14===i)return uh}if(15===o&&15===a){for(var s=0;15===i;)s++,i=e[--r];if(s%2==0)return uh}return""},Ah=function(t){var e=function(t){for(var e=[],n=0,r=t.length;n<r;){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=t.charCodeAt(n++);56320==(64512&o)?e.push(((1023&i)<<10)+(1023&o)+65536):(e.push(i),n--)}else e.push(i)}return e}(t),n=e.length,r=0,i=0,o=e.map(ch);return{next:function(){if(r>=n)return{done:!0,value:null};for(var t=uh;r<n&&(t=lh(0,o,++r))===uh;);if(t!==uh||r===n){var a=ah.apply(null,e.slice(i,r));return i=r,{value:a,done:!1}}return{done:!0,value:null}}}},fh=function(t){return 0===t[0]&&255===t[1]&&0===t[2]&&255===t[3]},dh=function(t,e,n,r,i){var o="http://www.w3.org/2000/svg",a=document.createElementNS(o,"svg"),s=document.createElementNS(o,"foreignObject");return a.setAttributeNS(null,"width",t.toString()),a.setAttributeNS(null,"height",e.toString()),s.setAttributeNS(null,"width","100%"),s.setAttributeNS(null,"height","100%"),s.setAttributeNS(null,"x",n.toString()),s.setAttributeNS(null,"y",r.toString()),s.setAttributeNS(null,"externalResourcesRequired","true"),a.appendChild(s),s.appendChild(i),a},hh=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){return e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(t))})},ph={get SUPPORT_RANGE_BOUNDS(){var t=function(t){if(t.createRange){var e=t.createRange();if(e.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height="123px",n.style.display="block",t.body.appendChild(n),e.selectNode(n);var r=e.getBoundingClientRect(),i=Math.round(r.height);if(t.body.removeChild(n),123===i)return!0}}return!1}(document);return Object.defineProperty(ph,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=ph.SUPPORT_RANGE_BOUNDS&&function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var n=t.createRange();e.innerHTML="function"==typeof"".repeat?"&#128104;".repeat(10):"";var r=e.firstChild,i=Lc(r.data).map(function(t){return _c(t)}),o=0,a={},s=i.every(function(t,e){n.setStart(r,o),n.setEnd(r,o+t.length);var i=n.getBoundingClientRect();o+=t.length;var s=i.x>a.x||i.y>a.y;return a=i,0===e||s});return t.body.removeChild(e),s}(document);return Object.defineProperty(ph,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=function(t){var e=new Image,n=t.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),n.toDataURL()}catch(t){return!1}return!0}(document);return Object.defineProperty(ph,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t="function"==typeof Array.from&&"function"==typeof window.fetch?function(t){var e=t.createElement("canvas"),n=100;e.width=n,e.height=n;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var i=new Image,o=e.toDataURL();i.src=o;var a=dh(n,n,0,0,i);return r.fillStyle="red",r.fillRect(0,0,n,n),hh(a).then(function(e){r.drawImage(e,0,0);var i=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var a=t.createElement("div");return a.style.backgroundImage="url("+o+")",a.style.height=n+"px",fh(i)?hh(dh(n,n,0,0,a)):Promise.reject(!1)}).then(function(t){return r.drawImage(t,0,0),fh(r.getImageData(0,0,n,n).data)}).catch(function(){return!1})}(document):Promise.resolve(!1);return Object.defineProperty(ph,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=void 0!==(new Image).crossOrigin;return Object.defineProperty(ph,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t="string"==typeof(new XMLHttpRequest).responseType;return Object.defineProperty(ph,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(ph,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!("undefined"==typeof Intl||!Intl.Segmenter);return Object.defineProperty(ph,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},vh=function(t,e){this.text=t,this.bounds=e},gh=function(t,e,n){var r=t.ownerDocument;if(!r)throw new Error("Node has no owner document");var i=r.createRange();return i.setStart(t,e),i.setEnd(t,e+n),i},yh=function(t){if(ph.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(t){return t.segment})}return function(t){for(var e,n=Ah(t),r=[];!(e=n.next()).done;)e.value&&r.push(e.value.slice());return r}(t)},mh=[32,160,4961,65792,65793,4153,4241],bh=function(t,e){for(var n,r=function(t,e){var n=Lc(t),r=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var n=function(t,e){void 0===e&&(e="strict");var n=[],r=[],i=[];return t.forEach(function(t,o){var a=yl.get(t);if(a>50?(i.push(!0),a-=50):i.push(!1),-1!==["normal","auto","loose"].indexOf(e)&&-1!==[8208,8211,12316,12448].indexOf(t))return r.push(o),n.push(16);if(4===a||11===a){if(0===o)return r.push(o),n.push(ol);var s=n[o-1];return-1===El.indexOf(s)?(r.push(r[o-1]),n.push(s)):(r.push(o),n.push(ol))}return r.push(o),31===a?n.push("strict"===e?Jc:ll):a===hl||29===a?n.push(ol):43===a?t>=131072&&t<=196605||t>=196608&&t<=262141?n.push(ll):n.push(ol):void n.push(a)}),[r,n,i]}(t,e.lineBreak),r=n[0],i=n[1],o=n[2];return"break-all"!==e.wordBreak&&"break-word"!==e.wordBreak||(i=i.map(function(t){return-1!==[el,ol,hl].indexOf(t)?ll:t})),[r,i,"keep-all"===e.wordBreak?o.map(function(e,n){return e&&t[n]>=19968&&t[n]<=40959}):void 0]}(n,e),i=r[0],o=r[1],a=r[2],s=n.length,u=0,c=0;return{next:function(){if(c>=s)return{done:!0,value:null};for(var t=vl;c<s&&(t=Ml(n,o,i,++c,a))===vl;);if(t!==vl||c===s){var e=new Sl(n,t,u,c);return u=c,{value:e,done:!1}}return{done:!0,value:null}}}}(t,{lineBreak:e.lineBreak,wordBreak:"break-word"===e.overflowWrap?"break-word":e.wordBreak}),i=[],o=function(){if(n.value){var t=n.value.slice(),e=Lc(t),r="";e.forEach(function(t){-1===mh.indexOf(t)?r+=_c(t):(r.length&&i.push(r),i.push(_c(t)),r="")}),r.length&&i.push(r)}};!(n=r.next()).done;)o();return i},wh=function(t,e,n){this.text=xh(e.data,n.textTransform),this.textBounds=function(t,e,n,r){var i=function(t,e){return 0!==e.letterSpacing?yh(t):function(t,e){if(ph.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(t)).map(function(t){return t.segment})}return bh(t,e)}(t,e)}(e,n),o=[],a=0;return i.forEach(function(e){if(n.textDecorationLine.length||e.trim().length>0)if(ph.SUPPORT_RANGE_BOUNDS){var i=gh(r,a,e.length).getClientRects();if(i.length>1){var s=yh(e),u=0;s.forEach(function(e){o.push(new vh(e,Ic.fromDOMRectList(t,gh(r,u+a,e.length).getClientRects()))),u+=e.length})}else o.push(new vh(e,Ic.fromDOMRectList(t,i)))}else{var c=r.splitText(e.length);o.push(new vh(e,function(t,e){var n=e.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var i=e.parentNode;if(i){i.replaceChild(r,e);var o=Nc(t,r);return r.firstChild&&i.replaceChild(r.firstChild,r),o}}return Ic.EMPTY}(t,r))),r=c}else ph.SUPPORT_RANGE_BOUNDS||(r=r.splitText(e.length));a+=e.length}),o}(t,this.text,n,e)},xh=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(Eh,Bh);case 2:return t.toUpperCase();default:return t}},Eh=/(^|\s|:|-|\(|\))([a-z])/g,Bh=function(t,e,n){return t.length>0?e+n.toUpperCase():t},kh=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.src=n.currentSrc||n.src,r.intrinsicWidth=n.naturalWidth,r.intrinsicHeight=n.naturalHeight,r.context.cache.addImage(r.src),r}return Sc(e,t),e}(Yd),Oh=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.canvas=n,r.intrinsicWidth=n.width,r.intrinsicHeight=n.height,r}return Sc(e,t),e}(Yd),Ch=function(t){function e(e,n){var r=t.call(this,e,n)||this,i=new XMLSerializer,o=Nc(e,n);return n.setAttribute("width",o.width+"px"),n.setAttribute("height",o.height+"px"),r.svg="data:image/svg+xml,"+encodeURIComponent(i.serializeToString(n)),r.intrinsicWidth=n.width.baseVal.value,r.intrinsicHeight=n.height.baseVal.value,r.context.cache.addImage(r.svg),r}return Sc(e,t),e}(Yd),Mh=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.value=n.value,r}return Sc(e,t),e}(Yd),Sh=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.start=n.start,r.reversed="boolean"==typeof n.reversed&&!0===n.reversed,r}return Sc(e,t),e}(Yd),Fh=[{type:15,flags:0,unit:"px",number:3}],Th=[{type:16,flags:0,number:50}],Ph="checkbox",Ih="radio",Nh=707406591,Lh=function(t){function e(e,n){var r=t.call(this,e,n)||this;switch(r.type=n.type.toLowerCase(),r.checked=n.checked,r.value=function(t){var e="password"===t.type?new Array(t.value.length+1).join(""):t.value;return 0===e.length?t.placeholder||"":e}(n),r.type!==Ph&&r.type!==Ih||(r.styles.backgroundColor=3739148031,r.styles.borderTopColor=r.styles.borderRightColor=r.styles.borderBottomColor=r.styles.borderLeftColor=2779096575,r.styles.borderTopWidth=r.styles.borderRightWidth=r.styles.borderBottomWidth=r.styles.borderLeftWidth=1,r.styles.borderTopStyle=r.styles.borderRightStyle=r.styles.borderBottomStyle=r.styles.borderLeftStyle=1,r.styles.backgroundClip=[0],r.styles.backgroundOrigin=[0],r.bounds=function(t){return t.width>t.height?new Ic(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new Ic(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t}(r.bounds)),r.type){case Ph:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=Fh;break;case Ih:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=Th}return r}return Sc(e,t),e}(Yd),_h=function(t){function e(e,n){var r=t.call(this,e,n)||this,i=n.options[n.selectedIndex||0];return r.value=i&&i.text||"",r}return Sc(e,t),e}(Yd),Qh=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.value=n.value,r}return Sc(e,t),e}(Yd),Uh=function(t){function e(e,n){var r=t.call(this,e,n)||this;r.src=n.src,r.width=parseInt(n.width,10)||0,r.height=parseInt(n.height,10)||0,r.backgroundColor=r.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){r.tree=Hh(e,n.contentWindow.document.documentElement);var i=n.contentWindow.document.documentElement?GA(e,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):VA.TRANSPARENT,o=n.contentWindow.document.body?GA(e,getComputedStyle(n.contentWindow.document.body).backgroundColor):VA.TRANSPARENT;r.backgroundColor=_A(i)?_A(o)?r.styles.backgroundColor:o:i}}catch(t){}return r}return Sc(e,t),e}(Yd),jh=["OL","UL","MENU"],Dh=function(t,e,n,r){for(var i=e.firstChild,o=void 0;i;i=o)if(o=i.nextSibling,Gh(i)&&i.data.trim().length>0)n.textNodes.push(new wh(t,i,n.styles));else if(Vh(i))if(sp(i)&&i.assignedNodes)i.assignedNodes().forEach(function(e){return Dh(t,e,n,r)});else{var a=Rh(t,i);a.styles.isVisible()&&(zh(i,a,r)?a.flags|=4:Kh(a.styles)&&(a.flags|=2),-1!==jh.indexOf(i.tagName)&&(a.flags|=8),n.elements.push(a),i.slot,i.shadowRoot?Dh(t,i.shadowRoot,a,r):op(i)||Jh(i)||ap(i)||Dh(t,i,a,r))}},Rh=function(t,e){return np(e)?new kh(t,e):tp(e)?new Oh(t,e):Jh(e)?new Ch(t,e):Xh(e)?new Mh(t,e):qh(e)?new Sh(t,e):Zh(e)?new Lh(t,e):ap(e)?new _h(t,e):op(e)?new Qh(t,e):rp(e)?new Uh(t,e):new Yd(t,e)},Hh=function(t,e){var n=Rh(t,e);return n.flags|=4,Dh(t,e,n,n),n},zh=function(t,e,n){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||$h(t)&&n.styles.isTransparent()},Kh=function(t){return t.isPositioned()||t.isFloating()},Gh=function(t){return t.nodeType===Node.TEXT_NODE},Vh=function(t){return t.nodeType===Node.ELEMENT_NODE},Wh=function(t){return Vh(t)&&void 0!==t.style&&!Yh(t)},Yh=function(t){return"object"==typeof t.className},Xh=function(t){return"LI"===t.tagName},qh=function(t){return"OL"===t.tagName},Zh=function(t){return"INPUT"===t.tagName},Jh=function(t){return"svg"===t.tagName},$h=function(t){return"BODY"===t.tagName},tp=function(t){return"CANVAS"===t.tagName},ep=function(t){return"VIDEO"===t.tagName},np=function(t){return"IMG"===t.tagName},rp=function(t){return"IFRAME"===t.tagName},ip=function(t){return"STYLE"===t.tagName},op=function(t){return"TEXTAREA"===t.tagName},ap=function(t){return"SELECT"===t.tagName},sp=function(t){return"SLOT"===t.tagName},up=function(t){return t.tagName.indexOf("-")>0},cp=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(t){var e=this.counters[t];return e&&e.length?e[e.length-1]:1},t.prototype.getCounterValues=function(t){return this.counters[t]||[]},t.prototype.pop=function(t){var e=this;t.forEach(function(t){return e.counters[t].pop()})},t.prototype.parse=function(t){var e=this,n=t.counterIncrement,r=t.counterReset,i=!0;null!==n&&n.forEach(function(t){var n=e.counters[t.counter];n&&0!==t.increment&&(i=!1,n.length||n.push(1),n[Math.max(0,n.length-1)]+=t.increment)});var o=[];return i&&r.forEach(function(t){var n=e.counters[t.counter];o.push(t.counter),n||(n=e.counters[t.counter]=[]),n.push(t.reset)}),o},t}(),lp={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Ap={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},fp={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},dp={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},hp=function(t,e,n,r,i,o){return t<e||t>n?Ep(t,i,o.length>0):r.integers.reduce(function(e,n,i){for(;t>=n;)t-=n,e+=r.values[i];return e},"")+o},pp=function(t,e,n,r){var i="";do{n||t--,i=r(t)+i,t/=e}while(t*e>=e);return i},vp=function(t,e,n,r,i){var o=n-e+1;return(t<0?"-":"")+(pp(Math.abs(t),o,r,function(t){return _c(Math.floor(t%o)+e)})+i)},gp=function(t,e,n){void 0===n&&(n=". ");var r=e.length;return pp(Math.abs(t),r,!1,function(t){return e[Math.floor(t%r)]})+n},yp=function(t,e,n,r,i,o){if(t<-9999||t>9999)return Ep(t,4,i.length>0);var a=Math.abs(t),s=i;if(0===a)return e[0]+s;for(var u=0;a>0&&u<=4;u++){var c=a%10;0===c&&Pd(o,1)&&""!==s?s=e[c]+s:c>1||1===c&&0===u||1===c&&1===u&&Pd(o,2)||1===c&&1===u&&Pd(o,4)&&t>100||1===c&&u>1&&Pd(o,8)?s=e[c]+(u>0?n[u-1]:"")+s:1===c&&u>0&&(s=n[u-1]+s),a=Math.floor(a/10)}return(t<0?r:"")+s},mp="",bp="",wp="",xp="",Ep=function(t,e,n){var r=n?". ":"",i=n?"":"",o=n?", ":"",a=n?" ":"";switch(e){case 0:return""+a;case 1:return""+a;case 2:return""+a;case 5:var s=vp(t,48,57,!0,r);return s.length<4?"0"+s:s;case 4:return gp(t,"",i);case 6:return hp(t,1,3999,lp,3,r).toLowerCase();case 7:return hp(t,1,3999,lp,3,r);case 8:return vp(t,945,969,!1,r);case 9:return vp(t,97,122,!1,r);case 10:return vp(t,65,90,!1,r);case 11:return vp(t,1632,1641,!0,r);case 12:case 49:return hp(t,1,9999,Ap,3,r);case 35:return hp(t,1,9999,Ap,3,r).toLowerCase();case 13:return vp(t,2534,2543,!0,r);case 14:case 30:return vp(t,6112,6121,!0,r);case 15:return gp(t,"",i);case 16:return gp(t,"",i);case 17:case 48:return yp(t,"",mp,"",i,14);case 47:return yp(t,"",bp,"",i,15);case 42:return yp(t,"",mp,"",i,14);case 41:return yp(t,"",bp,"",i,15);case 26:return yp(t,"","",wp,i,0);case 25:return yp(t,"","",wp,i,7);case 31:return yp(t,"","",xp,o,7);case 33:return yp(t,"","",xp,o,0);case 32:return yp(t,"","",xp,o,7);case 18:return vp(t,2406,2415,!0,r);case 20:return hp(t,1,19999,dp,3,r);case 21:return vp(t,2790,2799,!0,r);case 22:return vp(t,2662,2671,!0,r);case 22:return hp(t,1,10999,fp,3,r);case 23:return gp(t,"");case 24:return gp(t,"");case 27:return vp(t,3302,3311,!0,r);case 28:return gp(t,"",i);case 29:return gp(t,"",i);case 34:return vp(t,3792,3801,!0,r);case 37:return vp(t,6160,6169,!0,r);case 38:return vp(t,4160,4169,!0,r);case 39:return vp(t,2918,2927,!0,r);case 40:return vp(t,1776,1785,!0,r);case 43:return vp(t,3046,3055,!0,r);case 44:return vp(t,3174,3183,!0,r);case 45:return vp(t,3664,3673,!0,r);case 46:return vp(t,3872,3881,!0,r);default:return vp(t,48,57,!0,r)}},Bp="data-html2canvas-ignore";!function(){function t(t,e,n){if(this.context=t,this.options=n,this.scrolledElements=[],this.referenceElement=e,this.counters=new cp,this.quoteDepth=0,!e.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(e.ownerDocument.documentElement,!1)}t.prototype.toIFrame=function(t,e){var n=this,r=Op(t,e);if(!r.contentWindow)return Promise.reject("Unable to find iframe window");var i=t.defaultView.pageXOffset,o=t.defaultView.pageYOffset,a=r.contentWindow,s=a.document,u=Sp(r).then(function(){return Fc(n,void 0,void 0,function(){var t,n;return Tc(this,function(i){switch(i.label){case 0:return this.scrolledElements.forEach(Np),a&&(a.scrollTo(e.left,e.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||a.scrollY===e.top&&a.scrollX===e.left||(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(a.scrollX-e.left,a.scrollY-e.top,0,0))),t=this.options.onclone,void 0===(n=this.clonedReferenceElement)?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:s.fonts&&s.fonts.ready?[4,s.fonts.ready]:[3,2];case 1:i.sent(),i.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Mp(s)]:[3,4];case 3:i.sent(),i.label=4;case 4:return"function"==typeof t?[2,Promise.resolve().then(function(){return t(s,n)}).then(function(){return r})]:[2,r]}})})});return s.open(),s.write(Pp(document.doctype)+"<html></html>"),Ip(this.referenceElement.ownerDocument,i,o),s.replaceChild(s.adoptNode(this.documentElement),s.documentElement),s.close(),u},t.prototype.createElementClone=function(t){if(Wd(t,2),tp(t))return this.createCanvasClone(t);if(ep(t))return this.createVideoClone(t);if(ip(t))return this.createStyleClone(t);var e=t.cloneNode(!1);return np(e)&&(np(t)&&t.currentSrc&&t.currentSrc!==t.src&&(e.src=t.currentSrc,e.srcset=""),"lazy"===e.loading&&(e.loading="eager")),up(e)?this.createCustomElementClone(e):e},t.prototype.createCustomElementClone=function(t){var e=document.createElement("html2canvascustomelement");return Tp(t.style,e),e},t.prototype.createStyleClone=function(t){try{var e=t.sheet;if(e&&e.cssRules){var n=[].slice.call(e.cssRules,0).reduce(function(t,e){return e&&"string"==typeof e.cssText?t+e.cssText:t},""),r=t.cloneNode(!1);return r.textContent=n,r}}catch(t){if(this.context.logger.error("Unable to access cssRules property",t),"SecurityError"!==t.name)throw t}return t.cloneNode(!1)},t.prototype.createCanvasClone=function(t){var e;if(this.options.inlineImages&&t.ownerDocument){var n=t.ownerDocument.createElement("img");try{return n.src=t.toDataURL(),n}catch(e){this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var r=t.cloneNode(!1);try{r.width=t.width,r.height=t.height;var i=t.getContext("2d"),o=r.getContext("2d");if(o)if(!this.options.allowTaint&&i)o.putImageData(i.getImageData(0,0,t.width,t.height),0,0);else{var a=null!==(e=t.getContext("webgl2"))&&void 0!==e?e:t.getContext("webgl");if(a){var s=a.getContextAttributes();!1===(null==s?void 0:s.preserveDrawingBuffer)&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}o.drawImage(t,0,0)}return r}catch(e){this.context.logger.info("Unable to clone canvas as it is tainted",t)}return r},t.prototype.createVideoClone=function(t){var e=t.ownerDocument.createElement("canvas");e.width=t.offsetWidth,e.height=t.offsetHeight;var n=e.getContext("2d");try{return n&&(n.drawImage(t,0,0,e.width,e.height),this.options.allowTaint||n.getImageData(0,0,e.width,e.height)),e}catch(e){this.context.logger.info("Unable to clone video as it is tainted",t)}var r=t.ownerDocument.createElement("canvas");return r.width=t.offsetWidth,r.height=t.offsetHeight,r},t.prototype.appendChildNode=function(t,e,n){Vh(e)&&(function(t){return"SCRIPT"===t.tagName}(e)||e.hasAttribute(Bp)||"function"==typeof this.options.ignoreElements&&this.options.ignoreElements(e))||this.options.copyStyles&&Vh(e)&&ip(e)||t.appendChild(this.cloneNode(e,n))},t.prototype.cloneChildNodes=function(t,e,n){for(var r=this,i=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;i;i=i.nextSibling)if(Vh(i)&&sp(i)&&"function"==typeof i.assignedNodes){var o=i.assignedNodes();o.length&&o.forEach(function(t){return r.appendChildNode(e,t,n)})}else this.appendChildNode(e,i,n)},t.prototype.cloneNode=function(t,e){if(Gh(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var n=t.ownerDocument.defaultView;if(n&&Vh(t)&&(Wh(t)||Yh(t))){var r=this.createElementClone(t);r.style.transitionProperty="none";var i=n.getComputedStyle(t),o=n.getComputedStyle(t,":before"),a=n.getComputedStyle(t,":after");this.referenceElement===t&&Wh(r)&&(this.clonedReferenceElement=r),$h(r)&&Up(r);var s=this.counters.parse(new Gd(this.context,i)),u=this.resolvePseudoContent(t,r,o,eh.BEFORE);up(t)&&(e=!0),ep(t)||this.cloneChildNodes(t,r,e),u&&r.insertBefore(u,r.firstChild);var c=this.resolvePseudoContent(t,r,a,eh.AFTER);return c&&r.appendChild(c),this.counters.pop(s),(i&&(this.options.copyStyles||Yh(t))&&!rp(t)||e)&&Tp(i,r),0===t.scrollTop&&0===t.scrollLeft||this.scrolledElements.push([r,t.scrollLeft,t.scrollTop]),(op(t)||ap(t))&&(op(r)||ap(r))&&(r.value=t.value),r}return t.cloneNode(!1)},t.prototype.resolvePseudoContent=function(t,e,n,r){var i=this;if(n){var o=n.content,a=e.ownerDocument;if(a&&o&&"none"!==o&&"-moz-alt-content"!==o&&"none"!==n.display){this.counters.parse(new Gd(this.context,n));var s=new Kd(this.context,n),u=a.createElement("html2canvaspseudoelement");Tp(n,u),s.content.forEach(function(e){if(0===e.type)u.appendChild(a.createTextNode(e.value));else if(22===e.type){var n=a.createElement("img");n.src=e.value,n.style.opacity="1",u.appendChild(n)}else if(18===e.type){if("attr"===e.name){var r=e.values.filter(hA);r.length&&u.appendChild(a.createTextNode(t.getAttribute(r[0].value)||""))}else if("counter"===e.name){var o=e.values.filter(yA),c=o[0],l=o[1];if(c&&hA(c)){var A=i.counters.getCounterValue(c.value),f=l&&hA(l)?Jf.parse(i.context,l.value):3;u.appendChild(a.createTextNode(Ep(A,f,!1)))}}else if("counters"===e.name){var d=e.values.filter(yA),h=(c=d[0],d[1]);if(l=d[2],c&&hA(c)){var p=i.counters.getCounterValues(c.value),v=l&&hA(l)?Jf.parse(i.context,l.value):3,g=h&&0===h.type?h.value:"",y=p.map(function(t){return Ep(t,v,!1)}).join(g);u.appendChild(a.createTextNode(y))}}}else if(20===e.type)switch(e.value){case"open-quote":u.appendChild(a.createTextNode(Ud(s.quotes,i.quoteDepth++,!0)));break;case"close-quote":u.appendChild(a.createTextNode(Ud(s.quotes,--i.quoteDepth,!1)));break;default:u.appendChild(a.createTextNode(e.value))}}),u.className=Lp+" "+_p;var c=r===eh.BEFORE?" "+Lp:" "+_p;return Yh(e)?e.className.baseValue+=c:e.className+=c,u}}},t.destroy=function(t){return!!t.parentNode&&(t.parentNode.removeChild(t),!0)}}(),function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"}(eh||(eh={}));var kp,Op=function(t,e){var n=t.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=e.width.toString(),n.height=e.height.toString(),n.scrolling="no",n.setAttribute(Bp,"true"),t.body.appendChild(n),n},Cp=function(t){return new Promise(function(e){t.complete?e():t.src?(t.onload=e,t.onerror=e):e()})},Mp=function(t){return Promise.all([].slice.call(t.images,0).map(Cp))},Sp=function(t){return new Promise(function(e,n){var r=t.contentWindow;if(!r)return n("No window assigned for iframe");var i=r.document;r.onload=t.onload=function(){r.onload=t.onload=null;var n=setInterval(function(){i.body.childNodes.length>0&&"complete"===i.readyState&&(clearInterval(n),e(t))},50)}})},Fp=["all","d","content"],Tp=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t.item(n);-1===Fp.indexOf(r)&&e.style.setProperty(r,t.getPropertyValue(r))}return e},Pp=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},Ip=function(t,e,n){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||n!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,n)},Np=function(t){var e=t[0],n=t[1],r=t[2];e.scrollLeft=n,e.scrollTop=r},Lp="___html2canvas___pseudoelement_before",_p="___html2canvas___pseudoelement_after",Qp='{\n    content: "" !important;\n    display: none !important;\n}',Up=function(t){jp(t,"."+Lp+":before"+Qp+"\n         ."+_p+":after"+Qp)},jp=function(t,e){var n=t.ownerDocument;if(n){var r=n.createElement("style");r.textContent=e,t.appendChild(r)}},Dp=function(){function t(){}return t.getOrigin=function(e){var n=t._link;return n?(n.href=e,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),Rp=(function(){function t(t,e){this.context=t,this._options=e,this._cache={}}t.prototype.addImage=function(t){var e=Promise.resolve();return this.has(t)?e:Wp(t)||Kp(t)?((this._cache[t]=this.loadImage(t)).catch(function(){}),e):e},t.prototype.match=function(t){return this._cache[t]},t.prototype.loadImage=function(t){return Fc(this,void 0,void 0,function(){var e,n,r,i,o=this;return Tc(this,function(a){switch(a.label){case 0:return e=Dp.isSameOrigin(t),n=!Gp(t)&&!0===this._options.useCORS&&ph.SUPPORT_CORS_IMAGES&&!e,r=!Gp(t)&&!e&&!Wp(t)&&"string"==typeof this._options.proxy&&ph.SUPPORT_CORS_XHR&&!n,e||!1!==this._options.allowTaint||Gp(t)||Wp(t)||r||n?(i=t,r?[4,this.proxy(i)]:[3,2]):[2];case 1:i=a.sent(),a.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(t,e){var r=new Image;r.onload=function(){return t(r)},r.onerror=e,(Vp(i)||n)&&(r.crossOrigin="anonymous"),r.src=i,!0===r.complete&&setTimeout(function(){return t(r)},500),o._options.imageTimeout>0&&setTimeout(function(){return e("Timed out ("+o._options.imageTimeout+"ms) loading image")},o._options.imageTimeout)})];case 3:return[2,a.sent()]}})})},t.prototype.has=function(t){return void 0!==this._cache[t]},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(t){var e=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var r=t.substring(0,256);return new Promise(function(i,o){var a=ph.SUPPORT_RESPONSE_TYPE?"blob":"text",s=new XMLHttpRequest;s.onload=function(){if(200===s.status)if("text"===a)i(s.response);else{var t=new FileReader;t.addEventListener("load",function(){return i(t.result)},!1),t.addEventListener("error",function(t){return o(t)},!1),t.readAsDataURL(s.response)}else o("Failed to proxy resource "+r+" with status code "+s.status)},s.onerror=o;var u=n.indexOf("?")>-1?"&":"?";if(s.open("GET",""+n+u+"url="+encodeURIComponent(t)+"&responseType="+a),"text"!==a&&s instanceof XMLHttpRequest&&(s.responseType=a),e._options.imageTimeout){var c=e._options.imageTimeout;s.timeout=c,s.ontimeout=function(){return o("Timed out ("+c+"ms) proxying "+r)}}s.send()})}}(),/^data:image\/svg\+xml/i),Hp=/^data:image\/.*;base64,/i,zp=/^data:image\/.*/i,Kp=function(t){return ph.SUPPORT_SVG_DRAWING||!Yp(t)},Gp=function(t){return zp.test(t)},Vp=function(t){return Hp.test(t)},Wp=function(t){return"blob"===t.substr(0,4)},Yp=function(t){return"svg"===t.substr(-3).toLowerCase()||Rp.test(t)},Xp=function(){function t(t,e){this.type=0,this.x=t,this.y=e}return t.prototype.add=function(e,n){return new t(this.x+e,this.y+n)},t}(),qp=function(t,e,n){return new Xp(t.x+(e.x-t.x)*n,t.y+(e.y-t.y)*n)},Zp=function(){function t(t,e,n,r){this.type=1,this.start=t,this.startControl=e,this.endControl=n,this.end=r}return t.prototype.subdivide=function(e,n){var r=qp(this.start,this.startControl,e),i=qp(this.startControl,this.endControl,e),o=qp(this.endControl,this.end,e),a=qp(r,i,e),s=qp(i,o,e),u=qp(a,s,e);return n?new t(this.start,r,a,u):new t(u,s,o,this.end)},t.prototype.add=function(e,n){return new t(this.start.add(e,n),this.startControl.add(e,n),this.endControl.add(e,n),this.end.add(e,n))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Jp=function(t){return 1===t.type},$p=function(t){var e=t.styles,n=t.bounds,r=CA(e.borderTopLeftRadius,n.width,n.height),i=r[0],o=r[1],a=CA(e.borderTopRightRadius,n.width,n.height),s=a[0],u=a[1],c=CA(e.borderBottomRightRadius,n.width,n.height),l=c[0],A=c[1],f=CA(e.borderBottomLeftRadius,n.width,n.height),d=f[0],h=f[1],p=[];p.push((i+s)/n.width),p.push((d+l)/n.width),p.push((o+h)/n.height),p.push((u+A)/n.height);var v=Math.max.apply(Math,p);v>1&&(i/=v,o/=v,s/=v,u/=v,l/=v,A/=v,d/=v,h/=v);var g=n.width-s,y=n.height-A,m=n.width-l,b=n.height-h,w=e.borderTopWidth,x=e.borderRightWidth,E=e.borderBottomWidth,B=e.borderLeftWidth,k=MA(e.paddingTop,t.bounds.width),O=MA(e.paddingRight,t.bounds.width),C=MA(e.paddingBottom,t.bounds.width),M=MA(e.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=i>0||o>0?tv(n.left+B/3,n.top+w/3,i-B/3,o-w/3,kp.TOP_LEFT):new Xp(n.left+B/3,n.top+w/3),this.topRightBorderDoubleOuterBox=i>0||o>0?tv(n.left+g,n.top+w/3,s-x/3,u-w/3,kp.TOP_RIGHT):new Xp(n.left+n.width-x/3,n.top+w/3),this.bottomRightBorderDoubleOuterBox=l>0||A>0?tv(n.left+m,n.top+y,l-x/3,A-E/3,kp.BOTTOM_RIGHT):new Xp(n.left+n.width-x/3,n.top+n.height-E/3),this.bottomLeftBorderDoubleOuterBox=d>0||h>0?tv(n.left+B/3,n.top+b,d-B/3,h-E/3,kp.BOTTOM_LEFT):new Xp(n.left+B/3,n.top+n.height-E/3),this.topLeftBorderDoubleInnerBox=i>0||o>0?tv(n.left+2*B/3,n.top+2*w/3,i-2*B/3,o-2*w/3,kp.TOP_LEFT):new Xp(n.left+2*B/3,n.top+2*w/3),this.topRightBorderDoubleInnerBox=i>0||o>0?tv(n.left+g,n.top+2*w/3,s-2*x/3,u-2*w/3,kp.TOP_RIGHT):new Xp(n.left+n.width-2*x/3,n.top+2*w/3),this.bottomRightBorderDoubleInnerBox=l>0||A>0?tv(n.left+m,n.top+y,l-2*x/3,A-2*E/3,kp.BOTTOM_RIGHT):new Xp(n.left+n.width-2*x/3,n.top+n.height-2*E/3),this.bottomLeftBorderDoubleInnerBox=d>0||h>0?tv(n.left+2*B/3,n.top+b,d-2*B/3,h-2*E/3,kp.BOTTOM_LEFT):new Xp(n.left+2*B/3,n.top+n.height-2*E/3),this.topLeftBorderStroke=i>0||o>0?tv(n.left+B/2,n.top+w/2,i-B/2,o-w/2,kp.TOP_LEFT):new Xp(n.left+B/2,n.top+w/2),this.topRightBorderStroke=i>0||o>0?tv(n.left+g,n.top+w/2,s-x/2,u-w/2,kp.TOP_RIGHT):new Xp(n.left+n.width-x/2,n.top+w/2),this.bottomRightBorderStroke=l>0||A>0?tv(n.left+m,n.top+y,l-x/2,A-E/2,kp.BOTTOM_RIGHT):new Xp(n.left+n.width-x/2,n.top+n.height-E/2),this.bottomLeftBorderStroke=d>0||h>0?tv(n.left+B/2,n.top+b,d-B/2,h-E/2,kp.BOTTOM_LEFT):new Xp(n.left+B/2,n.top+n.height-E/2),this.topLeftBorderBox=i>0||o>0?tv(n.left,n.top,i,o,kp.TOP_LEFT):new Xp(n.left,n.top),this.topRightBorderBox=s>0||u>0?tv(n.left+g,n.top,s,u,kp.TOP_RIGHT):new Xp(n.left+n.width,n.top),this.bottomRightBorderBox=l>0||A>0?tv(n.left+m,n.top+y,l,A,kp.BOTTOM_RIGHT):new Xp(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=d>0||h>0?tv(n.left,n.top+b,d,h,kp.BOTTOM_LEFT):new Xp(n.left,n.top+n.height),this.topLeftPaddingBox=i>0||o>0?tv(n.left+B,n.top+w,Math.max(0,i-B),Math.max(0,o-w),kp.TOP_LEFT):new Xp(n.left+B,n.top+w),this.topRightPaddingBox=s>0||u>0?tv(n.left+Math.min(g,n.width-x),n.top+w,g>n.width+x?0:Math.max(0,s-x),Math.max(0,u-w),kp.TOP_RIGHT):new Xp(n.left+n.width-x,n.top+w),this.bottomRightPaddingBox=l>0||A>0?tv(n.left+Math.min(m,n.width-B),n.top+Math.min(y,n.height-E),Math.max(0,l-x),Math.max(0,A-E),kp.BOTTOM_RIGHT):new Xp(n.left+n.width-x,n.top+n.height-E),this.bottomLeftPaddingBox=d>0||h>0?tv(n.left+B,n.top+Math.min(b,n.height-E),Math.max(0,d-B),Math.max(0,h-E),kp.BOTTOM_LEFT):new Xp(n.left+B,n.top+n.height-E),this.topLeftContentBox=i>0||o>0?tv(n.left+B+M,n.top+w+k,Math.max(0,i-(B+M)),Math.max(0,o-(w+k)),kp.TOP_LEFT):new Xp(n.left+B+M,n.top+w+k),this.topRightContentBox=s>0||u>0?tv(n.left+Math.min(g,n.width+B+M),n.top+w+k,g>n.width+B+M?0:s-B+M,u-(w+k),kp.TOP_RIGHT):new Xp(n.left+n.width-(x+O),n.top+w+k),this.bottomRightContentBox=l>0||A>0?tv(n.left+Math.min(m,n.width-(B+M)),n.top+Math.min(y,n.height+w+k),Math.max(0,l-(x+O)),A-(E+C),kp.BOTTOM_RIGHT):new Xp(n.left+n.width-(x+O),n.top+n.height-(E+C)),this.bottomLeftContentBox=d>0||h>0?tv(n.left+B+M,n.top+b,Math.max(0,d-(B+M)),h-(E+C),kp.BOTTOM_LEFT):new Xp(n.left+B+M,n.top+n.height-(E+C))};!function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"}(kp||(kp={}));var tv=function(t,e,n,r,i){var o=(Math.sqrt(2)-1)/3*4,a=n*o,s=r*o,u=t+n,c=e+r;switch(i){case kp.TOP_LEFT:return new Zp(new Xp(t,c),new Xp(t,c-s),new Xp(u-a,e),new Xp(u,e));case kp.TOP_RIGHT:return new Zp(new Xp(t,e),new Xp(t+a,e),new Xp(u,c-s),new Xp(u,c));case kp.BOTTOM_RIGHT:return new Zp(new Xp(u,e),new Xp(u,e+s),new Xp(t+a,c),new Xp(t,c));case kp.BOTTOM_LEFT:default:return new Zp(new Xp(u,c),new Xp(u-a,c),new Xp(t,e+s),new Xp(t,e))}},ev=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},nv=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},rv=function(t,e,n){this.offsetX=t,this.offsetY=e,this.matrix=n,this.type=0,this.target=6},iv=function(t,e){this.path=t,this.target=e,this.type=1},ov=function(t){this.opacity=t,this.type=2,this.target=6},av=function(t){return 1===t.type},sv=function(t,e){return t.length===e.length&&t.some(function(t,n){return t===e[n]})},uv=function(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]},cv=function(){function t(t,e){if(this.container=t,this.parent=e,this.effects=[],this.curves=new $p(this.container),this.container.styles.opacity<1&&this.effects.push(new ov(this.container.styles.opacity)),null!==this.container.styles.transform){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,r=this.container.bounds.top+this.container.styles.transformOrigin[1].number,i=this.container.styles.transform;this.effects.push(new rv(n,r,i))}if(0!==this.container.styles.overflowX){var o=ev(this.curves),a=nv(this.curves);sv(o,a)?this.effects.push(new iv(o,6)):(this.effects.push(new iv(o,2)),this.effects.push(new iv(a,4)))}}return t.prototype.getEffects=function(t){for(var e=-1===[2,3].indexOf(this.container.styles.position),n=this.parent,r=this.effects.slice(0);n;){var i=n.effects.filter(function(t){return!av(t)});if(e||0!==n.container.styles.position||!n.parent){if(r.unshift.apply(r,i),e=-1===[2,3].indexOf(n.container.styles.position),0!==n.container.styles.overflowX){var o=ev(n.curves),a=nv(n.curves);sv(o,a)||r.unshift(new iv(a,6))}}else r.unshift.apply(r,i);n=n.parent}return r.filter(function(e){return Pd(e.target,t)})},t}(),lv=function(t,e,n,r){t.container.elements.forEach(function(i){var o=Pd(i.flags,4),a=Pd(i.flags,2),s=new cv(i,t);Pd(i.styles.display,2048)&&r.push(s);var u=Pd(i.flags,8)?[]:r;if(o||a){var c=o||i.styles.isPositioned()?n:e,l=new uv(s);if(i.styles.isPositioned()||i.styles.opacity<1||i.styles.isTransformed()){var A=i.styles.zIndex.order;if(A<0){var f=0;c.negativeZIndex.some(function(t,e){return A>t.element.container.styles.zIndex.order?(f=e,!1):f>0}),c.negativeZIndex.splice(f,0,l)}else if(A>0){var d=0;c.positiveZIndex.some(function(t,e){return A>=t.element.container.styles.zIndex.order?(d=e+1,!1):d>0}),c.positiveZIndex.splice(d,0,l)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(l)}else i.styles.isFloating()?c.nonPositionedFloats.push(l):c.nonPositionedInlineLevel.push(l);lv(s,l,o?l:n,u)}else i.styles.isInlineLevel()?e.inlineLevel.push(s):e.nonInlineLevel.push(s),lv(s,e,n,u);Pd(i.flags,8)&&Av(i,u)})},Av=function(t,e){for(var n=t instanceof Sh?t.start:1,r=t instanceof Sh&&t.reversed,i=0;i<e.length;i++){var o=e[i];o.container instanceof Mh&&"number"==typeof o.container.value&&0!==o.container.value&&(n=o.container.value),o.listValue=Ep(n,o.container.styles.listStyleType,!0),n+=r?-1:1}},fv=function(t,e){switch(e){case 0:return hv(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return hv(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return hv(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);default:return hv(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},dv=function(t,e){var n=[];return Jp(t)?n.push(t.subdivide(.5,!1)):n.push(t),Jp(e)?n.push(e.subdivide(.5,!0)):n.push(e),n},hv=function(t,e,n,r){var i=[];return Jp(t)?i.push(t.subdivide(.5,!1)):i.push(t),Jp(n)?i.push(n.subdivide(.5,!0)):i.push(n),Jp(r)?i.push(r.subdivide(.5,!0).reverse()):i.push(r),Jp(e)?i.push(e.subdivide(.5,!1).reverse()):i.push(e),i},pv=function(t){var e=t.bounds,n=t.styles;return e.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},vv=function(t){var e=t.styles,n=t.bounds,r=MA(e.paddingLeft,n.width),i=MA(e.paddingRight,n.width),o=MA(e.paddingTop,n.width),a=MA(e.paddingBottom,n.width);return n.add(r+e.borderLeftWidth,o+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+i),-(e.borderTopWidth+e.borderBottomWidth+o+a))},gv=function(t,e,n){var r=function(t,e){return 0===t?e.bounds:2===t?vv(e):pv(e)}(wv(t.styles.backgroundOrigin,e),t),i=function(t,e){return 0===t?e.bounds:2===t?vv(e):pv(e)}(wv(t.styles.backgroundClip,e),t),o=bv(wv(t.styles.backgroundSize,e),n,r),a=o[0],s=o[1],u=CA(wv(t.styles.backgroundPosition,e),r.width-a,r.height-s);return[xv(wv(t.styles.backgroundRepeat,e),u,o,r,i),Math.round(r.left+u[0]),Math.round(r.top+u[1]),a,s]},yv=function(t){return hA(t)&&t.value===HA.AUTO},mv=function(t){return"number"==typeof t},bv=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=t[0],s=t[1];if(!a)return[0,0];if(xA(a)&&s&&xA(s))return[MA(a,n.width),MA(s,n.height)];var u=mv(o);if(hA(a)&&(a.value===HA.CONTAIN||a.value===HA.COVER))return mv(o)?n.width/n.height<o!=(a.value===HA.COVER)?[n.width,n.width/o]:[n.height*o,n.height]:[n.width,n.height];var c=mv(r),l=mv(i),A=c||l;if(yv(a)&&(!s||yv(s)))return c&&l?[r,i]:u||A?A&&u?[c?r:i*o,l?i:r/o]:[c?r:n.width,l?i:n.height]:[n.width,n.height];if(u){var f=0,d=0;return xA(a)?f=MA(a,n.width):xA(s)&&(d=MA(s,n.height)),yv(a)?f=d*o:s&&!yv(s)||(d=f/o),[f,d]}var h=null,p=null;if(xA(a)?h=MA(a,n.width):s&&xA(s)&&(p=MA(s,n.height)),null===h||s&&!yv(s)||(p=c&&l?h/r*i:n.height),null!==p&&yv(a)&&(h=c&&l?p/i*r:n.width),null!==h&&null!==p)return[h,p];throw new Error("Unable to calculate background-size for element")},wv=function(t,e){var n=t[e];return void 0===n?t[0]:n},xv=function(t,e,n,r,i){var o=e[0],a=e[1],s=n[0],u=n[1];switch(t){case 2:return[new Xp(Math.round(r.left),Math.round(r.top+a)),new Xp(Math.round(r.left+r.width),Math.round(r.top+a)),new Xp(Math.round(r.left+r.width),Math.round(u+r.top+a)),new Xp(Math.round(r.left),Math.round(u+r.top+a))];case 3:return[new Xp(Math.round(r.left+o),Math.round(r.top)),new Xp(Math.round(r.left+o+s),Math.round(r.top)),new Xp(Math.round(r.left+o+s),Math.round(r.height+r.top)),new Xp(Math.round(r.left+o),Math.round(r.height+r.top))];case 1:return[new Xp(Math.round(r.left+o),Math.round(r.top+a)),new Xp(Math.round(r.left+o+s),Math.round(r.top+a)),new Xp(Math.round(r.left+o+s),Math.round(r.top+a+u)),new Xp(Math.round(r.left+o),Math.round(r.top+a+u))];default:return[new Xp(Math.round(i.left),Math.round(i.top)),new Xp(Math.round(i.left+i.width),Math.round(i.top)),new Xp(Math.round(i.left+i.width),Math.round(i.height+i.top)),new Xp(Math.round(i.left),Math.round(i.height+i.top))]}},Ev="Hidden Text",Bv=function(){function t(t){this._data={},this._document=t}return t.prototype.parseMetrics=function(t,e){var n=this._document.createElement("div"),r=this._document.createElement("img"),i=this._document.createElement("span"),o=this._document.body;n.style.visibility="hidden",n.style.fontFamily=t,n.style.fontSize=e,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",o.appendChild(n),r.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",r.width=1,r.height=1,r.style.margin="0",r.style.padding="0",r.style.verticalAlign="baseline",i.style.fontFamily=t,i.style.fontSize=e,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode(Ev)),n.appendChild(i),n.appendChild(r);var a=r.offsetTop-i.offsetTop+2;n.removeChild(i),n.appendChild(this._document.createTextNode(Ev)),n.style.lineHeight="normal",r.style.verticalAlign="super";var s=r.offsetTop-n.offsetTop+2;return o.removeChild(n),{baseline:a,middle:s}},t.prototype.getMetrics=function(t,e){var n=t+" "+e;return void 0===this._data[n]&&(this._data[n]=this.parseMetrics(t,e)),this._data[n]},t}(),kv=function(t,e){this.context=t,this.options=e},Ov=(function(t){function e(e,n){var r=t.call(this,e,n)||this;return r._activeEffects=[],r.canvas=n.canvas?n.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),n.canvas||(r.canvas.width=Math.floor(n.width*n.scale),r.canvas.height=Math.floor(n.height*n.scale),r.canvas.style.width=n.width+"px",r.canvas.style.height=n.height+"px"),r.fontMetrics=new Bv(document),r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-n.x,-n.y),r.ctx.textBaseline="bottom",r._activeEffects=[],r.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),r}Sc(e,t),e.prototype.applyEffects=function(t){for(var e=this;this._activeEffects.length;)this.popEffect();t.forEach(function(t){return e.applyEffect(t)})},e.prototype.applyEffect=function(t){this.ctx.save(),function(t){return 2===t.type}(t)&&(this.ctx.globalAlpha=t.opacity),function(t){return 0===t.type}(t)&&(this.ctx.translate(t.offsetX,t.offsetY),this.ctx.transform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this.ctx.translate(-t.offsetX,-t.offsetY)),av(t)&&(this.path(t.path),this.ctx.clip()),this._activeEffects.push(t)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(t){return Fc(this,void 0,void 0,function(){return Tc(this,function(e){switch(e.label){case 0:return t.element.container.styles.isVisible()?[4,this.renderStackContent(t)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(t){return Fc(this,void 0,void 0,function(){return Tc(this,function(e){switch(e.label){case 0:return Pd(t.container.flags,16),t.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(t)]:[3,3];case 1:return e.sent(),[4,this.renderNodeContent(t)];case 2:e.sent(),e.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(t,e,n){var r=this;0===e?this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+n):yh(t.text).reduce(function(e,i){return r.ctx.fillText(i,e,t.bounds.top+n),e+r.ctx.measureText(i).width},t.bounds.left)},e.prototype.createFontStyle=function(t){var e=t.fontVariant.filter(function(t){return"normal"===t||"small-caps"===t}).join(""),n=Fv(t.fontFamily).join(", "),r=fA(t.fontSize)?""+t.fontSize.number+t.fontSize.unit:t.fontSize.number+"px";return[[t.fontStyle,e,t.fontWeight,r,n].join(" "),n,r]},e.prototype.renderTextNode=function(t,e){return Fc(this,void 0,void 0,function(){var n,r,i,o,a,s,u,c,l=this;return Tc(this,function(A){return n=this.createFontStyle(e),r=n[0],i=n[1],o=n[2],this.ctx.font=r,this.ctx.direction=1===e.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",a=this.fontMetrics.getMetrics(i,o),s=a.baseline,u=a.middle,c=e.paintOrder,t.textBounds.forEach(function(t){c.forEach(function(n){switch(n){case 0:l.ctx.fillStyle=QA(e.color),l.renderTextWithLetterSpacing(t,e.letterSpacing,s);var r=e.textShadow;r.length&&t.text.trim().length&&(r.slice(0).reverse().forEach(function(n){l.ctx.shadowColor=QA(n.color),l.ctx.shadowOffsetX=n.offsetX.number*l.options.scale,l.ctx.shadowOffsetY=n.offsetY.number*l.options.scale,l.ctx.shadowBlur=n.blur.number,l.renderTextWithLetterSpacing(t,e.letterSpacing,s)}),l.ctx.shadowColor="",l.ctx.shadowOffsetX=0,l.ctx.shadowOffsetY=0,l.ctx.shadowBlur=0),e.textDecorationLine.length&&(l.ctx.fillStyle=QA(e.textDecorationColor||e.color),e.textDecorationLine.forEach(function(e){switch(e){case 1:l.ctx.fillRect(t.bounds.left,Math.round(t.bounds.top+s),t.bounds.width,1);break;case 2:l.ctx.fillRect(t.bounds.left,Math.round(t.bounds.top),t.bounds.width,1);break;case 3:l.ctx.fillRect(t.bounds.left,Math.ceil(t.bounds.top+u),t.bounds.width,1)}}));break;case 1:e.webkitTextStrokeWidth&&t.text.trim().length&&(l.ctx.strokeStyle=QA(e.webkitTextStrokeColor),l.ctx.lineWidth=e.webkitTextStrokeWidth,l.ctx.lineJoin=window.chrome?"miter":"round",l.ctx.strokeText(t.text,t.bounds.left,t.bounds.top+s)),l.ctx.strokeStyle="",l.ctx.lineWidth=0,l.ctx.lineJoin="miter"}})}),[2]})})},e.prototype.renderReplacedElement=function(t,e,n){if(n&&t.intrinsicWidth>0&&t.intrinsicHeight>0){var r=vv(t),i=nv(e);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,t.intrinsicWidth,t.intrinsicHeight,r.left,r.top,r.width,r.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(t){return Fc(this,void 0,void 0,function(){var n,r,i,o,a,s,u,c,l,A,f,d,h,p,v,g,y,m;return Tc(this,function(b){switch(b.label){case 0:this.applyEffects(t.getEffects(4)),n=t.container,r=t.curves,i=n.styles,o=0,a=n.textNodes,b.label=1;case 1:return o<a.length?(s=a[o],[4,this.renderTextNode(s,i)]):[3,4];case 2:b.sent(),b.label=3;case 3:return o++,[3,1];case 4:if(!(n instanceof kh))return[3,8];b.label=5;case 5:return b.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return v=b.sent(),this.renderReplacedElement(n,r,v),[3,8];case 7:return b.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof Oh&&this.renderReplacedElement(n,r,n.canvas),!(n instanceof Ch))return[3,12];b.label=9;case 9:return b.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return v=b.sent(),this.renderReplacedElement(n,r,v),[3,12];case 11:return b.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof Uh&&n.tree?[4,new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}).render(n.tree)]:[3,14];case 13:u=b.sent(),n.width&&n.height&&this.ctx.drawImage(u,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),b.label=14;case 14:if(n instanceof Lh&&(c=Math.min(n.bounds.width,n.bounds.height),n.type===Ph?n.checked&&(this.ctx.save(),this.path([new Xp(n.bounds.left+.39363*c,n.bounds.top+.79*c),new Xp(n.bounds.left+.16*c,n.bounds.top+.5549*c),new Xp(n.bounds.left+.27347*c,n.bounds.top+.44071*c),new Xp(n.bounds.left+.39694*c,n.bounds.top+.5649*c),new Xp(n.bounds.left+.72983*c,n.bounds.top+.23*c),new Xp(n.bounds.left+.84*c,n.bounds.top+.34085*c),new Xp(n.bounds.left+.39363*c,n.bounds.top+.79*c)]),this.ctx.fillStyle=QA(Nh),this.ctx.fill(),this.ctx.restore()):n.type===Ih&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+c/2,n.bounds.top+c/2,c/4,0,2*Math.PI,!0),this.ctx.fillStyle=QA(Nh),this.ctx.fill(),this.ctx.restore())),Ov(n)&&n.value.length){switch(l=this.createFontStyle(i),y=l[0],A=l[1],f=this.fontMetrics.getMetrics(y,A).baseline,this.ctx.font=y,this.ctx.fillStyle=QA(i.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=Mv(n.styles.textAlign),m=vv(n),d=0,n.styles.textAlign){case 1:d+=m.width/2;break;case 2:d+=m.width}h=m.add(d,0,0,-m.height/2+1),this.ctx.save(),this.path([new Xp(m.left,m.top),new Xp(m.left+m.width,m.top),new Xp(m.left+m.width,m.top+m.height),new Xp(m.left,m.top+m.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new vh(n.value,h),i.letterSpacing,f),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Pd(n.styles.display,2048))return[3,20];if(null===n.styles.listStyleImage)return[3,19];if(0!==(p=n.styles.listStyleImage).type)return[3,18];v=void 0,g=p.url,b.label=15;case 15:return b.trys.push([15,17,,18]),[4,this.context.cache.match(g)];case 16:return v=b.sent(),this.ctx.drawImage(v,n.bounds.left-(v.width+10),n.bounds.top),[3,18];case 17:return b.sent(),this.context.logger.error("Error loading list-style-image "+g),[3,18];case 18:return[3,20];case 19:t.listValue&&-1!==n.styles.listStyleType&&(y=this.createFontStyle(i)[0],this.ctx.font=y,this.ctx.fillStyle=QA(i.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",m=new Ic(n.bounds.left,n.bounds.top+MA(n.styles.paddingTop,n.bounds.width),n.bounds.width,Xf(i.lineHeight,i.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new vh(t.listValue,m),i.letterSpacing,Xf(i.lineHeight,i.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),b.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(t){return Fc(this,void 0,void 0,function(){var e,n,r,i,o,a,s,u,c,l,A,f,d,h,p;return Tc(this,function(v){switch(v.label){case 0:return Pd(t.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(t.element)];case 1:v.sent(),e=0,n=t.negativeZIndex,v.label=2;case 2:return e<n.length?(p=n[e],[4,this.renderStack(p)]):[3,5];case 3:v.sent(),v.label=4;case 4:return e++,[3,2];case 5:return[4,this.renderNodeContent(t.element)];case 6:v.sent(),r=0,i=t.nonInlineLevel,v.label=7;case 7:return r<i.length?(p=i[r],[4,this.renderNode(p)]):[3,10];case 8:v.sent(),v.label=9;case 9:return r++,[3,7];case 10:o=0,a=t.nonPositionedFloats,v.label=11;case 11:return o<a.length?(p=a[o],[4,this.renderStack(p)]):[3,14];case 12:v.sent(),v.label=13;case 13:return o++,[3,11];case 14:s=0,u=t.nonPositionedInlineLevel,v.label=15;case 15:return s<u.length?(p=u[s],[4,this.renderStack(p)]):[3,18];case 16:v.sent(),v.label=17;case 17:return s++,[3,15];case 18:c=0,l=t.inlineLevel,v.label=19;case 19:return c<l.length?(p=l[c],[4,this.renderNode(p)]):[3,22];case 20:v.sent(),v.label=21;case 21:return c++,[3,19];case 22:A=0,f=t.zeroOrAutoZIndexOrTransformedOrOpacity,v.label=23;case 23:return A<f.length?(p=f[A],[4,this.renderStack(p)]):[3,26];case 24:v.sent(),v.label=25;case 25:return A++,[3,23];case 26:d=0,h=t.positiveZIndex,v.label=27;case 27:return d<h.length?(p=h[d],[4,this.renderStack(p)]):[3,30];case 28:v.sent(),v.label=29;case 29:return d++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(t){this.ctx.beginPath(),this.formatPath(t),this.ctx.closePath()},e.prototype.formatPath=function(t){var e=this;t.forEach(function(t,n){var r=Jp(t)?t.start:t;0===n?e.ctx.moveTo(r.x,r.y):e.ctx.lineTo(r.x,r.y),Jp(t)&&e.ctx.bezierCurveTo(t.startControl.x,t.startControl.y,t.endControl.x,t.endControl.y,t.end.x,t.end.y)})},e.prototype.renderRepeat=function(t,e,n,r){this.path(t),this.ctx.fillStyle=e,this.ctx.translate(n,r),this.ctx.fill(),this.ctx.translate(-n,-r)},e.prototype.resizeImage=function(t,e,n){var r;if(t.width===e&&t.height===n)return t;var i=(null!==(r=this.canvas.ownerDocument)&&void 0!==r?r:document).createElement("canvas");return i.width=Math.max(1,e),i.height=Math.max(1,n),i.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,e,n),i},e.prototype.renderBackgroundImage=function(t){return Fc(this,void 0,void 0,function(){var e,n,r,i,o,a;return Tc(this,function(s){switch(s.label){case 0:e=t.styles.backgroundImage.length-1,n=function(n){var i,o,a,s,u,c,l,A,f,d,h,p,v,g,y,m,b,w,x,E,B,k,O,C,M,S,F,T,P,I,N;return Tc(this,function(L){switch(L.label){case 0:if(0!==n.type)return[3,5];i=void 0,o=n.url,L.label=1;case 1:return L.trys.push([1,3,,4]),[4,r.context.cache.match(o)];case 2:return i=L.sent(),[3,4];case 3:return L.sent(),r.context.logger.error("Error loading background-image "+o),[3,4];case 4:return i&&(a=gv(t,e,[i.width,i.height,i.width/i.height]),m=a[0],k=a[1],O=a[2],x=a[3],E=a[4],g=r.ctx.createPattern(r.resizeImage(i,x,E),"repeat"),r.renderRepeat(m,g,k,O)),[3,6];case 5:1===n.type?(s=gv(t,e,[null,null,null]),m=s[0],k=s[1],O=s[2],x=s[3],E=s[4],u=function(t,e,n){var r="number"==typeof t?t:function(t,e,n){var r=e/2,i=n/2,o=MA(t[0],e)-r,a=i-MA(t[1],n);return(Math.atan2(a,o)+2*Math.PI)%(2*Math.PI)}(t,e,n),i=Math.abs(e*Math.sin(r))+Math.abs(n*Math.cos(r)),o=e/2,a=n/2,s=i/2,u=Math.sin(r-Math.PI/2)*s,c=Math.cos(r-Math.PI/2)*s;return[i,o-c,o+c,a-u,a+u]}(n.angle,x,E),c=u[0],l=u[1],A=u[2],f=u[3],d=u[4],(h=document.createElement("canvas")).width=x,h.height=E,p=h.getContext("2d"),v=p.createLinearGradient(l,f,A,d),qA(n.stops,c).forEach(function(t){return v.addColorStop(t.stop,QA(t.color))}),p.fillStyle=v,p.fillRect(0,0,x,E),x>0&&E>0&&(g=r.ctx.createPattern(h,"repeat"),r.renderRepeat(m,g,k,O))):2===n.type&&(y=gv(t,e,[null,null,null]),m=y[0],b=y[1],w=y[2],x=y[3],E=y[4],B=0===n.position.length?[kA]:n.position,k=MA(B[0],x),O=MA(B[B.length-1],E),C=function(t,e,n,r,i){var o=0,a=0;switch(t.size){case 0:0===t.shape?o=a=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-i)):1===t.shape&&(o=Math.min(Math.abs(e),Math.abs(e-r)),a=Math.min(Math.abs(n),Math.abs(n-i)));break;case 2:if(0===t.shape)o=a=Math.min(ZA(e,n),ZA(e,n-i),ZA(e-r,n),ZA(e-r,n-i));else if(1===t.shape){var s=Math.min(Math.abs(n),Math.abs(n-i))/Math.min(Math.abs(e),Math.abs(e-r)),u=JA(r,i,e,n,!0),c=u[0],l=u[1];a=s*(o=ZA(c-e,(l-n)/s))}break;case 1:0===t.shape?o=a=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-i)):1===t.shape&&(o=Math.max(Math.abs(e),Math.abs(e-r)),a=Math.max(Math.abs(n),Math.abs(n-i)));break;case 3:if(0===t.shape)o=a=Math.max(ZA(e,n),ZA(e,n-i),ZA(e-r,n),ZA(e-r,n-i));else if(1===t.shape){s=Math.max(Math.abs(n),Math.abs(n-i))/Math.max(Math.abs(e),Math.abs(e-r));var A=JA(r,i,e,n,!1);c=A[0],l=A[1],a=s*(o=ZA(c-e,(l-n)/s))}}return Array.isArray(t.size)&&(o=MA(t.size[0],r),a=2===t.size.length?MA(t.size[1],i):o),[o,a]}(n,k,O,x,E),M=C[0],S=C[1],M>0&&S>0&&(F=r.ctx.createRadialGradient(b+k,w+O,0,b+k,w+O,M),qA(n.stops,2*M).forEach(function(t){return F.addColorStop(t.stop,QA(t.color))}),r.path(m),r.ctx.fillStyle=F,M!==S?(T=t.bounds.left+.5*t.bounds.width,P=t.bounds.top+.5*t.bounds.height,N=1/(I=S/M),r.ctx.save(),r.ctx.translate(T,P),r.ctx.transform(1,0,0,I,0,0),r.ctx.translate(-T,-P),r.ctx.fillRect(b,N*(w-P)+P,x,E*N),r.ctx.restore()):r.ctx.fill())),L.label=6;case 6:return e--,[2]}})},r=this,i=0,o=t.styles.backgroundImage.slice(0).reverse(),s.label=1;case 1:return i<o.length?(a=o[i],[5,n(a)]):[3,4];case 2:s.sent(),s.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(t,e,n){return Fc(this,void 0,void 0,function(){return Tc(this,function(r){return this.path(fv(n,e)),this.ctx.fillStyle=QA(t),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(t,e,n,r){return Fc(this,void 0,void 0,function(){var i,o;return Tc(this,function(a){switch(a.label){case 0:return e<3?[4,this.renderSolidBorder(t,n,r)]:[3,2];case 1:return a.sent(),[2];case 2:return i=function(t,e){switch(e){case 0:return hv(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return hv(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return hv(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);default:return hv(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}}(r,n),this.path(i),this.ctx.fillStyle=QA(t),this.ctx.fill(),o=function(t,e){switch(e){case 0:return hv(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return hv(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return hv(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);default:return hv(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}}(r,n),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(t){return Fc(this,void 0,void 0,function(){var e,n,r,i,o,a,s,u,c=this;return Tc(this,function(l){switch(l.label){case 0:return this.applyEffects(t.getEffects(2)),e=t.container.styles,n=!_A(e.backgroundColor)||e.backgroundImage.length,r=[{style:e.borderTopStyle,color:e.borderTopColor,width:e.borderTopWidth},{style:e.borderRightStyle,color:e.borderRightColor,width:e.borderRightWidth},{style:e.borderBottomStyle,color:e.borderBottomColor,width:e.borderBottomWidth},{style:e.borderLeftStyle,color:e.borderLeftColor,width:e.borderLeftWidth}],i=Cv(wv(e.backgroundClip,0),t.curves),n||e.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),_A(e.backgroundColor)||(this.ctx.fillStyle=QA(e.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(t.container)]):[3,2];case 1:l.sent(),this.ctx.restore(),e.boxShadow.slice(0).reverse().forEach(function(e){c.ctx.save();var n,r,i,o,a,s=ev(t.curves),u=e.inset?0:1e4,l=(n=s,r=-u+(e.inset?1:-1)*e.spread.number,i=(e.inset?1:-1)*e.spread.number,o=e.spread.number*(e.inset?-2:2),a=e.spread.number*(e.inset?-2:2),n.map(function(t,e){switch(e){case 0:return t.add(r,i);case 1:return t.add(r+o,i);case 2:return t.add(r+o,i+a);case 3:return t.add(r,i+a)}return t}));e.inset?(c.path(s),c.ctx.clip(),c.mask(l)):(c.mask(s),c.ctx.clip(),c.path(l)),c.ctx.shadowOffsetX=e.offsetX.number+u,c.ctx.shadowOffsetY=e.offsetY.number,c.ctx.shadowColor=QA(e.color),c.ctx.shadowBlur=e.blur.number,c.ctx.fillStyle=e.inset?QA(e.color):"rgba(0,0,0,1)",c.ctx.fill(),c.ctx.restore()}),l.label=2;case 2:o=0,a=0,s=r,l.label=3;case 3:return a<s.length?0!==(u=s[a]).style&&!_A(u.color)&&u.width>0?2!==u.style?[3,5]:[4,this.renderDashedDottedBorder(u.color,u.width,o,t.curves,2)]:[3,11]:[3,13];case 4:return l.sent(),[3,11];case 5:return 3!==u.style?[3,7]:[4,this.renderDashedDottedBorder(u.color,u.width,o,t.curves,3)];case 6:return l.sent(),[3,11];case 7:return 4!==u.style?[3,9]:[4,this.renderDoubleBorder(u.color,u.width,o,t.curves)];case 8:return l.sent(),[3,11];case 9:return[4,this.renderSolidBorder(u.color,o,t.curves)];case 10:l.sent(),l.label=11;case 11:o++,l.label=12;case 12:return a++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(t,e,n,r,i){return Fc(this,void 0,void 0,function(){var o,a,s,u,c,l,A,f,d,h,p,v,g,y,m,b;return Tc(this,function(w){return this.ctx.save(),o=function(t,e){switch(e){case 0:return dv(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return dv(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return dv(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);default:return dv(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}}(r,n),a=fv(r,n),2===i&&(this.path(a),this.ctx.clip()),Jp(a[0])?(s=a[0].start.x,u=a[0].start.y):(s=a[0].x,u=a[0].y),Jp(a[1])?(c=a[1].end.x,l=a[1].end.y):(c=a[1].x,l=a[1].y),A=0===n||2===n?Math.abs(s-c):Math.abs(u-l),this.ctx.beginPath(),3===i?this.formatPath(o):this.formatPath(a.slice(0,2)),f=e<3?3*e:2*e,d=e<3?2*e:e,3===i&&(f=e,d=e),h=!0,A<=2*f?h=!1:A<=2*f+d?(f*=p=A/(2*f+d),d*=p):(v=Math.floor((A+d)/(f+d)),g=(A-v*f)/(v-1),d=(y=(A-(v+1)*f)/v)<=0||Math.abs(d-g)<Math.abs(d-y)?g:y),h&&(3===i?this.ctx.setLineDash([0,f+d]):this.ctx.setLineDash([f,d])),3===i?(this.ctx.lineCap="round",this.ctx.lineWidth=e):this.ctx.lineWidth=2*e+1.1,this.ctx.strokeStyle=QA(t),this.ctx.stroke(),this.ctx.setLineDash([]),2===i&&(Jp(a[0])&&(m=a[3],b=a[0],this.ctx.beginPath(),this.formatPath([new Xp(m.end.x,m.end.y),new Xp(b.start.x,b.start.y)]),this.ctx.stroke()),Jp(a[1])&&(m=a[1],b=a[2],this.ctx.beginPath(),this.formatPath([new Xp(m.end.x,m.end.y),new Xp(b.start.x,b.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(t){return Fc(this,void 0,void 0,function(){var e;return Tc(this,function(n){switch(n.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=QA(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),e=function(t){var e=new cv(t,null),n=new uv(e),r=[];return lv(e,n,n,r),Av(e.container,r),n}(t),[4,this.renderStack(e)];case 1:return n.sent(),this.applyEffects([]),[2,this.canvas]}})})}}(kv),function(t){return t instanceof Qh||t instanceof _h||t instanceof Lh&&t.type!==Ih&&t.type!==Ph}),Cv=function(t,e){switch(t){case 0:return ev(e);case 2:return function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]}(e);default:return nv(e)}},Mv=function(t){switch(t){case 1:return"center";case 2:return"right";default:return"left"}},Sv=["-apple-system","system-ui"],Fv=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(t){return-1===Sv.indexOf(t)}):t},Tv=(function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.canvas=n.canvas?n.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),r.options=n,r.canvas.width=Math.floor(n.width*n.scale),r.canvas.height=Math.floor(n.height*n.scale),r.canvas.style.width=n.width+"px",r.canvas.style.height=n.height+"px",r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-n.x,-n.y),r.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),r}Sc(e,t),e.prototype.render=function(t){return Fc(this,void 0,void 0,function(){var e,n;return Tc(this,function(r){switch(r.label){case 0:return e=dh(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,t),[4,Tv(e)];case 1:return n=r.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=QA(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(n,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})}}(kv),function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(t))})});!function(){function t(t){var e=t.id,n=t.enabled;this.id=e,this.enabled=n,this.start=Date.now()}t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.debug?console.debug.apply(console,Pc([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&"undefined"!=typeof window&&window.console&&"function"==typeof console.info&&console.info.apply(console,Pc([this.id,this.getTime()+"ms"],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.warn?console.warn.apply(console,Pc([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.error?console.error.apply(console,Pc([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},t.instances={}}();"undefined"!=typeof window&&Dp.setContext(window);var Pv=function(t){function e(t,n,r,i){var o;return x(this,e),(o=F(this,e,[t])).currentTime=r,o.timelineTime=i,o.target=n,o.type="finish",o.bubbles=!1,o.currentTarget=n,o.defaultPrevented=!1,o.eventPhase=o.AT_TARGET,o.timeStamp=Date.now(),o.currentTime=r,o.timelineTime=i,o}return P(e,t),B(e)}(Ss),Iv=0,Nv=function(){return B(function t(e,n){var r;x(this,t),this.currentTimePending=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._playbackRate=1,this._inTimeline=!0,this.effect=e,e.animation=this,this.timeline=n,this.id="".concat(Iv++),this._inEffect=!!this.effect.update(0),this._totalDuration=Number(null===(r=this.effect)||void 0===r?void 0:r.getComputedTiming().endTime),this._holdTime=0,this._paused=!1,this.oldPlayState="idle",this.updatePromises()},[{key:"pending",get:function(){return null===this._startTime&&!this._paused&&0!==this.playbackRate||this.currentTimePending}},{key:"playState",get:function(){return this._idle?"idle":this._isFinished?"finished":this._paused?"paused":"running"}},{key:"ready",get:function(){var t=this;return this.readyPromise||(-1===this.timeline.animationsWithPromises.indexOf(this)&&this.timeline.animationsWithPromises.push(this),this.readyPromise=new Promise(function(e,n){t.resolveReadyPromise=function(){e(t)},t.rejectReadyPromise=function(){n(new Error)}}),this.pending||this.resolveReadyPromise()),this.readyPromise}},{key:"finished",get:function(){var t=this;return this.finishedPromise||(-1===this.timeline.animationsWithPromises.indexOf(this)&&this.timeline.animationsWithPromises.push(this),this.finishedPromise=new Promise(function(e,n){t.resolveFinishedPromise=function(){e(t)},t.rejectFinishedPromise=function(){n(new Error)}}),"finished"===this.playState&&this.resolveFinishedPromise()),this.finishedPromise}},{key:"currentTime",get:function(){return this.updatePromises(),this._idle||this.currentTimePending?null:this._currentTime},set:function(t){var e;(t=Number(t),isNaN(t))||(this.timeline.restart(),this._paused||null===this._startTime||(this._startTime=Number(null===(e=this.timeline)||void 0===e?void 0:e.currentTime)-t/this.playbackRate),this.currentTimePending=!1,this._currentTime!==t&&(this._idle&&(this._idle=!1,this._paused=!0),this.tickCurrentTime(t,!0),this.timeline.applyDirtiedAnimation(this)))}},{key:"startTime",get:function(){return this._startTime},set:function(t){if(null!==t){if(this.updatePromises(),t=Number(t),isNaN(t))return;if(this._paused||this._idle)return;this._startTime=t,this.tickCurrentTime((Number(this.timeline.currentTime)-this._startTime)*this.playbackRate),this.timeline.applyDirtiedAnimation(this),this.updatePromises()}}},{key:"playbackRate",get:function(){return this._playbackRate},set:function(t){if(t!==this._playbackRate){this.updatePromises();var e=this.currentTime;this._playbackRate=t,this.startTime=null,"paused"!==this.playState&&"idle"!==this.playState&&(this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this)),null!==e&&(this.currentTime=e),this.updatePromises()}}},{key:"_isFinished",get:function(){return!this._idle&&(this._playbackRate>0&&Number(this._currentTime)>=this._totalDuration||this._playbackRate<0&&Number(this._currentTime)<=0)}},{key:"totalDuration",get:function(){return this._totalDuration}},{key:"_needsTick",get:function(){return this.pending||"running"===this.playState||!this._finishedFlag}},{key:"updatePromises",value:function(){var t;if(null!==(t=this.effect.target)&&void 0!==t&&t.destroyed)return this.readyPromise=void 0,this.finishedPromise=void 0,!1;var e=this.oldPlayState,n=this.pending?"pending":this.playState;return this.readyPromise&&n!==e&&("idle"===n?(this.rejectReadyPromise(),this.readyPromise=void 0):"pending"===e?this.resolveReadyPromise():"pending"===n&&(this.readyPromise=void 0)),this.finishedPromise&&n!==e&&("idle"===n?(this.rejectFinishedPromise(),this.finishedPromise=void 0):"finished"===n?this.resolveFinishedPromise():"finished"===e&&(this.finishedPromise=void 0)),this.oldPlayState=n,this.readyPromise||this.finishedPromise}},{key:"play",value:function(){this.updatePromises(),this._paused=!1,(this._isFinished||this._idle)&&(this.rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this),-1===this.timeline.animations.indexOf(this)&&this.timeline.animations.push(this),this.updatePromises()}},{key:"pause",value:function(){this.updatePromises(),this.currentTime&&(this._holdTime=this.currentTime),this._isFinished||this._paused||this._idle?this._idle&&(this.rewind(),this._idle=!1):this.currentTimePending=!0,this._startTime=null,this._paused=!0,this.updatePromises()}},{key:"finish",value:function(){this.updatePromises(),this._idle||(this.currentTime=this._playbackRate>0?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this.currentTimePending=!1,this.timeline.applyDirtiedAnimation(this),this.updatePromises())}},{key:"cancel",value:function(){var t=this;if(this.updatePromises(),this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=null,this._startTime=null,this.effect.update(null),this.timeline.applyDirtiedAnimation(this),this.updatePromises(),this.oncancel)){var e=new Pv(null,this,this.currentTime,null);setTimeout(function(){t.oncancel(e)})}}},{key:"reverse",value:function(){this.updatePromises();var t=this.currentTime;this.playbackRate*=-1,this.play(),null!==t&&(this.currentTime=t),this.updatePromises()}},{key:"updatePlaybackRate",value:function(t){this.playbackRate=t}},{key:"targetAnimations",value:function(){var t;return(null===(t=this.effect)||void 0===t?void 0:t.target).getAnimations()}},{key:"markTarget",value:function(){var t=this.targetAnimations();-1===t.indexOf(this)&&t.push(this)}},{key:"unmarkTarget",value:function(){var t=this.targetAnimations(),e=t.indexOf(this);-1!==e&&t.splice(e,1)}},{key:"tick",value:function(t,e){this._idle||this._paused||(null===this._startTime?e&&(this.startTime=t-this._currentTime/this.playbackRate):this._isFinished||this.tickCurrentTime((t-this._startTime)*this.playbackRate)),e&&(this.currentTimePending=!1,this.fireEvents(t))}},{key:"rewind",value:function(){if(this.playbackRate>=0)this.currentTime=0;else{if(!(this._totalDuration<1/0))throw new Error("Unable to rewind negative playback rate animation with infinite duration");this.currentTime=this._totalDuration}}},{key:"persist",value:function(){throw new Error(fr)}},{key:"addEventListener",value:function(t,e,n){throw new Error(fr)}},{key:"removeEventListener",value:function(t,e,n){throw new Error(fr)}},{key:"dispatchEvent",value:function(t){throw new Error(fr)}},{key:"commitStyles",value:function(){throw new Error(fr)}},{key:"ensureAlive",value:function(){var t,e;this.playbackRate<0&&0===this.currentTime?this._inEffect=!(null===(t=this.effect)||void 0===t||!t.update(-1)):this._inEffect=!(null===(e=this.effect)||void 0===e||!e.update(this.currentTime)),this._inTimeline||!this._inEffect&&this._finishedFlag||(this._inTimeline=!0,this.timeline.animations.push(this))}},{key:"tickCurrentTime",value:function(t,e){t!==this._currentTime&&(this._currentTime=t,this._isFinished&&!e&&(this._currentTime=this._playbackRate>0?this._totalDuration:0),this.ensureAlive())}},{key:"fireEvents",value:function(t){var e=this;if(this._isFinished){if(!this._finishedFlag){if(this.onfinish){var n=new Pv(null,this,this.currentTime,t);setTimeout(function(){e.onfinish&&e.onfinish(n)})}this._finishedFlag=!0}}else{if(this.onframe&&"running"===this.playState){var r=new Pv(null,this,this.currentTime,t);this.onframe(r)}this._finishedFlag=!1}}}])}(),Lv=.1,_v="function"==typeof Float32Array,Qv=function(t,e){return 1-3*e+3*t},Uv=function(t,e){return 3*e-6*t},jv=function(t){return 3*t},Dv=function(t,e,n){return((Qv(e,n)*t+Uv(e,n))*t+jv(e))*t},Rv=function(t,e,n){return 3*Qv(e,n)*t*t+2*Uv(e,n)*t+jv(e)},Hv=function(t,e,n,r){if(!(t>=0&&t<=1&&n>=0&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===e&&n===r)return function(t){return t};for(var i=_v?new Float32Array(11):new Array(11),o=0;o<11;++o)i[o]=Dv(o*Lv,t,n);return function(o){return 0===o||1===o?o:Dv(function(e){for(var r=0,o=1;10!==o&&i[o]<=e;++o)r+=Lv;--o;var a=r+(e-i[o])/(i[o+1]-i[o])*Lv,s=Rv(a,t,n);return s>=.001?function(t,e,n,r){for(var i=0;i<4;++i){var o=Rv(e,n,r);if(0===o)return e;e-=(Dv(e,n,r)-t)/o}return e}(e,a,t,n):0===s?a:function(t,e,n,r,i){var o,a,s=0;do{(o=Dv(a=e+(n-e)/2,r,i)-t)>0?n=a:e=a}while(Math.abs(o)>1e-7&&++s<10);return a}(e,r,r+Lv,t,n)}(o),e,r)}},zv=function(t){return Math.pow(t,2)},Kv=function(t){return Math.pow(t,3)},Gv=function(t){return Math.pow(t,4)},Vv=function(t){return Math.pow(t,5)},Wv=function(t){return Math.pow(t,6)},Yv=function(t){return 1-Math.cos(t*Math.PI/2)},Xv=function(t){return 1-Math.sqrt(1-t*t)},qv=function(t){return t*t*(3*t-2)},Zv=function(t){for(var e,n=4;t<((e=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*e-2)/22-t,2)},Jv=function(t){var e=v(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],2),n=e[0],r=void 0===n?1:n,i=e[1],o=void 0===i?.5:i,a=ge(Number(r),1,10),s=ge(Number(o),.1,2);return 0===t||1===t?t:-a*Math.pow(2,10*(t-1))*Math.sin((t-1-s/(2*Math.PI)*Math.asin(1/a))*(2*Math.PI)/s)},$v=function(t){var e=arguments.length>2?arguments[2]:void 0,n=v(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],4),r=n[0],i=void 0===r?1:r,o=n[1],a=void 0===o?100:o,s=n[2],u=void 0===s?10:s,c=n[3],l=void 0===c?0:c;i=ge(i,.1,1e3),a=ge(a,.1,1e3),u=ge(u,.1,1e3),l=ge(l,.1,1e3);var A=Math.sqrt(a/i),f=u/(2*Math.sqrt(a*i)),d=f<1?A*Math.sqrt(1-f*f):0,h=f<1?(f*A-l)/d:-l+A,p=e?e*t/1e3:t;return p=f<1?Math.exp(-p*f*A)*(1*Math.cos(d*p)+h*Math.sin(d*p)):(1+h*p)*Math.exp(-p*A),0===t||1===t?t:1-p},tg=function(t){var e=v(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],2),n=e[0],r=void 0===n?10:n;return("start"===e[1]?Math.ceil:Math.floor)(ge(t,0,1)*r)/r},eg=function(t){var e=v(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],4),n=e[0],r=e[1],i=e[2],o=e[3];return Hv(n,r,i,o)(t)},ng=Hv(.42,0,1,1),rg=function(t){return function(e){return 1-t(1-e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],arguments.length>2?arguments[2]:void 0)}},ig=function(t){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return e<.5?t(2*e,n,r)/2:1-t(-2*e+2,n,r)/2}},og=function(t){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return e<.5?(1-t(1-2*e,n,r))/2:(t(2*e-1,n,r)+1)/2}},ag={steps:tg,"step-start":function(t){return tg(t,[1,"start"])},"step-end":function(t){return tg(t,[1,"end"])},linear:function(t){return t},"cubic-bezier":eg,ease:function(t){return eg(t,[.25,.1,.25,1])},in:ng,out:rg(ng),"in-out":ig(ng),"out-in":og(ng),"in-quad":zv,"out-quad":rg(zv),"in-out-quad":ig(zv),"out-in-quad":og(zv),"in-cubic":Kv,"out-cubic":rg(Kv),"in-out-cubic":ig(Kv),"out-in-cubic":og(Kv),"in-quart":Gv,"out-quart":rg(Gv),"in-out-quart":ig(Gv),"out-in-quart":og(Gv),"in-quint":Vv,"out-quint":rg(Vv),"in-out-quint":ig(Vv),"out-in-quint":og(Vv),"in-expo":Wv,"out-expo":rg(Wv),"in-out-expo":ig(Wv),"out-in-expo":og(Wv),"in-sine":Yv,"out-sine":rg(Yv),"in-out-sine":ig(Yv),"out-in-sine":og(Yv),"in-circ":Xv,"out-circ":rg(Xv),"in-out-circ":ig(Xv),"out-in-circ":og(Xv),"in-back":qv,"out-back":rg(qv),"in-out-back":ig(qv),"out-in-back":og(qv),"in-bounce":Zv,"out-bounce":rg(Zv),"in-out-bounce":ig(Zv),"out-in-bounce":og(Zv),"in-elastic":Jv,"out-elastic":rg(Jv),"in-out-elastic":ig(Jv),"out-in-elastic":og(Jv),spring:$v,"spring-in":$v,"spring-out":rg($v),"spring-in-out":ig($v),"spring-out-in":og($v)},sg=function(t){return t};function ug(t,e){return function(n){if(n>=1)return 1;var r=1/t;return(n+=e*r)-n%r}}var cg="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",lg=new RegExp("cubic-bezier\\(".concat(cg,",").concat(cg,",").concat(cg,",").concat(cg,"\\)")),Ag=/steps\(\s*(\d+)\s*\)/,fg=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/;function dg(t){var e=lg.exec(t);if(e)return Hv.apply(void 0,O(e.slice(1).map(Number)));var n=Ag.exec(t);if(n)return ug(Number(n[1]),0);var r,i,o=fg.exec(t);return o?ug(Number(o[1]),{start:1,middle:.5,end:0}[o[2]]):ag[(r=t,(i=r,"-"===(i=i.replace(/([A-Z])/g,function(t){return"-".concat(t.toLowerCase())})).charAt(0)?i.substring(1):i).replace(/^ease-/,"").replace(/(\(|\s).+/,"").toLowerCase().trim())]||ag.linear}function hg(t){return"offset"!==t&&"easing"!==t&&"composite"!==t&&"computedOffset"!==t}var pg=function(t,e,n){return function(r){var i=gg(t,e,r);return de(i)?i:n(i)}};function vg(t,e,n,r){var i=da[t];if(i&&i.syntax&&i.int){var o=yu.styleValueRegistry.getPropertySyntax(i.syntax);if(o){var a=o.parser,s=a?a(e,r):e,u=a?a(n,r):n,c=o.mixer(s,u,r);if(c){var l=pg.apply(void 0,O(c));return function(t){return 0===t?e:1===t?n:l(t)}}}}return pg(!1,!0,function(t){return t?n:e})}function gg(t,e,n){if("number"==typeof t&&"number"==typeof e)return t*(1-n)+e*n;if("boolean"==typeof t&&"boolean"==typeof e||"string"==typeof t&&"string"==typeof e)return n<.5?t:e;if(Array.isArray(t)&&Array.isArray(e)){for(var r=t.length,i=e.length,o=Math.max(r,i),a=[],s=0;s<o;s++)a.push(gg(t[s<r?s:r-1],e[s<i?s:i-1],n));return a}throw new Error("Mismatched interpolation arguments ".concat(t,":").concat(e))}var yg=function(){return B(function t(){x(this,t),this.delay=0,this.direction="normal",this.duration="auto",this._easing="linear",this.easingFunction=sg,this.endDelay=0,this.fill="auto",this.iterationStart=0,this.iterations=1,this.currentIteration=null,this.progress=null},[{key:"easing",get:function(){return this._easing},set:function(t){this.easingFunction=dg(t),this._easing=t}}])}();function mg(t,e){if(null===t)return[];Array.isArray(t)||(t=function(t){var e=[];for(var n in t)if(!(n in["easing","offset","composite"])){var r=t[n];Array.isArray(r)||(r=[r]);for(var i=r.length,o=0;o<i;o++){if(!e[o]){var a={};"offset"in t&&(a.offset=Number(t.offset)),"easing"in t&&(a.easing=t.easing),"composite"in t&&(a.composite=t.composite),e[o]=a}void 0!==r[o]&&null!==r[o]&&(e[o][n]=r[o])}}return e.sort(function(t,e){return(t.computedOffset||0)-(e.computedOffset||0)}),e}(t));for(var n=t.map(function(t){var n={};for(var r in null!=e&&e.composite&&(n.composite="auto"),t){var i=t[r];if("offset"===r){if(null!==i){if(i=Number(i),!isFinite(i))throw new Error("Keyframe offsets must be numbers.");if(i<0||i>1)throw new Error("Keyframe offsets must be between 0 and 1.");n.computedOffset=i}}else if("composite"===r&&-1===["replace","add","accumulate","auto"].indexOf(i))throw new Error("".concat(i," compositing is not supported"));n[r]=i}return void 0===n.offset&&(n.offset=null),void 0===n.easing&&(n.easing=(null==e?void 0:e.easing)||"linear"),void 0===n.composite&&(n.composite="auto"),n}),r=!0,i=-1/0,o=0;o<n.length;o++){var a=n[o].offset;if(pe(a))r=!1;else{if(a<i)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");i=a}}return n=n.filter(function(t){return Number(t.offset)>=0&&Number(t.offset)<=1}),r||function(){var t,e,r=n.length;n[r-1].computedOffset=Number(null!==(t=n[r-1].offset)&&void 0!==t?t:1),r>1&&(n[0].computedOffset=Number(null!==(e=n[0].offset)&&void 0!==e?e:0));for(var i=0,o=Number(n[0].computedOffset),a=1;a<r;a++){var s=n[a].computedOffset;if(!pe(s)&&!pe(o)){for(var u=1;u<a-i;u++)n[i+u].computedOffset=o+(Number(s)-o)*u/(a-i);i=a,o=Number(s)}}}(),n}var bg="backwards|forwards|both|none".split("|"),wg="reverse|alternate|alternate-reverse".split("|");var xg=function(){return B(function t(e,n,r){var i,o=this;x(this,t),this.composite="replace",this.iterationComposite="replace",this.target=e,this.timing=function(t,e){return function(t,e){var n=new yg;return e&&(n.fill="both",n.duration="auto"),"number"!=typeof t||isNaN(t)?void 0!==t&&Object.keys(t).forEach(function(e){if(void 0!==t[e]&&null!==t[e]&&"auto"!==t[e]){if(("number"==typeof n[e]||"duration"===e)&&("number"!=typeof t[e]||isNaN(t[e])))return;if("fill"===e&&-1===bg.indexOf(t[e]))return;if("direction"===e&&-1===wg.indexOf(t[e]))return;n[e]=t[e]}}):n.duration=t,n}(t=function(t){return"number"==typeof t&&(t=isNaN(t)?{duration:"auto"}:{duration:t}),t}(null!=t?t:{duration:"auto"}),e)}(r,!1),this.timing.effect=this,this.timing.activeDuration=(i=this.timing,Math.abs(function(t){var e;return 0===t.duration||0===t.iterations?0:("auto"===t.duration?0:Number(t.duration))*(null!==(e=t.iterations)&&void 0!==e?e:1)}(i)/(i.playbackRate||1))),this.timing.endTime=Math.max(0,this.timing.delay+this.timing.activeDuration+this.timing.endDelay),this.normalizedKeyframes=mg(n,this.timing),this.interpolations=function(t,e,n){var r=function(t,e){for(var n={},r=0;r<t.length;r++)for(var i in t[r])if(hg(i)){var o={offset:t[r].offset,computedOffset:t[r].computedOffset,easing:t[r].easing,easingFunction:dg(t[r].easing)||e.easingFunction,value:t[r][i]};n[i]=n[i]||[],n[i].push(o)}return n}(t,e),i=function(t,e){var n=[];for(var r in t)for(var i=t[r],o=0;o<i.length-1;o++){var a=o,s=o+1,u=i[a].computedOffset,c=i[s].computedOffset,l=u,A=c;0===o&&(l=-1/0,0===c&&(s=a)),o===i.length-2&&(A=1/0,1===u&&(a=s)),n.push({applyFrom:l,applyTo:A,startOffset:i[a].computedOffset,endOffset:i[s].computedOffset,easingFunction:i[a].easingFunction,property:r,interpolation:vg(r,i[a].value,i[s].value,e)})}return n.sort(function(t,e){return t.startOffset-e.startOffset}),n}(r,n);return function(t,e){if(null!==e)i.filter(function(t){return e>=t.applyFrom&&e<t.applyTo}).forEach(function(n){var r=e-n.startOffset,i=n.endOffset-n.startOffset,o=0===i?0:r/i;t.setAttribute(n.property,n.interpolation(o),!1,!1)});else for(var n in r)hg(n)&&t.setAttribute(n,null)}}(this.normalizedKeyframes,this.timing,this.target);var a=yu.globalThis.Proxy;this.computedTiming=a?new a(this.timing,{get:function(t,e){return"duration"===e?"auto"===t.duration?0:t.duration:"fill"===e?"auto"===t.fill?"none":t.fill:"localTime"===e?o.animation&&o.animation.currentTime||null:"currentIteration"===e?o.animation&&"running"===o.animation.playState?t.currentIteration||0:null:"progress"===e?o.animation&&"running"===o.animation.playState?t.progress||0:null:t[e]},set:function(){return!0}}):this.timing},[{key:"applyInterpolations",value:function(){this.interpolations(this.target,Number(this.timeFraction))}},{key:"update",value:function(t){return null!==t&&(this.timeFraction=function(t,e,n){var r=function(t,e,n){if(null===e)return 0;var r=n.endTime;return e<Math.min(n.delay,r)?1:e>=Math.min(n.delay+t+n.endDelay,r)?2:3}(t,e,n),i=function(t,e,n,r,i){switch(r){case 1:return"backwards"===e||"both"===e?0:null;case 3:return n-i;case 2:return"forwards"===e||"both"===e?t:null;case 0:return null}}(t,n.fill,e,r,n.delay);if(null===i)return null;var o="auto"===n.duration?0:n.duration,a=function(t,e,n,r,i){var o=i;return 0===t?1!==e&&(o+=n):o+=r/t,o}(o,r,n.iterations,i,n.iterationStart),s=function(t,e,n,r,i,o){var a=t===1/0?e%1:t%1;return 0!==a||2!==n||0===r||0===i&&0!==o||(a=1),a}(a,n.iterationStart,r,n.iterations,i,o),u=function(t,e,n,r){return 2===t&&e===1/0?1/0:1===n?Math.floor(r)-1:Math.floor(r)}(r,n.iterations,s,a),c=function(t,e,n){var r=t;if("normal"!==t&&"reverse"!==t){var i=e;"alternate-reverse"===t&&(i+=1),r="normal",i!==1/0&&i%2!=0&&(r="reverse")}return"normal"===r?n:1-n}(n.direction,u,s);return n.currentIteration=u,n.progress=c,n.easingFunction(c)}(this.timing.activeDuration,t,this.timing),null!==this.timeFraction)}},{key:"getKeyframes",value:function(){return this.normalizedKeyframes}},{key:"setKeyframes",value:function(t){this.normalizedKeyframes=mg(t)}},{key:"getComputedTiming",value:function(){return this.computedTiming}},{key:"getTiming",value:function(){return this.timing}},{key:"updateTiming",value:function(t){var e=this;Object.keys(t||{}).forEach(function(n){e.timing[n]=t[n]})}}])}();function Eg(t,e){return Number(t.id)-Number(e.id)}var Bg=function(){return B(function t(e){var n=this;x(this,t),this.animations=[],this.ticking=!1,this.timelineTicking=!1,this.hasRestartedThisFrame=!1,this.animationsWithPromises=[],this.inTick=!1,this.pendingEffects=[],this.currentTime=null,this.rafId=0,this.rafCallbacks=[],this.webAnimationsNextTick=function(t){n.currentTime=t,n.discardAnimations(),0===n.animations.length?n.timelineTicking=!1:n.requestAnimationFrame(n.webAnimationsNextTick)},this.processRafCallbacks=function(t){var e=n.rafCallbacks;n.rafCallbacks=[],t<Number(n.currentTime)&&(t=Number(n.currentTime)),n.animations.sort(Eg),n.animations=n.tick(t,!0,n.animations)[0],e.forEach(function(e){e[1](t)}),n.applyPendingEffects()},this.document=e},[{key:"getAnimations",value:function(){return this.discardAnimations(),this.animations.slice()}},{key:"isTicking",value:function(){return this.inTick}},{key:"play",value:function(t,e,n){var r=new xg(t,e,n),i=new Nv(r,this);return this.animations.push(i),this.restartWebAnimationsNextTick(),i.updatePromises(),i.play(),i.updatePromises(),i}},{key:"applyDirtiedAnimation",value:function(t){var e=this;if(!this.inTick){t.markTarget();var n=t.targetAnimations();n.sort(Eg),this.tick(Number(this.currentTime),!1,n.slice())[1].forEach(function(t){var n=e.animations.indexOf(t);-1!==n&&e.animations.splice(n,1)}),this.applyPendingEffects()}}},{key:"restart",value:function(){return this.ticking||(this.ticking=!0,this.requestAnimationFrame(function(){}),this.hasRestartedThisFrame=!0),this.hasRestartedThisFrame}},{key:"destroy",value:function(){this.document.defaultView.cancelAnimationFrame(this.frameId)}},{key:"applyPendingEffects",value:function(){this.pendingEffects.forEach(function(t){null==t||t.applyInterpolations()}),this.pendingEffects=[]}},{key:"updateAnimationsPromises",value:function(){this.animationsWithPromises=this.animationsWithPromises.filter(function(t){return t.updatePromises()})}},{key:"discardAnimations",value:function(){this.updateAnimationsPromises(),this.animations=this.animations.filter(function(t){return"finished"!==t.playState&&"idle"!==t.playState})}},{key:"restartWebAnimationsNextTick",value:function(){this.timelineTicking||(this.timelineTicking=!0,this.requestAnimationFrame(this.webAnimationsNextTick))}},{key:"rAF",value:function(t){var e=this.rafId++;return 0===this.rafCallbacks.length&&(this.frameId=this.document.defaultView.requestAnimationFrame(this.processRafCallbacks)),this.rafCallbacks.push([e,t]),e}},{key:"requestAnimationFrame",value:function(t){var e=this;return this.rAF(function(n){e.updateAnimationsPromises(),t(n),e.updateAnimationsPromises()})}},{key:"tick",value:function(t,e,n){var r,i,o=this;this.inTick=!0,this.hasRestartedThisFrame=!1,this.currentTime=t,this.ticking=!1;var a=[],s=[],u=[],c=[];return n.forEach(function(n){n.tick(t,e),n._inEffect?(s.push(n.effect),n.markTarget()):(a.push(n.effect),n.unmarkTarget()),n._needsTick&&(o.ticking=!0);var r=n._inEffect||n._needsTick;n._inTimeline=r,r?u.push(n):c.push(n)}),(r=this.pendingEffects).push.apply(r,a),(i=this.pendingEffects).push.apply(i,s),this.ticking&&this.requestAnimationFrame(function(){}),this.inTick=!1,[u,c]}}])}();yu.EasingFunction=dg,yu.AnimationTimeline=Bg;var kg=function(t){function e(){var t;x(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=F(this,e,[].concat(r))).landmarks=[],t}return P(e,t),B(e,[{key:"rotate",value:function(t,e,n){if(this.relElevation=hr(e),this.relAzimuth=hr(t),this.relRoll=hr(n),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.type===Fr.EXPLORING){var r=re(ne(),[1,0,0],yr((this.rotateWorld?1:-1)*this.relElevation)),i=re(ne(),[0,1,0],yr((this.rotateWorld?1:-1)*this.relAzimuth)),o=re(ne(),[0,0,1],yr(this.relRoll)),a=ie(ne(),i,r);a=ie(ne(),a,o);var s=Nt(rt(),a);ht(this.matrix,this.matrix,[0,0,-this.distance]),dt(this.matrix,this.matrix,s),ht(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation)>90)return this;this.computeMatrix()}return this._getAxes(),this.type===Fr.ORBITING||this.type===Fr.EXPLORING?this._getPosition():this.type===Fr.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(t,e){var n=vr(t,e,0),r=Q(this.position);return H(r,r,K(_(),this.right,n[0])),H(r,r,K(_(),this.up,n[1])),this._setPosition(r),this.triggerUpdate(),this}},{key:"dolly",value:function(t){var e=this.forward,n=Q(this.position),r=this.dollyingStep,i=this.distance+t*this.dollyingStep;return r=Math.max(Math.min(i,this.maxDistance),this.minDistance)-this.distance,n[0]+=r*e[0],n[1]+=r*e[1],n[2]+=r*e[2],this._setPosition(n),this.type===Fr.ORBITING||this.type===Fr.EXPLORING?this._getDistance():this.type===Fr.TRACKING&&H(this.focalPoint,n,this.distanceVector),this.triggerUpdate(),this}},{key:"cancelLandmarkAnimation",value:function(){void 0!==this.landmarkAnimationID&&this.canvas.cancelAnimationFrame(this.landmarkAnimationID)}},{key:"createLandmark",value:function(t){var e,n,r,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=o.position,s=void 0===a?this.position:a,u=o.focalPoint,c=void 0===u?this.focalPoint:u,l=o.roll,A=o.zoom,f=new yu.CameraContribution;f.setType(this.type,void 0),f.setPosition(s[0],null!==(e=s[1])&&void 0!==e?e:this.position[1],null!==(n=s[2])&&void 0!==n?n:this.position[2]),f.setFocalPoint(c[0],null!==(r=c[1])&&void 0!==r?r:this.focalPoint[1],null!==(i=c[2])&&void 0!==i?i:this.focalPoint[2]),f.setRoll(null!=l?l:this.roll),f.setZoom(null!=A?A:this.zoom);var d={name:t,matrix:it(f.getWorldTransform()),right:Q(f.right),up:Q(f.up),forward:Q(f.forward),position:Q(f.getPosition()),focalPoint:Q(f.getFocalPoint()),distanceVector:Q(f.getDistanceVector()),distance:f.getDistance(),dollyingStep:f.getDollyingStep(),azimuth:f.getAzimuth(),elevation:f.getElevation(),roll:f.getRoll(),relAzimuth:f.relAzimuth,relElevation:f.relElevation,relRoll:f.relRoll,zoom:f.getZoom()};return this.landmarks.push(d),d}},{key:"gotoLandmark",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=ve(t)?this.landmarks.find(function(e){return e.name===t}):t;if(r){var i=de(n)?{duration:n}:n,o=i.easing,a=void 0===o?"linear":o,s=i.duration,u=void 0===s?100:s,c=i.easingFunction,l=void 0===c?void 0:c,A=i.onfinish,f=void 0===A?void 0:A,d=i.onframe,h=void 0===d?void 0:d;this.cancelLandmarkAnimation();var p,v=r.position,g=r.focalPoint,y=r.zoom,m=r.roll,b=l||yu.EasingFunction(a),w=function(){e.setFocalPoint(g),e.setPosition(v),e.setRoll(m),e.setZoom(y),e.computeMatrix(),e.triggerUpdate(),null==f||f()};if(0===u)return w();var x=function(t){void 0===p&&(p=t);var n=t-p;if(n>=u)w();else{var r,i,o=b(n/u),a=_(),s=_();if(W(a,e.focalPoint,g,o),W(s,e.position,v,o),i=e.roll*(1-o)+m*o,r=e.zoom*(1-o)+y*o,e.setFocalPoint(a),e.setPosition(s),e.setRoll(i),e.setZoom(r),J(a,g)+J(s,v)<=.01&&void 0===y&&void 0===m)return w();e.computeMatrix(),e.triggerUpdate(),n<u&&(null==h||h(o),e.landmarkAnimationID=e.canvas.requestAnimationFrame(x))}};this.canvas.requestAnimationFrame(x)}}}])}(Lr);yu.CameraContribution=kg;var Og=["body","startHead","endHead","startHeadOffset","endHeadOffset"],Cg=["body","startHead","endHead","startHeadOffset","endHeadOffset"],Mg=["body","startHead","endHead","startHeadOffset","endHeadOffset"],Sg=function(t){function e(t){var n;x(this,e);var r=(n=F(this,e,[w(w({},t),{},{type:e.tag})])).attributes,i=r.body,o=r.startHead,a=r.endHead;r.startHeadOffset,r.endHeadOffset;var s=Zn(r,Og);if(!i)throw new Error("Arrow's body is required");return n.body=i,n.appendChild(n.body),n.handleBodyAttributeChanged(n.body),o&&n.appendArrowHead(n.getArrowHeadType(o),!0),a&&n.appendArrowHead(n.getArrowHeadType(a),!1),n.applyArrowStyle(s,[n.body,n.startHead,n.endHead]),n}return P(e,t),B(e,[{key:"handleBodyAttributeChanged",value:function(t){var e=this;t.addEventListener(Hs.ATTR_MODIFIED,function(t){var n=t.attrName;"x1"===n||"y1"===n?e.startHead&&e.transformArrowHead(e.startHead,!0):"x2"!==n&&"y2"!==n||e.endHead&&e.transformArrowHead(e.endHead,!1)})}},{key:"getBody",value:function(){return this.body}},{key:"getStartHead",value:function(){return this.startHead}},{key:"getEndHead",value:function(){return this.endHead}},{key:"attributeChangedCallback",value:function(t,e,n){if("opacity"===t||"strokeOpacity"===t||"stroke"===t||"lineWidth"===t||"increasedLineWidthForHitTesting"===t)this.applyArrowStyle(m({},t,n),[this.body,this.startHead,this.endHead]);else if("startHead"===t||"endHead"===t){var r="startHead"===t;if(this.destroyArrowHead(r),n){var i=this.attributes;i.body,i.startHead,i.endHead,i.startHeadOffset,i.endHeadOffset;var o=Zn(i,Cg);this.appendArrowHead(this.getArrowHeadType(n),r),this.applyArrowStyle(o,[r?this.startHead:this.endHead])}}else if("body"===t){var a=this.attributes;a.body,a.startHead,a.endHead,a.startHeadOffset,a.endHeadOffset;var s=Zn(a,Mg);this.body.destroy(),this.body=n,this.appendChild(this.body),this.applyArrowStyle(s,[this.body])}else"startHeadOffset"===t?this.moveArrowHeadAlongTangent(n,!0):"endHeadOffset"===t&&this.moveArrowHeadAlongTangent(n,!1)}},{key:"getArrowHeadType",value:function(t){return"boolean"==typeof t?"default":"custom"}},{key:"appendArrowHead",value:function(t,e){var n;n="default"===t?this.createDefaultArrowHead():e?this.attributes.startHead:this.attributes.endHead,this.transformArrowHead(n,e),n.setAttribute("zIndex",1),e?this.startHead=n:this.endHead=n,this.appendChild(n);var r=e?this.attributes.startHeadOffset:this.attributes.endHeadOffset;r&&this.moveArrowHeadAlongTangent(r,e)}},{key:"transformArrowHead",value:function(t,e){var n,r=_(),i=0,o=0,a=0,s=0,u=this.body&&this.body.nodeName;if(u===Jn.LINE){var c=this.body.attributes,l=c.x1,A=c.x2,f=c.y1,d=c.y2;i=e?A:l,o=e?l:A,a=e?d:f,s=e?f:d}else if(u===Jn.POLYLINE){var h=this.body.attributes.points,p=h.length;i=e?h[1][0]:h[p-2][0],a=e?h[1][1]:h[p-2][1],o=e?h[0][0]:h[p-1][0],s=e?h[0][1]:h[p-1][1]}else if(u===Jn.PATH){var g=v(this.getTangent(this.body,e),2),y=g[0],m=g[1];i=y[0],a=y[1],o=m[0],s=m[1]}var b=i-o,w=a-s;n=Math.atan2(w,b),r=j(o,s,0),e?(this.startHeadPosition=r,this.startHeadRad=n):(this.endHeadPosition=r,this.endHeadRad=n),t.setLocalPosition(r),t.setLocalEulerAngles(180*n/Math.PI+t.getLocalEulerAngles())}},{key:"moveArrowHeadAlongTangent",value:function(t,e){var n=e?this.startHead:this.endHead;n&&n.setLocalPosition(Z(_(),e?this.startHeadPosition:this.endHeadPosition,j(Math.cos(e?this.startHeadRad:this.endHeadRad)*t,Math.sin(e?this.startHeadRad:this.endHeadRad)*t,0))),this.body}},{key:"destroyArrowHead",value:function(t){t&&this.startHead&&(this.startHead.destroy(),this.startHead=void 0),!t&&this.endHead&&(this.endHead.destroy(),this.endHead=void 0)}},{key:"getTangent",value:function(t,e){return e?t.getStartTangent():t.getEndTangent()}},{key:"createDefaultArrowHead",value:function(){var t=this.attributes,e=t.stroke,n=t.lineWidth,r=Math.sin,i=Math.cos,o=Math.PI,a=10*i(o/6);return new zu({style:{d:"M".concat(a/2,",").concat(10*r(o/6)," L-").concat(a/2,",0 L").concat(a/2,",-").concat(10*r(o/6)),stroke:e,lineWidth:n,transformOrigin:"center"}})}},{key:"applyArrowStyle",value:function(t,e){var n=t.opacity,r=t.stroke,i=t.strokeOpacity,o=t.lineWidth,a=t.increasedLineWidthForHitTesting;e.forEach(function(t){t&&(pe(n)||(t.style.opacity=n),pe(r)||(t.style.stroke=r),pe(i)||(t.style.strokeOpacity=i),pe(o)||(t.style.lineWidth=o),pe(a)||(t.style.increasedLineWidthForHitTesting=a))})}}])}(Nu);Sg.tag="arrow",Sg.PARSED_STYLE_LIST=new Set([].concat(O(Nu.PARSED_STYLE_LIST),["body","startHead","endHead","startHeadOffset","endHeadOffset","stroke","lineWidth","opacity","strokeOpacity"]));var Fg=Math.PI,Tg=2*Fg,Pg=Math.sin,Ig=Math.cos,Ng=Math.acos,Lg=Math.atan2,_g=Math.sqrt,Qg=Math.max,Ug=Math.min,jg=1e-4;[{name:"sr",inherits:!1,interpolable:!0,syntax:zr.LENGTH_PERCENTAGE},{name:"sr0",inherits:!1,interpolable:!0,syntax:zr.LENGTH_PERCENTAGE},{name:"startAngle",inherits:!1,interpolable:!0,syntax:zr.ANGLE},{name:"endAngle",inherits:!1,interpolable:!0,syntax:zr.ANGLE}].forEach(function(t){Ju(t)});var Dg=function(t,e,n,r){return{x:t+n*Math.cos(r),y:e+n*Math.sin(r)}};function Rg(t,e,n,r,i,o,a){var s=t-n,u=e-r,c=(a?o:-o)/_g(s*s+u*u),l=c*u,A=-c*s,f=t+l,d=e+A,h=n+l,p=r+A,v=(f+h)/2,g=(d+p)/2,y=h-f,m=p-d,b=y*y+m*m,w=i-o,x=f*p-h*d,E=(m<0?-1:1)*_g(Qg(0,w*w*b-x*x)),B=(x*m-y*E)/b,k=(-x*y-m*E)/b,O=(x*m+y*E)/b,C=(-x*y+m*E)/b,M=B-v,S=k-g,F=O-v,T=C-g;return M*M+S*S>F*F+T*T&&(B=O,k=C),{cx:B,cy:k,x0:-l,y0:-A,x1:B*(i/w-1),y1:k*(i/w-1)}}function Hg(t,e){return(e=e<0&&t>=0?e+Tg:e)-t<=Fg?0:1}var zg=function(t){function e(t){var n;return x(this,e),(n=F(this,e,[t])).updatePath(),n}return P(e,t),B(e,[{key:"setAttribute",value:function(t,n,r){xn(e,"setAttribute",this,3)([t,n,r]),["startAngle","endAngle","sr","sr0","radius"].indexOf(t)>-1&&this.updatePath()}},{key:"updatePath",value:function(){var t=this.parsedStyle,n=t.x,r=t.y,i=t.startAngle,o=t.endAngle,a=t.sr,s=t.sr0,u=t.radius,c=this.createPath(n,r,i?yr(i):0,o?yr(o):2*Math.PI,a||0,s||0,u||[0,0,0,0]);xn(e,"setAttribute",this,3)(["d",c])}},{key:"createPath",value:function(t,e,n,r,i,o,a){if(!(i<=0)){var s=Dg(t,e,i,n),u=Dg(t,e,i,r),c=Dg(t,e,o,n),l=Dg(t,e,o,r);if(rn(r-n,2*Math.PI)){var A=Dg(t,e,i,n+Math.PI),f=Dg(t,e,o,n+Math.PI),d=[["M",s.x,s.y],["A",i,i,0,1,1,A.x,A.y],["A",i,i,0,1,1,u.x,u.y],["M",c.x,c.y]];return o&&(d.push(["A",o,o,0,1,0,f.x,f.y]),d.push(["A",o,o,0,1,0,l.x,l.y])),d.push(["M",s.x,s.y]),d.push(["Z"]),d}var h=r-n,p=i*Ig(n),g=i*Pg(n),y=o*Ig(r),m=o*Pg(r),b=i*Ig(r),w=i*Pg(r),x=o*Ig(n),E=o*Pg(n),B=v(a,4),k=B[0],O=B[1],C=B[2],M=B[3],S=(i-o)/2,F=Ug(S,k),T=Ug(S,O),P=Ug(S,C),I=Ug(S,M),N=Qg(F,T),L=Qg(P,I),_=N,Q=L;if((N>jg||L>jg)&&h<Fg){var U=function(t,e,n,r,i,o,a,s){var u=n-t,c=r-e,l=a-i,A=s-o,f=A*u-l*c;if(!(f*f<jg))return[t+(f=(l*(e-o)-A*(t-i))/f)*u,e+f*c]}(p,g,x,E,b,w,y,m);if(U){var j=p-U[0],D=g-U[1],R=b-U[0],H=w-U[1],z=1/Pg(Ng((j*R+D*H)/(_g(j*j+D*D)*_g(R*R+H*H)))/2),K=_g(U[0]*U[0]+U[1]*U[1]);_=Ug(N,(i-K)/(z+1)),Q=Ug(L,(o-K)/(z-1))}}var G=Hg(n,r),V=!0,W=[];if(_>jg){var Y=Ug(k,_),X=Ug(O,_),q=Rg(x,E,p,g,i,Y,V),Z=Rg(b,w,y,m,i,X,V);if(W.push(["M",t+q.cx+q.x0,e+q.cy+q.y0]),_<N&&Y===X){var J=Lg(q.y0,q.x0),$=Lg(Z.y0,Z.x0);W.push(["A",_,_,0,Hg(J,$),1,t+Z.cx+Z.x0,e+Z.cy+Z.y0])}else{if(Y>0){var tt=Lg(q.y0,q.x0),et=Lg(q.y1,q.x1),nt=Dg(t,e,i,et);W.push(["A",Y,Y,0,Hg(tt,et),1,nt.x,nt.y])}var rt=Lg(q.cy+q.y1,q.cx+q.x1),it=Lg(Z.cy+Z.y1,Z.cx+Z.x1),ot=Dg(t,e,i,it);if(W.push(["A",i,i,0,Hg(rt,it),1,ot.x,ot.y]),X>0){var at=Lg(Z.y1,Z.x1),st=Lg(Z.y0,Z.x0);W.push(["A",X,X,0,Hg(at,st),1,t+Z.cx+Z.x0,e+Z.cy+Z.y0])}}}else W.push(["M",s.x,s.y]),W.push(["A",i,i,0,G,1,u.x,u.y]);if(o<jg)W.push(["L",l.x,l.y]);else if(Q>jg){var ut=Ug(M,Q),ct=Ug(C,Q),lt=Rg(y,m,0,0,o-i,ct,V),At=Rg(0,0,x,E,o-i,ut,V);if(W.push(["L",t+lt.cx+lt.x0,e+lt.cy+lt.y0]),Q<L&&ut===ct){var ft=Lg(lt.y0,lt.x0),dt=Lg(At.y0,At.x0),ht=Dg(t,e,o,dt);W.push(["A",_,_,0,Hg(ft,dt),1,ht.x,ht.y])}else{if(ct>0){var pt=Lg(lt.y0,lt.x0),vt=Lg(lt.y1,lt.x1),gt=Dg(t,e,o-i,vt);W.push(["A",ct,ct,0,Hg(pt,vt),1,gt.x,gt.y])}var yt=Lg(lt.cy+lt.y1,lt.cx+lt.x1),mt=Lg(At.cy+At.y1,At.cx+At.x1),bt=Dg(t,e,o,mt);if(W.push(["A",o,o,0,Hg(mt,yt),0,bt.x,bt.y]),W.push(["L",bt.x,bt.y]),ut>0){var wt=Lg(At.y1,At.x1),xt=Lg(At.y0,At.x0);W.push(["A",ut,ut,0,Hg(wt,xt),1,t+At.cx+At.x0,e+At.cy+At.y0])}}}else W.push(["L",l.x,l.y]),W.push(["A",o,o,0,G,0,c.x,c.y]);return W.push(["Z"]),W}}}])}(zu);zg.PARSED_STYLE_LIST=new Set([].concat(O(zu.PARSED_STYLE_LIST),["x","y","sr","sr0","radius","startAngle","endAngle"]));const Kg=function(t){return pe(t)?"":t.toString()},Gg=function(t){var e=Kg(t);return e.charAt(0).toUpperCase()+e.substring(1)},Vg=function(t){return"object"==typeof t&&null!==t},Wg=function(t){return null!==t&&"function"!=typeof t&&isFinite(t.length)};var Yg=function(t,e){if(t===e)return!0;if(!t||!e)return!1;if(ve(t)||ve(e))return!1;if(Wg(t)||Wg(e)){if(t.length!==e.length)return!1;for(var n=!0,r=0;r<t.length&&(n=Yg(t[r],e[r]));r++);return n}if(Vg(t)||Vg(e)){var i=Object.keys(t),o=Object.keys(e);if(i.length!==o.length)return!1;for(n=!0,r=0;r<i.length&&(n=Yg(t[i[r]],e[i[r]]));r++);return n}return!1};const Xg=Yg;var qg,Zg,Jg,$g,ty,ey,ny,ry,iy,oy,ay={duration:500},sy={duration:1e3,easing:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",iterations:1,fill:"both"};!function(t){t.NodeAdded="NodeAdded",t.NodeUpdated="NodeUpdated",t.NodeRemoved="NodeRemoved",t.EdgeAdded="EdgeAdded",t.EdgeUpdated="EdgeUpdated",t.EdgeRemoved="EdgeRemoved",t.ComboAdded="ComboAdded",t.ComboUpdated="ComboUpdated",t.ComboRemoved="ComboRemoved"}(qg||(qg={})),function(t){t.DRAW="draw",t.COLLAPSE="collapse",t.EXPAND="expand",t.TRANSFORM="transform"}(Zg||(Zg={})),function(t){t.CLICK="canvas:click",t.DBLCLICK="canvas:dblclick",t.POINTER_OVER="canvas:pointerover",t.POINTER_LEAVE="canvas:pointerleave",t.POINTER_ENTER="canvas:pointerenter",t.POINTER_MOVE="canvas:pointermove",t.POINTER_OUT="canvas:pointerout",t.POINTER_DOWN="canvas:pointerdown",t.POINTER_UP="canvas:pointerup",t.CONTEXT_MENU="canvas:contextmenu",t.DRAG_START="canvas:dragstart",t.DRAG="canvas:drag",t.DRAG_END="canvas:dragend",t.DRAG_ENTER="canvas:dragenter",t.DRAG_OVER="canvas:dragover",t.DRAG_LEAVE="canvas:dragleave",t.DROP="canvas:drop",t.WHEEL="canvas:wheel"}(Jg||(Jg={})),function(t){t.CLICK="combo:click",t.DBLCLICK="combo:dblclick",t.POINTER_OVER="combo:pointerover",t.POINTER_LEAVE="combo:pointerleave",t.POINTER_ENTER="combo:pointerenter",t.POINTER_MOVE="combo:pointermove",t.POINTER_OUT="combo:pointerout",t.POINTER_DOWN="combo:pointerdown",t.POINTER_UP="combo:pointerup",t.CONTEXT_MENU="combo:contextmenu",t.DRAG_START="combo:dragstart",t.DRAG="combo:drag",t.DRAG_END="combo:dragend",t.DRAG_ENTER="combo:dragenter",t.DRAG_OVER="combo:dragover",t.DRAG_LEAVE="combo:dragleave",t.DROP="combo:drop"}($g||($g={})),function(t){t.CLICK="click",t.DBLCLICK="dblclick",t.POINTER_OVER="pointerover",t.POINTER_LEAVE="pointerleave",t.POINTER_ENTER="pointerenter",t.POINTER_MOVE="pointermove",t.POINTER_OUT="pointerout",t.POINTER_DOWN="pointerdown",t.POINTER_UP="pointerup",t.CONTEXT_MENU="contextmenu",t.DRAG_START="dragstart",t.DRAG="drag",t.DRAG_END="dragend",t.DRAG_ENTER="dragenter",t.DRAG_OVER="dragover",t.DRAG_LEAVE="dragleave",t.DROP="drop",t.KEY_DOWN="keydown",t.KEY_UP="keyup",t.WHEEL="wheel",t.PINCH="pinch"}(ty||(ty={})),function(t){t.KEY_DOWN="keydown",t.KEY_UP="keyup"}(ey||(ey={})),function(t){t.CLICK="edge:click",t.DBLCLICK="edge:dblclick",t.POINTER_OVER="edge:pointerover",t.POINTER_LEAVE="edge:pointerleave",t.POINTER_ENTER="edge:pointerenter",t.POINTER_MOVE="edge:pointermove",t.POINTER_OUT="edge:pointerout",t.POINTER_DOWN="edge:pointerdown",t.POINTER_UP="edge:pointerup",t.CONTEXT_MENU="edge:contextmenu",t.DRAG_ENTER="edge:dragenter",t.DRAG_OVER="edge:dragover",t.DRAG_LEAVE="edge:dragleave",t.DROP="edge:drop"}(ny||(ny={})),function(t){t.BEFORE_CANVAS_INIT="beforecanvasinit",t.AFTER_CANVAS_INIT="aftercanvasinit",t.BEFORE_SIZE_CHANGE="beforesizechange",t.AFTER_SIZE_CHANGE="aftersizechange",t.BEFORE_ELEMENT_CREATE="beforeelementcreate",t.AFTER_ELEMENT_CREATE="afterelementcreate",t.BEFORE_ELEMENT_UPDATE="beforeelementupdate",t.AFTER_ELEMENT_UPDATE="afterelementupdate",t.BEFORE_ELEMENT_DESTROY="beforeelementdestroy",t.AFTER_ELEMENT_DESTROY="afterelementdestroy",t.BEFORE_ELEMENT_TRANSLATE="beforeelementtranslate",t.AFTER_ELEMENT_TRANSLATE="afterelementtranslate",t.BEFORE_DRAW="beforedraw",t.AFTER_DRAW="afterdraw",t.BEFORE_RENDER="beforerender",t.AFTER_RENDER="afterrender",t.BEFORE_ANIMATE="beforeanimate",t.AFTER_ANIMATE="afteranimate",t.BEFORE_LAYOUT="beforelayout",t.AFTER_LAYOUT="afterlayout",t.BEFORE_STAGE_LAYOUT="beforestagelayout",t.AFTER_STAGE_LAYOUT="afterstagelayout",t.BEFORE_TRANSFORM="beforetransform",t.AFTER_TRANSFORM="aftertransform",t.BATCH_START="batchstart",t.BATCH_END="batchend",t.BEFORE_DESTROY="beforedestroy",t.AFTER_DESTROY="afterdestroy",t.BEFORE_RENDERER_CHANGE="beforerendererchange",t.AFTER_RENDERER_CHANGE="afterrendererchange"}(ry||(ry={})),function(t){t.UNDO="undo",t.REDO="redo",t.CANCEL="cancel",t.ADD="add",t.CLEAR="clear",t.CHANGE="change"}(iy||(iy={})),function(t){t.CLICK="node:click",t.DBLCLICK="node:dblclick",t.POINTER_OVER="node:pointerover",t.POINTER_LEAVE="node:pointerleave",t.POINTER_ENTER="node:pointerenter",t.POINTER_MOVE="node:pointermove",t.POINTER_OUT="node:pointerout",t.POINTER_DOWN="node:pointerdown",t.POINTER_UP="node:pointerup",t.CONTEXT_MENU="node:contextmenu",t.DRAG_START="node:dragstart",t.DRAG="node:drag",t.DRAG_END="node:dragend",t.DRAG_ENTER="node:dragenter",t.DRAG_OVER="node:dragover",t.DRAG_LEAVE="node:dragleave",t.DROP="node:drop"}(oy||(oy={}));var uy,cy="combo",ly="tree";!function(t){t.NODE="node",t.EDGE="edge",t.COMBO="combo",t.THEME="theme",t.PALETTE="palette",t.LAYOUT="layout",t.BEHAVIOR="behavior",t.PLUGIN="plugin",t.ANIMATION="animation",t.TRANSFORM="transform",t.SHAPE="shape"}(uy||(uy={}));var Ay={animation:{},behavior:{},combo:{},edge:{},layout:{},node:{},palette:{},theme:{},plugin:{},transform:{},shape:{}};function fy(t,e){var n,r=null===(n=Ay[t])||void 0===n?void 0:n[e];if(r)return r}function dy(t){return Ay[t]}var hy="5.0.50",py="G6";function vy(t){return"[".concat(py," v").concat(hy,"] ").concat(t)}var gy={mute:!1,debug:function(t){!gy.mute&&console.debug(vy(t))},info:function(t){!gy.mute&&console.info(vy(t))},warn:function(t){!gy.mute&&console.warn(vy(t))},error:function(t){!gy.mute&&console.error(vy(t))}};function yy(t){var e=t.theme;return e?fy(uy.THEME,e)||(gy.warn("The theme of ".concat(e," is not registered.")),{}):{}}function my(t,e){if(Array.isArray(t)&&0===t.length)return null;var n=Array.isArray(t)?t[0]:t,r=Array.isArray(t)?t.slice(1):e||[];return new Proxy(n,{get:function(t,e){return"function"!=typeof t[e]||["onframe","onfinish"].includes(e)?"finished"===e?Promise.all([n.finished].concat(O(r.map(function(t){return t.finished})))):Reflect.get(t,e):function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];t[e].apply(t,i),r.forEach(function(t){var n,r;return null===(r=t[e])||void 0===r?void 0:(n=r).call.apply(n,[t].concat(i))})}},set:function(t,e,n){return["onframe","onfinish"].includes(e)||r.forEach(function(t){t[e]=n}),Reflect.set(t,e,n)}})}function by(t){var e=t.reduce(function(t,e){return Object.entries(e).forEach(function(e){var n=v(e,2),r=n[0],i=n[1];void 0===t[r]?t[r]=[i]:t[r].push(i)}),t},{});Object.entries(e).forEach(function(n){var r=v(n,2),i=r[0],o=r[1];(o.length!==t.length||o.some(function(t){return pe(t)})||o.every(function(t){return!["sourceNode","targetNode","childrenNode"].includes(i)&&Xg(t,o[0])}))&&delete e[i]});var n=Object.entries(e).reduce(function(t,e){var n=v(e,2),r=n[0];return n[1].forEach(function(e,n){t[n]?t[n][r]=e:t[n]=m({},r,e)}),t},[]);return 0!==t.length&&0===n.length&&n.push.apply(n,[{_:0},{_:0}]),n}function wy(t){switch(t){case"opacity":return 1;case"x":case"y":case"z":case"zIndex":return 0;case"visibility":return"visible";case"collapsed":return!1;case"states":return[];default:return}}function xy(t,e){var n=t.animation;if(!1===n||!1===e)return!1;var r=Object.assign({},ay);return bn(n)&&Object.assign(r,n),bn(e)&&Object.assign(r,e),r}function Ey(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(!r&&0===t&&0===e&&0===n)return null;if(Array.isArray(r)){for(var i=-1,o=[],a=0;a<r.length;a++){var s=r[a];if("translate"===s[0]){if(s[1]===t&&s[2]===e)return null;i=a,o.push(["translate",t,e])}else if("translate3d"===s[0]){if(s[1]===t&&s[2]===e&&s[3]===n)return null;i=a,o.push(["translate3d",t,e,null!=n?n:0])}else o.push(s)}return-1===i&&o.splice(0,0,de(n)?["translate3d",t,e,null!=n?n:0]:["translate",t,e]),0===o.length?null:o}var u=r?r.replace(/translate(3d)?\([^)]*\)/g,""):"";return 0===n?"translate(".concat(t,", ").concat(e,")").concat(u):"translate3d(".concat(t,", ").concat(e,", ").concat(n,")").concat(u)}var By=function(t,e,n){if(!n.length)return null;var r,i=v(e,2),o=i[0],a=i[1],s=n.map(function(e){var n=e.fields,i=e.shape,s=(e.states,function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(e,["fields","shape","states"])),u=function(e){var n;if(e){var r=t.getShape(e);if(!r)return null;var i="get".concat(Gg(e),"Style"),s=(null===(n=null==t?void 0:t[i])||void 0===n?void 0:n.bind(t))||function(t){return t};return{shape:r,fromStyle:(null==s?void 0:s(o))||{},toStyle:(null==s?void 0:s(a))||{}}}return{shape:t,fromStyle:o,toStyle:a}}(i);if(!u)return null;var c=u.shape,l=u.fromStyle,A=u.toStyle,f=[{},{}];if(n.forEach(function(t){var e,n;Object.assign(f[0],m({},t,null!==(e=l[t])&&void 0!==e?e:wy(t))),Object.assign(f[1],m({},t,null!==(n=A[t])&&void 0!==n?n:wy(t)))}),f.some(function(t){return Object.keys(t).some(function(t){return["x","y","z"].includes(t)})})){var d=c.attributes||{},h=d.x,p=void 0===h?0:h,v=d.y,g=void 0===v?0:v,y=d.z,b=d.transform,w=void 0===b?"":b;f.forEach(function(t){var e,n,r;t.transform=Ey(null!==(e=t.x)&&void 0!==e?e:p,null!==(n=t.y)&&void 0!==n?n:g,null!==(r=t.z)&&void 0!==r?r:y,w)})}var x=c.animate(by(f),s);return void 0===i&&(r=x),x}).filter(Boolean),u=r||(null==s?void 0:s[0]);return u?my(u,s.filter(function(t){return t!=t})):null},ky=[{fields:["x","y"]}],Oy=ky,Cy=[{fields:["sourceNode","targetNode"]}],My=Cy,Sy=[{fields:["childrenNode","x","y"]}],Fy=Sy,Ty=Object.prototype.hasOwnProperty;const Py=function(t,e){if(!e||!tn(t))return{};for(var n,r={},i=mn(e)?e:function(t){return t[e]},o=0;o<t.length;o++){var a=t[o];n=i(a),Ty.call(r,n)?r[n].push(a):r[n]=[a]}return r},Iy=function(t,e,n){var r,i,o,a,s=0;n||(n={});var u=function(){s=!1===n.leading?0:Date.now(),r=null,a=t.apply(i,o),r||(i=o=null)},c=function(){var c=Date.now();s||!1!==n.leading||(s=c);var l=e-(c-s);return i=this,o=arguments,l<=0||l>e?(r&&(clearTimeout(r),r=null),s=c,a=t.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(u,l)),a};return c.cancel=function(){clearTimeout(r),s=0,r=i=o=null},c};var Ny=function(t){if("object"!=typeof t||null===t)return t;var e;if(tn(t)){e=[];for(var n=0,r=t.length;n<r;n++)"object"==typeof t[n]&&null!=t[n]?e[n]=Ny(t[n]):e[n]=t[n]}else for(var i in e={},t)"object"==typeof t[i]&&null!=t[i]?e[i]=Ny(t[i]):e[i]=t[i];return e};const Ly=Ny;function _y(t){return t instanceof Float32Array||!(!Array.isArray(t)||2!==t.length&&3!==t.length)&&t.every(function(t){return"number"==typeof t})}function Qy(t,e,n){return t>=e&&t<=n}function Uy(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(Array.isArray(t)){var e=v(t,4),n=e[0],r=void 0===n?0:n,i=e[1],o=void 0===i?r:i,a=e[2],s=void 0===a?r:a,u=e[3];return[r,o,s,void 0===u?o:u]}return[t,t,t,t]}function jy(){var t=Uy(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0);return t[0]+t[2]}function Dy(t){return t.max[0]-t.min[0]}function Ry(t){return t.max[1]-t.min[1]}function Hy(t){return[Dy(t),Ry(t)]}function zy(t,e){var n=_y(t)?Ky(t):t.getShape("key").getBounds();return e?Gy(n,e):n}function Ky(t){var e=v(t,3),n=e[0],r=e[1],i=e[2],o=void 0===i?0:i,a=new ar;return a.setMinMax([n,r,o],[n,r,o]),a}function Gy(t,e){var n=v(Uy(e),4),r=n[0],i=n[1],o=n[2],a=n[3],s=v(t.min,3),u=s[0],c=s[1],l=s[2],A=v(t.max,3),f=A[0],d=A[1],h=A[2],p=new ar;return p.setMinMax([u-a,c-r,l],[f+i,d+o,h]),p}function Vy(t){if(0===t.length)return new ar;if(1===t.length)return t[0];var e=new ar;e.setMinMax(t[0].min,t[0].max);for(var n=1;n<t.length;n++){var r=t[n];e.setMinMax([Math.min(e.min[0],r.min[0]),Math.min(e.min[1],r.min[1]),Math.min(e.min[2],r.min[2])],[Math.max(e.max[0],r.max[0]),Math.max(e.max[1],r.max[1]),Math.max(e.max[2],r.max[2])])}return e}function Wy(t,e){return Qy(t[0],e.min[0],e.max[0])&&Qy(t[1],e.min[1],e.max[1])}function Yy(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=v(e.min,2),i=r[0],o=r[1],a=v(e.max,2),s=a[0],u=a[1],c=(t[1]===o||t[1]===u)&&(n||Qy(t[0],i,s)),l=(t[0]===i||t[0]===s)&&(n||Qy(t[1],o,u));return c||l}function Xy(t,e){var n=e.center;return t[0]===n[0]&&t[1]===n[1]}function qy(t,e){var n=v(t,2),r=n[0],i=n[1],o=v(e.min,2),a=o[0],s=o[1],u=v(e.max,2),c=r-a,l=u[0]-r,A=i-s,f=u[1]-i,d=Math.min(c,l,A,f);return d===c?"left":d===l?"right":d===A?"top":d===f?"bottom":"left"}function Zy(t,e){var n=Ly(t);if(Wy(t,e))switch(qy(t,e)){case"left":n[0]=e.min[0];break;case"right":n[0]=e.max[0];break;case"top":n[1]=e.min[1];break;case"bottom":n[1]=e.max[1]}else{var r=v(t,2),i=r[0],o=r[1],a=v(e.min,2),s=a[0],u=a[1],c=v(e.max,2),l=c[0],A=c[1];n[0]=Qy(i,s,l)?i:i<s?s:l,n[1]=Qy(o,u,A)?o:o<u?u:A}return n}var Jy=function(t,e){return t===e},$y=function(){function t(t,e){void 0===e&&(e=null),this.value=t,this.next=e}return t.prototype.toString=function(t){return t?t(this.value):"".concat(this.value)},t}(),tm=function(){function t(t){void 0===t&&(t=Jy),this.head=null,this.tail=null,this.compare=t}return t.prototype.prepend=function(t){var e=new $y(t,this.head);return this.head=e,this.tail||(this.tail=e),this},t.prototype.append=function(t){var e=new $y(t);return this.head?(this.tail.next=e,this.tail=e,this):(this.head=e,this.tail=e,this)},t.prototype.delete=function(t){if(!this.head)return null;for(var e=null;this.head&&this.compare(this.head.value,t);)e=this.head,this.head=this.head.next;var n=this.head;if(null!==n)for(;n.next;)this.compare(n.next.value,t)?(e=n.next,n.next=n.next.next):n=n.next;return this.compare(this.tail.value,t)&&(this.tail=n),e},t.prototype.find=function(t){var e=t.value,n=void 0===e?void 0:e,r=t.callback,i=void 0===r?void 0:r;if(!this.head)return null;for(var o=this.head;o;){if(i&&i(o.value))return o;if(void 0!==n&&this.compare(o.value,n))return o;o=o.next}return null},t.prototype.deleteTail=function(){var t=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,t;for(var e=this.head;e.next;)e.next.next?e=e.next:e.next=null;return this.tail=e,t},t.prototype.deleteHead=function(){if(!this.head)return null;var t=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),t},t.prototype.fromArray=function(t){var e=this;return t.forEach(function(t){return e.append(t)}),this},t.prototype.toArray=function(){for(var t=[],e=this.head;e;)t.push(e),e=e.next;return t},t.prototype.reverse=function(){for(var t=this.head,e=null,n=null;t;)n=t.next,t.next=e,e=t,t=n;this.tail=this.head,this.head=e},t.prototype.toString=function(t){return void 0===t&&(t=void 0),this.toArray().map(function(e){return e.toString(t)}).toString()},t}();const em=tm;!function(){function t(){this.linkedList=new em}t.prototype.isEmpty=function(){return!this.linkedList.head},t.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},t.prototype.enqueue=function(t){this.linkedList.append(t)},t.prototype.dequeue=function(){var t=this.linkedList.deleteHead();return t?t.value:null},t.prototype.toString=function(t){return this.linkedList.toString(t)}}();var nm=function(t,e,n){void 0===e&&(e=[]);var r=e.filter(function(e){return e.source===t||e.target===t});return"target"===n?r.filter(function(e){return e.source===t}).map(function(t){return t.target}):"source"===n?r.filter(function(e){return e.target===t}).map(function(t){return t.source}):r.map(function(e){return e.source===t?e.target:e.source})};const rm=function(t){var e={},n=t.nodes,r=void 0===n?[]:n,i=t.edges,o=void 0===i?[]:i;return r.forEach(function(t){e[t.id]={degree:0,inDegree:0,outDegree:0}}),o.forEach(function(t){e[t.source].degree++,e[t.source].outDegree++,e[t.target].degree++,e[t.target].inDegree++}),e};var im={}.toString;const om=function(t,e){return im.call(t)==="[object "+e+"]"},am=function(t){return om(t,"Function")},sm=function(t){return Array.isArray?Array.isArray(t):om(t,"Array")};Object.keys;const um=function(t){if(!function(t){return"object"==typeof t&&null!==t}(t)||!om(t,"Object"))return!1;if(null===Object.getPrototypeOf(t))return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e};var cm=Array.prototype;cm.splice,cm.indexOf,Array.prototype.splice;Object.prototype.hasOwnProperty;Number.isInteger&&Number.isInteger,Math.PI,Math.PI;var lm=Object.values?function(t){return Object.values(t)}:function(t){var e=[];return function(t,e){if(t)if(sm(t))for(var n=0,r=t.length;n<r&&!1!==e(t[n],n);n++);else if(function(t){var e=typeof t;return null!==t&&"object"===e||"function"===e}(t))for(var i in t)if(t.hasOwnProperty(i)&&!1===e(t[i],i))break}(t,function(n,r){am(t)&&"prototype"===r||e.push(n)}),e};const Am=lm;Object.prototype;var fm=function(t){if("object"!=typeof t||null===t)return t;var e;if(sm(t)){e=[];for(var n=0,r=t.length;n<r;n++)"object"==typeof t[n]&&null!=t[n]?e[n]=fm(t[n]):e[n]=t[n]}else for(var i in e={},t)"object"==typeof t[i]&&null!=t[i]?e[i]=fm(t[i]):e[i]=t[i];return e};const dm=fm;function hm(t,e,n,r){for(var i in n=n||0,r=r||5,e)if(e.hasOwnProperty(i)){var o=e[i];null!==o&&um(o)?(um(t[i])||(t[i]={}),n<r?hm(t[i],o,n+1,r):t[i]=e[i]):sm(o)?(t[i]=[],t[i]=t[i].concat(o)):void 0!==o&&(t[i]=o)}}const pm=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)hm(t,e[r]);return t};Object.prototype.hasOwnProperty,Object.prototype.hasOwnProperty;const vm=function(t){return t};var gm;!function(t,e){if(!am(t))throw new TypeError("Expected a function");var n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=e?e.apply(this,r):r[0],a=n.cache;if(a.has(o))return a.get(o);var s=t.apply(this,r);return a.set(o,s),s};n.cache=new Map}(function(t,e){void 0===e&&(e={});var n,r=e.fontSize,i=e.fontFamily,o=e.fontWeight,a=e.fontStyle,s=e.fontVariant;return gm||(gm=document.createElement("canvas").getContext("2d")),gm.font=[a,s,o,r+"px",i].join(" "),gm.measureText((n=t,om(n,"String")?t:"")).width},function(t,e){return void 0===e&&(e={}),function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}([t],Am(e)).join("")}),function(){function t(){this.map={}}t.prototype.has=function(t){return void 0!==this.map[t]},t.prototype.get=function(t,e){var n=this.map[t];return void 0===n?e:n},t.prototype.set=function(t,e){this.map[t]=e},t.prototype.clear=function(){this.map={}},t.prototype.delete=function(t){delete this.map[t]},t.prototype.size=function(){return Object.keys(this.map).length}}();function ym(t,e,n,r){if(t===e)return[t];if(r[e])return r[e];for(var i=[],o=0,a=n[e];o<a.length;o++){var s=ym(t,a[o],n,r);if(!s)return;for(var u=0,c=s;u<c.length;u++){var l=c[u];sm(l)?i.push(ke(ke([],l,!0),[e],!1)):i.push([l,e])}}return r[e]=i,r[e]}var mm,bm=function(t,e,n,r,i){var o=function(t,e,n,r){var i=t.nodes,o=void 0===i?[]:i,a=t.edges,s=void 0===a?[]:a,u=[],c={},l={},A={};o.forEach(function(t,n){var r=t.id;u.push(r),l[r]=1/0,r===e&&(l[r]=0)});for(var f=o.length,d=function(t){var e=function(t,e,n){for(var r,i=1/0,o=0;o<e.length;o++){var a=e[o].id;!n[a]&&t[a]<=i&&(i=t[a],r=e[o])}return r}(l,o,c),i=e.id;if(c[i]=!0,l[i]===1/0)return"continue";var a=[];a=n?function(t,e){return e.filter(function(e){return e.source===t})}(i,s):function(t,e){return e.filter(function(e){return e.source===t||e.target===t})}(i,s),a.forEach(function(t){var n=t.target,o=t.source,a=n===i?o:n,s=r&&t[r]?t[r]:1;l[a]>l[e.id]+s?(l[a]=l[e.id]+s,A[a]=[e.id]):l[a]===l[e.id]+s&&A[a].push(e.id)})},h=0;h<f;h++)d();A[e]=[e];var p={};for(var v in l)l[v]!==1/0&&ym(e,v,A,p);var g={};for(var v in p)g[v]=p[v][0];return{length:l,path:g,allPath:p}}(t,e,r,i),a=o.length,s=o.path,u=o.allPath;return{length:a[n],path:s[n],allPath:u[n]}};!function(){function t(t){this.arr=t}t.prototype.getArr=function(){return this.arr||[]},t.prototype.add=function(e){var n,r=e.arr;if(!(null===(n=this.arr)||void 0===n?void 0:n.length))return new t(r);if(!(null==r?void 0:r.length))return new t(this.arr);if(this.arr.length===r.length){var i=[];for(var o in this.arr)i[o]=this.arr[o]+r[o];return new t(i)}},t.prototype.subtract=function(e){var n,r=e.arr;if(!(null===(n=this.arr)||void 0===n?void 0:n.length))return new t(r);if(!(null==r?void 0:r.length))return new t(this.arr);if(this.arr.length===r.length){var i=[];for(var o in this.arr)i[o]=this.arr[o]-r[o];return new t(i)}},t.prototype.avg=function(e){var n=[];if(0!==e)for(var r in this.arr)n[r]=this.arr[r]/e;return new t(n)},t.prototype.negate=function(){var e=[];for(var n in this.arr)e[n]=-this.arr[n];return new t(e)},t.prototype.squareEuclideanDistance=function(t){var e,n=t.arr;if(!(null===(e=this.arr)||void 0===e?void 0:e.length)||!(null==n?void 0:n.length))return 0;if(this.arr.length===n.length){var r=0;for(var i in this.arr)r+=Math.pow(this.arr[i]-t.arr[i],2);return r}},t.prototype.euclideanDistance=function(t){var e,n=t.arr;if(!(null===(e=this.arr)||void 0===e?void 0:e.length)||!(null==n?void 0:n.length))return 0;if(this.arr.length===n.length){var r=0;for(var i in this.arr)r+=Math.pow(this.arr[i]-t.arr[i],2);return Math.sqrt(r)}console.error("The two vectors are unequal in length.")},t.prototype.normalize=function(){var e=[],n=dm(this.arr);n.sort(function(t,e){return t-e});var r=n[n.length-1],i=n[0];for(var o in this.arr)e[o]=(this.arr[o]-i)/(r-i);return new t(e)},t.prototype.norm2=function(){var t;if(!(null===(t=this.arr)||void 0===t?void 0:t.length))return 0;var e=0;for(var n in this.arr)e+=Math.pow(this.arr[n],2);return Math.sqrt(e)},t.prototype.dot=function(t){var e,n=t.arr;if(!(null===(e=this.arr)||void 0===e?void 0:e.length)||!(null==n?void 0:n.length))return 0;if(this.arr.length===n.length){var r=0;for(var i in this.arr)r+=this.arr[i]*t.arr[i];return r}console.error("The two vectors are unequal in length.")},t.prototype.equal=function(t){var e,n=t.arr;if((null===(e=this.arr)||void 0===e?void 0:e.length)!==(null==n?void 0:n.length))return!1;for(var r in this.arr)if(this.arr[r]!==n[r])return!1;return!0}}(),function(t){t.EuclideanDistance="euclideanDistance"}(mm||(mm={})),function(){function t(t){this.count=t.length,this.parent={};for(var e=0,n=t;e<n.length;e++){var r=n[e];this.parent[r]=r}}t.prototype.find=function(t){for(;this.parent[t]!==t;)t=this.parent[t];return t},t.prototype.union=function(t,e){var n=this.find(t),r=this.find(e);n!==r&&(n<r?(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]):(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]))},t.prototype.connected=function(t,e){return this.find(t)===this.find(e)}}();var wm=function(t,e){return t-e};!function(){function t(t){void 0===t&&(t=wm),this.compareFn=t,this.list=[]}t.prototype.getLeft=function(t){return 2*t+1},t.prototype.getRight=function(t){return 2*t+2},t.prototype.getParent=function(t){return 0===t?null:Math.floor((t-1)/2)},t.prototype.isEmpty=function(){return this.list.length<=0},t.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},t.prototype.delMin=function(){var t=this.top(),e=this.list.pop();return this.list.length>0&&(this.list[0]=e,this.moveDown(0)),t},t.prototype.insert=function(t){if(null!==t){this.list.push(t);var e=this.list.length-1;return this.moveUp(e),!0}return!1},t.prototype.moveUp=function(t){for(var e=this.getParent(t);t&&t>0&&this.compareFn(this.list[e],this.list[t])>0;){var n=this.list[e];this.list[e]=this.list[t],this.list[t]=n,t=e,e=this.getParent(t)}},t.prototype.moveDown=function(t){var e,n=t,r=this.getLeft(t),i=this.getRight(t),o=this.list.length;null!==r&&r<o&&this.compareFn(this.list[n],this.list[r])>0?n=r:null!==i&&i<o&&this.compareFn(this.list[n],this.list[i])>0&&(n=i),t!==n&&(e=[this.list[n],this.list[t]],this.list[t]=e[0],this.list[n]=e[1],this.moveDown(n))}}();var xm="-1",Em=function(t,e,n,r){void 0===t&&(t=-1),void 0===e&&(e=-1),void 0===n&&(n=-1),void 0===r&&(r="-1"),this.id=t,this.from=e,this.to=n,this.label=r},Bm=function(){function t(t,e){void 0===t&&(t=-1),void 0===e&&(e=xm),this.id=t,this.label=e,this.edges=[],this.edgeMap={}}return t.prototype.addEdge=function(t){this.edges.push(t),this.edgeMap[t.id]=t},t}(),km=function(){function t(t,e,n){void 0===t&&(t=-1),void 0===e&&(e=!0),void 0===n&&(n=!1),this.id=t,this.edgeIdAutoIncrease=e,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=n}return t.prototype.getNodeNum=function(){return this.nodes.length},t.prototype.addNode=function(t,e){if(!this.nodeMap[t]){var n=new Bm(t,e);this.nodes.push(n),this.nodeMap[t]=n,this.nodeLabelMap[e]||(this.nodeLabelMap[e]=[]),this.nodeLabelMap[e].push(t)}},t.prototype.addEdge=function(t,e,n,r){if((this.edgeIdAutoIncrease||void 0===t)&&(t=this.counter++),!(this.nodeMap[e]&&this.nodeMap[n]&&this.nodeMap[n].edgeMap[t])){var i=new Em(t,e,n,r);if(this.edges.push(i),this.edgeMap[t]=i,this.nodeMap[e].addEdge(i),this.edgeLabelMap[r]||(this.edgeLabelMap[r]=[]),this.edgeLabelMap[r].push(i),!this.directed){var o=new Em(t,n,e,r);this.nodeMap[n].addEdge(o),this.edgeLabelMap[r].push(o)}}},t}(),Om=function(){function t(t,e,n,r,i){this.fromNode=t,this.toNode=e,this.nodeEdgeNodeLabel={nodeLabel1:n||xm,edgeLabel:r||"-1",nodeLabel2:i||xm}}return t.prototype.equalTo=function(t){return this.fromNode===t.formNode&&this.toNode===t.toNode&&this.nodeEdgeNodeLabel===t.nodeEdgeNodeLabel},t.prototype.notEqualTo=function(t){return!this.equalTo(t)},t}(),Cm=function(){function t(){this.rmpath=[],this.dfsEdgeList=[]}return t.prototype.equalTo=function(t){var e=this.dfsEdgeList.length;if(e!==t.length)return!1;for(var n=0;n<e;n++)if(this.dfsEdgeList[n]!==t[n])return!1;return!0},t.prototype.notEqualTo=function(t){return!this.equalTo(t)},t.prototype.pushBack=function(t,e,n,r,i){return this.dfsEdgeList.push(new Om(t,e,n,r,i)),this.dfsEdgeList},t.prototype.toGraph=function(t,e){void 0===t&&(t=-1),void 0===e&&(e=!1);var n=new km(t,!0,e);return this.dfsEdgeList.forEach(function(t){var e=t.fromNode,r=t.toNode,i=t.nodeEdgeNodeLabel,o=i.nodeLabel1,a=i.edgeLabel,s=i.nodeLabel2;o!==xm&&n.addNode(e,o),s!==xm&&n.addNode(r,s),o!==xm&&s!==o&&n.addEdge(void 0,e,r,a)}),n},t.prototype.buildRmpath=function(){this.rmpath=[];for(var t=void 0,e=this.dfsEdgeList.length-1;e>=0;e--){var n=this.dfsEdgeList[e],r=n.fromNode,i=n.toNode;r<i&&(void 0===t||i===t)&&(this.rmpath.push(e),t=r)}return this.rmpath},t.prototype.getNodeNum=function(){var t={};return this.dfsEdgeList.forEach(function(e){t[e.fromNode]||(t[e.fromNode]=!0),t[e.toNode]||(t[e.toNode]=!0)}),Object.keys(t).length},t}(),Mm=function(){function t(t){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],t){for(;t;){var e=t.edge;this.edges.push(e),this.nodesUsed[e.from]=1,this.nodesUsed[e.to]=1,this.edgesUsed[e.id]=1,t=t.preNode}this.edges=this.edges.reverse()}}return t.prototype.hasNode=function(t){return 1===this.nodesUsed[t.id]},t.prototype.hasEdge=function(t){return 1===this.edgesUsed[t.id]},t}();function Sm(t){if(void 0!==t.id)return t.id;if(void 0!==t.source&&void 0!==t.target)return"".concat(t.source,"-").concat(t.target);throw new Error(vy("The datum does not have available id."))}function Fm(t){return t.combo}function Tm(t,e){var n={nodes:(t.nodes||[]).map(Sm),edges:(t.edges||[]).map(Sm),combos:(t.combos||[]).map(Sm)};return e?Object.values(n).flat():n}!function(){function t(t){var e=t.graphs,n=t.minSupport,r=void 0===n?2:n,i=t.minNodeNum,o=void 0===i?1:i,a=t.maxNodeNum,s=void 0===a?4:a,u=t.top,c=void 0===u?10:u,l=t.directed,A=void 0!==l&&l,f=t.verbose,d=void 0!==f&&f;this.graphs=e,this.dfsCode=new Cm,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=r,this.top=c,this.directed=A,this.counter=0,this.maxNodeNum=s,this.minNodeNum=o,this.verbose=d,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}t.prototype.findForwardRootEdges=function(t,e){var n=this,r=[],i=t.nodeMap;return e.edges.forEach(function(t){(n.directed||e.label<=i[t.to].label)&&r.push(t)}),r},t.prototype.findBackwardEdge=function(t,e,n,r){if(!this.directed&&e===n)return null;for(var i=t.nodeMap,o=i[n.to].edges,a=o.length,s=0;s<a;s++){var u=o[s];if(!r.hasEdge(u)&&u.to===e.from)if(this.directed){if(i[e.from].label<i[n.to].label||i[e.from].label===i[n.to].label&&e.label<=u.label)return u}else if(e.label<u.label||e.label===u.label&&i[e.to].label<=i[n.to].label)return u}return null},t.prototype.findForwardPureEdges=function(t,e,n,r){for(var i=[],o=e.to,a=t.nodeMap[o].edges,s=a.length,u=0;u<s;u++){var c=a[u],l=t.nodeMap[c.to];n<=l.label&&!r.hasNode(l)&&i.push(c)}return i},t.prototype.findForwardRmpathEdges=function(t,e,n,r){for(var i=[],o=t.nodeMap,a=o[e.to].label,s=o[e.from].edges,u=s.length,c=0;c<u;c++){var l=s[c],A=o[l.to].label;e.to===l.to||n>A||r.hasNode(o[l.to])||(e.label<l.label||e.label===l.label&&a<=A)&&i.push(l)}return i},t.prototype.getSupport=function(t){var e={};return t.forEach(function(t){e[t.graphId]||(e[t.graphId]=!0)}),Object.keys(e).length},t.prototype.findMinLabel=function(t){var e=void 0;return Object.keys(t).forEach(function(n){var r=t[n],i=r.nodeLabel1,o=r.edgeLabel,a=r.nodeLabel2;e?(i<e.nodeLabel1||i===e.nodeLabel1&&o<e.edgeLabel||i===e.nodeLabel1&&o===e.edgeLabel&&a<e.nodeLabel2)&&(e={nodeLabel1:i,edgeLabel:o,nodeLabel2:a}):e={nodeLabel1:i,edgeLabel:o,nodeLabel2:a}}),e},t.prototype.isMin=function(){var t=this,e=this.dfsCode;if(this.verbose&&console.log("isMin checking",e),1===e.dfsEdgeList.length)return!0;var n=this.directed,r=e.toGraph(-1,n),i=r.nodeMap,o=new Cm,a={};r.nodes.forEach(function(e){t.findForwardRootEdges(r,e).forEach(function(t){var n=i[t.to],o="".concat(e.label,"-").concat(t.label,"-").concat(n.label);a[o]||(a[o]={projected:[],nodeLabel1:e.label,edgeLabel:t.label,nodeLabel2:n.label});var s={graphId:r.id,edge:t,preNode:null};a[o].projected.push(s)})});var s=this.findMinLabel(a);if(s){o.dfsEdgeList.push(new Om(0,1,s.nodeLabel1,s.edgeLabel,s.nodeLabel2));var u="".concat(s.nodeLabel1,"-").concat(s.edgeLabel,"-").concat(s.nodeLabel2);return function a(s){for(var u=o.buildRmpath(),c=o.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,l=o.dfsEdgeList[u[0]].toNode,A={},f=!1,d=0,h=n?-1:0,p=function(e){if(f)return"break";s.forEach(function(n){var i=new Mm(n),a=t.findBackwardEdge(r,i.edges[u[e]],i.edges[u[0]],i);a&&(A[a.label]||(A[a.label]={projected:[],edgeLabel:a.label}),A[a.label].projected.push({graphId:r.id,edge:A,preNode:n}),d=o.dfsEdgeList[u[e]].fromNode,f=!0)})},v=u.length-1;v>h&&"break"!==p(v);v--);if(f){var g=t.findMinLabel(A);o.dfsEdgeList.push(new Om(l,d,xm,g.edgeLabel,xm));var y=o.dfsEdgeList.length-1;return t.dfsCode.dfsEdgeList[y]===o.dfsEdgeList[y]&&a(A[g.edgeLabel].projected)}var m={};f=!1;var b=0;s.forEach(function(e){var n=new Mm(e),o=t.findForwardPureEdges(r,n.edges[u[0]],c,n);o.length>0&&(f=!0,b=l,o.forEach(function(t){var n="".concat(t.label,"-").concat(i[t.to].label);m[n]||(m[n]={projected:[],edgeLabel:t.label,nodeLabel2:i[t.to].label}),m[n].projected.push({graphId:r.id,edge:t,preNode:e})}))});var w=u.length,x=function(e){if(f)return"break";var n=u[e];s.forEach(function(e){var a=new Mm(e),s=t.findForwardRmpathEdges(r,a.edges[n],c,a);s.length>0&&(f=!0,b=o.dfsEdgeList[n].fromNode,s.forEach(function(t){var n="".concat(t.label,"-").concat(i[t.to].label);m[n]||(m[n]={projected:[],edgeLabel:t.label,nodeLabel2:i[t.to].label}),m[n].projected.push({graphId:r.id,edge:t,preNode:e})}))})};for(v=0;v<w&&"break"!==x(v);v++);if(!f)return!0;var E=t.findMinLabel(m);o.dfsEdgeList.push(new Om(b,l+1,xm,E.edgeLabel,E.nodeLabel2));var B=o.dfsEdgeList.length-1;return e.dfsEdgeList[B]===o.dfsEdgeList[B]&&a(m["".concat(E.edgeLabel,"-").concat(E.nodeLabel2)].projected)}(a[u].projected)}},t.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var t=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push(dm(t))}},t.prototype.subGraphMining=function(t){var e=this;if(!(this.getSupport(t)<this.minSupport)&&this.isMin()){this.report();var n=this.dfsCode.getNodeNum(),r=this.dfsCode.buildRmpath(),i=this.dfsCode.dfsEdgeList[r[0]].toNode,o=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,a={},s={};t.forEach(function(t){for(var u=e.graphs[t.graphId],c=u.nodeMap,l=new Mm(t),A=r.length-1;A>=0;A--){var f=e.findBackwardEdge(u,l.edges[r[A]],l.edges[r[0]],l);if(f){var d="".concat(e.dfsCode.dfsEdgeList[r[A]].fromNode,"-").concat(f.label);s[d]||(s[d]={projected:[],toNodeId:e.dfsCode.dfsEdgeList[r[A]].fromNode,edgeLabel:f.label}),s[d].projected.push({graphId:t.graphId,edge:f,preNode:t})}}if(!(n>=e.maxNodeNum)){e.findForwardPureEdges(u,l.edges[r[0]],o,l).forEach(function(e){var n="".concat(i,"-").concat(e.label,"-").concat(c[e.to].label);a[n]||(a[n]={projected:[],fromNodeId:i,edgeLabel:e.label,nodeLabel2:c[e.to].label}),a[n].projected.push({graphId:t.graphId,edge:e,preNode:t})});var h=function(n){e.findForwardRmpathEdges(u,l.edges[r[n]],o,l).forEach(function(i){var o="".concat(e.dfsCode.dfsEdgeList[r[n]].fromNode,"-").concat(i.label,"-").concat(c[i.to].label);a[o]||(a[o]={projected:[],fromNodeId:e.dfsCode.dfsEdgeList[r[n]].fromNode,edgeLabel:i.label,nodeLabel2:c[i.to].label}),a[o].projected.push({graphId:t.graphId,edge:i,preNode:t})})};for(A=0;A<r.length;A++)h(A)}}),Object.keys(s).forEach(function(t){var n=s[t],r=n.toNodeId,o=n.edgeLabel;e.dfsCode.dfsEdgeList.push(new Om(i,r,"-1",o,"-1")),e.subGraphMining(s[t].projected),e.dfsCode.dfsEdgeList.pop()}),Object.keys(a).forEach(function(t){var n=a[t],r=n.fromNodeId,o=n.edgeLabel,s=n.nodeLabel2;e.dfsCode.dfsEdgeList.push(new Om(r,i+1,xm,o,s)),e.subGraphMining(a[t].projected),e.dfsCode.dfsEdgeList.pop()})}},t.prototype.generate1EdgeFrequentSubGraphs=function(){var t=this.graphs,e=this.directed,n=this.minSupport,r=this.frequentSize1Subgraphs,i={},o={},a={},s={};return Object.keys(t).forEach(function(n){var r=t[n],u=r.nodeMap;r.nodes.forEach(function(t,r){var c=t.label,l="".concat(n,"-").concat(c);if(!a[l]){var A=i[c]||0;A++,i[c]=A}a[l]={graphKey:n,label:c},t.edges.forEach(function(t){var r=c,i=u[t.to].label;if(!e&&r>i){var a=i;i=r,r=a}var l=t.label,A="".concat(n,"-").concat(r,"-").concat(l,"-").concat(i),f="".concat(r,"-").concat(l,"-").concat(i);if(!o[f]){var d=o[f]||0;d++,o[f]=d}s[A]={graphId:n,nodeLabel1:r,edgeLabel:l,nodeLabel2:i}})})}),Object.keys(i).forEach(function(t){if(!(i[t]<n)){var e={nodes:[],edges:[]};e.nodes.push({id:"0",label:t}),r.push(e)}}),r},t.prototype.run=function(){var t=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var e=this.graphs,n=(this.directed,{});Object.keys(e).forEach(function(r){var i=e[r],o=i.nodeMap;i.nodes.forEach(function(e){t.findForwardRootEdges(i,e).forEach(function(t){var i=o[t.to],a="".concat(e.label,"-").concat(t.label,"-").concat(i.label);n[a]||(n[a]={projected:[],nodeLabel1:e.label,edgeLabel:t.label,nodeLabel2:i.label});var s={graphId:r,edge:t,preNode:null};n[a].projected.push(s)})})}),Object.keys(n).forEach(function(e){var r=n[e],i=r.projected,o=r.nodeLabel1,a=r.edgeLabel,s=r.nodeLabel2;t.dfsCode.dfsEdgeList.push(new Om(0,1,o,a,s)),t.subGraphMining(i),t.dfsCode.dfsEdgeList.pop()})}}}(),function(){function t(t){void 0===t&&(t=10),this.linkedList=new em,this.maxStep=t}Object.defineProperty(t.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return!this.linkedList.head},t.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},t.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},t.prototype.push=function(t){this.linkedList.prepend(t),this.length>this.maxStep&&this.linkedList.deleteTail()},t.prototype.pop=function(){var t=this.linkedList.deleteHead();return t?t.value:null},t.prototype.toArray=function(){return this.linkedList.toArray().map(function(t){return t.value})},t.prototype.clear=function(){for(;!this.isEmpty();)this.pop()}}();var Pm=function(t,e,n){var r;switch(n.type){case"degree":var i=new Map;return null===(r=t.nodes)||void 0===r||r.forEach(function(t){var r=e(Sm(t),n.direction).length;i.set(Sm(t),r)}),i;case"betweenness":return Nm(t,n.directed,n.weightPropertyName);case"closeness":return Lm(t,n.directed,n.weightPropertyName);case"eigenvector":return Qm(t,n.directed);case"pagerank":return _m(t,n.epsilon,n.linkProb);default:return Im(t)}},Im=function(t){var e,n=new Map;return null===(e=t.nodes)||void 0===e||e.forEach(function(t){n.set(Sm(t),0)}),n},Nm=function(t,e,n){var r=Im(t),i=t.nodes,o=void 0===i?[]:i;return o.forEach(function(i){o.forEach(function(o){if(i!==o){var a=bm(t,Sm(i),Sm(o),e,n).allPath,s=a.length;a.flat().forEach(function(t){t!==Sm(i)&&t!==Sm(o)&&r.set(t,r.get(t)+1/s)})}})}),r},Lm=function(t,e,n){var r=new Map,i=t.nodes,o=void 0===i?[]:i;return o.forEach(function(i){var a=o.reduce(function(r,o){return i!==o&&(r+=bm(t,Sm(i),Sm(o),e,n).length),r},0);r.set(Sm(i),1/a)}),r},_m=function(t,e,n){var r,i=new Map,o=function(t,e,n){"number"!=typeof e&&(e=1e-6),"number"!=typeof n&&(n=.85);for(var r,i=1,o=0,a=1e3,s=t.nodes,u=void 0===s?[]:s,c=t.edges,l=void 0===c?[]:c,A=u.length,f={},d={},h=0;h<A;++h)f[v=(w=u[h]).id]=1/A,d[v]=1/A;for(var p=rm(t);a>0&&i>e;){for(o=0,h=0;h<A;++h){var v=(w=u[h]).id;if(r=0,0===p[w.id].inDegree)f[v]=0;else{for(var g=nm(v,l,"source"),y=0;y<g.length;++y){var m=g[y],b=p[m].outDegree;b>0&&(r+=d[m]/b)}f[v]=n*r,o+=f[v]}}for(o=(1-o)/A,i=0,h=0;h<A;++h){var w;r=f[v=(w=u[h]).id]+o,i+=Math.abs(r-d[v]),d[v]=r}a-=1}return d}(t,e,n);return null===(r=t.nodes)||void 0===r||r.forEach(function(t){i.set(Sm(t),o[Sm(t)])}),i},Qm=function(t,e){var n=t.nodes,r=void 0===n?[]:n,i=Um(t,e),o=jm(i,r.length),a=new Map;return r.forEach(function(t,e){a.set(Sm(t),o[e])}),a},Um=function(t,e){var n=t.nodes,r=void 0===n?[]:n,i=t.edges,o=void 0===i?[]:i,a=Array(r.length).fill(null).map(function(){return Array(r.length).fill(0)});return o.forEach(function(t){var n=t.source,i=t.target,o=r.findIndex(function(t){return Sm(t)===n}),s=r.findIndex(function(t){return Sm(t)===i});e?a[o][s]=1:(a[o][s]=1,a[s][o]=1)}),a},jm=function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6,i=Array(e).fill(1),o=1/0,a=0;a<n&&o>r;a++){for(var s=Array(e).fill(0),u=0;u<e;u++)for(var c=0;c<e;c++)s[u]+=t[u][c]*i[c];for(var l=Math.sqrt(s.reduce(function(t,e){return t+e*e},0)),A=0;A<e;A++)s[A]/=l;o=Math.sqrt(s.reduce(function(t,e,n){return t+(e-i[n])*e},0)),i=s}return i};function Dm(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Xg,i=new Map(t.map(function(t){return[n(t),t]})),o=new Map(e.map(function(t){return[n(t),t]})),a=new Set(i.keys()),s=new Set(o.keys()),u=[],c=[],l=[],A=[];return s.forEach(function(t){a.has(t)?r(i.get(t),o.get(t))?A.push(o.get(t)):c.push(o.get(t)):u.push(o.get(t))}),a.forEach(function(t){s.has(t)||l.push(i.get(t))}),{enter:u,exit:l,keep:A,update:c}}function Rm(t,e,n){t.forEach(function(t){!function(t){n&&!n(t)||(t.style.visibility=e)}(t)})}var Hm=function(){return B(function t(e){x(this,t),this.extensions=[],this.extensionMap={},this.context=e},[{key:"setExtensions",value:function(t){var e=function(t,e,n){var r={},i=function(t){return t in r||(r[t]=0),"".concat(e,"-").concat(t,"-").concat(r[t]++)};return n.map(function(e){return"string"==typeof e?{type:e,key:i(e)}:"function"==typeof e?e.call(t):e.key?e:Object.assign(Object.assign({},e),{key:i(e.type)})})}(this.context.graph,this.category,t),n=Dm(this.extensions,e,function(t){return t.key}),r=n.enter,i=n.update,o=n.exit,a=n.keep;this.createExtensions(r),this.updateExtensions([].concat(O(i),O(a))),this.destroyExtensions(o),this.extensions=e}},{key:"createExtension",value:function(t){var e=this.category,n=t.key,r=t.type,i=fy(e,r);if(!i)return gy.warn("The extension ".concat(r," of ").concat(e," is not registered."));var o=new i(this.context,t);o.initialized=!0,this.extensionMap[n]=o}},{key:"createExtensions",value:function(t){var e=this;t.forEach(function(t){return e.createExtension(t)})}},{key:"updateExtension",value:function(t){var e=t.key,n=this.extensionMap[e];n&&n.update(t)}},{key:"updateExtensions",value:function(t){var e=this;t.forEach(function(t){return e.updateExtension(t)})}},{key:"destroyExtension",value:function(t){var e=this.extensionMap[t];e&&(e.initialized&&!e.destroyed&&e.destroy(),delete this.extensionMap[t])}},{key:"destroyExtensions",value:function(t){var e=this;t.forEach(function(t){var n=t.key;return e.destroyExtension(n)})}},{key:"destroy",value:function(){this.destroyExtensions(this.extensions),this.context={},this.extensions=[],this.extensionMap={}}}])}(),zm=function(){return B(function t(e,n){x(this,t),this.events=[],this.initialized=!1,this.destroyed=!1,this.context=e,this.options=n},[{key:"update",value:function(t){this.options=Object.assign(this.options,t)}},{key:"destroy",value:function(){this.context={},this.options={},this.destroyed=!0}}])}(),Km=function(t){function e(){return x(this,e),F(this,e,arguments)}return P(e,t),B(e)}(zm),Gm=function(t){function e(t,n){var r;return x(this,e),(r=F(this,e,[t,Object.assign({},e.defaultOptions,n)])).isOverlapping=function(t,e){return e.some(function(e){return t.intersects(e)})},r.occupiedBounds=[],r.detectLabelCollision=function(t){var e=r.context.viewport,n={show:[],hide:[]};return r.occupiedBounds=[],t.forEach(function(t){var i=t.getShape("label").getRenderBounds();e.isInViewport(i,!0)&&!r.isOverlapping(i,r.occupiedBounds)?(n.show.push(t),r.occupiedBounds.push(Gy(i,r.options.padding))):n.hide.push(t)}),n},r.hideLabelIfExceedViewport=function(t,e){var n=Dm(t,e,function(t){return t.id}),i=n.exit;null==i||i.forEach(r.hideLabel)},r.nodeCentralities=new Map,r.sortNodesByCentrality=function(t,e){var n=r.context.model,i=n.getData(),o=n.getRelatedEdgesData.bind(n),a=t.map(function(t){return r.nodeCentralities.has(t.id)||(r.nodeCentralities=Pm(i,o,e)),{node:t,centrality:r.nodeCentralities.get(t.id)}});return a.sort(function(t,e){return e.centrality-t.centrality}).map(function(t){return t.node})},r.sortLabelElementsInView=function(t){var e=r.options,n=e.sort,i=e.sortNode,o=e.sortCombo,a=e.sortEdge,s=r.context.model;if(mn(n))return t.sort(function(t,e){return n(s.getElementDataById(t.id),s.getElementDataById(e.id))});var u=Py(t,function(t){return t.type}),c=u.node,l=void 0===c?[]:c,A=u.edge,f=void 0===A?[]:A,d=u.combo,h=void 0===d?[]:d,p=mn(o)?h.sort(function(t,e){return o.apply(void 0,O(s.getComboData([t.id,e.id])))}):h,v=mn(i)?l.sort(function(t,e){return i.apply(void 0,O(s.getNodeData([t.id,e.id])))}):r.sortNodesByCentrality(l,i),g=mn(a)?f.sort(function(t,e){return a.apply(void 0,O(s.getEdgeData([t.id,e.id])))}):f;return[].concat(O(p),O(v),O(g))},r.labelElementsInView=[],r.isFirstRender=!0,r.onToggleVisibility=function(t){var e;if("zIndex"!==(null===(e=t.data)||void 0===e?void 0:e.stage))if(r.validate(t)){var n=r.isFirstRender?r.getLabelElements():r.getLabelElementsInView();r.hideLabelIfExceedViewport(r.labelElementsInView,n),r.labelElementsInView=n;for(var i=r.sortLabelElementsInView(r.labelElementsInView),o=r.detectLabelCollision(i),a=o.show,s=o.hide,u=a.length-1;u>=0;u--)r.showLabel(a[u]);s.forEach(r.hideLabel)}else r.hiddenElements.size>0&&(r.hiddenElements.forEach(r.showLabel),r.hiddenElements.clear())},r.hiddenElements=new Map,r.hideLabel=function(t){var e=t.getShape("label");e&&Rm(e,"hidden"),r.hiddenElements.set(t.id,t)},r.showLabel=function(t){var e=t.getShape("label");e&&Rm(e,"visible"),t.toFront(),r.hiddenElements.delete(t.id)},r.onTransform=Iy(r.onToggleVisibility,r.options.throttle,{leading:!0}),r.enableToggle=!0,r.toggle=function(t){r.enableToggle&&r.onToggleVisibility(t)},r.onBeforeRender=function(){r.enableToggle=!1},r.onAfterRender=function(t){r.onToggleVisibility(t),r.enableToggle=!0},r.bindEvents(),r}return P(e,t),B(e,[{key:"update",value:function(t){this.unbindEvents(),xn(e,"update",this,3)([t]),this.bindEvents(),this.onToggleVisibility({})}},{key:"getLabelElements",value:function(){var t=this.context.element.elementMap,e=[];for(var n in t){var r=t[n];r.isVisible()&&r.getShape("label")&&e.push(r)}return e}},{key:"getLabelElementsInView",value:function(){var t=this.context.viewport;return this.getLabelElements().filter(function(e){return t.isInViewport(e.getShape("key").getRenderBounds())})}},{key:"bindEvents",value:function(){var t=this.context.graph;t.on(ry.BEFORE_RENDER,this.onBeforeRender),t.on(ry.AFTER_RENDER,this.onAfterRender),t.on(ry.AFTER_DRAW,this.toggle),t.on(ry.AFTER_LAYOUT,this.toggle),t.on(ry.AFTER_TRANSFORM,this.onTransform)}},{key:"unbindEvents",value:function(){var t=this.context.graph;t.off(ry.BEFORE_RENDER,this.onBeforeRender),t.off(ry.AFTER_RENDER,this.onAfterRender),t.off(ry.AFTER_DRAW,this.toggle),t.off(ry.AFTER_LAYOUT,this.toggle),t.off(ry.AFTER_TRANSFORM,this.onTransform)}},{key:"validate",value:function(t){if(this.destroyed)return!1;var e=this.options.enable;return mn(e)?e(t):!!e}},{key:"destroy",value:function(){this.unbindEvents(),xn(e,"destroy",this,3)([])}}])}(Km);Gm.defaultOptions={enable:!0,throttle:100,padding:0,sortNode:{type:"degree"}};const Vm=function(t){if(!Vg(t)||!gn(t,"Object"))return!1;if(null===Object.getPrototypeOf(t))return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e};function Wm(t,e){if(Object.hasOwn)return Object.hasOwn(t,e);if(null==t)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(t),e)}function Ym(t,e,n,r){for(var i in n=n||0,r=r||5,e)if(Wm(e,i)){var o=e[i];null!==o&&Vm(o)?(Vm(t[i])||(t[i]={}),n<r?Ym(t[i],o,n+1,r):t[i]=e[i]):tn(o)?(t[i]=[],t[i]=t[i].concat(o)):void 0!==o&&(t[i]=o)}}const Xm=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)Ym(t,e[r]);return t};var qm=[0,0,0];function Zm(t,e){return t.map(function(t,n){return t+e[n]})}function Jm(t,e){return t.map(function(t,n){return t-e[n]})}function $m(t,e){return"number"==typeof e?t.map(function(t){return t*e}):t.map(function(t,n){return t*e[n]})}function tb(t,e){return"number"==typeof e?t.map(function(t){return t/e}):t.map(function(t,n){return t/e[n]})}function eb(t,e){return t.map(function(t){return t*e})}function nb(t,e){return Math.sqrt(t.reduce(function(t,n,r){return t+Math.pow(n-e[r]||0,2)},0))}function rb(t,e){return t.reduce(function(t,n,r){return t+Math.abs(n-e[r])},0)}function ib(t){var e=t.reduce(function(t,e){return t+Math.pow(e,2)},0);return t.map(function(t){return t/Math.sqrt(e)})}function ob(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t[0]*e[1]-t[1]*e[0],i=Math.acos($m(t,e).reduce(function(t,e){return t+e},0)/(nb(t,qm)*nb(e,qm)));return n&&r<0&&(i=2*Math.PI-i),i}function ab(t){return arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?[t[1],-t[0]]:[-t[1],t[0]]}function sb(t,e){return t.map(function(t){return t%e})}function ub(t){return[t[0],t[1]]}function cb(t){return 2===t.length?[t[0],t[1],0]:t}function lb(t){var e=v(t,2),n=e[0],r=e[1];return n||r?Math.atan2(r,n):0}function Ab(t,e){var n=v(t,2),r=n[0],i=n[1];if(e%360==0)return[r,i];var o=e*Math.PI/180,a=Math.cos(o),s=Math.sin(o);return[r*a-i*s,r*s+i*a]}function fb(t,e){var n,r,i,o,a=v(t,2),s=a[0],u=a[1],c=v(e,2),l=c[0],A=c[1];return(n=Jm(s,u),r=Jm(l,A),i=cb(n),o=cb(r),[i[1]*o[2]-i[2]*o[1],i[2]*o[0]-i[0]*o[2],i[0]*o[1]-i[1]*o[0]]).every(function(t){return 0===t})}function db(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!fb(t,e)){var r=v(t,2),i=r[0],o=r[1],a=v(e,2),s=a[0],u=a[1],c=((i[0]-s[0])*(s[1]-u[1])-(i[1]-s[1])*(s[0]-u[0]))/((i[0]-o[0])*(s[1]-u[1])-(i[1]-o[1])*(s[0]-u[0])),l=u[0]-s[0]?(i[0]-s[0]+c*(o[0]-i[0]))/(u[0]-s[0]):(i[1]-s[1]+c*(o[1]-i[1]))/(u[1]-s[1]);if(n||Qy(c,0,1)&&Qy(l,0,1))return[i[0]+c*(o[0]-i[0]),i[1]+c*(o[1]-i[1])]}}function hb(t){if(Array.isArray(t))return Qy(t[0],0,1)&&Qy(t[1],0,1)?t:[.5,.5];var e=t.split("-");return[e.includes("left")?0:e.includes("right")?1:.5,e.includes("top")?0:e.includes("bottom")?1:.5]}function pb(t){var e=t.style||{},n=e.x,r=void 0===n?0:n,i=e.y,o=void 0===i?0:i,a=e.z;return[+r,+o,+(void 0===a?0:a)]}function vb(t){var e=t.style||{},n=e.x,r=e.y,i=e.z;return void 0!==n||void 0!==r||void 0!==i}function gb(t){return function(t,e){var n=v(e,2),r=n[0],i=n[1],o=t.min,a=t.max;return[o[0]+r*(a[0]-o[0]),o[1]+i*(a[1]-o[1])]}(t,hb(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"center"))}function yb(t){var e;return[t.x,t.y,null!==(e=t.z)&&void 0!==e?e:0]}function mb(t){var e;return{x:t[0],y:t[1],z:null!==(e=t[2])&&void 0!==e?e:0}}function bb(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.map(function(t){return parseFloat(t.toFixed(e))})}function wb(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(Xg(t,e))return t;var i=ib(r?Jm(t,e):Jm(e,t)),o=[i[0]*n,i[1]*n];return Zm(ub(t),o)}function xb(t,e){return t[1]===e[1]}function Eb(t,e){return xb(t,e)||function(t,e){return t[0]===e[0]}(t,e)}function Bb(t,e,n){return fb([t,e],[e,n])}function kb(t,e){return[2*e[0]-t[0],2*e[1]-t[1]]}function Ob(t,e,n){for(var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=0;o<n.length;o++){var a=n[o],s=n[(o+1)%n.length];r&&(a=Zm(e,a),s=Zm(e,s));var u=db([e,i?kb(t,e):t],[a,s]);if(u)return{point:u,line:[a,s]}}return{point:e,line:void 0}}function Cb(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.center,i=Jm(n?kb(t,r):t,e.center),o=Math.atan2(i[1],i[0]);if(isNaN(o))return r;var a=Dy(e)/2,s=Ry(e)/2;return[r[0]+a*Math.cos(o),r[1]+s*Math.sin(o)]}function Mb(t,e){var n=v(e[0],2),r=n[0],i=n[1],o=v(e[1],2),a=o[0],s=o[1],u=v(t,2),c=u[0],l=u[1],A=a-r,f=s-i;if(0===A&&0===f)return[r,i];var d=((c-r)*A+(l-i)*f)/(A*A+f*f);return d>1?d=1:d<0&&(d=0),[r+d*A,i+d*f]}function Sb(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=function(t){var e=t.reduce(function(t,e){return Zm(t,e)},[0,0]);return tb(e,t.length)}(t);return t.sort(function(t,r){var i=v(t,2),o=i[0],a=i[1],s=v(r,2),u=s[0],c=s[1],l=Math.atan2(a-n[1],o-n[0]),A=Math.atan2(c-n[1],u-n[0]);return e?A-l:l-A})}function Fb(t,e){return[t,[t[0],e[1]],e,[e[0],t[1]]]}var Tb=function(){function t(e,n,r){if(x(this,t),this.phase=n,this.pointerByTouch=[],this.initialDistance=null,this.emitter=e,t.instance)return t.callbacks[this.phase].push(r),t.instance;this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.bindEvents(),t.instance=this,t.callbacks[this.phase].push(r)}return B(t,[{key:"bindEvents",value:function(){var t=this.emitter;t.on(ty.POINTER_DOWN,this.onPointerDown),t.on(ty.POINTER_MOVE,this.onPointerMove),t.on(ty.POINTER_UP,this.onPointerUp)}},{key:"updatePointerPosition",value:function(t,e,n){var r=this.pointerByTouch.findIndex(function(e){return e.pointerId===t});r>=0&&(this.pointerByTouch[r]={x:e,y:n,pointerId:t})}},{key:"onPointerDown",value:function(e){var n=e.client||{},r=n.x,i=n.y;if(void 0!==r&&void 0!==i&&(this.pointerByTouch.push({x:r,y:i,pointerId:e.pointerId}),"touch"===e.pointerType&&2===this.pointerByTouch.length)){t.isPinching=!0;var o=this.pointerByTouch[0].x-this.pointerByTouch[1].x,a=this.pointerByTouch[0].y-this.pointerByTouch[1].y;this.initialDistance=Math.sqrt(o*o+a*a),t.callbacks.pinchstart.forEach(function(t){return t(e,{scale:0})})}}},{key:"onPointerMove",value:function(e){if(2===this.pointerByTouch.length&&null!==this.initialDistance){var n=e.client||{},r=n.x,i=n.y;if(void 0!==r&&void 0!==i){this.updatePointerPosition(e.pointerId,r,i);var o=this.pointerByTouch[0].x-this.pointerByTouch[1].x,a=this.pointerByTouch[0].y-this.pointerByTouch[1].y,s=Math.sqrt(o*o+a*a)/this.initialDistance;t.callbacks.pinchmove.forEach(function(t){return t(e,{scale:5*(s-1)})})}}}},{key:"onPointerUp",value:function(e){var n;t.callbacks.pinchend.forEach(function(t){return t(e,{scale:0})}),t.isPinching=!1,this.initialDistance=null,this.pointerByTouch=[],null===(n=t.instance)||void 0===n||n.tryDestroy()}},{key:"destroy",value:function(){this.emitter.off(ty.POINTER_DOWN,this.onPointerDown),this.emitter.off(ty.POINTER_MOVE,this.onPointerMove),this.emitter.off(ty.POINTER_UP,this.onPointerUp),t.instance=null}},{key:"off",value:function(e,n){var r=t.callbacks[e].indexOf(n);r>-1&&t.callbacks[e].splice(r,1),this.tryDestroy()}},{key:"tryDestroy",value:function(){Object.values(t.callbacks).every(function(t){return 0===t.length})&&this.destroy()}}])}();Tb.isPinching=!1,Tb.instance=null,Tb.callbacks={pinchstart:[],pinchmove:[],pinchend:[]};var Pb=function(t){return t.map(function(t){return ve(t)?t.toLocaleLowerCase():t})},Ib=function(){return B(function t(e){var n=this;x(this,t),this.map=new Map,this.boundHandlePinch=function(){},this.recordKey=new Set,this.onKeyDown=function(t){(null==t?void 0:t.key)&&(n.recordKey.add(t.key),n.trigger(t))},this.onKeyUp=function(t){(null==t?void 0:t.key)&&n.recordKey.delete(t.key)},this.onWheel=function(t){n.triggerExtendKey(ty.WHEEL,t)},this.onDrag=function(t){n.triggerExtendKey(ty.DRAG,t)},this.handlePinch=function(t,e){n.triggerExtendKey(ty.PINCH,Object.assign(Object.assign({},t),e))},this.onFocus=function(){n.recordKey.clear()},this.emitter=e,this.bindEvents()},[{key:"bind",value:function(t,e){0!==t.length&&(t.includes(ty.PINCH)&&!this.pinchHandler&&(this.boundHandlePinch=this.handlePinch.bind(this),this.pinchHandler=new Tb(this.emitter,"pinchmove",this.boundHandlePinch)),this.map.set(t,e))}},{key:"unbind",value:function(t,e){var n=this;this.map.forEach(function(r,i){Xg(i,t)&&(e&&e!==r||n.map.delete(i))})}},{key:"unbindAll",value:function(){this.map.clear()}},{key:"match",value:function(t){var e=Pb(Array.from(this.recordKey)).sort(),n=Pb(t).sort();return Xg(e,n)}},{key:"bindEvents",value:function(){var t,e=this.emitter;e.on(ty.KEY_DOWN,this.onKeyDown),e.on(ty.KEY_UP,this.onKeyUp),e.on(ty.WHEEL,this.onWheel),e.on(ty.DRAG,this.onDrag),null===(t=globalThis.addEventListener)||void 0===t||t.call(globalThis,"focus",this.onFocus)}},{key:"trigger",value:function(t){var e=this;this.map.forEach(function(n,r){e.match(r)&&n(t)})}},{key:"triggerExtendKey",value:function(t,e){var n=this;this.map.forEach(function(r,i){i.includes(t)&&Xg(Array.from(n.recordKey),i.filter(function(e){return e!==t}))&&r(e)})}},{key:"destroy",value:function(){var t,e;this.unbindAll(),this.emitter.off(ty.KEY_DOWN,this.onKeyDown),this.emitter.off(ty.KEY_UP,this.onKeyUp),this.emitter.off(ty.WHEEL,this.onWheel),this.emitter.off(ty.DRAG,this.onDrag),null===(t=this.pinchHandler)||void 0===t||t.off("pinchmove",this.boundHandlePinch),null===(e=globalThis.removeEventListener)||void 0===e||e.call(globalThis,"blur",this.onFocus)}}])}(),Nb=function(t){function e(t,n){var r;return x(this,e),(r=F(this,e,[t,Xm({},e.defaultOptions,n)])).shortcut=new Ib(t.graph),r.onPointerDown=r.onPointerDown.bind(r),r.onPointerMove=r.onPointerMove.bind(r),r.onPointerUp=r.onPointerUp.bind(r),r.clearStates=r.clearStates.bind(r),r.bindEvents(),r}return P(e,t),B(e,[{key:"onPointerDown",value:function(t){if(this.validate(t)&&this.isKeydown()&&!this.startPoint){var e=this.context,n=e.canvas,r=e.graph,i=Object.assign({},this.options.style);this.options.style.lineWidth&&(i.lineWidth=+this.options.style.lineWidth/r.getZoom()),this.rectShape=new Yu({id:"g6-brush-select",style:i}),n.appendChild(this.rectShape),this.startPoint=[t.canvas.x,t.canvas.y]}}},{key:"onPointerMove",value:function(t){var e;if(this.startPoint){var n=this.options,r=n.immediately,i=n.mode;this.endPoint=Lb(t,this.context.graph),null===(e=this.rectShape)||void 0===e||e.attr({x:Math.min(this.endPoint[0],this.startPoint[0]),y:Math.min(this.endPoint[1],this.startPoint[1]),width:Math.abs(this.endPoint[0]-this.startPoint[0]),height:Math.abs(this.endPoint[1]-this.startPoint[1])}),r&&"default"===i&&this.updateElementsStates(Fb(this.startPoint,this.endPoint))}}},{key:"onPointerUp",value:function(t){this.startPoint&&(this.endPoint?(this.endPoint=Lb(t,this.context.graph),this.updateElementsStates(Fb(this.startPoint,this.endPoint)),this.clearBrush()):this.clearBrush())}},{key:"clearStates",value:function(){this.endPoint||this.clearElementsStates()}},{key:"clearElementsStates",value:function(){var t=this,e=this.context.graph,n=Object.values(e.getData()).reduce(function(e,n){return Object.assign({},e,n.reduce(function(e,n){var r,i=null===(r=n.states||[])||void 0===r?void 0:r.filter(function(e){return e!==t.options.state});return e[Sm(n)]=i,e},{}))},{});e.setElementState(n,this.options.animation)}},{key:"updateElementsStates",value:function(t){var e=this.context.graph,n=this.options,r=n.enableElements,i=n.state,o=n.mode,a=n.onSelect,s=this.selector(e,t,r),u={};switch(o){case"union":s.forEach(function(t){u[t]=[].concat(O(e.getElementState(t)),[i])});break;case"diff":s.forEach(function(t){var n=e.getElementState(t);u[t]=n.includes(i)?n.filter(function(t){return t!==i}):[].concat(O(n),[i])});break;case"intersect":s.forEach(function(t){var n=e.getElementState(t);u[t]=n.includes(i)?[i]:[]});break;default:s.forEach(function(t){u[t]=[i]})}mn(a)&&(u=a(u)),e.setElementState(u,this.options.animation)}},{key:"selector",value:function(t,e,n){if(!n||0===n.length)return[];var r=[],i=t.getData();if(n.forEach(function(n){i["".concat(n,"s")].forEach(function(n){var i=Sm(n);"hidden"!==t.getElementVisibility(i)&&function(t,e,n,r){var i=t[0],o=t[1],a=!1;void 0===n&&(n=0),void 0===r&&(r=e.length);for(var s=r-n,u=0,c=s-1;u<s;c=u++){var l=e[u+n][0],A=e[u+n][1],f=e[c+n][0],d=e[c+n][1];A>o!=d>o&&i<(f-l)*(o-A)/(d-A)+l&&(a=!a)}return a}(t.getElementPosition(i),e)&&r.push(i)})}),n.includes("edge")){var o=i.edges;null==o||o.forEach(function(t){var e=t.source,n=t.target;r.includes(e)&&r.includes(n)&&r.push(Sm(t))})}return r}},{key:"clearBrush",value:function(){var t;null===(t=this.rectShape)||void 0===t||t.remove(),this.rectShape=void 0,this.startPoint=void 0,this.endPoint=void 0}},{key:"isKeydown",value:function(){var t=this.options.trigger,e=Array.isArray(t)?t:[t];return this.shortcut.match(e.filter(function(t){return"drag"!==t}))}},{key:"validate",value:function(t){if(this.destroyed)return!1;var e=this.options.enable;return mn(e)?e(t):!!e}},{key:"bindEvents",value:function(){var t=this.context.graph;t.on(ty.POINTER_DOWN,this.onPointerDown),t.on(ty.POINTER_MOVE,this.onPointerMove),t.on(ty.POINTER_UP,this.onPointerUp),t.on(Jg.CLICK,this.clearStates)}},{key:"unbindEvents",value:function(){var t=this.context.graph;t.off(ty.POINTER_DOWN,this.onPointerDown),t.off(ty.POINTER_MOVE,this.onPointerMove),t.off(ty.POINTER_UP,this.onPointerUp),t.off(Jg.CLICK,this.clearStates)}},{key:"update",value:function(t){this.unbindEvents(),this.options=Xm(this.options,t),this.bindEvents()}},{key:"destroy",value:function(){this.unbindEvents(),xn(e,"destroy",this,3)([])}}])}(Km);Nb.defaultOptions={animation:!1,enable:!0,enableElements:["node","combo","edge"],immediately:!1,mode:"default",state:"selected",trigger:["shift"],style:{width:0,height:0,lineWidth:1,fill:"#1677FF",stroke:"#1677FF",fillOpacity:.1,zIndex:2,pointerEvents:"none"}};var Lb=function(t,e){if(!("node"!==t.targetType&&"combo"!==t.targetType||t.nativeEvent.target instanceof HTMLCanvasElement)){var n=v(e.getCanvasByClient([t.client.x,t.client.y]),2);return[n[0],n[1]]}return[t.canvas.x,t.canvas.y]},_b=.8,Qb=["node","edge","combo"];function Ub(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;"TB"===r&&e(t,i);var o=n(t);if(o){var a,s=qn(o);try{for(s.s();!(a=s.n()).done;)Ub(a.value,e,n,r,i+1)}catch(t){s.e(t)}finally{s.f()}}"BT"===r&&e(t,i)}function jb(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"both";if("combo"===e||"node"===e)return Db(t,n,r,i);var o=t.getEdgeData(n);if(!o)return[];var a=Db(t,o.source,r-1,i),s=Db(t,o.target,r-1,i);return Array.from(new Set([].concat(O(a),O(s),[n])))}function Db(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"both",i=new Set,o=new Set,a=new Set;return function(t,e,n){for(var r=[[t,0]];r.length;){var i=v(r.shift(),2),o=i[0],a=i[1];e(o,a);var s=n(o);if(s){var u,c=qn(s);try{for(c.s();!(u=c.n()).done;){var l=u.value;r.push([l,a+1])}}catch(t){c.e(t)}finally{c.f()}}}}(e,function(e,i){i>n||(a.add(e),t.getRelatedEdgesData(e,r).forEach(function(t){var e=Sm(t);!o.has(e)&&i<n&&(a.add(e),o.add(e))}))},function(e){return t.getRelatedEdgesData(e,r).map(function(t){return t.source===e?t.target:t.source}).filter(function(t){return!i.has(t)&&(i.add(t),!0)})}),Array.from(a)}function Rb(t){return t.states||[]}var Hb=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())})},zb=function(t){function e(t,n){var r;return x(this,e),(r=F(this,e,[t,Object.assign({},e.defaultOptions,n)])).onClickSelect=function(t){return Hb(r,void 0,void 0,(0,Dn.A)().m(function e(){var n,r;return(0,Dn.A)().w(function(e){for(;;)switch(e.n){case 0:if(this.validate(t)){e.n=1;break}return e.a(2);case 1:return e.n=2,this.updateState(t);case 2:null===(r=(n=this.options).onClick)||void 0===r||r.call(n,t);case 3:return e.a(2)}},e,this)}))},r.onClickCanvas=function(t){return Hb(r,void 0,void 0,(0,Dn.A)().m(function e(){var n,r;return(0,Dn.A)().w(function(e){for(;;)switch(e.n){case 0:if(this.validate(t)){e.n=1;break}return e.a(2);case 1:return e.n=2,this.clearState();case 2:null===(r=(n=this.options).onClick)||void 0===r||r.call(n,t);case 3:return e.a(2)}},e,this)}))},r.shortcut=new Ib(t.graph),r.bindEvents(),r}return P(e,t),B(e,[{key:"bindEvents",value:function(){var t=this,e=this.context.graph;this.unbindEvents(),Qb.forEach(function(n){e.on("".concat(n,":").concat(ty.CLICK),t.onClickSelect)}),e.on(Jg.CLICK,this.onClickCanvas)}},{key:"isMultipleSelect",get:function(){var t=this.options,e=t.multiple,n=t.trigger;return e&&this.shortcut.match(n)}},{key:"getNeighborIds",value:function(t){var e=t.target,n=t.targetType,r=this.context.graph,i=this.options.degree;return jb(r,n,e.id,"function"==typeof i?i(t):i).filter(function(t){return t!==e.id})}},{key:"updateState",value:function(t){return Hb(this,void 0,void 0,(0,Dn.A)().m(function e(){var n,r,i,o,a,s,u,c,l,A,f,d,h,p,v,g;return(0,Dn.A)().w(function(e){for(;;)switch(e.n){case 0:if(n=this.options,r=n.state,i=n.unselectedState,o=n.neighborState,a=n.animation,r||o||i){e.n=1;break}return e.a(2);case 1:return s=t.target,u=this.context.graph,c=u.getElementData(s.id),l=Rb(c).includes(r)?"unselect":"select",A={},f=this.isMultipleSelect,d=[s.id],h=this.getNeighborIds(t),f?(Object.assign(A,this.getDataStates()),"select"===l?(v=function(t,e){t.forEach(function(t){var n=new Set(u.getElementState(t));n.add(e),n.delete(i),A[t]=Array.from(n)})},v(d,r),v(h,o),i&&Object.keys(A).forEach(function(t){var e=A[t];e.includes(r)||e.includes(o)||e.includes(i)||A[t].push(i)})):(g=A[s.id],A[s.id]=g.filter(function(t){return t!==r&&t!==o}),g.includes(i)||A[s.id].push(i),h.forEach(function(t){A[t]=A[t].filter(function(t){return t!==o}),A[t].includes(r)||A[t].push(i)}))):"select"===l?(Object.assign(A,this.getClearStates(!!i)),p=function(t,e){t.forEach(function(t){A[t]||(A[t]=u.getElementState(t)),A[t].push(e)})},p(d,r),p(h,o),i&&Object.keys(A).forEach(function(t){d.includes(t)||h.includes(t)||A[t].push(i)})):Object.assign(A,this.getClearStates()),e.n=2,u.setElementState(A,a);case 2:return e.a(2)}},e,this)}))}},{key:"getDataStates",value:function(){var t=this.context.graph.getData(),e=t.nodes,n=t.edges,r=t.combos,i={};return[].concat(O(e),O(n),O(r)).forEach(function(t){i[Sm(t)]=Rb(t)}),i}},{key:"getClearStates",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.context.graph,n=this.options,r=n.state,i=n.unselectedState,o=n.neighborState,a=new Set([r,i,o]),s=e.getData(),u=s.nodes,c=s.edges,l=s.combos,A={};return[].concat(O(u),O(c),O(l)).forEach(function(e){var n=Rb(e),r=n.filter(function(t){return!a.has(t)});(t||r.length!==n.length)&&(A[Sm(e)]=r)}),A}},{key:"clearState",value:function(){return Hb(this,void 0,void 0,(0,Dn.A)().m(function t(){var e;return(0,Dn.A)().w(function(t){for(;;)switch(t.n){case 0:return e=this.context.graph,t.n=1,e.setElementState(this.getClearStates(),this.options.animation);case 1:return t.a(2)}},t,this)}))}},{key:"validate",value:function(t){if(this.destroyed)return!1;var e=this.options.enable;return mn(e)?e(t):!!e}},{key:"unbindEvents",value:function(){var t=this,e=this.context.graph;Qb.forEach(function(n){e.off("".concat(n,":").concat(ty.CLICK),t.onClickSelect)}),e.off(Jg.CLICK,this.onClickCanvas)}},{key:"destroy",value:function(){this.unbindEvents(),xn(e,"destroy",this,3)([])}}])}(Km);function Kb(t){var e;return!!(null===(e=t.style)||void 0===e?void 0:e.collapsed)}zb.defaultOptions={animation:!0,enable:!0,multiple:!1,trigger:["shift"],state:"selected",neighborState:"selected",unselectedState:void 0,degree:0};const Gb=function(t,e,n){for(var r=0,i=ve(e)?e.split("."):e;t&&r<i.length;)t=t[i[r++]];return void 0===t||r<i.length?n:t},Vb=function(t,e,n){var r=t,i=ve(e)?e.split("."):e;return i.forEach(function(t,e){e<i.length-1?(bn(r[t])||(r[t]=de(i[e+1])?[]:{}),r=r[t]):r[t]=n}),t},Wb=function(t){var e=Kg(t);return e.charAt(0).toLowerCase()+e.substring(1)};function Yb(t,e){if(!t.startsWith(e))return!1;var n=t[e.length];return n>="A"&&n<="Z"}function Xb(t,e){var n=Object.entries(t).reduce(function(t,n){var r=v(n,2),i=r[0],o=r[1];return"className"===i||"class"===i||Yb(i,e)&&Object.assign(t,m({},function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e)return t;if(!Yb(t,e))return t;var r=t.slice(e.length);return n?Wb(r):r}(i,e),o)),t},{});if("opacity"in t){var r=function(t,e){return"".concat(e).concat(Gg(t))}("opacity",e),i=t.opacity;if(r in t){var o=t[r];Object.assign(n,{opacity:i*o})}else Object.assign(n,{opacity:i})}return n}function qb(t,e){var n=e.length;return Object.keys(t).reduce(function(r,i){return i.startsWith(e)&&(r[i.slice(n)]=t[i]),r},{})}function Zb(t,e){var n="string"==typeof e?[e]:e,r={};return Object.keys(t).forEach(function(e){n.find(function(t){return e.startsWith(t)})||(r[e]=t[e])}),r}function Jb(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if("number"==typeof t)return[t,t,t];var e=v(t,3),n=e[0],r=e[1],i=void 0===r?n:r,o=e[2];return[n,i,void 0===o?n:o]}function $b(t,e){var n=e.datum,r=e.graph;return"function"==typeof t?t.call(r,n):Object.fromEntries(Object.entries(t).map(function(t){var e=v(t,2),i=e[0],o=e[1];return"function"==typeof o?[i,o.call(r,n)]:[i,o]}))}function tw(t,e){var n=(null==t?void 0:t.style)||{},r=(null==e?void 0:e.style)||{};for(var i in n)i in r||(r[i]=n[i]);return Object.assign({},t,e,{style:r})}function ew(t){if(t)return"string"==typeof t||"function"==typeof t||Array.isArray(t)?{type:"group",field:function(t){return t.id},color:t,invert:!1}:t}function nw(t){var e="string"==typeof t?fy("palette",t):t;if("function"!=typeof e)return e}function rw(t,e){var n=2*t;return"string"==typeof e?n=t*Number(e.replace("%",""))/100:"number"==typeof e&&(n=e),isNaN(n)&&(n=2*t),n}function iw(t,e){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3]&&arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return rw((t.max[0]-t.min[0])*n,e)}var ow={}.toString;var aw=Object.prototype;var sw=Object.prototype.hasOwnProperty;const uw=function(t){if(pe(t))return!0;if(Wg(t))return!t.length;var e=function(t){return ow.call(t).replace(/^\[object /,"").replace(/]$/,"")}(t);if("Map"===e||"Set"===e)return!t.size;if(function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||aw)}(t))return!Object.keys(t).length;for(var n in t)if(sw.call(t,n))return!1;return!0};var cw=function(t){function e(t){var n;return x(this,e),Aw(t.style),(n=F(this,e,[t])).shapeMap={},n.animateMap={},n.render(n.attributes,n),n.setVisibility(),n.bindEvents(),n}return P(e,t),B(e,[{key:"parsedAttributes",get:function(){return this.attributes}},{key:"upsert",value:function(t,e,n,r,i){var o,a,s,u,c,l,A,f,d=this.shapeMap[t];if(!1!==n){var h="string"==typeof e?fy(uy.SHAPE,e):e;if(!h)throw new Error(vy("Shape ".concat(e," not found")));if(!d||d.destroyed||!(d instanceof h)){d&&(null===(s=null==i?void 0:i.beforeDestroy)||void 0===s||s.call(i,d),null==d||d.destroy(),null===(u=null==i?void 0:i.afterDestroy)||void 0===u||u.call(i,d)),null===(c=null==i?void 0:i.beforeCreate)||void 0===c||c.call(i);var p=new h({className:t,style:n});return r.appendChild(p),this.shapeMap[t]=p,null===(l=null==i?void 0:i.afterCreate)||void 0===l||l.call(i,p),p}return null===(A=null==i?void 0:i.beforeUpdate)||void 0===A||A.call(i,d),iB(d,n),null===(f=null==i?void 0:i.afterUpdate)||void 0===f||f.call(i,d),d}d&&(null===(o=null==i?void 0:i.beforeDestroy)||void 0===o||o.call(i,d),r.removeChild(d),delete this.shapeMap[t],null===(a=null==i?void 0:i.afterDestroy)||void 0===a||a.call(i,d))}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object.assign({},this.attributes,t);Aw(e),function(t,e){var n=e.zIndex,r=e.transform,i=e.transformOrigin,o=e.visibility,a=e.cursor,s=e.clipPath,u=e.component,c=HE(e,["zIndex","transform","transformOrigin","visibility","cursor","clipPath","component"]);Object.assign(t.attributes,c),r&&t.setAttribute("transform",r),de(n)&&t.setAttribute("zIndex",n),i&&t.setAttribute("transformOrigin",i),o&&t.setAttribute("visibility",o),a&&t.setAttribute("cursor",a),s&&t.setAttribute("clipPath",s),u&&t.setAttribute("component",u)}(this,e),this.render(e,this),this.setVisibility()}},{key:"bindEvents",value:function(){}},{key:"getGraphicStyle",value:function(t){return function(t){return t.x,t.y,t.z,t.class,t.className,t.transform,t.transformOrigin,t.zIndex,t.visibility,function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["x","y","z","class","className","transform","transformOrigin","zIndex","visibility"])}(t)}},{key:"compositeShapes",get:function(){return[["badges","badge-"],["ports","port-"]]}},{key:"animate",value:function(t,n){var r=this;if(0===t.length)return null;var i=[];if(void 0!==t[0].x||void 0!==t[0].y||void 0!==t[0].z){var o=this.attributes,a=o.x,s=void 0===a?0:a,u=o.y,c=void 0===u?0:u,l=o.z,A=void 0===l?0:l;t.forEach(function(t){var e=t.x,n=void 0===e?s:e,r=t.y,i=void 0===r?c:r,o=t.z,a=void 0===o?A:o;Object.assign(t,{transform:a?[["translate3d",n,i,a]]:[["translate",n,i]]})})}var f=xn(e,"animate",this,3)([t,n]);if(f&&(lw(this,f),i.push(f)),Array.isArray(t)&&t.length>0){var d=["transform","transformOrigin","x","y","z","zIndex"];Object.keys(t[0]).some(function(t){return!d.includes(t)})&&(Object.entries(this.shapeMap).forEach(function(e){var o=v(e,2),a=o[0],s=o[1],u="get".concat(Gg(a),"Style"),c=r[u];if(mn(c)){var l=t.map(function(t){return c.call(r,Object.assign(Object.assign({},r.attributes),t))}),A=s.animate(by(l),n);A&&(lw(s,A),i.push(A))}}),this.compositeShapes.forEach(function(e){var o=v(e,2),a=o[0],s=o[1];!function(e,o){if(!uw(e)){var a="get".concat(Gg(o),"Style"),s=r[a];if(mn(s)){var u=t.map(function(t){return s.call(r,Object.assign(Object.assign({},r.attributes),t))});Object.entries(u[0]).map(function(t){var r=v(t,1)[0],o=u.map(function(t){return t[r]}),a=e[r];if(a){var s=a.animate(by(o),n);s&&(lw(a,s),i.push(s))}})}}}(qb(r.shapeMap,s),a)}))}return my(i)}},{key:"getShape",value:function(t){return this.shapeMap[t]}},{key:"setVisibility",value:function(){Rm(this,this.attributes.visibility)}},{key:"destroy",value:function(){this.shapeMap={},this.animateMap={},xn(e,"destroy",this,3)([])}}])}(Nu);function lw(t,e){null==e||e.finished.then(function(){var n=t.activeAnimations.findIndex(function(t){return t===e});n>-1&&t.activeAnimations.splice(n,1)})}function Aw(t){if(!t)return{};if("x"in t||"y"in t||"z"in t){var e=t.x,n=void 0===e?0:e,r=t.y,i=Ey(n,void 0===r?0:r,t.z,t.transform);i&&(t.transform=i)}return t}var fw=function(t){function e(t){return x(this,e),F(this,e,[tw({style:e.defaultStyleProps},t)])}return P(e,t),B(e,[{key:"isTextStyle",value:function(t){return Yb(t,"label")}},{key:"isBackgroundStyle",value:function(t){return Yb(t,"background")}},{key:"getTextStyle",value:function(t){var e=this.getGraphicStyle(t);return e.padding,Zb(function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(e,["padding"]),"background")}},{key:"getBackgroundStyle",value:function(t){if(!1===t.background)return!1;var e=this.getGraphicStyle(t),n=e.wordWrap,r=e.wordWrapWidth,i=e.padding,o=Xb(e,"background"),a=this.shapeMap.text.getGeometryBounds(),s=v(a.min,2),u=s[0],c=s[1],l=v(a.center,2),A=l[0],f=l[1],d=v(a.halfExtents,2),h=d[0],p=d[1],g=v(Uy(i),4),y=g[0],m=g[1],b=g[2],w=g[3],x=2*h+w+m,E=o.width,B=o.height;E&&B?Object.assign(o,{x:A-Number(E)/2,y:f-Number(B)/2}):Object.assign(o,{x:u-w,y:c-y,width:n?Math.min(x,r+w+m):x,height:2*p+y+b});var k=o.radius;if("string"==typeof k&&k.endsWith("%")){var O=Number(k.replace("%",""))/100;o.radius=Math.min(+o.width,+o.height)*O}return o}},{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parsedAttributes,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;this.upsert("text",qu,this.getTextStyle(t),e),this.upsert("background",Yu,this.getBackgroundStyle(t),e)}},{key:"getGeometryBounds",value:function(){return(this.getShape("background")||this.getShape("text")).getGeometryBounds()}}])}(cw);fw.defaultStyleProps={padding:0,fontSize:12,fontFamily:"system-ui, sans-serif",wordWrap:!0,maxLines:1,wordWrapWidth:128,textOverflow:"...",textBaseline:"middle",backgroundOpacity:.75,backgroundZIndex:-1,backgroundLineWidth:0};var dw=function(t){function e(t){return x(this,e),F(this,e,[tw({style:e.defaultStyleProps},t)])}return P(e,t),B(e,[{key:"getBadgeStyle",value:function(t){return this.getGraphicStyle(t)}},{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parsedAttributes,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;this.upsert("label",fw,this.getBadgeStyle(t),e)}},{key:"getGeometryBounds",value:function(){var t=this.getShape("label");return(t.getShape("background")||t.getShape("text")).getGeometryBounds()}}])}(cw);function hw(t){return f(t)||k(t)||h(t)||p()}dw.defaultStyleProps={padding:[2,4,2,4],fontSize:10,wordWrap:!1,backgroundRadius:"50%",backgroundOpacity:1};var pw={M:["x","y"],m:["dx","dy"],H:["x"],h:["dx"],V:["y"],v:["dy"],L:["x","y"],l:["dx","dy"],Z:[],z:[],C:["x1","y1","x2","y2","x","y"],c:["dx1","dy1","dx2","dy2","dx","dy"],S:["x2","y2","x","y"],s:["dx2","dy2","dx","dy"],Q:["x1","y1","x","y"],q:["dx1","dy1","dx","dy"],T:["x","y"],t:["dx","dy"],A:["rx","ry","rotation","large-arc","sweep","x","y"],a:["rx","ry","rotation","large-arc","sweep","dx","dy"]};var vw=function(t){if(t.length<2)return[["M",0,0],["L",0,0]];var e=t[0],n=t[1],r=t[t.length-1],i=t[t.length-2];t.unshift(i,r),t.push(e,n);for(var o=[["M",r[0],r[1]]],a=1;a<t.length-2;a+=1){var s=v(t[a-1],2),u=s[0],c=s[1],l=v(t[a],2),A=l[0],f=l[1],d=v(t[a+1],2),h=d[0],p=d[1],g=v(a!==t.length-2?t[a+2]:[h,p],2),y=A+(h-u)/6,m=f+(p-c)/6,b=h-(g[0]-A)/6,w=p-(g[1]-f)/6;o.push(["C",y,m,b,w,h,p])}return o},gw=function(t){function e(t){return x(this,e),F(this,e,[tw({style:e.defaultStyleProps},t)])}return P(e,t),B(e,[{key:"getLabelStyle",value:function(t){if(!t.label||!t.d||0===t.d.length)return!1;var e=Xb(this.getGraphicStyle(t),"label"),n=e.maxWidth,r=e.offsetX,i=e.offsetY,o=e.autoRotate,a=e.placement,s=e.closeToPath,u=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(e,["maxWidth","offsetX","offsetY","autoRotate","placement","closeToPath"]),c=this.shapeMap.key,l=null==c?void 0:c.getRenderBounds();return Object.assign(function(t,e,n,r,i,o,a){var s=v(gb(t,e),2),u=s[0],c=s[1],l={textAlign:"left"===e?"right":"right"===e?"left":"center",textBaseline:"top"===e?"bottom":"bottom"===e?"top":"middle",transform:[["translate",u+n,c+r]]};if("center"===e||!i)return l;var A=function(t){var e=[],n="string"==typeof t?function(t){for(var e=t.replace(/[\n\r]/g,"").replace(/-/g," -").replace(/(\d*\.)(\d+)(?=\.)/g,"$1$2 ").trim().split(/\s*,|\s+/),n=[],r="",i={},o=function(){var t=e.shift();t in pw?r=t:e.unshift(t),i={type:r},pw[r].forEach(function(n){t=e.shift(),i[n]=t}),"M"===r?r="L":"m"===r&&(r="l");var o=hw(Object.values(i)),a=o[0],s=d(o).slice(1);n.push([a].concat(O(s.map(Number))))};e.length>0;)o();return n}(t):t;return n.forEach(function(t){var n=t[0];if("Z"!==n)if("A"!==n)for(var r=1;r<t.length;r+=2)e.push([t[r],t[r+1],0]);else{var i=t.length;e.push([t[i-2],t[i-1],0])}else e.push(e[0])}),e}(o);if(!A||A.length<=3)return l;var f=A.map(function(t,e){var n=t,r=A[(e+1)%A.length];return Xg(n,r)?null:[n,r]}).filter(Boolean),h=function(t,e){var n=1/0,r=[[0,0],[0,0]];return e.forEach(function(e){var i=function(t,e){return nb(t,Mb(t,e))}(t,e);i<n&&(n=i,r=e)}),r}([u,c],f),p=Mb([u,c],h);if(p&&h&&(l.transform=[["translate",p[0]+n,p[1]+r]],a)){var g=Math.atan((h[0][1]-h[1][1])/(h[0][0]-h[1][0]));l.transform.push(["rotate",g/Math.PI*180]),l.textAlign="center","right"!==e&&"left"!==e||(l.textBaseline=g>0?"right"===e?"bottom":"top":"right"===e?"top":"bottom")}return l}(l,a,r,i,s,t.d,o),{wordWrapWidth:iw(l,n)},u)}},{key:"getKeyStyle",value:function(t){return this.getGraphicStyle(t)}},{key:"render",value:function(t,e){this.upsert("key",zu,this.getKeyStyle(t),e),this.upsert("label",fw,this.getLabelStyle(t),e)}}])}(cw);gw.defaultStyleProps={label:!0,labelPlacement:"bottom",labelCloseToPath:!0,labelAutoRotate:!0,labelOffsetX:0,labelOffsetY:0};var yw=function(t){function e(t){var n;return x(this,e),(n=F(this,e,[t])).onMounted=function(){n.handleRadius()},n.onAttrModified=function(){n.handleRadius()},bw=n,n.isMutationObserved=!0,n.addEventListener(Hs.MOUNTED,n.onMounted),n.addEventListener(Hs.ATTR_MODIFIED,n.onAttrModified),n}return P(e,t),B(e,[{key:"handleRadius",value:function(){var t=this.attributes,e=t.radius,n=t.clipPath,r=t.width,i=void 0===r?0:r,o=t.height,a=void 0===o?0:o;if(e&&i&&a){var s=v(this.getBounds().min,2),u={x:s[0],y:s[1],radius:e,width:i,height:a};if(n)Object.assign(this.parsedStyle.clipPath.style,u);else{var c=new Yu({style:u});this.style.clipPath=c}}else n&&(this.style.clipPath=null)}}])}(ju),mw=new WeakMap,bw=null,ww=function(t){if(bw&&function(t){for(var e=[],n=t.parentNode;n;)e.push(n),n=n.parentNode;return e}(bw).includes(t)){var e=mw.get(t);e?e.includes(bw)||e.push(bw):mw.set(t,[bw])}},xw=function(t){var e=mw.get(t);e&&e.forEach(function(t){return t.handleRadius()})},Ew=function(t){function e(t){return x(this,e),F(this,e,[t])}return P(e,t),B(e,[{key:"isImage",value:function(){return!!this.attributes.src}},{key:"getIconStyle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.attributes,e=t.width,n=void 0===e?0:e,r=t.height,i=void 0===r?0:r,o=this.getGraphicStyle(t);return this.isImage()?Object.assign({x:-n/2,y:-i/2},o):Object.assign({textBaseline:"middle",textAlign:"center"},o)}},{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.attributes,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;this.upsert("icon",this.isImage()?yw:qu,this.getIconStyle(t),e)}}])}(cw),Bw=function(t){function e(){return x(this,e),F(this,e,arguments)}return P(e,t),B(e,[{key:"context",get:function(){return this.config.context}},{key:"parsedAttributes",get:function(){return this.attributes}},{key:"onframe",value:function(){}},{key:"animate",value:function(t,n){var r=this,i=xn(e,"animate",this,3)([t,n]);return i&&(i.onframe=function(){return r.onframe()},i.finished.then(function(){return r.onframe()})),i}}])}(cw),kw=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},Ow=function(t){function e(t){var n;return x(this,e),(n=F(this,e,[tw({style:e.defaultStyleProps},t)])).type="node",n}return P(e,t),B(e,[{key:"getSize",value:function(){return Jb((arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.attributes).size)}},{key:"getKeyStyle",value:function(t){var e=this.getGraphicStyle(t);return Object.assign(Zb(e,["label","halo","icon","badge","port"]))}},{key:"getLabelStyle",value:function(t){if(!1===t.label||!t.labelText)return!1;var e=Xb(this.getGraphicStyle(t),"label"),n=e.placement,r=e.maxWidth,i=e.offsetX,o=e.offsetY,a=kw(e,["placement","maxWidth","offsetX","offsetY"]),s=this.getShape("key").getLocalBounds();return Object.assign(nB(s,n,i,o),{wordWrapWidth:iw(s,r)},a)}},{key:"getHaloStyle",value:function(t){if(!1===t.halo)return!1;var e=this.getKeyStyle(t),n=e.fill,r=kw(e,["fill"]),i=Xb(this.getGraphicStyle(t),"halo");return Object.assign(Object.assign(Object.assign({},r),{stroke:n}),i)}},{key:"getIconStyle",value:function(t){if(!1===t.icon||!t.iconText&&!t.iconSrc)return!1;var e=Xb(this.getGraphicStyle(t),"icon");return Object.assign(function(t,e){var n=Jb(t),r={};return e.text&&!e.fontSize&&(r={fontSize:.5*Math.min.apply(Math,O(n))}),!e.src||e.width&&e.height||(r={width:.5*n[0],height:.5*n[1]}),r}(t.size,e),e)}},{key:"getBadgesStyle",value:function(t){var e,n=this,r=qb(this.shapeMap,"badge-"),i={};if(Object.keys(r).forEach(function(t){i[t]=!1}),!1===t.badge||!(null===(e=t.badges)||void 0===e?void 0:e.length))return i;var o=t.badges,a=void 0===o?[]:o,s=t.badgePalette,u=t.opacity,c=void 0===u?1:u,l=kw(t,["badges","badgePalette","opacity"]),A=nw(s),f=Xb(this.getGraphicStyle(l),"badge");return a.forEach(function(t,e){i[e]=Object.assign(Object.assign({backgroundFill:A?A[e%(null==A?void 0:A.length)]:void 0,opacity:c},f),n.getBadgeStyle(t))}),i}},{key:"getBadgeStyle",value:function(t){var e=this.getShape("key"),n=t.placement,r=void 0===n?"top":n,i=t.offsetX,o=t.offsetY,a=kw(t,["placement","offsetX","offsetY"]),s=nB(e.getLocalBounds(),r,i,o,!0);return Object.assign(Object.assign({},s),a)}},{key:"getPortsStyle",value:function(t){var e,n=this,r=this.getPorts(),i={};if(Object.keys(r).forEach(function(t){i[t]=!1}),!1===t.port||!(null===(e=t.ports)||void 0===e?void 0:e.length))return i;var o=Xb(this.getGraphicStyle(t),"port"),a=t.ports;return(void 0===a?[]:a).forEach(function(e,r){var a=e.key||r,s=Object.assign(Object.assign({},o),e);if(qE(s))i[a]=!1;else{var u=v(n.getPortXY(t,e),2),c=u[0],l=u[1];i[a]=Object.assign({transform:[["translate",c,l]]},s)}}),i}},{key:"getPortXY",value:function(t,e){var n=e.placement,r=void 0===n?"left":n,i=this.getShape("key");return YE(function(t,e){if(!t)return e.getLocalBounds();var n=t.canvas.getLayer(),r=e.cloneNode();Rm(r,"hidden"),n.appendChild(r);var i=r.getLocalBounds();return r.destroy(),i}(this.context,i),r)}},{key:"getPorts",value:function(){return qb(this.shapeMap,"port-")}},{key:"getCenter",value:function(){return this.getShape("key").getBounds().center}},{key:"getIntersectPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Ob(t,gb(e,"center"),[gb(e,"left-top"),gb(e,"right-top"),gb(e,"right-bottom"),gb(e,"left-bottom")],!1,n).point}(t,this.getShape("key").getBounds(),e)}},{key:"drawHaloShape",value:function(t,e){var n=this.getHaloStyle(t),r=this.getShape("key");this.upsert("halo",r.constructor,n,e)}},{key:"drawIconShape",value:function(t,e){var n=this.getIconStyle(t);this.upsert("icon",Ew,n,e),ww(this)}},{key:"drawBadgeShapes",value:function(t,e){var n=this,r=this.getBadgesStyle(t);Object.keys(r).forEach(function(t){var i=r[t];n.upsert("badge-".concat(t),dw,i,e)})}},{key:"drawPortShapes",value:function(t,e){var n=this,r=this.getPortsStyle(t);Object.keys(r).forEach(function(t){var i=r[t],o="port-".concat(t);n.upsert(o,Pu,i,e)})}},{key:"drawLabelShape",value:function(t,e){var n=this.getLabelStyle(t);this.upsert("label",fw,n,e)}},{key:"_drawKeyShape",value:function(t,e){return this.drawKeyShape(t,e)}},{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parsedAttributes,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;this._drawKeyShape(t,e),this.getShape("key")&&(this.drawHaloShape(t,e),this.drawIconShape(t,e),this.drawBadgeShapes(t,e),this.drawLabelShape(t,e),this.drawPortShapes(t,e))}},{key:"update",value:function(t){xn(e,"update",this,3)([t]),t&&("x"in t||"y"in t||"z"in t)&&xw(this)}},{key:"onframe",value:function(){this.drawBadgeShapes(this.parsedAttributes,this),this.drawLabelShape(this.parsedAttributes,this)}}])}(Bw);Ow.defaultStyleProps={x:0,y:0,size:32,droppable:!0,draggable:!0,port:!0,ports:[],portZIndex:2,portLinkToCenter:!1,badge:!0,badges:[],badgeZIndex:3,halo:!1,haloDroppable:!1,haloLineDash:0,haloLineWidth:12,haloStrokeOpacity:.25,haloPointerEvents:"none",haloZIndex:-1,icon:!0,iconZIndex:1,label:!0,labelIsBillboard:!0,labelMaxWidth:"200%",labelPlacement:"bottom",labelWordWrap:!1,labelZIndex:0};var Cw=function(t){function e(t){return x(this,e),F(this,e,[tw({style:e.defaultStyleProps},t)])}return P(e,t),B(e,[{key:"drawKeyShape",value:function(t,e){return this.upsert("key",Pu,this.getKeyStyle(t),e)}},{key:"getKeyStyle",value:function(t){var n=xn(e,"getKeyStyle",this,3)([t]);return Object.assign(Object.assign({},n),{r:Math.min.apply(Math,O(this.getSize(t)))/2})}},{key:"getIconStyle",value:function(t){var n=xn(e,"getIconStyle",this,3)([t]),r=2*this.getShape("key").attributes.r*_b;return!!n&&Object.assign({width:r,height:r},n)}},{key:"getIntersectPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Cb(t,this.getShape("key").getBounds(),e)}}])}(Ow);Cw.defaultStyleProps={size:32};var Mw=function(t){function e(t){return x(this,e),F(this,e,[t])}return P(e,t),B(e,[{key:"parsedAttributes",get:function(){return this.attributes}},{key:"drawKeyShape",value:function(t,e){return this.upsert("key",Gu,this.getKeyStyle(t),e)}},{key:"getKeyStyle",value:function(t){var n=xn(e,"getKeyStyle",this,3)([t]);return Object.assign(Object.assign({},n),{points:this.getPoints(t)})}},{key:"getIntersectPoint",value:function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.getShape("key").attributes.points;return Ob(t,[+((null===(e=this.attributes)||void 0===e?void 0:e.x)||0),+((null===(n=this.attributes)||void 0===n?void 0:n.y)||0)],i,!0,r).point}}])}(Ow),Sw=function(t){function e(t){return x(this,e),F(this,e,[t])}return P(e,t),B(e,[{key:"getPoints",value:function(t){var e=v(this.getSize(t),2);return function(t,e){return[[0,-e/2],[t/2,0],[0,e/2],[-t/2,0]]}(e[0],e[1])}}])}(Mw),Fw=function(t){function e(t){return x(this,e),F(this,e,[tw({style:e.defaultStyleProps},t)])}return P(e,t),B(e,[{key:"parseOuterR",value:function(){var t=this.parsedAttributes.size;return Math.min.apply(Math,O(Jb(t)))/2}},{key:"parseInnerR",value:function(){var t=this.parsedAttributes.innerR;return ve(t)?parseInt(t)/100*this.parseOuterR():t}},{key:"drawDonutShape",value:function(t,e){var n=this,r=t.donuts;if(null==r?void 0:r.length){var i=r.map(function(t){return de(t)?{value:t}:t}),o=Xb(this.getGraphicStyle(t),"donut"),a=nw(t.donutPalette);if(a){var s=i.reduce(function(t,e){var n;return t+(null!==(n=e.value)&&void 0!==n?n:0)},0),u=this.parseOuterR(),c=this.parseInnerR(),l=0;i.forEach(function(t,r){var A=t.value,f=void 0===A?0:A,d=t.color,h=void 0===d?a[r%a.length]:d,p=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["value","color"]),v=360*(0===s?1/i.length:f/s);n.upsert("round".concat(r),zu,Object.assign(Object.assign(Object.assign({},o),{d:Pw(u,c,l,l+v),fill:h}),p),e),l+=v})}}}},{key:"render",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;xn(e,"render",this,3)([t,n]),this.drawDonutShape(t,n)}}])}(Cw);Fw.defaultStyleProps={innerR:"50%",donuts:[],donutPalette:"tableau"};var Tw=function(t,e,n,r){return[t+Math.sin(r)*n,e-Math.cos(r)*n]},Pw=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return Math.abs(n-r)%360<1e-6?function(t,e,n,r){return r<=0||n<=r?[["M",0-n,0],["A",n,n,0,1,1,0+n,0],["A",n,n,0,1,1,0-n,0],["Z"]]:[["M",0-n,0],["A",n,n,0,1,1,0+n,0],["A",n,n,0,1,1,0-n,0],["Z"],["M",0+r,0],["A",r,r,0,1,0,0-r,0],["A",r,r,0,1,0,0+r,0],["Z"]]}(0,0,t,e):function(t,e,n,r,i,o){var a=i/360*2*Math.PI,s=o/360*2*Math.PI,u=[Tw(0,0,r,a),Tw(0,0,n,a),Tw(0,0,n,s),Tw(0,0,r,s)],c=s-a>Math.PI?1:0;return[["M",u[0][0],u[0][1]],["L",u[1][0],u[1][1]],["A",n,n,0,c,1,u[2][0],u[2][1]],["L",u[3][0],u[3][1]],["A",r,r,0,c,0,u[0][0],u[0][1]],["Z"]]}(0,0,t,e,n,r)},Iw=function(t){function e(t){return x(this,e),F(this,e,[tw({style:e.defaultStyleProps},t)])}return P(e,t),B(e,[{key:"drawKeyShape",value:function(t,e){return this.upsert("key",Lu,this.getKeyStyle(t),e)}},{key:"getKeyStyle",value:function(t){var n=xn(e,"getKeyStyle",this,3)([t]),r=v(this.getSize(t),2),i=r[0],o=r[1];return Object.assign(Object.assign({},n),{rx:i/2,ry:o/2})}},{key:"getIconStyle",value:function(t){var n=xn(e,"getIconStyle",this,3)([t]),r=this.getShape("key").attributes,i=r.rx,o=r.ry,a=2*Math.min(+i,+o)*_b;return!!n&&Object.assign({width:a,height:a},n)}},{key:"getIntersectPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Cb(t,this.getShape("key").getBounds(),e)}}])}(Ow);Iw.defaultStyleProps={size:[45,35]};var Nw=function(t){function e(t){return x(this,e),F(this,e,[t])}return P(e,t),B(e,[{key:"getOuterR",value:function(t){return t.outerR||Math.min.apply(Math,O(this.getSize(t)))/2}},{key:"getPoints",value:function(t){return[[0,e=this.getOuterR(t)],[e*Math.sqrt(3)/2,e/2],[e*Math.sqrt(3)/2,-e/2],[0,-e],[-e*Math.sqrt(3)/2,-e/2],[-e*Math.sqrt(3)/2,e/2]];var e}},{key:"getIconStyle",value:function(t){var n=xn(e,"getIconStyle",this,3)([t]),r=this.getOuterR(t)*_b;return!!n&&Object.assign({width:r,height:r},n)}}])}(Mw);function Lw(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var _w=0;function Qw(t){return"__private_"+_w+++"_"+t}var Uw=Qw("renderState"),jw=function(){function t(e){x(this,t),this.removedRBushNodeAABBs=[],this.renderQueue=[],Object.defineProperty(this,Uw,{writable:!0,value:{restoreStack:[],prevObject:null,currentContext:new Map}}),this.clearFullScreenLastFrame=!1,this.clearFullScreen=!1,this.vpMatrix=rt(),this.dprMatrix=rt(),this.tmpMat4=rt(),this.vec3a=_(),this.vec3b=_(),this.vec3c=_(),this.vec3d=_(),this.canvasRendererPluginOptions=e}return B(t,[{key:"apply",value:function(e,n){var r=this;this.context=e;var i=this.context,o=i.config,a=i.camera,s=i.renderingService,u=i.renderingContext,c=i.rBushRoot,l=i.pathGeneratorFactory,A=o.renderer.getConfig().enableRenderingOptimization;o.renderer.getConfig().enableDirtyCheck=!1,o.renderer.getConfig().enableDirtyRectangleRendering=!1,this.rBush=c,this.pathGeneratorFactory=l;var f=e.contextService,d=u.root.ownerDocument.defaultView,h=function(t){var e=t.target.rBushNode;null!=e&&e.aabb&&r.removedRBushNodeAABBs.push(e.aabb)},p=function(t){var e=t.target.rBushNode;e.aabb&&r.removedRBushNodeAABBs.push(e.aabb)};s.hooks.init.tap(t.tag,function(){d.addEventListener(Hs.UNMOUNTED,h),d.addEventListener(Hs.CULLED,p);var t=f.getDPR(),e=o.width,n=o.height,i=f.getContext();r.clearRect(i,0,0,e*t,n*t,o.background)}),s.hooks.destroy.tap(t.tag,function(){d.removeEventListener(Hs.UNMOUNTED,h),d.removeEventListener(Hs.CULLED,p),r.renderQueue=[],r.removedRBushNodeAABBs=[],Lw(r,Uw)[Uw]={restoreStack:[],prevObject:null,currentContext:null}});var v=function(t,e){for(var i=[t];i.length>0;){var o,a=i.pop();a.isVisible()&&!a.isCulled()&&(A?r.renderDisplayObjectOptimized(a,e,r.context,Lw(r,Uw)[Uw],n):r.renderDisplayObject(a,e,r.context,Lw(r,Uw)[Uw],n));for(var s=(null===(o=a.sortable)||void 0===o||null===(o=o.sorted)||void 0===o?void 0:o.length)>0?a.sortable.sorted:a.childNodes,u=s.length-1;u>=0;u--)i.push(s[u])}};s.hooks.endFrame.tap(t.tag,function(){if(function(){var t,e=f.getContext(),n=f.getDPR(),i=o.width,a=o.height,u=r.canvasRendererPluginOptions,c=u.dirtyObjectNumThreshold,l=u.dirtyObjectRatioThreshold,A=s.getStats(),h=A.total,p=A.rendered,v=p/h;r.clearFullScreen=r.clearFullScreenLastFrame||!(null!==(t=d.context.renderingPlugins[1])&&void 0!==t&&t.isFirstTimeRenderingFinished)||s.disableDirtyRectangleRendering()||p>c&&v>l,e&&("function"==typeof e.resetTransform?e.resetTransform():e.setTransform(1,0,0,1,0,0),r.clearFullScreen&&r.clearRect(e,0,0,i*n,a*n,o.background))}(),0!==u.root.childNodes.length){A=o.renderer.getConfig().enableRenderingOptimization,Lw(r,Uw)[Uw]={restoreStack:[],prevObject:null,currentContext:Lw(r,Uw)[Uw].currentContext},Lw(r,Uw)[Uw].currentContext.clear(),r.clearFullScreenLastFrame=!1;var t=f.getContext(),e=f.getDPR();if(wt(r.dprMatrix,[e,e,1]),dt(r.vpMatrix,r.dprMatrix,a.getOrthoMatrix()),r.clearFullScreen)A?(t.save(),v(u.root,t),t.restore()):v(u.root,t),r.removedRBushNodeAABBs=[];else{var i=r.safeMergeAABB.apply(r,[r.mergeDirtyAABBs(r.renderQueue)].concat(O(r.removedRBushNodeAABBs.map(function(t){var e=t.minX,n=t.minY,r=t.maxX,i=t.maxY,o=new ar;return o.setMinMax([e,n,0],[r,i,0]),o}))));if(r.removedRBushNodeAABBs=[],ar.isEmpty(i))return void(r.renderQueue=[]);var c=r.convertAABB2Rect(i),l=c.x,h=c.y,p=c.width,g=c.height,y=Y(r.vec3a,[l,h,0],r.vpMatrix),m=Y(r.vec3b,[l+p,h,0],r.vpMatrix),b=Y(r.vec3c,[l,h+g,0],r.vpMatrix),w=Y(r.vec3d,[l+p,h+g,0],r.vpMatrix),x=Math.min(y[0],m[0],w[0],b[0]),E=Math.min(y[1],m[1],w[1],b[1]),B=Math.max(y[0],m[0],w[0],b[0]),k=Math.max(y[1],m[1],w[1],b[1]),C=Math.floor(x),M=Math.floor(E),S=Math.ceil(B-x),F=Math.ceil(k-E);t.save(),r.clearRect(t,C,M,S,F,o.background),t.beginPath(),t.rect(C,M,S,F),t.clip(),t.setTransform(r.vpMatrix[0],r.vpMatrix[1],r.vpMatrix[4],r.vpMatrix[5],r.vpMatrix[12],r.vpMatrix[13]),o.renderer.getConfig().enableDirtyRectangleRenderingDebug&&d.dispatchEvent(new Is(oc.DIRTY_RECTANGLE,{dirtyRect:{x:C,y:M,width:S,height:F}})),r.searchDirtyObjects(i).sort(function(t,e){return t.sortable.renderOrder-e.sortable.renderOrder}).forEach(function(e){e&&e.isVisible()&&!e.isCulled()&&r.renderDisplayObject(e,t,r.context,Lw(r,Uw)[Uw],n)}),t.restore(),r.renderQueue.forEach(function(t){r.saveDirtyAABB(t)}),r.renderQueue=[]}Lw(r,Uw)[Uw].restoreStack.forEach(function(){t.restore()}),Lw(r,Uw)[Uw].restoreStack=[]}else r.clearFullScreenLastFrame=!0}),s.hooks.render.tap(t.tag,function(t){r.clearFullScreen||r.renderQueue.push(t)})}},{key:"clearRect",value:function(t,e,n,r,i,o){t.clearRect(e,n,r,i),o&&(t.fillStyle=o,t.fillRect(e,n,r,i))}},{key:"renderDisplayObjectOptimized",value:function(t,e,n,r,i){var o=t.nodeName,a=!1,s=this.context.styleRendererFactory[o],u=this.pathGeneratorFactory[o],c=t.parsedStyle.clipPath;if(c){(!r.prevObject||!Zt(c.getWorldTransform(),r.prevObject.getWorldTransform()))&&(this.applyWorldTransform(e,c),r.prevObject=null);var l=this.pathGeneratorFactory[c.nodeName];l&&(e.save(),a=!0,e.beginPath(),l(e,c.parsedStyle),e.closePath(),e.clip())}if(s){(!r.prevObject||!Zt(t.getWorldTransform(),r.prevObject.getWorldTransform()))&&this.applyWorldTransform(e,t);var A=!r.prevObject;if(!A){var f=r.prevObject.nodeName;A=o===Jn.TEXT?f!==Jn.TEXT:o===Jn.IMAGE?f!==Jn.IMAGE:f===Jn.TEXT||f===Jn.IMAGE}s.applyStyleToContext(e,t,A,r),r.prevObject=t}u&&(e.beginPath(),u(e,t.parsedStyle),o!==Jn.LINE&&o!==Jn.PATH&&o!==Jn.POLYLINE&&e.closePath()),s&&s.drawToContext(e,t,Lw(this,Uw)[Uw],this,i),a&&e.restore(),t.dirty(!1)}},{key:"renderDisplayObject",value:function(t,e,n,r,i){var o=t.nodeName,a=r.restoreStack[r.restoreStack.length-1];!a||t.compareDocumentPosition(a)&Ls.DOCUMENT_POSITION_CONTAINS||(e.restore(),r.restoreStack.pop());var s=this.context.styleRendererFactory[o],u=this.pathGeneratorFactory[o],c=t.parsedStyle.clipPath;if(c){this.applyWorldTransform(e,c);var l=this.pathGeneratorFactory[c.nodeName];l&&(e.save(),r.restoreStack.push(t),e.beginPath(),l(e,c.parsedStyle),e.closePath(),e.clip())}s&&(this.applyWorldTransform(e,t),e.save(),this.applyAttributesToContext(e,t)),u&&(e.beginPath(),u(e,t.parsedStyle),o!==Jn.LINE&&o!==Jn.PATH&&o!==Jn.POLYLINE&&e.closePath()),s&&(s.render(e,t.parsedStyle,t,n,this,i),e.restore()),t.dirty(!1)}},{key:"applyAttributesToContext",value:function(t,e){var n=e.parsedStyle,r=n.stroke,i=n.fill,o=n.opacity,a=n.lineDash,s=n.lineDashOffset;a&&t.setLineDash(a),pe(s)||(t.lineDashOffset=s),pe(o)||(t.globalAlpha*=o),pe(r)||Array.isArray(r)||r.isNone||(t.strokeStyle=e.attributes.stroke),pe(i)||Array.isArray(i)||i.isNone||(t.fillStyle=e.attributes.fill)}},{key:"convertAABB2Rect",value:function(t){var e=t.getMin(),n=t.getMax(),r=Math.floor(e[0]),i=Math.floor(e[1]);return{x:r,y:i,width:Math.ceil(n[0])-r,height:Math.ceil(n[1])-i}}},{key:"mergeDirtyAABBs",value:function(t){var e=new ar;return t.forEach(function(t){var n=t.getRenderBounds();e.add(n);var r=t.renderable.dirtyRenderBounds;r&&e.add(r)}),e}},{key:"searchDirtyObjects",value:function(t){var e=v(t.getMin(),2),n=e[0],r=e[1],i=v(t.getMax(),2),o=i[0],a=i[1];return this.rBush.search({minX:n,minY:r,maxX:o,maxY:a}).map(function(t){return t.displayObject})}},{key:"saveDirtyAABB",value:function(t){var e=t.renderable;e.dirtyRenderBounds||(e.dirtyRenderBounds=new ar);var n=t.getRenderBounds();n&&e.dirtyRenderBounds.update(n.center,n.halfExtents)}},{key:"applyWorldTransform",value:function(t,e,n){n?(ot(this.tmpMat4,e.getLocalTransform()),dt(this.tmpMat4,n,this.tmpMat4),dt(this.tmpMat4,this.vpMatrix,this.tmpMat4)):(ot(this.tmpMat4,e.getWorldTransform()),dt(this.tmpMat4,this.vpMatrix,this.tmpMat4)),t.setTransform(this.tmpMat4[0],this.tmpMat4[1],this.tmpMat4[4],this.tmpMat4[5],this.tmpMat4[12],this.tmpMat4[13])}},{key:"safeMergeAABB",value:function(){for(var t=new ar,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.forEach(function(e){t.add(e)}),t}}])}();function Dw(t,e,n,r,i,o,a){var s,u;if("rect"===t.image.nodeName){var c=t.image.parsedStyle,l=c.width,A=c.height;u=r.contextService.getDPR();var f=r.config.offscreenCanvas;(s=o.offscreenCanvasCreator.getOrCreateCanvas(f)).width=l*u,s.height=A*u;var d=o.offscreenCanvasCreator.getOrCreateContext(f),h={restoreStack:[],prevObject:null,currentContext:new Map};t.image.forEach(function(t){i.renderDisplayObject(t,d,r,h,o)}),h.restoreStack.forEach(function(){d.restore()})}return a.getOrCreatePatternSync(e,t,n,s,u,e.getGeometryBounds().min,function(){e.dirty(),r.renderingService.dirty()})}function Rw(t,e,n,r){var i;if(t.type===Ni.LinearGradient||t.type===Ni.RadialGradient){var o=e.getGeometryBounds(),a=o&&2*o.halfExtents[0]||1,s=o&&2*o.halfExtents[1]||1,u=o&&o.min||[0,0];i=r.getOrCreateGradient(w(w({type:t.type},t.value),{},{min:u,width:a,height:s}),n)}return i}jw.tag="CanvasRenderer";var Hw=["shadowBlur","shadowOffsetX","shadowOffsetY"],zw=["lineCap","lineJoin","miterLimit"],Kw={globalAlpha:1,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",filter:"none",globalCompositeOperation:"source-over",strokeStyle:"#000",strokeOpacity:1,lineWidth:1,lineDash:[],lineDashOffset:0,lineCap:"butt",lineJoin:"miter",miterLimit:10,fillStyle:"#000",fillOpacity:1},Gw={};function Vw(t,e,n,r){var i=r.has(e)?r.get(e):Kw[e];return i!==n&&("lineDash"===e?t.setLineDash(n):t[e]=n,r.set(e,n)),i}var Ww=function(){return B(function t(e){x(this,t),this.imagePool=e},[{key:"applyAttributesToContext",value:function(t,e){}},{key:"render",value:function(t,e,n,r,i,o){}},{key:"applyCommonStyleToContext",value:function(t,e,n,r){var i=n?Gw:r.prevObject.parsedStyle,o=e.parsedStyle;(n||o.opacity!==i.opacity)&&Vw(t,"globalAlpha",pe(o.opacity)?Kw.globalAlpha:o.opacity,r.currentContext),(n||o.blend!==i.blend)&&Vw(t,"globalCompositeOperation",pe(o.blend)?Kw.globalCompositeOperation:o.blend,r.currentContext)}},{key:"applyStrokeFillStyleToContext",value:function(t,e,n,r){var i=n?Gw:r.prevObject.parsedStyle,o=e.parsedStyle,a=o.lineWidth,s=void 0===a?Kw.lineWidth:a,u=o.fill&&!o.fill.isNone;if(o.stroke&&!o.stroke.isNone&&s>0){(n||e.attributes.stroke!==r.prevObject.attributes.stroke)&&Vw(t,"strokeStyle",pe(o.stroke)||Array.isArray(o.stroke)||o.stroke.isNone?Kw.strokeStyle:e.attributes.stroke,r.currentContext),(n||o.lineWidth!==i.lineWidth)&&Vw(t,"lineWidth",pe(o.lineWidth)?Kw.lineWidth:o.lineWidth,r.currentContext),(n||o.lineDash!==i.lineDash)&&Vw(t,"lineDash",o.lineDash||Kw.lineDash,r.currentContext),(n||o.lineDashOffset!==i.lineDashOffset)&&Vw(t,"lineDashOffset",pe(o.lineDashOffset)?Kw.lineDashOffset:o.lineDashOffset,r.currentContext);for(var c=0;c<zw.length;c++){var l=zw[c];(n||o[l]!==i[l])&&Vw(t,l,pe(o[l])?Kw[l]:o[l],r.currentContext)}}u&&(n||e.attributes.fill!==r.prevObject.attributes.fill)&&Vw(t,"fillStyle",pe(o.fill)||Array.isArray(o.fill)||o.fill.isNone?Kw.fillStyle:e.attributes.fill,r.currentContext)}},{key:"applyStyleToContext",value:function(t,e,n,r){var i=e.nodeName;this.applyCommonStyleToContext(t,e,n,r),i===Jn.IMAGE||this.applyStrokeFillStyleToContext(t,e,n,r)}},{key:"applyShadowAndFilterStyleToContext",value:function(t,e,n,r){var i=e.parsedStyle;if(n){Vw(t,"shadowColor",i.shadowColor.toString(),r.currentContext);for(var o=0;o<Hw.length;o++){var a=Hw[o];Vw(t,a,i[a]||Kw[a],r.currentContext)}}i.filter&&i.filter.length&&Vw(t,"filter",e.attributes.filter,r.currentContext)}},{key:"clearShadowAndFilterStyleForContext",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(e){Vw(t,"shadowColor",Kw.shadowColor,r.currentContext);for(var o=0;o<Hw.length;o++){var a=Hw[o];Vw(t,a,Kw[a],r.currentContext)}}if(n)if(e&&i){var s=t.filter;!pe(s)&&s.indexOf("drop-shadow")>-1&&Vw(t,"filter",s.replace(/drop-shadow\([^)]*\)/,"").trim()||Kw.filter,r.currentContext)}else Vw(t,"filter",Kw.filter,r.currentContext)}},{key:"fillToContext",value:function(t,e,n,r,i){var o=this,a=e.parsedStyle,s=a.fill,u=a.fillRule,c=null;if(Array.isArray(s)&&s.length>0)s.forEach(function(r){var i=Vw(t,"fillStyle",Rw(r,e,t,o.imagePool),n.currentContext);c=null!=c?c:i,u?t.fill(u):t.fill()});else{if(io(s)){var l=Dw(s,e,t,e.ownerDocument.defaultView.context,r,i,this.imagePool);l&&(t.fillStyle=l,c=!0)}u?t.fill(u):t.fill()}null!==c&&Vw(t,"fillStyle",c,n.currentContext)}},{key:"strokeToContext",value:function(t,e,n,r,i){var o=this,a=e.parsedStyle.stroke,s=null;if(Array.isArray(a)&&a.length>0)a.forEach(function(r){var i=Vw(t,"strokeStyle",Rw(r,e,t,o.imagePool),n.currentContext);s=null!=s?s:i,t.stroke()});else{if(io(a)){var u=Dw(a,e,t,e.ownerDocument.defaultView.context,r,i,this.imagePool);if(u){var c=Vw(t,"strokeStyle",u,n.currentContext);s=null!=s?s:c}}t.stroke()}null!==s&&Vw(t,"strokeStyle",s,n.currentContext)}},{key:"drawToContext",value:function(t,e,n,r,i){var o,a=e.nodeName,s=e.parsedStyle,u=s.opacity,c=void 0===u?Kw.globalAlpha:u,l=s.fillOpacity,A=void 0===l?Kw.fillOpacity:l,f=s.strokeOpacity,d=void 0===f?Kw.strokeOpacity:f,h=s.lineWidth,p=void 0===h?Kw.lineWidth:h,v=s.fill&&!s.fill.isNone,g=s.stroke&&!s.stroke.isNone&&p>0;if(v||g){var y=!pe(s.shadowColor)&&s.shadowBlur>0,m="inner"===s.shadowType,b=0===(null===(o=s.fill)||void 0===o?void 0:o.alpha),w=!(!s.filter||!s.filter.length),x=y&&g&&(a===Jn.PATH||a===Jn.LINE||a===Jn.POLYLINE||b||m),E=null;if(v&&(x||this.applyShadowAndFilterStyleToContext(t,e,y,n),E=Vw(t,"globalAlpha",c*A,n.currentContext),this.fillToContext(t,e,n,r,i),x||this.clearShadowAndFilterStyleForContext(t,y,w,n)),g){var B=!1,k=Vw(t,"globalAlpha",c*d,n.currentContext);if(E=v?E:k,x&&(this.applyShadowAndFilterStyleToContext(t,e,y,n),B=!0,m)){var O=t.globalCompositeOperation;t.globalCompositeOperation="source-atop",this.strokeToContext(t,e,n,r,i),t.globalCompositeOperation=O,this.clearShadowAndFilterStyleForContext(t,y,w,n,!0)}this.strokeToContext(t,e,n,r,i),B&&this.clearShadowAndFilterStyleForContext(t,y,w,n)}null!==E&&Vw(t,"globalAlpha",E,n.currentContext)}}}])}(),Yw=function(t){function e(){return x(this,e),F(this,e,arguments)}return P(e,t),B(e,[{key:"render",value:function(t,e,n,r,i,o){var a=e.fill,s=e.fillRule,u=e.opacity,c=void 0===u?1:u,l=e.fillOpacity,A=void 0===l?1:l,f=e.stroke,d=e.strokeOpacity,h=void 0===d?1:d,p=e.lineWidth,v=void 0===p?1:p,g=e.lineCap,y=e.lineJoin,m=e.shadowType,b=e.shadowColor,w=e.shadowBlur,x=e.filter,E=e.miterLimit,B=a&&!a.isNone,k=f&&!f.isNone&&v>0,O=0===(null==a?void 0:a.alpha),C=!(!x||!x.length),M=!pe(b)&&w>0,S=n.nodeName,F="inner"===m,T=k&&M&&(S===Jn.PATH||S===Jn.LINE||S===Jn.POLYLINE||O||F);B&&(t.globalAlpha=c*A,T||Xw(n,t,M),qw(t,n,a,s,r,i,o,this.imagePool),T||this.clearShadowAndFilter(t,C,M)),k&&(t.globalAlpha=c*h,t.lineWidth=v,pe(E)||(t.miterLimit=E),pe(g)||(t.lineCap=g),pe(y)||(t.lineJoin=y),T&&(F&&(t.globalCompositeOperation="source-atop"),Xw(n,t,!0),F&&(Zw(t,n,f,r,i,o,this.imagePool),t.globalCompositeOperation=Kw.globalCompositeOperation,this.clearShadowAndFilter(t,C,!0))),Zw(t,n,f,r,i,o,this.imagePool))}},{key:"clearShadowAndFilter",value:function(t,e,n){if(n&&(t.shadowColor="transparent",t.shadowBlur=0),e){var r=t.filter;!pe(r)&&r.indexOf("drop-shadow")>-1&&(t.filter=r.replace(/drop-shadow\([^)]*\)/,"").trim()||"none")}}}])}(Ww);function Xw(t,e,n){var r=t.parsedStyle,i=r.filter,o=r.shadowColor,a=r.shadowBlur,s=r.shadowOffsetX,u=r.shadowOffsetY;i&&i.length&&(e.filter=t.style.filter),n&&(e.shadowColor=o.toString(),e.shadowBlur=a||0,e.shadowOffsetX=s||0,e.shadowOffsetY=u||0)}function qw(t,e,n,r,i,o,a,s){var u=arguments.length>8&&void 0!==arguments[8]&&arguments[8];Array.isArray(n)?n.forEach(function(n){t.fillStyle=Rw(n,e,t,s),u||(r?t.fill(r):t.fill())}):(io(n)&&(t.fillStyle=Dw(n,e,t,i,o,a,s)),u||(r?t.fill(r):t.fill()))}function Zw(t,e,n,r,i,o,a){var s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];Array.isArray(n)?n.forEach(function(n){t.strokeStyle=Rw(n,e,t,a),s||t.stroke()}):(io(n)&&(t.strokeStyle=Dw(n,e,t,r,i,o,a)),s||t.stroke())}var Jw=function(t){function e(){return x(this,e),F(this,e,arguments)}return P(e,t),B(e,[{key:"renderDownSampled",value:function(t,e,n,r){var i=r.src,o=r.imageCache;o.downSampled?t.drawImage(o.downSampled,Math.floor(r.drawRect[0]),Math.floor(r.drawRect[1]),Math.ceil(r.drawRect[2]),Math.ceil(r.drawRect[3])):this.imagePool.createDownSampledImage(i,n).then(function(){n.ownerDocument&&(n.dirty(),n.ownerDocument.defaultView.context.renderingService.dirty())}).catch(function(t){console.error(t)})}},{key:"renderTile",value:function(t,e,n,r){var i=r.src,o=r.imageCache,a=r.imageRect,s=r.drawRect,u=o.size,c=t.getTransform(),l=c.a,A=c.b,f=c.c,d=c.d,h=c.e,p=c.f;if(t.resetTransform(),null!=o&&o.gridSize){for(var v=[u[0]/a[2],u[1]/a[3]],g=[o.tileSize[0]/v[0],o.tileSize[1]/v[1]],y=[Math.floor((s[0]-a[0])/g[0]),Math.ceil((s[0]+s[2]-a[0])/g[0])],m=y[0],b=y[1],w=[Math.floor((s[1]-a[1])/g[1]),Math.ceil((s[1]+s[3]-a[1])/g[1])],x=w[1],E=w[0];E<=x;E++)for(var B=m;B<=b;B++){var k=o.tiles[E][B];if(k){var O=[Math.floor(a[0]+k.tileX*g[0]),Math.floor(a[1]+k.tileY*g[1]),Math.ceil(g[0]),Math.ceil(g[1])];t.drawImage(k.data,O[0],O[1],O[2],O[3])}}t.setTransform(l,A,f,d,h,p)}else this.imagePool.createImageTiles(i,[],function(){n.ownerDocument&&(n.dirty(),n.ownerDocument.defaultView.context.renderingService.dirty())},n).catch(function(t){console.error(t)})}},{key:"render",value:function(t,n,r){var i=n.x,o=void 0===i?0:i,a=n.y,s=void 0===a?0:a,u=n.width,c=n.height,l=n.src,A=n.shadowColor,f=n.shadowBlur,d=this.imagePool.getImageSync(l,r),h=null==d?void 0:d.img,p=u,g=c;if(h){p||(p=h.width),g||(g=h.height),Xw(r,t,!pe(A)&&f>0);try{var y=r.ownerDocument.defaultView.getContextService().getDomElement(),m=y.width,b=y.height,w=t.getTransform(),x=w.a,E=w.b,B=function(t,e){var n=Y(_(),[t[0],t[1],0],e),r=Y(_(),[t[0]+t[2],t[1],0],e),i=Y(_(),[t[0],t[1]+t[3],0],e),o=Y(_(),[t[0]+t[2],t[1]+t[3],0],e);return[Math.min(n[0],r[0],i[0],o[0]),Math.min(n[1],r[1],i[1],o[1]),Math.max(n[0],r[0],i[0],o[0])-Math.min(n[0],r[0],i[0],o[0]),Math.max(n[1],r[1],i[1],o[1])-Math.min(n[1],r[1],i[1],o[1])]}([o,s,p,g],at(x,w.c,0,0,E,w.d,0,0,0,0,1,0,w.e,w.f,0,1)),k=function(t,e){var n=v(t,4),r=n[0],i=n[1],o=n[2],a=n[3],s=v(e,4),u=s[0],c=s[1],l=s[2],A=s[3],f=Math.max(r,u),d=Math.max(i,c),h=Math.min(r+o,u+l),p=Math.min(i+a,c+A);return h<=f||p<=d?null:[f,d,h-f,p-d]}([0,0,m,b],B);if(!k)return;if(!r.ownerDocument.defaultView.getConfig().enableLargeImageOptimization)return void e.renderFull(t,n,r,{image:h,drawRect:[o,s,p,g]});if(B[2]/d.size[0]<(d.downSamplingRate||.5))return void this.renderDownSampled(t,n,r,{src:l,imageCache:d,drawRect:[o,s,p,g]});if(!ImagePool.isSupportTile)return void e.renderFull(t,n,r,{image:h,drawRect:[o,s,p,g]});this.renderTile(t,n,r,{src:l,imageCache:d,imageRect:B,drawRect:k})}catch(t){}}}},{key:"drawToContext",value:function(t,e,n,r,i){this.render(t,e.parsedStyle,e)}}],[{key:"renderFull",value:function(t,e,n,r){t.drawImage(r.image,Math.floor(r.drawRect[0]),Math.floor(r.drawRect[1]),Math.ceil(r.drawRect[2]),Math.ceil(r.drawRect[3]))}}])}(Yw),$w=function(t){function e(){return x(this,e),F(this,e,arguments)}return P(e,t),B(e,[{key:"render",value:function(t,e,n,r,i,o){n.getBounds();var a=e.lineWidth,s=void 0===a?1:a,u=e.textAlign,c=void 0===u?"start":u,l=e.textBaseline,A=void 0===l?"alphabetic":l,f=e.lineJoin,d=void 0===f?"miter":f,h=e.miterLimit,p=void 0===h?10:h,v=e.letterSpacing,g=void 0===v?0:v,y=e.stroke,m=e.fill,b=e.fillRule,w=e.fillOpacity,x=void 0===w?1:w,E=e.strokeOpacity,B=void 0===E?1:E,k=e.opacity,O=void 0===k?1:k,C=e.metrics,M=e.x,S=void 0===M?0:M,F=e.y,T=void 0===F?0:F,P=e.dx,I=e.dy,N=e.shadowColor,L=e.shadowBlur,_=e.textDecorationLine,Q=C.font,U=C.lines,j=C.height,D=C.lineHeight,R=C.lineMetrics;t.font=Q,t.lineWidth=s,t.textAlign="middle"===c?"center":c;var H=A;"alphabetic"===H&&(H="bottom"),t.lineJoin=d,pe(p)||(t.miterLimit=p);var z=T;"middle"===A?z+=-j/2-D/2:"bottom"===A||"alphabetic"===A||"ideographic"===A?z+=-j:"top"!==A&&"hanging"!==A||(z+=-D);var K=S+(P||0);z+=I||0,1===U.length&&("bottom"===H?(H="middle",z-=.5*j):"top"===H&&(H="middle",z+=.5*j)),t.textBaseline=H,Xw(n,t,!pe(N)&&L>0);for(var G=0;G<U.length;G++){var V=s/2+K;z+=D,pe(y)||y.isNone||!s||this.drawLetterSpacing(t,n,U[G],R[G],c,V,z,g,m,b,x,y,B,O,!0,r,i,o),pe(m)||this.drawLetterSpacing(t,n,U[G],R[G],c,V,z,g,m,b,x,y,B,O,!1,r,i,o)}_&&"none"!==_&&this.drawTextDecorations(t,e,n,U,D,K,T+(I||0),r,i,o)}},{key:"drawLetterSpacing",value:function(t,e,n,r,i,o,a,s,u,c,l,A,f,d,h,p,v,g){if(0!==s){var y=t.textAlign;t.textAlign="left";var m=o;"center"===i||"middle"===i?m=o-r.width/2:"right"!==i&&"end"!==i||(m=o-r.width);for(var b=Array.from(n),w=t.measureText(n).width,x=0,E=0;E<b.length;++E){var B=b[E];h?this.strokeText(t,e,B,m,a,A,f,p,v,g):this.fillText(t,e,B,m,a,u,c,l,d,p,v,g),m+=w-(x=t.measureText(n.substring(E+1)).width)+s,w=x}t.textAlign=y}else h?this.strokeText(t,e,n,o,a,A,f,p,v,g):this.fillText(t,e,n,o,a,u,c,l,d,p,v,g)}},{key:"fillText",value:function(t,e,n,r,i,o,a,s,u,c,l,A){var f;qw(t,e,o,a,c,l,A,this.imagePool,!0);var d=!pe(s)&&1!==s;d&&(f=t.globalAlpha,t.globalAlpha=s*u),t.fillText(n,r,i),d&&(t.globalAlpha=f)}},{key:"strokeText",value:function(t,e,n,r,i,o,a,s,u,c){var l;Zw(t,e,o,s,u,c,this.imagePool,!0);var A=!pe(a)&&1!==a;A&&(l=t.globalAlpha,t.globalAlpha=a),t.strokeText(n,r,i),A&&(t.globalAlpha=l)}},{key:"drawTextDecorations",value:function(t,e,n,r,i,o,a,s,u,c){var l=e.textDecorationLine,A=e.textDecorationColor,f=e.textDecorationStyle,d=e.textDecorationThickness,h=void 0===d?1:d,p=e.textAlign,v=void 0===p?"start":p,g=e.lineWidth,y=void 0===g?1:g,m=e.metrics;if(l&&"none"!==l){var b=m.lineMetrics,w=l.split(" ");switch(t.lineWidth=h,A&&(t.strokeStyle="rgba(".concat(A.r,", ").concat(A.g,", ").concat(A.b,", ").concat(A.alpha,")")),f){case"dashed":t.setLineDash([5,5]);break;case"dotted":t.setLineDash([2,2]);break;default:t.setLineDash([])}var x=a,E=e.textBaseline,B=void 0===E?"alphabetic":E;"middle"===B?x+=-m.height/2-i/2:"bottom"===B||"alphabetic"===B||"ideographic"===B?x+=-m.height:"top"!==B&&"hanging"!==B||(x+=-i);for(var k=0;k<r.length;k++){x+=i;var O=b[k];if(O){var C=y/2,M=o,S=o+O.width;"center"===v||"middle"===v?(M=o-O.width/2,S=o+O.width/2):"right"!==v&&"end"!==v||(M=o-O.width,S=o),M+=C,S+=C;var F,T=qn(w);try{for(T.s();!(F=T.n()).done;){var P=F.value,I=x;switch(P){case"underline":I+=2;break;case"overline":I-=i-2;break;case"line-through":I-=i/2;break;default:continue}"wavy"===f?this.drawWavyLine(t,M,S,I):(t.beginPath(),t.moveTo(M,I),t.lineTo(S,I),t.stroke())}}catch(t){T.e(t)}finally{T.f()}}}t.setLineDash([])}}},{key:"drawWavyLine",value:function(t,e,n,r){var i=Math.floor((n-e)/10);t.beginPath(),t.moveTo(e,r);for(var o=0;o<i;o++){var a=e+10*o+2.5,s=r+2,u=e+10*o+5,c=r;t.quadraticCurveTo(a,s,u,c);var l=e+10*o+7.5,A=r-2,f=e+10*(o+1),d=r;t.quadraticCurveTo(l,A,f,d)}t.stroke()}},{key:"drawToContext",value:function(t,e,n,r,i){this.render(t,e.parsedStyle,e,e.ownerDocument.defaultView.context,r,i)}}])}(Yw),tx=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return x(this,e),(t=F(this,e)).name="canvas-renderer",t.options=n,t}return P(e,t),B(e,[{key:"init",value:function(){var t,e=w({dirtyObjectNumThreshold:500,dirtyObjectRatioThreshold:.8},this.options),n=this.context.imagePool,r=new Yw(n),i=(m(m(m(m(m(m(m(m(m(m(t={},Jn.CIRCLE,r),Jn.ELLIPSE,r),Jn.RECT,r),Jn.IMAGE,new Jw(n)),Jn.TEXT,new $w(n)),Jn.LINE,r),Jn.POLYLINE,r),Jn.POLYGON,r),Jn.PATH,r),Jn.GROUP,void 0),m(m(m(t,Jn.HTML,void 0),Jn.MESH,void 0),Jn.FRAGMENT,void 0));this.context.defaultStyleRendererFactory=i,this.context.styleRendererFactory=i,this.addRenderingPlugin(new jw(e))}},{key:"destroy",value:function(){this.removeAllRenderingPlugins(),delete this.context.defaultStyleRendererFactory,delete this.context.styleRendererFactory}}])}(tr),ex=_(),nx=_(),rx=_(),ix=rt(),ox=function(){function t(){var e=this;x(this,t),this.isHit=function(t,n,r,i){var o=e.context.pointInPathPickerFactory[t.nodeName];if(o){var a=lt(ix,r),s=Y(nx,R(rx,n[0],n[1],0),a);if(o(t,new lr(s[0],s[1]),i,e.isPointInPath,e.context,e.runtime))return!0}return!1},this.isPointInPath=function(t,n){var r=e.runtime.offscreenCanvasCreator.getOrCreateContext(e.context.config.offscreenCanvas),i=e.context.pathGeneratorFactory[t.nodeName];return i&&(r.beginPath(),i(r,t.parsedStyle),r.closePath()),r.isPointInPath(n.x,n.y)}}return B(t,[{key:"apply",value:function(e,n){var r,i=this,o=e.renderingService,a=e.renderingContext;this.context=e,this.runtime=n;var s=null===(r=a.root)||void 0===r?void 0:r.ownerDocument;o.hooks.pick.tapPromise(t.tag,function(){var t=Xn(Wn().mark(function t(e){return Wn().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",i.pick(s,e));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()),o.hooks.pickSync.tap(t.tag,function(t){return i.pick(s,t)})}},{key:"pick",value:function(t,e){var n,r=e.topmost,i=e.position,o=i.x,a=i.y,s=R(ex,o,a,0),u=[],c=qn(t.elementsFromBBox(s[0],s[1],s[0],s[1]));try{for(c.s();!(n=c.n()).done;){var l=n.value,A=l.getWorldTransform();if(this.isHit(l,s,A,!1)){var f=Qa(l);if(f){var d=f.parsedStyle.clipPath;if(this.isHit(d,s,d.getWorldTransform(),!0)){if(r)return e.picked=[l],e;u.push(l)}}else{if(r)return e.picked=[l],e;u.push(l)}}}}catch(t){c.e(t)}finally{c.f()}return e.picked=u,e}}])}();function ax(t,e,n){var r=t.parsedStyle,i=r.cx,o=void 0===i?0:i,a=r.cy,s=void 0===a?0:a,u=r.r,c=r.fill,l=r.stroke,A=r.lineWidth,f=void 0===A?1:A,d=r.increasedLineWidthForHitTesting,h=void 0===d?0:d,p=r.pointerEvents,g=void 0===p?"auto":p,y=(f+h)/2,m=En(o,s,e.x,e.y),b=v(Ha(g,c,l),2),w=b[0],x=b[1];return w&&x||n?m<=u+y:w?m<=u:!!x&&m>=u-y&&m<=u+y}function sx(t,e,n,r){return t/(n*n)+e/(r*r)}function ux(t,e,n){var r=t.parsedStyle,i=r.cx,o=void 0===i?0:i,a=r.cy,s=void 0===a?0:a,u=r.rx,c=r.ry,l=r.fill,A=r.stroke,f=r.lineWidth,d=void 0===f?1:f,h=r.increasedLineWidthForHitTesting,p=void 0===h?0:h,g=r.pointerEvents,y=void 0===g?"auto":g,m=e.x,b=e.y,w=v(Ha(y,l,A),2),x=w[0],E=w[1],B=(d+p)/2,k=(m-o)*(m-o),O=(b-s)*(b-s);return x&&E||n?sx(k,O,u+B,c+B)<=1:x?sx(k,O,u,c)<=1:!!E&&sx(k,O,u-B,c-B)>=1&&sx(k,O,u+B,c+B)<=1}function cx(t,e,n,r,i,o){return i>=t&&i<=t+n&&o>=e&&o<=e+r}function lx(t,e,n,r,i,o,a,s){var u=(Math.atan2(s-e,a-t)+2*Math.PI)%(2*Math.PI),c={x:t+n*Math.cos(u),y:e+n*Math.sin(u)};return En(c.x,c.y,a,s)<=o/2}function Ax(t,e,n,r,i,o,a){var s=Math.min(t,n),u=Math.max(t,n),c=Math.min(e,r),l=Math.max(e,r),A=i/2;return o>=s-A&&o<=u+A&&a>=c-A&&a<=l+A&&function(t,e,n,r,i,o){var a=[n-t,r-e];if(function(t,e){return t[0]===e[0]&&t[1]===e[1]}(a,[0,0]))return Math.sqrt((i-t)*(i-t)+(o-e)*(o-e));var s=[-a[1],a[0]];!function(t,e){var n=e[0],r=e[1],i=n*n+r*r;i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i}(s,s);var u=[i-t,o-e];return Math.abs(function(t,e){return t[0]*e[0]+t[1]*e[1]}(u,s))}(t,e,n,r,o,a)<=i/2}function fx(t,e,n,r,i){var o=t.length;if(o<2)return!1;for(var a=0;a<o-1;a++)if(Ax(t[a][0],t[a][1],t[a+1][0],t[a+1][1],e,n,r))return!0;if(i){var s=t[0],u=t[o-1];if(Ax(s[0],s[1],u[0],u[1],e,n,r))return!0}return!1}function dx(t){return Math.abs(t)<1e-6?0:t<0?-1:1}function hx(t,e,n){return(n[0]-t[0])*(e[1]-t[1])===(e[0]-t[0])*(n[1]-t[1])&&Math.min(t[0],e[0])<=n[0]&&n[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=n[1]&&n[1]<=Math.max(t[1],e[1])}function px(t,e,n){var r=!1,i=t.length;if(i<=2)return!1;for(var o=0;o<i;o++){var a=t[o],s=t[(o+1)%i];if(hx(a,s,[e,n]))return!0;dx(a[1]-n)>0!=dx(s[1]-n)>0&&dx(e-(n-a[1])*(a[0]-s[0])/(a[1]-s[1])-a[0])<0&&(r=!r)}return r}function vx(t,e,n){for(var r=!1,i=0;i<t.length&&!(r=px(t[i],e,n));i++);return r}function gx(t,e,n){var r=t.parsedStyle,i=r.x1,o=r.y1,a=r.x2,s=r.y2,u=r.lineWidth,c=void 0===u?1:u,l=r.increasedLineWidthForHitTesting,A=void 0===l?0:l,f=r.pointerEvents;return!(!v(Ha(void 0===f?"auto":f,r.fill,r.stroke),2)[1]&&!n||!c)&&Ax(i,o,a,s,c+A,e.x,e.y)}function yx(t,e,n,r,i,o){var a=t.parsedStyle,s=a.lineWidth,u=void 0===s?1:s,c=a.increasedLineWidthForHitTesting,l=void 0===c?0:c,A=a.stroke,f=a.fill,d=a.d,h=a.pointerEvents,p=void 0===h?"auto":h,g=d.segments,y=d.hasArc,m=d.polylines,b=d.polygons,w=v(Ha(p,(null==b?void 0:b.length)&&f,A),2),x=w[0],E=w[1],B=Co(t),k=!1;return x||n?k=y?r(t,e):vx(b,e.x,e.y)||vx(m,e.x,e.y):((E||n)&&(k=function(t,e,n,r,i){for(var o=!1,a=e/2,s=0;s<t.length;s++){var u=t[s],c=u.currentPoint,l=u.params,A=u.prePoint,f=u.box;if(!f||cx(f.x-a,f.y-a,f.width+e,f.height+e,n,r))switch(u.command){case"L":case"Z":if(o=Ax(A[0],A[1],c[0],c[1],e,n,r))return!0;break;case"Q":if(o=Un(A[0],A[1],l[1],l[2],l[3],l[4],n,r)<=e/2)return!0;break;case"C":if(o=Nn(A[0],A[1],l[1],l[2],l[3],l[4],l[5],l[6],n,r,i)<=e/2)return!0;break;case"A":u.cubicParams||(u.cubicParams=un(A[0],A[1],l[1],l[2],l[3],l[4],l[5],l[6],l[7],void 0));for(var d=u.cubicParams,h=A,p=0;p<d.length;p+=6){var v=Nn(h[0],h[1],d[p],d[p+1],d[p+2],d[p+3],d[p+4],d[p+5],n,r,i);if(h=[d[p+4],d[p+5]],o=v<=e/2)return!0}}}return o}(g,u+l,e.x,e.y,B)),k)}function mx(t,e,n){var r=t.parsedStyle,i=r.stroke,o=r.fill,a=r.lineWidth,s=void 0===a?1:a,u=r.increasedLineWidthForHitTesting,c=void 0===u?0:u,l=r.points,A=r.pointerEvents,f=v(Ha(void 0===A?"auto":A,o,i),2),d=f[0],h=!1;return(f[1]||n)&&(h=fx(l.points,s+c,e.x,e.y,!0)),h||!d&&!n||(h=px(l.points,e.x,e.y)),h}function bx(t,e,n){var r=t.parsedStyle,i=r.lineWidth,o=void 0===i?1:i,a=r.increasedLineWidthForHitTesting,s=void 0===a?0:a,u=r.points,c=r.pointerEvents;return!(!v(Ha(void 0===c?"auto":c,r.fill,r.stroke),2)[1]&&!n||!o)&&fx(u.points,o+s,e.x,e.y,!1)}function wx(t,e,n,r,i){var o=t.parsedStyle,a=o.radius,s=o.fill,u=o.stroke,c=o.lineWidth,l=void 0===c?1:c,A=o.increasedLineWidthForHitTesting,f=void 0===A?0:A,d=o.x,h=void 0===d?0:d,p=o.y,g=void 0===p?0:p,y=o.width,m=o.height,b=o.pointerEvents,w=v(Ha(void 0===b?"auto":b,s,u),2),x=w[0],E=w[1],B=a&&a.some(function(t){return 0!==t}),k=l+f;if(B){var O=!1;return(E||n)&&(O=function(t,e,n,r,i,o,a,s){var u=v(i,4),c=u[0],l=u[1],A=u[2],f=u[3];return Ax(t+c,e,t+n-l,e,o,a,s)||Ax(t+n,e+l,t+n,e+r-A,o,a,s)||Ax(t+n-A,e+r,t+f,e+r,o,a,s)||Ax(t,e+r-f,t,e+c,o,a,s)||lx(t+n-l,e+l,l,Math.PI,Math.PI,o,a,s)||lx(t+n-A,e+r-A,A,0,Math.PI,o,a,s)||lx(t+f,e+r-f,f,Math.PI,Math.PI,o,a,s)||lx(t+c,e+c,c,Math.PI,Math.PI,o,a,s)}(h,g,y,m,a.map(function(t){return ge(t,0,Math.min(Math.abs(y)/2,Math.abs(m)/2))}),k,e.x,e.y)),O||!x&&!n||(O=r(t,e)),O}var C=k/2;return x&&E||n?cx(h-C,g-C,y+C,m+C,e.x,e.y):x?cx(h,g,y,m,e.x,e.y):!!E&&function(t,e,n,r,i,o,a){var s=i/2;return cx(t-s,e-s,n,i,o,a)||cx(t+n-s,e-s,i,r,o,a)||cx(t+s,e+r-s,n,i,o,a)||cx(t-s,e+s,i,r,o,a)}(h,g,y,m,k,e.x,e.y)}function xx(t,e,n,r,i,o){var a=t.parsedStyle,s=a.pointerEvents,u=void 0===s?"auto":s,c=a.x,l=void 0===c?0:c,A=a.y,f=void 0===A?0:A,d=a.width,h=a.height;if("non-transparent-pixel"===u){var p=i.config.offscreenCanvas,v=o.offscreenCanvasCreator.getOrCreateCanvas(p),g=o.offscreenCanvasCreator.getOrCreateContext(p,{willReadFrequently:!0});return v.width=d,v.height=h,i.defaultStyleRendererFactory[Jn.IMAGE].render(g,w(w({},t.parsedStyle),{},{x:0,y:0}),t,void 0,void 0,void 0),g.getImageData(e.x-l,e.y-f,1,1).data.every(function(t){return 0!==t})}return!0}function Ex(t,e,n,r){var i=t.getGeometryBounds();return e.x>=i.min[0]&&e.y>=i.min[1]&&e.x<=i.max[0]&&e.y<=i.max[1]}ox.tag="CanvasPicker";var Bx=function(t){function e(){var t;x(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=F(this,e,[].concat(r))).name="canvas-picker",t}return P(e,t),B(e,[{key:"init",value:function(){var t,e=(m(m(m(m(m(m(m(m(m(m(t={},Jn.CIRCLE,ax),Jn.ELLIPSE,ux),Jn.RECT,wx),Jn.LINE,gx),Jn.POLYLINE,bx),Jn.POLYGON,mx),Jn.PATH,yx),Jn.TEXT,Ex),Jn.GROUP,null),Jn.IMAGE,xx),m(m(t,Jn.HTML,null),Jn.MESH,null));this.context.pointInPathPickerFactory=e,this.addRenderingPlugin(new ox)}},{key:"destroy",value:function(){delete this.context.pointInPathPickerFactory,this.removeAllRenderingPlugins()}}])}(tr);function kx(t,e){var n=e.cx,r=void 0===n?0:n,i=e.cy,o=void 0===i?0:i,a=e.r;t.arc(r,o,a,0,2*Math.PI,!1)}function Ox(t,e){var n=e.cx,r=void 0===n?0:n,i=e.cy,o=void 0===i?0:i,a=e.rx,s=e.ry;if(t.ellipse)t.ellipse(r,o,a,s,0,0,2*Math.PI,!1);else{var u=a>s?a:s,c=a>s?1:a/s,l=a>s?s/a:1;t.save(),t.scale(c,l),t.arc(r,o,u,0,2*Math.PI)}}function Cx(t,e){var n,r,i=e.x1,o=e.y1,a=e.x2,s=e.y2,u=e.markerStart,c=e.markerEnd,l=e.markerStartOffset,A=e.markerEndOffset,f=0,d=0,h=0,p=0,v=0;u&&Ou(u)&&l&&(n=a-i,r=s-o,v=Math.atan2(r,n),f=Math.cos(v)*(l||0),d=Math.sin(v)*(l||0)),c&&Ou(c)&&A&&(n=i-a,r=o-s,v=Math.atan2(r,n),h=Math.cos(v)*(A||0),p=Math.sin(v)*(A||0)),t.moveTo(i+f,o+d),t.lineTo(a+h,s+p)}function Mx(t,e){var n,r,i=e.markerStart,o=e.markerEnd,a=e.markerStartOffset,s=e.markerEndOffset,u=e.d,c=u.absolutePath,l=u.segments,A=0,f=0,d=0,h=0,p=0;if(i&&Ou(i)&&a){var g=v(i.parentNode.getStartTangent(),2),y=g[0],m=g[1];n=y[0]-m[0],r=y[1]-m[1],p=Math.atan2(r,n),A=Math.cos(p)*(a||0),f=Math.sin(p)*(a||0)}if(o&&Ou(o)&&s){var b=v(o.parentNode.getEndTangent(),2),w=b[0],x=b[1];n=w[0]-x[0],r=w[1]-x[1],p=Math.atan2(r,n),d=Math.cos(p)*(s||0),h=Math.sin(p)*(s||0)}for(var E=0;E<c.length;E++){var B=c[E],k=B[0],O=c[E+1],C=0===E&&(0!==A||0!==f),M=(E===c.length-1||O&&("M"===O[0]||"Z"===O[0]))&&0!==d&&0!==h,S=v(C?[A,f]:[0,0],2),F=S[0],T=S[1],P=v(M?[d,h]:[0,0],2),I=P[0],N=P[1];switch(k){case"M":t.moveTo(B[1]+F,B[2]+T);break;case"L":t.lineTo(B[1]+I,B[2]+N);break;case"Q":t.quadraticCurveTo(B[1],B[2],B[3]+I,B[4]+N);break;case"C":t.bezierCurveTo(B[1],B[2],B[3],B[4],B[5]+I,B[6]+N);break;case"A":var L=l[E].arcParams,_=L.cx,Q=L.cy,U=L.rx,j=L.ry,D=L.startAngle,R=L.endAngle,H=L.xRotation,z=L.sweepFlag;if(t.ellipse)t.ellipse(_,Q,U,j,H,D,R,!!(1-z));else{var K=U>j?U:j,G=U>j?1:U/j,V=U>j?j/U:1;t.translate(_,Q),t.rotate(H),t.scale(G,V),t.arc(0,0,K,D,R,!!(1-z)),t.scale(1/G,1/V),t.rotate(-H),t.translate(-_,-Q)}M&&t.lineTo(B[6]+d,B[7]+h);break;case"Z":t.closePath()}}}function Sx(t,e){var n,r,i=e.markerStart,o=e.markerEnd,a=e.markerStartOffset,s=e.markerEndOffset,u=e.points.points,c=u.length,l=u[0][0],A=u[0][1],f=u[c-1][0],d=u[c-1][1],h=0,p=0,v=0,g=0,y=0;i&&Ou(i)&&a&&(n=u[1][0]-u[0][0],r=u[1][1]-u[0][1],y=Math.atan2(r,n),h=Math.cos(y)*(a||0),p=Math.sin(y)*(a||0)),o&&Ou(o)&&s&&(n=u[c-1][0]-u[0][0],r=u[c-1][1]-u[0][1],y=Math.atan2(r,n),v=Math.cos(y)*(s||0),g=Math.sin(y)*(s||0)),t.moveTo(l+(h||v),A+(p||g));for(var m=1;m<c-1;m++){var b=u[m];t.lineTo(b[0],b[1])}t.lineTo(f,d)}function Fx(t,e){var n,r,i=e.markerStart,o=e.markerEnd,a=e.markerStartOffset,s=e.markerEndOffset,u=e.points.points,c=u.length,l=u[0][0],A=u[0][1],f=u[c-1][0],d=u[c-1][1],h=0,p=0,v=0,g=0,y=0;i&&Ou(i)&&a&&(n=u[1][0]-u[0][0],r=u[1][1]-u[0][1],y=Math.atan2(r,n),h=Math.cos(y)*(a||0),p=Math.sin(y)*(a||0)),o&&Ou(o)&&s&&(n=u[c-2][0]-u[c-1][0],r=u[c-2][1]-u[c-1][1],y=Math.atan2(r,n),v=Math.cos(y)*(s||0),g=Math.sin(y)*(s||0)),t.moveTo(l+h,A+p);for(var m=1;m<c-1;m++){var b=u[m];t.lineTo(b[0],b[1])}t.lineTo(f+v,d+g)}function Tx(t,e){var n=e.x,r=void 0===n?0:n,i=e.y,o=void 0===i?0:i,a=e.radius,s=e.width,u=e.height,c=s,l=u,A=a&&a.some(function(t){return 0!==t});if(A){var f=s>0?1:-1,d=u>0?1:-1,h=f+d===0,p=a.map(function(t){return ge(t,0,Math.min(Math.abs(c)/2,Math.abs(l)/2))}),g=v(p,4),y=g[0],m=g[1],b=g[2],w=g[3];t.moveTo(f*y+r,o),t.lineTo(c-f*m+r,o),0!==m&&t.arc(c-f*m+r,d*m+o,m,-d*Math.PI/2,f>0?0:Math.PI,h),t.lineTo(c+r,l-d*b+o),0!==b&&t.arc(c-f*b+r,l-d*b+o,b,f>0?0:Math.PI,d>0?Math.PI/2:1.5*Math.PI,h),t.lineTo(f*w+r,l+o),0!==w&&t.arc(f*w+r,l-d*w+o,w,d>0?Math.PI/2:-Math.PI/2,f>0?Math.PI:0,h),t.lineTo(r,d*y+o),0!==y&&t.arc(f*y+r,d*y+o,y,f>0?Math.PI:0,d>0?1.5*Math.PI:Math.PI/2,h)}else t.rect(r,o,c,l)}var Px=function(t){function e(){var t;x(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=F(this,e,[].concat(r))).name="canvas-path-generator",t}return P(e,t),B(e,[{key:"init",value:function(){var t,e=(m(m(m(m(m(m(m(m(m(m(t={},Jn.CIRCLE,kx),Jn.ELLIPSE,Ox),Jn.RECT,Tx),Jn.LINE,Cx),Jn.POLYLINE,Fx),Jn.POLYGON,Sx),Jn.PATH,Mx),Jn.TEXT,void 0),Jn.GROUP,void 0),Jn.IMAGE,void 0),m(m(m(t,Jn.HTML,void 0),Jn.MESH,void 0),Jn.FRAGMENT,void 0));this.context.pathGeneratorFactory=e}},{key:"destroy",value:function(){delete this.context.pathGeneratorFactory}}])}(tr),Ix=function(){return B(function t(e){x(this,t),this.renderingContext=e.renderingContext,this.canvasConfig=e.config},[{key:"init",value:function(){var t=this.canvasConfig,e=t.container,n=t.canvas;if(n)this.$canvas=n,e&&n.parentElement!==e&&e.appendChild(n),this.$container=n.parentElement,this.canvasConfig.container=this.$container;else if(e&&(this.$container=ve(e)?document.getElementById(e):e,this.$container)){var r=document.createElement("canvas");this.$container.appendChild(r),this.$container.style.position||(this.$container.style.position="relative"),this.$canvas=r}this.context=this.$canvas.getContext("2d"),this.resize(this.canvasConfig.width,this.canvasConfig.height)}},{key:"getContext",value:function(){return this.context}},{key:"getDomElement",value:function(){return this.$canvas}},{key:"getDPR",value:function(){return this.dpr}},{key:"getBoundingClientRect",value:function(){if(this.$canvas.getBoundingClientRect)return this.$canvas.getBoundingClientRect()}},{key:"destroy",value:function(){this.$container&&this.$canvas&&this.$canvas.parentNode&&this.$container.removeChild(this.$canvas)}},{key:"resize",value:function(t,e){var n=this.canvasConfig.devicePixelRatio;this.dpr=n,this.$canvas&&(this.$canvas.width=this.dpr*t,this.$canvas.height=this.dpr*e,function(t,e,n){Na&&t.style&&(t.style.width=e+"px",t.style.height=n+"px")}(this.$canvas,t,e)),this.renderingContext.renderReasons.add(Us.CAMERA_CHANGED)}},{key:"applyCursorStyle",value:function(t){this.$container&&this.$container.style&&(this.$container.style.cursor=t)}},{key:"toDataURL",value:(t=Xn(Wn().mark(function t(){var e,n,r,i=arguments;return Wn().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=(e=i.length>0&&void 0!==i[0]?i[0]:{}).type,r=e.encoderOptions,t.abrupt("return",this.context.canvas.toDataURL(n,r));case 1:case"end":return t.stop()}},t,this)})),function(){return t.apply(this,arguments)})}]);var t}(),Nx=function(t){function e(){var t;x(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=F(this,e,[].concat(r))).name="canvas-context-register",t}return P(e,t),B(e,[{key:"init",value:function(){this.context.ContextService=Ix}},{key:"destroy",value:function(){delete this.context.ContextService}}])}(tr),Lx=function(t){function e(t){var n;return x(this,e),(n=F(this,e,[t])).registerPlugin(new Nx),n.registerPlugin(new wc.Plugin),n.registerPlugin(new Px),n.registerPlugin(new tx),n.registerPlugin(new Cc.Plugin),n.registerPlugin(new Bx),n.registerPlugin(new Bc.Plugin),n}return P(e,t),B(e)}(er);const _x=function(t,e){if(t)if(tn(t))for(var n=0,r=t.length;n<r&&!1!==e(t[n],n);n++);else if(bn(t))for(var i in t)if(t.hasOwnProperty(i)&&!1===e(t[i],i))break};var Qx=Object.prototype.hasOwnProperty;const Ux=function(t,e){if(null===t||!Vm(t))return{};var n={};return _x(e,function(e){Qx.call(t,e)&&(n[e]=t[e])}),n};var jx=function(t){function e(t){var n;return x(this,e),(n=F(this,e,[Object.assign(Object.assign({},t),{style:Object.assign({},e.defaultStyleProps,t.style)})])).rootPointerEvent=new Ts(null),n.forwardEvents=function(t){var e=n.context.canvas,r=e.context.renderingContext.root.ownerDocument.defaultView;n.normalizeToPointerEvent(t,r).forEach(function(i){var o=n.bootstrapEvent(n.rootPointerEvent,i,r,t);Vb(e.context.eventService,"mappingTable.pointerupoutside",[]),e.context.eventService.mapEvent(o)})},n}return P(e,t),B(e,[{key:"eventService",get:function(){return this.context.canvas.context.eventService}},{key:"events",get:function(){return[ty.CLICK,ty.POINTER_DOWN,ty.POINTER_MOVE,ty.POINTER_UP,ty.POINTER_OVER,ty.POINTER_LEAVE]}},{key:"getDomElement",value:function(){return this.getShape("key").getDomElement()}},{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parsedAttributes,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;this.drawKeyShape(t,e),this.drawPortShapes(t,e)}},{key:"getKeyStyle",value:function(t){var e=Ux(t,["dx","dy","innerHTML","pointerEvents","cursor"]),n=e.dx,r=void 0===n?0:n,i=e.dy,o=void 0===i?0:i,a=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(e,["dx","dy"]),s=v(this.getSize(t),2),u=s[0],c=s[1];return Object.assign(Object.assign({x:r,y:o},a),{width:u,height:c})}},{key:"drawKeyShape",value:function(t,e){var n=this.getKeyStyle(t),r=n.x,i=n.y,o=n.width,a=void 0===o?0:o,s=n.height,u=void 0===s?0:s,c=this.upsert("key-container",Yu,{x:r,y:i,width:a,height:u,opacity:0},e);return this.upsert("key",Uu,n,c)}},{key:"connectedCallback",value:function(){var t=this;if(this.context.canvas.getRenderer("main")instanceof Lx){var e=this.getDomElement();this.events.forEach(function(n){e.addEventListener(n,t.forwardEvents)})}}},{key:"attributeChangedCallback",value:function(t,e,n){"zIndex"===t&&e!==n&&(this.getDomElement().style.zIndex=n)}},{key:"destroy",value:function(){var t=this,n=this.getDomElement();this.events.forEach(function(e){n.removeEventListener(e,t.forwardEvents)}),xn(e,"destroy",this,3)([])}},{key:"normalizeToPointerEvent",value:function(t,e){var n=[];if(e.isTouchEvent(t))for(var r=0;r<t.changedTouches.length;r++){var i=t.changedTouches[r];pn(i.button)&&(i.button=0),pn(i.buttons)&&(i.buttons=1),pn(i.isPrimary)&&(i.isPrimary=1===t.touches.length&&"touchstart"===t.type),pn(i.width)&&(i.width=i.radiusX||1),pn(i.height)&&(i.height=i.radiusY||1),pn(i.tiltX)&&(i.tiltX=0),pn(i.tiltY)&&(i.tiltY=0),pn(i.pointerType)&&(i.pointerType="touch"),pn(i.pointerId)&&(i.pointerId=i.identifier||0),pn(i.pressure)&&(i.pressure=i.force||.5),pn(i.twist)&&(i.twist=0),pn(i.tangentialPressure)&&(i.tangentialPressure=0),i.isNormalized=!0,i.type=t.type,n.push(i)}else if(e.isMouseEvent(t)){var o=t;pn(o.isPrimary)&&(o.isPrimary=!0),pn(o.width)&&(o.width=1),pn(o.height)&&(o.height=1),pn(o.tiltX)&&(o.tiltX=0),pn(o.tiltY)&&(o.tiltY=0),pn(o.pointerType)&&(o.pointerType="mouse"),pn(o.pointerId)&&(o.pointerId=1),pn(o.pressure)&&(o.pressure=.5),pn(o.twist)&&(o.twist=0),pn(o.tangentialPressure)&&(o.tangentialPressure=0),o.isNormalized=!0,n.push(o)}else n.push(t);return n}},{key:"transferMouseData",value:function(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.altKey=e.altKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.ctrlKey=e.ctrlKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.screen.x=e.screenX,t.screen.y=e.screenY,t.relatedTarget=null}},{key:"bootstrapEvent",value:function(t,e,n,r){t.view=n,t.originalEvent=null,t.nativeEvent=r,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e);var i=this.getViewportXY(e),o=i.x,a=i.y;t.viewport.x=o,t.viewport.y=a;var s=v(this.context.canvas.getCanvasByViewport([o,a]),2),u=s[0],c=s[1];return t.canvas.x=u,t.canvas.y=c,t.global.copyFrom(t.canvas),t.offset.copyFrom(t.canvas),t.isTrusted=r.isTrusted,"pointerleave"===t.type&&(t.type="pointerout"),t}},{key:"getViewportXY",value:function(t){var e,n,r=t.offsetX,i=t.offsetY,o=t.clientX,a=t.clientY;if(pe(r)||pe(i)){var s=this.eventService.client2Viewport({x:o,y:a});e=s.x,n=s.y}else e=r,n=i;return{x:e,y:n}}},{key:"onframe",value:function(){xn(e,"onframe",this,3)([]);var t=this.attributes.opacity;this.getDomElement().style.opacity="".concat(t)}}])}(Ow);jx.defaultStyleProps={size:[160,80],halo:!1,icon:!1,label:!1,pointerEvents:"auto"};var Dx=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},Rx=function(t){function e(t){return x(this,e),F(this,e,[tw({style:e.defaultStyleProps},t)])}return P(e,t),B(e,[{key:"getKeyStyle",value:function(t){var n=v(this.getSize(t),2),r=n[0],i=n[1],o=xn(e,"getKeyStyle",this,3)([t]),a=o.fillOpacity,s=o.opacity,u=void 0===s?a:s,c=Dx(o,["fillOpacity","opacity"]);return Object.assign(Object.assign({opacity:u},c),{width:r,height:i,x:-r/2,y:-i/2})}},{key:"getBounds",value:function(){return this.getShape("key").getBounds()}},{key:"getHaloStyle",value:function(t){if(!1===t.halo)return!1;var e=this.getShape("key").attributes,n=(e.fill,e.stroke,Dx(e,["fill","stroke"]),Xb(this.getGraphicStyle(t),"halo")),r=Number(n.lineWidth),i=v(Zm(this.getSize(t),[r,r]),2),o=i[0],a=i[1],s=n.lineWidth,u={fill:"transparent",lineWidth:s/2,width:o-s/2,height:a-s/2,x:-(o-s/2)/2,y:-(a-s/2)/2};return Object.assign(Object.assign({},n),u)}},{key:"getIconStyle",value:function(t){var n=xn(e,"getIconStyle",this,3)([t]),r=v(this.getSize(t),2),i=r[0],o=r[1];return!!n&&Object.assign({width:i*_b,height:o*_b},n)}},{key:"drawKeyShape",value:function(t,e){var n=this.upsert("key",yw,this.getKeyStyle(t),e);return ww(this),n}},{key:"drawHaloShape",value:function(t,e){this.upsert("halo",Yu,this.getHaloStyle(t),e)}},{key:"update",value:function(t){xn(e,"update",this,3)([t]),t&&("x"in t||"y"in t||"z"in t)&&xw(this)}}])}(Ow);Rx.defaultStyleProps={size:32};var Hx=function(t){function e(t){return x(this,e),F(this,e,[t])}return P(e,t),B(e,[{key:"getKeyStyle",value:function(t){var n=v(this.getSize(t),2),r=n[0],i=n[1];return Object.assign(Object.assign({},xn(e,"getKeyStyle",this,3)([t])),{width:r,height:i,x:-r/2,y:-i/2})}},{key:"getIconStyle",value:function(t){var n=xn(e,"getIconStyle",this,3)([t]),r=this.getShape("key").attributes,i=r.width,o=r.height;return!!n&&Object.assign({width:i*_b,height:o*_b},n)}},{key:"drawKeyShape",value:function(t,e){return this.upsert("key",Yu,this.getKeyStyle(t),e)}}])}(Ow),zx=function(t){function e(t){return x(this,e),F(this,e,[t])}return P(e,t),B(e,[{key:"getInnerR",value:function(t){return t.innerR||3*this.getOuterR(t)/8}},{key:"getOuterR",value:function(t){return Math.min.apply(Math,O(this.getSize(t)))/2}},{key:"getPoints",value:function(t){return[[0,-(e=this.getOuterR(t))],[(n=this.getInnerR(t))*Math.cos(3*Math.PI/10),-n*Math.sin(3*Math.PI/10)],[e*Math.cos(Math.PI/10),-e*Math.sin(Math.PI/10)],[n*Math.cos(Math.PI/10),n*Math.sin(Math.PI/10)],[e*Math.cos(3*Math.PI/10),e*Math.sin(3*Math.PI/10)],[0,n],[-e*Math.cos(3*Math.PI/10),e*Math.sin(3*Math.PI/10)],[-n*Math.cos(Math.PI/10),n*Math.sin(Math.PI/10)],[-e*Math.cos(Math.PI/10),-e*Math.sin(Math.PI/10)],[-n*Math.cos(3*Math.PI/10),-n*Math.sin(3*Math.PI/10)]];var e,n}},{key:"getIconStyle",value:function(t){var n=xn(e,"getIconStyle",this,3)([t]),r=2*this.getInnerR(t)*_b;return!!n&&Object.assign({width:r,height:r},n)}},{key:"getPortXY",value:function(t,e){var n=e.placement,r=void 0===n?"top":n,i=this.getShape("key").getLocalBounds(),o=function(t,e){var n={};return n.top=[0,-t],n.left=[-t*Math.cos(Math.PI/10),-t*Math.sin(Math.PI/10)],n["left-bottom"]=[-t*Math.cos(3*Math.PI/10),t*Math.sin(3*Math.PI/10)],n.bottom=[0,e],n["right-bottom"]=[t*Math.cos(3*Math.PI/10),t*Math.sin(3*Math.PI/10)],n.right=n.default=[t*Math.cos(Math.PI/10),-t*Math.sin(Math.PI/10)],n}(this.getOuterR(t),this.getInnerR(t));return YE(i,r,o,!1)}}])}(Mw),Kx=function(t){function e(t){return x(this,e),F(this,e,[tw({style:e.defaultStyleProps},t)])}return P(e,t),B(e,[{key:"getPoints",value:function(t){var e=t.direction,n=v(this.getSize(t),2);return function(t,e,n){var r=e/2,i=t/2,o={up:[[-i,r],[i,r],[0,-r]],left:[[-i,0],[i,r],[i,-r]],right:[[-i,r],[-i,-r],[i,0]],down:[[-i,-r],[i,-r],[0,r]]};return o[n]||o.up}(n[0],n[1],e)}},{key:"getPortXY",value:function(t,e){var n=t.direction,r=e.placement,i=void 0===r?"top":r,o=this.getShape("key").getLocalBounds(),a=v(this.getSize(t),2),s=function(t,e,n){var r=e/2,i=t/2,o={};return"down"===n?(o.bottom=o.default=[0,r],o.right=[i,-r],o.left=[-i,-r]):"left"===n?(o.top=[i,-r],o.bottom=[i,r],o.left=o.default=[-i,0]):"right"===n?(o.top=[-i,-r],o.bottom=[-i,r],o.right=o.default=[i,0]):(o.left=[-i,r],o.top=o.default=[0,-r],o.right=[i,r]),o}(a[0],a[1],n);return YE(o,i,s,!1)}},{key:"getIconStyle",value:function(t){var e=t.icon,n=t.iconText,r=t.iconSrc,i=t.direction;if(!1===e||uw(n||r))return!1;var o=Xb(this.getGraphicStyle(t),"icon"),a=this.getShape("key").getLocalBounds(),s=function(t,e){var n=t.center,r=v(Hy(t),2),i=r[0],o=r[1];return["up"===e||"down"===e?n[0]:"right"===e?n[0]-i/6:n[0]+i/6,"left"===e||"right"===e?n[1]:"down"===e?n[1]-o/6:n[1]+o/6]}(a,i),u=v(s,2),c=u[0],l=u[1],A=2*function(t,e){var n=v(Hy(t),2),r=n[0],i=n[1],o=v("up"===e||"down"===e?[r,i]:[i,r],2);return r=o[0],i=o[1],(Math.pow(i,2)-Math.pow(Math.sqrt(Math.pow(r/2,2)+Math.pow(i,2))-r/2,2))/(2*i)}(a,i)*_b;return Object.assign({x:c,y:l,width:A,height:A},o)}}])}(Mw);Kx.defaultStyleProps={size:40,direction:"up"};var Gx=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},Vx=function(t){function e(t){var n;return x(this,e),(n=F(this,e,[tw({style:e.defaultStyleProps},t)])).type="combo",n.updateComboPosition(n.parsedAttributes),n}return P(e,t),B(e,[{key:"getKeySize",value:function(t){var e=t.collapsed,n=t.childrenNode;return 0===(void 0===n?[]:n).length?this.getEmptyKeySize(t):e?this.getCollapsedKeySize(t):this.getExpandedKeySize(t)}},{key:"getEmptyKeySize",value:function(t){var e=t.padding,n=t.collapsedSize,r=v(Uy(e),4),i=r[0],o=r[1],a=r[2],s=r[3];return Zm(Jb(n),[s+o,i+a,0])}},{key:"getCollapsedKeySize",value:function(t){return Jb(t.collapsedSize)}},{key:"getExpandedKeySize",value:function(t){var e=this.getContentBBox(t);return[Dy(e),Ry(e),0]}},{key:"getContentBBox",value:function(t){var e=this,n=t.childrenNode,r=void 0===n?[]:n,i=t.padding,o=r.map(function(t){return e.context.element.getElement(t)}).filter(Boolean);if(0===o.length){var a=new ar,s=t.x,u=void 0===s?0:s,c=t.y,l=void 0===c?0:c,A=v(Jb(t.size),2),f=A[0],d=A[1];return a.setMinMax([u-f/2,l-d/2,0],[u+f/2,l+d/2,0]),a}var h=Vy(o.map(function(t){return t.getBounds()}));return i?Gy(h,i):h}},{key:"drawCollapsedMarkerShape",value:function(t,e){var n=this.getCollapsedMarkerStyle(t);this.upsert("collapsed-marker",Ew,n,e),ww(this)}},{key:"getCollapsedMarkerStyle",value:function(t){if(!t.collapsed||!t.collapsedMarker)return!1;var e=Xb(this.getGraphicStyle(t),"collapsedMarker"),n=e.type,r=Gx(e,["type"]),i=v(gb(this.getShape("key").getLocalBounds(),"center"),2),o=i[0],a=i[1],s=Object.assign(Object.assign({},r),{x:o,y:a});if(n){var u=this.getCollapsedMarkerText(n,t);Object.assign(s,{text:u})}return s}},{key:"getCollapsedMarkerText",value:function(t,e){var n=e.childrenData,r=void 0===n?[]:n,i=this.context.model;return"descendant-count"===t?i.getDescendantsData(this.id).length.toString():"child-count"===t?r.length.toString():"node-count"===t?i.getDescendantsData(this.id).filter(function(t){return"node"===i.getElementType(Sm(t))}).length.toString():mn(t)?t(r):""}},{key:"getComboPosition",value:function(t){var e=t.x,n=void 0===e?0:e,r=t.y,i=void 0===r?0:r,o=t.collapsed,a=t.childrenData;if(0===(void 0===a?[]:a).length)return[+n,+i,0];if(o){var s=this.context.model,u=s.getDescendantsData(this.id).filter(function(t){return!s.isCombo(Sm(t))});return u.length>0&&u.some(vb)?tb(u.reduce(function(t,e){return Zm(t,pb(e))},[0,0,0]),u.length):[+n,+i,0]}return this.getContentBBox(t).center}},{key:"getComboStyle",value:function(t){var e=v(this.getComboPosition(t),2),n=e[0],r=e[1];return{x:n,y:r,transform:[["translate",n,r]]}}},{key:"updateComboPosition",value:function(t){var e=this.getComboStyle(t);Object.assign(this.style,e);var n=e.x,r=e.y;this.context.model.syncNodeLikeDatum({id:this.id,style:{x:n,y:r}}),xw(this)}},{key:"render",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;xn(e,"render",this,3)([t,n]),this.drawCollapsedMarkerShape(t,n)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};xn(e,"update",this,3)([t]),this.updateComboPosition(this.parsedAttributes)}},{key:"onframe",value:function(){xn(e,"onframe",this,3)([]),this.attributes.collapsed||this.updateComboPosition(this.parsedAttributes),this.drawKeyShape(this.parsedAttributes,this)}},{key:"animate",value:function(t,n){var r=this,i=xn(e,"animate",this,3)([this.attributes.collapsed?t:t.map(function(t){return t.x,t.y,t.z,t.transform,Gx(t,["x","y","z","transform"])}),n]);return i?new Proxy(i,{set:function(t,e,n){return"currentTime"===e&&Promise.resolve().then(function(){return r.onframe()}),Reflect.set(t,e,n)}}):i}}])}(Ow);Vx.defaultStyleProps={childrenNode:[],droppable:!0,draggable:!0,collapsed:!1,collapsedSize:32,collapsedMarker:!0,collapsedMarkerZIndex:1,collapsedMarkerFontSize:12,collapsedMarkerTextAlign:"center",collapsedMarkerTextBaseline:"middle",collapsedMarkerType:"child-count"};var Wx=function(t){function e(t){return x(this,e),F(this,e,[t])}return P(e,t),B(e,[{key:"drawKeyShape",value:function(t,e){return this.upsert("key",Pu,this.getKeyStyle(t),e)}},{key:"getKeyStyle",value:function(t){var n=t.collapsed,r=xn(e,"getKeyStyle",this,3)([t]),i=v(this.getKeySize(t),1)[0];return Object.assign(Object.assign(Object.assign({},r),n&&Xb(r,"collapsed")),{r:i/2})}},{key:"getCollapsedKeySize",value:function(t){var e=v(Jb(t.collapsedSize),2),n=e[0],r=e[1],i=Math.max(n,r)/2;return[2*i,2*i,0]}},{key:"getExpandedKeySize",value:function(t){var e=v(Hy(this.getContentBBox(t)),2),n=e[0],r=e[1],i=Math.sqrt(Math.pow(n,2)+Math.pow(r,2))/2;return[2*i,2*i,0]}},{key:"getIntersectPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Cb(t,this.getShape("key").getBounds(),e)}}])}(Vx),Yx=function(t){function e(t){return x(this,e),F(this,e,[t])}return P(e,t),B(e,[{key:"drawKeyShape",value:function(t,e){return this.upsert("key",Yu,this.getKeyStyle(t),e)}},{key:"getKeyStyle",value:function(t){var n=xn(e,"getKeyStyle",this,3)([t]),r=v(this.getKeySize(t),2),i=r[0],o=r[1];return Object.assign(Object.assign(Object.assign({},n),t.collapsed&&Xb(n,"collapsed")),{width:i,height:o,x:-i/2,y:-o/2})}}])}(Vx);const Xx=function(t,e){if(!Wg(t))return t;for(var n=[],r=0;r<t.length;r++){var i=t[r];e(i,r)&&n.push(i)}return n},qx=function(t,e){return void 0===e&&(e=[]),Xx(t,function(t){return!function(t,e){return!!Wg(t)&&t.indexOf(e)>-1}(e,t)})};var Zx={padding:10};function Jx(t,e,n,r,i,o){for(var a=Object.assign(Zx,o).padding,s=zy(n,a),u=zy(r,a),c=[t].concat(O(i),[e]),l=null,A=[],f=0,d=c.length;f<d-1;f++){var h=f+1,p=c[f],v=c[h],g=Eb(p,v),y=null;if(0===f)if(h===d-1)if(s.intersects(u))y=sE(p,v,s,u);else if(Xy(p,s)||Xy(v,u))g||(y=aE(p,v,s,u));else{var m=Zy(p,s),b=Zy(v,u);(y=rE(m,b,eE(m,b))).points.unshift(m),y.points.push(b)}else Wy(v,s)?y=sE(p,v,s,zy(v,a),l):g||(y=iE(p,v,s));else h===d-1?Wy(p,u)?y=sE(p,v,zy(p,a),u,l):g||(y=oE(p,v,u,l)):g||(y=rE(p,v,l));y?(A.push.apply(A,O(y.points)),l=y.direction):l=eE(p,v),h<d-1&&A.push(v)}return A.map(ub)}var $x={N:"S",S:"N",W:"E",E:"W"},tE={N:-Math.PI/2,S:Math.PI/2,E:0,W:Math.PI};function eE(t,e){var n=v(t,2),r=n[0],i=n[1],o=v(e,2),a=o[0],s=o[1];return r===a?i>s?"N":"S":i===s?r>a?"W":"E":null}function nE(t,e){return"N"===e||"S"===e?Ry(t):Dy(t)}function rE(t,e,n){var r=[t[0],e[1]],i=[e[0],t[1]],o=eE(t,r),a=eE(t,i),s=n?$x[n]:null,u=o===n||o!==s&&a!==n?r:i;return{points:[u],direction:eE(u,e)}}function iE(t,e,n){if(Xy(t,n)){var r=uE(t,e,n);return{points:[r],direction:eE(r,e)}}var i=Zy(t,n),o=["left","right"].includes(qy(t,n))?[e[0],i[1]]:[i[0],e[1]];return{points:[o],direction:eE(o,e)}}function oE(t,e,n,r){var i=Xy(e,n)?e:Zy(e,n),o=[[i[0],t[1]],[t[0],i[1]]],a=o.filter(function(t){return function(t,e){return!Wy(t,e)}(t,n)&&!Yy(t,n,!0)}),s=a.filter(function(e){return eE(e,t)!==r});if(s.length>0){var u=s.find(function(e){return eE(t,e)===r})||s[0];return{points:[u],direction:eE(u,e)}}var c=wb(e,qx(o,a)[0],nE(n,r)/2);return{points:[uE(c,t,n),c],direction:eE(c,e)}}function aE(t,e,n,r){var i=iE(t,e,n),o=cb(i.points[0]);if(Wy(o,r)){var a=cb((i=iE(e,t,r)).points[0]);if(Wy(a,n)){var s=wb(t,o,nE(n,eE(t,o))/2),u=wb(e,a,nE(r,eE(e,a))/2),c=[(s[0]+u[0])/2,(s[1]+u[1])/2],l=iE(t,c,n),A=oE(c,e,r,l.direction);i.points=[l.points[0],A.points[0]],i.direction=A.direction}}return i}function sE(t,e,n,r,i){var o,a=Vy([n,r]),s=nb(e,a.center)>nb(t,a.center),u=v(s?[e,t]:[t,e],2),c=u[0],l=u[1],A=Ry(a)+Dy(a);if(i){var f=[c[0]+A*Math.cos(tE[i]),c[1]+A*Math.sin(tE[i])];o=wb(Zy(f,a),f,.01)}else o=wb(Zy(c,a),c,-.01);var d=uE(o,l,a),h=[bb(o,2),bb(d,2)];if(Xg(bb(o),bb(d))){var p=ob(Jm(o,c),[1,0,0])+Math.PI/2;h=[o,uE(o,d=bb(wb(Zy(d=[l[0]+A*Math.cos(p),l[1]+A*Math.sin(p),0],a),l,-.01),2),a),d]}return{points:s?h.reverse():h,direction:eE(s?o:d,e)}}function uE(t,e,n){var r=[t[0],e[1]];return Wy(r,n)&&(r=[e[0],t[1]]),r}function cE(t,e,n,r,i){var o="number"==typeof e?e:.5;"start"===e&&(o=0),"end"===e&&(o=.99);var a=yb(t.getPoint(o)),s=yb(t.getPoint(o+.01)),u="start"===e?"left":"end"===e?"right":"center";if(xb(a,s)||!n){var c=v(lE(t,o,r,i),2);return{transform:[["translate",c[0],c[1]]],textAlign:u}}var l=Math.atan2(s[1]-a[1],s[0]-a[0]);s[0]<a[0]&&(u="center"===u?u:"left"===u?"right":"left",r*=-1,l+=Math.PI);var A=v(lE(t,o,r,i,l),2);return{textAlign:u,transform:[["translate",A[0],A[1]],["rotate",l/Math.PI*180]]}}function lE(t,e,n,r,i){var o=v(yb(t.getPoint(e)),2),a=o[0],s=o[1],u=n,c=r;return i&&(u=n*Math.cos(i)-r*Math.sin(i),c=n*Math.sin(i)+r*Math.cos(i)),[a+u,s+c]}function AE(t,e,n,r){if(Xg(t,e))return t;var i=Jm(e,t),o=[t[0]+n*i[0],t[1]+n*i[1]],a=ib(ab(i,!1));return o[0]+=r*a[0],o[1]+=r*a[1],o}function fE(t,e,n){return[["M",t[0],t[1]],["C",n[0][0],n[0][1],n[1][0],n[1][1],e[0],e[1]]]}function dE(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.length-1,i=t[0],o=t[r],a=t.slice(1,r),s=[["M",i[0],i[1]]];return a.forEach(function(t,n){var r=a[n-1]||i,u=a[n+1]||o;if(!Bb(r,t,u)&&e){var c=function(t,e,n,r){var i=rb(t,e),o=rb(n,e),a=Math.min(r,Math.min(i,o)/2);return[[e[0]-a/i*(e[0]-t[0]),e[1]-a/i*(e[1]-t[1])],[e[0]-a/o*(e[0]-n[0]),e[1]-a/o*(e[1]-n[1])]]}(r,t,u,e),l=v(c,2),A=l[0],f=l[1];s.push(["L",A[0],A[1]],["Q",t[0],t[1],f[0],f[1]],["L",f[0],f[1]])}else s.push(["L",t[0],t[1]])}),s.push(["L",o[0],o[1]]),n&&s.push(["Z"]),s}function hE(t,e,n,r,i){var o=zy(t),a=t.getCenter(),s=r&&ZE(r),u=i&&ZE(i);if(!s||!u){var c=function(t){var e=Math.PI/2,n=Ry(t)/2,r=Dy(t)/2,i=Math.atan2(n,r)/2,o=Math.atan2(r,n)/2;return{top:[-e-o,-e+o],"top-right":[-e+o,-i],"right-top":[-e+o,-i],right:[-i,i],"bottom-right":[i,e-o],"right-bottom":[i,e-o],bottom:[e-o,e+o],"bottom-left":[e+o,Math.PI-i],"left-bottom":[e+o,Math.PI-i],left:[Math.PI-i,Math.PI+i],"top-left":[Math.PI+i,-e-o],"left-top":[Math.PI+i,-e-o]}}(o),l=c[e][0],A=c[e][1],f=v(Hy(o),2),d=f[0],h=f[1],p=Math.max(d,h),g=Zm(a,[p*Math.cos(l),p*Math.sin(l),0]),y=Zm(a,[p*Math.cos(A),p*Math.sin(A),0]);if(s=eB(t,g),u=eB(t,y),!n){var m=[u,s];s=m[0],u=m[1]}}return[s,u]}function pE(t,e){var n=new Set,r=new Set,i=new Set;return t.forEach(function(o){e(o).forEach(function(e){n.add(e),t.includes(e.source)&&t.includes(e.target)?r.add(e):i.add(e)})}),{edges:Array.from(n),internal:Array.from(r),external:Array.from(i)}}function vE(t,e){for(var n=[],r=t;r;){n.push(r);var i=e(Sm(r));if(!i)break;r=i}if(n.some(function(t){var e;return null===(e=t.style)||void 0===e?void 0:e.collapsed})){var o=n.reverse().findIndex(Kb);return n[o]||n.at(-1)}return t}var gE=function(t,e){var n=Math.max(t,e)/2;return[["M",-t/2,0],["A",n,n,0,1,0,2*n-t/2,0],["A",n,n,0,1,0,-t/2,0],["Z"]]},yE=function(t,e){return[["M",-t/2,0],["L",t/2,-e/2],["L",t/2,e/2],["Z"]]},mE=function(t,e){return[["M",-t/2,0],["L",0,-e/2],["L",t/2,0],["L",0,e/2],["Z"]]},bE=function(t,e){return[["M",-t/2,0],["L",t/2,-e/2],["L",4*t/5-t/2,0],["L",t/2,e/2],["Z"]]},wE=function(t,e){return[["M",-t/2,-e/2],["L",t/2,-e/2],["L",t/2,e/2],["L",-t/2,e/2],["Z"]]},xE=function(t,e){var n=t/2,r=t/7,i=t-r;return[["M",-n,0],["L",0,-e/2],["L",0,e/2],["Z"],["M",i-n,-e/2],["L",i+r-n,-e/2],["L",i+r-n,e/2],["L",i-n,e/2],["Z"]]},EE=function(t,e){return[["M",t/2,-e/2],["L",-t/2,0],["L",t/2,0],["L",-t/2,0],["L",t/2,e/2]]},BE=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},kE=function(t){function n(t){var e;return x(this,n),(e=F(this,n,[tw({style:n.defaultStyleProps},t)])).type="edge",e}return P(n,t),B(n,[{key:"sourceNode",get:function(){var t=this.parsedAttributes.sourceNode;return this.context.element.getElement(t)}},{key:"targetNode",get:function(){var t=this.parsedAttributes.targetNode;return this.context.element.getElement(t)}},{key:"getKeyStyle",value:function(t){var e,n,r=this.getGraphicStyle(t),i=r.loop,o=BE(r,["loop"]),a=this.sourceNode,s=this.targetNode,u={d:i&&(n=s,(e=a)&&n&&e===n)?this.getLoopPath(t):this.getKeyPath(t)};return zu.PARSED_STYLE_LIST.forEach(function(t){t in o&&(u[t]=o[t])}),u}},{key:"getLoopPath",value:function(t){var e=t.sourcePort,n=t.targetPort,r=this.sourceNode,i=zy(r),o=Math.max(Dy(i),Ry(i)),a=Xb(this.getGraphicStyle(t),"loop"),s=a.placement,u=a.clockwise,c=a.dist;return function(t,e,n,r,i,o){var a=t.getPorts()[i||o],s=t.getPorts()[o||i],u=v(hE(t,e,n,a,s),2),c=u[0],l=u[1],A=function(t,e,n,r){var i=t.getCenter();if(Xg(e,n)){var o=Jm(e,i),a=[r*Math.sign(o[0])||r/2,r*Math.sign(o[1])||-r/2,0];return[Zm(e,a),Zm(n,$m(a,[1,-1,1]))]}return[wb(i,e,nb(i,e)+r),wb(i,n,nb(i,n)+r)]}(t,c,l,r);return a&&(c=tB(a,A[0])),s&&(l=tB(s,A.at(-1))),fE(c,l,A)}(r,s,u,void 0===c?o:c,e,n)}},{key:"getEndpoints",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=t.sourcePort,i=t.targetPort,o=this.sourceNode,a=this.targetNode,s=function(t,e,n,r){return[JE(t,e,n,r),JE(e,t,r,n)]}(o,a,r,i),u=v(s,2),c=u[0],l=u[1];if(!e)return[c?ZE(c):o.getCenter(),l?ZE(l):a.getCenter()];var A="function"==typeof n?n():n;return[$E(c||o,A[0]||l||a),$E(l||a,A[A.length-1]||c||o)]}},{key:"getHaloStyle",value:function(t){if(!1===t.halo)return!1;var e=this.getKeyStyle(t),n=Xb(this.getGraphicStyle(t),"halo");return Object.assign(Object.assign({},e),n)}},{key:"getLabelStyle",value:function(t){if(!1===t.label||!t.labelText)return!1;var e=Xb(this.getGraphicStyle(t),"label"),n=e.placement,r=e.offsetX,i=e.offsetY,o=e.autoRotate,a=e.maxWidth,s=BE(e,["placement","offsetX","offsetY","autoRotate","maxWidth"]),u=cE(this.shapeMap.key,n,o,r,i),c=this.shapeMap.key.getLocalBounds(),l=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return rw(nb(t[0],t[1])*n,e)}([c.min,c.max],a);return Object.assign({wordWrapWidth:l},u,s)}},{key:"getBadgeStyle",value:function(t){if(!1===t.badge||!t.badgeText)return!1;var e=Xb(t,"badge"),n=e.offsetX,r=e.offsetY,i=e.placement,o=BE(e,["offsetX","offsetY","placement"]);return Object.assign(o,function(t,e,n,r,i){var o,a,s=2*(null===(o=t.badge)||void 0===o?void 0:o.getGeometryBounds().halfExtents[0])||0,u=2*(null===(a=t.label)||void 0===a?void 0:a.getGeometryBounds().halfExtents[0])||0;return cE(t.key,n,!0,(u?(u/2+s/2)*("suffix"===e?1:-1):0)+r,i)}(this.shapeMap,i,t.labelPlacement,n,r))}},{key:"drawArrow",value:function(t,e){var n,r="start"===e,i=t["start"===e?"startArrow":"endArrow"],o=this.shapeMap.key;if(i){var a=this.getArrowStyle(t,r),s=v(r?["markerStart","markerStartOffset","startArrowOffset"]:["markerEnd","markerEndOffset","endArrowOffset"],3),u=s[0],c=s[1],l=s[2],A=o.parsedStyle[u];if(A)A.attr(a);else{var f=new(a.src?ju:zu)({style:a});o.style[u]=f}o.style[c]=t[l]||a.width/2+ +a.lineWidth}else{var d=r?"markerStart":"markerEnd";null===(n=o.style[d])||void 0===n||n.destroy(),o.style[d]=null}}},{key:"getArrowStyle",value:function(t,n){var r=this.getShape("key").attributes,i=n?"startArrow":"endArrow",o=Xb(this.getGraphicStyle(t),i),a=o.size,s=o.type,u=BE(o,["size","type"]),c=Jb(function(t,e){return e||(t<4?10:4===t?12:2.5*t)}(r.lineWidth,a)),l=v(c,2),A=l[0],f=l[1],d=(mn(s)?s:e[s]||yE)(A,f);return Object.assign(Ux(r,["stroke","strokeOpacity","fillOpacity"]),{width:A,height:f},Object.assign({},d&&{d,fill:"simple"===s?"":r.stroke}),u)}},{key:"drawLabelShape",value:function(t,e){var n=this.getLabelStyle(t);this.upsert("label",fw,n,e)}},{key:"drawHaloShape",value:function(t,e){var n=this.getHaloStyle(t);this.upsert("halo",zu,n,e)}},{key:"drawBadgeShape",value:function(t,e){var n=this.getBadgeStyle(t);this.upsert("badge",dw,n,e)}},{key:"drawSourceArrow",value:function(t){this.drawArrow(t,"start")}},{key:"drawTargetArrow",value:function(t){this.drawArrow(t,"end")}},{key:"drawKeyShape",value:function(t,e){var n=this.getKeyStyle(t);return this.upsert("key",zu,n,e)}},{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parsedAttributes,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;this.drawKeyShape(t,e),this.getShape("key")&&(this.drawSourceArrow(t),this.drawTargetArrow(t),this.drawLabelShape(t,e),this.drawHaloShape(t,e),this.drawBadgeShape(t,e))}},{key:"onframe",value:function(){this.drawKeyShape(this.parsedAttributes,this),this.drawSourceArrow(this.parsedAttributes),this.drawTargetArrow(this.parsedAttributes),this.drawHaloShape(this.parsedAttributes,this),this.drawLabelShape(this.parsedAttributes,this),this.drawBadgeShape(this.parsedAttributes,this)}},{key:"animate",value:function(t,e){var r=this,i=xn(n,"animate",this,3)([t,e]);return i?new Proxy(i,{set:function(t,e,n){return"currentTime"===e&&Promise.resolve().then(function(){return r.onframe()}),Reflect.set(t,e,n)}}):i}}])}(Bw);kE.defaultStyleProps={badge:!0,badgeOffsetX:0,badgeOffsetY:0,badgePlacement:"suffix",isBillboard:!0,label:!0,labelAutoRotate:!0,labelIsBillboard:!0,labelMaxWidth:"80%",labelOffsetX:4,labelOffsetY:0,labelPlacement:"center",labelTextBaseline:"middle",labelWordWrap:!1,halo:!1,haloDroppable:!1,haloLineDash:0,haloLineWidth:12,haloPointerEvents:"none",haloStrokeOpacity:.25,haloZIndex:-1,loop:!0,startArrow:!1,startArrowLineDash:0,startArrowLineJoin:"round",startArrowLineWidth:1,startArrowTransformOrigin:"center",startArrowType:"vee",endArrow:!1,endArrowLineDash:0,endArrowLineJoin:"round",endArrowLineWidth:1,endArrowTransformOrigin:"center",endArrowType:"vee",loopPlacement:"top",loopClockwise:!0};var OE=function(t){function e(t){return x(this,e),F(this,e,[tw({style:e.defaultStyleProps},t)])}return P(e,t),B(e,[{key:"getKeyPath",value:function(t){var e=v(this.getEndpoints(t),2),n=e[0],r=e[1],i=t.controlPoints,o=t.curvePosition,a=t.curveOffset,s=this.getControlPoints(n,r,function(t){return de(t)?[t,1-t]:t}(o),function(t){return de(t)?[t,-t]:t}(a),i);return fE(n,r,s)}},{key:"getControlPoints",value:function(t,e,n,r,i){return 2===(null==i?void 0:i.length)?i:[AE(t,e,n[0],r[0]),AE(t,e,n[1],r[1])]}}])}(kE);OE.defaultStyleProps={curvePosition:.5,curveOffset:20};var CE=function(t){function e(t){return x(this,e),F(this,e,[tw({style:e.defaultStyleProps},t)])}return P(e,t),B(e,[{key:"getControlPoints",value:function(t,e,n,r){var i=e[0]-t[0];return[[t[0]+i*n[0]+r[0],t[1]],[e[0]-i*n[1]+r[1],e[1]]]}}])}(OE);CE.defaultStyleProps={curvePosition:[.5,.5],curveOffset:[0,0]};var ME=function(t){function e(t){return x(this,e),F(this,e,[tw({style:e.defaultStyleProps},t)])}return P(e,t),B(e,[{key:"ref",get:function(){return this.context.model.getRootsData()[0]}},{key:"getEndpoints",value:function(t){if(this.sourceNode.id===this.ref.id)return xn(e,"getEndpoints",this,3)([t]);var n=pb(this.ref);return[this.sourceNode.getIntersectPoint(n,!0),this.targetNode.getIntersectPoint(n)]}},{key:"toRadialCoordinate",value:function(t){var e=pb(this.ref);return[nb(t,e),lb(Jm(t,e))]}},{key:"getControlPoints",value:function(t,e,n,r){var i=v(this.toRadialCoordinate(t),2),o=i[0],a=i[1],s=v(this.toRadialCoordinate(e),1)[0]-o;return[[t[0]+(s*n[0]+r[0])*Math.cos(a),t[1]+(s*n[0]+r[0])*Math.sin(a)],[e[0]-(s*n[1]-r[0])*Math.cos(a),e[1]-(s*n[1]-r[0])*Math.sin(a)]]}}])}(OE);ME.defaultStyleProps={curvePosition:.5,curveOffset:20};var SE=function(t){function e(t){return x(this,e),F(this,e,[tw({style:e.defaultStyleProps},t)])}return P(e,t),B(e,[{key:"getControlPoints",value:function(t,e,n,r){var i=e[1]-t[1];return[[t[0],t[1]+i*n[0]+r[0]],[e[0],e[1]-i*n[1]+r[1]]]}}])}(OE);SE.defaultStyleProps={curvePosition:[.5,.5],curveOffset:[0,0]};var FE=function(t){function e(t){return x(this,e),F(this,e,[tw({style:e.defaultStyleProps},t)])}return P(e,t),B(e,[{key:"getKeyPath",value:function(t){var e=v(this.getEndpoints(t),2),n=e[0],r=e[1];return[["M",n[0],n[1]],["L",r[0],r[1]]]}}])}(kE);FE.defaultStyleProps={};var TE={enableObstacleAvoidance:!1,offset:10,maxAllowedDirectionChange:Math.PI/2,maximumLoops:3e3,gridSize:5,startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{right:{stepX:1,stepY:0},left:{stepX:-1,stepY:0},bottom:{stepX:0,stepY:1},top:{stepX:0,stepY:-1}},penalties:{0:0,90:0},distFunc:rb},PE=function(t){return"".concat(Math.round(t[0]),"|||").concat(Math.round(t[1]))};function IE(t,e){var n=function(t){return Math.round(t/e)};return de(t)?n(t):t.map(n)}function NE(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n||r?Math.atan2(r,n):0}function LE(t,e,n,r){var i,o,a,s=NE(t,e);return i=NE(n[PE(t)]||r,t),o=s,(a=Math.abs(i-o))>Math.PI?2*Math.PI-a:a}function _E(t,e,n){return Math.min.apply(Math,O(e.map(function(e){return n(t,e)})))}var QE=function(t,e,n,r){if(!e)return[t];var i=r.directionMap,o=r.offset,a=Gy(e.getRenderBounds(),o),s=Object.keys(i).reduce(function(e,r){if(n.includes(r))for(var o=i[r],s=v(Hy(a),2),u=s[0],c=s[1],l=[t[0]+o.stepX*u,t[1]+o.stepY*c],A=(p=void 0,g=void 0,y=void 0,m=void 0,b=void 0,w=void 0,x=void 0,E=void 0,B=void 0,k=void 0,p=v((h=a).min,2),g=p[0],y=p[1],m=v(h.max,2),b=m[0],w=m[1],[[x=[g,w],E=[b,w]],[E,B=[b,y]],[B,k=[g,y]],[k,x]]),f=0;f<A.length;f++){var d=db([t,l],A[f]);d&&Yy(d,a)&&e.push(d)}var h,p,g,y,m,b,w,x,E,B,k;return e},[]);return Wy(t,a)||s.push(t),s.map(function(t){return IE(t,r.gridSize)})},UE=function(t,e,n,r,i,o,a){var s=[],u=[o[0]===r[0]?r[0]:t[0]*a,o[1]===r[1]?r[1]:t[1]*a];s.unshift(u);for(var c=t,l=e[PE(c)];l;){var A=l,f=c;LE(A,f,e,n)&&(u=[A[0]===f[0]?u[0]:A[0]*a,A[1]===f[1]?u[1]:A[1]*a],s.unshift(u)),l=e[PE(A)],c=A}var d=i.map(function(t){return[t[0]*a,t[1]*a]}),h=function(t,e,n){for(var r=t[0],i=n(t[0],e),o=0;o<t.length;o++){var a=t[o],s=n(a,e);s<i&&(r=a,i=s)}return r}(d,u,rb);return s.unshift(h),s};var jE=function(){return B(function t(){x(this,t),this.arr=[],this.map={},this.arr=[],this.map={}},[{key:"_innerAdd",value:function(t,e){for(var n=0,r=e-1;r-n>1;){var i=Math.floor((n+r)/2);if(this.arr[i].value>t.value)r=i;else{if(!(this.arr[i].value<t.value))return this.arr.splice(i,0,t),void(this.map[t.id]=!0);n=i}}this.arr.splice(r,0,t),this.map[t.id]=!0}},{key:"add",value:function(t){delete this.map[t.id];var e=this.arr.length;if(!e||this.arr[e-1].value<t.value)return this.arr.push(t),void(this.map[t.id]=!0);this._innerAdd(t,e)}},{key:"remove",value:function(t){this.map[t]&&delete this.map[t]}},{key:"_clearAndGetMinId",value:function(){for(var t,e=this.arr.length-1;e>=0;e--)this.map[this.arr[e].id]?t=this.arr[e].id:this.arr.splice(e,1);return t}},{key:"_findFirstId",value:function(){for(;this.arr.length;){var t=this.arr.shift();if(this.map[t.id])return t.id}}},{key:"minId",value:function(t){return t?this._clearAndGetMinId():this._findFirstId()}}])}(),DE=function(t){function e(t){return x(this,e),F(this,e,[tw({style:e.defaultStyleProps},t)])}return P(e,t),B(e,[{key:"getControlPoints",value:function(t){var e=t.router,n=this.sourceNode,r=this.targetNode,i=v(this.getEndpoints(t,!1),2),o=i[0],a=i[1],s=[];return e?"shortest-path"===e.type?(s=function(t,e,n,r){var i=ub(t.getCenter()),o=ub(e.getCenter()),a=Object.assign(TE,r),s=a.gridSize,u=function(t,e){var n=e.offset,r=e.gridSize,i={};return t.forEach(function(t){if(t&&!t.destroyed&&t.isVisible())for(var e=Gy(t.getRenderBounds(),n),o=IE(e.min[0],r);o<=IE(e.max[0],r);o+=1)for(var a=IE(e.min[1],r);a<=IE(e.max[1],r);a+=1)i["".concat(o,"|||").concat(a)]=!0}),i}(a.enableObstacleAvoidance?n:[t,e],a),c=IE(i,s),l=IE(o,s),A=QE(i,t,a.startDirections,a),f=QE(o,e,a.endDirections,a);A.forEach(function(t){return delete u[PE(t)]}),f.forEach(function(t){return delete u[PE(t)]});for(var d={},h={},p={},g={},y={},m=new jE,b=0;b<A.length;b++){var w=A[b],x=PE(w);d[x]=w,g[x]=0,y[x]=_E(w,f,a.distFunc),m.add({id:x,value:y[x]})}for(var E,B=f.map(function(t){return PE(t)}),k=a.maximumLoops,O=1/0,C=0,M=Object.entries(d);C<M.length;C++){var S=v(M[C],2),F=S[0],T=S[1];y[F]<=O&&(O=y[F],E=T)}for(;Object.keys(d).length>0&&k>0;){var P=m.minId(!1);if(!P)break;E=d[P];var I=PE(E);if(B.includes(I))return UE(E,p,c,o,A,l,s);delete d[I],m.remove(I),h[I]=!0;for(var N=0,L=Object.values(a.directionMap);N<L.length;N++){var _=L[N],Q=Zm(E,[_.stepX,_.stepY]),U=PE(Q);if(!h[U]){var j=LE(E,Q,p,c);if(!(j>a.maxAllowedDirectionChange||u[U])){d[U]||(d[U]=Q);var D=a.penalties[j],R=a.distFunc(E,Q)+(isNaN(D)?s:D),H=g[I]+R,z=g[U];z&&H>=z||(p[U]=E,g[U]=H,y[U]=H+_E(Q,f,a.distFunc),m.add({id:U,value:y[U]}))}}}k-=1}return[]}(n,r,this.context.element.getNodes(),e)).length||(s=Jx(o,a,n,r,t.controlPoints,{padding:e.offset})):"orth"===e.type&&(s=Jx(o,a,n,r,t.controlPoints,e)):s=t.controlPoints,s}},{key:"getPoints",value:function(t){var e=this.getControlPoints(t),n=v(this.getEndpoints(t,!0,e),2),r=n[0],i=n[1];return[r].concat(O(e),[i])}},{key:"getKeyPath",value:function(t){return dE(this.getPoints(t),t.radius)}},{key:"getLoopPath",value:function(t){var e=t.sourcePort,n=t.targetPort,r=t.radius,i=this.sourceNode,o=zy(i),a=Math.max(Dy(o),Ry(o))/4,s=Xb(this.getGraphicStyle(t),"loop"),u=s.placement,c=s.clockwise,l=s.dist;return function(t,e,n,r,i,o,a){var s=XE(t),u=s[o||a],c=s[a||o],l=v(hE(t,n,r,u,c),2),A=l[0],f=l[1],d=function(t,e,n,r){var i=[],o=zy(t);if(Xg(e,n))switch(qy(e,o)){case"left":i.push([e[0]-r,e[1]]),i.push([e[0]-r,e[1]+r]),i.push([e[0],e[1]+r]);break;case"right":i.push([e[0]+r,e[1]]),i.push([e[0]+r,e[1]+r]),i.push([e[0],e[1]+r]);break;case"top":i.push([e[0],e[1]-r]),i.push([e[0]+r,e[1]-r]),i.push([e[0]+r,e[1]]);break;case"bottom":i.push([e[0],e[1]+r]),i.push([e[0]+r,e[1]+r]),i.push([e[0]+r,e[1]])}else{var a=qy(e,o),s=qy(n,o);if(a===s){var u,c;switch(a){case"left":u=Math.min(e[0],n[0])-r,i.push([u,e[1]]),i.push([u,n[1]]);break;case"right":u=Math.max(e[0],n[0])+r,i.push([u,e[1]]),i.push([u,n[1]]);break;case"top":c=Math.min(e[1],n[1])-r,i.push([e[0],c]),i.push([n[0],c]);break;case"bottom":c=Math.max(e[1],n[1])+r,i.push([e[0],c]),i.push([n[0],c])}}else{var l=function(t,e){return{left:[e[0]-r,e[1]],right:[e[0]+r,e[1]],top:[e[0],e[1]-r],bottom:[e[0],e[1]+r]}[t]},A=l(a,e),f=l(s,n),d=uE(A,f,o);i.push(A,d,f)}}return i}(t,A,f,i);return u&&(A=tB(u,d[0])),c&&(f=tB(c,d.at(-1))),dE([A].concat(O(d),[f]),e)}(i,r,u,c,void 0===l?a:l,e,n)}}])}(kE);DE.defaultStyleProps={radius:0,controlPoints:[],router:!1};var RE=function(t){function e(t){return x(this,e),F(this,e,[tw({style:e.defaultStyleProps},t)])}return P(e,t),B(e,[{key:"getKeyPath",value:function(t){var e=t.curvePosition,n=t.curveOffset,r=v(this.getEndpoints(t),2),i=r[0],o=r[1];return function(t,e,n){return[["M",t[0],t[1]],["Q",n[0],n[1],e[0],e[1]]]}(i,o,t.controlPoint||AE(i,o,e,n))}}])}(kE);RE.defaultStyleProps={curvePosition:.5,curveOffset:30};var HE=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function zE(t){return t instanceof Ow&&"node"===t.type}function KE(t){return t instanceof kE}function GE(t){return t instanceof Vx}function VE(t){return zE(t)||KE(t)||GE(t)}var WE={top:[.5,0],right:[1,.5],bottom:[.5,1],left:[0,.5],"left-top":[0,0],"top-left":[0,0],"left-bottom":[0,1],"bottom-left":[0,1],"right-top":[1,0],"top-right":[1,0],"right-bottom":[1,1],"bottom-right":[1,1],default:[.5,.5]};function YE(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:WE,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=[.5,.5],o=ve(e)?Gb(n,e.toLocaleLowerCase(),i):e;if(!r&&ve(e))return o;var a=v(o||i,2),s=a[0],u=a[1];return[t.min[0]+Dy(t)*s,t.min[1]+Ry(t)*u]}function XE(t){if(!t)return{};var e=t.getPorts();return(t.attributes.ports||[]).forEach(function(n,r){var i,o=n.key,a=n.placement;qE(n)&&(e[i=o||r]||(e[i]=gb(t.getShape("key").getBounds(),a)))}),e}function qE(t){var e=t.r;return!e||0===Number(e)}function ZE(t){return _y(t)?t:t.getPosition()}function JE(t,e,n,r){var i=XE(t);if(n)return i[n];var o=Object.values(i);if(0!==o.length){var a,s,u,c,l=o.map(function(t){return ZE(t)}),A=function(t,e){var n=XE(t);if(e)return[ZE(n[e])];var r=Object.values(n);return r.length>0?r.map(function(t){return ZE(t)}):[t.getCenter()]}(e,r),f=v((s=A,u=1/0,c=[(a=l)[0],s[0]],a.forEach(function(t){s.forEach(function(e){var n=nb(t,e);n<u&&(u=n,c=[t,e])})}),c),1)[0];return o.find(function(t){return ZE(t)===f})}}function $E(t,e){return GE(t)||zE(t)?eB(t,e):tB(t,e)}function tB(t,e){return t&&e?_y(t)?t:t.attributes.linkToCenter?t.getPosition():Cb(_y(e)?e:zE(e)?e.getCenter():e.getPosition(),t.getBounds()):[0,0,0]}function eB(t,e){if(!t||!e)return[0,0,0];var n=_y(e)?e:zE(e)?e.getCenter():e.getPosition();return t.getIntersectPoint(n)||t.getCenter()}function nB(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bottom",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=e.split("-"),a=v(gb(t,e),2),s=a[0],u=a[1],c=v(i?["bottom","top"]:["top","bottom"],2),l=c[0],A=c[1];return{transform:[["translate",s+n,u+r]],textBaseline:o.includes("top")?A:o.includes("bottom")?l:"middle",textAlign:o.includes("left")?"right":o.includes("right")?"left":"center"}}function rB(t){return"hidden"!==Gb(t,["style","visibility"])}function iB(t,e){"update"in t?t.update(e):t.attr(e)}function oB(t){return Gb(t,"__to_be_destroyed__",!1)}var aB=function(t){function e(t,n){var r;return x(this,e),(r=F(this,e,[t,Object.assign({},e.defaultOptions,n)])).onCollapseExpand=function(t){return e=r,n=void 0,i=void 0,o=(0,Dn.A)().m(function e(){var n,r,i,o,a,s,u,c,l,A,f;return(0,Dn.A)().w(function(e){for(;;)switch(e.n){case 0:if(this.validate(t)){e.n=1;break}return e.a(2);case 1:if(VE(n=t.target)){e.n=2;break}return e.a(2);case 2:if(r=n.id,i=this.context,o=i.model,a=i.graph,s=o.getElementDataById(r)){e.n=3;break}return e.a(2,!1);case 3:if(u=this.options,c=u.onCollapse,l=u.onExpand,A=u.animation,f=u.align,!Kb(s)){e.n=5;break}return e.n=4,a.expandElement(r,{animation:A,align:f});case 4:null==l||l(r),e.n=7;break;case 5:return e.n=6,a.collapseElement(r,{animation:A,align:f});case 6:null==c||c(r);case 7:return e.a(2)}},e,this)}),new(i||(i=Promise))(function(t,r){function a(t){try{u(o.next(t))}catch(t){r(t)}}function s(t){try{u(o.throw(t))}catch(t){r(t)}}function u(e){e.done?t(e.value):function(t){return t instanceof i?t:new i(function(e){e(t)})}(e.value).then(a,s)}u((o=o.apply(e,n||[])).next())});var e,n,i,o},r.bindEvents(),r}return P(e,t),B(e,[{key:"update",value:function(t){this.unbindEvents(),xn(e,"update",this,3)([t]),this.bindEvents()}},{key:"bindEvents",value:function(){var t=this.context.graph,e=this.options.trigger;t.on("node:".concat(e),this.onCollapseExpand),t.on("combo:".concat(e),this.onCollapseExpand)}},{key:"unbindEvents",value:function(){var t=this.context.graph,e=this.options.trigger;t.off("node:".concat(e),this.onCollapseExpand),t.off("combo:".concat(e),this.onCollapseExpand)}},{key:"validate",value:function(t){if(this.destroyed)return!1;var e=this.options.enable;return mn(e)?e(t):!!e}},{key:"destroy",value:function(){this.unbindEvents(),xn(e,"destroy",this,3)([])}}])}(Km);aB.defaultOptions={enable:!0,animation:!0,trigger:ty.DBLCLICK,align:!0};var sB={},uB=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())})},cB="g6-create-edge-assist-node-id",lB=function(t){function e(t,n){var r;return x(this,e),(r=F(this,e,[t,Object.assign({},e.defaultOptions,n)])).drop=function(t){return uB(r,void 0,void 0,(0,Dn.A)().m(function e(){var n;return(0,Dn.A)().w(function(e){for(;;)switch(e.n){case 0:if(n=t.targetType,!["combo","node"].includes(n)||!this.source){e.n=2;break}return e.n=1,this.handleCreateEdge(t);case 1:e.n=3;break;case 2:return e.n=3,this.cancelEdge();case 3:return e.a(2)}},e,this)}))},r.handleCreateEdge=function(t){return uB(r,void 0,void 0,(0,Dn.A)().m(function e(){var n,r,i,o,a,s,u,c,l,A;return(0,Dn.A)().w(function(e){for(;;)switch(e.n){case 0:if(this.validate(t)){e.n=1;break}return e.a(2);case 1:if(o=this.context,a=o.graph,s=o.canvas,u=o.batch,c=o.element,l=this.options.style,!this.source){e.n=3;break}return this.createEdge(t),e.n=2,this.cancelEdge();case 2:case 4:return e.a(2);case 3:return u.startBatch(),s.setCursor("crosshair"),this.source=this.getSelectedNodeIDs([t.target.id])[0],A=a.getElementData(this.source),a.addNodeData([{id:cB,style:{visibility:"hidden",ports:[{key:"port-1",placement:[.5,.5]}],x:null===(n=A.style)||void 0===n?void 0:n.x,y:null===(r=A.style)||void 0===r?void 0:r.y}}]),a.addEdgeData([{id:"g6-create-edge-assist-edge-id",source:this.source,target:cB,style:Object.assign({pointerEvents:"none"},l)}]),e.n=4,null===(i=c.draw({animation:!1}))||void 0===i?void 0:i.finished}},e,this)}))},r.updateAssistEdge=function(t){return uB(r,void 0,void 0,(0,Dn.A)().m(function e(){var n,r,i,o;return(0,Dn.A)().w(function(e){for(;;)switch(e.n){case 0:if(this.source){e.n=1;break}return e.a(2);case 1:return r=this.context,i=r.model,o=r.element,i.translateNodeTo(cB,[t.canvas.x,t.canvas.y]),e.n=2,null===(n=o.draw({animation:!1,silence:!0}))||void 0===n?void 0:n.finished;case 2:return e.a(2)}},e,this)}))},r.createEdge=function(t){var e,n,i=r.context.graph,o=r.options,a=o.style,s=o.onFinish,u=o.onCreate;if(void 0!==(null===(e=t.target)||void 0===e?void 0:e.id)&&void 0!==r.source){var c=null===(n=r.getSelectedNodeIDs([t.target.id]))||void 0===n?void 0:n[0],l="".concat(r.source,"-").concat(c,"-").concat(function(t){return sB[t=t||"g"]?sB[t]+=1:sB[t]=1,t+sB[t]}()),A=u({id:l,source:r.source,target:c,style:a});A&&(i.addEdgeData([A]),s(A))}},r.cancelEdge=function(){return uB(r,void 0,void 0,(0,Dn.A)().m(function t(){var e,n,r,i,o;return(0,Dn.A)().w(function(t){for(;;)switch(t.n){case 0:if(this.source){t.n=1;break}return t.a(2);case 1:return n=this.context,r=n.graph,i=n.element,o=n.batch,r.removeNodeData([cB]),this.source=void 0,t.n=2,null===(e=i.draw({animation:!1}))||void 0===e?void 0:e.finished;case 2:o.endBatch();case 3:return t.a(2)}},t,this)}))},r.bindEvents(),r}return P(e,t),B(e,[{key:"update",value:function(t){xn(e,"update",this,3)([t]),this.bindEvents()}},{key:"bindEvents",value:function(){var t=this.context.graph,e=this.options.trigger;this.unbindEvents(),"click"===e?(t.on(oy.CLICK,this.handleCreateEdge),t.on($g.CLICK,this.handleCreateEdge),t.on(Jg.CLICK,this.cancelEdge),t.on(ny.CLICK,this.cancelEdge)):(t.on(oy.DRAG_START,this.handleCreateEdge),t.on($g.DRAG_START,this.handleCreateEdge),t.on(ty.POINTER_UP,this.drop)),t.on(ty.POINTER_MOVE,this.updateAssistEdge)}},{key:"getSelectedNodeIDs",value:function(t){return Array.from(new Set(this.context.graph.getElementDataByState("node",this.options.state).map(function(t){return t.id}).concat(t)))}},{key:"validate",value:function(t){if(this.destroyed)return!1;var e=this.options.enable;return mn(e)?e(t):!!e}},{key:"unbindEvents",value:function(){var t=this.context.graph;t.off(oy.CLICK,this.handleCreateEdge),t.off($g.CLICK,this.handleCreateEdge),t.off(Jg.CLICK,this.cancelEdge),t.off(ny.CLICK,this.cancelEdge),t.off(oy.DRAG_START,this.handleCreateEdge),t.off($g.DRAG_START,this.handleCreateEdge),t.off(ty.POINTER_UP,this.drop),t.off(ty.POINTER_MOVE,this.updateAssistEdge)}},{key:"destroy",value:function(){this.unbindEvents(),xn(e,"destroy",this,3)([])}}])}(Km);lB.defaultOptions={animation:!0,enable:!0,style:{},trigger:"drag",onCreate:function(t){return t},onFinish:function(){}};const AB=function(t,e,n){var r;return function(){var i=this,o=arguments,a=n&&!r;clearTimeout(r),r=setTimeout(function(){r=null,n||t.apply(i,o)},e),a&&t.apply(i,o)}};var fB=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())})},dB=function(t){function e(t,n){var r;return x(this,e),(r=F(this,e,[t,Object.assign({},e.defaultOptions,n)])).isDragging=!1,r.onDragStart=function(t){r.validate(t)&&(r.isDragging=!0,r.context.canvas.setCursor("grabbing"))},r.onDrag=function(t){var e,n,i,o;if(r.isDragging&&!Tb.isPinching){var a=null!==(n=null===(e=t.movement)||void 0===e?void 0:e.x)&&void 0!==n?n:t.dx,s=null!==(o=null===(i=t.movement)||void 0===i?void 0:i.y)&&void 0!==o?o:t.dy;0!==(a|s)&&r.translate([a,s],!1)}},r.onDragEnd=function(){var t,e;r.isDragging=!1,r.context.canvas.setCursor(r.defaultCursor),null===(e=(t=r.options).onFinish)||void 0===e||e.call(t)},r.invokeOnFinish=AB(function(){var t,e;null===(e=(t=r.options).onFinish)||void 0===e||e.call(t)},300),r.shortcut=new Ib(t.graph),r.bindEvents(),r.defaultCursor=r.context.canvas.getConfig().cursor||"default",r}return P(e,t),B(e,[{key:"update",value:function(t){this.unbindEvents(),xn(e,"update",this,3)([t]),this.bindEvents()}},{key:"bindEvents",value:function(){var t=this,e=this.options.trigger;if(bn(e)){var n=e.up,r=void 0===n?[]:n,i=e.down,o=void 0===i?[]:i,a=e.left,s=void 0===a?[]:a,u=e.right,c=void 0===u?[]:u;this.shortcut.bind(r,function(e){return t.onTranslate([0,1],e)}),this.shortcut.bind(o,function(e){return t.onTranslate([0,-1],e)}),this.shortcut.bind(s,function(e){return t.onTranslate([1,0],e)}),this.shortcut.bind(c,function(e){return t.onTranslate([-1,0],e)})}else{var l=this.context.graph;l.on(ty.DRAG_START,this.onDragStart),l.on(ty.DRAG,this.onDrag),l.on(ty.DRAG_END,this.onDragEnd)}}},{key:"onTranslate",value:function(t,e){return fB(this,void 0,void 0,(0,Dn.A)().m(function n(){var r,i;return(0,Dn.A)().w(function(n){for(;;)switch(n.n){case 0:if(this.validate(e)){n.n=1;break}return n.a(2);case 1:return r=this.options.sensitivity,i=-1*r,n.n=2,this.translate($m(t,i),this.options.animation);case 2:this.invokeOnFinish();case 3:return n.a(2)}},n,this)}))}},{key:"translate",value:function(t,e){return fB(this,void 0,void 0,(0,Dn.A)().m(function n(){return(0,Dn.A)().w(function(n){for(;;)switch(n.n){case 0:return t=this.clampByDirection(t),t=this.clampByRange(t),t=this.clampByRotation(t),n.n=1,this.context.graph.translateBy(t,e);case 1:return n.a(2)}},n,this)}))}},{key:"clampByRotation",value:function(t){var e=v(t,2);return Ab([e[0],e[1]],this.context.graph.getRotation())}},{key:"clampByDirection",value:function(t){var e=v(t,2),n=e[0],r=e[1],i=this.options.direction;return"x"===i?r=0:"y"===i&&(n=0),[n,r]}},{key:"clampByRange",value:function(t){var e=v(t,2),n=e[0],r=e[1],i=this.context,o=i.viewport,a=v(i.canvas.getSize(),2),s=a[0],u=a[1],c=v(Uy(this.options.range),4),l=[u*c[0],s*c[1],u*c[2],s*c[3]],A=Gy(Ky(o.getCanvasCenter()),l),f=Jm(o.getViewportCenter(),[n,r,0]);if(!Wy(f,A)){var d=v(A.min,2),h=d[0],p=d[1],g=v(A.max,2),y=g[0],m=g[1];(f[0]<h&&n>0||f[0]>y&&n<0)&&(n=0),(f[1]<p&&r>0||f[1]>m&&r<0)&&(r=0)}return[n,r]}},{key:"validate",value:function(t){if(this.destroyed)return!1;var e=this.options.enable;return"function"==typeof e?e(t):!!e}},{key:"unbindEvents",value:function(){this.shortcut.unbindAll();var t=this.context.graph;t.off(ty.DRAG_START,this.onDragStart),t.off(ty.DRAG,this.onDrag),t.off(ty.DRAG_END,this.onDragEnd)}},{key:"destroy",value:function(){this.shortcut.destroy(),this.unbindEvents(),this.context.canvas.setCursor(this.defaultCursor),xn(e,"destroy",this,3)([])}}])}(Km);dB.defaultOptions={enable:function(t){return!("targetType"in t)||"canvas"===t.targetType},sensitivity:10,direction:"both",range:1/0};var hB=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())})},pB=function(t){function e(t,n){var r;return x(this,e),(r=F(this,e,[t,Object.assign({},e.defaultOptions,n)])).enable=!1,r.enableElements=["node","combo"],r.target=[],r.shadowOrigin=[0,0],r.hiddenEdges=[],r.isDragging=!1,r.onDrop=function(t){return hB(r,void 0,void 0,(0,Dn.A)().m(function e(){var n,r,i,o,a;return(0,Dn.A)().w(function(e){for(;;)switch(e.n){case 0:if("link"===this.options.dropEffect){e.n=1;break}return e.a(2);case 1:return r=this.context,i=r.model,o=r.element,a=t.target.id,this.target.forEach(function(t){var e=i.getParentData(t,cy);e&&Sm(e)===a&&i.refreshComboData(a),i.setParent(t,a,cy)}),e.n=2,null===(n=null==o?void 0:o.draw({animation:!0}))||void 0===n?void 0:n.finished;case 2:return e.a(2)}},e,this)}))},r.setCursor=function(t){if(!r.isDragging){var e=t.type,n=r.context.canvas,i=r.options.cursor;e===ty.POINTER_ENTER?n.setCursor((null==i?void 0:i.grab)||"grab"):n.setCursor((null==i?void 0:i.default)||"default")}},r.onDragStart=r.onDragStart.bind(r),r.onDrag=r.onDrag.bind(r),r.onDragEnd=r.onDragEnd.bind(r),r.onDrop=r.onDrop.bind(r),r.bindEvents(),r}return P(e,t),B(e,[{key:"update",value:function(t){this.unbindEvents(),xn(e,"update",this,3)([t]),this.bindEvents()}},{key:"bindEvents",value:function(){var t=this,e=this.context,n=e.graph,r=e.canvas.getLayer().getContextService().$canvas;r&&(r.addEventListener("blur",this.onDragEnd),r.addEventListener("contextmenu",this.onDragEnd)),this.enableElements.forEach(function(e){n.on("".concat(e,":").concat(ty.DRAG_START),t.onDragStart),n.on("".concat(e,":").concat(ty.DRAG),t.onDrag),n.on("".concat(e,":").concat(ty.DRAG_END),t.onDragEnd),n.on("".concat(e,":").concat(ty.POINTER_ENTER),t.setCursor),n.on("".concat(e,":").concat(ty.POINTER_LEAVE),t.setCursor)}),["link"].includes(this.options.dropEffect)&&(n.on($g.DROP,this.onDrop),n.on(Jg.DROP,this.onDrop))}},{key:"getSelectedNodeIDs",value:function(t){return Array.from(new Set(this.context.graph.getElementDataByState("node",this.options.state).map(function(t){return t.id}).concat(t)))}},{key:"getDelta",value:function(t){var e=this.context.graph.getZoom();return tb([t.dx,t.dy],e)}},{key:"onDragStart",value:function(t){var e;if(this.enable=this.validate(t),this.enable){var n=this.context,r=n.batch,i=n.canvas,o=n.graph;i.setCursor((null===(e=this.options.cursor)||void 0===e?void 0:e.grabbing)||"grabbing"),this.isDragging=!0,r.startBatch();var a=t.target.id;o.getElementState(a).includes(this.options.state)?this.target=this.getSelectedNodeIDs([a]):this.target=[a],this.hideEdge(),this.context.graph.frontElement(this.target),this.options.shadow&&this.createShadow(this.target)}}},{key:"onDrag",value:function(t){if(this.enable){var e=this.getDelta(t);this.options.shadow?this.moveShadow(e):this.moveElement(this.target,e)}}},{key:"onDragEnd",value:function(){var t,e,n;if(this.enable){if(this.enable=!1,this.options.shadow){if(!this.shadow)return;this.shadow.style.visibility="hidden";var r=this.shadow.attributes,i=r.x,o=void 0===i?0:i,a=r.y,s=v(Jm([+o,+(void 0===a?0:a)],this.shadowOrigin),2),u=s[0],c=s[1];this.moveElement(this.target,[u,c])}this.showEdges(),null===(e=(t=this.options).onFinish)||void 0===e||e.call(t,this.target);var l=this.context,A=l.batch,f=l.canvas;A.endBatch(),f.setCursor((null===(n=this.options.cursor)||void 0===n?void 0:n.grab)||"grab"),this.isDragging=!1,this.target=[]}}},{key:"validate",value:function(t){if(this.destroyed||oB(t.target)||this.context.graph.isCollapsingExpanding)return!1;var e=this.options.enable;return mn(e)?e(t):!!e}},{key:"clampByRotation",value:function(t){var e=v(t,2);return Ab([e[0],e[1]],this.context.graph.getRotation())}},{key:"moveElement",value:function(t,e){return hB(this,void 0,void 0,(0,Dn.A)().m(function n(){var r,i,o,a=this;return(0,Dn.A)().w(function(n){for(;;)switch(n.n){case 0:r=this.context,i=r.graph,o=r.model,"move"===this.options.dropEffect&&t.forEach(function(t){return o.refreshComboData(t)}),i.translateElementBy(Object.fromEntries(t.map(function(t){return[t,a.clampByRotation(e)]})),!1);case 1:return n.a(2)}},n,this)}))}},{key:"moveShadow",value:function(t){if(this.shadow){var e=this.shadow.attributes,n=e.x,r=void 0===n?0:n,i=e.y,o=void 0===i?0:i,a=v(t,2),s=a[0],u=a[1];this.shadow.attr({x:+r+s,y:+o+u})}}},{key:"createShadow",value:function(t){var e=this,n=Xb(this.options,"shadow"),r=Vy(t.map(function(t){return e.context.element.getElement(t).getBounds()})),i=v(r.min,2),o=i[0],a=i[1];this.shadowOrigin=[o,a];var s=v(Hy(r),2),u={width:s[0],height:s[1],x:o,y:a};this.shadow?this.shadow.attr(Object.assign(Object.assign(Object.assign({},n),u),{visibility:"visible"})):(this.shadow=new Yu({style:Object.assign(Object.assign(Object.assign({$layer:"transient"},n),u),{pointerEvents:"none"})}),this.context.canvas.appendChild(this.shadow))}},{key:"showEdges",value:function(){this.options.shadow||0===this.hiddenEdges.length||(this.context.graph.showElement(this.hiddenEdges),this.hiddenEdges=[])}},{key:"hideEdge",value:function(){var t=this.options,e=t.hideEdge,n=t.shadow;if("none"!==e&&!n){var r=this.context.graph;this.hiddenEdges="all"===e?r.getEdgeData().map(Sm):Array.from(new Set(this.target.map(function(t){return r.getRelatedEdgesData(t,e).map(Sm)}).flat())),r.hideElement(this.hiddenEdges)}}},{key:"unbindEvents",value:function(){var t=this,e=this.context,n=e.graph,r=e.canvas.getLayer().getContextService().$canvas;r&&(r.removeEventListener("blur",this.onDragEnd),r.removeEventListener("contextmenu",this.onDragEnd)),this.enableElements.forEach(function(e){n.off("".concat(e,":").concat(ty.DRAG_START),t.onDragStart),n.off("".concat(e,":").concat(ty.DRAG),t.onDrag),n.off("".concat(e,":").concat(ty.DRAG_END),t.onDragEnd),n.off("".concat(e,":").concat(ty.POINTER_ENTER),t.setCursor),n.off("".concat(e,":").concat(ty.POINTER_LEAVE),t.setCursor)}),n.off("combo:".concat(ty.DROP),this.onDrop),n.off("canvas:".concat(ty.DROP),this.onDrop)}},{key:"destroy",value:function(){var t;this.unbindEvents(),null===(t=this.shadow)||void 0===t||t.destroy(),xn(e,"destroy",this,3)([])}}])}(Km);pB.defaultOptions={animation:!0,enable:function(t){return["node","combo"].includes(t.targetType)},dropEffect:"move",state:"selected",hideEdge:"none",shadow:!1,shadowZIndex:100,shadowFill:"#F3F9FF",shadowFillOpacity:.5,shadowStroke:"#1890FF",shadowStrokeOpacity:.9,shadowLineDash:[5,5],cursor:{default:"default",grab:"grab",grabbing:"grabbing"}};var vB=function(){function t(){this._events={}}return t.prototype.on=function(t,e,n){return this._events[t]||(this._events[t]=[]),this._events[t].push({callback:e,once:!!n}),this},t.prototype.once=function(t,e){return this.on(t,e,!0)},t.prototype.emit=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this._events[t]||[],o=this._events["*"]||[],a=function(r){for(var i=r.length,o=0;o<i;o++)if(r[o]){var a=r[o],s=a.callback;a.once&&(r.splice(o,1),0===r.length&&delete e._events[t],i--,o--),s.apply(e,n)}};a(i),a(o)},t.prototype.off=function(t,e){if(t)if(e){for(var n=this._events[t]||[],r=n.length,i=0;i<r;i++)n[i].callback===e&&(n.splice(i,1),r--,i--);0===n.length&&delete this._events[t]}else delete this._events[t];else this._events={};return this},t.prototype.getEvents=function(){return this._events},t}();const gB=vB;function yB(t,e,n,r){for(;t.length;){var i=t.shift();if(n(i))return!0;e.add(i.id),r(i.id).forEach(function(n){e.has(n.id)||(e.add(n.id),t.push(n))})}return!1}function mB(t,e,n,r){if(n(t))return!0;e.add(t.id);var i,o=qn(r(t.id));try{for(o.s();!(i=o.n()).done;){var a=i.value;if(!e.has(a.id)&&mB(a,e,n,r))return!0}}catch(t){o.e(t)}finally{o.f()}return!1}var bB=function(){return!0},wB=function(){return B(function t(e){var n=this;x(this,t),m(this,"graph",void 0),m(this,"nodeFilter",void 0),m(this,"edgeFilter",void 0),m(this,"cacheEnabled",void 0),m(this,"inEdgesMap",new Map),m(this,"outEdgesMap",new Map),m(this,"bothEdgesMap",new Map),m(this,"allNodesMap",new Map),m(this,"allEdgesMap",new Map),m(this,"clearCache",function(){n.inEdgesMap.clear(),n.outEdgesMap.clear(),n.bothEdgesMap.clear(),n.allNodesMap.clear(),n.allEdgesMap.clear()}),m(this,"refreshCache",function(){n.clearCache(),n.updateCache(n.graph.getAllNodes().map(function(t){return t.id}))}),m(this,"updateCache",function(t){var e=new Set;t.forEach(function(t){var r=n.bothEdgesMap.get(t);if(r&&r.forEach(function(t){return e.add(t.id)}),n.hasNode(t)){var i=n.graph.getRelatedEdges(t,"in").filter(n.edgeFilter),o=n.graph.getRelatedEdges(t,"out").filter(n.edgeFilter),a=Array.from(new Set([].concat(O(i),O(o))));a.forEach(function(t){return e.add(t.id)}),n.inEdgesMap.set(t,i),n.outEdgesMap.set(t,o),n.bothEdgesMap.set(t,a),n.allNodesMap.set(t,n.graph.getNode(t))}else n.inEdgesMap.delete(t),n.outEdgesMap.delete(t),n.bothEdgesMap.delete(t),n.allNodesMap.delete(t)}),e.forEach(function(t){n.hasEdge(t)?n.allEdgesMap.set(t,n.graph.getEdge(t)):n.allEdgesMap.delete(t)})}),m(this,"handleGraphChanged",function(t){var e=new Set;t.changes.forEach(function(n){switch(n.type){case"NodeAdded":case"NodeRemoved":e.add(n.value.id);break;case"NodeDataUpdated":e.add(n.id);break;case"EdgeAdded":case"EdgeRemoved":e.add(n.value.source),e.add(n.value.target);break;case"EdgeUpdated":"source"!==n.propertyName&&"target"!==n.propertyName||(e.add(n.oldValue),e.add(n.newValue));break;case"EdgeDataUpdated":if(t.graph.hasEdge(n.id)){var r=t.graph.getEdge(n.id);e.add(r.source),e.add(r.target)}}}),n.updateCache(e)}),this.graph=e.graph;var r=e.nodeFilter||bB,i=e.edgeFilter||bB;this.nodeFilter=r,this.edgeFilter=function(t){var e=n.graph.getEdgeDetail(t.id),o=e.source,a=e.target;return!(!r(o)||!r(a))&&i(t,o,a)},"auto"===e.cache?(this.cacheEnabled=!0,this.startAutoCache()):"manual"===e.cache?this.cacheEnabled=!0:this.cacheEnabled=!1},[{key:"startAutoCache",value:function(){this.refreshCache(),this.graph.on("changed",this.handleGraphChanged)}},{key:"stopAutoCache",value:function(){this.graph.off("changed",this.handleGraphChanged)}},{key:"checkNodeExistence",value:function(t){this.getNode(t)}},{key:"hasNode",value:function(t){if(!this.graph.hasNode(t))return!1;var e=this.graph.getNode(t);return this.nodeFilter(e)}},{key:"areNeighbors",value:function(t,e){return this.checkNodeExistence(t),this.getNeighbors(e).some(function(e){return e.id===t})}},{key:"getNode",value:function(t){var e=this.graph.getNode(t);if(!this.nodeFilter(e))throw new Error("Node not found for id: "+t);return e}},{key:"getRelatedEdges",value:function(t,e){return this.checkNodeExistence(t),this.cacheEnabled?"in"===e?this.inEdgesMap.get(t):"out"===e?this.outEdgesMap.get(t):this.bothEdgesMap.get(t):this.graph.getRelatedEdges(t,e).filter(this.edgeFilter)}},{key:"getDegree",value:function(t,e){return this.getRelatedEdges(t,e).length}},{key:"getSuccessors",value:function(t){var e=this,n=this.getRelatedEdges(t,"out").map(function(t){return e.getNode(t.target)});return Array.from(new Set(n))}},{key:"getPredecessors",value:function(t){var e=this,n=this.getRelatedEdges(t,"in").map(function(t){return e.getNode(t.source)});return Array.from(new Set(n))}},{key:"getNeighbors",value:function(t){var e=this.getPredecessors(t),n=this.getSuccessors(t);return Array.from(new Set([].concat(O(e),O(n))))}},{key:"hasEdge",value:function(t){if(!this.graph.hasEdge(t))return!1;var e=this.graph.getEdge(t);return this.edgeFilter(e)}},{key:"getEdge",value:function(t){var e=this.graph.getEdge(t);if(!this.edgeFilter(e))throw new Error("Edge not found for id: "+t);return e}},{key:"getEdgeDetail",value:function(t){var e=this.getEdge(t);return{edge:e,source:this.getNode(e.source),target:this.getNode(e.target)}}},{key:"hasTreeStructure",value:function(t){return this.graph.hasTreeStructure(t)}},{key:"getRoots",value:function(t){return this.graph.getRoots(t).filter(this.nodeFilter)}},{key:"getChildren",value:function(t,e){return this.checkNodeExistence(t),this.graph.getChildren(t,e).filter(this.nodeFilter)}},{key:"getParent",value:function(t,e){this.checkNodeExistence(t);var n=this.graph.getParent(t,e);return n&&this.nodeFilter(n)?n:null}},{key:"getAllNodes",value:function(){return this.cacheEnabled?Array.from(this.allNodesMap.values()):this.graph.getAllNodes().filter(this.nodeFilter)}},{key:"getAllEdges",value:function(){return this.cacheEnabled?Array.from(this.allEdgesMap.values()):this.graph.getAllEdges().filter(this.edgeFilter)}},{key:"bfs",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"out",r={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[n];yB([this.getNode(t)],new Set,e,r)}},{key:"dfs",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"out",r={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[n];mB(this.getNode(t),new Set,e,r)}}])}(),xB=function(t){function e(t){var n;return x(this,e),m(n=F(this,e),"nodeMap",new Map),m(n,"edgeMap",new Map),m(n,"inEdgesMap",new Map),m(n,"outEdgesMap",new Map),m(n,"bothEdgesMap",new Map),m(n,"treeIndices",new Map),m(n,"changes",[]),m(n,"batchCount",0),m(n,"onChanged",function(){}),m(n,"batch",function(t){n.batchCount+=1,t(),n.batchCount-=1,n.batchCount||n.commit()}),t?(t.nodes&&n.addNodes(t.nodes),t.edges&&n.addEdges(t.edges),t.tree&&n.addTree(t.tree),t.onChanged&&(n.onChanged=t.onChanged),n):S(n)}return P(e,t),B(e,[{key:"commit",value:function(){var t=this.changes;this.changes=[];var e={graph:this,changes:t};this.emit("changed",e),this.onChanged(e)}},{key:"reduceChanges",value:function(t){var e=[];return t.forEach(function(t){switch(t.type){case"NodeRemoved":var n=!1;e=e.filter(function(e){if("NodeAdded"===e.type){var r=e.value.id===t.value.id;return r&&(n=!0),!r}return"NodeDataUpdated"===e.type?e.id!==t.value.id:"TreeStructureChanged"!==e.type||e.nodeId!==t.value.id}),n||e.push(t);break;case"EdgeRemoved":var r=!1;e=e.filter(function(e){if("EdgeAdded"===e.type){var n=e.value.id===t.value.id;return n&&(r=!0),!n}return"EdgeDataUpdated"!==e.type&&"EdgeUpdated"!==e.type||e.id!==t.value.id}),r||e.push(t);break;case"NodeDataUpdated":case"EdgeDataUpdated":case"EdgeUpdated":var i=e.findIndex(function(e){return e.type===t.type&&e.id===t.id&&(void 0===t.propertyName||e.propertyName===t.propertyName)}),o=e[i];o?void 0!==t.propertyName?o.newValue=t.newValue:(e.splice(i,1),e.push(t)):e.push(t);break;case"TreeStructureDetached":(e=e.filter(function(e){return"TreeStructureAttached"===e.type?e.treeKey!==t.treeKey:"TreeStructureChanged"!==e.type||e.treeKey!==t.treeKey})).push(t);break;case"TreeStructureChanged":var a=e.find(function(e){return"TreeStructureChanged"===e.type&&e.treeKey===t.treeKey&&e.nodeId===t.nodeId});a?a.newParentId=t.newParentId:e.push(t);break;default:e.push(t)}}),e}},{key:"checkNodeExistence",value:function(t){this.getNode(t)}},{key:"hasNode",value:function(t){return this.nodeMap.has(t)}},{key:"areNeighbors",value:function(t,e){return this.getNeighbors(e).some(function(e){return e.id===t})}},{key:"getNode",value:function(t){var e=this.nodeMap.get(t);if(!e)throw new Error("Node not found for id: "+t);return e}},{key:"getRelatedEdges",value:function(t,e){if(this.checkNodeExistence(t),"in"===e){var n=this.inEdgesMap.get(t);return Array.from(n)}if("out"===e){var r=this.outEdgesMap.get(t);return Array.from(r)}var i=this.bothEdgesMap.get(t);return Array.from(i)}},{key:"getDegree",value:function(t,e){return this.getRelatedEdges(t,e).length}},{key:"getSuccessors",value:function(t){var e=this,n=this.getRelatedEdges(t,"out").map(function(t){return e.getNode(t.target)});return Array.from(new Set(n))}},{key:"getPredecessors",value:function(t){var e=this,n=this.getRelatedEdges(t,"in").map(function(t){return e.getNode(t.source)});return Array.from(new Set(n))}},{key:"getNeighbors",value:function(t){var e=this.getPredecessors(t),n=this.getSuccessors(t);return Array.from(new Set([].concat(O(e),O(n))))}},{key:"doAddNode",value:function(t){if(this.hasNode(t.id))throw new Error("Node already exists: "+t.id);this.nodeMap.set(t.id,t),this.inEdgesMap.set(t.id,new Set),this.outEdgesMap.set(t.id,new Set),this.bothEdgesMap.set(t.id,new Set),this.treeIndices.forEach(function(e){e.childrenMap.set(t.id,new Set)}),this.changes.push({type:"NodeAdded",value:t})}},{key:"addNodes",value:function(t){var e=this;this.batch(function(){var n,r=qn(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;e.doAddNode(i)}}catch(t){r.e(t)}finally{r.f()}})}},{key:"addNode",value:function(t){this.addNodes([t])}},{key:"doRemoveNode",value:function(t){var e=this,n=this.getNode(t),r=this.bothEdgesMap.get(t);null==r||r.forEach(function(t){return e.doRemoveEdge(t.id)}),this.nodeMap.delete(t),this.treeIndices.forEach(function(e){var r,i;null===(r=e.childrenMap.get(t))||void 0===r||r.forEach(function(t){e.parentMap.delete(t.id)});var o=e.parentMap.get(t);o&&(null===(i=e.childrenMap.get(o.id))||void 0===i||i.delete(n)),e.parentMap.delete(t),e.childrenMap.delete(t)}),this.bothEdgesMap.delete(t),this.inEdgesMap.delete(t),this.outEdgesMap.delete(t),this.changes.push({type:"NodeRemoved",value:n})}},{key:"removeNodes",value:function(t){var e=this;this.batch(function(){t.forEach(function(t){return e.doRemoveNode(t)})})}},{key:"removeNode",value:function(t){this.removeNodes([t])}},{key:"updateNodeDataProperty",value:function(t,e,n){var r=this,i=this.getNode(t);this.batch(function(){var o=i.data[e],a=n;i.data[e]=a,r.changes.push({type:"NodeDataUpdated",id:t,propertyName:e,oldValue:o,newValue:a})})}},{key:"mergeNodeData",value:function(t,e){var n=this;this.batch(function(){Object.entries(e).forEach(function(e){var r=v(e,2),i=r[0],o=r[1];n.updateNodeDataProperty(t,i,o)})})}},{key:"updateNodeData",value:function(){var t,e=this,n=arguments.length<=0?void 0:arguments[0],r=this.getNode(n);"string"!=typeof(arguments.length<=1?void 0:arguments[1])?("function"==typeof(arguments.length<=1?void 0:arguments[1])?t=(arguments.length<=1?void 0:arguments[1])(r.data):"object"==typeof(arguments.length<=1?void 0:arguments[1])&&(t=arguments.length<=1?void 0:arguments[1]),this.batch(function(){var i=r.data,o=t;r.data=t,e.changes.push({type:"NodeDataUpdated",id:n,oldValue:i,newValue:o})})):this.updateNodeDataProperty(n,arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}},{key:"checkEdgeExistence",value:function(t){if(!this.hasEdge(t))throw new Error("Edge not found for id: "+t)}},{key:"hasEdge",value:function(t){return this.edgeMap.has(t)}},{key:"getEdge",value:function(t){return this.checkEdgeExistence(t),this.edgeMap.get(t)}},{key:"getEdgeDetail",value:function(t){var e=this.getEdge(t);return{edge:e,source:this.getNode(e.source),target:this.getNode(e.target)}}},{key:"doAddEdge",value:function(t){if(this.hasEdge(t.id))throw new Error("Edge already exists: "+t.id);this.checkNodeExistence(t.source),this.checkNodeExistence(t.target),this.edgeMap.set(t.id,t);var e=this.inEdgesMap.get(t.target),n=this.outEdgesMap.get(t.source),r=this.bothEdgesMap.get(t.source),i=this.bothEdgesMap.get(t.target);e.add(t),n.add(t),r.add(t),i.add(t),this.changes.push({type:"EdgeAdded",value:t})}},{key:"addEdges",value:function(t){var e=this;this.batch(function(){var n,r=qn(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;e.doAddEdge(i)}}catch(t){r.e(t)}finally{r.f()}})}},{key:"addEdge",value:function(t){this.addEdges([t])}},{key:"doRemoveEdge",value:function(t){var e=this.getEdge(t),n=this.outEdgesMap.get(e.source),r=this.inEdgesMap.get(e.target),i=this.bothEdgesMap.get(e.source),o=this.bothEdgesMap.get(e.target);n.delete(e),r.delete(e),i.delete(e),o.delete(e),this.edgeMap.delete(t),this.changes.push({type:"EdgeRemoved",value:e})}},{key:"removeEdges",value:function(t){var e=this;this.batch(function(){t.forEach(function(t){return e.doRemoveEdge(t)})})}},{key:"removeEdge",value:function(t){this.removeEdges([t])}},{key:"updateEdgeSource",value:function(t,e){var n=this,r=this.getEdge(t);this.checkNodeExistence(e);var i=r.source,o=e;this.outEdgesMap.get(i).delete(r),this.bothEdgesMap.get(i).delete(r),this.outEdgesMap.get(o).add(r),this.bothEdgesMap.get(o).add(r),r.source=e,this.batch(function(){n.changes.push({type:"EdgeUpdated",id:t,propertyName:"source",oldValue:i,newValue:o})})}},{key:"updateEdgeTarget",value:function(t,e){var n=this,r=this.getEdge(t);this.checkNodeExistence(e);var i=r.target,o=e;this.inEdgesMap.get(i).delete(r),this.bothEdgesMap.get(i).delete(r),this.inEdgesMap.get(o).add(r),this.bothEdgesMap.get(o).add(r),r.target=e,this.batch(function(){n.changes.push({type:"EdgeUpdated",id:t,propertyName:"target",oldValue:i,newValue:o})})}},{key:"updateEdgeDataProperty",value:function(t,e,n){var r=this,i=this.getEdge(t);this.batch(function(){var o=i.data[e],a=n;i.data[e]=a,r.changes.push({type:"EdgeDataUpdated",id:t,propertyName:e,oldValue:o,newValue:a})})}},{key:"updateEdgeData",value:function(){var t,e=this,n=arguments.length<=0?void 0:arguments[0],r=this.getEdge(n);"string"!=typeof(arguments.length<=1?void 0:arguments[1])?("function"==typeof(arguments.length<=1?void 0:arguments[1])?t=(arguments.length<=1?void 0:arguments[1])(r.data):"object"==typeof(arguments.length<=1?void 0:arguments[1])&&(t=arguments.length<=1?void 0:arguments[1]),this.batch(function(){var i=r.data,o=t;r.data=t,e.changes.push({type:"EdgeDataUpdated",id:n,oldValue:i,newValue:o})})):this.updateEdgeDataProperty(n,arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}},{key:"mergeEdgeData",value:function(t,e){var n=this;this.batch(function(){Object.entries(e).forEach(function(e){var r=v(e,2),i=r[0],o=r[1];n.updateEdgeDataProperty(t,i,o)})})}},{key:"checkTreeExistence",value:function(t){if(!this.hasTreeStructure(t))throw new Error("Tree structure not found for treeKey: "+t)}},{key:"hasTreeStructure",value:function(t){return this.treeIndices.has(t)}},{key:"attachTreeStructure",value:function(t){var e=this;this.treeIndices.has(t)||(this.treeIndices.set(t,{parentMap:new Map,childrenMap:new Map}),this.batch(function(){e.changes.push({type:"TreeStructureAttached",treeKey:t})}))}},{key:"detachTreeStructure",value:function(t){var e=this;this.checkTreeExistence(t),this.treeIndices.delete(t),this.batch(function(){e.changes.push({type:"TreeStructureDetached",treeKey:t})})}},{key:"addTree",value:function(t,e){var n=this;this.batch(function(){n.attachTreeStructure(e);for(var r=[],i=Array.isArray(t)?t:[t];i.length;){var o=i.shift();r.push(o),o.children&&i.push.apply(i,O(o.children))}n.addNodes(r),r.forEach(function(t){var r;null===(r=t.children)||void 0===r||r.forEach(function(r){n.setParent(r.id,t.id,e)})})})}},{key:"getRoots",value:function(t){var e=this;return this.checkTreeExistence(t),this.getAllNodes().filter(function(n){return!e.getParent(n.id,t)})}},{key:"getChildren",value:function(t,e){this.checkNodeExistence(t),this.checkTreeExistence(e);var n=this.treeIndices.get(e).childrenMap.get(t);return Array.from(n||[])}},{key:"getParent",value:function(t,e){return this.checkNodeExistence(t),this.checkTreeExistence(e),this.treeIndices.get(e).parentMap.get(t)||null}},{key:"getAncestors",value:function(t,e){for(var n,r=[],i=this.getNode(t);n=this.getParent(i.id,e);)r.push(n),i=n;return r}},{key:"setParent",value:function(t,e,n){var r=this;this.checkTreeExistence(n);var i=this.treeIndices.get(n);if(i){var o=this.getNode(t),a=i.parentMap.get(t);if((null==a?void 0:a.id)!==e)if(null!=e){var s,u=this.getNode(e);i.parentMap.set(t,u),a&&(null===(s=i.childrenMap.get(a.id))||void 0===s||s.delete(o));var c=i.childrenMap.get(u.id);c||(c=new Set,i.childrenMap.set(u.id,c)),c.add(o),this.batch(function(){r.changes.push({type:"TreeStructureChanged",treeKey:n,nodeId:t,oldParentId:null==a?void 0:a.id,newParentId:u.id})})}else{var l;a&&(null===(l=i.childrenMap.get(a.id))||void 0===l||l.delete(o)),i.parentMap.delete(t)}}}},{key:"dfsTree",value:function(t,e,n){var r=this;return mB(this.getNode(t),new Set,e,function(t){return r.getChildren(t,n)})}},{key:"bfsTree",value:function(t,e,n){var r=this;return yB([this.getNode(t)],new Set,e,function(t){return r.getChildren(t,n)})}},{key:"getAllNodes",value:function(){return Array.from(this.nodeMap.values())}},{key:"getAllEdges",value:function(){return Array.from(this.edgeMap.values())}},{key:"bfs",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"out",r={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[n];return yB([this.getNode(t)],new Set,e,r)}},{key:"dfs",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"out",r={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[n];return mB(this.getNode(t),new Set,e,r)}},{key:"clone",value:function(){var t=new e({nodes:this.getAllNodes().map(function(t){return w(w({},t),{},{data:w({},t.data)})}),edges:this.getAllEdges().map(function(t){return w(w({},t),{},{data:w({},t.data)})})});return this.treeIndices.forEach(function(e,n){var r=e.parentMap,i=e.childrenMap,o=new Map;r.forEach(function(e,n){o.set(n,t.getNode(e.id))});var a=new Map;i.forEach(function(e,n){a.set(n,new Set(Array.from(e).map(function(e){return t.getNode(e.id)})))}),t.treeIndices.set(n,{parentMap:o,childrenMap:a})}),t}},{key:"toJSON",value:function(){return JSON.stringify({nodes:this.getAllNodes(),edges:this.getAllEdges()})}},{key:"createView",value:function(t){return new wB(w({graph:this},t))}}])}(gB),EB=B(function t(e,n){x(this,t),this.context=e,this.options=n||{}});function BB(t){var e=t.type;return["compact-box","mindmap","dendrogram","indented"].includes(e)}function kB(t){return!Array.isArray(t)&&(null==t?void 0:t.preLayout)}function OB(t){var e=t.nodes,n=t.edges,r={nodes:[],edges:[],combos:[]};return e.forEach(function(t){var e=t.data._isCombo?r.combos:r.nodes,n=t.data,i=n.x,o=n.y,a=n.z,s=void 0===a?0:a;null==e||e.push({id:t.id,style:{x:i,y:o,z:s}})}),n.forEach(function(t){var e=t.id,n=t.source,i=t.target,o=t.data,a=o.points,s=void 0===a?[]:a,u=o.controlPoints,c=void 0===u?s.slice(1,s.length-1):u;r.edges.push({id:e,source:n,target:i,style:Object.assign({},(null==c?void 0:c.length)?{controlPoints:c.map(yb)}:{})})}),r}function CB(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e in t)return t[e].apply(t,r);if("instance"in t){var o=t.instance;if(e in o)return o[e].apply(o,r)}return null}function MB(t,e){if(e in t)return t[e];if("instance"in t){var n=t.instance;if(e in n)return n[e]}return null}var SB=function(t){function e(){return x(this,e),F(this,e,arguments)}return P(e,t),B(e,[{key:"forceLayoutInstance",get:function(){return this.context.layout.getLayoutInstance().find(function(t){return["d3-force","d3-force-3d"].includes(null==t?void 0:t.id)})}},{key:"validate",value:function(t){return!!this.context.layout&&(this.forceLayoutInstance?xn(e,"validate",this,3)([t]):(gy.warn("DragElementForce only works with d3-force or d3-force-3d layout"),!1))}},{key:"moveElement",value:function(t,e){return n=this,r=void 0,i=void 0,o=(0,Dn.A)().m(function n(){var r,i=this;return(0,Dn.A)().w(function(n){for(;;)switch(n.n){case 0:r=this.forceLayoutInstance,this.context.graph.getNodeData(t).forEach(function(n,o){var a=n.style||{},s=a.x,u=void 0===s?0:s,c=a.y,l=void 0===c?0:c;r&&CB(r,"setFixedPosition",t[o],O(Zm([+u,+l],i.clampByRotation(e))))});case 1:return n.a(2)}},n,this)}),new(i||(i=Promise))(function(t,e){function a(t){try{u(o.next(t))}catch(t){e(t)}}function s(t){try{u(o.throw(t))}catch(t){e(t)}}function u(e){e.done?t(e.value):function(t){return t instanceof i?t:new i(function(e){e(t)})}(e.value).then(a,s)}u((o=o.apply(n,r||[])).next())});var n,r,i,o}},{key:"onDragStart",value:function(t){if(this.enable=this.validate(t),this.enable){this.target=this.getSelectedNodeIDs([t.target.id]),this.hideEdge(),this.context.graph.frontElement(this.target);var e=this.forceLayoutInstance;e&&MB(e,"simulation").alphaTarget(.3).restart(),this.context.graph.getNodeData(this.target).forEach(function(t){var n=t.style||{},r=n.x,i=void 0===r?0:r,o=n.y,a=void 0===o?0:o;e&&CB(e,"setFixedPosition",Sm(t),[+i,+a])})}}},{key:"onDrag",value:function(t){if(this.enable){var e=this.getDelta(t);this.moveElement(this.target,e)}}},{key:"onDragEnd",value:function(){var t=this.forceLayoutInstance;t&&MB(t,"simulation").alphaTarget(0),this.options.fixed||this.context.graph.getNodeData(this.target).forEach(function(e){t&&CB(t,"setFixedPosition",Sm(e),[null,null,null])})}}])}(pB),FB=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())})},TB=function(t){function e(t,n){var r;return x(this,e),(r=F(this,e,[t,Object.assign({},e.defaultOptions,n)])).isZoomEvent=function(t){return Boolean(t.data&&"scale"in t.data)},r.relatedEdgeToUpdate=new Set,r.zoom=r.context.graph.getZoom(),r.fixElementSize=function(t){return FB(r,void 0,void 0,(0,Dn.A)().m(function e(){var n,r,i,o,a,s,u,c,l,A,f,d=this;return(0,Dn.A)().w(function(e){for(;;)switch(e.n){case 0:if(this.validate(t)){e.n=1;break}return e.a(2);case 1:n=this.context.graph,r=this.options,i=r.state,o=r.nodeFilter,a=r.edgeFilter,s=r.comboFilter,u=(i?n.getElementDataByState("node",i):n.getNodeData()).filter(o),c=(i?n.getElementDataByState("edge",i):n.getEdgeData()).filter(a),l=(i?n.getElementDataByState("combo",i):n.getComboData()).filter(s),A=this.isZoomEvent(t)?this.zoom=Math.max(.01,Math.min(t.data.scale,10)):this.zoom,(f=[].concat(O(u),O(l))).length>0&&f.forEach(function(t){return d.fixNodeLike(t,A)}),this.updateRelatedEdges(),c.length>0&&c.forEach(function(t){return d.fixEdge(t,A)});case 2:return e.a(2)}},e,this)}))},r.cachedStyles=new Map,r.getOriginalFieldValue=function(t,e,n){var i,o=r.cachedStyles.get(t)||[],a=(null===(i=o.find(function(t){return t.shape===e}))||void 0===i?void 0:i.style)||{};return n in a||(a[n]=e.attributes[n],r.cachedStyles.set(t,[].concat(O(o.filter(function(t){return t.shape!==e})),[{shape:e,style:a}]))),a[n]},r.scaleEntireElement=function(t,e,n){e.setLocalScale(1/n);var i=r.cachedStyles.get(t)||[];i.push({shape:e}),r.cachedStyles.set(t,i)},r.scaleSpecificShapes=function(t,e,n){var i=function(t){var e=[],n=function(t){(null==t?void 0:t.children.length)&&t.children.forEach(function(t){e.push(t),n(t)})};return n(t),e}(t);(Array.isArray(n)?n:[n]).forEach(function(n){var o=n.shape,a=n.fields,s="function"==typeof o?o(i):t.getShape(o);s&&(a?a.forEach(function(n){var i=r.getOriginalFieldValue(t.id,s,n);de(i)&&(s.style[n]=i/e)}):r.scaleEntireElement(t.id,s,e))})},r.skipIfExceedViewport=function(t){var e=r.context.viewport;return!(null==e?void 0:e.isInViewport(t.getRenderBounds(),!1,30))},r.fixNodeLike=function(t,e){var n=Sm(t),i=r.context,o=i.element,a=i.model,s=o.getElement(n);if(s&&!r.skipIfExceedViewport(s)){a.getRelatedEdgesData(n).forEach(function(t){return r.relatedEdgeToUpdate.add(Sm(t))});var u=r.options[s.type];u?r.scaleSpecificShapes(s,e,u):r.scaleEntireElement(n,s,e)}},r.fixEdge=function(t,e){var n=Sm(t),i=r.context.element.getElement(n);if(i&&!r.skipIfExceedViewport(i)){var o=r.options.edge;if(!o)return i.style.transformOrigin="center",void r.scaleEntireElement(n,i,e);r.scaleSpecificShapes(i,e,o)}},r.updateRelatedEdges=function(){var t=r.context.element;r.relatedEdgeToUpdate.size>0&&r.relatedEdgeToUpdate.forEach(function(e){var n=t.getElement(e);null==n||n.update({})}),r.relatedEdgeToUpdate.clear()},r.resetTransform=function(t){return FB(r,void 0,void 0,(0,Dn.A)().m(function e(){var n;return(0,Dn.A)().w(function(e){for(;;)switch(e.n){case 0:if(!(null===(n=t.data)||void 0===n?void 0:n.firstRender)){e.n=1;break}return e.a(2);case 1:this.options.reset?this.restoreCachedStyles():this.fixElementSize({data:{scale:this.zoom}});case 2:return e.a(2)}},e,this)}))},r.bindEvents(),r}return P(e,t),B(e,[{key:"restoreCachedStyles",value:function(){var t=this;if(this.cachedStyles.size>0){this.cachedStyles.forEach(function(e){e.forEach(function(e){var n=e.shape,r=e.style;if(uw(r))n.setLocalScale(1);else{if(t.options.state)return;Object.entries(r).forEach(function(t){var e=v(t,2),r=e[0],i=e[1];return n.style[r]=i})}})});var e=this.context,n=e.graph,r=e.element,i=Object.keys(Object.fromEntries(this.cachedStyles)).filter(function(t){return t&&"node"===n.getElementType(t)});if(i.length>0){var o=new Set;i.forEach(function(t){n.getRelatedEdgesData(t).forEach(function(t){return o.add(Sm(t))})}),o.forEach(function(t){var e=null==r?void 0:r.getElement(t);null==e||e.update({})})}}}},{key:"bindEvents",value:function(){var t=this.context.graph;t.on(ry.AFTER_DRAW,this.resetTransform),t.on(ry.AFTER_TRANSFORM,this.fixElementSize)}},{key:"unbindEvents",value:function(){var t=this.context.graph;t.off(ry.AFTER_DRAW,this.resetTransform),t.off(ry.AFTER_TRANSFORM,this.fixElementSize)}},{key:"validate",value:function(t){if(this.destroyed)return!1;var e=this.options.enable;return mn(e)?e(t):!!e}},{key:"destroy",value:function(){this.unbindEvents(),xn(e,"destroy",this,3)([])}}])}(Km);TB.defaultOptions={enable:function(t){return t.data.scale<1},nodeFilter:function(){return!0},edgeFilter:function(){return!0},comboFilter:function(){return!0},edge:[{shape:"key",fields:["lineWidth"]},{shape:"halo",fields:["lineWidth"]},{shape:"label"}],reset:!1};var PB=function(t){function e(t,n){var r;return x(this,e),(r=F(this,e,[t,Object.assign({},e.defaultOptions,n)])).focus=function(t){return e=r,n=void 0,i=void 0,o=(0,Dn.A)().m(function e(){var n;return(0,Dn.A)().w(function(e){for(;;)switch(e.n){case 0:if(this.validate(t)){e.n=1;break}return e.a(2);case 1:return n=this.context.graph,e.n=2,n.focusElement(t.target.id,this.options.animation);case 2:return e.a(2)}},e,this)}),new(i||(i=Promise))(function(t,r){function a(t){try{u(o.next(t))}catch(t){r(t)}}function s(t){try{u(o.throw(t))}catch(t){r(t)}}function u(e){e.done?t(e.value):function(t){return t instanceof i?t:new i(function(e){e(t)})}(e.value).then(a,s)}u((o=o.apply(e,n||[])).next())});var e,n,i,o},r.bindEvents(),r}return P(e,t),B(e,[{key:"bindEvents",value:function(){var t=this,e=this.context.graph;this.unbindEvents(),Qb.forEach(function(n){e.on("".concat(n,":").concat(ty.CLICK),t.focus)})}},{key:"validate",value:function(t){if(this.destroyed)return!1;var e=this.options.enable;return mn(e)?e(t):!!e}},{key:"unbindEvents",value:function(){var t=this,e=this.context.graph;Qb.forEach(function(n){e.off("".concat(n,":").concat(ty.CLICK),t.focus)})}},{key:"destroy",value:function(){this.unbindEvents(),xn(e,"destroy",this,3)([])}}])}(Km);PB.defaultOptions={animation:{easing:"ease-in",duration:500},enable:!0};var IB=function(t){function e(t,n){var r;return x(this,e),(r=F(this,e,[t,Object.assign({},e.defaultOptions,n)])).isFrozen=!1,r.toggleFrozen=function(t){r.isFrozen="dragstart"===t.type},r.hoverElement=function(t){if(r.validate(t)){var e=t.type===ty.POINTER_ENTER;r.updateElementsState(t,e);var n=r.options,i=n.onHover,o=n.onHoverEnd;e?null==i||i(t):null==o||o(t)}},r.updateElementsState=function(t,e){if(r.options.state||r.options.inactiveState){var n=r.context.graph,i=r.options,o=i.state,a=i.animation,s=i.inactiveState,u=r.getActiveIds(t),c={};if(o&&Object.assign(c,r.getElementsState(u,o,e)),s){var l=Tm(n.getData(),!0).filter(function(t){return!u.includes(t)});Object.assign(c,r.getElementsState(l,s,e))}n.setElementState(c,a)}},r.getElementsState=function(t,e,n){var i=r.context.graph,o={};return t.forEach(function(t){var r=i.getElementState(t);o[t]=n?r.includes(e)?r:[].concat(O(r),[e]):r.filter(function(t){return t!==e})}),o},r.bindEvents(),r}return P(e,t),B(e,[{key:"bindEvents",value:function(){var t=this,e=this.context.graph;this.unbindEvents(),Qb.forEach(function(n){e.on("".concat(n,":").concat(ty.POINTER_ENTER),t.hoverElement),e.on("".concat(n,":").concat(ty.POINTER_LEAVE),t.hoverElement)});var n=this.context.canvas.document;n.addEventListener("".concat(ty.DRAG_START),this.toggleFrozen),n.addEventListener("".concat(ty.DRAG_END),this.toggleFrozen)}},{key:"getActiveIds",value:function(t){var e=this.context.graph,n=this.options,r=n.degree,i=n.direction,o=t.target.id;return r?jb(e,t.targetType,o,"function"==typeof r?r(t):r,i):[o]}},{key:"validate",value:function(t){if(this.destroyed||this.isFrozen||oB(t.target)||this.context.graph.isCollapsingExpanding)return!1;var e=this.options.enable;return mn(e)?e(t):!!e}},{key:"unbindEvents",value:function(){var t=this,e=this.context.graph;Qb.forEach(function(n){e.off("".concat(n,":").concat(ty.POINTER_ENTER),t.hoverElement),e.off("".concat(n,":").concat(ty.POINTER_LEAVE),t.hoverElement)});var n=this.context.canvas.document;n.removeEventListener("".concat(ty.DRAG_START),this.toggleFrozen),n.removeEventListener("".concat(ty.DRAG_END),this.toggleFrozen)}},{key:"destroy",value:function(){this.unbindEvents(),xn(e,"destroy",this,3)([])}}])}(Km);IB.defaultOptions={animation:!1,enable:!0,degree:0,direction:"both",state:"active",inactiveState:void 0};var NB=function(t){function e(){return x(this,e),F(this,e,arguments)}return P(e,t),B(e,[{key:"onPointerDown",value:function(t){if(xn(e,"validate",this,3)([t])&&xn(e,"isKeydown",this,3)([])&&!this.points){var n=this.context,r=n.canvas,i=n.graph;this.pathShape=new zu({id:"g6-lasso-select",style:this.options.style}),r.appendChild(this.pathShape),this.points=[Lb(t,i)]}}},{key:"onPointerMove",value:function(t){var n;if(this.points){var r=this.options,i=r.immediately,o=r.mode;this.points.push(Lb(t,this.context.graph)),null===(n=this.pathShape)||void 0===n||n.setAttribute("d",function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=[];return t.forEach(function(t,e){n.push([0===e?"M":"L"].concat(O(t)))}),e&&n.push(["Z"]),n}(this.points)),i&&"default"===o&&this.points.length>2&&xn(e,"updateElementsStates",this,3)([this.points])}}},{key:"onPointerUp",value:function(){this.points&&(this.points.length<2||xn(e,"updateElementsStates",this,3)([this.points]),this.clearLasso())}},{key:"clearLasso",value:function(){var t;null===(t=this.pathShape)||void 0===t||t.remove(),this.pathShape=void 0,this.points=void 0}}])}(Nb),LB=function(t){function e(t,n){var r;return x(this,e),(r=F(this,e,[t,Object.assign({},e.defaultOptions,n)])).hiddenShapes=[],r.isVisible=!0,r.setElementsVisibility=function(t,e,n){t.filter(Boolean).forEach(function(t){"hidden"!==e||t.isVisible()?"visible"===e&&r.hiddenShapes.includes(t)?r.hiddenShapes.splice(r.hiddenShapes.indexOf(t),1):Rm(t,e,n):r.hiddenShapes.push(t)})},r.filterShapes=function(t,e){if(mn(e))return function(n){return!e(t,n)};var n=null==e?void 0:e[t];return function(t){return!t.className||!(null==n?void 0:n.includes(t.className))}},r.hideShapes=function(t){if(r.validate(t)&&r.isVisible){var e=r.context.element,n=r.options.shapes,i=void 0===n?{}:n;r.setElementsVisibility(e.getNodes(),"hidden",r.filterShapes("node",i)),r.setElementsVisibility(e.getEdges(),"hidden",r.filterShapes("edge",i)),r.setElementsVisibility(e.getCombos(),"hidden",r.filterShapes("combo",i)),r.isVisible=!1}},r.showShapes=AB(function(t){if(r.validate(t)&&!r.isVisible){var e=r.context.element;r.setElementsVisibility(e.getNodes(),"visible"),r.setElementsVisibility(e.getEdges(),"visible"),r.setElementsVisibility(e.getCombos(),"visible"),r.isVisible=!0}},r.options.debounce),r.bindEvents(),r}return P(e,t),B(e,[{key:"bindEvents",value:function(){var t=this.context.graph;t.on(ry.BEFORE_TRANSFORM,this.hideShapes),t.on(ry.AFTER_TRANSFORM,this.showShapes)}},{key:"unbindEvents",value:function(){var t=this.context.graph;t.off(ry.BEFORE_TRANSFORM,this.hideShapes),t.off(ry.AFTER_TRANSFORM,this.showShapes)}},{key:"validate",value:function(t){if(this.destroyed)return!1;var e=this.options.enable;return mn(e)?e(t):!!e}},{key:"update",value:function(t){this.unbindEvents(),xn(e,"update",this,3)([t]),this.bindEvents()}},{key:"destroy",value:function(){this.unbindEvents(),xn(e,"destroy",this,3)([])}}])}(Km);LB.defaultOptions={enable:!0,debounce:200,shapes:function(t){return"node"===t}};var _B=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())})},QB=function(t){function e(t,n){var r;return x(this,e),(r=F(this,e,[t,Object.assign({},e.defaultOptions,n)])).onWheel=function(t){return _B(r,void 0,void 0,(0,Dn.A)().m(function e(){var n,r;return(0,Dn.A)().w(function(e){for(;;)switch(e.n){case 0:return this.options.preventDefault&&t.preventDefault(),n=t.deltaX,r=t.deltaY,e.n=1,this.scroll([-n,-r],t);case 1:return e.a(2)}},e,this)}))},r.shortcut=new Ib(t.graph),r.bindEvents(),r}return P(e,t),B(e,[{key:"update",value:function(t){xn(e,"update",this,3)([t]),this.bindEvents()}},{key:"bindEvents",value:function(){var t,e,n=this,r=this.options.trigger;if(this.shortcut.unbindAll(),bn(r)){null===(t=this.graphDom)||void 0===t||t.removeEventListener(ty.WHEEL,this.onWheel);var i=r.up,o=void 0===i?[]:i,a=r.down,s=void 0===a?[]:a,u=r.left,c=void 0===u?[]:u,l=r.right,A=void 0===l?[]:l;this.shortcut.bind(o,function(t){return n.scroll([0,-10],t)}),this.shortcut.bind(s,function(t){return n.scroll([0,10],t)}),this.shortcut.bind(c,function(t){return n.scroll([-10,0],t)}),this.shortcut.bind(A,function(t){return n.scroll([10,0],t)})}else null===(e=this.graphDom)||void 0===e||e.addEventListener(ty.WHEEL,this.onWheel,{passive:!1})}},{key:"graphDom",get:function(){return this.context.graph.getCanvas().getContextService().getDomElement()}},{key:"formatDisplacement",value:function(t){return t=$m(t,this.options.sensitivity),t=this.clampByDirection(t),this.clampByRange(t)}},{key:"clampByDirection",value:function(t){var e=v(t,2),n=e[0],r=e[1],i=this.options.direction;return"x"===i?r=0:"y"===i&&(n=0),[n,r]}},{key:"clampByRange",value:function(t){var e=v(t,2),n=e[0],r=e[1],i=this.context,o=i.viewport,a=v(i.canvas.getSize(),2),s=a[0],u=a[1],c=v(Uy(this.options.range),4),l=[u*c[0],s*c[1],u*c[2],s*c[3]],A=Gy(Ky(o.getCanvasCenter()),l),f=Jm(o.getViewportCenter(),[n,r,0]);if(!Wy(f,A)){var d=v(A.min,2),h=d[0],p=d[1],g=v(A.max,2),y=g[0],m=g[1];(f[0]<h&&n>0||f[0]>y&&n<0)&&(n=0),(f[1]<p&&r>0||f[1]>m&&r<0)&&(r=0)}return[n,r]}},{key:"scroll",value:function(t,e){return _B(this,void 0,void 0,(0,Dn.A)().m(function n(){var r,i,o;return(0,Dn.A)().w(function(n){for(;;)switch(n.n){case 0:if(this.validate(e)){n.n=1;break}return n.a(2);case 1:return r=this.options.onFinish,i=this.context.graph,o=this.formatDisplacement(t),n.n=2,i.translateBy(o,!1);case 2:null==r||r();case 3:return n.a(2)}},n,this)}))}},{key:"validate",value:function(t){if(this.destroyed)return!1;var e=this.options.enable;return mn(e)?e(t):!!e}},{key:"destroy",value:function(){var t;this.shortcut.destroy(),null===(t=this.graphDom)||void 0===t||t.removeEventListener(ty.WHEEL,this.onWheel),xn(e,"destroy",this,3)([])}}])}(Km);QB.defaultOptions={enable:!0,sensitivity:1,preventDefault:!0,range:1/0};var UB=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())})},jB=function(t){function e(t,n){var r;return x(this,e),(r=F(this,e,[t,Object.assign({},e.defaultOptions,n)])).zoom=function(t,e,n){return UB(r,void 0,void 0,(0,Dn.A)().m(function r(){var i,o,a,s,u,c,l;return(0,Dn.A)().w(function(r){for(;;)switch(r.n){case 0:if(this.validate(e)){r.n=1;break}return r.a(2);case 1:return i=this.context.graph,!(o=this.options.origin)&&"viewport"in e&&(o=yb(e.viewport)),a=this.options,s=a.sensitivity,u=a.onFinish,c=1+ge(t,-50,50)*s/100,l=i.getZoom(),r.n=2,i.zoomTo(l*c,n,o);case 2:null==u||u();case 3:return r.a(2)}},r,this)}))},r.onReset=function(){return UB(r,void 0,void 0,(0,Dn.A)().m(function t(){return(0,Dn.A)().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.context.graph.zoomTo(1,this.options.animation);case 1:return t.a(2)}},t,this)}))},r.preventDefault=function(t){r.options.preventDefault&&t.preventDefault()},r.shortcut=new Ib(t.graph),r.bindEvents(),r}return P(e,t),B(e,[{key:"update",value:function(t){xn(e,"update",this,3)([t]),this.bindEvents()}},{key:"bindEvents",value:function(){var t=this,e=this.options.trigger;if(this.shortcut.unbindAll(),Array.isArray(e))if(e.includes(ty.PINCH))this.shortcut.bind([ty.PINCH],function(e){t.zoom(e.scale,e,!1)});else{var n=this.context.canvas.getContainer();null==n||n.addEventListener(ty.WHEEL,this.preventDefault),this.shortcut.bind([].concat(O(e),[ty.WHEEL]),function(e){var n=e.deltaX,r=e.deltaY;t.zoom(-(null!=r?r:n),e,!1)})}if("object"==typeof e){var r=e.zoomIn,i=void 0===r?[]:r,o=e.zoomOut,a=void 0===o?[]:o,s=e.reset,u=void 0===s?[]:s;this.shortcut.bind(i,function(e){return t.zoom(10,e,t.options.animation)}),this.shortcut.bind(a,function(e){return t.zoom(-10,e,t.options.animation)}),this.shortcut.bind(u,this.onReset)}}},{key:"validate",value:function(t){if(this.destroyed)return!1;var e=this.options.enable;return mn(e)?e(t):!!e}},{key:"destroy",value:function(){var t;this.shortcut.destroy(),null===(t=this.context.canvas.getContainer())||void 0===t||t.removeEventListener(ty.WHEEL,this.preventDefault),xn(e,"destroy",this,3)([])}}])}(Km);jB.defaultOptions={animation:{duration:200},enable:!0,sensitivity:1,trigger:[],preventDefault:!0};var DB=c(8331),RB=function(t,e){if("next"!==t&&"prev"!==t)return e},HB=function(t){t.prev.next=t.next,t.next.prev=t.prev,delete t.next,delete t.prev},zB=function(t){function e(){return x(this,e),F(this,e,arguments)}return P(e,t),B(e)}(function(){return B(function t(){x(this,t);var e={};e.prev=e,e.next=e.prev,this.shortcut=e},[{key:"dequeue",value:function(){var t=this.shortcut,e=t.prev;if(e&&e!==t)return HB(e),e}},{key:"enqueue",value:function(t){var e=this.shortcut;t.prev&&t.next&&HB(t),t.next=e.next,e.next.prev=t,e.next=t,t.prev=e}},{key:"toString",value:function(){for(var t=[],e=this.shortcut,n=e.prev;n!==e;)t.push(JSON.stringify(n,RB)),n=null==n?void 0:n.prev;return"[".concat(t.join(", "),"]")}}])}()),KB=function(){return 1},GB=function(t,e,n,r,i){var o,a,s=[];return t.hasNode(r.v)&&(null===(o=t.getRelatedEdges(r.v,"in"))||void 0===o||o.forEach(function(r){var o=r.data.weight,a=t.getNode(r.source);i&&s.push({v:r.source,w:r.target,in:0,out:0}),void 0===a.data.out&&(a.data.out=0),a.data.out-=o,VB(e,n,Object.assign({v:a.id},a.data))}),null===(a=t.getRelatedEdges(r.v,"out"))||void 0===a||a.forEach(function(r){var i=r.data.weight,o=r.target,a=t.getNode(o);void 0===a.data.in&&(a.data.in=0),a.data.in-=i,VB(e,n,Object.assign({v:a.id},a.data))}),t.removeNode(r.v)),i?s:void 0},VB=function(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)},WB=function(t,e){var n="greedy"===e?function(t){var e;if(t.getAllNodes().length<=1)return[];var n=function(t,e){var n=new xB,r=0,i=0;t.getAllNodes().forEach(function(t){n.addNode({id:t.id,data:{v:t.id,in:0,out:0}})}),t.getAllEdges().forEach(function(t){var o=n.getRelatedEdges(t.source,"out").find(function(e){return e.target===t.target}),a=(null==e?void 0:e(t))||1;o?n.updateEdgeData(null==o?void 0:o.id,Object.assign(Object.assign({},o.data),{weight:o.data.weight+a})):n.addEdge({id:t.id,source:t.source,target:t.target,data:{weight:a}}),i=Math.max(i,n.getNode(t.source).data.out+=a),r=Math.max(r,n.getNode(t.target).data.in+=a)});for(var o=[],a=i+r+3,s=0;s<a;s++)o.push(new zB);var u=r+1;return n.getAllNodes().forEach(function(t){VB(o,u,Object.assign({v:t.id},n.getNode(t.id).data))}),{buckets:o,zeroIdx:u,graph:n}}(t,function(t){return t.data.weight||1}||KB);return null===(e=function(t,e,n){for(var r,i=[],o=e[e.length-1],a=e[0];t.getAllNodes().length;){for(;r=a.dequeue();)GB(t,e,n,r);for(;r=o.dequeue();)GB(t,e,n,r);if(t.getAllNodes().length)for(var s=e.length-2;s>0;--s)if(r=e[s].dequeue()){i=i.concat(GB(t,e,n,r,!0));break}}return i}(n.graph,n.buckets,n.zeroIdx).map(function(e){return t.getRelatedEdges(e.v,"out").filter(function(t){return t.target===e.w})}))||void 0===e?void 0:e.flat()}(t):YB(t);null==n||n.forEach(function(e){var n=e.data;t.removeEdge(e.id),n.forwardName=e.data.name,n.reversed=!0,t.addEdge({id:e.id,source:e.target,target:e.source,data:Object.assign({},n)})})},YB=function(t){var e=[],n={},r={},i=function(o){r[o]||(r[o]=!0,n[o]=!0,t.getRelatedEdges(o,"out").forEach(function(t){n[t.target]?e.push(t):i(t.target)}),delete n[o])};return t.getAllNodes().forEach(function(t){return i(t.id)}),e},XB=function(t,e,n,r){var i;do{i="".concat(r).concat(Math.random())}while(t.hasNode(i));return n.dummy=e,t.addNode({id:i,data:n}),i},qB=function(t){var e=new xB;return t.getAllNodes().forEach(function(n){t.getChildren(n.id).length||e.addNode(Object.assign({},n))}),t.getAllEdges().forEach(function(t){e.addEdge(t)}),e},ZB=function(t,e){var n,r,i=Number(t.x),o=Number(t.y),a=Number(e.x)-i,s=Number(e.y)-o,u=Number(t.width)/2,c=Number(t.height)/2;return a||s?(Math.abs(s)*u>Math.abs(a)*c?(s<0&&(c=-c),n=c*a/s,r=c):(a<0&&(u=-u),n=u,r=u*s/a),{x:i+n,y:o+r}):{x:0,y:0}},JB=function(t){for(var e=[],n=tk(t)+1,r=0;r<n;r++)e.push([]);t.getAllNodes().forEach(function(t){var n=t.data.rank;void 0!==n&&e[n]&&e[n].push(t.id)});for(var i=0;i<n;i++)e[i]=e[i].sort(function(e,n){return r=t.getNode(e).data.order,i=t.getNode(n).data.order,Number(r)-Number(i);var r,i});return e},$B=function(t,e,n,r){var i={width:0,height:0};return de(n)&&de(r)&&(i.rank=n,i.order=r),XB(t,"border",i,e)},tk=function(t){var e;return t.getAllNodes().forEach(function(t){var n=t.data.rank;void 0!==n&&(void 0===e||n>e)&&(e=n)}),e||(e=0),e},ek=function(t,e){return t.reduce(function(t,n){return e(t)>e(n)?n:t})},nk=function(t,e,n,r,i,o){r.includes(e.id)||(r.push(e.id),n||o.push(e.id),i(e.id).forEach(function(e){return nk(t,e,n,r,i,o)}),n&&o.push(e.id))},rk=function(t,e,n,r){var i=Array.isArray(e)?e:[e],o=function(e){return r?t.getSuccessors(e):t.getNeighbors(e)},a=[],s=[];return i.forEach(function(e){if(!t.hasNode(e.id))throw new Error("Graph does not have node: ".concat(e));nk(t,e,"post"===n,s,o,a)}),a},ik=function(t,e,n,r,i,o){var a={rank:o,borderType:e,width:0,height:0},s=i.data[e][o-1],u=XB(t,"border",a,n);i.data[e][o]=u,t.setParent(u,r),s&&t.addEdge({id:"e".concat(Math.random()),source:s,target:u,data:{weight:1}})},ok=function(t){t.getAllNodes().forEach(function(t){ak(t)}),t.getAllEdges().forEach(function(t){ak(t)})},ak=function(t){var e=t.data.width;t.data.width=t.data.height,t.data.height=e},sk=function(t){(null==t?void 0:t.y)&&(t.y=-t.y)},uk=function(t){var e=t.x;t.x=t.y,t.y=e},ck=function(t,e,n,r,i,o,a){var s=t.getChildren(a);if(null==s?void 0:s.length){var u=$B(t,"_bt"),c=$B(t,"_bb"),l=t.getNode(a);t.setParent(u,a),l.data.borderTop=u,t.setParent(c,a),l.data.borderBottom=c,null==s||s.forEach(function(s){ck(t,e,n,r,i,o,s.id);var l=s.data.borderTop?s.data.borderTop:s.id,A=s.data.borderBottom?s.data.borderBottom:s.id,f=s.data.borderTop?r:2*r,d=l!==A?1:i-o[a]+1;t.addEdge({id:"e".concat(Math.random()),source:u,target:l,data:{minlen:d,weight:f,nestingEdge:!0}}),t.addEdge({id:"e".concat(Math.random()),source:A,target:c,data:{minlen:d,weight:f,nestingEdge:!0}})}),t.getParent(a)||t.addEdge({id:"e".concat(Math.random()),source:e,target:u,data:{weight:0,minlen:i+o[a]}})}else a!==e&&t.addEdge({id:"e".concat(Math.random()),source:e,target:a,data:{weight:0,minlen:n}})},lk="edge-label",Ak=function(t,e,n){for(var r=function(t,e){return null==t?void 0:t.reduce(function(t,n,r){return t[n]=e[r],t},{})}(n,n.map(function(t,e){return e})),i=e.map(function(e){var n=t.getRelatedEdges(e,"out").map(function(t){return{pos:r[t.target]||0,weight:t.data.weight}});return null==n?void 0:n.sort(function(t,e){return t.pos-e.pos})}),o=i.flat().filter(function(t){return void 0!==t}),a=1;a<n.length;)a<<=1;var s=2*a-1;a-=1;var u=Array(s).fill(0,0,s),c=0;return null==o||o.forEach(function(t){if(t){var e=t.pos+a;u[e]+=t.weight;for(var n=0;e>0;)e%2&&(n+=u[e+1]),u[e=e-1>>1]+=t.weight;c+=t.weight*n}}),c},fk=function(t,e){for(var n=0,r=1;r<(null==e?void 0:e.length);r+=1)n+=Ak(t,e[r-1],e[r]);return n},dk=function(t){for(var e={},n=t.getAllNodes(),r=n.map(function(t){var e;return null!==(e=t.data.rank)&&void 0!==e?e:-1/0}),i=Math.max.apply(Math,O(r)),o=[],a=0;a<i+1;a++)o.push([]);var s=n.sort(function(e,n){return t.getNode(e.id).data.rank-t.getNode(n.id).data.rank}),u=s.filter(function(e){return void 0!==t.getNode(e.id).data.fixorder}),c=u.sort(function(e,n){return t.getNode(e.id).data.fixorder-t.getNode(n.id).data.fixorder});return null==c||c.forEach(function(n){isNaN(t.getNode(n.id).data.rank)||o[t.getNode(n.id).data.rank].push(n.id),e[n.id]=!0}),null==s||s.forEach(function(n){return t.dfsTree(n.id,function(t){if(e.hasOwnProperty(t.id))return!0;e[t.id]=!0,isNaN(t.data.rank)||o[t.data.rank].push(t.id)})}),o},hk=function(t,e){var n,r=0,i=0;t.weight&&(r+=t.barycenter*t.weight,i+=t.weight),e.weight&&(r+=e.barycenter*e.weight,i+=e.weight),t.vs=null===(n=e.vs)||void 0===n?void 0:n.concat(t.vs),t.barycenter=r/i,t.weight=i,t.i=Math.min(e.i,t.i),e.merged=!0};const pk=function(t,e){var n,r,i,o={};return null==t||t.forEach(function(t,e){o[t.v]={i:e,indegree:0,in:[],out:[],vs:[t.v]};var n=o[t.v];void 0!==t.barycenter&&(n.barycenter=t.barycenter,n.weight=t.weight)}),null===(n=e.getAllEdges())||void 0===n||n.forEach(function(t){var e=o[t.source],n=o[t.target];void 0!==e&&void 0!==n&&(n.indegree++,e.out.push(o[t.target]))}),function(t){for(var e,n,r=[],i=function(){var i=t.pop();r.push(i),null===(e=i.in.reverse())||void 0===e||e.forEach(function(t){return(e=i,function(t){t.merged||(void 0===t.barycenter||void 0===e.barycenter||t.barycenter>=e.barycenter)&&hk(e,t)})(t);var e}),null===(n=i.out)||void 0===n||n.forEach(function(e){return(n=i,function(e){e.in.push(n),0===--e.indegree&&t.push(e)})(e);var n})};null==t?void 0:t.length;)i();var o=r.filter(function(t){return!t.merged}),a=["vs","i","barycenter","weight"];return o.map(function(t){var e={};return null==a||a.forEach(function(n){void 0!==t[n]&&(e[n]=t[n])}),e})}(null===(i=(r=Object.values(o)).filter)||void 0===i?void 0:i.call(r,function(t){return!t.indegree}))};var vk=function(t,e,n){for(var r,i=n;e.length&&(r=e[e.length-1]).i<=i;)e.pop(),null==t||t.push(r.vs),i++;return i},gk=function(t,e,n,r,i,o){var a,s,u,c,l=t.getChildren(e).map(function(t){return t.id}),A=t.getNode(e),f=A?A.data.borderLeft:void 0,d=A?A.data.borderRight:void 0,h={};f&&(l=null==l?void 0:l.filter(function(t){return t!==f&&t!==d}));var p=function(t,e){return e.map(function(e){var n=t.getRelatedEdges(e,"in");if(!(null==n?void 0:n.length))return{v:e};var r={sum:0,weight:0};return null==n||n.forEach(function(e){var n=t.getNode(e.source);r.sum+=e.data.weight*n.data.order,r.weight+=e.data.weight}),{v:e,barycenter:r.sum/r.weight,weight:r.weight}})}(t,l||[]);null==p||p.forEach(function(e){var i;if(null===(i=t.getChildren(e.v))||void 0===i?void 0:i.length){var a=gk(t,e.v,n,r,o);h[e.v]=a,a.hasOwnProperty("barycenter")&&mk(e,a)}});var v=pk(p,n);yk(v,h),null===(a=v.filter(function(t){return t.vs.length>0}))||void 0===a||a.forEach(function(e){var n=t.getNode(e.vs[0]);n&&(e.fixorder=n.data.fixorder,e.order=n.data.order)});var g=function(t,e,n,r){var i=function(t){var e={lhs:[],rhs:[]};return null==t||t.forEach(function(t){var n,i;i=(n=t).hasOwnProperty("fixorder")&&!isNaN(n.fixorder),(r?!i&&n.hasOwnProperty("barycenter"):i||n.hasOwnProperty("barycenter"))?e.lhs.push(t):e.rhs.push(t)}),e}(t),o=i.lhs,a=i.rhs.sort(function(t,e){return-t.i- -e.i}),s=[],u=0,c=0,l=0;null==o||o.sort(function(t,e){return function(n,r){if(void 0!==n.fixorder&&void 0!==r.fixorder)return n.fixorder-r.fixorder;if(n.barycenter<r.barycenter)return-1;if(n.barycenter>r.barycenter)return 1;if(e&&void 0!==n.order&&void 0!==r.order){if(n.order<r.order)return-1;if(n.order>r.order)return 1}return t?r.i-n.i:n.i-r.i}}(!!e,!!n)),l=vk(s,a,l),null==o||o.forEach(function(t){var e;l+=null===(e=t.vs)||void 0===e?void 0:e.length,s.push(t.vs),u+=t.barycenter*t.weight,c+=t.weight,l=vk(s,a,l)});var A={vs:s.flat()};return c&&(A.barycenter=u/c,A.weight=c),A}(v,r,i,o);if(f&&(g.vs=[f,g.vs,d].flat(),null===(s=t.getPredecessors(f))||void 0===s?void 0:s.length)){var y=t.getNode((null===(u=t.getPredecessors(f))||void 0===u?void 0:u[0].id)||""),m=t.getNode((null===(c=t.getPredecessors(d))||void 0===c?void 0:c[0].id)||"");g.hasOwnProperty("barycenter")||(g.barycenter=0,g.weight=0),g.barycenter=(g.barycenter*g.weight+y.data.order+m.data.order)/(g.weight+2),g.weight+=2}return g},yk=function(t,e){null==t||t.forEach(function(t){var n,r=null===(n=t.vs)||void 0===n?void 0:n.map(function(t){return e[t]?e[t].vs:t});t.vs=r.flat()})},mk=function(t,e){void 0!==t.barycenter?(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight):(t.barycenter=e.barycenter,t.weight=e.weight)},bk=function(t,e,n){return e.map(function(e){return function(t,e,n){var r=function(t){for(var e;t.hasNode(e="_root".concat(Math.random())););return e}(t),i=new xB({tree:[{id:r,children:[],data:{}}]});return t.getAllNodes().forEach(function(o){var a=t.getParent(o.id);(o.data.rank===e||o.data.minRank<=e&&e<=o.data.maxRank)&&(i.hasNode(o.id)||i.addNode(Object.assign({},o)),(null==a?void 0:a.id)&&!i.hasNode(null==a?void 0:a.id)&&i.addNode(Object.assign({},a)),i.setParent(o.id,(null==a?void 0:a.id)||r),t.getRelatedEdges(o.id,n).forEach(function(e){var n=e.source===o.id?e.target:e.source;i.hasNode(n)||i.addNode(Object.assign({},t.getNode(n)));var r=i.getRelatedEdges(n,"out").find(function(t){return t.target===o.id}),a=void 0!==r?r.data.weight:0;r?i.updateEdgeData(r.id,Object.assign(Object.assign({},r.data),{weight:e.data.weight+a})):i.addEdge({id:e.id,source:n,target:o.id,data:{weight:e.data.weight+a}})}),o.data.hasOwnProperty("minRank")&&i.updateNodeData(o.id,Object.assign(Object.assign({},o.data),{borderLeft:o.data.borderLeft[e],borderRight:o.data.borderRight[e]})))}),i}(t,e,n)})},wk=function(t,e,n,r){var i=new xB;null==t||t.forEach(function(t){for(var o,a=t.getRoots()[0].id,s=gk(t,a,i,e,n,r),u=0;u<(null===(o=s.vs)||void 0===o?void 0:o.length);u++){var c=t.getNode(s.vs[u]);c&&(c.data.order=u)}!function(t,e,n){var r,i={};null==n||n.forEach(function(n){for(var o,a,s=t.getParent(n);s;){if((o=t.getParent(s.id))?(a=i[o.id],i[o.id]=s.id):(a=r,r=s.id),a&&a!==s.id)return e.hasNode(a)||e.addNode({id:a,data:{}}),e.hasNode(s.id)||e.addNode({id:s.id,data:{}}),void(e.hasEdge("e".concat(a,"-").concat(s.id))||e.addEdge({id:"e".concat(a,"-").concat(s.id),source:a,target:s.id,data:{}}));s=o}})}(t,i,s.vs)})},xk=function(t,e){null==e||e.forEach(function(e){null==e||e.forEach(function(e,n){t.getNode(e).data.order=n})})},Ek=function(t,e){var n={};function r(e,r,i,o,a){for(var s,u,c,l=r;l<i;l++)c=e[l],(null===(s=t.getNode(c))||void 0===s?void 0:s.data.dummy)&&(null===(u=t.getPredecessors(c))||void 0===u||u.forEach(function(e){var r=t.getNode(e.id);r.data.dummy&&(r.data.order<o||r.data.order>a)&&kk(n,e.id,c)}))}function i(t,e){var n=function(t){return JSON.stringify(t.slice(1))}(t);e.get(n)||(r.apply(void 0,O(t)),e.set(n,!0))}return(null==e?void 0:e.length)&&e.reduce(function(e,n){var r,o=-1,a=0,s=new Map;return null==n||n.forEach(function(u,c){var l;if("border"===(null===(l=t.getNode(u))||void 0===l?void 0:l.data.dummy)){var A=t.getPredecessors(u)||[];A.length&&(r=t.getNode(A[0].id).data.order,i([n,a,c,o,r],s),a=c,o=r)}i([n,a,n.length,r,e.length],s)}),n}),n},Bk=function(t,e){var n,r;if(null===(n=t.getNode(e))||void 0===n?void 0:n.data.dummy)return null===(r=t.getPredecessors(e))||void 0===r?void 0:r.find(function(e){return t.getNode(e.id).data.dummy})},kk=function(t,e,n){var r=e,i=n;if(r>i){var o=r;r=i,i=o}var a=t[r];a||(t[r]=a={}),a[i]=!0},Ok=function(t,e,n){var r=e;return r>n&&(r=n),!!t[r]},Ck=function(t,e,n,r,i,o){var a=new xB,s=Mk(r,i,o);return null==e||e.forEach(function(e){var r;null==e||e.forEach(function(e){var i=n[e];if(a.hasNode(i)||a.addNode({id:i,data:{}}),r){var o=n[r],u=a.getRelatedEdges(o,"out").find(function(t){return t.target===i});u?a.updateEdgeData(u.id,Object.assign(Object.assign({},u.data),{weight:Math.max(s(t,e,r),u.data.weight||0)})):a.addEdge({id:"e".concat(Math.random()),source:o,target:i,data:{weight:Math.max(s(t,e,r),0)}})}r=e})}),a};var Mk=function(t,e,n){return function(r,i,o){var a=r.getNode(i),s=r.getNode(o),u=0,c=0;if(u+=a.data.width/2,a.data.hasOwnProperty("labelpos"))switch((a.data.labelpos||"").toLowerCase()){case"l":c=-a.data.width/2;break;case"r":c=a.data.width/2}if(c&&(u+=n?c:-c),c=0,u+=(a.data.dummy?e:t)/2,u+=(s.data.dummy?e:t)/2,u+=s.data.width/2,s.data.labelpos)switch((s.data.labelpos||"").toLowerCase()){case"l":c=s.data.width/2;break;case"r":c=-s.data.width/2}return c&&(u+=n?c:-c),c=0,u}},Sk=function(t,e){return t.getNode(e).data.width||0},Fk=function(t,e){var n,r=qB(t);!function(t,e){var n=(e||{}).ranksep,r=void 0===n?0:n,i=JB(t),o=0;null==i||i.forEach(function(e){var n=e.map(function(e){return t.getNode(e).data.height}),i=Math.max.apply(Math,O(n).concat([0]));null==e||e.forEach(function(e){t.getNode(e).data.y=o+i/2}),o+=i+r})}(r,e);var i=function(t,e){var n=e||{},r=n.align,i=n.nodesep,o=void 0===i?0:i,a=n.edgesep,s=void 0===a?0:a,u=JB(t),c=Object.assign(function(t,e){var n={};return(null==e?void 0:e.length)&&e.reduce(function(e,r){var i=0,o=0,a=e.length,s=null==r?void 0:r[(null==r?void 0:r.length)-1];return null==r||r.forEach(function(e,u){var c,l=Bk(t,e),A=l?t.getNode(l.id).data.order:a;(l||e===s)&&(null===(c=r.slice(o,u+1))||void 0===c||c.forEach(function(e){var r;null===(r=t.getPredecessors(e))||void 0===r||r.forEach(function(r){var o,a=t.getNode(r.id),s=a.data.order;!(s<i||A<s)||a.data.dummy&&(null===(o=t.getNode(e))||void 0===o?void 0:o.data.dummy)||kk(n,r.id,e)})}),o=u+1,i=A)}),r}),n}(t,u),Ek(t,u)),l={},A=[];["u","d"].forEach(function(e){A="u"===e?u:Object.values(u).reverse(),["l","r"].forEach(function(n){"r"===n&&(A=A.map(function(t){return Object.values(t).reverse()}));var r=("u"===e?t.getPredecessors:t.getSuccessors).bind(t),i=function(t,e,n,r){var i={},o={},a={};return null==e||e.forEach(function(t){null==t||t.forEach(function(t,e){i[t]=t,o[t]=t,a[t]=e})}),null==e||e.forEach(function(t){var e=-1;null==t||t.forEach(function(t){var s=r(t).map(function(t){return t.id});if(s.length)for(var u=((s=s.sort(function(t,e){return a[t]-a[e]})).length-1)/2,c=Math.floor(u),l=Math.ceil(u);c<=l;++c){var A=s[c];o[t]===t&&e<a[A]&&!Ok(n,t,A)&&(o[A]=t,o[t]=i[t]=i[A],e=a[A])}})}),{root:i,align:o}}(0,A,c,r),a=function(t,e,n,r,i,o,a){var s,u={},c=Ck(t,e,n,i,o,a),l=a?"borderLeft":"borderRight",A=function(t,e){for(var n=c.getAllNodes(),r=n.pop(),i={};r;)i[r.id]?t(r.id):(i[r.id]=!0,n.push(r),n=n.concat(e(r.id))),r=n.pop()};return A(function(t){u[t]=(c.getRelatedEdges(t,"in")||[]).reduce(function(t,e){return Math.max(t,(u[e.source]||0)+e.data.weight)},0)},c.getPredecessors.bind(c)),A(function(e){var n=(c.getRelatedEdges(e,"out")||[]).reduce(function(t,e){return Math.min(t,(u[e.target]||0)-e.data.weight)},Number.POSITIVE_INFINITY),r=t.getNode(e);n!==Number.POSITIVE_INFINITY&&r.data.borderType!==l&&(u[e]=Math.max(u[e],n))},c.getSuccessors.bind(c)),null===(s=Object.values(r))||void 0===s||s.forEach(function(t){u[t]=u[n[t]]}),u}(t,A,i.root,i.align,o,s,"r"===n);"r"===n&&Object.keys(a).forEach(function(t){return a[t]=-a[t]}),l[e+n]=a})});var f=function(t,e){return ek(Object.values(e),function(e){var n,r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return null===(n=Object.keys(e))||void 0===n||n.forEach(function(n){var o=e[n],a=Sk(t,n)/2;r=Math.max(o+a,r),i=Math.min(o-a,i)}),r-i})}(t,l);return f&&function(t,e){var n=Object.values(e),r=Math.min.apply(Math,n),i=Math.max.apply(Math,n);["u","d"].forEach(function(n){["l","r"].forEach(function(o){var a,s=n+o,u=t[s];if(u!==e){var c=Object.values(u);(a="l"===o?r-Math.min.apply(Math,c):i-Math.max.apply(Math,c))&&(t[s]={},Object.keys(u).forEach(function(e){t[s][e]=u[e]+a}))}})})}(l,f),function(t,e){var n={};return Object.keys(t.ul).forEach(function(r){if(e)n[r]=t[e.toLowerCase()][r];else{var i=Object.values(t).map(function(t){return t[r]});n[r]=(i[0]+i[1])/2}}),n}(l,r)}(r,e);null===(n=Object.keys(i))||void 0===n||n.forEach(function(t){r.getNode(t).data.x=i[t]})},Tk=function(t){var e={},n=function(r){var i,o,a=t.getNode(r);return a?e[r]?a.data.rank:(e[r]=!0,null===(i=t.getRelatedEdges(r,"out"))||void 0===i||i.forEach(function(t){var e=n(t.target)-t.data.minlen;e&&(void 0===o||e<o)&&(o=e)}),o||(o=0),a.data.rank=o,o):0};t.getAllNodes().filter(function(e){return 0===t.getRelatedEdges(e.id,"in").length}).forEach(function(t){return n(t.id)})},Pk=function(t,e){return t.getNode(e.target).data.rank-t.getNode(e.source).data.rank-e.data.minlen},Ik=function(t,e){var n=function(r){e.getRelatedEdges(r,"both").forEach(function(i){var o=i.source,a=r===o?i.target:o;t.hasNode(a)||Pk(e,i)||(t.addNode({id:a,data:{}}),t.addEdge({id:i.id,source:r,target:a,data:{}}),n(a))})};return t.getAllNodes().forEach(function(t){return n(t.id)}),t.getAllNodes().length},Nk=function(t,e){var n=function(r){var i;null===(i=e.getRelatedEdges(r,"both"))||void 0===i||i.forEach(function(i){var o=i.source,a=r===o?i.target:o;t.hasNode(a)||void 0===e.getNode(a).data.layer&&Pk(e,i)||(t.addNode({id:a,data:{}}),t.addEdge({id:i.id,source:r,target:a,data:{}}),n(a))})};return t.getAllNodes().forEach(function(t){return n(t.id)}),t.getAllNodes().length},Lk=function(t,e){return ek(e.getAllEdges(),function(n){return t.hasNode(n.source)!==t.hasNode(n.target)?Pk(e,n):1/0})},_k=function(t,e,n){t.getAllNodes().forEach(function(t){var r=e.getNode(t.id);r.data.rank||(r.data.rank=0),r.data.rank+=n})},Qk=function(t,e){var n=rk(t,t.getAllNodes(),"post",!1);(n=n.slice(0,(null==n?void 0:n.length)-1)).forEach(function(n){Uk(t,e,n)})},Uk=function(t,e,n){var r=t.getNode(n).data.parent;t.getRelatedEdges(n,"both").find(function(t){return t.target===r||t.source===r}).data.cutvalue=jk(t,e,n)},jk=function(t,e,n){var r=t.getNode(n).data.parent,i=!0,o=e.getRelatedEdges(n,"out").find(function(t){return t.target===r}),a=0;return o||(i=!1,o=e.getRelatedEdges(r,"out").find(function(t){return t.target===n})),a=o.data.weight,e.getRelatedEdges(n,"both").forEach(function(e){var o=e.source===n,s=o?e.target:e.source;if(s!==r){var u=o===i,c=e.data.weight;if(a+=u?c:-c,Vk(t,n,s)){var l=t.getRelatedEdges(n,"both").find(function(t){return t.source===s||t.target===s}).data.cutvalue;a+=u?-l:l}}}),a},Dk=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.getAllNodes()[0].id;Rk(t,{},1,e)},Rk=function(t,e,n,r,i){var o,a=n,s=n,u=t.getNode(r);return e[r]=!0,null===(o=t.getNeighbors(r))||void 0===o||o.forEach(function(n){e[n.id]||(s=Rk(t,e,s,n.id,r))}),u.data.low=a,u.data.lim=s++,i?u.data.parent=i:delete u.data.parent,s},Hk=function(t){return t.getAllEdges().find(function(t){return t.data.cutvalue<0})},zk=function(t,e,n){var r=n.source,i=n.target;e.getRelatedEdges(r,"out").find(function(t){return t.target===i})||(r=n.target,i=n.source);var o=t.getNode(r),a=t.getNode(i),s=o,u=!1;o.data.lim>a.data.lim&&(s=a,u=!0);var c=e.getAllEdges().filter(function(e){return u===Wk(t.getNode(e.source),s)&&u!==Wk(t.getNode(e.target),s)});return ek(c,function(t){return Pk(e,t)})},Kk=function(t,e,n,r){var i=t.getRelatedEdges(n.source,"both").find(function(t){return t.source===n.target||t.target===n.target});i&&t.removeEdge(i.id),t.addEdge({id:"e".concat(Math.random()),source:r.source,target:r.target,data:{}}),Dk(t),Qk(t,e),Gk(t,e)},Gk=function(t,e){var n=t.getAllNodes().find(function(t){return!t.data.parent}),r=rk(t,n,"pre",!1);(r=r.slice(1)).forEach(function(n){var r=t.getNode(n).data.parent,i=e.getRelatedEdges(n,"out").find(function(t){return t.target===r}),o=!1;!i&&e.hasNode(r)&&(i=e.getRelatedEdges(r,"out").find(function(t){return t.target===n}),o=!0),e.getNode(n).data.rank=(e.hasNode(r)&&e.getNode(r).data.rank||0)+(o?null==i?void 0:i.data.minlen:-(null==i?void 0:i.data.minlen))})},Vk=function(t,e,n){return t.getRelatedEdges(e,"both").find(function(t){return t.source===n||t.target===n})},Wk=function(t,e){return e.data.low<=t.data.lim&&t.data.lim<=e.data.lim},Yk=Tk,Xk=function(t){!function(t){var e=function(t){var e=new xB;return t.getAllNodes().forEach(function(t){e.addNode(Object.assign({},t))}),t.getAllEdges().forEach(function(t){var n=e.getRelatedEdges(t.source,"out").find(function(e){return e.target===t.target});n?e.updateEdgeData(null==n?void 0:n.id,Object.assign(Object.assign({},n.data),{weight:n.data.weight+t.data.weight||0,minlen:Math.max(n.data.minlen,t.data.minlen||1)})):e.addEdge({id:t.id,source:t.source,target:t.target,data:{weight:t.data.weight||0,minlen:t.data.minlen||1}})}),e}(t);Tk(e);var n,r,i=function(t){var e,n,r=new xB({tree:[]}),i=t.getAllNodes()[0],o=t.getAllNodes().length;for(r.addNode(i);Ik(r,t)<o;)e=Lk(r,t),n=r.hasNode(e.source)?Pk(t,e):-Pk(t,e),_k(r,t,n);return r}(e);for(Dk(i),Qk(i,e);n=Hk(i);)r=zk(i,e,n),Kk(i,e,n,r)}(t)},qk=function(t,e){var n=e.edgeLabelSpace,r=e.keepNodeOrder,i=e.prevGraph,o=e.rankdir,a=e.ranksep;!r&&i&&Jk(t,i);var s,u=oO(t);n&&(e.ranksep=aO(u,{rankdir:o,ranksep:a}));try{s=Zk(u,e)}catch(t){if("Not possible to find intersection inside of the rectangle"===t.message)return void console.error("The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:\n",t);throw t}return $k(t,u),s},Zk=function(t,e){var n=e.acyclicer,r=e.ranker,i=e.rankdir,o=void 0===i?"tb":i,a=e.nodeOrder,s=e.keepNodeOrder,u=e.align,c=e.nodesep,l=void 0===c?50:c,A=e.edgesep,f=void 0===A?20:A,d=e.ranksep,h=void 0===d?50:d;pO(t),WB(t,n);var p=function(t){var e=XB(t,"root",{},"_root"),n=function(t){var e={},n=function(r,i){var o=t.getChildren(r);null==o||o.forEach(function(t){return n(t.id,i+1)}),e[r]=i};return t.getRoots().forEach(function(t){return n(t.id,1)}),e}(t),r=Math.max.apply(Math,O(Object.values(n)));Math.abs(r)===1/0&&(r=1);var i=r-1,o=2*i+1;t.getAllEdges().forEach(function(t){t.data.minlen*=o});var a=function(t){var e=0;return t.getAllEdges().forEach(function(t){e+=t.data.weight}),e}(t)+1;return t.getRoots().forEach(function(r){ck(t,e,o,a,i,n,r.id)}),{nestingRoot:e,nodeRankFactor:o}}(t),v=p.nestingRoot,g=p.nodeRankFactor;!function(t,e){switch(e){case"network-simplex":Xk(t);break;case"tight-tree":default:!function(t){!function(t){var e,n={},r=function(i){var o,a,s=t.getNode(i);return s?n[i]?s.data.rank:(n[i]=!0,null===(o=t.getRelatedEdges(i,"out"))||void 0===o||o.forEach(function(t){var e=r(t.target)-t.data.minlen;e&&(void 0===a||e<a)&&(a=e)}),a||(a=0),(void 0===e||a<e)&&(e=a),s.data.rank=a,a):0};t.getAllNodes().filter(function(e){return 0===t.getRelatedEdges(e.id,"in").length}).forEach(function(t){t&&r(t.id)}),void 0===e&&(e=0);var i={},o=function(e,n){var r,a=t.getNode(e),s=isNaN(a.data.layer)?n:a.data.layer;(void 0===a.data.rank||a.data.rank<s)&&(a.data.rank=s),i[e]||(i[e]=!0,null===(r=t.getRelatedEdges(e,"out"))||void 0===r||r.forEach(function(t){o(t.target,s+t.data.minlen)}))};t.getAllNodes().forEach(function(t){var n=t.data;n&&(isNaN(n.layer)?n.rank-=e:o(t.id,n.layer))})}(t),function(t){var e,n,r=new xB({tree:[]}),i=t.getAllNodes()[0],o=t.getAllNodes().length;for(r.addNode(i);Nk(r,t)<o;)e=Lk(r,t),n=r.hasNode(e.source)?Pk(t,e):-Pk(t,e),_k(r,t,n)}(t)}(t);break;case"longest-path":Yk(t)}}(qB(t),r),sO(t),function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t.getAllNodes(),r=n.filter(function(t){return void 0!==t.data.rank}).map(function(t){return t.data.rank}),i=Math.min.apply(Math,O(r)),o=[];n.forEach(function(t){var e=(t.data.rank||0)-i;o[e]||(o[e]=[]),o[e].push(t.id)});for(var a=0,s=0;s<o.length;s++){var u=o[s];void 0===u?s%e!==0&&(a-=1):a&&(null==u||u.forEach(function(e){var n=t.getNode(e);n&&(n.data.rank=n.data.rank||0,n.data.rank+=a)}))}}(t,g),function(t,e){e&&t.removeNode(e),t.getAllEdges().forEach(function(e){e.data.nestingEdge&&t.removeEdge(e.id)})}(t,v),function(t){var e=t.getAllNodes().filter(function(t){return void 0!==t.data.rank}).map(function(t){return t.data.rank}),n=Math.min.apply(Math,O(e));t.getAllNodes().forEach(function(t){t.data.hasOwnProperty("rank")&&n!==1/0&&(t.data.rank-=n)})}(t),uO(t),cO(t);var y=[];!function(t,e){t.getAllEdges().forEach(function(n){return function(t,e,n){var r=e.source,i=t.getNode(r).data.rank,o=e.target,a=t.getNode(o).data.rank,s=e.data.labelRank;if(a!==i+1){var u,c,l;for(t.removeEdge(e.id),l=0,++i;i<a;++l,++i)e.data.points=[],u=XB(t,"edge",c={originalEdge:e,width:0,height:0,rank:i},"_d"),i===s&&(c.width=e.data.width,c.height=e.data.height,c.dummy=lk,c.labelpos=e.data.labelpos),t.addEdge({id:"e".concat(Math.random()),source:r,target:u,data:{weight:e.data.weight}}),0===l&&n.push(u),r=u;t.addEdge({id:"e".concat(Math.random()),source:r,target:o,data:{weight:e.data.weight}})}}(t,n,e)})}(t,y),function(t,e){var n=function(t){var e={},n=0,r=function(i){var o=n;t.getChildren(i).forEach(function(t){return r(t.id)}),e[i]={low:o,lim:n++}};return t.getRoots().forEach(function(t){return r(t.id)}),e}(t);e.forEach(function(e){var r,i,o=e,a=t.getNode(o),s=a.data.originalEdge;if(s)for(var u=function(t,e,n,r){var i,o,a,s,u=[],c=[],l=Math.min(e[n].low,e[r].low),A=Math.max(e[n].lim,e[r].lim);a=n;do{a=null===(i=t.getParent(a))||void 0===i?void 0:i.id,u.push(a)}while(a&&(e[a].low>l||A>e[a].lim));for(s=a,a=r;a&&a!==s;)c.push(a),a=null===(o=t.getParent(a))||void 0===o?void 0:o.id;return{lca:s,path:u.concat(c.reverse())}}(t,n,s.source,s.target),c=u.path,l=u.lca,A=0,f=c[A],d=!0;o!==s.target;){if(a=t.getNode(o),d){for(;f!==l&&(null===(r=t.getNode(f))||void 0===r?void 0:r.data.maxRank)<a.data.rank;)f=c[++A];f===l&&(d=!1)}if(!d){for(;A<c.length-1&&(null===(i=t.getNode(c[A+1]))||void 0===i?void 0:i.data.minRank)<=a.data.rank;)A++;f=c[A]}t.hasNode(f)&&t.setParent(o,f),o=t.getSuccessors(o)[0].id}})}(t,y),function(t){var e=function(n){var r=t.getChildren(n),i=t.getNode(n);if((null==r?void 0:r.length)&&r.forEach(function(t){return e(t.id)}),i.data.hasOwnProperty("minRank")){i.data.borderLeft=[],i.data.borderRight=[];for(var o=i.data.minRank,a=i.data.maxRank+1;o<a;o+=1)ik(t,"borderLeft","_bl",n,i,o),ik(t,"borderRight","_br",n,i,o)}};t.getRoots().forEach(function(t){return e(t.id)})}(t),s&&function(t,e){for(var n=t.getAllNodes().filter(function(e){var n;return!(null===(n=t.getChildren(e.id))||void 0===n?void 0:n.length)}),r=n.map(function(t){return t.data.rank}),i=Math.max.apply(Math,O(r)),o=[],a=0;a<i+1;a++)o[a]=[];null==e||e.forEach(function(e){var n=t.getNode(e);n&&!n.data.dummy&&(isNaN(n.data.rank)||(n.data.fixorder=o[n.data.rank].length,o[n.data.rank].push(e)))})}(t,a),function(t,e){for(var n=tk(t),r=[],i=[],o=1;o<n+1;o++)r.push(o);for(var a=n-1;a>-1;a--)i.push(a);var s=bk(t,r,"in"),u=bk(t,i,"out"),c=dk(t);xk(t,c);for(var l,A=Number.POSITIVE_INFINITY,f=0,d=0;d<4;++f,++d){wk(f%2?s:u,f%4>=2,!1,e),c=JB(t);var h=fk(t,c);h<A&&(d=0,l=Ly(c),A=h)}c=dk(t),xk(t,c);for(var p=0,v=0;v<4;++p,++v){wk(p%2?s:u,p%4>=2,!0,e),c=JB(t);var g=fk(t,c);g<A&&(v=0,l=Ly(c),A=g)}xk(t,l)}(t,s),vO(t),function(t,e){var n=e.toLowerCase();"lr"!==n&&"rl"!==n||ok(t)}(t,o),Fk(t,{align:u,nodesep:l,edgesep:f,ranksep:h}),gO(t),hO(t),function(t,e){e.forEach(function(e){var n,r=t.getNode(e),i=r.data.originalEdge;i&&t.addEdge(i);for(var o=e;r.data.dummy;)n=t.getSuccessors(o)[0],t.removeNode(o),i.data.points.push({x:r.data.x,y:r.data.y}),r.data.dummy===lk&&(i.data.x=r.data.x,i.data.y=r.data.y,i.data.width=r.data.width,i.data.height=r.data.height),o=n.id,r=t.getNode(o)})}(t,y),fO(t),function(t,e){var n=e.toLowerCase();"bt"!==n&&"rl"!==n||function(t){t.getAllNodes().forEach(function(t){sk(t.data)}),t.getAllEdges().forEach(function(t){var e;null===(e=t.data.points)||void 0===e||e.forEach(function(t){return sk(t)}),t.data.hasOwnProperty("y")&&sk(t.data)})}(t),"lr"!==n&&"rl"!==n||(function(t){t.getAllNodes().forEach(function(t){uk(t.data)}),t.getAllEdges().forEach(function(t){var e;null===(e=t.data.points)||void 0===e||e.forEach(function(t){return uk(t)}),t.data.hasOwnProperty("x")&&uk(t.data)})}(t),ok(t))}(t,o);var m=lO(t),b=m.width,w=m.height;return AO(t),dO(t),function(t){t.getAllEdges().forEach(function(e){var n=e.data;if(n.reversed){t.removeEdge(e.id);var r=n.forwardName;delete n.reversed,delete n.forwardName,t.addEdge({id:e.id,source:e.target,target:e.source,data:Object.assign(Object.assign({},n),{forwardName:r})})}})}(t),{width:b,height:w}},Jk=function(t,e){t.getAllNodes().forEach(function(n){var r=t.getNode(n.id);if(e.hasNode(n.id)){var i=e.getNode(n.id);r.data.fixorder=i.data._order,delete i.data._order}else delete r.data.fixorder})},$k=function(t,e){t.getAllNodes().forEach(function(n){var r,i=t.getNode(n.id);if(i){var o=e.getNode(n.id);i.data.x=o.data.x,i.data.y=o.data.y,i.data._order=o.data.order,i.data._rank=o.data.rank,(null===(r=e.getChildren(n.id))||void 0===r?void 0:r.length)&&(i.data.width=o.data.width,i.data.height=o.data.height)}}),t.getAllEdges().forEach(function(n){var r=t.getEdge(n.id),i=e.getEdge(n.id);r.data.points=i?i.data.points:[],i&&i.data.hasOwnProperty("x")&&(r.data.x=i.data.x,r.data.y=i.data.y)})},tO=["width","height","layer","fixorder"],eO={width:0,height:0},nO=["minlen","weight","width","height","labeloffset"],rO={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},iO=["labelpos"],oO=function(t){var e=new xB({tree:[]});return t.getAllNodes().forEach(function(n){var r=mO(t.getNode(n.id).data),i=Object.assign(Object.assign({},eO),r),o=yO(i,tO);e.hasNode(n.id)||e.addNode({id:n.id,data:Object.assign({},o)});var a=t.hasTreeStructure("combo")?t.getParent(n.id,"combo"):t.getParent(n.id);pe(a)||(e.hasNode(a.id)||e.addNode(Object.assign({},a)),e.setParent(n.id,a.id))}),t.getAllEdges().forEach(function(n){var r=mO(t.getEdge(n.id).data),i={};null==iO||iO.forEach(function(t){void 0!==r[t]&&(i[t]=r[t])}),e.addEdge({id:n.id,source:n.source,target:n.target,data:Object.assign({},rO,yO(r,nO),i)})}),e},aO=function(t,e){var n=e.ranksep,r=void 0===n?0:n,i=e.rankdir;return t.getAllNodes().forEach(function(t){isNaN(t.data.layer)||t.data.layer||(t.data.layer=0)}),t.getAllEdges().forEach(function(t){var e;t.data.minlen*=2,"c"!==(null===(e=t.data.labelpos)||void 0===e?void 0:e.toLowerCase())&&("TB"===i||"BT"===i?t.data.width+=t.data.labeloffset:t.data.height+=t.data.labeloffset)}),r/2},sO=function(t){t.getAllEdges().forEach(function(e){if(e.data.width&&e.data.height){var n=t.getNode(e.source),r={e,rank:(t.getNode(e.target).data.rank-n.data.rank)/2+n.data.rank};XB(t,"edge-proxy",r,"_ep")}})},uO=function(t){var e=0;return t.getAllNodes().forEach(function(n){var r,i;n.data.borderTop&&(n.data.minRank=null===(r=t.getNode(n.data.borderTop))||void 0===r?void 0:r.data.rank,n.data.maxRank=null===(i=t.getNode(n.data.borderBottom))||void 0===i?void 0:i.data.rank,e=Math.max(e,n.data.maxRank||-1/0))}),e},cO=function(t){t.getAllNodes().forEach(function(e){"edge-proxy"===e.data.dummy&&(t.getEdge(e.data.e.id).data.labelRank=e.data.rank,t.removeNode(e.id))})},lO=function(t,e){var n,r,i=0,o=0,a=e||{},s=a.marginx,u=void 0===s?0:s,c=a.marginy,l=void 0===c?0:c,A=function(t){if(t.data){var e=t.data.x,a=t.data.y,s=t.data.width,u=t.data.height;isNaN(e)||isNaN(s)||(void 0===n&&(n=e-s/2),n=Math.min(n,e-s/2),i=Math.max(i,e+s/2)),isNaN(a)||isNaN(u)||(void 0===r&&(r=a-u/2),r=Math.min(r,a-u/2),o=Math.max(o,a+u/2))}};return t.getAllNodes().forEach(function(t){A(t)}),t.getAllEdges().forEach(function(t){(null==t?void 0:t.data.hasOwnProperty("x"))&&A(t)}),n-=u,r-=l,t.getAllNodes().forEach(function(t){t.data.x-=n,t.data.y-=r}),t.getAllEdges().forEach(function(t){var e;null===(e=t.data.points)||void 0===e||e.forEach(function(t){t.x-=n,t.y-=r}),t.data.hasOwnProperty("x")&&(t.data.x-=n),t.data.hasOwnProperty("y")&&(t.data.y-=r)}),{width:i-n+u,height:o-r+l}},AO=function(t){t.getAllEdges().forEach(function(e){var n,r,i=t.getNode(e.source),o=t.getNode(e.target);e.data.points?(n=e.data.points[0],r=e.data.points[e.data.points.length-1]):(e.data.points=[],n={x:o.data.x,y:o.data.y},r={x:i.data.x,y:i.data.y}),e.data.points.unshift(ZB(i.data,n)),e.data.points.push(ZB(o.data,r))})},fO=function(t){t.getAllEdges().forEach(function(t){if(t.data.hasOwnProperty("x"))switch("l"!==t.data.labelpos&&"r"!==t.data.labelpos||(t.data.width-=t.data.labeloffset),t.data.labelpos){case"l":t.data.x-=t.data.width/2+t.data.labeloffset;break;case"r":t.data.x+=t.data.width/2+t.data.labeloffset}})},dO=function(t){t.getAllEdges().forEach(function(t){var e;t.data.reversed&&(null===(e=t.data.points)||void 0===e||e.reverse())})},hO=function(t){t.getAllNodes().forEach(function(e){var n,r,i;if(null===(n=t.getChildren(e.id))||void 0===n?void 0:n.length){var o=t.getNode(e.id),a=t.getNode(o.data.borderTop),s=t.getNode(o.data.borderBottom),u=t.getNode(o.data.borderLeft[(null===(r=o.data.borderLeft)||void 0===r?void 0:r.length)-1]),c=t.getNode(o.data.borderRight[(null===(i=o.data.borderRight)||void 0===i?void 0:i.length)-1]);o.data.width=Math.abs((null==c?void 0:c.data.x)-(null==u?void 0:u.data.x))||10,o.data.height=Math.abs((null==s?void 0:s.data.y)-(null==a?void 0:a.data.y))||10,o.data.x=((null==u?void 0:u.data.x)||0)+o.data.width/2,o.data.y=((null==a?void 0:a.data.y)||0)+o.data.height/2}}),t.getAllNodes().forEach(function(e){"border"===e.data.dummy&&t.removeNode(e.id)})},pO=function(t){t.getAllEdges().forEach(function(e){if(e.source===e.target){var n=t.getNode(e.source);n.data.selfEdges||(n.data.selfEdges=[]),n.data.selfEdges.push(e),t.removeEdge(e.id)}})},vO=function(t){var e=JB(t);null==e||e.forEach(function(e){var n=0;null==e||e.forEach(function(e,r){var i,o=t.getNode(e);o.data.order=r+n,null===(i=o.data.selfEdges)||void 0===i||i.forEach(function(e){XB(t,"selfedge",{width:e.data.width,height:e.data.height,rank:o.data.rank,order:r+ ++n,e},"_se")}),delete o.data.selfEdges})})},gO=function(t){t.getAllNodes().forEach(function(e){var n=t.getNode(e.id);if("selfedge"===n.data.dummy){var r=t.getNode(n.data.e.source),i=r.data.x+r.data.width/2,o=r.data.y,a=n.data.x-i,s=r.data.height/2;t.hasEdge(n.data.e.id)?t.updateEdgeData(n.data.e.id,n.data.e.data):t.addEdge({id:n.data.e.id,source:n.data.e.source,target:n.data.e.target,data:n.data.e.data}),t.removeNode(e.id),n.data.e.data.points=[{x:i+2*a/3,y:o-s},{x:i+5*a/6,y:o-s},{y:o,x:i+a},{x:i+5*a/6,y:o+s},{x:i+2*a/3,y:o+s}],n.data.e.data.x=n.data.x,n.data.e.data.y=n.data.y}})},yO=function(t,e){var n={};return null==e||e.forEach(function(e){void 0!==t[e]&&(n[e]=+t[e])}),n},mO=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={};return Object.keys(t).forEach(function(n){e[n.toLowerCase()]=t[n]}),e};function bO(t){if(!t)return[0,0,0];if(de(t))return[t,t,t];if(0===t.length)return[0,0,0];var e=v(t,3),n=e[0],r=e[1],i=void 0===r?n:r,o=e[2];return[n,i,void 0===o?n:o]}function wO(t,e){return mn(e)?e:de(e)?function(){return e}:function(){return t}}function xO(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e||0===e?mn(e)?e:de(e)?function(){return e}:Array.isArray(e)?function(){return n?Math.max.apply(Math,O(e))||t:e}:bn(e)&&e.width&&e.height?function(){return n?Math.max(e.width,e.height)||t:[e.width,e.height]}:function(){return t}:function(e){var r=(e.data||{}).size;return r?Array.isArray(r)?n?Math.max.apply(Math,O(r))||t:r:bn(r)&&r.width&&r.height?n?Math.max(r.width,r.height)||t:[r.width,r.height]:r:t}}var EO=function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i="function"==typeof e?e:function(){return e||0};return n=t?Array.isArray(t)?function(e){return t}:mn(t)?t:function(e){return t}:function(t){var e,n,i;if(null===(e=t.data)||void 0===e?void 0:e.bboxSize)return null===(n=t.data)||void 0===n?void 0:n.bboxSize;if(null===(i=t.data)||void 0===i?void 0:i.size){var o=t.data.size;return Array.isArray(o)?o:bn(o)?[o.width,o.height]:o}return r},function(t){var e=n(t),r=i(t);return Math.max.apply(Math,O(bO(e)))+r}},BO=function(t){if(null===t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof Array){var e=[];return t.forEach(function(t){e.push(t)}),e.map(function(t){return BO(t)})}if("object"==typeof t){var n={};return Object.keys(t).forEach(function(e){n[e]=BO(t[e])}),n}return t},kO=function(t,e){var n=BO(t);return n.data=n.data||{},e&&(de(n.data.x)||(n.data.x=Math.random()*e[0]),de(n.data.y)||(n.data.y=Math.random()*e[1])),n},OO={rankdir:"TB",nodesep:50,ranksep:50,edgeLabelSpace:!0,ranker:"tight-tree",controlPoints:!1,radial:!1,focusNode:null},CO=function(){return B(function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};x(this,t),this.options=e,this.id="antv-dagre",this.options=Object.assign(Object.assign({},OO),e)},[{key:"execute",value:function(t,e){return xe(this,void 0,void 0,(0,Dn.A)().m(function n(){return(0,Dn.A)().w(function(n){for(;;)if(0===n.n)return n.a(2,this.genericDagreLayout(!1,t,e))},n,this)}))}},{key:"assign",value:function(t,e){return xe(this,void 0,void 0,(0,Dn.A)().m(function n(){return(0,Dn.A)().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,this.genericDagreLayout(!0,t,e);case 1:return n.a(2)}},n,this)}))}},{key:"genericDagreLayout",value:function(t,e,n){return xe(this,void 0,void 0,(0,Dn.A)().m(function r(){var i,o,a,s,u,c,l,A,f,d,h,p,v,g,y,m,b,w,x,E,B,k,O,C,M,S,F,T,P,I,N,L,_,Q,U,j,D,R;return(0,Dn.A)().w(function(r){for(;;)if(0===r.n)return i=Object.assign(Object.assign({},this.options),n),o=i.nodeSize,a=i.align,s=i.rankdir,u=void 0===s?"TB":s,c=i.ranksep,l=i.nodesep,A=i.ranksepFunc,f=i.nodesepFunc,d=i.edgeLabelSpace,h=i.ranker,p=i.nodeOrder,v=i.begin,g=i.controlPoints,y=i.radial,m=i.sortByCombo,b=i.preset,w=new xB({tree:[]}),x=wO(c||50,A),E=wO(l||50,f),B=E,k=x,"LR"!==u&&"RL"!==u||(B=x,k=E),O=xO(10,o,!1),C=e.getAllNodes(),M=e.getAllEdges(),C.forEach(function(t){var e=bO(O(t)),n=k(t),r=B(t),i=e[0]+2*r,o=e[1]+2*n,a=t.data.layer;de(a)?w.addNode({id:t.id,data:{width:i,height:o,layer:a}}):w.addNode({id:t.id,data:{width:i,height:o}})}),m&&(w.attachTreeStructure("combo"),C.forEach(function(t){var e=t.data.parentId;void 0!==e&&w.hasNode(e)&&w.setParent(t.id,e,"combo")})),M.forEach(function(t){w.addEdge({id:t.id,source:t.source,target:t.target,data:{weight:t.data.weight||1}})}),S=void 0,(null==b?void 0:b.length)&&(S=new xB({nodes:b})),qk(w,{prevGraph:S,edgeLabelSpace:d,keepNodeOrder:!!p,nodeOrder:p||[],acyclicer:"greedy",ranker:h,rankdir:u,nodesep:l,align:a}),F=[0,0],v&&(T=1/0,P=1/0,w.getAllNodes().forEach(function(t){T>t.data.x&&(T=t.data.x),P>t.data.y&&(P=t.data.y)}),w.getAllEdges().forEach(function(t){var e;null===(e=t.data.points)||void 0===e||e.forEach(function(t){T>t.x&&(T=t.x),P>t.y&&(P=t.y)})}),F[0]=v[0]-T,F[1]=v[1]-P),I="LR"===u||"RL"===u,y||(N=new Set,L="BT"===u||"RL"===u?function(t,e){return e-t}:function(t,e){return t-e},w.getAllNodes().forEach(function(t){t.data.x=t.data.x+F[0],t.data.y=t.data.y+F[1],N.add(I?t.data.x:t.data.y)}),_=Array.from(N).sort(L),Q=I?function(t,e){return t.x!==e.x}:function(t,e){return t.y!==e.y},U=I?function(t,e,n){var r=Math.max(e.y,n.y),i=Math.min(e.y,n.y);return t.filter(function(t){return t.y<=r&&t.y>=i})}:function(t,e,n){var r=Math.max(e.x,n.x),i=Math.min(e.x,n.x);return t.filter(function(t){return t.x<=r&&t.x>=i})},w.getAllEdges().forEach(function(t,e){var n;d&&g&&"loop"!==t.data.type&&(t.data.controlPoints=MO(null===(n=t.data.points)||void 0===n?void 0:n.map(function(t){var e=t.x,n=t.y;return{x:e+F[0],y:n+F[1]}}),w.getNode(t.source),w.getNode(t.target),_,I,Q,U))})),j=[],j=w.getAllNodes().map(function(t){return kO(t)}),D=w.getAllEdges(),t&&(j.forEach(function(t){e.mergeNodeData(t.id,{x:t.data.x,y:t.data.y})}),D.forEach(function(t){e.mergeEdgeData(t.id,{controlPoints:t.data.controlPoints})})),R={nodes:j,edges:D},r.a(2,R)},r,this)}))}}])}(),MO=function(t,e,n,r,i,o,a){var s=(null==t?void 0:t.slice(1,t.length-1))||[];if(e&&n){var u=e.data,c=u.x,l=u.y,A=n.data,f=A.x,d=A.y;if(i&&(c=e.data.y,l=e.data.x,f=n.data.y,d=n.data.x),d!==l&&c!==f){var h=r.indexOf(l),p=r[h+1];if(p){var v=s[0],g=i?{x:(l+p)/2,y:(null==v?void 0:v.y)||f}:{x:(null==v?void 0:v.x)||f,y:(l+p)/2};v&&!o(v,g)||s.unshift(g)}var y=r.indexOf(d),m=Math.abs(y-h);if(1===m)(s=a(s,e.data,n.data)).length||s.push(i?{x:(l+d)/2,y:c}:{x:c,y:(l+d)/2});else if(m>1){var b=r[y-1];if(b){var w=s[s.length-1],x=i?{x:(d+b)/2,y:(null==w?void 0:w.y)||f}:{x:(null==w?void 0:w.x)||c,y:(d+b)/2};w&&!o(w,x)||s.push(x)}}}}return s},SO=function(t,e,n){var r=t.getAllNodes(),i=t.getAllEdges();return(null==r?void 0:r.length)?1===r.length?(e&&t.mergeNodeData(r[0].id,{x:n[0],y:n[1]}),{nodes:[Object.assign(Object.assign({},r[0]),{data:Object.assign(Object.assign({},r[0].data),{x:n[0],y:n[1]})})],edges:i}):void 0:{nodes:[],edges:i}},FO={radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1},TO=function(){return B(function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};x(this,t),this.options=e,this.id="circular",this.options=Object.assign(Object.assign({},FO),e)},[{key:"execute",value:function(t,e){return xe(this,void 0,void 0,(0,Dn.A)().m(function n(){return(0,Dn.A)().w(function(n){for(;;)if(0===n.n)return n.a(2,this.genericCircularLayout(!1,t,e))},n,this)}))}},{key:"assign",value:function(t,e){return xe(this,void 0,void 0,(0,Dn.A)().m(function n(){return(0,Dn.A)().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,this.genericCircularLayout(!0,t,e);case 1:return n.a(2)}},n,this)}))}},{key:"genericCircularLayout",value:function(t,e,n){return xe(this,void 0,void 0,(0,Dn.A)().m(function r(){var i,o,a,s,u,c,l,A,f,d,h,p,g,y,m,b,w,x,E,B,k,O,C,M,S,F,T,P,I,N,L,_,Q,U,j,D,R;return(0,Dn.A)().w(function(r){for(;;)switch(r.n){case 0:if(i=Object.assign(Object.assign({},this.options),n),o=i.width,a=i.height,s=i.center,u=i.divisions,c=i.startAngle,l=void 0===c?0:c,A=i.endAngle,f=void 0===A?2*Math.PI:A,d=i.angleRatio,h=i.ordering,p=i.clockwise,g=i.nodeSpacing,y=i.nodeSize,m=e.getAllNodes(),b=e.getAllEdges(),w=NO(o,a,s),x=v(w,3),E=x[0],B=x[1],k=x[2],(O=null==m?void 0:m.length)&&1!==O){r.n=1;break}return r.a(2,SO(e,t,k));case 1:for(C=(f-l)/O,M=i.radius,S=i.startRadius,F=i.endRadius,g?(T=wO(10,g),P=xO(10,y),I=-1/0,m.forEach(function(t){var e=P(t);I<e&&(I=e)}),N=0,m.forEach(function(t,e){N+=0===e?I||10:(T(t)||0)+(I||10)}),M=N/(2*Math.PI)):M||S||F?!S&&F?S=F:S&&!F&&(F=S):M=Math.min(B,E)/2,L=C*d,_=[],_="topology"===h?PO(e,m):"topology-directed"===h?PO(e,m,!0):"degree"===h?IO(e,m):m.map(function(t){return kO(t)}),Q=Math.ceil(O/u),U=0;U<O;++U)(j=M)||null===S||null===F||(j=S+U*(F-S)/(O-1)),j||(j=10+100*U/(O-1)),D=l+U%Q*L+2*Math.PI/u*Math.floor(U/Q),p||(D=f-U%Q*L-2*Math.PI/u*Math.floor(U/Q)),_[U].data.x=k[0]+Math.cos(D)*j,_[U].data.y=k[1]+Math.sin(D)*j;return t&&_.forEach(function(t){e.mergeNodeData(t.id,{x:t.data.x,y:t.data.y})}),R={nodes:_,edges:b},r.a(2,R)}},r,this)}))}}])}(),PO=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[kO(e[0])],i={},o=e.length;i[e[0].id]=!0;var a=0;return e.forEach(function(s,u){if(0!==u)if(u!==o-1&&t.getDegree(s.id,"both")===t.getDegree(e[u+1].id,"both")&&!t.areNeighbors(r[a].id,s.id)||i[s.id]){for(var c=n?t.getSuccessors(r[a].id):t.getNeighbors(r[a].id),l=!1,A=0;A<c.length;A++){var f=c[A];if(t.getDegree(f.id)===t.getDegree(s.id)&&!i[f.id]){r.push(kO(f)),i[f.id]=!0,l=!0;break}}for(var d=0;!l&&(i[e[d].id]||(r.push(kO(e[d])),i[e[d].id]=!0,l=!0),++d!==o););}else r.push(kO(s)),i[s.id]=!0,a++}),r};function IO(t,e){var n=[];return e.forEach(function(t,e){n.push(kO(t))}),n.sort(function(e,n){return t.getDegree(e.id,"both")-t.getDegree(n.id,"both")}),n}var NO=function(t,e,n){var r=t,i=e,o=n;return r||"undefined"==typeof window||(r=window.innerWidth),i||"undefined"==typeof window||(i=window.innerHeight),o||(o=[r/2,i/2]),[r,i,o]},LO=Array.isArray,_O={nodeSize:30,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:1.5*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"},QO=function(){return B(function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};x(this,t),this.options=e,this.id="concentric",this.options=Object.assign(Object.assign({},_O),e)},[{key:"execute",value:function(t,e){return xe(this,void 0,void 0,(0,Dn.A)().m(function n(){return(0,Dn.A)().w(function(n){for(;;)if(0===n.n)return n.a(2,this.genericConcentricLayout(!1,t,e))},n,this)}))}},{key:"assign",value:function(t,e){return xe(this,void 0,void 0,(0,Dn.A)().m(function n(){return(0,Dn.A)().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,this.genericConcentricLayout(!0,t,e);case 1:return n.a(2)}},n,this)}))}},{key:"genericConcentricLayout",value:function(t,e,n){return xe(this,void 0,void 0,(0,Dn.A)().m(function r(){var i,o,a,s,u,c,l,A,f,d,h,p,v,g,y,m,b,w,x,E,B,k,C,M,S,F,T,P,I,N,L,_,Q,U,j,D,R,H,z;return(0,Dn.A)().w(function(r){for(;;)switch(r.n){case 0:if(i=Object.assign(Object.assign({},this.options),n),o=i.center,a=i.width,s=i.height,u=i.sortBy,c=i.maxLevelDiff,l=i.sweep,A=i.clockwise,f=i.equidistant,d=i.preventOverlap,h=i.startAngle,p=void 0===h?1.5*Math.PI:h,v=i.nodeSize,g=i.nodeSpacing,y=e.getAllNodes(),m=e.getAllEdges(),b=a||"undefined"==typeof window?a:window.innerWidth,w=s||"undefined"==typeof window?s:window.innerHeight,x=o||[b/2,w/2],(null==y?void 0:y.length)&&1!==y.length){r.n=1;break}return r.a(2,SO(e,t,x));case 1:if(E=[],k=0,LO(v)?B=Math.max(v[0],v[1]):mn(v)?(B=-1/0,y.forEach(function(t){var e=Math.max.apply(Math,O(bO(v(t))));e>B&&(B=e)})):B=v,LO(g)?k=Math.max(g[0],g[1]):de(g)&&(k=g),y.forEach(function(t){var e=kO(t);E.push(e);var n=B,r=e.data;LO(r.size)?n=Math.max(r.size[0],r.size[1]):de(r.size)?n=r.size:bn(r.size)&&(n=Math.max(r.size.width,r.size.height)),B=Math.max(B,n),mn(g)&&(k=Math.max(g(t),k))}),C={},E.forEach(function(t,e){C[t.id]=e}),ve(M=u)&&void 0!==E[0].data[M]||(M="degree"),"degree"===M?E.sort(function(t,n){return e.getDegree(n.id,"both")-e.getDegree(t.id,"both")}):E.sort(function(t,e){return e.data[M]-t.data[M]}),S=E[0],F=(c||("degree"===M?e.getDegree(S.id,"both"):S.data[M]))/4,P=(T=[{nodes:[]}])[0],E.forEach(function(t){if(P.nodes.length>0){var n="degree"===M?Math.abs(e.getDegree(P.nodes[0].id,"both")-e.getDegree(t.id,"both")):Math.abs(P.nodes[0].data[M]-t.data[M]);F&&n>=F&&(P={nodes:[]},T.push(P))}P.nodes.push(t)}),I=B+k,d||(N=T.length>0&&T[0].nodes.length>1,L=Math.min(b,w)/2-I,_=L/(T.length+(N?1:0)),I=Math.min(I,_)),Q=0,T.forEach(function(t){var e=void 0===l?2*Math.PI-2*Math.PI/t.nodes.length:l;if(t.dTheta=e/Math.max(1,t.nodes.length-1),t.nodes.length>1&&d){var n=Math.cos(t.dTheta)-Math.cos(0),r=Math.sin(t.dTheta)-Math.sin(0),i=Math.sqrt(I*I/(n*n+r*r));Q=Math.max(i,Q)}t.r=Q,Q+=I}),f){for(U=0,j=0,D=0;D<T.length;D++)R=T[D],H=(R.r||0)-j,U=Math.max(U,H);j=0,T.forEach(function(t,e){0===e&&(j=t.r||0),t.r=j,j+=U})}return T.forEach(function(t){var e=t.dTheta||0,n=t.r||0;t.nodes.forEach(function(t,r){var i=p+(A?1:-1)*e*r;t.data.x=x[0]+n*Math.cos(i),t.data.y=x[1]+n*Math.sin(i)})}),t&&E.forEach(function(t){return e.mergeNodeData(t.id,{x:t.data.x,y:t.data.y})}),z={nodes:E,edges:m},r.a(2,z)}},r,this)}))}}])}();function UO(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,a,s,u,c,l,A,f,d=t._root,h={data:r},p=t._x0,v=t._y0,g=t._x1,y=t._y1;if(!d)return t._root=h,t;for(;d.length;)if((c=e>=(o=(p+g)/2))?p=o:g=o,(l=n>=(a=(v+y)/2))?v=a:y=a,i=d,!(d=d[A=l<<1|c]))return i[A]=h,t;if(s=+t._x.call(null,d.data),u=+t._y.call(null,d.data),e===s&&n===u)return h.next=d,i?i[A]=h:t._root=h,t;do{i=i?i[A]=new Array(4):t._root=new Array(4),(c=e>=(o=(p+g)/2))?p=o:g=o,(l=n>=(a=(v+y)/2))?v=a:y=a}while((A=l<<1|c)==(f=(u>=a)<<1|s>=o));return i[f]=d,i[A]=h,t}function jO(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function DO(t){return t[0]}function RO(t){return t[1]}function HO(t,e,n){var r=new zO(null==e?DO:e,null==n?RO:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function zO(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function KO(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var GO=HO.prototype=zO.prototype;function VO(t,e,n,r,i){if(isNaN(e)||isNaN(n)||isNaN(r))return t;var o,a,s,u,c,l,A,f,d,h,p,v,g=t._root,y={data:i},m=t._x0,b=t._y0,w=t._z0,x=t._x1,E=t._y1,B=t._z1;if(!g)return t._root=y,t;for(;g.length;)if((f=e>=(a=(m+x)/2))?m=a:x=a,(d=n>=(s=(b+E)/2))?b=s:E=s,(h=r>=(u=(w+B)/2))?w=u:B=u,o=g,!(g=g[p=h<<2|d<<1|f]))return o[p]=y,t;if(c=+t._x.call(null,g.data),l=+t._y.call(null,g.data),A=+t._z.call(null,g.data),e===c&&n===l&&r===A)return y.next=g,o?o[p]=y:t._root=y,t;do{o=o?o[p]=new Array(8):t._root=new Array(8),(f=e>=(a=(m+x)/2))?m=a:x=a,(d=n>=(s=(b+E)/2))?b=s:E=s,(h=r>=(u=(w+B)/2))?w=u:B=u}while((p=h<<2|d<<1|f)==(v=(A>=u)<<2|(l>=s)<<1|c>=a));return o[v]=g,o[p]=y,t}function WO(t,e,n,r,i,o,a){this.node=t,this.x0=e,this.y0=n,this.z0=r,this.x1=i,this.y1=o,this.z1=a}GO.copy=function(){var t,e,n=new zO(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=KO(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=KO(e));return n},GO.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return UO(this.cover(e,n),e,n,t)},GO.addAll=function(t){var e,n,r,i,o=t.length,a=new Array(o),s=new Array(o),u=1/0,c=1/0,l=-1/0,A=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(a[n]=r,s[n]=i,r<u&&(u=r),r>l&&(l=r),i<c&&(c=i),i>A&&(A=i));if(u>l||c>A)return this;for(this.cover(u,c).cover(l,A),n=0;n<o;++n)UO(this,a[n],s[n],t[n]);return this},GO.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var a,s,u=i-n||1,c=this._root;n>t||t>=i||r>e||e>=o;)switch(s=(e<r)<<1|t<n,(a=new Array(4))[s]=c,c=a,u*=2,s){case 0:i=n+u,o=r+u;break;case 1:n=i-u,o=r+u;break;case 2:i=n+u,r=o-u;break;case 3:n=i-u,r=o-u}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},GO.data=function(){var t=[];return this.visit(function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)}),t},GO.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},GO.find=function(t,e,n){var r,i,o,a,s,u,c,l=this._x0,A=this._y0,f=this._x1,d=this._y1,h=[],p=this._root;for(p&&h.push(new jO(p,l,A,f,d)),null==n?n=1/0:(l=t-n,A=e-n,f=t+n,d=e+n,n*=n);u=h.pop();)if(!(!(p=u.node)||(i=u.x0)>f||(o=u.y0)>d||(a=u.x1)<l||(s=u.y1)<A))if(p.length){var v=(i+a)/2,g=(o+s)/2;h.push(new jO(p[3],v,g,a,s),new jO(p[2],i,g,v,s),new jO(p[1],v,o,a,g),new jO(p[0],i,o,v,g)),(c=(e>=g)<<1|t>=v)&&(u=h[h.length-1],h[h.length-1]=h[h.length-1-c],h[h.length-1-c]=u)}else{var y=t-+this._x.call(null,p.data),m=e-+this._y.call(null,p.data),b=y*y+m*m;if(b<n){var w=Math.sqrt(n=b);l=t-w,A=e-w,f=t+w,d=e+w,r=p.data}}return r},GO.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,i,o,a,s,u,c,l,A,f,d=this._root,h=this._x0,p=this._y0,v=this._x1,g=this._y1;if(!d)return this;if(d.length)for(;;){if((c=o>=(s=(h+v)/2))?h=s:v=s,(l=a>=(u=(p+g)/2))?p=u:g=u,e=d,!(d=d[A=l<<1|c]))return this;if(!d.length)break;(e[A+1&3]||e[A+2&3]||e[A+3&3])&&(n=e,f=A)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,r?(i?r.next=i:delete r.next,this):e?(i?e[A]=i:delete e[A],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[f]=d:this._root=d),this):(this._root=i,this)},GO.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},GO.root=function(){return this._root},GO.size=function(){var t=0;return this.visit(function(e){if(!e.length)do{++t}while(e=e.next)}),t},GO.visit=function(t){var e,n,r,i,o,a,s=[],u=this._root;for(u&&s.push(new jO(u,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(u=e.node,r=e.x0,i=e.y0,o=e.x1,a=e.y1)&&u.length){var c=(r+o)/2,l=(i+a)/2;(n=u[3])&&s.push(new jO(n,c,l,o,a)),(n=u[2])&&s.push(new jO(n,r,l,c,a)),(n=u[1])&&s.push(new jO(n,c,i,o,l)),(n=u[0])&&s.push(new jO(n,r,i,c,l))}return this},GO.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new jO(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var o,a=e.x0,s=e.y0,u=e.x1,c=e.y1,l=(a+u)/2,A=(s+c)/2;(o=i[0])&&n.push(new jO(o,a,s,l,A)),(o=i[1])&&n.push(new jO(o,l,s,u,A)),(o=i[2])&&n.push(new jO(o,a,A,l,c)),(o=i[3])&&n.push(new jO(o,l,A,u,c))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},GO.x=function(t){return arguments.length?(this._x=t,this):this._x},GO.y=function(t){return arguments.length?(this._y=t,this):this._y};var YO=function(t,e,n,r,i,o){return Math.sqrt(Math.pow(t-r,2)+Math.pow(e-i,2)+Math.pow(n-o,2))};function XO(t){return t[0]}function qO(t){return t[1]}function ZO(t){return t[2]}function JO(t,e,n,r){var i=new $O(null==e?XO:e,null==n?qO:n,null==r?ZO:r,NaN,NaN,NaN,NaN,NaN,NaN);return null==t?i:i.addAll(t)}function $O(t,e,n,r,i,o,a,s,u){this._x=t,this._y=e,this._z=n,this._x0=r,this._y0=i,this._z0=o,this._x1=a,this._y1=s,this._z1=u,this._root=void 0}function tC(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var eC=JO.prototype=$O.prototype;function nC(t){var e=0,n=0,r=0,i=0,o=0,a=t.length;if(a){for(var s=0;s<a;s++){var u=t[s];u&&u.weight&&(e+=u.weight,n+=u.x*u.weight,r+=u.y*u.weight,i+=u.z*u.weight,o+=u.size*u.weight)}t.x=n/e,t.y=r/e,t.z=i/e,t.size=o/e,t.weight=e}else{var c=t;t.x=c.data.x,t.y=c.data.y,t.z=c.data.z,t.size=c.data.size,t.weight=c.data.weight}}eC.copy=function(){var t,e,n=new $O(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),r=this._root;if(!r)return n;if(!r.length)return n._root=tC(r),n;for(t=[{source:r,target:n._root=new Array(8)}];r=t.pop();)for(var i=0;i<8;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(8)}):r.target[i]=tC(e));return n},eC.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t),r=+this._z.call(null,t);return VO(this.cover(e,n,r),e,n,r,t)},eC.addAll=function(t){Array.isArray(t)||(t=Array.from(t));for(var e,n,r,i,o=t.length,a=new Float64Array(o),s=new Float64Array(o),u=new Float64Array(o),c=1/0,l=1/0,A=1/0,f=-1/0,d=-1/0,h=-1/0,p=0;p<o;++p)isNaN(n=+this._x.call(null,e=t[p]))||isNaN(r=+this._y.call(null,e))||isNaN(i=+this._z.call(null,e))||(a[p]=n,s[p]=r,u[p]=i,n<c&&(c=n),n>f&&(f=n),r<l&&(l=r),r>d&&(d=r),i<A&&(A=i),i>h&&(h=i));if(c>f||l>d||A>h)return this;this.cover(c,l,A).cover(f,d,h);for(var v=0;v<o;++v)VO(this,a[v],s[v],u[v],t[v]);return this},eC.cover=function(t,e,n){if(isNaN(t=+t)||isNaN(e=+e)||isNaN(n=+n))return this;var r=this._x0,i=this._y0,o=this._z0,a=this._x1,s=this._y1,u=this._z1;if(isNaN(r))a=(r=Math.floor(t))+1,s=(i=Math.floor(e))+1,u=(o=Math.floor(n))+1;else{for(var c,l,A=a-r||1,f=this._root;r>t||t>=a||i>e||e>=s||o>n||n>=u;)switch(l=(n<o)<<2|(e<i)<<1|t<r,(c=new Array(8))[l]=f,f=c,A*=2,l){case 0:a=r+A,s=i+A,u=o+A;break;case 1:r=a-A,s=i+A,u=o+A;break;case 2:a=r+A,i=s-A,u=o+A;break;case 3:r=a-A,i=s-A,u=o+A;break;case 4:a=r+A,s=i+A,o=u-A;break;case 5:r=a-A,s=i+A,o=u-A;break;case 6:a=r+A,i=s-A,o=u-A;break;case 7:r=a-A,i=s-A,o=u-A}this._root&&this._root.length&&(this._root=f)}return this._x0=r,this._y0=i,this._z0=o,this._x1=a,this._y1=s,this._z1=u,this},eC.data=function(){var t=[];return this.visit(function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)}),t},eC.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1],+t[0][2]).cover(+t[1][0],+t[1][1],+t[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]},eC.find=function(t,e,n,r){var i,o,a,s,u,c,l,A,f,d=this._x0,h=this._y0,p=this._z0,v=this._x1,g=this._y1,y=this._z1,m=[],b=this._root;for(b&&m.push(new WO(b,d,h,p,v,g,y)),null==r?r=1/0:(d=t-r,h=e-r,p=n-r,v=t+r,g=e+r,y=n+r,r*=r);A=m.pop();)if(!(!(b=A.node)||(o=A.x0)>v||(a=A.y0)>g||(s=A.z0)>y||(u=A.x1)<d||(c=A.y1)<h||(l=A.z1)<p))if(b.length){var w=(o+u)/2,x=(a+c)/2,E=(s+l)/2;m.push(new WO(b[7],w,x,E,u,c,l),new WO(b[6],o,x,E,w,c,l),new WO(b[5],w,a,E,u,x,l),new WO(b[4],o,a,E,w,x,l),new WO(b[3],w,x,s,u,c,E),new WO(b[2],o,x,s,w,c,E),new WO(b[1],w,a,s,u,x,E),new WO(b[0],o,a,s,w,x,E)),(f=(n>=E)<<2|(e>=x)<<1|t>=w)&&(A=m[m.length-1],m[m.length-1]=m[m.length-1-f],m[m.length-1-f]=A)}else{var B=t-+this._x.call(null,b.data),k=e-+this._y.call(null,b.data),O=n-+this._z.call(null,b.data),C=B*B+k*k+O*O;if(C<r){var M=Math.sqrt(r=C);d=t-M,h=e-M,p=n-M,v=t+M,g=e+M,y=n+M,i=b.data}}return i},eC.findAllWithinRadius=function(t,e,n,r){var i=this,o=[],a=t-r,s=e-r,u=n-r,c=t+r,l=e+r,A=n+r;return this.visit(function(f,d,h,p,v,g,y){if(!f.length)do{var m=f.data;YO(t,e,n,i._x(m),i._y(m),i._z(m))<=r&&o.push(m)}while(f=f.next);return d>c||h>l||p>A||v<a||g<s||y<u}),o},eC.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t))||isNaN(s=+this._z.call(null,t)))return this;var e,n,r,i,o,a,s,u,c,l,A,f,d,h,p,v=this._root,g=this._x0,y=this._y0,m=this._z0,b=this._x1,w=this._y1,x=this._z1;if(!v)return this;if(v.length)for(;;){if((A=o>=(u=(g+b)/2))?g=u:b=u,(f=a>=(c=(y+w)/2))?y=c:w=c,(d=s>=(l=(m+x)/2))?m=l:x=l,e=v,!(v=v[h=d<<2|f<<1|A]))return this;if(!v.length)break;(e[h+1&7]||e[h+2&7]||e[h+3&7]||e[h+4&7]||e[h+5&7]||e[h+6&7]||e[h+7&7])&&(n=e,p=h)}for(;v.data!==t;)if(r=v,!(v=v.next))return this;return(i=v.next)&&delete v.next,r?(i?r.next=i:delete r.next,this):e?(i?e[h]=i:delete e[h],(v=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&v===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!v.length&&(n?n[p]=v:this._root=v),this):(this._root=i,this)},eC.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},eC.root=function(){return this._root},eC.size=function(){var t=0;return this.visit(function(e){if(!e.length)do{++t}while(e=e.next)}),t},eC.visit=function(t){var e,n,r,i,o,a,s,u,c=[],l=this._root;for(l&&c.push(new WO(l,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));e=c.pop();)if(!t(l=e.node,r=e.x0,i=e.y0,o=e.z0,a=e.x1,s=e.y1,u=e.z1)&&l.length){var A=(r+a)/2,f=(i+s)/2,d=(o+u)/2;(n=l[7])&&c.push(new WO(n,A,f,d,a,s,u)),(n=l[6])&&c.push(new WO(n,r,f,d,A,s,u)),(n=l[5])&&c.push(new WO(n,A,i,d,a,f,u)),(n=l[4])&&c.push(new WO(n,r,i,d,A,f,u)),(n=l[3])&&c.push(new WO(n,A,f,o,a,s,d)),(n=l[2])&&c.push(new WO(n,r,f,o,A,s,d)),(n=l[1])&&c.push(new WO(n,A,i,o,a,f,d)),(n=l[0])&&c.push(new WO(n,r,i,o,A,f,d))}return this},eC.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new WO(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));e=n.pop();){var i=e.node;if(i.length){var o,a=e.x0,s=e.y0,u=e.z0,c=e.x1,l=e.y1,A=e.z1,f=(a+c)/2,d=(s+l)/2,h=(u+A)/2;(o=i[0])&&n.push(new WO(o,a,s,u,f,d,h)),(o=i[1])&&n.push(new WO(o,f,s,u,c,d,h)),(o=i[2])&&n.push(new WO(o,a,d,u,f,l,h)),(o=i[3])&&n.push(new WO(o,f,d,u,c,l,h)),(o=i[4])&&n.push(new WO(o,a,s,h,f,d,A)),(o=i[5])&&n.push(new WO(o,f,s,h,c,d,A)),(o=i[6])&&n.push(new WO(o,a,d,h,f,l,A)),(o=i[7])&&n.push(new WO(o,f,d,h,c,l,A))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.z0,e.x1,e.y1,e.z1);return this},eC.x=function(t){return arguments.length?(this._x=t,this):this._x},eC.y=function(t){return arguments.length?(this._y=t,this):this._y},eC.z=function(t){return arguments.length?(this._z=t,this):this._z};var rC=function(t,e,n,r,i,o,a){var s;if((null===(s=t.data)||void 0===s?void 0:s.id)!==o.id){for(var u=[n,r,i][a-1],c=o.x-t.x||.1,l=o.y-t.y||.1,A=o.z-t.z||.1,f=[c,l,A],d=u-e,h=0,p=0;p<a;p++)h+=f[p]*f[p];var v=Math.sqrt(h)*h;if(d*d*.81<h){var g=t.weight/v;return o.vx+=c*g,o.vy+=l*g,o.vz+=A*g,!0}if(t.length)return!1;if(t.data!==o){var y=t.data.weight/v;o.vx+=c*y,o.vy+=l*y,o.vz+=A*y}}},iC={dimensions:2,maxIteration:500,gravity:10,factor:1,edgeStrength:50,nodeStrength:1e3,coulombDisScale:.005,damping:.9,maxSpeed:200,minMovement:.4,interval:.02,linkDistance:200,clusterNodeStrength:20,preventOverlap:!0,distanceThresholdMode:"mean"},oC=function(){return B(function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};x(this,t),this.options=e,this.id="force",this.timeInterval=0,this.judgingDistance=0,this.running=!1,this.options=Object.assign(Object.assign({},iC),e)},[{key:"execute",value:function(t,e){return xe(this,void 0,void 0,(0,Dn.A)().m(function n(){return(0,Dn.A)().w(function(n){for(;;)if(0===n.n)return n.a(2,this.genericForceLayout(!1,t,e))},n,this)}))}},{key:"assign",value:function(t,e){return xe(this,void 0,void 0,(0,Dn.A)().m(function n(){return(0,Dn.A)().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,this.genericForceLayout(!0,t,e);case 1:return n.a(2)}},n,this)}))}},{key:"stop",value:function(){this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval),this.running=!1}},{key:"tick",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.maxIteration||1;if(this.lastResult)return this.lastResult;for(var n=0;(this.judgingDistance>this.lastOptions.minMovement||n<1)&&n<e;n++)this.runOneStep(this.lastCalcGraph,this.lastGraph,n,this.lastVelMap,this.lastOptions),this.updatePosition(this.lastGraph,this.lastCalcGraph,this.lastVelMap,this.lastOptions);var r={nodes:this.lastLayoutNodes,edges:this.lastLayoutEdges};return this.lastAssign&&r.nodes.forEach(function(e){return t.lastGraph.mergeNodeData(e.id,{x:e.data.x,y:e.data.y,z:3===t.options.dimensions?e.data.z:void 0})}),r}},{key:"genericForceLayout",value:function(t,e,n){return xe(this,void 0,void 0,(0,Dn.A)().m(function r(){var i,o,a,s,u,c,l,A,f,d,h,p,v,g,y,m,b,w,x,E,B=this;return(0,Dn.A)().w(function(r){for(;;)switch(r.n){case 0:if(i=Object.assign(Object.assign({},this.options),n),o=e.getAllNodes(),a=e.getAllEdges(),s=this.formatOptions(i,e),u=s.dimensions,c=s.width,l=s.height,A=s.nodeSize,f=s.getMass,d=s.nodeStrength,h=s.edgeStrength,p=s.linkDistance,v=o.map(function(t,e){return Object.assign(Object.assign({},t),{data:Object.assign(Object.assign({},t.data),{x:de(t.data.x)?t.data.x:Math.random()*c,y:de(t.data.y)?t.data.y:Math.random()*l,z:de(t.data.z)?t.data.z:Math.random()*Math.sqrt(c*l),size:A(t)||30,mass:f(t),nodeStrength:d(t)})})}),g=a.map(function(t){return Object.assign(Object.assign({},t),{data:Object.assign(Object.assign({},t.data),{edgeStrength:h(t),linkDistance:p(t,e.getNode(t.source),e.getNode(t.target))})})}),null==o?void 0:o.length){r.n=1;break}return this.lastResult={nodes:[],edges:a},r.a(2,{nodes:[],edges:a});case 1:if(y={},o.forEach(function(t,e){y[t.id]={x:0,y:0,z:0}}),m=new xB({nodes:v,edges:g}),this.formatCentripetal(s,m),b=s.maxIteration,w=s.minMovement,x=s.onTick,this.lastLayoutNodes=v,this.lastLayoutEdges=g,this.lastAssign=t,this.lastGraph=e,this.lastCalcGraph=m,this.lastOptions=s,this.lastVelMap=y,"undefined"!=typeof window){r.n=2;break}return r.a(2);case 2:return E=0,r.a(2,new Promise(function(n){B.timeInterval=window.setInterval(function(){o&&B.running||n({nodes:lC(e,v),edges:a}),B.runOneStep(m,e,E,y,s),B.updatePosition(e,m,y,s),t&&v.forEach(function(t){return e.mergeNodeData(t.id,{x:t.data.x,y:t.data.y,z:3===u?t.data.z:void 0})}),null==x||x({nodes:lC(e,v),edges:a}),(++E>=b||B.judgingDistance<w)&&(window.clearInterval(B.timeInterval),n({nodes:lC(e,v),edges:a}))},0),B.running=!0}))}},r,this)}))}},{key:"formatOptions",value:function(t,e){var n=Object.assign({},t),r=t.width,i=t.height,o=t.getMass;n.width=r||"undefined"==typeof window?r:window.innerWidth,n.height=i||"undefined"==typeof window?i:window.innerHeight,t.center||(n.center=[n.width/2,n.height/2]),o||(n.getMass=function(t){var n=1;de(null==t?void 0:t.data.mass)&&(n=null==t?void 0:t.data.mass);var r=e.getDegree(t.id,"both");return!r||r<5?n:5*r*n}),n.nodeSize=EO(t.nodeSize,t.nodeSpacing);var a=t.linkDistance?wO(1,t.linkDistance):function(t){return 1+n.nodeSize(e.getNode(t.source))+n.nodeSize(e.getNode(t.target))};return n.linkDistance=a,n.nodeStrength=wO(1,t.nodeStrength),n.edgeStrength=wO(1,t.edgeStrength),n}},{key:"formatCentripetal",value:function(t,e){var n,r,i=t.dimensions,o=t.centripetalOptions,a=t.center,s=t.clusterNodeStrength,u=t.leafCluster,c=t.clustering,l=t.nodeClusterBy,A=e.getAllNodes(),f=o||{leaf:2,single:2,others:1,center:function(t){return{x:a[0],y:a[1],z:3===i?a[2]:void 0}}};if("function"!=typeof s&&(t.clusterNodeStrength=function(t){return s}),u&&l&&(n=aC(e,l),r=Array.from(new Set(null==A?void 0:A.map(function(t){return t.data[l]})))||[],t.centripetalOptions=Object.assign(f,{single:100,leaf:function(e){var i=n[e.id]||{},o=i.siblingLeaves,a=i.sameTypeLeaves;return(null==a?void 0:a.length)===(null==o?void 0:o.length)||1===(null==r?void 0:r.length)?1:t.clusterNodeStrength(e)},others:1,center:function(t){var r,i=e.getDegree(t.id,"both");if(!i)return{x:100,y:100,z:0};if(1===i){var o=(n[t.id]||{}).sameTypeLeaves,a=void 0===o?[]:o;1===a.length?r=void 0:a.length>1&&(r=cC(a))}else r=void 0;return{x:null==r?void 0:r.x,y:null==r?void 0:r.y,z:null==r?void 0:r.z}}})),c&&l){n||(n=aC(e,l)),r||(r=Array.from(new Set(A.map(function(t){return t.data[l]})))),r=r.filter(function(t){return void 0!==t});var d={};r.forEach(function(t){var n=A.filter(function(e){return e.data[l]===t}).map(function(t){return e.getNode(t.id)});d[t]=cC(n)}),t.centripetalOptions=Object.assign(f,{single:function(e){return t.clusterNodeStrength(e)},leaf:function(e){return t.clusterNodeStrength(e)},others:function(e){return t.clusterNodeStrength(e)},center:function(t){var e=d[t.data[l]];return{x:null==e?void 0:e.x,y:null==e?void 0:e.y,z:null==e?void 0:e.z}}})}var h=t.centripetalOptions||{},p=h.leaf,v=h.single,g=h.others;p&&"function"!=typeof p&&(t.centripetalOptions.leaf=function(){return p}),v&&"function"!=typeof v&&(t.centripetalOptions.single=function(){return v}),g&&"function"!=typeof g&&(t.centripetalOptions.others=function(){return g})}},{key:"runOneStep",value:function(t,e,n,r,i){var o={},a=t.getAllNodes(),s=t.getAllEdges();if(null==a?void 0:a.length){var u=i.monitor;this.calRepulsive(t,o,i),s&&this.calAttractive(t,o,i),this.calGravity(t,e,o,i),this.updateVelocity(t,o,r,i),u&&u({energy:this.calTotalEnergy(o,a),nodes:e.getAllNodes(),edges:e.getAllEdges(),iterations:n})}}},{key:"calTotalEnergy",value:function(t,e){var n=this;if(!(null==e?void 0:e.length))return 0;var r=0;return e.forEach(function(e,i){var o=t[e.id].x,a=t[e.id].y,s=3===n.options.dimensions?t[e.id].z:0,u=o*o+a*a+s*s,c=e.data.mass;r+=(void 0===c?1:c)*u*.5}),r}},{key:"calRepulsive",value:function(t,e,n){var r=n.dimensions,i=n.factor,o=n.coulombDisScale;!function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,o=e/n,a=t.getAllNodes(),s=a.map(function(t,e){var n=t.data,r=n.nodeStrength;return{x:n.x,y:n.y,z:n.z,size:n.size,index:e,id:t.id,vx:0,vy:0,vz:0,weight:o*r}}),u=(2===i?HO(s,function(t){return t.x},function(t){return t.y}):JO(s,function(t){return t.x},function(t){return t.y},function(t){return t.z})).visitAfter(nC),c=new Map;s.forEach(function(t){c.set(t.id,t),function(t,e,n){e.visit(function(e,r,i,o,a){return rC(e,r,i,o,a,t,n)})}(t,u,i)}),s.map(function(t,e){var n=a[e],i=n.id,o=n.data.mass,s=void 0===o?1:o;r[i]={x:t.vx/s,y:t.vy/s,z:t.vz/s}})}(t,i,o*o,e,r)}},{key:"calAttractive",value:function(t,e,n){var r=n.dimensions,i=n.nodeSize;t.getAllEdges().forEach(function(n,o){var a=n.source,s=n.target,u=t.getNode(a),c=t.getNode(s);if(u&&c){var l=c.data.x-u.data.x,A=c.data.y-u.data.y,f=3===r?c.data.z-u.data.z:0;l||A||(l=.01*Math.random(),A=.01*Math.random(),3!==r||f||(f=.01*Math.random()));var d=Math.sqrt(l*l+A*A+f*f);if(!(d<i(u)+i(c))){var h=l/d,p=A/d,v=f/d,g=n.data||{},y=g.linkDistance,m=void 0===y?200:y,b=g.edgeStrength,w=(m-d)*(void 0===b?200:b),x=1/(u.data.mass||1),E=1/(c.data.mass||1),B=h*w,k=p*w,O=v*w;e[a].x-=B*x,e[a].y-=k*x,e[a].z-=O*x,e[s].x+=B*E,e[s].y+=k*E,e[s].z+=O*E}}})}},{key:"calGravity",value:function(t,e,n,r){var i=r.getCenter,o=t.getAllNodes(),a=e.getAllNodes(),s=e.getAllEdges(),u=r.width,c=r.height,l=r.center,A=r.gravity,f=r.centripetalOptions;o&&o.forEach(function(r){var o=r.id,d=r.data,h=d.mass,p=d.x,g=d.y,y=d.z,m=e.getNode(o),b=0,w=0,x=0,E=A,B=t.getDegree(o,"in"),k=t.getDegree(o,"out"),O=t.getDegree(o,"both"),C=null==i?void 0:i(m,O);if(C){var M=v(C,3);b=p-M[0],w=g-M[1],E=M[2]}else b=p-l[0],w=g-l[1],x=y-l[2];if(E&&(n[o].x-=E*b/h,n[o].y-=E*w/h,n[o].z-=E*x/h),f){var S=f.leaf,F=f.single,T=f.others,P=f.center,I=(null==P?void 0:P(m,a,s,u,c))||{x:0,y:0,z:0,centerStrength:0},N=I.x,L=I.y,_=I.z,Q=I.centerStrength;if(!de(N)||!de(L))return;var U=(p-N)/h,j=(g-L)/h,D=(y-_)/h;if(Q&&(n[o].x-=Q*U,n[o].y-=Q*j,n[o].z-=Q*D),0===O){var R=F(m);if(!R)return;return n[o].x-=R*U,n[o].y-=R*j,void(n[o].z-=R*D)}if(0===B||0===k){var H=S(m,a,s);if(!H)return;return n[o].x-=H*U,n[o].y-=H*j,void(n[o].z-=H*D)}var z=T(m);if(!z)return;n[o].x-=z*U,n[o].y-=z*j,n[o].z-=z*D}})}},{key:"updateVelocity",value:function(t,e,n,r){var i=r.damping,o=r.maxSpeed,a=r.interval,s=r.dimensions,u=t.getAllNodes();(null==u?void 0:u.length)&&u.forEach(function(t){var r=t.id,u=(n[r].x+e[r].x*a)*i||.01,c=(n[r].y+e[r].y*a)*i||.01,l=3===s?(n[r].z+e[r].z*a)*i||.01:0,A=Math.sqrt(u*u+c*c+l*l);if(A>o){var f=o/A;u*=f,c*=f,l*=f}n[r]={x:u,y:c,z:l}})}},{key:"updatePosition",value:function(t,e,n,r){var i=this,o=r.distanceThresholdMode,a=r.interval,s=r.dimensions,u=e.getAllNodes();if(null==u?void 0:u.length){var c=0;"max"===o?this.judgingDistance=-1/0:"min"===o&&(this.judgingDistance=1/0),u.forEach(function(r){var u=r.id,l=t.getNode(u);if(de(l.data.fx)&&de(l.data.fy))e.mergeNodeData(u,{x:l.data.fx,y:l.data.fy,z:3===s?l.data.fz:void 0});else{var A=n[u].x*a,f=n[u].y*a,d=3===s?n[u].z*a:0;e.mergeNodeData(u,{x:r.data.x+A,y:r.data.y+f,z:r.data.z+d});var h=Math.sqrt(A*A+f*f+d*d);switch(o){case"max":i.judgingDistance<h&&(i.judgingDistance=h);break;case"min":i.judgingDistance>h&&(i.judgingDistance=h);break;default:c+=h}}}),o&&"mean"!==o||(this.judgingDistance=c/u.length)}else this.judgingDistance=0}}])}(),aC=function(t,e){var n=t.getAllNodes();if(!(null==n?void 0:n.length))return{};var r={};return n.forEach(function(n,i){1===t.getDegree(n.id,"both")&&(r[n.id]=sC(t,"leaf",n,e))}),r},sC=function(t,e,n,r){var i=t.getDegree(n.id,"in"),o=t.getDegree(n.id,"out"),a=n,s=[];return 0===i?(a=t.getSuccessors(n.id)[0],s=t.getNeighbors(a.id)):0===o&&(a=t.getPredecessors(n.id)[0],s=t.getNeighbors(a.id)),s=s.filter(function(e){return 0===t.getDegree(e.id,"in")||0===t.getDegree(e.id,"out")}),{coreNode:a,siblingLeaves:s,sameTypeLeaves:uC(t,e,r,n,s)}},uC=function(t,e,n,r,i){var o=r.data[n]||"",a=(null==i?void 0:i.filter(function(t){return t.data[n]===o}))||[];return"leaf"===e&&(a=a.filter(function(e){return 0===t.getDegree(e.id,"in")||0===t.getDegree(e.id,"out")})),a},cC=function(t){var e={x:0,y:0};t.forEach(function(t){var n=t.data,r=n.x,i=n.y;e.x+=r||0,e.y+=i||0});var n=t.length||1;return{x:e.x/n,y:e.y/n}},lC=function(t,e){return e.map(function(e){var n=e.id,r=e.data,i=t.getNode(n);return Object.assign(Object.assign({},i),{data:Object.assign(Object.assign({},i.data),{x:r.x,y:r.y,z:r.z})})})},AC=c(7063),fC=(AC.y3,AC.jy,AC.oN,AC.Hc,AC.cg,AC.hj,AC.LU,AC.Tb,AC.uq),dC=(AC.Zm,AC.Dq,AC.__,AC.q0,AC.lh,AC.pI,AC.zC,AC.zg,AC.g6,AC.OL,AC.ks,AC.QR,AC.jp,AC.mk,AC.W2);AC.l,AC.KY,AC.dv,AC.BR,AC.Wu,AC.uq,AC.uq,AC.a4,AC.DI,AC.Jo,AC.Zi,AC.kH,AC.LV;var hC=function(t){for(var e=[],n=t.length,r=0;r<n;r+=1){e[r]=[];for(var i=0;i<n;i+=1)r===i?e[r][i]=0:0!==t[r][i]&&t[r][i]?e[r][i]=t[r][i]:e[r][i]=1/0}for(var o=0;o<n;o+=1)for(var a=0;a<n;a+=1)for(var s=0;s<n;s+=1)e[a][s]>e[a][o]+e[o][s]&&(e[a][s]=e[a][o]+e[o][s]);return e},pC=function(t,e){var n=t.nodes,r=t.edges,i=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach(function(t,e){o[t.id]=e,i.push([])}),null==r||r.forEach(function(t){var n=t.source,r=t.target,a=o[n],s=o[r];void 0!==a&&void 0!==s&&(i[a][s]=1,e||(i[s][a]=1))}),i},vC=function(t,e){var n=[];return t.forEach(function(t){var r=[];t.forEach(function(t){r.push(t*e)}),n.push(r)}),n},gC=function(t){var e=1/0,n=1/0,r=-1/0,i=-1/0;return t.forEach(function(t){var o=t.data.size;LO(o)?1===o.length&&(o=[o[0],o[0]]):de(o)?o=[o,o]:(void 0===o||isNaN(o))&&(o=[30,30]);var a=[o[0]/2,o[1]/2],s=t.data.x-a[0],u=t.data.x+a[0],c=t.data.y-a[1],l=t.data.y+a[1];e>s&&(e=s),n>c&&(n=c),r<u&&(r=u),i<l&&(i=l)}),{minX:e,minY:n,maxX:r,maxY:i}},yC=function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},mC=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"TB",i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};if(null==e?void 0:e.length)for(var a=o.stopBranchFn,s=o.stopAllFn,u=0;u<e.length;u++){var c=e[u];if(t.hasNode(c.id)&&!(null==a?void 0:a(c))){if(null==s?void 0:s(c))return;"TB"===r&&n(c),mC(t,t.getChildren(c.id,i),n,r,i,o),"TB"!==r&&n(c)}}},bC={center:[0,0],linkDistance:50},wC=function(){return B(function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};x(this,t),this.options=e,this.id="mds",this.options=Object.assign(Object.assign({},bC),e)},[{key:"execute",value:function(t,e){return xe(this,void 0,void 0,(0,Dn.A)().m(function n(){return(0,Dn.A)().w(function(n){for(;;)if(0===n.n)return n.a(2,this.genericMDSLayout(!1,t,e))},n,this)}))}},{key:"assign",value:function(t,e){return xe(this,void 0,void 0,(0,Dn.A)().m(function n(){return(0,Dn.A)().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,this.genericMDSLayout(!0,t,e);case 1:return n.a(2)}},n,this)}))}},{key:"genericMDSLayout",value:function(t,e,n){return xe(this,void 0,void 0,(0,Dn.A)().m(function r(){var i,o,a,s,u,c,l,A,f,d,h,p,v;return(0,Dn.A)().w(function(r){for(;;)switch(r.n){case 0:if(i=Object.assign(Object.assign({},this.options),n),o=i.center,a=void 0===o?[0,0]:o,s=i.linkDistance,u=void 0===s?50:s,c=e.getAllNodes(),l=e.getAllEdges(),(null==c?void 0:c.length)&&1!==c.length){r.n=1;break}return r.a(2,SO(e,t,a));case 1:return A=pC({nodes:c,edges:l},!1),f=hC(A),xC(f),d=vC(f,u),h=EC(d),p=[],h.forEach(function(t,e){var n=kO(c[e]);n.data.x=t[0]+a[0],n.data.y=t[1]+a[1],p.push(n)}),t&&p.forEach(function(t){return e.mergeNodeData(t.id,{x:t.data.x,y:t.data.y})}),v={nodes:p,edges:l},r.a(2,v)}},r,this)}))}}])}(),xC=function(t){var e=-999999;t.forEach(function(t){t.forEach(function(t){t!==1/0&&e<t&&(e=t)})}),t.forEach(function(n,r){n.forEach(function(n,i){n===1/0&&(t[r][i]=e)})})},EC=function(t){var e=fC.mul(fC.pow(t,2),-.5),n=e.mean("row"),r=e.mean("column"),i=e.mean();e.add(i).subRowVector(n).subColumnVector(r);var o=new dC(e),a=fC.sqrt(o.diagonalMatrix).diagonal();return o.leftSingularVectors.toJSON().map(function(t){return fC.mul([t],[a]).toJSON()[0].splice(0,2)})};function BC(t){return!!t.tick&&!!t.stop}var kC={gForce:!0,force2:!0,d3force:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0},OC={center:[0,0],comboPadding:10,treeKey:"combo"},CC=function(){return B(function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};x(this,t),this.options=e,this.id="comboCombined",this.options=Object.assign(Object.assign({},OC),e)},[{key:"execute",value:function(t,e){return xe(this,void 0,void 0,(0,Dn.A)().m(function n(){return(0,Dn.A)().w(function(n){for(;;)if(0===n.n)return n.a(2,this.genericComboCombinedLayout(!1,t,e))},n,this)}))}},{key:"assign",value:function(t,e){return xe(this,void 0,void 0,(0,Dn.A)().m(function n(){return(0,Dn.A)().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,this.genericComboCombinedLayout(!0,t,e);case 1:return n.a(2)}},n,this)}))}},{key:"genericComboCombinedLayout",value:function(t,e,n){return xe(this,void 0,void 0,(0,Dn.A)().m(function r(){var i,o,a,s,u,c,l,A,f,d,h,p,v,g,y,m,b,w,x,E,B,k,C,M;return(0,Dn.A)().w(function(r){for(;;)switch(r.n){case 0:if(i=this.initVals(Object.assign(Object.assign({},this.options),n)),o=i.center,a=i.treeKey,s=i.outerLayout,u=e.getAllNodes().filter(function(t){return!t.data._isCombo}),c=e.getAllNodes().filter(function(t){return t.data._isCombo}),l=e.getAllEdges(),(A=null==u?void 0:u.length)&&1!==A){r.n=1;break}return r.a(2,SO(e,t,o));case 1:return f=[],d=new Map,u.forEach(function(t){d.set(t.id,t)}),h=new Map,c.forEach(function(t){h.set(t.id,t)}),p=new Map,v=this.getInnerGraphs(e,a,d,h,l,i,p),r.n=2,Promise.all(v);case 2:if(g=new Map,y=[],m=new Map,b=!0,e.getRoots(a).forEach(function(t){var n=p.get(t.id),r=h.get(t.id)||d.get(t.id),i={id:t.id,data:Object.assign(Object.assign({},t.data),{x:n.data.x||r.data.x,y:n.data.y||r.data.y,fx:n.data.fx||r.data.fx,fy:n.data.fy||r.data.fy,mass:n.data.mass||r.data.mass,size:n.data.size})};y.push(i),g.set(t.id,!0),isNaN(i.data.x)||0===i.data.x||isNaN(i.data.y)||0===i.data.y?(i.data.x=100*Math.random(),i.data.y=100*Math.random()):b=!1,mC(e,[t],function(e){e.id!==t.id&&m.set(e.id,t.id)},"TB",a)}),w=[],l.forEach(function(t){var e=m.get(t.source)||t.source,n=m.get(t.target)||t.target;e!==n&&g.has(e)&&g.has(n)&&w.push({id:t.id,source:e,target:n,data:{}})}),!(null==y?void 0:y.length)){r.n=7;break}if(1!==y.length){r.n=3;break}y[0].data.x=o[0],y[0].data.y=o[1],r.n=6;break;case 3:if(E=new xB({nodes:y,edges:w}),B=s||new oC,!b||!kC[B.id]){r.n=4;break}return k=y.length<100?new wC:new QO,r.n=4,k.assign(E);case 4:return C=Object.assign({center:o,kg:5,preventOverlap:!0,animate:!1},"force"===B.id?{gravity:1,factor:4,linkDistance:function(t,e,n){return(Math.max.apply(Math,O(e.data.size))||32)/2+(Math.max.apply(Math,O(n.data.size))||32)/2+200}}:{}),r.n=5,MC(B,E,C);case 5:x=r.v;case 6:p.forEach(function(t){var e,n=x.nodes.find(function(e){return e.id===t.id});if(n){var r=n.data,i=r.x,o=r.y;t.data.visited=!0,t.data.x=i,t.data.y=o,f.push({id:t.id,data:{x:i,y:o}})}var a=t.data,s=a.x,u=a.y;null===(e=t.data.nodes)||void 0===e||e.forEach(function(t){f.push({id:t.id,data:{x:t.data.x+s,y:t.data.y+u}})})}),p.forEach(function(t){var e=t.data,n=e.x,r=e.y,i=e.visited,o=e.nodes;null==o||o.forEach(function(t){if(!i){var e=f.find(function(e){return e.id===t.id});e.data.x+=n||0,e.data.y+=r||0}})});case 7:return t&&f.forEach(function(t){e.mergeNodeData(t.id,{x:t.data.x,y:t.data.y})}),M={nodes:f,edges:l},r.a(2,M)}},r,this)}))}},{key:"initVals",value:function(t){var e,n,r,i=Object.assign({},t),o=t.nodeSize,a=t.spacing,s=t.comboPadding;if(n=de(a)?function(){return a}:mn(a)?a:function(){return 0},i.spacing=n,o)if(mn(o))e=function(t){var e=o(t),r=n(t);return LO(t.size)?((t.size[0]>t.size[1]?t.size[0]:t.size[1])+r)/2:((e||32)+r)/2};else if(LO(o)){var u=(o[0]>o[1]?o[0]:o[1])/2;e=function(t){return u+n(t)/2}}else{var c=o/2;e=function(t){return c+n(t)/2}}else e=function(t){var e=n(t);return t.size?LO(t.size)?((t.size[0]>t.size[1]?t.size[0]:t.size[1])+e)/2:bn(t.size)?((t.size.width>t.size.height?t.size.width:t.size.height)+e)/2:(t.size+e)/2:32+e/2};return i.nodeSize=e,r=de(s)?function(){return s}:LO(s)?function(){return Math.max.apply(null,s)}:mn(s)?s:function(){return 0},i.comboPadding=r,i}},{key:"getInnerGraphs",value:function(t,e,n,r,i,o,a){var s=this,u=o.nodeSize,c=o.comboPadding,l=o.spacing,A=o.innerLayout||new QO({}),f={center:[0,0],preventOverlap:!0,nodeSpacing:l},d=[],h=function(t){var e=(null==c?void 0:c(t))||10;return LO(e)&&(e=Math.max.apply(Math,O(e))),{size:e?[2*e,2*e]:[30,30],padding:e}};return t.getRoots(e).forEach(function(o){a.set(o.id,{id:o.id,data:{nodes:[],size:h(o).size}});var c=Promise.resolve();mC(t,[o],function(o){var l;if(o.data._isCombo){var d=h(o),p=d.size,g=d.padding;if(null===(l=t.getChildren(o.id,e))||void 0===l?void 0:l.length){var y=a.get(o.id);a.set(o.id,{id:o.id,data:Object.assign({nodes:[]},null==y?void 0:y.data)});var m=new Map,b=t.getChildren(o.id,e).map(function(t){if(t.data._isCombo)return a.has(t.id)||a.set(t.id,{id:t.id,data:Object.assign({},t.data)}),m.set(t.id,!0),a.get(t.id);var e=n.get(t.id)||r.get(t.id);return m.set(t.id,!0),{id:t.id,data:Object.assign(Object.assign({},e.data),t.data)}}),w={nodes:b,edges:i.filter(function(t){return m.has(t.source)&&m.has(t.target)})},x=1/0;b.forEach(function(t){var e,n=t.data.size;n||(n=(null===(e=a.get(t.id))||void 0===e?void 0:e.data.size)||(null==u?void 0:u(t))||[30,30]),de(n)&&(n=[n,n]);var r=v(n,2),i=r[0],o=r[1];x>i&&(x=i),x>o&&(x=o),t.data.size=n}),c=c.then(function(){return xe(s,void 0,void 0,(0,Dn.A)().m(function t(){var e,n,r,i,s,u,c,l;return(0,Dn.A)().w(function(t){for(;;)switch(t.n){case 0:return e=new xB(w),t.n=1,MC(A,e,f,!0);case 1:n=gC(b),r=n.minX,i=n.minY,s=n.maxX,u=n.maxY,c={x:(s+r)/2,y:(u+i)/2},w.nodes.forEach(function(t){t.data.x-=c.x,t.data.y-=c.y}),l=[Math.max(s-r,x)+2*g,Math.max(u-i,x)+2*g],a.get(o.id).data.size=l,a.get(o.id).data.nodes=b;case 2:return t.a(2)}},t)}))})}else a.set(o.id,{id:o.id,data:Object.assign(Object.assign({},o.data),{size:p})});return!0}},"BT",e),d.push(c)}),d}}])}();function MC(t,e,n,r){var i;return xe(this,void 0,void 0,(0,Dn.A)().m(function o(){return(0,Dn.A)().w(function(o){for(;;)switch(o.n){case 0:if(!BC(t)){o.n=1;break}return t.execute(e,n),t.stop(),o.a(2,t.tick(null!==(i=n.iterations)&&void 0!==i?i:300));case 1:if(!r){o.n=3;break}return o.n=2,t.assign(e,n);case 2:case 4:return o.a(2,o.v);case 3:return o.n=4,t.execute(e,n)}},o)}))}function SC(t){return function(){return t}}function FC(t){return 1e-6*(t()-.5)}function TC(t){return t.index}function PC(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function IC(t){var e,n,r,i,o,a,s=TC,u=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},c=SC(30),l=1;function A(r){for(var i=0,s=t.length;i<l;++i)for(var u,c,A,f,d,h,p,v=0;v<s;++v)c=(u=t[v]).source,f=(A=u.target).x+A.vx-c.x-c.vx||FC(a),d=A.y+A.vy-c.y-c.vy||FC(a),f*=h=((h=Math.sqrt(f*f+d*d))-n[v])/h*r*e[v],d*=h,A.vx-=f*(p=o[v]),A.vy-=d*p,c.vx+=f*(p=1-p),c.vy+=d*p}function f(){if(r){var a,u,c=r.length,l=t.length,A=new Map(r.map(function(t,e){return[s(t,e,r),t]}));for(a=0,i=new Array(c);a<l;++a)(u=t[a]).index=a,"object"!=typeof u.source&&(u.source=PC(A,u.source)),"object"!=typeof u.target&&(u.target=PC(A,u.target)),i[u.source.index]=(i[u.source.index]||0)+1,i[u.target.index]=(i[u.target.index]||0)+1;for(a=0,o=new Array(l);a<l;++a)u=t[a],o[a]=i[u.source.index]/(i[u.source.index]+i[u.target.index]);e=new Array(l),d(),n=new Array(l),h()}}function d(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+u(t[n],n,t)}function h(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+c(t[e],e,t)}return null==t&&(t=[]),A.initialize=function(t,e){r=t,a=e,f()},A.links=function(e){return arguments.length?(t=e,f(),A):t},A.id=function(t){return arguments.length?(s=t,A):s},A.iterations=function(t){return arguments.length?(l=+t,A):l},A.strength=function(t){return arguments.length?(u="function"==typeof t?t:SC(+t),d(),A):u},A.distance=function(t){return arguments.length?(c="function"==typeof t?t:SC(+t),h(),A):c},A}var NC={value:function(){}};function LC(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new _C(r)}function _C(t){this._=t}function QC(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function UC(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=NC,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}_C.prototype=LC.prototype={constructor:_C,on:function(t,e){var n,r,i=this._,o=(r=i,(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})),a=-1,s=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<s;)if(n=(t=o[a]).type)i[n]=UC(i[n],t.name,e);else if(null==e)for(n in i)i[n]=UC(i[n],t.name,null);return this}for(;++a<s;)if((n=(t=o[a]).type)&&(n=QC(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new _C(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};const jC=LC;var DC,RC,HC=0,zC=0,KC=0,GC=0,VC=0,WC=0,YC="object"==typeof performance&&performance.now?performance:Date,XC="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function qC(){return VC||(XC(ZC),VC=YC.now()+WC)}function ZC(){VC=0}function JC(){this._call=this._time=this._next=null}function $C(t,e,n){var r=new JC;return r.restart(t,e,n),r}function tM(){VC=(GC=YC.now())+WC,HC=zC=0;try{!function(){qC(),++HC;for(var t,e=DC;e;)(t=VC-e._time)>=0&&e._call.call(void 0,t),e=e._next;--HC}()}finally{HC=0,function(){for(var t,e,n=DC,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:DC=e);RC=t,nM(r)}(),VC=0}}function eM(){var t=YC.now(),e=t-GC;e>1e3&&(WC-=e,GC=t)}function nM(t){HC||(zC&&(zC=clearTimeout(zC)),t-VC>24?(t<1/0&&(zC=setTimeout(tM,t-YC.now()-WC)),KC&&(KC=clearInterval(KC))):(KC||(GC=YC.now(),KC=setInterval(eM,1e3)),HC=1,XC(tM)))}JC.prototype=$C.prototype={constructor:JC,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?qC():+n)+(null==e?0:+e),this._next||RC===this||(RC?RC._next=this:DC=this,RC=this),this._call=t,this._time=n,nM()},stop:function(){this._call&&(this._call=null,this._time=1/0,nM())}};var rM=4294967296;function iM(t){return t.x}function oM(t){return t.y}var aM=Math.PI*(3-Math.sqrt(5));function sM(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,u=$C(A),c=jC("tick","end"),l=function(){var t=1;return function(){return(t=(1664525*t+1013904223)%rM)/rM}}();function A(){f(),c.call("tick",e),n<r&&(u.stop(),c.call("end",e))}function f(r){var u,c,l=t.length;void 0===r&&(r=1);for(var A=0;A<r;++A)for(n+=(o-n)*i,s.forEach(function(t){t(n)}),u=0;u<l;++u)null==(c=t[u]).fx?c.x+=c.vx*=a:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=a:(c.y=c.fy,c.vy=0);return e}function d(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=10*Math.sqrt(.5+n),o=n*aM;e.x=i*Math.cos(o),e.y=i*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function h(e){return e.initialize&&e.initialize(t,l),e}return null==t&&(t=[]),d(),e={tick:f,restart:function(){return u.restart(A),e},stop:function(){return u.stop(),e},nodes:function(n){return arguments.length?(t=n,d(),s.forEach(h),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(o=+t,e):o},velocityDecay:function(t){return arguments.length?(a=1-t,e):1-a},randomSource:function(t){return arguments.length?(l=t,s.forEach(h),e):l},force:function(t,n){return arguments.length>1?(null==n?s.delete(t):s.set(t,h(n)),e):s.get(t)},find:function(e,n,r){var i,o,a,s,u,c=0,l=t.length;for(null==r?r=1/0:r*=r,c=0;c<l;++c)(a=(i=e-(s=t[c]).x)*i+(o=n-s.y)*o)<r&&(u=s,r=a);return u},on:function(t,n){return arguments.length>1?(c.on(t,n),e):c.on(t)}}}function uM(){var t,e,n,r,i,o=SC(-30),a=1,s=1/0,u=.81;function c(n){var i,o=t.length,a=HO(t,iM,oM).visitAfter(A);for(r=n,i=0;i<o;++i)e=t[i],a.visit(f)}function l(){if(t){var e,n,r=t.length;for(i=new Array(r),e=0;e<r;++e)n=t[e],i[n.index]=+o(n,e,t)}}function A(t){var e,n,r,o,a,s=0,u=0;if(t.length){for(r=o=a=0;a<4;++a)(e=t[a])&&(n=Math.abs(e.value))&&(s+=e.value,u+=n,r+=n*e.x,o+=n*e.y);t.x=r/u,t.y=o/u}else{(e=t).x=e.data.x,e.y=e.data.y;do{s+=i[e.data.index]}while(e=e.next)}t.value=s}function f(t,o,c,l){if(!t.value)return!0;var A=t.x-e.x,f=t.y-e.y,d=l-o,h=A*A+f*f;if(d*d/u<h)return h<s&&(0===A&&(h+=(A=FC(n))*A),0===f&&(h+=(f=FC(n))*f),h<a&&(h=Math.sqrt(a*h)),e.vx+=A*t.value*r/h,e.vy+=f*t.value*r/h),!0;if(!(t.length||h>=s)){(t.data!==e||t.next)&&(0===A&&(h+=(A=FC(n))*A),0===f&&(h+=(f=FC(n))*f),h<a&&(h=Math.sqrt(a*h)));do{t.data!==e&&(d=i[t.data.index]*r/h,e.vx+=A*d,e.vy+=f*d)}while(t=t.next)}}return c.initialize=function(e,r){t=e,n=r,l()},c.strength=function(t){return arguments.length?(o="function"==typeof t?t:SC(+t),l(),c):o},c.distanceMin=function(t){return arguments.length?(a=t*t,c):Math.sqrt(a)},c.distanceMax=function(t){return arguments.length?(s=t*t,c):Math.sqrt(s)},c.theta=function(t){return arguments.length?(u=t*t,c):Math.sqrt(u)},c}function cM(t,e){var n,r=1;function i(){var i,o,a=n.length,s=0,u=0;for(i=0;i<a;++i)s+=(o=n[i]).x,u+=o.y;for(s=(s/a-t)*r,u=(u/a-e)*r,i=0;i<a;++i)(o=n[i]).x-=s,o.y-=u}return null==t&&(t=0),null==e&&(e=0),i.initialize=function(t){n=t},i.x=function(e){return arguments.length?(t=+e,i):t},i.y=function(t){return arguments.length?(e=+t,i):e},i.strength=function(t){return arguments.length?(r=+t,i):r},i}function lM(t){return t.x+t.vx}function AM(t){return t.y+t.vy}function fM(t){var e,n,r,i=1,o=1;function a(){for(var t,a,u,c,l,A,f,d=e.length,h=0;h<o;++h)for(a=HO(e,lM,AM).visitAfter(s),t=0;t<d;++t)u=e[t],A=n[u.index],f=A*A,c=u.x+u.vx,l=u.y+u.vy,a.visit(p);function p(t,e,n,o,a){var s=t.data,d=t.r,h=A+d;if(!s)return e>c+h||o<c-h||n>l+h||a<l-h;if(s.index>u.index){var p=c-s.x-s.vx,v=l-s.y-s.vy,g=p*p+v*v;g<h*h&&(0===p&&(g+=(p=FC(r))*p),0===v&&(g+=(v=FC(r))*v),g=(h-(g=Math.sqrt(g)))/g*i,u.vx+=(p*=g)*(h=(d*=d)/(f+d)),u.vy+=(v*=g)*h,s.vx-=p*(h=1-h),s.vy-=v*h)}}}function s(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function u(){if(e){var r,i,o=e.length;for(n=new Array(o),r=0;r<o;++r)i=e[r],n[i.index]=+t(i,r,e)}}return"function"!=typeof t&&(t=SC(null==t?1:+t)),a.initialize=function(t,n){e=t,r=n,u()},a.iterations=function(t){return arguments.length?(o=+t,a):o},a.strength=function(t){return arguments.length?(i=+t,a):i},a.radius=function(e){return arguments.length?(t="function"==typeof e?e:SC(+e),u(),a):t},a}function dM(t,e,n){var r,i,o,a=SC(.1);function s(t){for(var a=0,s=r.length;a<s;++a){var u=r[a],c=u.x-e||1e-6,l=u.y-n||1e-6,A=Math.sqrt(c*c+l*l),f=(o[a]-A)*i[a]*t/A;u.vx+=c*f,u.vy+=l*f}}function u(){if(r){var e,n=r.length;for(i=new Array(n),o=new Array(n),e=0;e<n;++e)o[e]=+t(r[e],e,r),i[e]=isNaN(o[e])?0:+a(r[e],e,r)}}return"function"!=typeof t&&(t=SC(+t)),null==e&&(e=0),null==n&&(n=0),s.initialize=function(t){r=t,u()},s.strength=function(t){return arguments.length?(a="function"==typeof t?t:SC(+t),u(),s):a},s.radius=function(e){return arguments.length?(t="function"==typeof e?e:SC(+e),u(),s):t},s.x=function(t){return arguments.length?(e=+t,s):e},s.y=function(t){return arguments.length?(n=+t,s):n},s}function hM(t){var e,n,r,i=SC(.1);function o(t){for(var i,o=0,a=e.length;o<a;++o)(i=e[o]).vx+=(r[o]-i.x)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!=typeof t&&(t=SC(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:SC(+t),a(),o):i},o.x=function(e){return arguments.length?(t="function"==typeof e?e:SC(+e),a(),o):t},o}function pM(t){var e,n,r,i=SC(.1);function o(t){for(var i,o=0,a=e.length;o<a;++o)(i=e[o]).vy+=(r[o]-i.y)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!=typeof t&&(t=SC(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:SC(+t),a(),o):i},o.y=function(e){return arguments.length?(t="function"==typeof e?e:SC(+e),a(),o):t},o}var vM=function(){return B(function t(e){x(this,t),this.id="d3-force",this.config={inputNodeAttrs:["x","y","vx","vy","fx","fy"],outputNodeAttrs:["x","y","vx","vy"],simulationAttrs:["alpha","alphaMin","alphaDecay","alphaTarget","velocityDecay","randomSource"]},this.forceMap={link:IC,manyBody:uM,center:cM,collide:fM,radial:dM,x:hM,y:pM},this.options={link:{id:function(t){return t.id}},manyBody:{},center:{x:0,y:0}},this.context={options:{},assign:!1,nodes:[],edges:[]},Xm(this.options,e),this.options.forceSimulation&&(this.simulation=this.options.forceSimulation)},[{key:"execute",value:function(t,e){return xe(this,void 0,void 0,(0,Dn.A)().m(function n(){return(0,Dn.A)().w(function(n){for(;;)if(0===n.n)return n.a(2,this.genericLayout(!1,t,e))},n,this)}))}},{key:"assign",value:function(t,e){return xe(this,void 0,void 0,(0,Dn.A)().m(function n(){return(0,Dn.A)().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,this.genericLayout(!0,t,e);case 1:return n.a(2)}},n,this)}))}},{key:"stop",value:function(){this.simulation.stop()}},{key:"tick",value:function(t){return this.simulation.tick(t),this.getResult()}},{key:"restart",value:function(){this.simulation.restart()}},{key:"setFixedPosition",value:function(t,e){var n=this.context.nodes.find(function(e){return e.id===t});n&&e.forEach(function(t,e){"number"!=typeof t&&null!==t||(n[["fx","fy","fz"][e]]=t)})}},{key:"getOptions",value:function(t){var e,n,r=Xm({},this.options,t);return r.collide&&void 0===(null===(e=r.collide)||void 0===e?void 0:e.radius)&&(r.collide=r.collide||{},r.collide.radius=null!==(n=r.nodeSize)&&void 0!==n?n:10),void 0===r.iterations&&(r.link&&void 0===r.link.iterations&&(r.iterations=r.link.iterations),r.collide&&void 0===r.collide.iterations&&(r.iterations=r.collide.iterations)),this.context.options=r,r}},{key:"genericLayout",value:function(t,e,n){var r;return xe(this,void 0,void 0,(0,Dn.A)().m(function i(){var o,a,s,u,c,l=this;return(0,Dn.A)().w(function(i){for(;;)if(0===i.n)return o=this.getOptions(n),a=e.getAllNodes().map(function(t){var e=t.id,n=t.data;return Object.assign(Object.assign({id:e},n),Ux(n.data,l.config.inputNodeAttrs))}),s=e.getAllEdges().map(function(t){return Object.assign({},t)}),Object.assign(this.context,{assign:t,nodes:a,edges:s,graph:e}),u=new Promise(function(t){l.resolver=t}),(c=this.setSimulation(o)).nodes(a),null===(r=c.force("link"))||void 0===r||r.links(s),i.a(2,u)},i,this)}))}},{key:"getResult",value:function(){var t=this,e=this.context,n=e.assign,r=e.nodes,i=e.edges,o=e.graph,a=r.map(function(e){return{id:e.id,data:Object.assign(Object.assign({},e.data),Ux(e,t.config.outputNodeAttrs))}}),s=i.map(function(t){var e=t.id,n=t.source,r=t.target,i=t.data;return{id:e,source:"object"==typeof n?n.id:n,target:"object"==typeof r?r.id:r,data:i}});return n&&a.forEach(function(t){return o.mergeNodeData(t.id,t.data)}),{nodes:a,edges:s}}},{key:"initSimulation",value:function(){return sM()}},{key:"setSimulation",value:function(t){var e=this,n=this.simulation||this.options.forceSimulation||this.initSimulation();return this.simulation||(this.simulation=n.on("tick",function(){var n;return null===(n=t.onTick)||void 0===n?void 0:n.call(t,e.getResult())}).on("end",function(){var t;return null===(t=e.resolver)||void 0===t?void 0:t.call(e,e.getResult())})),gM(n,this.config.simulationAttrs.map(function(e){return[e,t[e]]})),Object.entries(this.forceMap).forEach(function(e){var r=v(e,2),i=r[0],o=r[1],a=i;if(t[i]){var s=n.force(a);s||(s=o(),n.force(a,s)),gM(s,Object.entries(t[a]))}else n.force(a,null)}),n}}])}(),gM=function(t,e){return e.reduce(function(e,n){var r=v(n,2),i=r[0],o=r[1];return e[i]&&void 0!==o?e[i].call(t,o):e},t)},yM=c(9269),mM=c.n(yM),bM=function(){return B(function t(e){x(this,t),this.id="dagre",this.options={},Object.assign(this.options,t.defaultOptions,e)},[{key:"execute",value:function(t,e){return xe(this,void 0,void 0,(0,Dn.A)().m(function n(){return(0,Dn.A)().w(function(n){for(;;)if(0===n.n)return n.a(2,this.genericDagreLayout(!1,t,Object.assign(Object.assign({},this.options),e)))},n,this)}))}},{key:"assign",value:function(t,e){return xe(this,void 0,void 0,(0,Dn.A)().m(function n(){return(0,Dn.A)().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,this.genericDagreLayout(!0,t,Object.assign(Object.assign({},this.options),e));case 1:return n.a(2)}},n,this)}))}},{key:"genericDagreLayout",value:function(t,e,n){return xe(this,void 0,void 0,(0,Dn.A)().m(function r(){var i,o,a,s,u;return(0,Dn.A)().w(function(r){for(;;)if(0===r.n)return i=n.nodeSize,(o=new yM.graphlib.Graph).setGraph(n),o.setDefaultEdgeLabel(function(){return{}}),a=e.getAllNodes(),s=e.getAllEdges(),[].concat(O(a),O(s)).some(function(t){return de(t.id)})&&console.error("Dagre layout only support string id, it will convert number to string."),e.getAllNodes().forEach(function(t){var e=t.id,n=Object.assign({},t.data);if(void 0!==i){var r=v(bO(mn(i)?i(t):i),2),a=r[0],s=r[1];Object.assign(n,{width:a,height:s})}o.setNode(e.toString(),n)}),e.getAllEdges().forEach(function(t){var e=t.id,n=t.source,r=t.target;o.setEdge(n.toString(),r.toString(),{id:e})}),mM().layout(o),u={nodes:[],edges:[]},o.nodes().forEach(function(n){var r=o.node(n);u.nodes.push({id:n,data:r}),t&&e.mergeNodeData(n,r)}),o.edges().forEach(function(n){var r=o.edge(n),i=r.id,a=we(r,["id"]),s=n.v,c=n.w;u.edges.push({id:i,source:s,target:c,data:a}),t&&e.mergeEdgeData(i,a)}),r.a(2,u)},r)}))}}])}();bM.defaultOptions={};var wM=function(){function t(e){x(this,t),this.id=e.id||0,this.rx=e.rx,this.ry=e.ry,this.fx=0,this.fy=0,this.mass=e.mass,this.degree=e.degree,this.g=e.g||0}return B(t,[{key:"distanceTo",value:function(t){var e=this.rx-t.rx,n=this.ry-t.ry;return Math.hypot(e,n)}},{key:"setPos",value:function(t,e){this.rx=t,this.ry=e}},{key:"resetForce",value:function(){this.fx=0,this.fy=0}},{key:"addForce",value:function(t){var e=t.rx-this.rx,n=t.ry-this.ry,r=Math.hypot(e,n);r=r<1e-4?1e-4:r;var i=this.g*(this.degree+1)*(t.degree+1)/r;this.fx+=i*e/r,this.fy+=i*n/r}},{key:"in",value:function(t){return t.contains(this.rx,this.ry)}},{key:"add",value:function(e){var n=this.mass+e.mass;return new t({rx:(this.rx*this.mass+e.rx*e.mass)/n,ry:(this.ry*this.mass+e.ry*e.mass)/n,mass:n,degree:this.degree+e.degree})}}])}(),xM=function(){function t(e){x(this,t),this.xmid=e.xmid,this.ymid=e.ymid,this.length=e.length,this.massCenter=e.massCenter||[0,0],this.mass=e.mass||1}return B(t,[{key:"getLength",value:function(){return this.length}},{key:"contains",value:function(t,e){var n=this.length/2;return t<=this.xmid+n&&t>=this.xmid-n&&e<=this.ymid+n&&e>=this.ymid-n}},{key:"NW",value:function(){return new t({xmid:this.xmid-this.length/4,ymid:this.ymid+this.length/4,length:this.length/2})}},{key:"NE",value:function(){return new t({xmid:this.xmid+this.length/4,ymid:this.ymid+this.length/4,length:this.length/2})}},{key:"SW",value:function(){return new t({xmid:this.xmid-this.length/4,ymid:this.ymid-this.length/4,length:this.length/2})}},{key:"SE",value:function(){return new t({xmid:this.xmid+this.length/4,ymid:this.ymid-this.length/4,length:this.length/2})}}])}(),EM=function(){function t(e){x(this,t),this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,null!=e&&(this.quad=e)}return B(t,[{key:"insert",value:function(e){null!=this.body?this._isExternal()?(this.quad&&(this.NW=new t(this.quad.NW()),this.NE=new t(this.quad.NE()),this.SW=new t(this.quad.SW()),this.SE=new t(this.quad.SE())),this._putBody(this.body),this._putBody(e),this.body=this.body.add(e)):(this.body=this.body.add(e),this._putBody(e)):this.body=e}},{key:"_putBody",value:function(t){this.quad&&(t.in(this.quad.NW())&&this.NW?this.NW.insert(t):t.in(this.quad.NE())&&this.NE?this.NE.insert(t):t.in(this.quad.SW())&&this.SW?this.SW.insert(t):t.in(this.quad.SE())&&this.SE&&this.SE.insert(t))}},{key:"_isExternal",value:function(){return null==this.NW&&null==this.NE&&null==this.SW&&null==this.SE}},{key:"updateForce",value:function(t){null!=this.body&&t!==this.body&&(this._isExternal()||(this.quad?this.quad.getLength():0)/this.body.distanceTo(t)<this.theta?t.addForce(this.body):(this.NW&&this.NW.updateForce(t),this.NE&&this.NE.updateForce(t),this.SW&&this.SW.updateForce(t),this.SE&&this.SE.updateForce(t)))}}])}(),BM={center:[0,0],width:300,height:300,kr:5,kg:1,mode:"normal",preventOverlap:!1,dissuadeHubs:!1,maxIteration:0,ks:.1,ksmax:10,tao:.1},kM=function(){return B(function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};x(this,t),this.options=e,this.id="forceAtlas2",this.options=Object.assign(Object.assign({},BM),e)},[{key:"execute",value:function(t,e){return xe(this,void 0,void 0,(0,Dn.A)().m(function n(){return(0,Dn.A)().w(function(n){for(;;)if(0===n.n)return n.a(2,this.genericForceAtlas2Layout(!1,t,e))},n,this)}))}},{key:"assign",value:function(t,e){return xe(this,void 0,void 0,(0,Dn.A)().m(function n(){return(0,Dn.A)().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,this.genericForceAtlas2Layout(!0,t,e);case 1:return n.a(2)}},n,this)}))}},{key:"genericForceAtlas2Layout",value:function(t,e,n){return xe(this,void 0,void 0,(0,Dn.A)().m(function r(){var i,o,a,s,u,c,l,A,f,d,h,p,v,g,y,m,b,w,x,E,B,k;return(0,Dn.A)().w(function(r){for(;;)switch(r.n){case 0:if(i=e.getAllEdges(),o=e.getAllNodes(),a=this.formatOptions(n,o.length),s=a.width,u=a.height,c=a.prune,l=a.maxIteration,A=a.nodeSize,f=a.center,(null==o?void 0:o.length)&&1!==o.length){r.n=1;break}return r.a(2,SO(e,t,f));case 1:if(d=o.map(function(t){return kO(t,[s,u])}),h=i.filter(function(t){return t.source!==t.target}),p=new xB({nodes:d,edges:h}),v=this.getSizes(p,A),this.run(p,e,l,v,t,a),c){for(g=0;g<h.length;g+=1)y=h[g],m=y.source,b=y.target,w=p.getDegree(m),x=p.getDegree(m),w<=1?(E=p.getNode(b),p.mergeNodeData(m,{x:E.data.x,y:E.data.y})):x<=1&&(B=p.getNode(m),p.mergeNodeData(b,{x:B.data.x,y:B.data.y}));k=Object.assign(Object.assign({},a),{prune:!1,barnesHut:!1}),this.run(p,e,100,v,t,k)}return r.a(2,{nodes:d,edges:i})}},r,this)}))}},{key:"getSizes",value:function(t,e){for(var n=t.getAllNodes(),r={},i=0;i<n.length;i+=1){var o=n[i];r[o.id]=EO(e,void 0)(o)}return r}},{key:"formatOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=Object.assign(Object.assign({},this.options),t),r=n.center,i=n.width,o=n.height,a=n.barnesHut,s=n.prune,u=n.maxIteration,c=n.kr,l=n.kg;return n.width=i||"undefined"==typeof window?i:window.innerWidth,n.height=o||"undefined"==typeof window?o:window.innerHeight,n.center=r||[n.width/2,n.height/2],void 0===a&&e>250&&(n.barnesHut=!0),void 0===s&&e>100&&(n.prune=!0),0!==u||s?0===u&&s&&(n.maxIteration=100,e<=200&&e>100?n.maxIteration=500:e>200&&(n.maxIteration=950)):(n.maxIteration=250,e<=200&&e>100?n.maxIteration=1e3:e>200&&(n.maxIteration=1200)),c||(n.kr=50,e>100&&e<=500?n.kr=20:e>500&&(n.kr=1)),l||(n.kg=20,e>100&&e<=500?n.kg=10:e>500&&(n.kg=1)),n}},{key:"run",value:function(t,e,n,r,i,o){for(var a=o.kr,s=o.barnesHut,u=o.onTick,c=t.getAllNodes(),l=0,A=n,f={},d={},h={},p=0;p<c.length;p+=1){var v=c[p],g=v.data,y=v.id;if(f[y]=[0,0],s){var m={id:p,rx:g.x,ry:g.y,mass:1,g:a,degree:t.getDegree(y)};h[y]=new wM(m)}}for(;A>0;)l=this.oneStep(t,{iter:A,preventOverlapIters:50,krPrime:100,sg:l,forces:f,preForces:d,bodies:h,sizes:r},o),A--,null==u||u({nodes:c,edges:e.getAllEdges()});return t}},{key:"oneStep",value:function(t,e,n){for(var r=e.iter,i=e.preventOverlapIters,o=e.krPrime,a=e.sg,s=e.preForces,u=e.bodies,c=e.sizes,l=e.forces,A=n.preventOverlap,f=n.barnesHut,d=t.getAllNodes(),h=0;h<d.length;h+=1){var p=d[h].id;s[p]=O(l[p]),l[p]=[0,0]}return l=this.getAttrForces(t,r,i,c,l,n),l=f&&(A&&r>i||!A)?this.getOptRepGraForces(t,l,u,n):this.getRepGraForces(t,r,i,l,o,c,n),this.updatePos(t,l,s,a,n)}},{key:"getAttrForces",value:function(t,e,n,r,i,o){for(var a=o.preventOverlap,s=o.dissuadeHubs,u=o.mode,c=o.prune,l=t.getAllEdges(),A=0;A<l.length;A+=1){var f=l[A],d=f.source,h=f.target,p=t.getNode(d),v=t.getNode(h),g=t.getDegree(d),y=t.getDegree(h);if(!c||!(g<=1||y<=1)){var m=[v.data.x-p.data.x,v.data.y-p.data.y],b=Math.hypot(m[0],m[1]);b=b<1e-4?1e-4:b,m[0]=m[0]/b,m[1]=m[1]/b,a&&e<n&&(b=b-r[d]-r[h]);var w=b,x=w;"linlog"===u&&(x=w=Math.log(1+b)),s&&(w=b/g,x=b/y),a&&e<n&&b<=0?(w=0,x=0):a&&e<n&&b>0&&(w=b,x=b),i[d][0]+=w*m[0],i[h][0]-=x*m[0],i[d][1]+=w*m[1],i[h][1]-=x*m[1]}}return i}},{key:"getOptRepGraForces",value:function(t,e,n,r){for(var i=r.kg,o=r.center,a=r.prune,s=t.getAllNodes(),u=s.length,c=9e10,l=-9e10,A=9e10,f=-9e10,d=0;d<u;d+=1){var h=s[d],p=h.id,v=h.data;a&&t.getDegree(p)<=1||(n[p].setPos(v.x,v.y),v.x>=l&&(l=v.x),v.x<=c&&(c=v.x),v.y>=f&&(f=v.y),v.y<=A&&(A=v.y))}for(var g=Math.max(l-c,f-A),y=new xM({xmid:(l+c)/2,ymid:(f+A)/2,length:g,massCenter:o,mass:u}),m=new EM(y),b=0;b<u;b+=1){var w=s[b].id;a&&t.getDegree(w)<=1||n[w].in(y)&&m.insert(n[w])}for(var x=0;x<u;x+=1){var E=s[x],B=E.id,k=E.data,O=t.getDegree(B);if(!(a&&O<=1)){n[B].resetForce(),m.updateForce(n[B]),e[B][0]-=n[B].fx,e[B][1]-=n[B].fy;var C=[k.x-o[0],k.y-o[1]],M=Math.hypot(C[0],C[1]);M=M<1e-4?1e-4:M,C[0]=C[0]/M,C[1]=C[1]/M;var S=i*(O+1);e[B][0]-=S*C[0],e[B][1]-=S*C[1]}}return e}},{key:"getRepGraForces",value:function(t,e,n,r,i,o,a){for(var s=a.preventOverlap,u=a.kr,c=a.kg,l=a.center,A=a.prune,f=t.getAllNodes(),d=f.length,h=0;h<d;h+=1){for(var p=f[h],v=t.getDegree(p.id),g=h+1;g<d;g+=1){var y=f[g],m=t.getDegree(y.id);if(!A||!(v<=1||m<=1)){var b=[y.data.x-p.data.x,y.data.y-p.data.y],w=Math.hypot(b[0],b[1]);w=w<1e-4?1e-4:w,b[0]=b[0]/w,b[1]=b[1]/w,s&&e<n&&(w=w-o[p.id]-o[y.id]);var x=u*(v+1)*(m+1)/w;s&&e<n&&w<0?x=i*(v+1)*(m+1):s&&e<n&&0===w?x=0:s&&e<n&&w>0&&(x=u*(v+1)*(m+1)/w),r[p.id][0]-=x*b[0],r[y.id][0]+=x*b[0],r[p.id][1]-=x*b[1],r[y.id][1]+=x*b[1]}}var E=[p.data.x-l[0],p.data.y-l[1]],B=Math.hypot(E[0],E[1]);E[0]=E[0]/B,E[1]=E[1]/B;var k=c*(v+1);r[p.id][0]-=k*E[0],r[p.id][1]-=k*E[1]}return r}},{key:"updatePos",value:function(t,e,n,r,i){for(var o=i.ks,a=i.tao,s=i.prune,u=i.ksmax,c=t.getAllNodes(),l=c.length,A=[],f=[],d=0,h=0,p=r,v=0;v<l;v+=1){var g=c[v].id,y=t.getDegree(g);if(!(s&&y<=1)){var m=[e[g][0]-n[g][0],e[g][1]-n[g][1]],b=Math.hypot(m[0],m[1]),w=[e[g][0]+n[g][0],e[g][1]+n[g][1]],x=Math.hypot(w[0],w[1]);A[v]=b,f[v]=x/2,d+=(y+1)*A[v],h+=(y+1)*f[v]}}var E=p;p=a*h/d,0!==E&&(p=p>1.5*E?1.5*E:p);for(var B=0;B<l;B+=1){var k=c[B],O=k.id,C=k.data,M=t.getDegree(O);if(!(s&&M<=1||de(C.fx)&&de(C.fy))){var S=o*p/(1+p*Math.sqrt(A[B])),F=Math.hypot(e[O][0],e[O][1]),T=u/(F=F<1e-4?1e-4:F),P=(S=S>T?T:S)*e[O][0],I=S*e[O][1];t.mergeNodeData(O,{x:C.x+P,y:C.y+I})}}return p}}])}(),OM={maxIteration:1e3,gravity:10,speed:5,clustering:!1,clusterGravity:10,width:300,height:300,nodeClusterBy:"cluster"},CM=function(){return B(function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};x(this,t),this.options=e,this.id="fruchterman",this.timeInterval=0,this.running=!1,this.options=Object.assign(Object.assign({},OM),e)},[{key:"execute",value:function(t,e){return xe(this,void 0,void 0,(0,Dn.A)().m(function n(){return(0,Dn.A)().w(function(n){for(;;)if(0===n.n)return n.a(2,this.genericFruchtermanLayout(!1,t,e))},n,this)}))}},{key:"assign",value:function(t,e){return xe(this,void 0,void 0,(0,Dn.A)().m(function n(){return(0,Dn.A)().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,this.genericFruchtermanLayout(!0,t,e);case 1:return n.a(2)}},n,this)}))}},{key:"stop",value:function(){this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval),this.running=!1}},{key:"tick",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.maxIteration||1;if(this.lastResult)return this.lastResult;for(var n=0;n<e;n++)this.runOneStep(this.lastGraph,this.lastClusterMap,this.lastOptions);var r={nodes:this.lastLayoutNodes,edges:this.lastLayoutEdges};return this.lastAssign&&r.nodes.forEach(function(e){return t.lastGraph.mergeNodeData(e.id,{x:e.data.x,y:e.data.y,z:3===t.options.dimensions?e.data.z:void 0})}),r}},{key:"genericFruchtermanLayout",value:function(t,e,n){return xe(this,void 0,void 0,(0,Dn.A)().m(function r(){var i,o,a,s,u,c,l,A,f,d,h,p,v,g,y,m,b,w=this;return(0,Dn.A)().w(function(r){for(;;)switch(r.n){case 0:if(!this.running){r.n=1;break}return r.a(2);case 1:if(i=this.formatOptions(n),o=i.dimensions,a=i.width,s=i.height,u=i.center,c=i.clustering,l=i.nodeClusterBy,A=i.maxIteration,f=i.onTick,d=e.getAllNodes(),h=e.getAllEdges(),null==d?void 0:d.length){r.n=2;break}return p={nodes:[],edges:h},this.lastResult=p,r.a(2,p);case 2:if(1!==d.length){r.n=3;break}return t&&e.mergeNodeData(d[0].id,{x:u[0],y:u[1],z:3===o?u[2]:void 0}),v={nodes:[Object.assign(Object.assign({},d[0]),{data:Object.assign(Object.assign({},d[0].data),{x:u[0],y:u[1],z:3===o?u[2]:void 0})})],edges:h},this.lastResult=v,r.a(2,v);case 3:if(g=d.map(function(t){return kO(t,[a,s])}),y=new xB({nodes:g,edges:h}),m={},c&&g.forEach(function(t){var e=t.data[l];m[e]||(m[e]={name:e,cx:0,cy:0,count:0})}),this.lastLayoutNodes=g,this.lastLayoutEdges=h,this.lastAssign=t,this.lastGraph=y,this.lastOptions=i,this.lastClusterMap=m,"undefined"!=typeof window){r.n=4;break}return r.a(2);case 4:return b=0,r.a(2,new Promise(function(n){w.timeInterval=window.setInterval(function(){w.running?(w.runOneStep(y,m,i),t&&g.forEach(function(t){var n=t.id,r=t.data;return e.mergeNodeData(n,{x:r.x,y:r.y,z:3===o?r.z:void 0})}),null==f||f({nodes:g,edges:h}),++b>=A&&(window.clearInterval(w.timeInterval),n({nodes:g,edges:h}))):n({nodes:g,edges:h})},0),w.running=!0}))}},r,this)}))}},{key:"formatOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object.assign(Object.assign({},this.options),t),n=e.clustering,r=e.nodeClusterBy,i=e.center,o=e.width,a=e.height;return e.width=o||"undefined"==typeof window?o:window.innerWidth,e.height=a||"undefined"==typeof window?a:window.innerHeight,e.center=i||[e.width/2,e.height/2],e.clustering=n&&!!r,e}},{key:"runOneStep",value:function(t,e,n){var r=n.dimensions,i=n.height,o=n.width,a=n.gravity,s=n.center,u=n.speed,c=n.clustering,l=n.nodeClusterBy,A=n.clusterGravity,f=i*o,d=Math.sqrt(f)/10,h=t.getAllNodes(),p=f/(h.length+1),v=Math.sqrt(p),g={};if(this.applyCalculate(t,g,v,p),c){for(var y in e)e[y].cx=0,e[y].cy=0,e[y].count=0;for(var m in h.forEach(function(t){var n=t.data,r=e[n[l]];de(n.x)&&(r.cx+=n.x),de(n.y)&&(r.cy+=n.y),r.count++}),e)e[m].cx/=e[m].count,e[m].cy/=e[m].count;var b=A||a;h.forEach(function(t,n){var r=t.id,i=t.data;if(de(i.x)&&de(i.y)){var o=e[i[l]],a=Math.sqrt((i.x-o.cx)*(i.x-o.cx)+(i.y-o.cy)*(i.y-o.cy)),s=v*b;g[r].x-=s*(i.x-o.cx)/a,g[r].y-=s*(i.y-o.cy)/a}})}h.forEach(function(t,e){var n=t.id,i=t.data;if(de(i.x)&&de(i.y)){var o=.01*v*a;g[n].x-=o*(i.x-s[0]),g[n].y-=o*(i.y-s[1]),3===r&&(g[n].z-=o*(i.z-s[2]))}}),h.forEach(function(e,n){var i=e.id,o=e.data;if(de(o.fx)&&de(o.fy))return o.x=o.fx,o.y=o.fy,void(3===r&&(o.z=o.fz));if(de(o.x)&&de(o.y)){var a=Math.sqrt(g[i].x*g[i].x+g[i].y*g[i].y+(3===r?g[i].z*g[i].z:0));if(a>0){var s=Math.min(d*(u/800),a);t.mergeNodeData(i,{x:o.x+g[i].x/a*s,y:o.y+g[i].y/a*s,z:3===r?o.z+g[i].z/a*s:void 0})}}})}},{key:"applyCalculate",value:function(t,e,n,r){this.calRepulsive(t,e,r),this.calAttractive(t,e,n)}},{key:"calRepulsive",value:function(t,e,n){var r=this,i=t.getAllNodes();i.forEach(function(t,o){var a=t.data,s=t.id;e[s]={x:0,y:0,z:0},i.forEach(function(t,i){var u=t.data,c=t.id;if(!(o<=i)&&de(a.x)&&de(u.x)&&de(a.y)&&de(u.y)){var l=a.x-u.x,A=a.y-u.y,f=3===r.options.dimensions?a.z-u.z:0,d=l*l+A*A+f*f;0===d&&(d=1,l=.01,A=.01,f=.01);var h=n/d,p=l*h,v=A*h,g=f*h;e[s].x+=p,e[s].y+=v,e[c].x-=p,e[c].y-=v,3===r.options.dimensions&&(e[s].z+=g,e[c].z-=g)}})})}},{key:"calAttractive",value:function(t,e,n){var r=this;t.getAllEdges().forEach(function(i){var o=i.source,a=i.target;if(o&&a&&o!==a){var s=t.getNode(o).data,u=t.getNode(a).data;if(de(u.x)&&de(s.x)&&de(u.y)&&de(s.y)){var c=u.x-s.x,l=u.y-s.y,A=3===r.options.dimensions?u.z-s.z:0,f=Math.sqrt(c*c+l*l+A*A)/n,d=c*f,h=l*f,p=A*f;e[o].x+=d,e[o].y+=h,e[a].x-=d,e[a].y-=h,3===r.options.dimensions&&(e[o].z+=p,e[a].z-=p)}}})}}])}(),MM={begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30,width:300,height:300},SM=function(){return B(function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};x(this,t),this.options=e,this.id="grid",this.options=Object.assign(Object.assign({},MM),e)},[{key:"execute",value:function(t,e){return xe(this,void 0,void 0,(0,Dn.A)().m(function n(){return(0,Dn.A)().w(function(n){for(;;)if(0===n.n)return n.a(2,this.genericGridLayout(!1,t,e))},n,this)}))}},{key:"assign",value:function(t,e){return xe(this,void 0,void 0,(0,Dn.A)().m(function n(){return(0,Dn.A)().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,this.genericGridLayout(!0,t,e);case 1:return n.a(2)}},n,this)}))}},{key:"genericGridLayout",value:function(t,e,n){return xe(this,void 0,void 0,(0,Dn.A)().m(function r(){var i,o,a,s,u,c,l,A,f,d,h,p,g,y,m,b,w,x,E,B,k,O,C,M,S,F,T,P,I,N,L,_,Q,U,j,D,R,H,z;return(0,Dn.A)().w(function(r){for(;;)switch(r.n){case 0:if(i=Object.assign(Object.assign({},this.options),n),o=i.begin,a=void 0===o?[0,0]:o,s=i.condense,u=i.preventOverlapPadding,c=i.preventOverlap,l=i.rows,A=i.cols,f=i.nodeSpacing,d=i.nodeSize,h=i.width,p=i.height,g=i.position,y=i.sortBy,m=e.getAllNodes(),b=e.getAllEdges(),(w=null==m?void 0:m.length)&&1!==w){r.n=1;break}return r.a(2,SO(e,t,a));case 1:if(x=m.map(function(t){return kO(t)}),"id"===y||ve(y)&&void 0!==x[0].data[y]||(y="degree"),"degree"===y?x.sort(function(t,n){return e.getDegree(n.id,"both")-e.getDegree(t.id,"both")}):"id"===y?x.sort(function(t,e){return de(e.id)&&de(t.id)?e.id-t.id:"".concat(t.id).localeCompare("".concat(e.id))}):x.sort(function(t,e){return e.data[y]-t.data[y]}),E=h||"undefined"==typeof window?h:window.innerWidth,B=p||"undefined"==typeof window?p:window.innerHeight,k=w,O={rows:l,cols:A},null!=l&&null!=A?(O.rows=l,O.cols=A):null!=l&&null==A?(O.rows=l,O.cols=Math.ceil(k/O.rows)):null==l&&null!=A?(O.cols=A,O.rows=Math.ceil(k/O.cols)):(C=Math.sqrt(k*B/E),O.rows=Math.round(C),O.cols=Math.round(E/B*C)),O.rows=Math.max(O.rows,1),O.cols=Math.max(O.cols,1),O.cols*O.rows>k)M=FM(O),S=TM(O),(M-1)*S>=k?FM(O,M-1):(S-1)*M>=k&&TM(O,S-1);else for(;O.cols*O.rows<k;)F=FM(O),((T=TM(O))+1)*F>=k?TM(O,T+1):FM(O,F+1);for(P=s?0:E/O.cols,I=s?0:B/O.rows,(c||f)&&(N=wO(10,f),L=xO(30,d,!1),x.forEach(function(t){t.data.x&&t.data.y||(t.data.x=0,t.data.y=0);var n=e.getNode(t.id),r=v(bO(L(n)||30),2),i=r[0],o=r[1],a=void 0!==N?N(t):u,s=i+a,c=o+a;P=Math.max(P,s),I=Math.max(I,c)})),_={},Q={row:0,col:0},U={},j=0;j<x.length;j++){if(D=x[j],R=void 0,g&&(R=g(e.getNode(D.id))),R&&(void 0!==R.row||void 0!==R.col)){if(void 0===(H={row:R.row,col:R.col}).col)for(H.col=0;PM(_,H);)H.col++;else if(void 0===H.row)for(H.row=0;PM(_,H);)H.row++;U[D.id]=H,IM(_,H)}LM(D,a,P,I,U,O,Q,_)}return z={nodes:x,edges:b},t&&x.forEach(function(t){e.mergeNodeData(t.id,{x:t.data.x,y:t.data.y})}),r.a(2,z)}},r,this)}))}}])}(),FM=function(t,e){var n,r=t.rows||5,i=t.cols||5;return null==e?n=Math.min(r,i):Math.min(r,i)===t.rows?t.rows=e:t.cols=e,n},TM=function(t,e){var n,r=t.rows||5,i=t.cols||5;return null==e?n=Math.max(r,i):Math.max(r,i)===t.rows?t.rows=e:t.cols=e,n},PM=function(t,e){return t["c-".concat(e.row,"-").concat(e.col)]||!1},IM=function(t,e){return t["c-".concat(e.row,"-").concat(e.col)]=!0},NM=function(t,e){var n=t.cols||5;e.col++,e.col>=n&&(e.col=0,e.row++)},LM=function(t,e,n,r,i,o,a,s){var u,c,l=i[t.id];if(l)u=l.col*n+n/2+e[0],c=l.row*r+r/2+e[1];else{for(;PM(s,a);)NM(o,a);u=a.col*n+n/2+e[0],c=a.row*r+r/2+e[1],IM(s,a),NM(o,a)}t.data.x=u,t.data.y=c},_M=function(t,e,n){try{var r=fC.mul(fC.pow(e,2),-.5),i=r.mean("row"),o=r.mean("column"),a=r.mean();r.add(a).subRowVector(i).subColumnVector(o);var s=new dC(r),u=fC.sqrt(s.diagonalMatrix).diagonal();return s.leftSingularVectors.toJSON().map(function(e){return fC.mul([e],[u]).toJSON()[0].splice(0,t)})}catch(t){for(var c=[],l=0;l<e.length;l++){var A=Math.random()*n,f=Math.random()*n;c.push([A,f])}return c}},QM={iterations:10,height:10,width:10,speed:100,gravity:10,k:5},UM=function(t,e){for(var n=Object.assign(Object.assign({},QM),e),r=n.positions,i=n.iterations,o=n.width,a=n.k,s=n.speed,u=void 0===s?100:s,c=n.strictRadial,l=n.focusIdx,A=n.radii,f=void 0===A?[]:A,d=n.nodeSizeFunc,h=t.getAllNodes(),p=[],v=o/10,g=0;g<i;g++)r.forEach(function(t,e){p[e]={x:0,y:0}}),jM(h,r,p,a,f,d),DM(r,p,u,c,l,v,o,f);return r},jM=function(t,e,n,r,i,o){e.forEach(function(a,s){n[s]={x:0,y:0},e.forEach(function(e,u){if(s!==u&&i[s]===i[u]){var c=a.x-e.x,l=a.y-e.y,A=Math.sqrt(c*c+l*l);if(0===A){A=1;var f=s>u?1:-1;c=.01*f,l=.01*f}if(A<o(t[s])/2+o(t[u])/2){var d=r*r/A;n[s].x+=c/A*d,n[s].y+=l/A*d}}})})},DM=function(t,e,n,r,i,o,a,s){var u=o||a/10;return r&&e.forEach(function(e,n){var r=t[n].x-t[i].x,o=t[n].y-t[i].y,a=Math.sqrt(r*r+o*o),s=o/a,u=-r/a,c=Math.sqrt(e.x*e.x+e.y*e.y),l=Math.acos((s*e.x+u*e.y)/c);l>Math.PI/2&&(l-=Math.PI/2,s*=-1,u*=-1);var A=Math.cos(l)*c;e.x=s*A,e.y=u*A}),t.forEach(function(o,a){if(a!==i){var c=Math.sqrt(e[a].x*e[a].x+e[a].y*e[a].y);if(c>0&&a!==i){var l=Math.min(u*(n/800),c);if(o.x+=e[a].x/c*l,o.y+=e[a].y/c*l,r){var A=o.x-t[i].x,f=o.y-t[i].y,d=Math.sqrt(A*A+f*f);A=A/d*s[a],f=f/d*s[a],o.x=t[i].x+A,o.y=t[i].y+f}}}}),t},RM={maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,strictRadial:!0,maxPreventOverlapIteration:200,sortStrength:10},HM=function(){return B(function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};x(this,t),this.options=e,this.id="radial",this.options=Object.assign(Object.assign({},RM),e)},[{key:"execute",value:function(t,e){return xe(this,void 0,void 0,(0,Dn.A)().m(function n(){return(0,Dn.A)().w(function(n){for(;;)if(0===n.n)return n.a(2,this.genericRadialLayout(!1,t,e))},n,this)}))}},{key:"assign",value:function(t,e){return xe(this,void 0,void 0,(0,Dn.A)().m(function n(){return(0,Dn.A)().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,this.genericRadialLayout(!0,t,e);case 1:return n.a(2)}},n,this)}))}},{key:"genericRadialLayout",value:function(t,e,n){return xe(this,void 0,void 0,(0,Dn.A)().m(function r(){var i,o,a,s,u,c,l,A,f,d,h,p,g,y,m,b,w,x,E,B,k,C,M,S,F,T,P,I,N,L,_,Q,U,j,D,R,H,z,K,G,V,W,Y,X;return(0,Dn.A)().w(function(r){for(;;)switch(r.n){case 0:if(i=Object.assign(Object.assign({},this.options),n),o=i.width,a=i.height,s=i.center,u=i.focusNode,c=i.unitRadius,l=i.nodeSize,A=i.nodeSpacing,f=i.strictRadial,d=i.preventOverlap,h=i.maxPreventOverlapIteration,p=i.sortBy,g=i.linkDistance,y=void 0===g?50:g,m=i.sortStrength,b=void 0===m?10:m,w=i.maxIteration,x=void 0===w?1e3:w,E=e.getAllNodes(),B=e.getAllEdges(),k=o||"undefined"==typeof window?o:window.innerWidth,C=a||"undefined"==typeof window?a:window.innerHeight,M=s||[k/2,C/2],(null==E?void 0:E.length)&&1!==E.length){r.n=1;break}return r.a(2,SO(e,t,M));case 1:if(S=E[0],!ve(u)){r.n=5;break}F=0;case 2:if(!(F<E.length)){r.n=4;break}if(E[F].id!==u){r.n=3;break}return S=E[F],r.a(3,4);case 3:F++,r.n=2;break;case 4:r.n=6;break;case 5:S=u||E[0];case 6:return T=GM(E,S.id),P=pC({nodes:E,edges:B},!1),I=hC(P),N=WM(I,T),VM(I,T,N+1),L=I[T],_=k-M[0]>M[0]?M[0]:k-M[0],Q=C-M[1]>M[1]?M[1]:C-M[1],0===_&&(_=k/2),0===Q&&(Q=C/2),U=Math.min(_,Q),j=Math.max.apply(Math,O(L)),D=[],R=c||U/j,L.forEach(function(t,e){D[e]=t*R}),H=zM(E,I,y,D,R,p,b),z=KM(H),K=_M(y,H,y),G=K.map(function(t){var e=v(t,2),n=e[0],r=e[1];return{x:(isNaN(n)?Math.random()*y:n)-K[T][0],y:(isNaN(r)?Math.random()*y:r)-K[T][1]}}),this.run(x,G,z,H,D,T),d&&(V=EO(l,A),W={nodes:E,nodeSizeFunc:V,positions:G,radii:D,height:C,width:k,strictRadial:Boolean(f),focusIdx:T,iterations:h||200,k:G.length/4.5},G=UM(e,W)),Y=[],G.forEach(function(t,e){var n=kO(E[e]);n.data.x=t.x+M[0],n.data.y=t.y+M[1],Y.push(n)}),t&&Y.forEach(function(t){return e.mergeNodeData(t.id,{x:t.data.x,y:t.data.y})}),X={nodes:Y,edges:B},r.a(2,X)}},r,this)}))}},{key:"run",value:function(t,e,n,r,i,o){for(var a=0;a<=t;a++){var s=a/t;this.oneIteration(s,e,i,r,n,o)}}},{key:"oneIteration",value:function(t,e,n,r,i,o){var a=1-t;e.forEach(function(s,u){var c=yC(s,{x:0,y:0}),l=0===c?0:1/c;if(u!==o){var A=0,f=0,d=0;e.forEach(function(t,e){if(u!==e){var n=yC(s,t),o=0===n?0:1/n,a=r[e][u];d+=i[u][e],A+=i[u][e]*(t.x+a*(s.x-t.x)*o),f+=i[u][e]*(t.y+a*(s.y-t.y)*o)}});var h=0===n[u]?0:1/n[u];d*=a,d+=t*h*h,A*=a,A+=t*h*s.x*l,s.x=A/d,f*=a,f+=t*h*s.y*l,s.y=f/d}})}}])}(),zM=function(t,e,n,r,i,o,a){if(!t)return[];var s=[];if(e){var u={};e.forEach(function(e,c){var l=[];e.forEach(function(e,s){var A,f;if(c===s)l.push(0);else if(r[c]===r[s])if("data"===o)l.push(e*(Math.abs(c-s)*a)/(r[c]/i));else if(o){var d,h;if(u[t[c].id])d=u[t[c].id];else{var p=("id"===o?t[c].id:null===(A=t[c].data)||void 0===A?void 0:A[o])||0;d=ve(p)?p.charCodeAt(0):p,u[t[c].id]=d}if(u[t[s].id])h=u[t[s].id];else{var v=("id"===o?t[s].id:null===(f=t[s].data)||void 0===f?void 0:f[o])||0;h=ve(v)?v.charCodeAt(0):v,u[t[s].id]=h}l.push(e*(Math.abs(d-h)*a)/(r[c]/i))}else l.push(e*n/(r[c]/i));else{var g=(n+i)/2;l.push(e*g)}}),s.push(l)})}return s},KM=function(t){for(var e=t.length,n=t[0].length,r=[],i=0;i<e;i++){for(var o=[],a=0;a<n;a++)0!==t[i][a]?o.push(1/(t[i][a]*t[i][a])):o.push(0);r.push(o)}return r},GM=function(t,e){var n=-1;return t.forEach(function(t,r){t.id===e&&(n=r)}),Math.max(n,0)},VM=function(t,e,n){for(var r=t.length,i=0;i<r;i++)if(t[e][i]===1/0){t[e][i]=n,t[i][e]=n;for(var o=0;o<r;o++)t[i][o]!==1/0&&t[e][o]===1/0&&(t[e][o]=n+t[i][o],t[o][e]=n+t[i][o])}for(var a=0;a<r;a++)if(a!==e)for(var s=0;s<r;s++)if(t[a][s]===1/0){var u=Math.abs(t[e][a]-t[e][s]);u=0===u?1:u,t[a][s]=u}},WM=function(t,e){for(var n=0,r=0;r<t[e].length;r++)t[e][r]!==1/0&&(n=t[e][r]>n?t[e][r]:n);return n},YM={center:[0,0],width:300,height:300},XM=function(){return B(function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};x(this,t),this.options=e,this.id="random",this.options=Object.assign(Object.assign({},YM),e)},[{key:"execute",value:function(t,e){return xe(this,void 0,void 0,(0,Dn.A)().m(function n(){return(0,Dn.A)().w(function(n){for(;;)if(0===n.n)return n.a(2,this.genericRandomLayout(!1,t,e))},n,this)}))}},{key:"assign",value:function(t,e){return xe(this,void 0,void 0,(0,Dn.A)().m(function n(){return(0,Dn.A)().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,this.genericRandomLayout(!0,t,e);case 1:return n.a(2)}},n,this)}))}},{key:"genericRandomLayout",value:function(t,e,n){return xe(this,void 0,void 0,(0,Dn.A)().m(function r(){var i,o,a,s,u,c,l,A,f,d;return(0,Dn.A)().w(function(r){for(;;)if(0===r.n)return i=Object.assign(Object.assign({},this.options),n),o=i.center,a=i.width,s=i.height,u=e.getAllNodes(),c=a||"undefined"==typeof window?a:window.innerWidth,l=s||"undefined"==typeof window?s:window.innerHeight,A=o||[c/2,l/2],f=[],u&&u.forEach(function(t){f.push({id:t.id,data:{x:.9*(Math.random()-.5)*c+A[0],y:.9*(Math.random()-.5)*l+A[1]}})}),t&&f.forEach(function(t){return e.mergeNodeData(t.id,{x:t.data.x,y:t.data.y})}),d={nodes:f,edges:e.getAllEdges()},r.a(2,d)},r,this)}))}}])}(),qM=new Map;function ZM(t,e,n){return void 0===n&&(n=128),function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=e?e.apply(this,r):r[0];qM.has(t)||qM.set(t,function(t){var e,n,r,i=t||1;function o(t,o){++e>i&&(r=n,a(1),++e),n[t]=o}function a(t){e=0,n=Object.create(null),t||(r=Object.create(null))}return a(),{clear:a,has:function(t){return void 0!==n[t]||void 0!==r[t]},get:function(t){var e=n[t];return void 0!==e?e:void 0!==(e=r[t])?(o(t,e),e):void 0},set:function(t,e){void 0!==n[t]?n[t]=e:o(t,e)}}}(n));var a=qM.get(t);if(a.has(o))return a.get(o);var s=t.apply(this,r);return a.set(o,s),s}}var JM=function(t){function e(){var t;return x(this,e),(t=F(this,e,arguments)).id="fishbone",t}return P(e,t),B(e,[{key:"getRoot",value:function(){var t=this.context.model.getRootsData();if(!(uw(t)||t.length>2))return t[0]}},{key:"formatSize",value:function(t){var e="function"==typeof t?t:function(){return t};return function(t){return Jb(e(t))}}},{key:"doLayout",value:function(t,e){var n=e.hGap,r=e.getRibSep,i=e.vGap,o=e.nodeSize,a=e.height,s=this.context.model,u=this.formatSize(o),c=u(t)[0]+r(t),l=function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r+=n*((t.children||[]).length+1),null===(e=t.children)||void 0===e||e.forEach(function(t){var e;null===(e=s.getNodeLikeDatum(t).children)||void 0===e||e.forEach(function(t){var e=s.getNodeLikeDatum(t);r=l(e,r)})}),r},A=function(t){if(1===t.depth)return c;var e=s.getParentData(t.id,"tree");if(eS(t)){var r=s.getParentData(e.id,"tree"),o=h(t)-h(r);return A(e)+o*n/i}var a=(e.children||[]).indexOf(t.id),d=s.getNodeData((e.children||[]).slice(a));return f(e)-d.reduce(function(t,e){return t+l(e)},0)-u(e)[0]/2},f=ZM(function(t){if(tS(t))return u(t)[0]/2;var e=s.getParentData(t.id,"tree");if(eS(t))return A(t)+l(t)+u(t)[0]/2;var r=h(t)-h(e),o=n/i;return A(t)+r*o},function(t){return t.id}),d=function(t){return h(s.getParentData(t,"tree"))},h=ZM(function(t){if(tS(t))return a/2;if(eS(t)){var e=s.getParentData(t.id,"tree"),n=e.children.indexOf(t.id);if(0===n)return d(e.id)+i;var r=s.getNodeLikeDatum(e.children[n-1]);if(uw(r.children))return h(r)+i;var o=s.getDescendantsData(r.id);return Math.max.apply(Math,O(o.map(function(t){return eS(t)?d(t.id):h(t)})))+i}if(uw(t.children))return d(t.id)+i;var u=s.getNodeLikeDatum(t.children.slice(-1)[0]);if(uw(u.children))return h(u)+i;var c=s.getDescendantsData(t.id).slice(-1)[0];return(eS(c)?d(c.id):h(c))+i},function(t){return t.id}),p=0,v={nodes:[],edges:[]},g=function(t){var e;null===(e=t.children)||void 0===e||e.forEach(function(t){return g(s.getNodeLikeDatum(t))});var n=h(t),i=f(t);if(v.nodes.push({id:t.id,x:i,y:n}),!tS(t)){var o=s.getRelatedEdgesData(t.id,"in")[0],a=[A(t),eS(t)?n:d(t.id)];v.edges.push({id:Sm(o),controlPoints:[a],relatedNodeId:t.id}),p=Math.max(p,i+r(t)),1===t.depth&&(c=p)}};return g(t),v}},{key:"placeAlterative",value:function(t,e){var n=(e.children||[]).filter(function(t,e){return e%2!=0});if(0===n.length)return t;var r=this.context.model,i=t.nodes.find(function(t){return t.id===e.id}).y,o=function(t){var e=r.getAncestorsData(t,"tree");if(uw(e))return!1;var i=1===e.length?t:e[e.length-2].id;return n.includes(i)};t.nodes.forEach(function(t){o(t.id)&&(t.y=2*i-t.y)}),t.edges.forEach(function(t){o(t.relatedNodeId)&&(t.controlPoints=t.controlPoints.map(function(t){return[t[0],2*i-t[1]]}))})}},{key:"rightToLeft",value:function(t,e){return t.nodes.forEach(function(t){return t.x=e.width-t.x}),t.edges.forEach(function(t){t.controlPoints=t.controlPoints.map(function(t){return[e.width-t[0],t[1]]})}),t}},{key:"execute",value:function(t,n){return r=this,i=void 0,o=void 0,a=(0,Dn.A)().m(function r(){var i,o,a,s,u,c,l,A,f;return(0,Dn.A)().w(function(r){for(;;)switch(r.n){case 0:if(i=Object.assign(Object.assign(Object.assign({},e.defaultOptions),this.options),n),o=i.direction,a=i.nodeSize,s=this.getRoot()){r.n=1;break}return r.a(2,t);case 1:return u=this.formatSize(a),i.vGap||(i.vGap=Math.max.apply(Math,O((t.nodes||[]).map(function(t){return u(t)[1]})))),i.hGap||(i.hGap=Math.max.apply(Math,O((t.nodes||[]).map(function(t){return u(t)[0]})))),c=this.doLayout(s,i),this.placeAlterative(c,s),"RL"===o&&(c=this.rightToLeft(c,i)),l=this.context.model,A=[],f=[],c.nodes.forEach(function(t){var e=t.id,n=t.x,r=t.y,i=l.getNodeLikeDatum(e);A.push($M(i,{x:n,y:r}))}),c.edges.forEach(function(t){var e=t.id,n=t.controlPoints,r=l.getEdgeDatum(e);f.push($M(r,{controlPoints:n}))}),r.a(2,{nodes:A,edges:f})}},r,this)}),new(o||(o=Promise))(function(t,e){function n(t){try{u(a.next(t))}catch(t){e(t)}}function s(t){try{u(a.throw(t))}catch(t){e(t)}}function u(e){e.done?t(e.value):function(t){return t instanceof o?t:new o(function(e){e(t)})}(e.value).then(n,s)}u((a=a.apply(r,i||[])).next())});var r,i,o,a}}])}(EB);JM.defaultOptions={direction:"RL",getRibSep:function(){return 60}};var $M=function(t,e){return Object.assign(Object.assign({},t),{style:Object.assign(Object.assign({},t.style||{}),e)})},tS=function(t){return 0===t.depth},eS=function(t){return(t.depth||(t.depth=0))%2==0},nS=function(t){function e(){var t;return x(this,e),(t=F(this,e,arguments)).id="snake",t}return P(e,t),B(e,[{key:"formatSize",value:function(t,e){var n="function"==typeof e?e:function(){return e};return t.reduce(function(t,e){var r=v(Jb(n(e))||[0,0],2),i=r[0],o=r[1];return[Math.max(t[0],i),Math.max(t[1],o)]},[0,0])}},{key:"validate",value:function(t){var e=t.nodes,n=void 0===e?[]:e,r=t.edges,i=void 0===r?[]:r,o={},a={},s={};n.forEach(function(t){o[t.id]=0,a[t.id]=0,s[t.id]=[]}),i.forEach(function(t){o[t.target]++,a[t.source]++,s[t.source].push(t.target)});var u=new Set,c=function(t){u.has(t)||(u.add(t),s[t].forEach(c))};if(c(n[0].id),u.size!==n.length)return!1;var l=n.filter(function(t){return 0===o[t.id]}),A=n.filter(function(t){return 0===a[t.id]});if(1!==l.length||1!==A.length)return!1;var f=n.filter(function(t){return 1===o[t.id]&&1===a[t.id]});return f.length===n.length-2}},{key:"execute",value:function(t,n){return r=this,i=void 0,o=void 0,a=(0,Dn.A)().m(function r(){var i,o,a,s,u,c,l,A,f,d,h,p,g,y,m,b,w,x,E,B,k,O,C;return(0,Dn.A)().w(function(r){for(;;)switch(r.n){case 0:if(this.validate(t)){r.n=1;break}return r.a(2,t);case 1:return o=Object.assign({},e.defaultOptions,this.options,n),a=o.nodeSize,s=o.padding,u=o.sortBy,c=o.cols,l=o.colGap,A=o.rowGap,f=o.clockwise,d=o.width,h=o.height,p=Uy(s),g=v(p,4),y=g[0],m=g[1],b=g[2],w=g[3],x=this.formatSize(t.nodes||[],a),E=Math.ceil((t.nodes||[]).length/c),B=l||(d-w-m-c*x[0])/(c-1),((k=A||(h-y-b-E*x[1])/(E-1))===1/0||k<0)&&(k=0),(B===1/0||B<0)&&(B=0),O=u?null===(i=t.nodes)||void 0===i?void 0:i.sort(u):rS(t),C=(O||[]).map(function(t,e){var n=Math.floor(e/c),r=e%c,i=w+(f?n%2==0?r:c-1-r:n%2==0?c-1-r:r)*(x[0]+B)+x[0]/2,o=y+n*(x[1]+k)+x[1]/2;return{id:t.id,style:{x:i,y:o}}}),r.a(2,{nodes:C})}},r,this)}),new(o||(o=Promise))(function(t,e){function n(t){try{u(a.next(t))}catch(t){e(t)}}function s(t){try{u(a.throw(t))}catch(t){e(t)}}function u(e){e.done?t(e.value):function(t){return t instanceof o?t:new o(function(e){e(t)})}(e.value).then(n,s)}u((a=a.apply(r,i||[])).next())});var r,i,o,a}}])}(EB);function rS(t){var e=t.nodes,n=void 0===e?[]:e,r=t.edges,i=void 0===r?[]:r,o={},a={};n.forEach(function(t){o[t.id]=0,a[t.id]=[]}),i.forEach(function(t){o[t.target]++,a[t.source].push(t.target)});var s=[],u=[];n.forEach(function(t){0===o[t.id]&&s.push(t.id)});for(var c=function(){var t=s.shift(),e=n.find(function(e){return e.id===t});u.push(e),a[t].forEach(function(t){o[t]--,0===o[t]&&s.push(t)})};s.length>0;)c();return u}nS.defaultOptions={padding:0,cols:5,clockwise:!0};const iS=function(t,e,n){if(!tn(t)&&!Vm(t))return t;var r=n;return _x(t,function(t,n){r=e(r,t,n)}),r},oS=function(t,e){return iS(t,function(t,n,r){return e.includes(r)||(t[r]=n),t},{})};var aS=function(t){function e(){return x(this,e),F(this,e,arguments)}return P(e,t),B(e)}(zm);function sS(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=document.createElement("div");return r.setAttribute("class","g6-".concat(t)),Object.assign(r.style,{position:"absolute",display:"block"}),e&&Object.assign(r.style,{position:"unset",gridArea:"1 / 1 / 2 / 2",inset:"0px",height:"100%",width:"100%",overflow:"hidden",pointerEvents:"none"}),n&&Object.assign(r.style,n),r}function uS(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"div",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:document.body,o=document.getElementById(t);o&&o.remove();var a=document.createElement(e);return a.innerHTML=r,a.id=t,Object.assign(a.style,n),i.appendChild(a),a}var cS=function(t){function e(t,n){var r;return x(this,e),(r=F(this,e,[t,Object.assign({},e.defaultOptions,n)])).$element=sS("background"),r.context.canvas.getContainer().prepend(r.$element),r.update(n),r}return P(e,t),B(e,[{key:"update",value:function(t){var n,r,i,o,a=this,s=Object.create(null,{update:{get:function(){return xn(e,"update",a,1)}}});return n=this,r=void 0,i=void 0,o=(0,Dn.A)().m(function e(){return(0,Dn.A)().w(function(e){for(;;)switch(e.n){case 0:s.update.call(this,t),Object.assign(this.$element.style,oS(this.options,["key","type"]));case 1:return e.a(2)}},e,this)}),new(i||(i=Promise))(function(t,e){function a(t){try{u(o.next(t))}catch(t){e(t)}}function s(t){try{u(o.throw(t))}catch(t){e(t)}}function u(e){e.done?t(e.value):function(t){return t instanceof i?t:new i(function(e){e(t)})}(e.value).then(a,s)}u((o=o.apply(n,r||[])).next())})}},{key:"destroy",value:function(){xn(e,"destroy",this,3)([]),this.$element.remove()}}])}(aS);function lS(t,e,n,r,i,o){var a,s=n-t,u=r-e,c=i-t,l=o-e,A=c*s+l*u;a=A<=0||(A=(c=s-c)*s+(l=u-l)*u)<=0?0:A*A/(s*s+u*u);var f=c*c+l*l-a;return f<0?0:f}function AS(t,e,n,r){return(t-n)*(t-n)+(e-r)*(e-r)}function fS(t,e,n,r,i){return AS(t,e,n,r)<i*i}function dS(t){var e=Math.min(t.x1,t.x2),n=Math.max(t.x1,t.x2),r=Math.min(t.y1,t.y2),i=Math.max(t.y1,t.y2);return{x:e,y:r,x2:n,y2:i,width:n-e,height:i-r}}cS.defaultOptions={transition:"background 0.5s",backgroundSize:"cover",zIndex:"-1"};var hS,pS=function(){function t(e,n,r,i){x(this,t),this.x1=e,this.y1=n,this.x2=r,this.y2=i}return B(t,[{key:"equals",value:function(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2}},{key:"draw",value:function(t){t.moveTo(this.x1,this.y1),t.lineTo(this.x2,this.y2)}},{key:"toString",value:function(){return"Line(from=(".concat(this.x1,",").concat(this.y1,"),to=(").concat(this.x2,",").concat(this.y2,"))")}},{key:"cuts",value:function(t,e){return!(this.y1===this.y2||e<this.y1&&e<=this.y2||e>this.y1&&e>=this.y2||t>this.x1&&t>=this.x2||!(t<this.x1&&t<=this.x2||t<=this.x1+(e-this.y1)*(this.x2-this.x1)/(this.y2-this.y1)))}},{key:"distSquare",value:function(t,e){return lS(this.x1,this.y1,this.x2,this.y2,t,e)}},{key:"ptClose",value:function(t,e,n){if(this.x1<this.x2){if(t<this.x1-n||t>this.x2+n)return!1}else if(t<this.x2-n||t>this.x1+n)return!1;if(this.y1<this.y2){if(e<this.y1-n||e>this.y2+n)return!1}else if(e<this.y2-n||e>this.y1+n)return!1;return!0}}],[{key:"from",value:function(e){return new t(e.x1,e.y1,e.x2,e.y2)}}])}();!function(t){t[t.POINT=1]="POINT",t[t.PARALLEL=2]="PARALLEL",t[t.COINCIDENT=3]="COINCIDENT",t[t.NONE=4]="NONE"}(hS||(hS={}));var vS,gS=B(function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;x(this,t),this.state=e,this.x=n,this.y=r});function yS(t,e){var n=(e.x2-e.x1)*(t.y1-e.y1)-(e.y2-e.y1)*(t.x1-e.x1),r=(t.x2-t.x1)*(t.y1-e.y1)-(t.y2-t.y1)*(t.x1-e.x1),i=(e.y2-e.y1)*(t.x2-t.x1)-(e.x2-e.x1)*(t.y2-t.y1);if(i){var o=n/i,a=r/i;return 0<=o&&o<=1&&0<=a&&a<=1?new gS(hS.POINT,t.x1+o*(t.x2-t.x1),t.y1+o*(t.y2-t.y1)):new gS(hS.NONE)}return new gS(0===n||0===r?hS.COINCIDENT:hS.PARALLEL)}function mS(t,e){var n=(e.x2-e.x1)*(t.y1-e.y1)-(e.y2-e.y1)*(t.x1-e.x1),r=(t.x2-t.x1)*(t.y1-e.y1)-(t.y2-t.y1)*(t.x1-e.x1),i=(e.y2-e.y1)*(t.x2-t.x1)-(e.x2-e.x1)*(t.y2-t.y1);if(i){var o=n/i,a=r/i;if(0<=o&&o<=1&&0<=a&&a<=1)return o}return Number.POSITIVE_INFINITY}function bS(t,e,n){var r=new Set;return t.width<=0?(r.add(vS.LEFT),r.add(vS.RIGHT)):e<t.x?r.add(vS.LEFT):e>t.x+t.width&&r.add(vS.RIGHT),t.height<=0?(r.add(vS.TOP),r.add(vS.BOTTOM)):n<t.y?r.add(vS.TOP):n>t.y+t.height&&r.add(vS.BOTTOM),r}function wS(t,e){var n=e.x1,r=e.y1,i=e.x2,o=e.y2,a=Array.from(bS(t,i,o));if(0===a.length)return!0;for(var s=bS(t,n,r);0!==s.size;){var u,c=qn(a);try{for(c.s();!(u=c.n()).done;){var l=u.value;if(s.has(l))return!1}}catch(t){c.e(t)}finally{c.f()}if(s.has(vS.RIGHT)||s.has(vS.LEFT)){var A=t.x;s.has(vS.RIGHT)&&(A+=t.width),r+=(A-n)*(o-r)/(i-n),n=A}else{var f=t.y;s.has(vS.BOTTOM)&&(f+=t.height),n+=(f-r)*(i-n)/(o-r),r=f}s=bS(t,n,r)}return!0}function xS(t,e){var n=Number.POSITIVE_INFINITY,r=0;function i(t,i,o,a){var s=mS(e,new pS(t,i,o,a));(s=Math.abs(s-.5))>=0&&s<=1&&(r++,s<n&&(n=s))}return i(t.x,t.y,t.x2,t.y),i(t.x,t.y,t.x,t.y2),r>1?n:(i(t.x,t.y2,t.x2,t.y2),r>1?n:(i(t.x2,t.y,t.x2,t.y2),0===r?-1:n))}function ES(t,e){var n=0,r=yS(t,new pS(e.x,e.y,e.x2,e.y));n+=r.state===hS.POINT?1:0;var i=yS(t,new pS(e.x,e.y,e.x,e.y2));n+=i.state===hS.POINT?1:0;var o=yS(t,new pS(e.x,e.y2,e.x2,e.y2));n+=o.state===hS.POINT?1:0;var a=yS(t,new pS(e.x2,e.y,e.x2,e.y2));return{top:r,left:i,bottom:o,right:a,count:n+=a.state===hS.POINT?1:0}}!function(t){t[t.LEFT=0]="LEFT",t[t.TOP=1]="TOP",t[t.RIGHT=2]="RIGHT",t[t.BOTTOM=3]="BOTTOM"}(vS||(vS={}));var BS=function(){function t(e,n,r,i){x(this,t),this.x=e,this.y=n,this.width=r,this.height=i}return B(t,[{key:"x2",get:function(){return this.x+this.width}},{key:"y2",get:function(){return this.y+this.height}},{key:"cx",get:function(){return this.x+this.width/2}},{key:"cy",get:function(){return this.y+this.height/2}},{key:"radius",get:function(){return Math.max(this.width,this.height)/2}},{key:"equals",value:function(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height}},{key:"clone",value:function(){return new t(this.x,this.y,this.width,this.height)}},{key:"add",value:function(t){var e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),r=Math.max(this.x2,t.x+t.width),i=Math.max(this.y2,t.y+t.height);this.x=e,this.y=n,this.width=r-e,this.height=i-n}},{key:"addPoint",value:function(t){var e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),r=Math.max(this.x2,t.x),i=Math.max(this.y2,t.y);this.x=e,this.y=n,this.width=r-e,this.height=i-n}},{key:"toString",value:function(){return"Rectangle[x=".concat(this.x,", y=").concat(this.y,", w=").concat(this.width,", h=").concat(this.height,"]")}},{key:"draw",value:function(t){t.rect(this.x,this.y,this.width,this.height)}},{key:"containsPt",value:function(t,e){return t>=this.x&&t<=this.x2&&e>=this.y&&e<=this.y2}},{key:"area",get:function(){return this.width*this.height}},{key:"intersects",value:function(t){return!(this.area<=0||t.width<=0||t.height<=0)&&t.x+t.width>this.x&&t.y+t.height>this.y&&t.x<this.x2&&t.y<this.y2}},{key:"distSquare",value:function(t,e){if(this.containsPt(t,e))return 0;var n=bS(this,t,e);return n.has(vS.TOP)?n.has(vS.LEFT)?AS(t,e,this.x,this.y):n.has(vS.RIGHT)?AS(t,e,this.x2,this.y):(this.y-e)*(this.y-e):n.has(vS.BOTTOM)?n.has(vS.LEFT)?AS(t,e,this.x,this.y2):n.has(vS.RIGHT)?AS(t,e,this.x2,this.y2):(e-this.y2)*(e-this.y2):n.has(vS.LEFT)?(this.x-t)*(this.x-t):n.has(vS.RIGHT)?(t-this.x2)*(t-this.x2):0}}],[{key:"from",value:function(e){return new t(e.x,e.y,e.width,e.height)}}])}(),kS=function(){function t(e,n,r){x(this,t),this.cx=e,this.cy=n,this.radius=r}return B(t,[{key:"x",get:function(){return this.cx-this.radius}},{key:"x2",get:function(){return this.cx+this.radius}},{key:"width",get:function(){return 2*this.radius}},{key:"y",get:function(){return this.cy-this.radius}},{key:"y2",get:function(){return this.cy+this.radius}},{key:"height",get:function(){return 2*this.radius}},{key:"containsPt",value:function(t,e){return AS(this.cx,this.cy,t,e)<this.radius*this.radius}},{key:"distSquare",value:function(t,e){var n=AS(this.cx,this.cy,t,e);if(n<this.radius*this.radius)return 0;var r=Math.sqrt(n)-this.radius;return r*r}},{key:"draw",value:function(t){t.ellipse(this.cx,this.cy,this.radius,this.radius,0,0,2*Math.PI)}}],[{key:"from",value:function(e){return new t(e.cx,e.cy,e.radius)}}])}(),OS=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:10,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:10,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:new Float32Array(Math.max(0,a*s)).fill(0);x(this,t),this.pixelGroup=e,this.i=n,this.j=r,this.pixelX=i,this.pixelY=o,this.width=a,this.height=s,this.area=u}return B(t,[{key:"createSub",value:function(e,n){return new t(this.pixelGroup,e.x,e.y,n.x,n.y,e.width,e.height)}},{key:"copy",value:function(e,n){return new t(this.pixelGroup,this.scaleX(n.x),this.scaleY(n.y),n.x,n.y,e.width,e.height,e.area)}},{key:"boundX",value:function(t){return t<this.i?this.i:t>=this.width?this.width-1:t}},{key:"boundY",value:function(t){return t<this.j?this.j:t>=this.height?this.height-1:t}},{key:"scaleX",value:function(t){return this.boundX(Math.floor((t-this.pixelX)/this.pixelGroup))}},{key:"scaleY",value:function(t){return this.boundY(Math.floor((t-this.pixelY)/this.pixelGroup))}},{key:"scale",value:function(t){var e=this.scaleX(t.x),n=this.scaleY(t.y),r=this.boundX(Math.ceil((t.x+t.width-this.pixelX)/this.pixelGroup)),i=this.boundY(Math.ceil((t.y+t.height-this.pixelY)/this.pixelGroup));return new BS(e,n,r-e,i-n)}},{key:"invertScaleX",value:function(t){return Math.round(t*this.pixelGroup+this.pixelX)}},{key:"invertScaleY",value:function(t){return Math.round(t*this.pixelGroup+this.pixelY)}},{key:"addPadding",value:function(t,e){var n=Math.ceil(e/this.pixelGroup),r=this.boundX(t.x-n),i=this.boundY(t.y-n),o=this.boundX(t.x2+n),a=this.boundY(t.y2+n);return new BS(r,i,o-r,a-i)}},{key:"get",value:function(t,e){return t<0||e<0||t>=this.width||e>=this.height?Number.NaN:this.area[t+e*this.width]}},{key:"inc",value:function(t,e,n){t<0||e<0||t>=this.width||e>=this.height||(this.area[t+e*this.width]+=n)}},{key:"set",value:function(t,e,n){t<0||e<0||t>=this.width||e>=this.height||(this.area[t+e*this.width]=n)}},{key:"incArea",value:function(t,e){if(!(t.width<=0||t.height<=0||0===e)){var n=this.width,r=t.width,i=Math.max(0,t.i),o=Math.max(0,t.j),a=Math.min(t.i+t.width,n),s=Math.min(t.j+t.height,this.height);if(!(s<=0||a<=0||i>=n||s>=this.height))for(var u=o;u<s;u++)for(var c=(u-t.j)*r,l=u*n,A=i;A<a;A++){var f=t.area[A-t.i+c];0!==f&&(this.area[A+l]+=e*f)}}}},{key:"fill",value:function(t){this.area.fill(t)}},{key:"fillArea",value:function(t,e){for(var n=t.x+t.y*this.width,r=0;r<t.height;r++){var i=n+r*this.width;this.area.fill(e,i,i+t.width)}}},{key:"fillHorizontalLine",value:function(t,e,n,r){var i=t+e*this.width;this.area.fill(r,i,i+n)}},{key:"fillVerticalLine",value:function(t,e,n,r){for(var i=t+e*this.width,o=0;o<n;o++)this.area[i+o*this.width]=r}},{key:"clear",value:function(){this.area.fill(0)}},{key:"toString",value:function(){for(var t="",e=0;e<this.height;e++){for(var n=e*this.width,r=0;r<this.width;r++)t+=this.area[n+r].toFixed(1).padStart(6),t+=" ";t+="\n"}return t}},{key:"draw",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!(this.width<=0||this.height<=0)){t.save(),e&&t.translate(this.pixelX,this.pixelY);var n=this.area.reduce(function(t,e){return Math.min(t,e)},Number.POSITIVE_INFINITY),r=this.area.reduce(function(t,e){return Math.max(t,e)},Number.NEGATIVE_INFINITY),i=function(t){return(t-n)/(r-n)};t.scale(this.pixelGroup,this.pixelGroup);for(var o=0;o<this.width;o++)for(var a=0;a<this.height;a++){var s=this.area[o+a*this.width];t.fillStyle="rgba(0, 0, 0, ".concat(i(s),")"),t.fillRect(o,a,1,1)}t.restore()}}},{key:"drawThreshold",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!(this.width<=0||this.height<=0)){t.save(),n&&t.translate(this.pixelX,this.pixelY),t.scale(this.pixelGroup,this.pixelGroup);for(var r=0;r<this.width;r++)for(var i=0;i<this.height;i++){var o=this.area[r+i*this.width];t.fillStyle=o>e?"black":"white",t.fillRect(r,i,1,1)}t.restore()}}}],[{key:"fromPixelRegion",value:function(e,n){return new t(n,0,0,e.x,e.y,Math.ceil(e.width/n),Math.ceil(e.height/n))}}])}();function CS(t,e){var n=function(t){return{x:t.x-e,y:t.y-e,width:t.width+2*e,height:t.height+2*e}};return Array.isArray(t)?t.map(n):n(t)}function MS(t,e,n){return SS(Object.assign(dS(t),{distSquare:function(e,n){return lS(t.x1,t.y1,t.x2,t.y2,e,n)}}),e,n)}function SS(t,e,n){var r=CS(t,n),i=e.scale(r),o=e.createSub(i,r);return function(t,e,n,r){for(var i=n*n,o=0;o<t.height;o++)for(var a=0;a<t.width;a++){var s=r(e.invertScaleX(t.i+a),e.invertScaleY(t.j+o));if(0!==s){if(s<i){var u=n-Math.sqrt(s);t.set(a,o,u*u)}}else t.set(a,o,i)}}(o,e,n,function(e,n){return t.distSquare(e,n)}),o}function FS(t,e){return{x:t,y:e}}function TS(t,e){return e.some(function(e){return e.containsPt(t.x,t.y)})}function PS(t,e){return e.some(function(e){return!!fS(e.x1,e.y1,t.x,t.y,.001)||!!fS(e.x2,e.y2,t.x,t.y,.001)})}function IS(t,e){var n,r=Number.POSITIVE_INFINITY,i=null,o=qn(t);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(wS(a,e)){var s=xS(a,e);s>=0&&s<r&&(i=a,r=s)}}}catch(t){o.e(t)}finally{o.f()}return i}function NS(t,e,n,r){var i=n.top,o=n.left,a=n.bottom,s=n.right;if(r){if(o.state===hS.POINT){if(i.state===hS.POINT)return FS(t.x-e,t.y-e);if(a.state===hS.POINT)return FS(t.x-e,t.y2+e);var u=t.width*t.height;return t.width*(.5*(o.y-t.y+(s.y-t.y)))<.5*u?o.y>s.y?FS(t.x-e,t.y-e):FS(t.x2+e,t.y-e):o.y<s.y?FS(t.x-e,t.y2+e):FS(t.x2+e,t.y2+e)}if(s.state===hS.POINT){if(i.state===hS.POINT)return FS(t.x2+e,t.y-e);if(a.state===hS.POINT)return FS(t.x2+e,t.y2+e)}var c=t.height*t.width;return t.height*(.5*(i.x-t.x+(s.x-t.x)))<.5*c?i.x>a.x?FS(t.x-e,t.y-e):FS(t.x-e,t.y2+e):i.x<a.x?FS(t.x2+e,t.y-e):FS(t.x2+e,t.y2+e)}if(o.state===hS.POINT){if(i.state===hS.POINT)return FS(t.x2+e,t.y2+e);if(a.state===hS.POINT)return FS(t.x2+e,t.y-e);var l=t.height*t.width;return t.width*(.5*(o.y-t.y+(s.y-t.y)))<.5*l?o.y>s.y?FS(t.x2+e,t.y2+e):FS(t.x-e,t.y2+e):o.y<s.y?FS(t.x2+e,t.y-e):FS(t.x-e,t.y-e)}if(s.state===hS.POINT){if(i.state===hS.POINT)return FS(t.x-e,t.y2+e);if(a.state===hS.POINT)return FS(t.x-e,t.y-e)}var A=t.height*t.width;return t.height*(.5*(i.x-t.x+(s.x-t.x)))<.5*A?i.x>a.x?FS(t.x2+e,t.y2+e):FS(t.x2+e,t.y-e):i.x<a.x?FS(t.x-e,t.y2+e):FS(t.x-e,t.y-e)}function LS(t,e,n,r){if(!(t.closed?n<t.length:n<t.length-1))return!1;for(var i=t.get(e),o=t.get(n+1),a=e+1;a<=n;a++){var s=t.get(a);if(lS(i.x,i.y,o.x,o.y,s.x,s.y)>r)return!1}return!0}function _S(t,e){switch(t){case-2:return(((3-e)*e-3)*e+1)/6;case-1:return((3*e-6)*e*e+4)/6;case 0:return(((-3*e+3)*e+3)*e+1)/6;case 1:return e*e*e/6;default:throw new Error("unknown error")}}var QS=function(){return B(function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];x(this,t),this.points=e,this.closed=n},[{key:"get",value:function(t){var e=t,n=this.points.length;return t<0?this.closed?this.get(t+n):this.points[0]:t>=n?this.closed?this.get(t-n):this.points[n-1]:this.points[e]}},{key:"length",get:function(){return this.points.length}},{key:"toString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0,e=this.points;if(0===e.length)return"";var n,r="function"==typeof t?t:function(t){if(!Number.isFinite(t))return function(t){return t};if(0===t)return Math.round;var e=Math.pow(10,t);return function(t){return Math.round(t*e)/e}}(t),i="M",o=qn(e);try{for(o.s();!(n=o.n()).done;){var a=n.value;i+="".concat(r(a.x),",").concat(r(a.y)," L")}}catch(t){o.e(t)}finally{o.f()}return i=i.slice(0,-1),this.closed&&(i+=" Z"),i}},{key:"draw",value:function(t){var e=this.points;if(0!==e.length){t.beginPath(),t.moveTo(e[0].x,e[0].y);var n,r=qn(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;t.lineTo(i.x,i.y)}}catch(t){r.e(t)}finally{r.f()}this.closed&&t.closePath()}}},{key:"sample",value:function(t){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;return function(e){var n=t,r=e.length;if(n>1)for(r=Math.floor(e.length/n);r<3&&n>1;)n-=1,r=Math.floor(e.length/n);for(var i=[],o=0,a=0;a<r;a++,o+=n)i.push(e.get(o));return new QS(i)}}(t)(this)}},{key:"simplify",value:function(t){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(e){if(t<0||e.length<3)return e;for(var n=[],r=0,i=t*t;r<e.length;){for(var o=r+1;LS(e,r,o,i);)o++;n.push(e.get(r)),r=o}return new QS(n)}}(t)(this)}},{key:"bSplines",value:function(t){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6;function e(t,e,n){for(var r=0,i=0,o=-2;o<=1;o++){var a=t.get(e+o),s=_S(o,n);r+=s*a.x,i+=s*a.y}return{x:r,y:i}}return function(n){if(n.length<3)return n;var r=[],i=n.closed,o=n.length+3-1+(i?0:2);r.push(e(n,2-(i?0:2),0));for(var a=2-(i?0:2);a<o;a++)for(var s=1;s<=t;s++)r.push(e(n,a,s/t));return new QS(r)}}(t)(this)}},{key:"apply",value:function(t){return t(this)}},{key:"containsElements",value:function(t){var e=this,n=function(t){if(0===t.length)return null;var e,n=t[0],r=new BS(n.x,n.y,0,0),i=qn(t);try{for(i.s();!(e=i.n()).done;){var o=e.value;r.addPoint(o)}}catch(t){i.e(t)}finally{i.f()}return r}(this.points);return!!n&&t.every(function(t){return n.containsPt(t.cx,t.cy)&&e.withinArea(t.cx,t.cy)})}},{key:"withinArea",value:function(t,e){if(0===this.length)return!1;for(var n=0,r=this.points[0],i=new pS(r.x,r.y,r.x,r.y),o=1;o<this.points.length;o++){var a=this.points[o];i.x1=i.x2,i.y1=i.y2,i.x2=a.x,i.y2=a.y,i.cuts(t,e)&&n++}return i.x1=i.x2,i.y1=i.y2,i.x2=r.x,i.y2=r.y,i.cuts(t,e)&&n++,n%2==1}}])}(),US=function(){return B(function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;x(this,t),this.count=0,this.arr=[],this.set=new Set,this.arr.length=e},[{key:"add",value:function(t){this.set.add("".concat(t.x,"x").concat(t.y)),this.arr[this.count++]=t}},{key:"contains",value:function(t){return this.set.has("".concat(t.x,"x").concat(t.y))}},{key:"isFirst",value:function(t){if(0===this.count)return!1;var e=this.arr[0];return null!=e&&e.x===t.x&&e.y===t.y}},{key:"path",value:function(){return new QS(this.arr.slice(0,this.count))}},{key:"clear",value:function(){this.set.clear(),this.count=0}},{key:"get",value:function(t){return this.arr[t]}},{key:"length",get:function(){return this.count}}])}();function jS(t,e){var n=2*(Math.floor(t.width)+Math.floor(t.height)),r=new US(n);function i(n,r,i,o){var a=t.get(n,r);return Number.isNaN(a)?Number.NaN:a>e?i+o:i}function o(t,e){var n=0;return n=i(t,e,n,1),n=i(t+1,e,n,2),n=i(t,e+1,n,4),n=i(t+1,e+1,n,8),Number.isNaN(n)?-1:n}var a=1;function s(e,n){for(var i=e,s=n,u=t.invertScaleX(i),c=t.invertScaleY(s),l=0;l<t.width*t.height;l++){var A={x:u,y:c};if(r.contains(A)){if(r.isFirst(A))return!0}else r.add(A);var f=o(i,s);switch(f){case-1:return!0;case 0:case 3:case 2:case 7:a=2;break;case 12:case 14:case 4:a=3;break;case 6:a=0===a?3:2;break;case 1:case 13:case 5:a=0;break;case 9:a=2===a?0:1;break;case 10:case 8:case 11:a=1;break;default:return console.warn("Marching squares invalid state: "+f),!0}switch(a){case 0:s--,c-=t.pixelGroup;break;case 1:s++,c+=t.pixelGroup;break;case 3:i--,u-=t.pixelGroup;break;case 2:i++,u+=t.pixelGroup;break;default:return console.warn("Marching squares invalid state: "+f),!0}}return!0}for(var u=0;u<t.width;u++)for(var c=0;c<t.height;c++)if(!(t.get(u,c)<=e)){var l=o(u,c);if(!(l<0||15===l)&&s(u,c))return r.path()}return null}var DS,RS={maxRoutingIterations:100,maxMarchingIterations:20,pixelGroup:4,edgeR0:10,edgeR1:20,nodeR0:15,nodeR1:50,morphBuffer:10,threshold:1,memberInfluenceFactor:1,edgeInfluenceFactor:1,nonMemberInfluenceFactor:-.8,virtualEdges:!0};function HS(t){return null!=t&&"number"==typeof t.radius}function zS(t,e){if(HS(t)!==HS(e))return!1;if(HS(t)){var n=e;return t.cx===n.cx&&t.cy===n.cy&&t.radius===n.radius}var r=e;return t.x===r.x&&t.y===r.y&&t.width===r.width&&t.height===r.height}!function(t){t[t.MEMBERS=0]="MEMBERS",t[t.NON_MEMBERS=1]="NON_MEMBERS",t[t.EDGES=2]="EDGES"}(DS||(DS={}));var KS=function(){return B(function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};x(this,t),this.dirty=new Set,this.members=[],this.nonMembers=[],this.virtualEdges=[],this.edges=[],this.activeRegion=new BS(0,0,0,0),this.potentialArea=new OS(1,0,0,0,0,0,0),this.o=Object.assign({},RS,e)},[{key:"pushMember",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(0!==e.length){this.dirty.add(DS.MEMBERS);for(var r=0,i=e;r<i.length;r++){var o=i[r];this.members.push({raw:o,obj:HS(o)?kS.from(o):BS.from(o),area:null})}}}},{key:"removeMember",value:function(t){var e=this.members.findIndex(function(e){return zS(e.raw,t)});return!(e<0||(this.members.splice(e,1),this.dirty.add(DS.MEMBERS),0))}},{key:"removeNonMember",value:function(t){var e=this.nonMembers.findIndex(function(e){return zS(e.raw,t)});return!(e<0||(this.nonMembers.splice(e,1),this.dirty.add(DS.NON_MEMBERS),0))}},{key:"removeEdge",value:function(t){var e=this.edges.findIndex(function(e){return e.obj.equals(t)});return!(e<0||(this.edges.splice(e,1),this.dirty.add(DS.NON_MEMBERS),0))}},{key:"pushNonMember",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(0!==e.length){this.dirty.add(DS.NON_MEMBERS);for(var r=0,i=e;r<i.length;r++){var o=i[r];this.nonMembers.push({raw:o,obj:HS(o)?kS.from(o):BS.from(o),area:null})}}}},{key:"pushEdge",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(0!==e.length){this.dirty.add(DS.EDGES);for(var r=0,i=e;r<i.length;r++){var o=i[r];this.edges.push({raw:o,obj:pS.from(o),area:null})}}}},{key:"update",value:function(){var t=this,e=this.dirty.has(DS.MEMBERS),n=this.dirty.has(DS.NON_MEMBERS),r=this.dirty.has(DS.EDGES);this.dirty.clear();var i=this.members.map(function(t){return t.obj});if(this.o.virtualEdges&&(e||n)){var o=this.nonMembers.map(function(t){return t.obj}),a=function(t,e,n,r){if(0===t.length)return[];var i=function(t){if(t.length<2)return t;var e=0,n=0;return t.forEach(function(t){e+=t.cx,n+=t.cy}),e/=t.length,n/=t.length,t.map(function(t){var r=e-t.cx,i=n-t.cy;return[t,r*r+i*i]}).sort(function(t,e){return t[1]-e[1]}).map(function(t){return t[0]})}(t);return i.map(function(t,o){var a=i.slice(0,o);return function(t,e,n,r,i){var o=FS(e.cx,e.cy),a=function(t,e,n){var r=Number.POSITIVE_INFINITY;return e.reduce(function(e,i){var o=AS(t.x,t.y,i.cx,i.cy);if(o>r)return e;var a=new pS(t.x,t.y,i.cx,i.cy),s=function(t,e){return t.reduce(function(t,n){return wS(n,e)&&function(t,e){function n(t,n,r,i){var o=mS(e,new pS(t,n,r,i));return(o=Math.abs(o-.5))>=0&&o<=1?1:0}var r=n(t.x,t.y,t.x2,t.y);return(r+=n(t.x,t.y,t.x,t.y2))>1||(r+=n(t.x,t.y2,t.x2,t.y2))>1||(r+=n(t.x2,t.y,t.x2,t.y2))>0}(n,e)?t+1:t},0)}(n,a);return o*(s+1)*(s+1)<r&&(e=i,r=o*(s+1)*(s+1)),e},null)}(o,n,t);if(null==a)return[];var s=function(t,e,n,r){var i=[],o=[];o.push(t);for(var a=!0,s=0;s<n&&a;s++)for(a=!1;!a&&o.length>0;){var u=o.pop(),c=IS(e,u),l=c?ES(u,c):null;if(c&&l&&2===l.count){for(var A=r,f=NS(c,A,l,!0),d=PS(f,o)||PS(f,i),h=TS(f,e);!d&&h&&A>=1;)d=PS(f=NS(c,A/=1.5,l,!0),o)||PS(f,i),h=TS(f,e);if(!f||d||h||(o.push(new pS(u.x1,u.y1,f.x,f.y)),o.push(new pS(f.x,f.y,u.x2,u.y2)),a=!0),!a){var p=PS(f=NS(c,A=r,l,!1),o)||PS(f,i);for(h=TS(f,e);!p&&h&&A>=1;)p=PS(f=NS(c,A/=1.5,l,!1),o)||PS(f,i),h=TS(f,e);f&&!p&&(o.push(new pS(u.x1,u.y1,f.x,f.y)),o.push(new pS(f.x,f.y,u.x2,u.y2)),a=!0),a||i.push(u)}}else a||i.push(u)}for(;o.length>0;)i.push(o.pop());return i}(new pS(o.x,o.y,a.cx,a.cy),t,r,i);return function(t,e){for(var n=[];t.length>0;){var r=t.pop();if(0===t.length){n.push(r);break}var i=t.pop(),o=new pS(r.x1,r.y1,i.x2,i.y2);IS(e,o)?(n.push(r),t.push(i)):t.push(o)}return n}(s,t)}(e,t,a,n,r)}).flat()}(i,o,this.o.maxRoutingIterations,this.o.morphBuffer),s=new Map(this.virtualEdges.map(function(t){return[t.obj.toString(),t.area]}));this.virtualEdges=a.map(function(t){var e;return{raw:t,obj:t,area:null!==(e=s.get(t.toString()))&&void 0!==e?e:null}}),r=!0}var u=!1;if(e||r){var c=function(t,e){if(0===t.length)return new BS(0,0,0,0);var n,r=BS.from(t[0]),i=qn(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;r.add(o)}}catch(t){i.e(t)}finally{i.f()}var a,s=qn(e);try{for(s.s();!(a=s.n()).done;){var u=a.value;r.add(dS(u))}}catch(t){s.e(t)}finally{s.f()}return r}(i,this.virtualEdges.concat(this.edges).map(function(t){return t.obj})),l=Math.max(this.o.edgeR1,this.o.nodeR1)+this.o.morphBuffer,A=BS.from(CS(c,l));A.equals(this.activeRegion)||(u=!0,this.activeRegion=A)}if(u){var f=Math.ceil(this.activeRegion.width/this.o.pixelGroup),d=Math.ceil(this.activeRegion.height/this.o.pixelGroup);this.activeRegion.x!==this.potentialArea.pixelX||this.activeRegion.y!==this.potentialArea.pixelY?(this.potentialArea=OS.fromPixelRegion(this.activeRegion,this.o.pixelGroup),this.members.forEach(function(t){return t.area=null}),this.nonMembers.forEach(function(t){return t.area=null}),this.edges.forEach(function(t){return t.area=null}),this.virtualEdges.forEach(function(t){return t.area=null})):f===this.potentialArea.width&&d===this.potentialArea.height||(this.potentialArea=OS.fromPixelRegion(this.activeRegion,this.o.pixelGroup))}var h=new Map,p=function(t){if(t.area){var e="".concat(t.obj.width,"x").concat(t.obj.height,"x").concat(t.obj instanceof BS?"R":"C");h.set(e,t.area)}},v=function(e){if(!e.area){var n="".concat(e.obj.width,"x").concat(e.obj.height,"x").concat(e.obj instanceof BS?"R":"C");if(h.has(n)){var r=h.get(n);e.area=t.potentialArea.copy(r,{x:e.obj.x-t.o.nodeR1,y:e.obj.y-t.o.nodeR1})}else{var i=e.obj instanceof BS?function(t,e,n){var r=e.scale(t),i=e.addPadding(r,n),o=e.createSub(i,{x:t.x-n,y:t.y-n}),a=r.x-i.x,s=r.y-i.y,u=i.x2-r.x2,c=i.y2-r.y2,l=i.width-a-u,A=i.height-s-c,f=n*n;o.fillArea({x:a,y:s,width:l+1,height:A+1},f);for(var d=[0],h=Math.max(s,a,u,c),p=e.invertScaleX(r.x+r.width/2),v=1;v<h;v++){var g=e.invertScaleY(r.y-v),y=t.distSquare(p,g);if(!(y<f))break;var m=n-Math.sqrt(y);d.push(m*m)}for(var b=[],w=Math.max(a,u),x=Math.max(s,u),E=1;E<w;E++){for(var B=e.invertScaleX(r.x-E),k=[],O=1;O<x;O++){var C=e.invertScaleY(r.y-O),M=t.distSquare(B,C);if(M<f){var S=n-Math.sqrt(M);k.push(S*S)}else k.push(0)}b.push(k)}for(var F=1;F<Math.min(s,d.length);F++){var T=d[F];o.fillHorizontalLine(a,s-F,l+1,T)}for(var P=1;P<Math.min(c,d.length);P++){var I=d[P];o.fillHorizontalLine(a,s+A+P,l+1,I)}for(var N=1;N<Math.min(a,d.length);N++){var L=d[N];o.fillVerticalLine(a-N,s,A+1,L)}for(var _=1;_<Math.min(c,d.length);_++){var Q=d[_];o.fillVerticalLine(a+l+_,s,A+1,Q)}for(var U=1;U<a;U++){for(var j=b[U-1],D=a-U,R=1;R<s;R++)o.set(D,s-R,j[R-1]);for(var H=1;H<c;H++)o.set(D,s+A+H,j[H-1])}for(var z=1;z<u;z++){for(var K=b[z-1],G=a+l+z,V=1;V<s;V++)o.set(G,s-V,K[V-1]);for(var W=1;W<c;W++)o.set(G,s+A+W,K[W-1])}return o}(e.obj,t.potentialArea,t.o.nodeR1):SS(e.obj,t.potentialArea,t.o.nodeR1);e.area=i,h.set(n,i)}}};this.members.forEach(p),this.nonMembers.forEach(p),this.members.forEach(v),this.nonMembers.forEach(function(e){t.activeRegion.intersects(e.obj)?v(e):e.area=null}),this.edges.forEach(function(e){e.area||(e.area=MS(e.obj,t.potentialArea,t.o.edgeR1))}),this.virtualEdges.forEach(function(e){e.area||(e.area=MS(e.obj,t.potentialArea,t.o.edgeR1))})}},{key:"drawMembers",value:function(t){var e,n=qn(this.members);try{for(n.s();!(e=n.n()).done;)e.value.obj.draw(t)}catch(t){n.e(t)}finally{n.f()}}},{key:"drawNonMembers",value:function(t){var e,n=qn(this.nonMembers);try{for(n.s();!(e=n.n()).done;)e.value.obj.draw(t)}catch(t){n.e(t)}finally{n.f()}}},{key:"drawEdges",value:function(t){var e,n=qn(this.edges);try{for(n.s();!(e=n.n()).done;)e.value.obj.draw(t)}catch(t){n.e(t)}finally{n.f()}}},{key:"drawPotentialArea",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.potentialArea.draw(t,e)}},{key:"compute",value:function(){if(0===this.members.length)return new QS([]);this.dirty.size>0&&this.update();var t=this.o,e=this.potentialArea,n=this.members.map(function(t){return t.area}),r=this.virtualEdges.concat(this.edges).map(function(t){return t.area}),i=this.nonMembers.filter(function(t){return null!=t.area}).map(function(t){return t.area}),o=this.members.map(function(t){return t.obj});return function(t,e,n,r,i){for(var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=Object.assign({},RS,o),s=a.threshold,u=a.memberInfluenceFactor,c=a.edgeInfluenceFactor,l=a.nonMemberInfluenceFactor,A=(a.nodeR0-a.nodeR1)*(a.nodeR0-a.nodeR1),f=(a.edgeR0-a.edgeR1)*(a.edgeR0-a.edgeR1),d=0;d<a.maxMarchingIterations;d++){if(t.clear(),0!==u){var h,p=u/A,v=qn(e);try{for(v.s();!(h=v.n()).done;){var g=h.value;t.incArea(g,p)}}catch(t){v.e(t)}finally{v.f()}}if(0!==c){var y,m=c/f,b=qn(n);try{for(b.s();!(y=b.n()).done;){var w=y.value;t.incArea(w,m)}}catch(t){b.e(t)}finally{b.f()}}if(0!==l){var x,E=l/A,B=qn(r);try{for(B.s();!(x=B.n()).done;){var k=x.value;t.incArea(k,E)}}catch(t){B.e(t)}finally{B.f()}}var O=jS(t,s);if(O&&i(O))return O;if(s*=.95,d<=.5*a.maxMarchingIterations)u*=1.2,c*=1.2;else{if(!(0!==l&&r.length>0))break;l*=.8}}return new QS([])}(e,n,r,i,function(t){return t.containsElements(o)},t)}}])}(),GS=function(t){function e(t,n){var r;return x(this,e),(r=F(this,e,[t,Xm({},e.defaultOptions,n)])).members=new Map,r.avoidMembers=new Map,r.bubbleSetOptions={},r.drawBubbleSets=function(){var t=r.parseOptions(),e=t.style,n=t.bubbleSetOptions;Xg(r.bubbleSetOptions,n)||r.init(),r.bubbleSetOptions=Object.assign({},n);var i=Object.assign(Object.assign({},e),{d:r.getPath()});r.shape?r.shape.update(i):(r.shape=new gw({style:i}),r.context.canvas.appendChild(r.shape))},r.updateBubbleSetsPath=function(t){if(r.shape){var e=Sm(t.data);[].concat(O(r.options.members),O(r.options.avoidMembers)).includes(e)&&r.shape.update(Object.assign(Object.assign({},r.parseOptions().style),{d:r.getPath(e)}))}},r.getPath=function(t){var e=r.context.graph,n=r.options.members,i=O(r.members.keys()),o=r.options.avoidMembers,a=O(r.avoidMembers.keys());if(!t&&Xg(n,i)&&Xg(o,a))return r.path;var s=Dm(i,n,function(t){return t}),u=s.enter,c=void 0===u?[]:u,l=s.exit,A=void 0===l?[]:l,f=Dm(a,o,function(t){return t}),d=f.enter,h=void 0===d?[]:d,p=f.exit,g=void 0===p?[]:p;t&&(A.push(t),c.push(t));var y=function(t,n,i){t.forEach(function(t){var o=i?r.members:r.avoidMembers,a=i?"pushMember":"pushNonMember",s=i?"removeMember":"removeNonMember";if(n){var u;"edge"===e.getElementType(t)?(u=v(WS(e,t),1)[0],r.bubbleSets.pushEdge(u)):(u=v(VS(e,t),1)[0],r.bubbleSets[a](u)),o.set(t,u)}else{var c=o.get(t);c&&("edge"===e.getElementType(t)?r.bubbleSets.removeEdge(c):r.bubbleSets[s](c),o.delete(t))}})};y(A,!1,!0),y(c,!0,!0),y(g,!1,!1),y(h,!0,!1);var m=r.bubbleSets.compute().sample(8).simplify(0).bSplines().simplify(0);return r.path=vw(m.points.map(yb)),r.path},r.bindEvents(),r.bubbleSets=new KS(r.options),r}return P(e,t),B(e,[{key:"bindEvents",value:function(){this.context.graph.on(ry.AFTER_RENDER,this.drawBubbleSets),this.context.graph.on(ry.AFTER_ELEMENT_UPDATE,this.updateBubbleSetsPath)}},{key:"init",value:function(){this.bubbleSets=new KS(this.options),this.members=new Map,this.avoidMembers=new Map}},{key:"parseOptions",value:function(){var t=this.options,e=t.type,n=t.key,r=t.members,i=t.avoidMembers,o=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["type","key","members","avoidMembers"]),a=Object.keys(o).reduce(function(t,e){return e in RS?t.bubbleSetOptions[e]=o[e]:t.style[e]=o[e],t},{style:{},bubbleSetOptions:{}});return Object.assign({type:e,key:n,members:r,avoidMembers:i},a)}},{key:"addMember",value:function(t){var e=this,n=Array.isArray(t)?t:[t];n.some(function(t){return e.options.avoidMembers.includes(t)})&&(this.options.avoidMembers=this.options.avoidMembers.filter(function(t){return!n.includes(t)})),this.options.members=O(new Set([].concat(O(this.options.members),O(n)))),this.drawBubbleSets()}},{key:"removeMember",value:function(t){var e=Array.isArray(t)?t:[t];this.options.members=this.options.members.filter(function(t){return!e.includes(t)}),this.drawBubbleSets()}},{key:"updateMember",value:function(t){this.options.members=mn(t)?t(this.options.members):t,this.drawBubbleSets()}},{key:"getMember",value:function(){return this.options.members}},{key:"addAvoidMember",value:function(t){var e=this,n=Array.isArray(t)?t:[t];n.some(function(t){return e.options.members.includes(t)})&&(this.options.members=this.options.members.filter(function(t){return!n.includes(t)})),this.options.avoidMembers=O(new Set([].concat(O(this.options.avoidMembers),O(n)))),this.drawBubbleSets()}},{key:"removeAvoidMember",value:function(t){var e=Array.isArray(t)?t:[t];this.options.avoidMembers.some(function(t){return e.includes(t)})&&(this.options.avoidMembers=this.options.avoidMembers.filter(function(t){return!e.includes(t)}),this.drawBubbleSets())}},{key:"updateAvoidMember",value:function(t){this.options.avoidMembers=Array.isArray(t)?t:[t],this.drawBubbleSets()}},{key:"getAvoidMember",value:function(){return this.options.avoidMembers}},{key:"destroy",value:function(){this.context.graph.off(ry.AFTER_RENDER,this.drawBubbleSets),this.context.graph.off(ry.AFTER_ELEMENT_UPDATE,this.updateBubbleSetsPath),this.shape.destroy(),xn(e,"destroy",this,3)([])}}])}(aS);GS.defaultOptions=Object.assign({members:[],avoidMembers:[],fill:"lightblue",fillOpacity:.2,stroke:"blue",strokeOpacity:.2},RS);var VS=function(t,e){return(Array.isArray(e)?e:[e]).map(function(e){var n=t.getElementRenderBounds(e);return new BS(n.min[0],n.min[1],Dy(n),Ry(n))})},WS=function(t,e){return(Array.isArray(e)?e:[e]).map(function(e){var n=t.getEdgeData(e),r=t.getElementPosition(n.source),i=t.getElementPosition(n.target);return pS.from({x1:r[0],y1:r[1],x2:i[0],y2:i[1]})})},YS=function(t){function e(t,n){var r;return x(this,e),(r=F(this,e,[t,n])).setOptions=function(t){Object.entries({cameraType:"setType",near:"setNear",far:"setFar",fov:"setFov",aspect:"setAspect",projectionMode:"setProjectionMode",distance:"setDistance",minDistance:"setMinDistance",maxDistance:"setMaxDistance",roll:"setRoll",elevation:"setElevation",azimuth:"setAzimuth"}).forEach(function(e){var n=v(e,2),i=n[0],o=n[1],a=t[i];if(void 0!==a){var s=function(t,e){switch(t){case"projectionMode":return"perspective"===e?1:0;case"cameraType":return{orbiting:0,exploring:1,tracking:2}[e];case"aspect":return"number"==typeof e?e:r.getCanvasAspect();default:return e}}(i,a);r.context.canvas.getCamera()[o](s)}})},r.bindEvents(),r}return P(e,t),B(e,[{key:"update",value:function(t){this.setOptions(t),xn(e,"update",this,3)([t])}},{key:"bindEvents",value:function(){var t=this;this.context.graph.once(ry.BEFORE_DRAW,function(){return t.setOptions(t.options)})}},{key:"getCanvasAspect",value:function(){var t=v(this.context.viewport.getCanvasSize(),2);return t[0]/t[1]}}])}(aS);function XS(t){return'\n    <ul class="g6-contextmenu-ul">\n      '.concat(t.map(function(t){return'<li  class="g6-contextmenu-li" value="'.concat(t.value,'">').concat(t.name,"</li>")}).join(""),"\n    </ul>\n  ")}var qS=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())})},ZS=function(t){function e(t,n){var r;return x(this,e),(r=F(this,e,[t,Object.assign({},e.defaultOptions,n)])).targetElement=null,r.onTriggerEvent=function(t){var e;null===(e=t.preventDefault)||void 0===e||e.call(t),r.show(t)},r.onMenuItemClick=function(t){var e=r.options,n=e.onClick,i=e.trigger;if(t.target instanceof HTMLElement&&t.target.className.includes("g6-contextmenu-li")){var o=t.target.getAttribute("value");null==n||n(o,t.target,r.targetElement),r.hide()}"click"!==i&&r.hide()},r.initElement(),r.update(n),r}return P(e,t),B(e,[{key:"initElement",value:function(){this.$element=sS("contextmenu",!1,{zIndex:"99"});var t=this.options.className;t&&this.$element.classList.add(t),this.context.canvas.getContainer().appendChild(this.$element),uS("g6-contextmenu-css","style",{},"\n  .g6-contextmenu {\n    font-size: 12px;\n    background-color: rgba(255, 255, 255, 0.96);\n    border-radius: 4px;\n    overflow: hidden;\n    box-shadow: rgba(0, 0, 0, 0.12) 0px 6px 12px 0px;\n    transition: visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1) 0s, left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s;\n  }\n\n  .g6-contextmenu-ul {\n    max-width: 256px;\n    min-width: 96px;\n    list-style: none;\n    padding: 0;\n    margin: 0;\n  }\n\n  .g6-contextmenu-li {\n    padding: 8px 12px;\n    cursor: pointer;\n    user-select: none;\n  }\n\n  .g6-contextmenu-li:hover {\n    background-color: #f5f5f5;\n    cursor: pointer;\n  }\n",document.head)}},{key:"show",value:function(t){return qS(this,void 0,void 0,(0,Dn.A)().m(function e(){var n,r,i,o,a;return(0,Dn.A)().w(function(e){for(;;)switch(e.n){case 0:if(n=this.options,r=n.enable,i=n.offset,("function"!=typeof r||r(t))&&r){e.n=1;break}return this.hide(),e.a(2);case 1:return e.n=2,this.getDOMContent(t);case 2:(o=e.v)instanceof HTMLElement?(this.$element.innerHTML="",this.$element.appendChild(o)):this.$element.innerHTML=o,a=this.context.graph.getCanvas().getContainer().getBoundingClientRect(),this.$element.style.left="".concat(t.client.x-a.left+i[0],"px"),this.$element.style.top="".concat(t.client.y-a.top+i[1],"px"),this.$element.style.display="block",this.targetElement=t.target;case 3:return e.a(2)}},e,this)}))}},{key:"hide",value:function(){this.$element.style.display="none",this.targetElement=null}},{key:"update",value:function(t){this.unbindEvents(),xn(e,"update",this,3)([t]),this.bindEvents()}},{key:"destroy",value:function(){this.unbindEvents(),xn(e,"destroy",this,3)([]),this.$element.remove()}},{key:"getDOMContent",value:function(t){return qS(this,void 0,void 0,(0,Dn.A)().m(function e(){var n,r,i,o;return(0,Dn.A)().w(function(e){for(;;)switch(e.n){case 0:if(n=this.options,r=n.getContent,!(i=n.getItems)){e.n=2;break}return o=XS,e.n=1,i(t);case 1:return e.a(2,o(e.v));case 2:return e.n=3,r(t);case 3:return e.a(2,e.v)}},e,this)}))}},{key:"bindEvents",value:function(){var t=this.context.graph,e=this.options.trigger;t.on("canvas:".concat(e),this.onTriggerEvent),t.on("node:".concat(e),this.onTriggerEvent),t.on("edge:".concat(e),this.onTriggerEvent),t.on("combo:".concat(e),this.onTriggerEvent),document.addEventListener("click",this.onMenuItemClick)}},{key:"unbindEvents",value:function(){var t=this.context.graph,e=this.options.trigger;t.off("canvas:".concat(e),this.onTriggerEvent),t.off("node:".concat(e),this.onTriggerEvent),t.off("edge:".concat(e),this.onTriggerEvent),t.off("combo:".concat(e),this.onTriggerEvent),document.removeEventListener("click",this.onMenuItemClick)}}])}(aS);ZS.defaultOptions={trigger:"contextmenu",offset:[4,4],loadingContent:'<div class="g6-contextmenu-loading">Loading...</div>',getContent:function(){return"It is a empty context menu."},enable:function(){return!0}};var JS=function(t){function e(t,n){var r;return x(this,e),(r=F(this,e,[t,Object.assign({},e.defaultOptions,n)])).edgeBundles={},r.edgePoints={},r.onBundle=function(){var t=r.context,e=t.model,n=t.element,i=e.getEdgeData();r.divideEdges(r.options.divisions);for(var o=r.options,a=o.cycles,s=o.iterRate,u=o.divRate,c=r.options,l=c.lambda,A=c.divisions,f=c.iterations,d=0;d<a;d++){for(var h=function(){var t={};i.forEach(function(e){var n;if(e.source!==e.target){var i=Sm(e);t[i]=r.getEdgeForces(e,A,l);for(var o=0;o<A+1;o++)(n=r.edgePoints)[i]||(n[i]=[]),r.edgePoints[i][o]=Zm(r.edgePoints[i][o],t[i][o])}})},p=0;p<f;p++)h();l/=2,A*=u,f*=s,r.divideEdges(A)}i.forEach(function(t){var e=Sm(t),i=n.getElement(e);null==i||i.update({d:dE(r.edgePoints[e])})})},r.bindEvents(),r}return P(e,t),B(e,[{key:"nodeMap",get:function(){var t=this.context.model.getNodeData();return Object.fromEntries(t.map(function(t){return[Sm(t),ub(pb(t))]}))}},{key:"divideEdges",value:function(t){var e=this;this.context.model.getEdgeData().forEach(function(n){var r,i=Sm(n);(r=e.edgePoints)[i]||(r[i]=[]);var o=e.nodeMap[n.source],a=e.nodeMap[n.target];if(1===t)e.edgePoints[i].push(o),e.edgePoints[i].push(tb(Zm(o,a),2)),e.edgePoints[i].push(a);else{for(var s=(0===e.edgePoints[i].length?nb(o,a):oF(e.edgePoints[i]))/(t+1),u=s,c=[o],l=1;l<e.edgePoints[i].length;l++){for(var A=e.edgePoints[i][l-1],f=e.edgePoints[i][l],d=nb(f,A);d>u;){var h=u/d,p=Zm(A,$m(Jm(f,A),h));c.push(p),d-=u,u=s}u-=d}c.push(a),e.edgePoints[i]=c}})}},{key:"getVectorPosition",value:function(t){var e=this.nodeMap[t.source],n=this.nodeMap[t.target],r=v(Jm(n,e),2);return{source:e,target:n,vx:r[0],vy:r[1],length:nb(e,n)}}},{key:"measureEdgeCompatibility",value:function(t,e){var n=this.getVectorPosition(t),r=this.getVectorPosition(e);return $S(n,r)*tF(n,r)*eF(n,r)*iF(n,r)}},{key:"getEdgeBundles",value:function(){var t=this,e={},n=this.options.bundleThreshold,r=this.context.model.getEdgeData();return r.forEach(function(i,o){r.forEach(function(r,a){var s,u;a<=o||t.measureEdgeCompatibility(i,r)>=n&&(e[s=Sm(i)]||(e[s]=[]),e[Sm(i)].push(r),e[u=Sm(r)]||(e[u]=[]),e[Sm(r)].push(i))})}),e}},{key:"getSpringForce",value:function(t,e){var n=t.pre,r=t.cur;return $m(Jm(Zm(n,t.next),$m(r,2)),e)}},{key:"getElectrostaticForce",value:function(t,e){var n=this;uw(this.edgeBundles)&&(this.edgeBundles=this.getEdgeBundles());var r=this.edgeBundles[Sm(e)],i=[0,0];return null==r||r.forEach(function(r){var o=n.edgePoints[Sm(r)][t],a=n.edgePoints[Sm(e)][t],s=Jm(o,a),u=nb(o,a);i=Zm(i,$m(s,1/u))}),i}},{key:"getEdgeForces",value:function(t,e,n){for(var r=this.nodeMap[t.source],i=this.nodeMap[t.target],o=this.options.K/(nb(r,i)*(e+1)),a=[[0,0]],s=Sm(t),u=1;u<e;u++){var c=this.getSpringForce({pre:this.edgePoints[s][u-1],cur:this.edgePoints[s][u],next:this.edgePoints[s][u+1]||[0,0]},o),l=this.getElectrostaticForce(u,t);a.push($m(Zm(c,l),n))}return a.push([0,0]),a}},{key:"bindEvents",value:function(){this.context.graph.on(ry.AFTER_RENDER,this.onBundle)}},{key:"unbindEvents",value:function(){this.context.graph.off(ry.AFTER_RENDER,this.onBundle)}},{key:"destroy",value:function(){this.unbindEvents(),xn(e,"destroy",this,3)([])}}])}(aS);JS.defaultOptions={K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:2/3,bundleThreshold:.6};var $S=function(t,e){return Math.abs((n=[t.vx,t.vy],r=[e.vx,e.vy],n.reduce(function(t,e,n){return t+e*r[n]},0)/(t.length*e.length)));var n,r},tF=function(t,e){var n=(t.length+e.length)/2;return 2/(n/Math.min(t.length,e.length)+Math.max(t.length,e.length)/n)},eF=function(t,e){var n=(t.length+e.length)/2;return n/(n+nb(tb(Zm(t.source,t.target),2),tb(Zm(e.source,e.target),2)))},nF=function(t,e){if(e.source[0]===e.target[0])return[e.source[0],t[1]];if(e.source[1]===e.target[1])return[t[0],e.source[1]];var n=(e.source[1]-e.target[1])/(e.source[0]-e.target[0]),r=(n*n*e.source[0]+n*(t[1]-e.source[1])+t[0])/(n*n+1);return[r,n*(r-e.source[0])+e.source[1]]},rF=function(t,e){var n=nF(e.source,t),r=nF(e.target,t),i=tb(Zm(n,r),2),o=tb(Zm(t.source,t.target),2);return 0===nb(n,r)?0:Math.max(0,1-2*nb(o,i)/nb(n,r))},iF=function(t,e){return Math.min(rF(t,e),rF(e,t))},oF=function(t){for(var e=0,n=1;n<t.length;n++)e+=nb(t[n],t[n-1]);return e},aF={fill:"#fff",fillOpacity:1,lineWidth:1,stroke:"#000",strokeOpacity:.8,zIndex:-1/0},sF=function(t){function e(t,n){var r;return x(this,e),(r=F(this,e,[t,Object.assign({},e.defaultOptions,n)])).shapes=new Map,r.r=r.options.r,r.onEdgeFilter=function(t){if("drag"!==r.options.trigger||!r.isLensOn){var e=yb(t.canvas);r.renderLens(e),r.renderFocusElements()}},r.renderLens=function(t){var e=Object.assign({},aF,r.options.style);r.isLensOn||(r.lens=new Cw({style:e}),r.canvas.appendChild(r.lens)),Object.assign(e,mb(t),{size:2*r.r}),r.lens.update(e)},r.getFilterData=function(){var t=r.options.filter,e=r.context.model.getData();if(!t)return e;var n=e.nodes,i=e.edges,o=e.combos;return{nodes:n.filter(function(e){return t(Sm(e),"node")}),edges:i.filter(function(e){return t(Sm(e),"edge")}),combos:o.filter(function(e){return t(Sm(e),"combo")})}},r.getFocusElements=function(t){var e=r.getFilterData(),n=e.nodes,i=e.edges,o=n.filter(function(e){return nb(pb(e),t)<r.r}),a=o.map(function(t){return Sm(t)});return{nodes:o,edges:i.filter(function(t){var e=t.source,n=t.target,i=a.includes(e),o=a.includes(n);switch(r.options.nodeType){case"both":return i&&o;case"either":return i!==o;case"source":return i&&!o;case"target":return!i&&o;default:return!1}})}},r.renderFocusElements=function(){var t=r.context,e=t.element,n=t.graph;if(r.isLensOn){var i=r.lens.getCenter(),o=r.getFocusElements(i),a=o.nodes,s=o.edges,u=new Set,c=function(t){var i=Sm(t);u.add(i);var o=e.getElement(i);if(o){var a=r.shapes.get(i)||o.cloneNode();a.setPosition(o.getPosition()),a.id=o.id,r.shapes.has(i)?Object.entries(o.attributes).forEach(function(t){var e=v(t,2),n=e[0],r=e[1];a.style[n]!==r&&(a.style[n]=r)}):(r.canvas.appendChild(a),r.shapes.set(i,a));var s=n.getElementType(i),c=r.getElementStyle(s,t);a.update(c)}};a.forEach(c),s.forEach(c),r.shapes.forEach(function(t,e){u.has(e)||(t.destroy(),r.shapes.delete(e))})}},r.scaleRByWheel=function(t){var e;r.options.preventDefault&&t.preventDefault();var n=t.clientX,i=t.clientY,o=t.deltaX,a=t.deltaY,s=r.context,u=s.graph,c=s.canvas,l=u.getCanvasByClient([n,i]),A=null===(e=r.lens)||void 0===e?void 0:e.getCenter();if(r.isLensOn&&!(nb(l,A)>r.r)){var f=r.options,d=f.maxR,h=f.minR,p=o+a>0?1/.95:.95,v=Math.min.apply(Math,O(c.getSize()))/2;r.r=Math.max(h||0,Math.min(d||v,r.r*p)),r.renderLens(A),r.renderFocusElements()}},r.isLensDragging=!1,r.onDragStart=function(t){var e,n=yb(t.canvas),i=null===(e=r.lens)||void 0===e?void 0:e.getCenter();!r.isLensOn||nb(n,i)>r.r||(r.isLensDragging=!0)},r.onDrag=function(t){if(r.isLensDragging){var e=yb(t.canvas);r.renderLens(e),r.renderFocusElements()}},r.onDragEnd=function(){r.isLensDragging=!1},r.bindEvents(),r}return P(e,t),B(e,[{key:"canvas",get:function(){return this.context.canvas.getLayer("transient")}},{key:"isLensOn",get:function(){return this.lens&&!this.lens.destroyed}},{key:"getElementStyle",value:function(t,e){var n="node"===t?this.options.nodeStyle:this.options.edgeStyle;return"function"==typeof n?n(e):n}},{key:"graphDom",get:function(){return this.context.graph.getCanvas().getContextService().getDomElement()}},{key:"bindEvents",value:function(){var t,e=this.context.graph,n=this.options,r=n.trigger,i=n.scaleRBy,o=e.getCanvas().getLayer();["click","drag"].includes(r)&&o.addEventListener(ty.CLICK,this.onEdgeFilter),"pointermove"===r?o.addEventListener(ty.POINTER_MOVE,this.onEdgeFilter):"drag"===r&&(o.addEventListener(ty.DRAG_START,this.onDragStart),o.addEventListener(ty.DRAG,this.onDrag),o.addEventListener(ty.DRAG_END,this.onDragEnd)),"wheel"===i&&(null===(t=this.graphDom)||void 0===t||t.addEventListener(ty.WHEEL,this.scaleRByWheel,{passive:!1}))}},{key:"unbindEvents",value:function(){var t,e=this.context.graph,n=this.options,r=n.trigger,i=n.scaleRBy,o=e.getCanvas().getLayer();["click","drag"].includes(r)&&o.removeEventListener(ty.CLICK,this.onEdgeFilter),"pointermove"===r?o.removeEventListener(ty.POINTER_MOVE,this.onEdgeFilter):"drag"===r&&(o.removeEventListener(ty.DRAG_START,this.onDragStart),o.removeEventListener(ty.DRAG,this.onDrag),o.removeEventListener(ty.DRAG_END,this.onDragEnd)),"wheel"===i&&(null===(t=this.graphDom)||void 0===t||t.removeEventListener(ty.WHEEL,this.scaleRByWheel))}},{key:"update",value:function(t){var n;this.unbindEvents(),xn(e,"update",this,3)([t]),this.r=null!==(n=t.r)&&void 0!==n?n:this.r,this.bindEvents()}},{key:"destroy",value:function(){var t=this;this.unbindEvents(),this.isLensOn&&this.lens.destroy(),this.shapes.forEach(function(e,n){e.destroy(),t.shapes.delete(n)}),xn(e,"destroy",this,3)([])}}])}(aS);sF.defaultOptions={trigger:"pointermove",r:60,nodeType:"both",filter:function(){return!0},style:{lineWidth:2},nodeStyle:{label:!1},edgeStyle:{label:!0},scaleRBy:"wheel",preventDefault:!0};var uF={fill:"#ccc",fillOpacity:.1,lineWidth:2,stroke:"#000",strokeOpacity:.8,labelFontSize:12},cF=function(t){function e(t,n){var r;return x(this,e),(r=F(this,e,[t,Object.assign({},e.defaultOptions,n)])).r=r.options.r,r.d=r.options.d,r.onCreateFisheye=function(t){if("drag"!==r.options.trigger||!r.isLensOn){var e=yb(t.canvas);r.onMagnify(e)}},r.onMagnify=function(t){t.some(isNaN)||(r.renderLens(t),r.renderFocusElements())},r.renderLens=function(t){var e=Object.assign({},uF,r.options.style);r.isLensOn||(r.lens=new Cw({style:e}),r.canvas.appendChild(r.lens)),Object.assign(e,mb(t),{size:2*r.r,label:r.options.showDPercent,labelText:r.getDPercent()}),r.lens.update(e)},r.getDPercent=function(){var t=r.options,e=t.minD,n=t.maxD,i=Math.round((r.d-e)/(n-e)*100);return"".concat(i,"%")},r.prevMagnifiedStyleMap=new Map,r.prevOriginStyleMap=new Map,r.renderFocusElements=function(){if(r.isLensOn){var t=r.context.graph,e=r.lens.getCenter(),n=(r.d+1)*r.r,i=new Map,o=new Map;t.getNodeData().forEach(function(a){var s=pb(a),u=nb(s,e);if(!(u>r.r)){var c=n*u/(r.d*u+r.r),l=v(s,2),A=l[0],f=l[1],d=v(e,2),h=d[0],p=d[1],g=[h+c*((A-h)/u),p+c*((f-p)/u)],y=Sm(a),m=r.getNodeStyle(a),b=Ux(t.getElementRenderStyle(y),Object.keys(m));i.set(y,Object.assign(Object.assign({},mb(g)),m)),o.set(y,Object.assign(Object.assign({},mb(s)),b))}}),r.updateStyle(i,o)}},r.getNodeStyle=function(t){var e=r.options.nodeStyle;return"function"==typeof e?e(t):e},r.updateStyle=function(t,e){var n=r.context,i=n.graph,o=n.element,a=Dm(Array.from(r.prevMagnifiedStyleMap.keys()),Array.from(t.keys()),function(t){return t}),s=a.enter,u=a.exit,c=a.keep,l=new Set,A=function(t,e){var n=o.getElement(t);null==n||n.update(e),i.getRelatedEdgesData(t).forEach(function(t){l.add(Sm(t))})};[].concat(O(s),O(c)).forEach(function(e){A(e,t.get(e))}),u.forEach(function(t){A(t,r.prevOriginStyleMap.get(t)),r.prevOriginStyleMap.delete(t)}),l.forEach(function(t){var e=o.getElement(t);null==e||e.update({})}),r.prevMagnifiedStyleMap=t,e.forEach(function(t,e){r.prevOriginStyleMap.has(e)||r.prevOriginStyleMap.set(e,t)})},r.isWheelValid=function(t){if(r.options.preventDefault&&t.preventDefault(),!r.isLensOn)return!1;var e=t.clientX,n=t.clientY;return!(nb(r.context.graph.getCanvasByClient([e,n]),r.lens.getCenter())>r.r)},r.scaleR=function(t){var e=r.options,n=e.maxR,i=e.minR,o=t?1/.95:.95,a=Math.min.apply(Math,O(r.context.canvas.getSize()))/2;r.r=Math.max(i||0,Math.min(n||a,r.r*o))},r.scaleD=function(t){var e=r.options,n=e.maxD,i=e.minD,o=t?r.d+.1:r.d-.1;r.d=Math.max(i,Math.min(n,o))},r.scaleRByWheel=function(t){if(r.isWheelValid(t)){var e=t.deltaX,n=t.deltaY;r.scaleR(e+n>0);var i=r.lens.getCenter();r.onMagnify(i)}},r.scaleDByWheel=function(t){if(r.isWheelValid(t)){var e=t.deltaX,n=t.deltaY;r.scaleD(e+n>0);var i=r.lens.getCenter();r.onMagnify(i)}},r.isDragValid=function(t){return r.options.preventDefault&&t.preventDefault(),!(!r.isLensOn||nb(yb(t.canvas),r.lens.getCenter())>r.r)},r.isLensDragging=!1,r.onDragStart=function(t){r.isDragValid(t)&&(r.isLensDragging=!0)},r.onDrag=function(t){if(r.isLensDragging){var e=yb(t.canvas);r.onMagnify(e)}},r.onDragEnd=function(){r.isLensDragging=!1},r.scaleRByDrag=function(t){if(r.isLensDragging){var e=t.dx,n=t.dy;r.scaleR(e-n>0);var i=r.lens.getCenter();r.onMagnify(i)}},r.scaleDByDrag=function(t){if(r.isLensDragging){var e=t.dx,n=t.dy;r.scaleD(e-n>0);var i=r.lens.getCenter();r.onMagnify(i)}},r.bindEvents(),r}return P(e,t),B(e,[{key:"canvas",get:function(){return this.context.canvas.getLayer("transient")}},{key:"isLensOn",get:function(){return this.lens&&!this.lens.destroyed}},{key:"graphDom",get:function(){return this.context.graph.getCanvas().getContextService().getDomElement()}},{key:"bindEvents",value:function(){var t,e=this.context.graph,n=this.options,r=n.trigger,i=n.scaleRBy,o=n.scaleDBy,a=e.getCanvas().getLayer();if(["click","drag"].includes(r)&&a.addEventListener(ty.CLICK,this.onCreateFisheye),"pointermove"===r&&a.addEventListener(ty.POINTER_MOVE,this.onCreateFisheye),"drag"===r||"drag"===i||"drag"===o){a.addEventListener(ty.DRAG_START,this.onDragStart),a.addEventListener(ty.DRAG_END,this.onDragEnd);var s="drag"===r?this.onDrag:"drag"===i?this.scaleRByDrag:this.scaleDByDrag;a.addEventListener(ty.DRAG,s)}if("wheel"===i||"wheel"===o){var u="wheel"===i?this.scaleRByWheel:this.scaleDByWheel;null===(t=this.graphDom)||void 0===t||t.addEventListener(ty.WHEEL,u,{passive:!1})}}},{key:"unbindEvents",value:function(){var t,e=this.context.graph,n=this.options,r=n.trigger,i=n.scaleRBy,o=n.scaleDBy,a=e.getCanvas().getLayer();if(["click","drag"].includes(r)&&a.removeEventListener(ty.CLICK,this.onCreateFisheye),"pointermove"===r&&a.removeEventListener(ty.POINTER_MOVE,this.onCreateFisheye),"drag"===r||"drag"===i||"drag"===o){a.removeEventListener(ty.DRAG_START,this.onDragStart),a.removeEventListener(ty.DRAG_END,this.onDragEnd);var s="drag"===r?this.onDrag:"drag"===i?this.scaleRByDrag:this.scaleDByDrag;a.removeEventListener(ty.DRAG,s)}if("wheel"===i||"wheel"===o){var u="wheel"===i?this.scaleRByWheel:this.scaleDByWheel;null===(t=this.graphDom)||void 0===t||t.removeEventListener(ty.WHEEL,u)}}},{key:"update",value:function(t){var n,r;this.unbindEvents(),xn(e,"update",this,3)([t]),this.r=null!==(n=t.r)&&void 0!==n?n:this.r,this.d=null!==(r=t.d)&&void 0!==r?r:this.d,this.bindEvents()}},{key:"destroy",value:function(){var t;this.unbindEvents(),this.isLensOn&&(null===(t=this.lens)||void 0===t||t.destroy()),this.prevMagnifiedStyleMap.clear(),this.prevOriginStyleMap.clear(),xn(e,"destroy",this,3)([])}}])}(aS);cF.defaultOptions={trigger:"pointermove",r:120,d:1.5,maxD:5,minD:0,showDPercent:!0,style:{},nodeStyle:{label:!0},preventDefault:!0};var lF=function(t){function e(t,n){var r;return x(this,e),(r=F(this,e,[t,Object.assign({},e.defaultOptions,n)])).$el=r.context.canvas.getContainer(),r.graphSize=[0,0],r.onFullscreenChange=function(){var t,e,n,i,o=!!document.fullscreenElement;r.options.autoFit&&r.setGraphSize(o),o?null===(e=(t=r.options).onEnter)||void 0===e||e.call(t):null===(i=(n=r.options).onExit)||void 0===i||i.call(n)},r.shortcut=new Ib(t.graph),r.bindEvents(),r.style=document.createElement("style"),document.head.appendChild(r.style),r.style.innerHTML="\n      :not(:root):fullscreen::backdrop {\n        background: transparent;\n      }\n    ",r}return P(e,t),B(e,[{key:"bindEvents",value:function(){var t=this;this.unbindEvents(),this.shortcut.unbindAll();var e=this.options.trigger,n=e.request,r=void 0===n?[]:n,i=e.exit,o=void 0===i?[]:i;this.shortcut.bind(r,this.request),this.shortcut.bind(o,this.exit),["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange"].forEach(function(e){document.addEventListener(e,t.onFullscreenChange,!1)})}},{key:"unbindEvents",value:function(){var t=this;this.shortcut.unbindAll(),["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange"].forEach(function(e){document.removeEventListener(e,t.onFullscreenChange,!1)})}},{key:"setGraphSize",value:function(){var t,e,n,r;if(arguments.length>0&&void 0!==arguments[0]&&!arguments[0]){var i=v(this.graphSize,2);n=i[0],r=i[1]}else n=(null===(t=globalThis.screen)||void 0===t?void 0:t.width)||0,r=(null===(e=globalThis.screen)||void 0===e?void 0:e.height)||0,this.graphSize=this.context.graph.getSize();this.context.graph.setSize(n,r),this.context.graph.render()}},{key:"request",value:function(){!document.fullscreenElement&&(document.fullscreenEnabled||Reflect.get(document,"webkitFullscreenEnabled")||Reflect.get(document,"mozFullscreenEnabled")||Reflect.get(document,"msFullscreenEnabled"))&&this.$el.requestFullscreen().catch(function(t){gy.warn("Error attempting to enable full-screen: ".concat(t.message," (").concat(t.name,")"))})}},{key:"exit",value:function(){document.fullscreenElement&&document.exitFullscreen()}},{key:"update",value:function(t){this.unbindEvents(),xn(e,"update",this,3)([t]),this.bindEvents()}},{key:"destroy",value:function(){this.exit(),this.style.remove(),xn(e,"destroy",this,3)([])}}])}(aS);lF.defaultOptions={trigger:{},autoFit:!0};var AF=function(t){function e(t,n){var r;return x(this,e),(r=F(this,e,[t,Object.assign({},e.defaultOptions,n)])).$element=sS("grid-line",!0),r.offset=[0,0],r.currentScale=1,r.followZoom=function(t){var e=t.data,n=e.scale,i=e.origin;if(n&&(void 0!==i||void 0!==r.context.viewport)){var o=r.currentScale;r.currentScale=n;var a=n/o,s=$m(i||r.context.graph.getCanvasCenter(),1-a),u=r.baseSize*n,c=Zm(sb($m(r.offset,a),u),s);r.$element.style.backgroundSize="".concat(u,"px ").concat(u,"px"),r.$element.style.backgroundPosition="".concat(c[0],"px ").concat(c[1],"px"),r.offset=sb(c,u)}},r.followTranslate=function(t){if(r.options.follow){var e=t.data.translate;e&&r.updateOffset(e)}},r.onTransform=function(t){var e=r.parseFollow(r.options.follow);e.zoom&&r.followZoom(t),e.translate&&r.followTranslate(t)},r.context.canvas.getContainer().prepend(r.$element),r.baseSize=r.options.size,r.updateStyle(),r.bindEvents(),r}return P(e,t),B(e,[{key:"update",value:function(t){xn(e,"update",this,3)([t]),void 0!==t.size&&(this.baseSize=t.size),this.updateStyle()}},{key:"bindEvents",value:function(){this.context.graph.on(ry.AFTER_TRANSFORM,this.onTransform)}},{key:"updateStyle",value:function(){var t=this.options,e=t.stroke,n=t.lineWidth,r=t.border,i=t.borderLineWidth,o=t.borderStroke,a=t.borderStyle,s=this.baseSize*this.currentScale;Object.assign(this.$element.style,{border:r?"".concat(i,"px ").concat(a," ").concat(o):"none",backgroundImage:"linear-gradient(".concat(e," ").concat(n,"px, transparent ").concat(n,"px), linear-gradient(90deg, ").concat(e," ").concat(n,"px, transparent ").concat(n,"px)"),backgroundSize:"".concat(s,"px ").concat(s,"px"),backgroundRepeat:"repeat"})}},{key:"updateOffset",value:function(t){var e=this.baseSize*this.currentScale;this.offset=sb(Zm(this.offset,t),e),this.$element.style.backgroundPosition="".concat(this.offset[0],"px ").concat(this.offset[1],"px")}},{key:"parseFollow",value:function(t){var e,n;return yn(t)?{translate:t,zoom:t}:{translate:null!==(e=null==t?void 0:t.translate)&&void 0!==e&&e,zoom:null!==(n=null==t?void 0:t.zoom)&&void 0!==n&&n}}},{key:"destroy",value:function(){this.context.graph.off(ry.AFTER_TRANSFORM,this.onTransform),this.$element.remove(),xn(e,"destroy",this,3)([])}}])}(aS);function fF(t){var e={Added:new Map,Updated:new Map,Removed:new Map};return t.forEach(function(t){var n=t.type,r=t.value,i=Sm(r);if("NodeAdded"===n||"EdgeAdded"===n||"ComboAdded"===n)e.Added.set(i,t);else if("NodeUpdated"===n||"EdgeUpdated"===n||"ComboUpdated"===n)if(e.Added.has(i))e.Added.set(i,{type:n.replace("Updated","Added"),value:r});else if(e.Updated.has(i)){var o=e.Updated.get(i).original;e.Updated.set(i,{type:n,value:r,original:o})}else e.Removed.has(i)||e.Updated.set(i,t);else"NodeRemoved"!==n&&"EdgeRemoved"!==n&&"ComboRemoved"!==n||(e.Added.has(i)?e.Added.delete(i):e.Updated.has(i)?(e.Updated.delete(i),e.Removed.set(i,t)):e.Removed.set(i,t))}),[].concat(O(Array.from(e.Added.values())),O(Array.from(e.Updated.values())),O(Array.from(e.Removed.values())))}function dF(t){var e=Py(t,function(t){return t.type}),n=e.NodeAdded,r=void 0===n?[]:n,i=e.NodeUpdated,o=void 0===i?[]:i,a=e.NodeRemoved,s=void 0===a?[]:a,u=e.EdgeAdded,c=void 0===u?[]:u,l=e.EdgeUpdated,A=void 0===l?[]:l,f=e.EdgeRemoved,d=void 0===f?[]:f,h=e.ComboAdded,p=void 0===h?[]:h,v=e.ComboUpdated,g=void 0===v?[]:v,y=e.ComboRemoved;return{add:{nodes:r,edges:c,combos:p},update:{nodes:o,edges:A,combos:g},remove:{nodes:s,edges:d,combos:void 0===y?[]:y}}}function hF(t,e){for(var n in t)bn(t[n])&&!Array.isArray(t[n])&&null!==t[n]?(e[n]||(e[n]={}),hF(t[n],e[n])):void 0===e[n]&&(e[n]=wy(n))}function pF(t){var e=arguments.length>2?arguments[2]:void 0,n={animation:arguments.length>1&&void 0!==arguments[1]&&arguments[1],current:{add:{},update:{},remove:{}},original:{add:{},update:{},remove:{}}},r=dF(fF(t)),i=r.add,o=r.update,a=r.remove;return["nodes","edges","combos"].forEach(function(t){o[t]&&o[t].forEach(function(r){var i,o,a=Object.assign({},r.value),s=Object.assign({},r.original);if(e){var u=e.graph.getElementType(Sm(r.original)),c="edge"===u?"stroke":"fill",l=e.element.getElementComputedStyle(u,r.original);s=Object.assign(Object.assign({},r.original),{style:Object.assign(m({},c,l[c]),r.original.style)})}hF(a,s),(i=n.current.update)[t]||(i[t]=[]),n.current.update[t].push(a),(o=n.original.update)[t]||(o[t]=[]),n.original.update[t].push(s)}),i[t]&&i[t].forEach(function(e){var r,i,o=Object.assign({},e.value);(r=n.current.add)[t]||(r[t]=[]),n.current.add[t].push(o),(i=n.original.remove)[t]||(i[t]=[]),n.original.remove[t].push(o)}),a[t]&&a[t].forEach(function(e){var r,i,o=Object.assign({},e.value);(r=n.current.remove)[t]||(r[t]=[]),n.current.remove[t].push(o),(i=n.original.add)[t]||(i[t]=[]),n.original.add[t].push(o)})}),n}AF.defaultOptions={border:!0,borderLineWidth:1,borderStroke:"#eee",borderStyle:"solid",lineWidth:1,size:20,stroke:"#eee"};var vF=function(t){function e(t,n){var r;x(this,e),(r=F(this,e,[t,Object.assign({},e.defaultOptions,n)])).batchChanges=null,r.batchAnimation=!1,r.undoStack=[],r.redoStack=[],r.freezed=!1,r.executeCommand=function(t){var e,n,i,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];r.freezed=!0,null===(n=(e=r.options).executeCommand)||void 0===n||n.call(e,t);var a=o?t.original:t.current;r.context.graph.addData(a.add),r.context.graph.updateData(a.update),r.context.graph.removeData(Tm(a.remove,!1)),null===(i=r.context.element)||void 0===i||i.draw({silence:!0,animation:t.animation}),r.freezed=!1},r.addCommand=function(t){var e;if(!r.freezed){if(t.type===ry.AFTER_DRAW){var n=t.data,i=n.dataChanges,o=void 0===i?[]:i,a=n.animation,s=void 0===a||a;if(null===(e=r.context.batch)||void 0===e?void 0:e.isBatching){if(!r.batchChanges)return;return r.batchChanges.push(o),void(r.batchAnimation&&(r.batchAnimation=s))}r.batchChanges=[o],r.batchAnimation=s}r.undoStackPush(pF(r.batchChanges.flat(),r.batchAnimation,r.context)),r.notify(iy.ADD,r.undoStack[r.undoStack.length-1])}},r.initBatchCommand=function(t){var e=t.data.initiate;r.batchAnimation=!1,e?r.batchChanges=[]:r.undoStack.pop()||(r.batchChanges=null)},r.emitter=new gB;var i=r.context.graph;return i.on(ry.AFTER_DRAW,r.addCommand),i.on(ry.BATCH_START,r.initBatchCommand),i.on(ry.BATCH_END,r.addCommand),r}return P(e,t),B(e,[{key:"canUndo",value:function(){return this.undoStack.length>0}},{key:"canRedo",value:function(){return this.redoStack.length>0}},{key:"undo",value:function(){var t,e,n,r,i=this.undoStack.pop();if(i){if(this.executeCommand(i),!1===(null===(e=(t=this.options).beforeAddCommand)||void 0===e?void 0:e.call(t,i,!1)))return;this.redoStack.push(i),null===(r=(n=this.options).afterAddCommand)||void 0===r||r.call(n,i,!1),this.notify(iy.UNDO,i)}return this}},{key:"redo",value:function(){var t=this.redoStack.pop();return t&&(this.executeCommand(t,!1),this.undoStackPush(t),this.notify(iy.REDO,t)),this}},{key:"undoAndCancel",value:function(){var t=this.undoStack.pop();return t&&(this.executeCommand(t,!1),this.redoStack=[],this.notify(iy.CANCEL,t)),this}},{key:"undoStackPush",value:function(t){var e,n,r,i,o=this.options.stackSize;0!==o&&this.undoStack.length>=o&&this.undoStack.shift(),!1!==(null===(n=(e=this.options).beforeAddCommand)||void 0===n?void 0:n.call(e,t,!0))&&(this.undoStack.push(t),null===(i=(r=this.options).afterAddCommand)||void 0===i||i.call(r,t,!0))}},{key:"clear",value:function(){this.undoStack=[],this.redoStack=[],this.batchChanges=null,this.batchAnimation=!1,this.notify(iy.CLEAR,null)}},{key:"notify",value:function(t,e){this.emitter.emit(t,{cmd:e}),this.emitter.emit(iy.CHANGE,{cmd:e})}},{key:"on",value:function(t,e){this.emitter.on(t,e)}},{key:"destroy",value:function(){var t=this.context.graph;t.off(ry.AFTER_DRAW,this.addCommand),t.off(ry.BATCH_START,this.initBatchCommand),t.off(ry.BATCH_END,this.addCommand),this.emitter.off(),xn(e,"destroy",this,3)([]),this.undoStack=[],this.redoStack=[]}}])}(aS);vF.defaultOptions={stackSize:0};var gF=function(t,e){if(!e)return O(t);var n=e[0].slice(1),r=e[1].slice(1);return t.map(function(t){var e=v(t,2),i=e[0],o=e[1];return m(m({},n,i),r,o)})},yF=function(){return B(function t(e,n){x(this,t),this._cells=[],this._cellSize=n,this._reverseCellSize=1/n;var r,i=qn(e);try{for(i.s();!(r=i.n()).done;){var o=r.value,a=this.coordToCellNum(o[0]),s=this.coordToCellNum(o[1]);this._cells[a]||(this._cells[a]=[]),this._cells[a][s]||(this._cells[a][s]=[]),this._cells[a][s].push(o)}}catch(t){i.e(t)}finally{i.f()}},[{key:"cellPoints",value:function(t,e){var n;return(null===(n=this._cells[t])||void 0===n?void 0:n[e])||[]}},{key:"rangePoints",value:function(t){for(var e=this.coordToCellNum(t[0]),n=this.coordToCellNum(t[1]),r=this.coordToCellNum(t[2]),i=this.coordToCellNum(t[3]),o=[],a=e;a<=r;a++)for(var s=n;s<=i;s++){var u,c=qn(this.cellPoints(a,s));try{for(c.s();!(u=c.n()).done;){var l=u.value;o.push(l)}}catch(t){c.e(t)}finally{c.f()}}return o}},{key:"removePoint",value:function(t){var e=this.coordToCellNum(t[0]),n=this.coordToCellNum(t[1]),r=this._cells[e][n],i=r.findIndex(function(e){var n=v(e,2),r=n[0],i=n[1];return r===t[0]&&i===t[1]});return i>-1&&r.splice(i,1),r}},{key:"trunc",value:function(t){return Math.trunc(t)}},{key:"coordToCellNum",value:function(t){return this.trunc(t*this._reverseCellSize)}},{key:"extendBbox",value:function(t,e){return[t[0]-e*this._cellSize,t[1]-e*this._cellSize,t[2]+e*this._cellSize,t[3]+e*this._cellSize]}}])}(),mF=+(Math.pow(2,27)+1);function bF(t,e,n){var r=t*e,i=mF*t,o=i-(i-t),a=t-o,s=mF*e,u=s-(s-e),c=e-u,l=a*c-(r-o*u-a*u-o*c);return n?(n[0]=l,n[1]=r,n):[l,r]}function wF(t,e,n){var r=t+e,i=r-t,o=e-i,a=t-(r-i);return n?(n[0]=a+o,n[1]=r,n):[a+o,r]}function xF(t,e){var n=t.length;if(1===n){var r=bF(t[0],e);return r[0]?r:[r[1]]}var i=new Array(2*n),o=[.1,.1],a=[.1,.1],s=0;bF(t[0],e,o),o[0]&&(i[s++]=o[0]);for(var u=1;u<n;++u){bF(t[u],e,a),wF(o[1],a[0],o),o[0]&&(i[s++]=o[0]);var c=a[1],l=o[1],A=c+l,f=l-(A-c);o[1]=A,f&&(i[s++]=f)}return o[1]&&(i[s++]=o[1]),0===s&&(i[s++]=0),i.length=s,i}function EF(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],-e[0]);var i,o,a=new Array(n+r),s=0,u=0,c=0,l=Math.abs,A=t[u],f=l(A),d=-e[c],h=l(d);f<h?(o=A,(u+=1)<n&&(f=l(A=t[u]))):(o=d,(c+=1)<r&&(h=l(d=-e[c]))),u<n&&f<h||c>=r?(i=A,(u+=1)<n&&(f=l(A=t[u]))):(i=d,(c+=1)<r&&(h=l(d=-e[c])));for(var p,v,g=i+o,y=g-i,m=o-y,b=m,w=g;u<n&&c<r;)f<h?(i=A,(u+=1)<n&&(f=l(A=t[u]))):(i=d,(c+=1)<r&&(h=l(d=-e[c]))),(m=(o=b)-(y=(g=i+o)-i))&&(a[s++]=m),b=w-((p=w+g)-(v=p-w))+(g-v),w=p;for(;u<n;)(m=(o=b)-(y=(g=(i=A)+o)-i))&&(a[s++]=m),b=w-((p=w+g)-(v=p-w))+(g-v),w=p,(u+=1)<n&&(A=t[u]);for(;c<r;)(m=(o=b)-(y=(g=(i=d)+o)-i))&&(a[s++]=m),b=w-((p=w+g)-(v=p-w))+(g-v),w=p,(c+=1)<r&&(d=-e[c]);return b&&(a[s++]=b),w&&(a[s++]=w),s||(a[s++]=0),a.length=s,a}function BF(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],e[0]);var i,o,a=new Array(n+r),s=0,u=0,c=0,l=Math.abs,A=t[u],f=l(A),d=e[c],h=l(d);f<h?(o=A,(u+=1)<n&&(f=l(A=t[u]))):(o=d,(c+=1)<r&&(h=l(d=e[c]))),u<n&&f<h||c>=r?(i=A,(u+=1)<n&&(f=l(A=t[u]))):(i=d,(c+=1)<r&&(h=l(d=e[c])));for(var p,v,g=i+o,y=g-i,m=o-y,b=m,w=g;u<n&&c<r;)f<h?(i=A,(u+=1)<n&&(f=l(A=t[u]))):(i=d,(c+=1)<r&&(h=l(d=e[c]))),(m=(o=b)-(y=(g=i+o)-i))&&(a[s++]=m),b=w-((p=w+g)-(v=p-w))+(g-v),w=p;for(;u<n;)(m=(o=b)-(y=(g=(i=A)+o)-i))&&(a[s++]=m),b=w-((p=w+g)-(v=p-w))+(g-v),w=p,(u+=1)<n&&(A=t[u]);for(;c<r;)(m=(o=b)-(y=(g=(i=d)+o)-i))&&(a[s++]=m),b=w-((p=w+g)-(v=p-w))+(g-v),w=p,(c+=1)<r&&(d=e[c]);return b&&(a[s++]=b),w&&(a[s++]=w),s||(a[s++]=0),a.length=s,a}function kF(t,e,n,r){return function(n,i,o){var a=t(t(e(i[1],o[0]),e(-o[1],i[0])),t(e(n[1],i[0]),e(-i[1],n[0]))),s=t(e(n[1],o[0]),e(-o[1],n[0])),u=r(a,s);return u[u.length-1]}}function OF(t,e,n,r){return function(i,o,a,s){var u=t(t(n(t(e(a[1],s[0]),e(-s[1],a[0])),o[2]),t(n(t(e(o[1],s[0]),e(-s[1],o[0])),-a[2]),n(t(e(o[1],a[0]),e(-a[1],o[0])),s[2]))),t(n(t(e(o[1],s[0]),e(-s[1],o[0])),i[2]),t(n(t(e(i[1],s[0]),e(-s[1],i[0])),-o[2]),n(t(e(i[1],o[0]),e(-o[1],i[0])),s[2])))),c=t(t(n(t(e(a[1],s[0]),e(-s[1],a[0])),i[2]),t(n(t(e(i[1],s[0]),e(-s[1],i[0])),-a[2]),n(t(e(i[1],a[0]),e(-a[1],i[0])),s[2]))),t(n(t(e(o[1],a[0]),e(-a[1],o[0])),i[2]),t(n(t(e(i[1],a[0]),e(-a[1],i[0])),-o[2]),n(t(e(i[1],o[0]),e(-o[1],i[0])),a[2])))),l=r(u,c);return l[l.length-1]}}function CF(t,e,n,r){return function(i,o,a,s,u){var c=t(t(t(n(t(n(t(e(s[1],u[0]),e(-u[1],s[0])),a[2]),t(n(t(e(a[1],u[0]),e(-u[1],a[0])),-s[2]),n(t(e(a[1],s[0]),e(-s[1],a[0])),u[2]))),o[3]),t(n(t(n(t(e(s[1],u[0]),e(-u[1],s[0])),o[2]),t(n(t(e(o[1],u[0]),e(-u[1],o[0])),-s[2]),n(t(e(o[1],s[0]),e(-s[1],o[0])),u[2]))),-a[3]),n(t(n(t(e(a[1],u[0]),e(-u[1],a[0])),o[2]),t(n(t(e(o[1],u[0]),e(-u[1],o[0])),-a[2]),n(t(e(o[1],a[0]),e(-a[1],o[0])),u[2]))),s[3]))),t(n(t(n(t(e(a[1],s[0]),e(-s[1],a[0])),o[2]),t(n(t(e(o[1],s[0]),e(-s[1],o[0])),-a[2]),n(t(e(o[1],a[0]),e(-a[1],o[0])),s[2]))),-u[3]),t(n(t(n(t(e(s[1],u[0]),e(-u[1],s[0])),o[2]),t(n(t(e(o[1],u[0]),e(-u[1],o[0])),-s[2]),n(t(e(o[1],s[0]),e(-s[1],o[0])),u[2]))),i[3]),n(t(n(t(e(s[1],u[0]),e(-u[1],s[0])),i[2]),t(n(t(e(i[1],u[0]),e(-u[1],i[0])),-s[2]),n(t(e(i[1],s[0]),e(-s[1],i[0])),u[2]))),-o[3])))),t(t(n(t(n(t(e(o[1],u[0]),e(-u[1],o[0])),i[2]),t(n(t(e(i[1],u[0]),e(-u[1],i[0])),-o[2]),n(t(e(i[1],o[0]),e(-o[1],i[0])),u[2]))),s[3]),t(n(t(n(t(e(o[1],s[0]),e(-s[1],o[0])),i[2]),t(n(t(e(i[1],s[0]),e(-s[1],i[0])),-o[2]),n(t(e(i[1],o[0]),e(-o[1],i[0])),s[2]))),-u[3]),n(t(n(t(e(a[1],s[0]),e(-s[1],a[0])),o[2]),t(n(t(e(o[1],s[0]),e(-s[1],o[0])),-a[2]),n(t(e(o[1],a[0]),e(-a[1],o[0])),s[2]))),i[3]))),t(n(t(n(t(e(a[1],s[0]),e(-s[1],a[0])),i[2]),t(n(t(e(i[1],s[0]),e(-s[1],i[0])),-a[2]),n(t(e(i[1],a[0]),e(-a[1],i[0])),s[2]))),-o[3]),t(n(t(n(t(e(o[1],s[0]),e(-s[1],o[0])),i[2]),t(n(t(e(i[1],s[0]),e(-s[1],i[0])),-o[2]),n(t(e(i[1],o[0]),e(-o[1],i[0])),s[2]))),a[3]),n(t(n(t(e(o[1],a[0]),e(-a[1],o[0])),i[2]),t(n(t(e(i[1],a[0]),e(-a[1],i[0])),-o[2]),n(t(e(i[1],o[0]),e(-o[1],i[0])),a[2]))),-s[3]))))),l=t(t(t(n(t(n(t(e(s[1],u[0]),e(-u[1],s[0])),a[2]),t(n(t(e(a[1],u[0]),e(-u[1],a[0])),-s[2]),n(t(e(a[1],s[0]),e(-s[1],a[0])),u[2]))),i[3]),n(t(n(t(e(s[1],u[0]),e(-u[1],s[0])),i[2]),t(n(t(e(i[1],u[0]),e(-u[1],i[0])),-s[2]),n(t(e(i[1],s[0]),e(-s[1],i[0])),u[2]))),-a[3])),t(n(t(n(t(e(a[1],u[0]),e(-u[1],a[0])),i[2]),t(n(t(e(i[1],u[0]),e(-u[1],i[0])),-a[2]),n(t(e(i[1],a[0]),e(-a[1],i[0])),u[2]))),s[3]),n(t(n(t(e(a[1],s[0]),e(-s[1],a[0])),i[2]),t(n(t(e(i[1],s[0]),e(-s[1],i[0])),-a[2]),n(t(e(i[1],a[0]),e(-a[1],i[0])),s[2]))),-u[3]))),t(t(n(t(n(t(e(a[1],u[0]),e(-u[1],a[0])),o[2]),t(n(t(e(o[1],u[0]),e(-u[1],o[0])),-a[2]),n(t(e(o[1],a[0]),e(-a[1],o[0])),u[2]))),i[3]),n(t(n(t(e(a[1],u[0]),e(-u[1],a[0])),i[2]),t(n(t(e(i[1],u[0]),e(-u[1],i[0])),-a[2]),n(t(e(i[1],a[0]),e(-a[1],i[0])),u[2]))),-o[3])),t(n(t(n(t(e(o[1],u[0]),e(-u[1],o[0])),i[2]),t(n(t(e(i[1],u[0]),e(-u[1],i[0])),-o[2]),n(t(e(i[1],o[0]),e(-o[1],i[0])),u[2]))),a[3]),n(t(n(t(e(o[1],a[0]),e(-a[1],o[0])),i[2]),t(n(t(e(i[1],a[0]),e(-a[1],i[0])),-o[2]),n(t(e(i[1],o[0]),e(-o[1],i[0])),a[2]))),-u[3])))),A=r(c,l);return A[A.length-1]}}function MF(t){return(3===t?kF:4===t?OF:CF)(BF,bF,xF,EF)}var SF=MF(3),FF=MF(4),TF=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var r,i=(t[1]-n[1])*(e[0]-n[0]),o=(t[0]-n[0])*(e[1]-n[1]),a=i-o;if(i>0){if(o<=0)return a;r=i+o}else{if(!(i<0))return a;if(o>=0)return a;r=-(i+o)}var s=33306690738754716e-32*r;return a>=s||a<=-s?a:SF(t,e,n)},function(t,e,n,r){var i=t[0]-r[0],o=e[0]-r[0],a=n[0]-r[0],s=t[1]-r[1],u=e[1]-r[1],c=n[1]-r[1],l=t[2]-r[2],A=e[2]-r[2],f=n[2]-r[2],d=o*c,h=a*u,p=a*s,v=i*c,g=i*u,y=o*s,m=l*(d-h)+A*(p-v)+f*(g-y),b=7771561172376103e-31*((Math.abs(d)+Math.abs(h))*Math.abs(l)+(Math.abs(p)+Math.abs(v))*Math.abs(A)+(Math.abs(g)+Math.abs(y))*Math.abs(f));return m>b||-m>b?m:FF(t,e,n,r)}];function PF(t){var e,n=TF[t.length];return n||(n=TF[t.length]=MF(t.length)),(e=n).apply.apply(e,[void 0].concat(O(t)))}function IF(t,e,n,r,i,o,a){return function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];switch(n.length){case 0:case 1:return 0;case 2:return r(n[0],n[1]);case 3:return i(n[0],n[1],n[2]);case 4:return o(n[0],n[1],n[2],n[3]);case 5:return a(n[0],n[1],n[2],n[3],n[4])}return t(n)}}const NF=function(){for(;TF.length<=5;)TF.push(MF(TF.length));for(var t=IF.apply(void 0,[void 0,PF].concat(TF)),e=0;e<=5;++e)t[e]=TF[e];return t}();var LF=NF[3];function _F(t,e,n,r){var i=NF(t,n,r),o=NF(e,n,r);if(i>0&&o>0||i<0&&o<0)return!1;var a=NF(n,t,e),s=NF(r,t,e);return!(a>0&&s>0||a<0&&s<0)&&(0!==i||0!==o||0!==a||0!==s||function(t,e,n,r){for(var i=0;i<2;++i){var o=t[i],a=e[i],s=[Math.min(o,a),Math.max(o,a)],u=s[0],c=s[1],l=n[i],A=r[i],f=[Math.min(l,A),Math.max(l,A)];if(f[1]<u||c<f[0])return!1}return!0}(t,e,n,r))}function QF(t,e){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function UF(t,e,n){var r=[e[0]-t[0],e[1]-t[1]],i=[n[0]-t[0],n[1]-t[1]],o=QF(t,e),a=QF(t,n);return(r[0]*i[0]+r[1]*i[1])/Math.sqrt(o*a)}function jF(t,e){for(var n=0;n<e.length-1;n++){var r=[e[n],e[n+1]];if(!(t[0][0]===r[0][0]&&t[0][1]===r[0][1]||t[0][0]===r[1][0]&&t[0][1]===r[1][1])&&_F(t[0],t[1],r[0],r[1]))return!0}return!1}function DF(t){return[Math.min(t[0][0],t[1][0]),Math.min(t[0][1],t[1][1]),Math.max(t[0][0],t[1][0]),Math.max(t[0][1],t[1][1])]}function RF(t,e,n){for(var r,i,o=null,a=KF,s=KF,u=0;u<e.length;u++)r=UF(t[0],t[1],e[u]),i=UF(t[1],t[0],e[u]),r>a&&i>s&&!jF([t[0],e[u]],n)&&!jF([t[1],e[u]],n)&&(a=r,s=i,o=e[u]);return o}function HF(t,e,n,r,i){for(var o=!1,a=0;a<t.length-1;a++){var s=[t[a],t[a+1]],u=s[0][0]+","+s[0][1]+","+s[1][0]+","+s[1][1];if(!(QF(s[0],s[1])<e||i.has(u))){var c=0,l=DF(s),A=void 0,f=void 0,d=void 0;do{A=(l=r.extendBbox(l,c))[2]-l[0],f=l[3]-l[1],d=RF(s,r.rangePoints(l),t),c++}while(null===d&&(n[0]>A||n[1]>f));A>=n[0]&&f>=n[1]&&i.add(u),null!==d&&(t.splice(a+1,0,d),r.removePoint(d),o=!0)}}return o?HF(t,e,n,r,i):t}function zF(t,e,n){var r=e||20,i=function(t){for(var e=[t[0]],n=t[0],r=1;r<t.length;r++){var i=t[r];n[0]===i[0]&&n[1]===i[1]||e.push(i),n=i}return e}(function(t){return t.sort(function(t,e){return t[0]-e[0]||t[1]-e[1]})}(function(t,e){if(!e)return O(t);var n=e[0].slice(1),r=e[1].slice(1);return t.map(function(t){return[t[n],t[r]]})}(t,n)));if(i.length<4){var o=i.concat([i[0]]);return n?gF(o,n):o}var a=function(t){for(var e=1/0,n=1/0,r=-1/0,i=-1/0,o=t.length-1;o>=0;o--)t[o][0]<e&&(e=t[o][0]),t[o][1]<n&&(n=t[o][1]),t[o][0]>r&&(r=t[o][0]),t[o][1]>i&&(i=t[o][1]);return[r-e,i-n]}(i),s=[a[0]*GF,a[1]*GF],u=function(t){var e=t.length;if(e<3){for(var n=new Array(e),r=0;r<e;++r)n[r]=r;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:n}for(var i=new Array(e),o=0;o<e;++o)i[o]=o;i.sort(function(e,n){return t[e][0]-t[n][0]||t[e][1]-t[n][1]});for(var a=[i[0],i[1]],s=[i[0],i[1]],u=2;u<e;++u){for(var c=i[u],l=t[c],A=a.length;A>1&&LF(t[a[A-2]],t[a[A-1]],l)<=0;)A-=1,a.pop();for(a.push(c),A=s.length;A>1&&LF(t[s[A-2]],t[s[A-1]],l)>=0;)A-=1,s.pop();s.push(c)}for(var f=new Array(s.length+a.length-2),d=0,h=0,p=a.length;h<p;++h)f[d++]=a[h];for(var v=s.length-2;v>0;--v)f[d++]=s[v];return f}(i).reverse().map(function(t){return i[t]});u.push(u[0]);var c=i.filter(function(t){return u.indexOf(t)<0}),l=Math.ceil(1/(i.length/(a[0]*a[1]))),A=HF(u,Math.pow(r,2),s,function(t,e){return new yF(t,e)}(c,l),new Set);return n?gF(A,n):A}var KF=Math.cos(90/(180/Math.PI)),GF=.6,VF=function(t,e,n){var r=[e,e,0,0,0],i="sharp"===n?Zm(t[0],eb(ib(Jm(t[0],t[1])),e)):t[0],o="sharp"===n?Zm(t[1],eb(ib(Jm(t[1],t[0])),e)):t[1],a=eb(ib(ab(Jm(i,o),!1)),e),s=eb(a,-1),u=Zm(i,a),c=Zm(o,a),l=Zm(o,s),A=Zm(i,s);return"sharp"===n?[["M",u[0],u[1]],["L",c[0],c[1]],["L",l[0],l[1]],["L",A[0],A[1]],["Z"]]:[["M",u[0],u[1]],["L",c[0],c[1]],["A"].concat(r,[l[0],l[1]]),["L",A[0],A[1]],["A"].concat(r,[u[0],u[1]])]},WF=function(t){function e(t,n){var r;return x(this,e),(r=F(this,e,[t,Object.assign({},e.defaultOptions,n)])).hullMemberIds=[],r.drawHull=function(){if(r.shape){var t=!Xg(r.optionsCache,r.options);r.shape.update(r.getHullStyle(t))}else r.shape=new gw({style:r.getHullStyle()}),r.context.canvas.appendChild(r.shape);r.optionsCache=Object.assign({},r.options)},r.updateHullPath=function(t){r.shape&&r.options.members.includes(Sm(t.data))&&r.shape.update({d:r.getHullPath(!0)})},r.getHullPath=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=r.context.graph,n=r.getMember();if(0===n.length)return"";var i=n.map(function(t){return e.getNodeData(t)}),o=zF(i.map(pb),r.options.concavity).slice(1).reverse(),a=o.flatMap(function(t){return i.filter(function(e){return Xg(pb(e),t)}).map(Sm)});return Xg(a,r.hullMemberIds)&&!t||(r.hullMemberIds=a,r.path=function(t,e,n){if(1===t.length)return function(t,e,n){if("sharp"===n)return[["M",t[0]-e,t[1]-e],["L",t[0]+e,t[1]-e],["L",t[0]+e,t[1]+e],["L",t[0]-e,t[1]+e],["Z"]];var r=[e,e,0,0,0];return[["M",t[0],t[1]-e],["A"].concat(r,[t[0],t[1]+e]),["A"].concat(r,[t[0],t[1]-e])]}(t[0],e,n);if(2===t.length)return VF(t,e,n);if(3===t.length){var r=v(Sb(t),3),i=r[0],o=r[1],a=r[2];if(Bb(i,o,a))return VF([i,a],e,n)}switch(n){case"smooth":return function(t,e){var n=Sb(t).map(function(e,n){return{p:e,v:ib(Jm(t[(n+1)%t.length],e))}});return n.forEach(function(r,i){var o=i>0?i-1:t.length-1,a=n[o].v,s=ib(Zm(a,eb(r.v,ob(a,r.v,!0)<Math.PI?1:-1)));r.p=Zm(r.p,eb(s,e))}),vw(n.map(function(t){return t.p}))}(t,e);case"sharp":return function(t,e){var n=t.map(function(n,r){var i=t[0===r?t.length-1:r-1],o=cb(eb(ib(ab(Jm(i,n),!1)),e));return[Zm(i,o),Zm(n,o)]}),r=n.flat();return r.map(function(t,e){return e%2==0?null:db([r[(e-1)%r.length],r[e%r.length]],[r[(e+1)%r.length],r[(e+2)%r.length]],!0)}).filter(Boolean).map(function(t,e){return[0===e?"M":"L",t[0],t[1]]}).concat([["Z"]])}(t,e);default:return function(t,e){var n=Sb(t).map(function(n,r){var i=(r-2+t.length)%t.length,o=(r-1+t.length)%t.length,a=(r+1)%t.length,s=t[i],u=t[o],c=t[a],l=Jm(s,u),A=Jm(u,n),f=Jm(n,c),d=function(t,e){return ob(t,e,!0)<Math.PI},h=d(l,A),p=d(A,f),v=function(t){return eb(ib(ab(t,!1)),e)},g=v(A);return[{p:ub(Zm(u,h?v(l):g)),concave:h&&u},{p:ub(Zm(n,p?v(f):g)),concave:p&&n}]}),r=[e,e,0,0,0],i=n.findIndex(function(t,e){return!(n[(e-1+n.length)%n.length][0].concave||n[(e-1+n.length)%n.length][1].concave||t[0].concave||t[0].concave||t[1].concave)}),o=n.slice(i).concat(n.slice(0,i)),a=[];return o.flatMap(function(t,e){var i=[],s=o[n.length-1];return 0===e&&i.push(["M"].concat(O(s[1].p))),t[0].concave?a.push(t[0].p,t[1].p):i.push(["A"].concat(r,O(t[0].p))),t[1].concave?a.unshift(t[1].p):i.push(["L"].concat(O(t[1].p))),3===a.length&&(i.pop(),i.push(["C"].concat(O(a.flat()))),a=[]),i})}(t,e)}}(o,r.getPadding(),r.options.corner)),r.path},r.bindEvents(),r}return P(e,t),B(e,[{key:"bindEvents",value:function(){this.context.graph.on(ry.AFTER_RENDER,this.drawHull),this.context.graph.on(ry.AFTER_ELEMENT_UPDATE,this.updateHullPath)}},{key:"unbindEvents",value:function(){this.context.graph.off(ry.AFTER_RENDER,this.drawHull),this.context.graph.off(ry.AFTER_ELEMENT_UPDATE,this.updateHullPath)}},{key:"getHullStyle",value:function(t){var e=this.options,n=(e.members,e.padding,e.corner,function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(e,["members","padding","corner"]));return Object.assign(Object.assign({},n),{d:this.getHullPath(t)})}},{key:"getPadding",value:function(){var t=this.context.graph,e=this.hullMemberIds.reduce(function(e,n){var r=t.getElementRenderBounds(n).halfExtents,i=Math.max(r[0],r[1]);return Math.max(e,i)},0);return e+this.options.padding}},{key:"addMember",value:function(t){var e=Array.isArray(t)?t:[t];this.options.members=O(new Set([].concat(O(this.options.members),O(e)))),this.shape.update({d:this.getHullPath()})}},{key:"removeMember",value:function(t){var e=this,n=Array.isArray(t)?t:[t];this.options.members=this.options.members.filter(function(t){return!n.includes(t)}),n.some(function(t){return e.hullMemberIds.includes(t)})&&this.shape.update({d:this.getHullPath()})}},{key:"updateMember",value:function(t){this.options.members=mn(t)?t(this.options.members):t,this.shape.update(this.getHullStyle(!0))}},{key:"getMember",value:function(){return this.options.members}},{key:"destroy",value:function(){this.unbindEvents(),this.shape.destroy(),this.hullMemberIds=[],xn(e,"destroy",this,3)([])}}])}(aS);function YF(t,e){e(t),t.children&&t.children.forEach(function(t){t&&YF(t,e)})}function XF(t){ZF(t,!0)}function qF(t){ZF(t,!1)}function ZF(t,e){var n=e?"visible":"hidden";YF(t,function(t){t.attr("visibility",n)})}WF.defaultOptions={members:[],padding:10,corner:"rounded",concavity:1/0,fill:"lightblue",fillOpacity:.2,labelOpacity:1,stroke:"blue",strokeOpacity:.2};var JF=function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=5),Object.entries(e).forEach(function(i){var o=Be(i,2),a=o[0],s=o[1],u=t;Object.prototype.hasOwnProperty.call(e,a)&&(s?Vm(s)?(Vm(t[a])||(u[a]={}),n<r?JF(t[a],s,n+1,r):u[a]=e[a]):tn(s)?(u[a]=[],u[a]=u[a].concat(s)):u[a]=s:u[a]=s)})},$F=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)JF(t,e[r]);return t},tT=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=t.apply(this,ke([],Be(e),!1))||this;return r.isMutationObserved=!0,r.addEventListener(Hs.INSERTED,function(){qF(r)}),r}return me(e,t),e}(_u);function eT(t){var e=t.appendChild(new tT({class:"offscreen"}));return qF(e),e}function nT(){ZF(this,"hidden"!==this.attributes.visibility)}var rT=function(t){function e(e,n){void 0===n&&(n={});var r=t.call(this,$F({},{style:n},e))||this;return r.initialized=!1,r._defaultOptions=n,r}return me(e,t),Object.defineProperty(e.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=eT(this)),this._offscreen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultOptions",{get:function(){return this._defaultOptions},enumerable:!1,configurable:!0}),e.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this),this.initialized=!0},e.prototype.disconnectedCallback=function(){var t;null===(t=this._offscreen)||void 0===t||t.destroy()},e.prototype.attributeChangedCallback=function(t){"visibility"===t&&nT.call(this)},e.prototype.update=function(t,e){var n;return this.attr($F({},this.attributes,t||{})),null===(n=this.render)||void 0===n?void 0:n.call(this,this.attributes,this,e)},e.prototype.clear=function(){this.removeChildren()},e.prototype.bindEvents=function(t,e){},e.prototype.getSubShapeStyle=function(t){return t.x,t.y,t.transform,t.transformOrigin,t.class,t.className,t.zIndex,we(t,["x","y","transform","transformOrigin","class","className","zIndex"])},e}(Nu);function iT(t){return t.toString().charAt(0).toUpperCase()+t.toString().slice(1)}function oT(t,e,n){var r;void 0===n&&(n=!0);var i=e||(null===(r=t.match(/^([a-z][a-z0-9]+)/))||void 0===r?void 0:r[0])||"",o=t.replace(new RegExp("^(".concat(i,")")),"");return n?function(t){return t.toString().charAt(0).toLowerCase()+t.toString().slice(1)}(o):o}var aT=function(t,e){if(!(null==t?void 0:t.startsWith(e)))return!1;var n=t[e.length];return n>="A"&&n<="Z"};function sT(t,e,n){void 0===n&&(n=!1);var r={};return Object.entries(t).forEach(function(t){var i,o=Be(t,2),a=o[0],s=o[1];if("className"===a||"class"===a);else if(aT(a,"show")&&aT(oT(a,"show"),e)!==n)a===(i=e,"".concat("show").concat(iT(i)))?r[a]=s:r[a.replace(new RegExp(iT(e)),"")]=s;else if(!aT(a,"show")&&aT(a,e)!==n){var u=oT(a,e);"filter"===u&&"function"==typeof s||(r[u]=s)}}),r}function uT(t,e){return Object.entries(t).reduce(function(t,n){var r=Be(n,2),i=r[0],o=r[1];return i.startsWith("show")?t["show".concat(e).concat(i.slice(4))]=o:t["".concat(e).concat(iT(i))]=o,t},{})}function cT(t,e){void 0===e&&(e=["x","y","class","className"]);var n=["transform","transformOrigin","anchor","visibility","pointerEvents","zIndex","cursor","clipPath","clipPathTargets","offsetPath","offsetPathTargets","offsetDistance","draggable","droppable"],r={},i={};return Object.entries(t).forEach(function(t){var o=Be(t,2),a=o[0],s=o[1];e.includes(a)||(-1!==n.indexOf(a)?i[a]=s:r[a]=s)}),[r,i]}var lT=function(t){function e(e){void 0===e&&(e={});var n=e.style,r=we(e,["style"]);return t.call(this,be({style:be({text:"",fill:"black",fontFamily:"sans-serif",fontSize:16,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1,textAlign:"start",textBaseline:"middle"},n)},r))||this}return me(e,t),Object.defineProperty(e.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=eT(this)),this._offscreen},enumerable:!1,configurable:!0}),e.prototype.disconnectedCallback=function(){var t;null===(t=this._offscreen)||void 0===t||t.destroy()},e}(qu),AT=function(){function t(t,n,r,i,o,a,s){void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i=null),void 0===o&&(o=[null,null,null,null,null]),void 0===a&&(a=[]),void 0===s&&(s=[]),e.add(this),this._elements=Array.from(t),this._data=n,this._parent=r,this._document=i,this._enter=o[0],this._update=o[1],this._exit=o[2],this._merge=o[3],this._split=o[4],this._transitions=a,this._facetElements=s}var e,n,r;return t.prototype.selectAll=function(t){var e="string"==typeof t?this._parent.querySelectorAll(t):t;return new n(e,null,this._elements[0],this._document)},t.prototype.selectFacetAll=function(t){var e="string"==typeof t?this._parent.querySelectorAll(t):t;return new n(this._elements,null,this._parent,this._document,void 0,void 0,e)},t.prototype.select=function(t){var e="string"==typeof t?this._parent.querySelectorAll(t)[0]||null:t;return new n([e],null,e,this._document)},t.prototype.append=function(t){var e=this,r="function"==typeof t?t:function(){return e.createElement(t)},i=[];if(null!==this._data){for(var o=0;o<this._data.length;o++){var a=this._data[o],s=Be(Array.isArray(a)?a:[a,null],2),u=s[0],c=s[1];(A=r(u,o)).__data__=u,null!==c&&(A.__fromElements__=c),this._parent.appendChild(A),i.push(A)}return new n(i,null,this._parent,this._document)}for(o=0;o<this._elements.length;o++){var l=this._elements[o],A=r(u=l.__data__,o);l.appendChild(A),i.push(A)}return new n(i,null,i[0],this._document)},t.prototype.maybeAppend=function(t,n){var i=Oe(this,e,"m",r).call(this,"#"===t[0]?t:"#".concat(t),n);return i.attr("id",t),i},t.prototype.maybeAppendByClassName=function(t,n){var i=t.toString(),o=Oe(this,e,"m",r).call(this,"."===i[0]?i:".".concat(i),n);return o.attr("className",i),o},t.prototype.maybeAppendByName=function(t,n){var i=Oe(this,e,"m",r).call(this,'[name="'.concat(t,'"]'),n);return i.attr("name",t),i},t.prototype.data=function(t,e,r){var i,o;void 0===e&&(e=function(t){return t}),void 0===r&&(r=function(){return null});for(var a=[],s=[],u=new Set(this._elements),c=[],l=new Set,A=new Map(this._elements.map(function(t,n){return[e(t.__data__,n),t]})),f=new Map(this._facetElements.map(function(t,n){return[e(t.__data__,n),t]})),d=function(t){var e=new Map;return t.forEach(function(t){var n=function(t){return r(t.__data__)}(t);e.has(n)||e.set(n,[]),e.get(n).push(t)}),e}(this._elements),h=0;h<t.length;h++){var p=t[h],v=e(p,h),g=r(p,h);if(A.has(v))(w=A.get(v)).__data__=p,w.__facet__=!1,s.push(w),u.delete(w),A.delete(v);else if(f.has(v))(w=f.get(v)).__data__=p,w.__facet__=!0,s.push(w),f.delete(v);else if(d.has(v)){var y=d.get(v);c.push([p,y]);try{for(var m=(i=void 0,Ee(y)),b=m.next();!b.done;b=m.next()){var w=b.value;u.delete(w)}}catch(t){i={error:t}}finally{try{b&&!b.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}d.delete(v)}else A.has(g)?((w=A.get(g)).__toData__?w.__toData__.push(p):w.__toData__=[p],l.add(w),u.delete(w)):a.push(p)}var x=[new n([],a,this._parent,this._document),new n(s,null,this._parent,this._document),new n(u,null,this._parent,this._document),new n([],c,this._parent,this._document),new n(l,null,this._parent,this._document)];return new n(this._elements,null,this._parent,this._document,x)},t.prototype.merge=function(t){var e=ke(ke([],Be(this._elements),!1),Be(t._elements),!1),r=ke(ke([],Be(this._transitions),!1),Be(t._transitions),!1);return new n(e,null,this._parent,this._document,void 0,r)},t.prototype.createElement=function(t){if(this._document)return this._document.createElement(t,{});var e=n.registry[t];return e?new e:function(t){throw new Error(t)}("Unknown node type: ".concat(t))},t.prototype.join=function(t,e,n,r,i){void 0===t&&(t=function(t){return t}),void 0===e&&(e=function(t){return t}),void 0===n&&(n=function(t){return t.remove()}),void 0===r&&(r=function(t){return t}),void 0===i&&(i=function(t){return t.remove()});var o=t(this._enter),a=e(this._update),s=n(this._exit),u=r(this._merge),c=i(this._split);return a.merge(o).merge(s).merge(u).merge(c)},t.prototype.remove=function(){for(var t=function(t){var n=e._elements[t],r=e._transitions[t];r?r.then(function(){return n.remove()}):n.remove()},e=this,r=0;r<this._elements.length;r++)t(r);return new n([],null,this._parent,this._document,void 0,this._transitions)},t.prototype.each=function(t){for(var e=0;e<this._elements.length;e++){var n=this._elements[e],r=n.__data__;t.call(n,r,e)}return this},t.prototype.attr=function(t,e){var n="function"!=typeof e?function(){return e}:e;return this.each(function(r,i){void 0!==e&&(this[t]=n.call(this,r,i))})},t.prototype.style=function(t,e,n){void 0===n&&(n=!0);var r="function"==typeof e&&n?e:function(){return e};return this.each(function(n,i){void 0!==e&&(this.style[t]=r.call(this,n,i))})},t.prototype.styles=function(t,e){return void 0===t&&(t={}),void 0===e&&(e=!0),this.each(function(n,r){var i=this;Object.entries(t).forEach(function(t){var o=Be(t,2),a=o[0],s=o[1],u="function"==typeof s&&e?s:function(){return s};void 0!==s&&i.attr(a,u.call(i,n,r))})})},t.prototype.update=function(t,e){void 0===e&&(e=!0);var n="function"==typeof t&&e?t:function(){return t};return this.each(function(e,r){t&&this.update&&this.update(n.call(this,e,r))})},t.prototype.maybeUpdate=function(t,e){void 0===e&&(e=!0);var n="function"==typeof t&&e?t:function(){return t};return this.each(function(e,r){t&&this.update&&this.update(n.call(this,e,r))})},t.prototype.transition=function(t){this._transitions;var e=new Array(this._elements.length);return this.each(function(n,r){e[r]=t.call(this,n,r)}),this._transitions=function(t){if(!tn(t))return[];for(var e=[],n=0;n<t.length;n++)e=e.concat(t[n]);return e}(e),this},t.prototype.on=function(t,e){return this.each(function(){this.addEventListener(t,e)}),this},t.prototype.call=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return t.call.apply(t,ke([this._parent,this],Be(e),!1)),this},t.prototype.node=function(){return this._elements[0]},t.prototype.nodes=function(){return this._elements},t.prototype.transitions=function(){return this._transitions.filter(function(t){return!!t})},t.prototype.parent=function(){return this._parent},n=t,e=new WeakSet,r=function(t,e){var r=this._elements[0],i=r.querySelector(t);if(i)return new n([i],null,this._parent,this._document);var o="string"==typeof e?this.createElement(e):e();return r.appendChild(o),new n([o],null,this._parent,this._document)},t.registry={g:_u,rect:Yu,circle:Pu,path:zu,text:lT,ellipse:Lu,image:ju,line:Ru,polygon:Gu,polyline:Wu,html:Uu},t}();function fT(t){return new AT([t],null,t,t.ownerDocument)}var dT=function(){function t(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x=0,this.y=0,this.width=0,this.height=0,this.x=t,this.y=e,this.width=n,this.height=r}return Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t.prototype.toJSON=function(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.top,right:this.right,bottom:this.bottom,left:this.left}},t.prototype.isPointIn=function(t,e){return t>=this.left&&t<=this.right&&e>=this.top&&e<=this.bottom},t}(),hT=function(t,e){var n=function(t){return"".concat(e,"-").concat(t)},r=Object.fromEntries(Object.entries(t).map(function(t){var e=Be(t,2),r=e[0],i=e[1],o=n(i);return[r,{name:o,class:".".concat(o),id:"#".concat(o),toString:function(){return o}}]}));return Object.assign(r,{prefix:n}),r};function pT(t){return/\S+-\S+/g.test(t)?t.split("-").map(function(t){return t[0]}):t.length>2?[t[0]]:t.split("")}function vT(t){if(de(t))return[t,t,t,t];if(tn(t)){var e=t.length;if(1===e)return[t[0],t[0],t[0],t[0]];if(2===e)return[t[0],t[1],t[0],t[1]];if(3===e)return[t[0],t[1],t[2],t[1]];if(4===e)return t}return[0,0,0,0]}function gT(t,e,n,r,i){return void 0===r&&(r=!0),void 0===i&&(i=function(t){t.node().removeChildren()}),t?n(e):(r&&i(e),null)}function yT(t,e,n){return n?"".concat(t," ").concat(n,"legend-").concat(e):t}var mT="marker",bT="handle-marker",wT="handle-label",xT=hT({text:"text"},"title");function ET(t,e){var n=Object.entries(e).reduce(function(e,n){var r=Be(n,2),i=r[0],o=r[1];return t.node().attr(i)||(e[i]=o),e},{});t.styles(n)}var BT=function(t){function e(e){return t.call(this,e,{text:"",width:0,height:0,fill:"#4a505a",fontWeight:"bold",fontSize:12,fontFamily:"sans-serif",inset:0,spacing:0,position:"top-left"})||this}return me(e,t),e.prototype.getAvailableSpace=function(){var t=this.attributes,e=t.width,n=t.height,r=t.position,i=t.spacing,o=t.inset,a=this.querySelector(xT.text.class);if(!a)return new dT(0,0,+e,+n);var s=a.getBBox(),u=s.width,c=s.height,l=Be(vT(i),4),A=l[0],f=l[1],d=l[2],h=l[3],p=Be([0,0,+e,+n],4),v=p[0],g=p[1],y=p[2],m=p[3],b=pT(r);if(b.includes("i"))return new dT(v,g,y,m);b.forEach(function(t,r){var i,o,a,s;"t"===t&&(i=Be(0===r?[c+d,+n-c-d]:[0,+n],2),g=i[0],m=i[1]),"r"===t&&(o=Be([+e-u-h],1),y=o[0]),"b"===t&&(a=Be([+n-c-A],1),m=a[0]),"l"===t&&(s=Be(0===r?[u+f,+e-u-f]:[0,+e],2),v=s[0],y=s[1])});var w=Be(vT(o),4),x=w[0],E=w[1],B=w[2],k=w[3],O=Be([k+E,x+B],2),C=O[0],M=O[1];return new dT(v+k,g+x,y-C,m-M)},e.prototype.getBBox=function(){return this.title?this.title.getBBox():new dT(0,0,0,0)},e.prototype.render=function(t,e){var n=this,r=(t.width,t.height,t.position,t.spacing,t.classNamePrefix),i=we(t,["width","height","position","spacing","classNamePrefix"]),o=Be(cT(i),1)[0],a=function(t){var e,n,r,i,o=t,a=o.width,s=o.height,u=o.position,c=Be([+a/2,+s/2],2),l=Be([+c[0],+c[1],"center","middle"],4),A=l[0],f=l[1],d=l[2],h=l[3],p=pT(u);return p.includes("l")&&(A=(e=Be([0,"start"],2))[0],d=e[1]),p.includes("r")&&(A=(n=Be([+a,"end"],2))[0],d=n[1]),p.includes("t")&&(f=(r=Be([0,"top"],2))[0],h=r[1]),p.includes("b")&&(f=(i=Be([+s,"bottom"],2))[0],h=i[1]),{x:A,y:f,textAlign:d,textBaseline:h}}(t),s=a.x,u=a.y,c=a.textAlign,l=a.textBaseline;gT(!!i.text,fT(e),function(t){var e=yT(xT.text.name,"title",r);n.title=t.maybeAppendByClassName(xT.text,"text").attr("className",e).styles(o).call(ET,{x:s,y:u,textAlign:c,textBaseline:l}).node()})},e}(rT);const kT=function(){};function OT(t,e){return mn(t)?t.apply(void 0,ke([],Be(e),!1)):t}function CT(t){if(!t)return{enter:!1,update:!1,exit:!1};var e=["enter","update","exit"],n=Object.fromEntries(Object.entries(t).filter(function(t){var n=Be(t,1)[0];return!e.includes(n)}));return Object.fromEntries(e.map(function(e){return function(t){return"boolean"!=typeof t&&"enter"in t&&"update"in t&&"exit"in t}(t)?!1===t[e]?[e,!1]:[e,be(be({},t[e]),n)]:[e,n]}))}function MT(t,e){t?t.finished.then(e):e()}function ST(t,e){"update"in t?t.update(e):t.attr(e)}function FT(t,e,n){return 0===e.length?null:n?t.animate(e,n):(ST(t,{style:e.slice(-1)[0]}),null)}function TT(t,e,n){var r={},i={};return Object.entries(e).forEach(function(e){var n=Be(e,2),o=n[0],a=n[1];if(!pe(a)){var s=t.style[o]||t.parsedStyle[o]||0;s!==a&&(r[o]=s,i[o]=a)}}),n?FT(t,[r,i],be({fill:"both"},n)):(ST(t,i),null)}function PT(t,e,n){void 0===n&&(n=!1);var r=t.getBBox(),i=r.width,o=r.height,a=e/Math.max(i,o);return n&&(t.style.transform="scale(".concat(a,")")),a}var IT=function(t,e,n){return[["M",t-n,e],["A",n,n,0,1,0,t+n,e],["A",n,n,0,1,0,t-n,e],["Z"]]},NT=IT,LT=function(t,e,n){return[["M",t,e+n],["L",t,e-n]]},_T=function(t,e,n){return[["M",t-n,e],["L",t+n,e]]},QT=_T,UT=function(t,e,n){return[["M",t-n,e-n],["L",t+n,e],["L",t-n,e+n],["Z"]]},jT=hT({prevBtnGroup:"prev-btn-group",prevBtn:"prev-btn",nextBtnGroup:"next-btn-group",nextBtn:"next-btn",pageInfoGroup:"page-info-group",pageInfo:"page-info",playWindow:"play-window",contentGroup:"content-group",controller:"controller",clipPath:"clip-path"},"navigator"),DT=function(t){function e(e){var n=t.call(this,e,{x:0,y:0,animate:{easing:"linear",duration:200,fill:"both"},buttonCursor:"pointer",buttonFill:"black",buttonD:UT(0,0,6),buttonSize:12,controllerPadding:5,controllerSpacing:5,formatter:function(t,e){return"".concat(t,"/").concat(e)},defaultPage:0,loop:!1,orientation:"horizontal",pageNumFill:"black",pageNumFontSize:12,pageNumTextAlign:"start",pageNumTextBaseline:"middle"})||this;return n.playState="idle",n.contentGroup=n.appendChild(new _u({class:jT.contentGroup.name})),n.playWindow=n.contentGroup.appendChild(new _u({class:jT.playWindow.name})),n.innerCurrPage=n.defaultPage,n}return me(e,t),Object.defineProperty(e.prototype,"defaultPage",{get:function(){var t=this.attributes.defaultPage;return ge(t,0,Math.max(this.pageViews.length-1,0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageViews",{get:function(){return this.playWindow.children},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"controllerShape",{get:function(){return this.totalPages>1?{width:55,height:0}:{width:0,height:0}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageShape",{get:function(){var t=Be(function(t){var e;return(null===(e=t[0])||void 0===e?void 0:e.map(function(e,n){return t.map(function(t){return t[n]})}))||[]}(this.pageViews.map(function(t){var e=t.getBBox();return[e.width,e.height]})).map(function(t){return Math.max.apply(Math,ke([],Be(t),!1))}),2),e=t[0],n=t[1],r=this.attributes,i=r.pageWidth,o=void 0===i?e:i,a=r.pageHeight;return{pageWidth:o,pageHeight:void 0===a?n:a}},enumerable:!1,configurable:!0}),e.prototype.getContainer=function(){return this.playWindow},Object.defineProperty(e.prototype,"totalPages",{get:function(){return this.pageViews.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currPage",{get:function(){return this.innerCurrPage},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var e=t.prototype.getBBox.call(this),n=e.x,r=e.y,i=this.controllerShape,o=this.pageShape,a=o.pageWidth,s=o.pageHeight;return new dT(n,r,a+i.width,s)},e.prototype.goTo=function(t){var e=this,n=this.attributes.animate,r=this,i=r.currPage,o=r.playState,a=r.playWindow,s=r.pageViews;if("idle"!==o||t<0||s.length<=0||t>=s.length)return null;s[i].setLocalPosition(0,0),this.prepareFollowingPage(t);var u=Be(this.getFollowingPageDiff(t),2),c=u[0],l=u[1];this.playState="running";var A=FT(a,[{transform:"translate(0, 0)"},{transform:"translate(".concat(-c,", ").concat(-l,")")}],n);return MT(A,function(){e.innerCurrPage=t,e.playState="idle",e.setVisiblePages([t]),e.updatePageInfo()}),A},e.prototype.prev=function(){var t=this.attributes.loop,e=this.pageViews.length,n=this.currPage;if(!t&&n<=0)return null;var r=t?(n-1+e)%e:ge(n-1,0,e);return this.goTo(r)},e.prototype.next=function(){var t=this.attributes.loop,e=this.pageViews.length,n=this.currPage;if(!t&&n>=e-1)return null;var r=t?(n+1)%e:ge(n+1,0,e);return this.goTo(r)},e.prototype.renderClipPath=function(t){var e=this.pageShape,n=e.pageWidth,r=e.pageHeight;n&&r?(this.clipPath=t.maybeAppendByClassName(jT.clipPath,"rect").styles({width:n,height:r}),this.contentGroup.attr("clipPath",this.clipPath.node())):this.contentGroup.style.clipPath=void 0},e.prototype.setVisiblePages=function(t){this.playWindow.children.forEach(function(e,n){t.includes(n)?XF(e):qF(e)})},e.prototype.adjustControllerLayout=function(){var t=this,e=t.prevBtnGroup,n=t.nextBtnGroup,r=t.pageInfoGroup,i=this.attributes,o=i.orientation,a=i.controllerPadding,s=r.getBBox(),u=s.width,c=(s.height,Be("horizontal"===o?[-180,0]:[-90,90],2)),l=c[0],A=c[1];e.setLocalEulerAngles(l),n.setLocalEulerAngles(A);var f=e.getBBox(),d=f.width,h=f.height,p=n.getBBox(),v=p.width,g=p.height,y=Math.max(d,u,v),m="horizontal"===o?{offset:[[0,0],[d/2+a,0],[d+u+2*a,0]],textAlign:"start"}:{offset:[[y/2,-h-a],[y/2,0],[y/2,g+a]],textAlign:"center"},b=Be(m.offset,3),w=Be(b[0],2),x=w[0],E=w[1],B=Be(b[1],2),k=B[0],O=B[1],C=Be(b[2],2),M=C[0],S=C[1],F=m.textAlign,T=r.querySelector("text");T&&(T.style.textAlign=F),e.setLocalPosition(x,E),r.setLocalPosition(k,O),n.setLocalPosition(M,S)},e.prototype.updatePageInfo=function(){var t,e=this,n=e.currPage,r=e.pageViews,i=e.attributes.formatter;r.length<2||(null===(t=this.pageInfoGroup.querySelector(jT.pageInfo.class))||void 0===t||t.attr("text",i(n+1,r.length)),this.adjustControllerLayout())},e.prototype.getFollowingPageDiff=function(t){var e=this.currPage;if(e===t)return[0,0];var n=this.attributes.orientation,r=this.pageShape,i=r.pageWidth,o=r.pageHeight,a=t<e?-1:1;return"horizontal"===n?[a*i,0]:[0,a*o]},e.prototype.prepareFollowingPage=function(t){var e=this.currPage,n=this.pageViews;if(this.setVisiblePages([t,e]),t!==e){var r=Be(this.getFollowingPageDiff(t),2),i=r[0],o=r[1];n[t].setLocalPosition(i,o)}},e.prototype.renderController=function(t){var e=this,n=this.attributes,r=n.controllerSpacing,i=n.classNamePrefix,o=void 0===i?"":i,a=this.pageShape,s=a.pageWidth,u=a.pageHeight,c=this.pageViews.length>=2,l=t.maybeAppendByClassName(jT.controller,"g");if(ZF(l.node(),c),c){var A=sT(this.attributes,"button"),f=sT(this.attributes,"pageNum"),d=Be(cT(A),2),h=d[0],p=d[1],v=h.size,g=we(h,["size"]),y=!l.select(jT.prevBtnGroup.class).node(),m=l.maybeAppendByClassName(jT.prevBtnGroup,"g").styles(p);this.prevBtnGroup=m.node();var b=m.maybeAppendByClassName(jT.prevBtn,"path");if(o){var w=yT(jT.prevBtn.name,"prev-btn",o);b.node().setAttribute("class",w)}var x=l.maybeAppendByClassName(jT.nextBtnGroup,"g").styles(p);this.nextBtnGroup=x.node();var E=x.maybeAppendByClassName(jT.nextBtn,"path");if(o){var B=yT(jT.nextBtn.name,"next-btn",o);E.node().setAttribute("class",B)}[b,E].forEach(function(t){t.styles(be(be({},g),{transformOrigin:"center"})),PT(t.node(),v,!0)});var k=l.maybeAppendByClassName(jT.pageInfoGroup,"g");this.pageInfoGroup=k.node();var O=k.maybeAppendByClassName(jT.pageInfo,"text");if(O.styles(f),o){var C=yT(jT.pageInfo.name,"page-info",o);O.node().setAttribute("class",C)}this.updatePageInfo(),l.node().setLocalPosition(s+r,u/2),y&&(this.prevBtnGroup.addEventListener("click",function(){e.prev()}),this.nextBtnGroup.addEventListener("click",function(){e.next()}))}},e.prototype.render=function(t,e){var n=t.x,r=void 0===n?0:n,i=t.y,o=void 0===i?0:i;this.attr("transform","translate(".concat(r,", ").concat(o,")"));var a=fT(e);this.renderClipPath(a),this.renderController(a),this.setVisiblePages([this.defaultPage]),this.goTo(this.defaultPage)},e.prototype.bindEvents=function(){var t=this,e=AB(function(){return t.render(t.attributes,t)},50);this.playWindow.addEventListener(Hs.INSERTED,e),this.playWindow.addEventListener(Hs.REMOVED,e)},e}(rT);var RT,HT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return me(e,t),e.prototype.render=function(t,n){var r=t.x,i=void 0===r?0:r,o=t.y,a=void 0===o?0:o,s=this.getSubShapeStyle(t),u=s.symbol,c=s.size,l=void 0===c?16:c,A=we(s,["symbol","size"]),f=function(t){var e=function(t){var e="default";if(bn(t)&&t instanceof Image)e="image";else if(mn(t))e="symbol";else if(ve(t)){var n=new RegExp("data:(image|text)");e=t.match(n)?"base64":/^(https?:\/\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\.)+[a-zA-Z]+)(:\d+)?(\/.*)?(\?.*)?(#.*)?$/.test(t)?"url":"symbol"}return e}(t);return["base64","url","image"].includes(e)?"image":t&&"symbol"===e?"path":null}(u);gT(!!f,fT(n),function(t){t.maybeAppendByClassName("marker",f).attr("className","marker ".concat(f,"-marker")).call(function(t){if("image"===f){var n=2*l;t.styles({img:u,width:n,height:n,x:i-l,y:a-l})}else{n=l/2;var r=mn(u)?u:e.getSymbol(u);t.styles(be({d:null==r?void 0:r(i,a,n)},A))}})})},e.MARKER_SYMBOL_MAP=new Map,e.registerSymbol=function(t,n){e.MARKER_SYMBOL_MAP.set(t,n)},e.getSymbol=function(t){return e.MARKER_SYMBOL_MAP.get(t)},e.getSymbols=function(){return Array.from(e.MARKER_SYMBOL_MAP.keys())},e}(rT);function zT(t,e,n){return void 0===t&&(t="horizontal"),"horizontal"===t?e:n}function KT(t){var e=t.getLocalBounds(),n=Be([e.min,e.max],2),r=Be(n[0],2),i=r[0],o=r[1],a=Be(n[1],2),s=a[0],u=a[1];return{x:i,y:o,width:s-i,height:u-o,left:i,bottom:u,top:o,right:s}}function GT(t,e){var n=Be(t,2),r=n[0],i=n[1],o=Be(e,2),a=o[0],s=o[1];return r!==a&&i===s}function VT(t){return"function"==typeof t?t():ve(t)||de(t)?new lT({style:{text:String(t)}}):t}HT.registerSymbol("cross",function(t,e,n){return[["M",t-n,e-n],["L",t+n,e+n],["M",t+n,e-n],["L",t-n,e+n]]}),HT.registerSymbol("hyphen",function(t,e,n){return[["M",t-n,e],["L",t+n,e]]}),HT.registerSymbol("line",LT),HT.registerSymbol("plus",function(t,e,n){return[["M",t-n,e],["L",t+n,e],["M",t,e-n],["L",t,e+n]]}),HT.registerSymbol("tick",function(t,e,n){return[["M",t-n/2,e-n],["L",t+n/2,e-n],["M",t,e-n],["L",t,e+n],["M",t-n/2,e+n],["L",t+n/2,e+n]]}),HT.registerSymbol("circle",IT),HT.registerSymbol("point",NT),HT.registerSymbol("bowtie",function(t,e,n){var r=n-1.5;return[["M",t-n,e-r],["L",t+n,e+r],["L",t+n,e-r],["L",t-n,e+r],["Z"]]}),HT.registerSymbol("hexagon",function(t,e,n){var r=n/2*Math.sqrt(3);return[["M",t,e-n],["L",t+r,e-n/2],["L",t+r,e+n/2],["L",t,e+n],["L",t-r,e+n/2],["L",t-r,e-n/2],["Z"]]}),HT.registerSymbol("square",function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]]}),HT.registerSymbol("diamond",function(t,e,n){return[["M",t-n,e],["L",t,e-n],["L",t+n,e],["L",t,e+n],["Z"]]}),HT.registerSymbol("triangle",function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e+r],["L",t,e-r],["L",t+n,e+r],["Z"]]}),HT.registerSymbol("triangle-down",function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e-r],["L",t+n,e-r],["L",t,e+r],["Z"]]}),HT.registerSymbol("line",LT),HT.registerSymbol("dot",_T),HT.registerSymbol("dash",QT),HT.registerSymbol("smooth",function(t,e,n){return[["M",t-n,e],["A",n/2,n/2,0,1,1,t,e],["A",n/2,n/2,0,1,0,t+n,e]]}),HT.registerSymbol("hv",function(t,e,n){return[["M",t-n-1,e-2.5],["L",t,e-2.5],["L",t,e+2.5],["L",t+n+1,e+2.5]]}),HT.registerSymbol("vh",function(t,e,n){return[["M",t-n-1,e+2.5],["L",t,e+2.5],["L",t,e-2.5],["L",t+n+1,e-2.5]]}),HT.registerSymbol("hvh",function(t,e,n){return[["M",t-(n+1),e+2.5],["L",t-n/2,e+2.5],["L",t-n/2,e-2.5],["L",t+n/2,e-2.5],["L",t+n/2,e+2.5],["L",t+n+1,e+2.5]]}),HT.registerSymbol("vhv",function(t,e){return[["M",t-5,e+2.5],["L",t-5,e],["L",t,e],["L",t,e-3],["L",t,e+3],["L",t+6.5,e+3]]}),HT.registerSymbol("focus",function(t,e,n){var r=.2*n,i=.7*n;return[["M",t-n,e],["A",n,n,0,1,0,t+n,e],["A",n,n,0,1,0,t-n,e],["Z"],["M",t-i,e],["L",t-r,e],["M",t+r,e],["L",t+i,e],["M",t,e-i],["L",t,e-r],["M",t,e+r],["L",t,e+i]]}),HT.registerSymbol("hiddenHandle",function(t,e,n){var r=1.4*n;return[["M",t-n,e-r],["L",t+n,e-r],["L",t+n,e+r],["L",t-n,e+r],["Z"]]}),HT.registerSymbol("verticalHandle",function(t,e,n){var r=1.4*n,i=n/2,o=n/6,a=t+.4*r;return[["M",t,e],["L",a,e+i],["L",t+r,e+i],["L",t+r,e-i],["L",a,e-i],["Z"],["M",a,e+o],["L",t+r-2,e+o],["M",a,e-o],["L",t+r-2,e-o]]}),HT.registerSymbol("horizontalHandle",function(t,e,n){var r=1.4*n,i=n/2,o=n/6,a=e+.4*r;return[["M",t,e],["L",t-i,a],["L",t-i,e+r],["L",t+i,e+r],["L",t+i,a],["Z"],["M",t-o,a],["L",t-o,e+r-2],["M",t+o,a],["L",t+o,e+r-2]]});var WT,YT=ZM(function(t,e){var n=e.fontSize,r=e.fontFamily,i=e.fontWeight,o=e.fontStyle,a=e.fontVariant;return RT||(RT=yu.offscreenCanvasCreator.getOrCreateContext(void 0)),RT.font=[o,a,i,"".concat(n,"px"),r].join(" "),RT.measureText(t).width},function(t,e){return[t,Object.values(e||XT(t)).join()].join("")},4096),XT=function(t){var e=t.style.fontFamily||"sans-serif",n=t.style.fontWeight||"normal",r=t.style.fontStyle||"normal",i=t.style.fontVariant,o=t.style.fontSize;return{fontSize:o="object"==typeof o?o.value:o,fontFamily:e,fontWeight:n,fontStyle:r,fontVariant:i}};function qT(t){return"text"===t.nodeName?t:"g"===t.nodeName&&1===t.children.length&&"text"===t.children[0].nodeName?t.children[0]:null}function ZT(t,e){var n=qT(t);n&&n.attr(e)}function JT(t,e,n){void 0===n&&(n="..."),ZT(t,{wordWrap:!0,wordWrapWidth:e,maxLines:1,textOverflow:n})}function $T(t,e){for(var n in e)e.hasOwnProperty(n)&&"constructor"!==n&&void 0!==e[n]&&(t[n]=e[n])}function tP(t,e,n,r){return e&&$T(t,e),n&&$T(t,n),r&&$T(t,r),t}var eP="component-poptip",nP="component-poptip-arrow",rP="component-poptip-text",iP=((WT={})[".".concat(eP)]={visibility:"visible",position:"absolute","background-color":"rgba(0, 0, 0)","box-shadow":"0px 0px 10px #aeaeae","border-radius":"3px",color:"#fff",opacity:.8,"font-size":"12px",padding:"4px 6px",display:"flex","justify-content":"center","align-items":"center","z-index":8,transition:"visibility 50ms"},WT[".".concat(rP)]={"text-align":"center"},WT[".".concat(eP,"[data-position='top']")]={transform:"translate(-50%, -100%)"},WT[".".concat(eP,"[data-position='left']")]={transform:"translate(-100%, -50%)"},WT[".".concat(eP,"[data-position='right']")]={transform:"translate(0, -50%)"},WT[".".concat(eP,"[data-position='bottom']")]={transform:"translate(-50%, 0)"},WT[".".concat(eP,"[data-position='top-left']")]={transform:"translate(0,-100%)"},WT[".".concat(eP,"[data-position='top-right']")]={transform:"translate(-100%,-100%)"},WT[".".concat(eP,"[data-position='left-top']")]={transform:"translate(-100%, 0)"},WT[".".concat(eP,"[data-position='left-bottom']")]={transform:"translate(-100%, -100%)"},WT[".".concat(eP,"[data-position='right-top']")]={transform:"translate(0, 0)"},WT[".".concat(eP,"[data-position='right-bottom']")]={transform:"translate(0, -100%)"},WT[".".concat(eP,"[data-position='bottom-left']")]={transform:"translate(0, 0)"},WT[".".concat(eP,"[data-position='bottom-right']")]={transform:"translate(-100%, 0)"},WT[".".concat(nP)]={width:"4px",height:"4px",transform:"rotate(45deg)","background-color":"rgba(0, 0, 0)",position:"absolute","z-index":-1},WT[".".concat(eP,"[data-position='top']")]={transform:"translate(-50%, calc(-100% - 5px))"},WT["[data-position='top'] .".concat(nP)]={bottom:"-2px"},WT[".".concat(eP,"[data-position='left']")]={transform:"translate(calc(-100% - 5px), -50%)"},WT["[data-position='left'] .".concat(nP)]={right:"-2px"},WT[".".concat(eP,"[data-position='right']")]={transform:"translate(5px, -50%)"},WT["[data-position='right'] .".concat(nP)]={left:"-2px"},WT[".".concat(eP,"[data-position='bottom']")]={transform:"translate(-50%, 5px)"},WT["[data-position='bottom'] .".concat(nP)]={top:"-2px"},WT[".".concat(eP,"[data-position='top-left']")]={transform:"translate(0, calc(-100% - 5px))"},WT["[data-position='top-left'] .".concat(nP)]={left:"10px",bottom:"-2px"},WT[".".concat(eP,"[data-position='top-right']")]={transform:"translate(-100%, calc(-100% - 5px))"},WT["[data-position='top-right'] .".concat(nP)]={right:"10px",bottom:"-2px"},WT[".".concat(eP,"[data-position='left-top']")]={transform:"translate(calc(-100% - 5px), 0)"},WT["[data-position='left-top'] .".concat(nP)]={right:"-2px",top:"8px"},WT[".".concat(eP,"[data-position='left-bottom']")]={transform:"translate(calc(-100% - 5px), -100%)"},WT["[data-position='left-bottom'] .".concat(nP)]={right:"-2px",bottom:"8px"},WT[".".concat(eP,"[data-position='right-top']")]={transform:"translate(5px, 0)"},WT["[data-position='right-top'] .".concat(nP)]={left:"-2px",top:"8px"},WT[".".concat(eP,"[data-position='right-bottom']")]={transform:"translate(5px, -100%)"},WT["[data-position='right-bottom'] .".concat(nP)]={left:"-2px",bottom:"8px"},WT[".".concat(eP,"[data-position='bottom-left']")]={transform:"translate(0, 5px)"},WT["[data-position='bottom-left'] .".concat(nP)]={top:"-2px",left:"8px"},WT[".".concat(eP,"[data-position='bottom-right']")]={transform:"translate(-100%, 5px)"},WT["[data-position='bottom-right'] .".concat(nP)]={top:"-2px",right:"8px"},WT);function oP(t){var e=t&&document.getElementById(t);return e||((e=document.createElement("div")).setAttribute("id",t),document.body.appendChild(e)),e}var aP=function(t){function e(n){var r=t.call(this,Xm({style:{id:"component-poptip"}},e.defaultOptions,n))||this;return r.visibility="visible",r.map=new Map,r.domStyles="",r.initShape(),r.render(r.attributes,r),r}return me(e,t),Object.defineProperty(e.prototype,"visible",{get:function(){return"visible"===this.visibility},enumerable:!1,configurable:!0}),e.prototype.render=function(t,e){this.visibility=this.style.visibility,this.updatePoptipElement()},e.prototype.update=function(t){this.attr(Xm({},this.style,t)),this.render(this.attributes,this)},e.prototype.bind=function(t,e){var n=this;if(t){var r=this.style.text,i=function(i){var o=t,a=n.style,s=r;if(e){var u="function"==typeof e?e.call(null,i):e,c=u.html,l=u.target,A=we(u,["html","target"]);a=tP({},n.style,A),(l||!1===l)&&(o=l),"string"==typeof c&&(s=c)}var f=a.position,d=a.arrowPointAtCenter,h=a.follow,p=a.offset;if(o){var v=i,g=Be(function(t,e,n,r,i,o){if(void 0===i&&(i=!1),void 0===o&&(o=!1),o)return[t,e];var a=n.getBoundingClientRect(),s=a.x,u=a.y,c=a.width,l=a.height;switch(r){case"top":return i?[s+c/2,u]:[t,u];case"left":return i?[s,u+l/2]:[s,e];case"bottom":return i?[s+c/2,u+l]:[t,u+l];case"right":return i?[s+c,u+l/2]:[s+c,e];case"top-right":case"right-top":return[s+c,u];case"left-bottom":case"bottom-left":return[s,u+l];case"right-bottom":case"bottom-right":return[s+c,u+l];default:return[s,u]}}(v.clientX,v.clientY,o,f,d,h),2),y=g[0],m=g[1];n.showTip(y,m,{text:s,position:f,offset:p})}else n.hideTip()},o=function(){n.hideTip()};t.addEventListener("mousemove",i),t.addEventListener("mouseleave",o),this.map.set(t,[i,o])}},e.prototype.unbind=function(t){if(this.map.has(t)){var e=Be(this.map.get(t)||[],2),n=e[0],r=e[1];n&&t.removeEventListener("mousemove",n),r&&t.removeEventListener("mouseleave",r),this.map.delete(t)}},e.prototype.clear=function(){this.container.innerHTML=""},e.prototype.destroy=function(){var e,n=this;ke([],Be(this.map.keys()),!1).forEach(function(t){return n.unbind(t)}),null===(e=this.container)||void 0===e||e.remove(),t.prototype.destroy.call(this)},e.prototype.showTip=function(t,e,n){var r=Gb(n,"text");if((!r||"string"==typeof r)&&(this.applyStyles(),t&&e&&n)){var i=n.offset,o=n.position;if(o&&this.container.setAttribute("data-position",o),this.setOffsetPosition(t,e,i),"string"==typeof r){var a=this.container.querySelector(".".concat(rP));a&&(a.innerHTML=r)}this.visibility="visible",this.container.style.visibility="visible"}},e.prototype.hideTip=function(){this.visibility="hidden",this.container.style.visibility="hidden"},e.prototype.getContainer=function(){return this.container},e.prototype.getClassName=function(){var t=this.style.containerClassName;return"".concat(eP).concat(t?" ".concat(t):"")},e.prototype.initShape=function(){var t=this,e=this.style.id;this.container=function(t){var e,n,r=(e=oP,function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return n||(n=e.apply(void 0,t)),n})(t);return r}(e),this.container.className=this.getClassName(),this.container.addEventListener("mousemove",function(){return t.showTip()}),this.container.addEventListener("mouseleave",function(){return t.hideTip()})},e.prototype.updatePoptipElement=function(){var t=this.container;this.clear();var e=this.style,n=e.id,r=e.template,i=e.text;this.container.setAttribute("id",n),this.container.className=this.getClassName();var o='<span class="'.concat(nP,'"></span>');t.innerHTML=o,ve(r)?t.innerHTML+=r:r&&function(t){return t instanceof Element||t instanceof Document}(r)&&t.appendChild(r),i&&(t.getElementsByClassName(rP)[0].textContent=i),this.applyStyles(),this.container.style.visibility=this.visibility},e.prototype.applyStyles=function(){var t=$F({},iP,this.style.domStyles),e=Object.entries(t).reduce(function(t,e){var n=Be(e,2),r=n[0],i=n[1],o=Object.entries(i).reduce(function(t,e){var n=Be(e,2),r=n[0],i=n[1];return"".concat(t).concat(r,": ").concat(i,";")},"");return"".concat(t).concat(r,"{").concat(o,"}")},"");if(this.domStyles!==e){this.domStyles=e;var n=this.container.querySelector("style");n&&this.container.removeChild(n),(n=document.createElement("style")).innerHTML=e,this.container.appendChild(n)}},e.prototype.setOffsetPosition=function(t,e,n){void 0===n&&(n=this.style.offset);var r=Be(n,2),i=r[0],o=void 0===i?0:i,a=r[1],s=void 0===a?0:a;this.container.style.left="".concat(t+o,"px"),this.container.style.top="".concat(e+s,"px")},e.tag="poptip",e.defaultOptions={style:{x:0,y:0,width:0,height:0,target:null,visibility:"hidden",text:"",position:"top",follow:!1,offset:[0,0],domStyles:iP,template:'<div class="'.concat(rP,'"></div>')}},e}(rT),sP=hT({layout:"flex",markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label",valueGroup:"value-group",focusGroup:"focus-group",focus:"focus",value:"value",backgroundGroup:"background-group",background:"background"},"legend-category-item"),uP={offset:[0,20],domStyles:{".component-poptip":{opacity:"1",padding:"8px 12px",background:"#fff",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)"},".component-poptip-arrow":{display:"none"},".component-poptip-text":{color:"#000",lineHeight:"20px"}}},cP=function(t){function e(e,n){var r=t.call(this,e,{span:[1,1],marker:function(){return new Pu({style:{r:6}})},markerSize:10,labelFill:"#646464",valueFill:"#646464",labelFontSize:12,valueFontSize:12,labelTextBaseline:"middle",valueTextBaseline:"middle"})||this;return r.keyFields={},r.keyFields=n||{},r}return me(e,t),Object.defineProperty(e.prototype,"showValue",{get:function(){var t=this.attributes.valueText;return!!t&&("string"==typeof t||"number"==typeof t?""!==t:"function"==typeof t||""!==t.attr("text"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"actualSpace",{get:function(){var t=this.labelGroup,e=this.valueGroup,n=this.attributes,r=n.markerSize,i=n.focus,o=n.focusMarkerSize,a=t.node().getBBox(),s=a.width,u=a.height,c=e.node().getBBox(),l=c.width,A=c.height;return{markerWidth:r,labelWidth:s,valueWidth:l,focusWidth:i?null!=o?o:12:0,height:Math.max(r,u,A)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"span",{get:function(){var t=this.attributes.span;if(!t)return[1,1];var e=Be(vT(t),2),n=e[0],r=e[1],i=this.showValue?r:0,o=n+i;return[n/o,i/o]},enumerable:!1,configurable:!0}),e.prototype.setAttribute=function(e,n){t.prototype.setAttribute.call(this,e,n)},Object.defineProperty(e.prototype,"shape",{get:function(){var t,e=this.attributes,n=e.markerSize,r=e.width,i=this.actualSpace,o=i.markerWidth,a=i.focusWidth,s=i.height,u=this.actualSpace,c=u.labelWidth,l=u.valueWidth,A=Be(this.spacing,3),f=A[0],d=A[1],h=A[2];if(r){var p=r-n-f-d-a-h,v=Be(this.span,2);c=(t=Be([v[0]*p,v[1]*p],2))[0],l=t[1]}return{width:o+c+l+f+d+a+h,height:s,markerWidth:o,labelWidth:c,valueWidth:l,focusWidth:a}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"spacing",{get:function(){var t=this.attributes,e=t.spacing,n=t.focus;if(!e)return[0,0,0];var r=Be(vT(e),3),i=r[0],o=r[1],a=r[2];return[i,this.showValue?o:0,n?a:0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"layout",{get:function(){var t=this.shape,e=t.markerWidth,n=t.labelWidth,r=t.valueWidth,i=t.focusWidth,o=t.width,a=t.height,s=Be(this.spacing,3),u=s[0],c=s[1];return{height:a,width:o,markerWidth:e,labelWidth:n,valueWidth:r,focusWidth:i,position:[e/2,e+u,e+n+u+c,e+n+r+u+c+s[2]+i/2]}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleSize",{get:function(){var t,e,n=(t=this.markerGroup.node(),(e=t.querySelector(sP.marker.class))?e.style:{}),r=this.attributes,i=r.markerSize,o=r.markerStrokeWidth,a=void 0===o?n.strokeWidth:o,s=r.markerLineWidth,u=void 0===s?n.lineWidth:s,c=r.markerStroke,l=void 0===c?n.stroke:c,A=+(a||u||(l?1:0))*Math.sqrt(2),f=this.markerGroup.node().getBBox(),d=f.width,h=f.height;return(1-A/Math.max(d,h))*i},enumerable:!1,configurable:!0}),e.prototype.renderMarker=function(t){var e=this,n=this.attributes,r=n.marker,i=n.classNamePrefix,o=sT(this.attributes,"marker");this.markerGroup=t.maybeAppendByClassName(sP.markerGroup,"g").style("zIndex",0),gT(!!r,this.markerGroup,function(){var t,n=e.markerGroup.node(),a=null===(t=n.childNodes)||void 0===t?void 0:t[0],s=yT(sP.marker.name,mT,i),u="string"==typeof r?new HT({style:{symbol:r},className:s}):r();if(a)if(u.nodeName===a.nodeName)a instanceof HT?a.update(be(be({},o),{symbol:r})):(function(t,e){var n,r,i=e.attributes;try{for(var o=Ee(Object.entries(i)),a=o.next();!a.done;a=o.next()){var s=Be(a.value,2),u=s[0],c=s[1];"id"!==u&&"className"!==u&&t.attr(u,c)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}(a,u),fT(a).styles(o));else{if(a.remove(),!(u instanceof HT)){var c=yT(sP.marker.name,mT,i);u.className=c}fT(u).styles(o),n.appendChild(u)}else{if(!(u instanceof HT)){var l=yT(sP.marker.name,mT,i);u.className=l,fT(u).styles(o)}n.appendChild(u)}e.markerGroup.node().scale(1/e.markerGroup.node().getScale()[0]);var A=PT(e.markerGroup.node(),e.scaleSize,!0);e.markerGroup.node().style._transform="scale(".concat(A,")")})},e.prototype.renderLabel=function(t){var e=sT(this.attributes,"label"),n=e.text,r=we(e,["text"]),i=this.attributes.classNamePrefix;this.labelGroup=t.maybeAppendByClassName(sP.labelGroup,"g").style("zIndex",0);var o=yT(sP.label.name,"label",i),a=this.labelGroup.maybeAppendByClassName(sP.label,function(){return VT(n)});a.node().setAttribute("class",o),a.styles(r)},e.prototype.renderValue=function(t){var e=this,n=sT(this.attributes,"value"),r=n.text,i=we(n,["text"]),o=this.attributes.classNamePrefix;this.valueGroup=t.maybeAppendByClassName(sP.valueGroup,"g").style("zIndex",0),gT(this.showValue,this.valueGroup,function(){var t=yT(sP.value.name,"value",o),n=e.valueGroup.maybeAppendByClassName(sP.value,function(){return VT(r)});n.node().setAttribute("class",t),n.styles(i)})},e.prototype.createPoptip=function(){var t=this.attributes.poptip||{},e=(t.render,we(t,["render"])),n=new aP({style:$F(uP,e)});return this.poptipGroup=n,n},e.prototype.bindPoptip=function(t){var e=this,n=this.attributes.poptip;n&&(this.poptipGroup||this.createPoptip()).bind(t,function(){var t=e.attributes,r=t.labelText,i=t.valueText,o=t.markerFill,a="string"==typeof r?r:null==r?void 0:r.attr("text"),s="string"==typeof i?i:null==i?void 0:i.attr("text");if("function"==typeof n.render)return{html:n.render(be(be({},e.keyFields),{label:a,value:s,color:o}))};var u="";return"string"!=typeof a&&"number"!=typeof a||(u+='<div class="component-poptip-label">'.concat(a,"</div>")),"string"!=typeof s&&"number"!=typeof s||(u+='<div class="component-poptip-value">'.concat(s,"</div>")),{html:u}})},e.prototype.renderFocus=function(t){var e=this,n=this.attributes,r=n.focus,i=n.focusMarkerSize,o=n.classNamePrefix,a={x:0,y:0,size:i,opacity:.6,symbol:"focus",stroke:"#aaaaaa",lineWidth:1};pn(r)||(this.focusGroup=t.maybeAppendByClassName(sP.focusGroup,"g").style("zIndex",0),gT(r,this.focusGroup,function(){var n=yT(sP.focus.name,"focus-icon",o),r=new HT({style:be(be({},a),{symbol:"focus"}),className:n}),i=new Pu({style:{r:a.size/2,fill:"transparent"}}),s=e.focusGroup.node();s.appendChild(i),s.appendChild(r),r.update({opacity:0}),t.node().addEventListener("pointerenter",function(){r.update({opacity:1})}),t.node().addEventListener("pointerleave",function(){r.update({opacity:0})})}))},e.prototype.renderPoptip=function(t){var e=this;this.attributes.poptip&&[t.maybeAppendByClassName(sP.value,"g").node(),t.maybeAppendByClassName(sP.label,"g").node()].forEach(function(t){t&&e.bindPoptip(t)})},e.prototype.renderBackground=function(t){var e=this.shape,n=e.width,r=e.height,i=sT(this.attributes,"background");this.background=t.maybeAppendByClassName(sP.backgroundGroup,"g").style("zIndex",-1);var o=this.background.maybeAppendByClassName(sP.background,"rect");o.styles(be({width:n,height:r},i));var a=this.attributes.classNamePrefix,s=void 0===a?"":a;if(s){var u=yT(sP.background.name,"background",s);o.node().setAttribute("class",u)}},e.prototype.adjustLayout=function(){var t=this.layout,e=t.labelWidth,n=t.valueWidth,r=t.height,i=Be(t.position,4),o=i[0],a=i[1],s=i[2],u=i[3],c=r/2;this.markerGroup.styles({transform:"translate(".concat(o,", ").concat(c,")").concat(this.markerGroup.node().style._transform)}),this.labelGroup.styles({transform:"translate(".concat(a,", ").concat(c,")")}),this.focusGroup&&this.focusGroup.styles({transform:"translate(".concat(u,", ").concat(c,")")}),JT(this.labelGroup.select(sP.label.class).node(),Math.ceil(e)),this.showValue&&(this.valueGroup.styles({transform:"translate(".concat(s,", ").concat(c,")")}),JT(this.valueGroup.select(sP.value.class).node(),Math.ceil(n)))},e.prototype.render=function(t,e){var n=fT(e),r=t.x,i=void 0===r?0:r,o=t.y,a=void 0===o?0:o;n.styles({transform:"translate(".concat(i,", ").concat(a,")")}),this.renderMarker(n),this.renderLabel(n),this.renderValue(n),this.renderBackground(n),this.renderPoptip(n),this.renderFocus(n),this.adjustLayout()},e}(rT),lP=hT({page:"item-page",navigator:"navigator",item:"item"},"items"),AP=function(t,e,n){return void 0===n&&(n=!0),t?e(t):n},fP=function(t){function e(e){var n=t.call(this,e,{data:[],gridRow:1/0,gridCol:void 0,padding:0,width:1e3,height:100,rowPadding:0,colPadding:0,layout:"flex",orientation:"horizontal",click:kT,mouseenter:kT,mouseleave:kT})||this;return n.navigatorShape=[0,0],n}return me(e,t),Object.defineProperty(e.prototype,"pageViews",{get:function(){return this.navigator.getContainer()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"grid",{get:function(){var t=this.attributes,e=t.gridRow,n=t.gridCol,r=t.data;if(!e&&!n)throw new Error("gridRow and gridCol can not be set null at the same time");return e&&n?[e,n]:e?[e,r.length]:[r.length,n]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderData",{get:function(){var t=this.attributes,e=t.data,n=t.layout,r=t.poptip,i=t.focus,o=t.focusMarkerSize,a=t.classNamePrefix,s=sT(this.attributes,"item"),u=e.map(function(t,u){var c=t.id,l=void 0===c?u:c,A=t.label,f=t.value;return{id:"".concat(l),index:u,style:be({layout:n,labelText:A,valueText:f,poptip:r,focus:i,focusMarkerSize:o,classNamePrefix:a},Object.fromEntries(Object.entries(s).map(function(n){var r=Be(n,2);return[r[0],OT(r[1],[t,u,e])]})))}});return u},enumerable:!1,configurable:!0}),e.prototype.getGridLayout=function(){var t=this,e=this.attributes,n=e.orientation,r=e.width,i=e.rowPadding,o=e.colPadding,a=Be(this.navigatorShape,1)[0],s=Be(this.grid,2),u=s[0],c=s[1],l=c*u,A=0;return this.pageViews.children.map(function(e,s){var f,d,h=Math.floor(s/l),p=s%l,v=t.ifHorizontal(c,u),g=[Math.floor(p/v),p%v];"vertical"===n&&g.reverse();var y=Be(g,2),m=y[0],b=y[1],w=(r-a-(c-1)*o)/c,x=e.getBBox().height,E=Be([0,0],2),B=E[0],k=E[1];return"horizontal"===n?(B=(f=Be([A,m*(x+i)],2))[0],k=f[1],A=b===c-1?0:A+w+o):(B=(d=Be([b*(w+o),A],2))[0],k=d[1],A=m===u-1?0:A+x+i),{page:h,index:s,row:m,col:b,pageIndex:p,width:w,height:x,x:B,y:k}})},e.prototype.getFlexLayout=function(){var t=this.attributes,e=t.width,n=t.height,r=t.rowPadding,i=t.colPadding,o=Be(this.navigatorShape,1)[0],a=Be(this.grid,2),s=a[0],u=a[1],c=Be([e-o,n],2),l=c[0],A=c[1],f=Be([0,0,0,0,0,0,0,0],8),d=f[0],h=f[1],p=f[2],v=f[3],g=f[4],y=f[5],m=f[6],b=f[7];return this.pageViews.children.map(function(t,e){var n,o,a,c,f=t.getBBox(),w=f.width,x=f.height,E=0===m?0:i,B=m+E+w;return B<=l&&AP(g,function(t){return t<u})?(n=Be([m+E,b,B],3),d=n[0],h=n[1],m=n[2],{width:w,height:x,x:d,y:h,page:p,index:e,pageIndex:v++,row:y,col:g++}):(o=Be([y+1,0,0,b+x+r],4),y=o[0],g=o[1],m=o[2],(b=o[3])+x<=A&&AP(y,function(t){return t<s})?(a=Be([m,b,w],3),d=a[0],h=a[1],m=a[2],{width:w,height:x,x:d,y:h,page:p,index:e,pageIndex:v++,row:y,col:g++}):(c=Be([0,0,w,0,p+1,0,0,0],8),d=c[0],h=c[1],m=c[2],b=c[3],p=c[4],v=c[5],y=c[6],g=c[7],{width:w,height:x,x:d,y:h,page:p,index:e,pageIndex:v++,row:y,col:g++}))})},Object.defineProperty(e.prototype,"itemsLayout",{get:function(){this.navigatorShape=[0,0];var t="grid"===this.attributes.layout?this.getGridLayout:this.getFlexLayout,e=t.call(this);return e.slice(-1)[0].page>0?(this.navigatorShape=[55,0],t.call(this)):e},enumerable:!1,configurable:!0}),e.prototype.ifHorizontal=function(t,e){return zT(this.attributes.orientation,t,e)},e.prototype.flattenPage=function(t){t.querySelectorAll(lP.item.class).forEach(function(e){t.appendChild(e)}),t.querySelectorAll(lP.page.class).forEach(function(e){t.removeChild(e).destroy()})},e.prototype.renderItems=function(t){var e=this.attributes,n=e.click,r=e.mouseenter,i=e.mouseleave,o=e.classNamePrefix;this.flattenPage(t);var a=this.dispatchCustomEvent.bind(this),s=yT(lP.item.name,"item",o);fT(t).selectAll(lP.item.class).data(this.renderData,function(t){return t.id}).join(function(t){return t.append(function(t){var e=t.style,n=we(t,["style"]);return new cP({style:e},n)}).attr("className",s).on("click",function(){null==n||n(this),a("itemClick",{item:this})}).on("pointerenter",function(){null==r||r(this),a("itemMouseenter",{item:this})}).on("pointerleave",function(){null==i||i(this),a("itemMouseleave",{item:this})})},function(t){return t.each(function(t){var e=t.style;this.update(e)})},function(t){return t.remove()})},e.prototype.relayoutNavigator=function(){var t,e=this.attributes,n=e.layout,r=e.width,i=(null===(t=this.pageViews.children[0])||void 0===t?void 0:t.getBBox().height)||0,o=Be(this.navigatorShape,2),a=o[0],s=o[1];this.navigator.update("grid"===n?{pageWidth:r-a,pageHeight:i-s}:{})},e.prototype.adjustLayout=function(){var t,e,n=this,r=Object.entries((t=this.itemsLayout,e="page",t.reduce(function(t,n){return(t[n[e]]=t[n[e]]||[]).push(n),t},{}))).map(function(t){var e=Be(t,2);return{page:e[0],layouts:e[1]}}),i=ke([],Be(this.navigator.getContainer().children),!1);r.forEach(function(t){var e=t.layouts,r=n.pageViews.appendChild(new _u({className:lP.page.name}));e.forEach(function(t){var e=t.x,n=t.y,o=t.index,a=t.width,s=t.height,u=i[o];r.appendChild(u),Vb(u,"__layout__",t),u.update({x:e,y:n,width:a,height:s})})}),this.relayoutNavigator()},e.prototype.renderNavigator=function(t){var e=this.attributes,n=e.orientation,r=e.classNamePrefix,i=sT(this.attributes,"nav"),o=$F({orientation:n,classNamePrefix:r},i),a=this;return t.selectAll(lP.navigator.class).data(["nav"]).join(function(t){return t.append(function(){return new DT({style:o})}).attr("className",lP.navigator.name).each(function(){a.navigator=this})},function(t){return t.each(function(){this.update(o)})},function(t){return t.remove()}),this.navigator},e.prototype.getBBox=function(){return this.navigator.getBBox()},e.prototype.render=function(t,e){var n=this.attributes.data;if(n&&0!==n.length){var r=this.renderNavigator(fT(e));this.renderItems(r.getContainer()),this.adjustLayout()}},e.prototype.dispatchCustomEvent=function(t,e){var n=new Is(t,{detail:e});this.dispatchEvent(n)},e}(rT),dP=hT({markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label"},"handle"),hP={showLabel:!0,formatter:function(t){return t.toString()},markerSize:25,markerStroke:"#c5c5c5",markerFill:"#fff",markerLineWidth:1,labelFontSize:12,labelFill:"#c5c5c5",labelText:"",orientation:"vertical",spacing:0},pP=function(t){function e(e){return t.call(this,e,hP)||this}return me(e,t),e.prototype.render=function(t,e){var n=fT(e).maybeAppendByClassName(dP.markerGroup,"g");this.renderMarker(n);var r=fT(e).maybeAppendByClassName(dP.labelGroup,"g");this.renderLabel(r)},e.prototype.renderMarker=function(t){var e=this,n=this.attributes,r=n.orientation,i=n.classNamePrefix,o=n.markerSymbol,a=void 0===o?zT(r,"horizontalHandle","verticalHandle"):o;gT(!!a,t,function(t){var n=sT(e.attributes,"marker"),r=be({symbol:a},n),o=yT(dP.marker.name,bT,i);if(e.marker=t.maybeAppendByClassName(dP.marker,function(){return new HT({style:r,className:o})}).update(r),i){var s=e.marker.node().querySelector(".marker");if(s){var u=yT((s.getAttribute("class")||"").split(" ")[0],bT,i);s.setAttribute("class",u)}}})},e.prototype.renderLabel=function(t){var e=this,n=this.attributes,r=n.showLabel,i=n.orientation,o=n.spacing,a=void 0===o?0:o,s=n.formatter,u=n.classNamePrefix;gT(r,t,function(t){var n,r=sT(e.attributes,"label"),o=r.text,c=we(r,["text"]),l=(null===(n=t.select(dP.marker.class))||void 0===n?void 0:n.node().getBBox())||{},A=l.width,f=void 0===A?0:A,d=l.height,h=Be(zT(i,[0,(void 0===d?0:d)+a,"center","top"],[f+a,0,"start","middle"]),4),p=h[0],v=h[1],g=h[2],y=h[3],m=yT(dP.label.name,wT,u);t.maybeAppendByClassName(dP.label,"text").attr("className",m).styles(be(be({},c),{x:p,y:v,text:s(o).toString(),textAlign:g,textBaseline:y}))})},e}(rT),vP={showTitle:!0,padding:0,orientation:"horizontal",backgroundFill:"transparent",titleText:"",titleSpacing:4,titlePosition:"top-left",titleFill:"#2C3542",titleFontWeight:"bold",titleFontFamily:"sans-serif",titleFontSize:12},gP=$F({},vP,{}),yP=$F({},vP,uT(hP,"handle"),{color:["#d0e3fa","#acc7f6","#8daaf2","#6d8eea","#4d73cd","#325bb1","#5a3e75","#8c3c79","#e23455","#e7655b"],indicatorBackgroundFill:"#262626",indicatorLabelFill:"white",indicatorLabelFontSize:12,indicatorVisibility:"hidden",labelAlign:"value",labelDirection:"positive",labelSpacing:5,showHandle:!0,showIndicator:!0,showLabel:!0,slidable:!0,titleText:"",type:"continuous"}),mP=hT({title:"title",html:"html",titleGroup:"title-group",items:"items",itemsGroup:"items-group",contentGroup:"content-group",ribbonGroup:"ribbon-group",ribbon:"ribbon",handlesGroup:"handles-group",handle:"handle",startHandle:"start-handle",endHandle:"end-handle",labelGroup:"label-group",label:"label",indicator:"indicator"},"legend"),bP=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return me(e,t),e.prototype.update=function(t){this.attr(t)},e}(Uu),wP=function(t){function e(e){return t.call(this,e,gP)||this}return me(e,t),e.prototype.renderTitle=function(t,e,n){var r=this.attributes,i=r.showTitle,o=r.titleText,a=r.classNamePrefix,s=Be(cT(sT(this.attributes,"title")),2),u=s[0],c=s[1];this.titleGroup=t.maybeAppendByClassName(mP.titleGroup,"g").styles(c);var l=be(be({width:e,height:n},u),{text:i?o:"",classNamePrefix:a});this.title=this.titleGroup.maybeAppendByClassName(mP.title,function(){return new BT({style:l})}).update(l)},e.prototype.renderCustom=function(t){var e=this.attributes.data,n={innerHTML:this.attributes.render(e),pointerEvents:"auto"};t.maybeAppendByClassName(mP.html,function(){return new bP({className:mP.html.name,style:n})}).update(n)},e.prototype.renderItems=function(t,e){var n=e.x,r=e.y,i=e.width,o=e.height,a=Be(cT(sT(this.attributes,"title",!0)),2),s=a[0],u=a[1],c=be(be({},s),{width:i,height:o,x:0,y:0});this.itemsGroup=t.maybeAppendByClassName(mP.itemsGroup,"g").styles(be(be({},u),{transform:"translate(".concat(n,", ").concat(r,")")}));var l=this;this.itemsGroup.selectAll(mP.items.class).data(["items"]).join(function(t){return t.append(function(){return new fP({style:c})}).attr("className",mP.items.name).each(function(){l.items=fT(this)})},function(t){return t.update(c)},function(t){return t.remove()})},e.prototype.adjustLayout=function(){if(this.attributes.showTitle){var t=this.title.node().getAvailableSpace(),e=t.x,n=t.y;this.itemsGroup.node().style.transform="translate(".concat(e,", ").concat(n,")")}},Object.defineProperty(e.prototype,"availableSpace",{get:function(){var t=this.attributes,e=t.showTitle,n=t.width,r=t.height;return e?this.title.node().getAvailableSpace():new dT(0,0,n,r)},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var e,n,r=null===(e=this.title)||void 0===e?void 0:e.node(),i=null===(n=this.items)||void 0===n?void 0:n.node();return r&&i?function(t,e){var n=t.attributes,r=n.position,i=n.spacing,o=n.inset,a=n.text,s=t.getBBox(),u=e.getBBox(),c=pT(r),l=Be(vT(a?i:0),4),A=l[0],f=l[1],d=l[2],h=l[3],p=Be(vT(o),4),v=p[0],g=p[1],y=p[2],m=p[3],b=Be([h+f,A+d],2),w=b[0],x=b[1],E=Be([m+g,v+y],2),B=E[0],k=E[1];if("l"===c[0])return new dT(s.x,s.y,u.width+s.width+w+B,Math.max(u.height+k,s.height));if("t"===c[0])return new dT(s.x,s.y,Math.max(u.width+B,s.width),u.height+s.height+x+k);var O=Be([e.attributes.width||u.width,e.attributes.height||u.height],2),C=O[0],M=O[1];return new dT(u.x,u.y,C+s.width+w+B,M+s.height+x+k)}(r,i):t.prototype.getBBox.call(this)},e.prototype.render=function(t,e){var n=this.attributes,r=n.width,i=n.height,o=n.x,a=void 0===o?0:o,s=n.y,u=void 0===s?0:s,c=n.classNamePrefix,l=n.render,A=fT(e),f=e.className||"legend-category";c?e.attr("className","".concat(f," ").concat(c,"legend")):e.className||e.attr("className","legend-category"),e.style.transform="translate(".concat(a,", ").concat(u,")"),l?this.renderCustom(A):(this.renderTitle(A,r,i),this.renderItems(A,this.availableSpace),this.adjustLayout())},e}(rT);function xP(t){var e=t.width,n=t.height,r=t.renderer,i=function(t){var e,n=t.container,r=t.className,i=t.graphCanvas;if(n)return"string"==typeof n?document.getElementById(n):n;var o=sS(r,!1),a=t.width,s=t.height,u=t.containerStyle,c=function(t){var e=t.width,n=t.height,r=t.placement,i=v(t.graphCanvas.getSize(),2),o=i[0],a=i[1],s=v(hb(r),2);return[s[0]*(o-e),s[1]*(a-n)]}(t),l=v(c,2),A=l[0],f=l[1];return Object.assign(o.style,Object.assign({position:"absolute",left:A+"px",top:f+"px",width:a+"px",height:s+"px"},u)),null===(e=i.getContainer())||void 0===e||e.appendChild(o),o}(t);return[i,new Ac({width:e,height:n,container:i,renderer:r||new Lx})]}var EP=function(t){function e(t,n){var r;return x(this,e),(r=F(this,e,[t,Object.assign({},e.defaultOptions,n)])).typePrefix="__data__",r.draw=!1,r.fieldMap={node:new Map,edge:new Map,combo:new Map},r.selectedItems=[],r.bindEvents=function(){r.context.graph.on(ry.AFTER_DRAW,r.createElement)},r.changeState=function(t,e){var n=r.context.graph,i=r.typePrefix,o=Gb(t,[i,"id"]),a=Gb(t,[i,"style","labelText"]),s=v(o.split("__"),1)[0],u=r.fieldMap[s].get(a)||[];n.setElementState(Object.fromEntries(null==u?void 0:u.map(function(t){return[t,e]})))},r.click=function(t){if("hover"!==r.options.trigger){var e=Gb(t,[r.typePrefix,"id"]);r.selectedItems.includes(e)?(r.selectedItems=r.selectedItems.filter(function(t){return t!==e}),r.changeState(t,[])):(r.selectedItems.push(e),r.changeState(t,"selected"))}},r.mouseleave=function(t){"click"!==r.options.trigger&&(r.selectedItems=[],r.changeState(t,[]))},r.mouseenter=function(t){if("click"!==r.options.trigger){var e=Gb(t,[r.typePrefix,"id"]);r.selectedItems.includes(e)?r.selectedItems=r.selectedItems.filter(function(t){return t!==e}):(r.selectedItems.push(e),r.changeState(t,"active"))}},r.setFieldMap=function(t,e,n){if(t){var i=r.fieldMap[n];if(i)if(i.has(t)){var o=i.get(t);o&&(o.push(e),i.set(t,o))}else i.set(t,[e])}},r.getEvents=function(){return{mouseenter:r.mouseenter,mouseleave:r.mouseleave,click:r.click}},r.getMarkerData=function(t,e){if(!t)return[];var n=r.context,i=n.model,o=n.element,a=i.getData(),s=a.nodes,u=a.edges,c=a.combos,l={},A=function(e){return mn(t)?t(e):t},f={node:"circle",edge:"line",combo:"rect"},d={circle:"circle",ellipse:"circle",image:"bowtie",rect:"square",star:"cross",triangle:"triangle",diamond:"diamond",cubic:"dot",line:"hyphen",polyline:"hyphen",quadratic:"hv","cubic-horizontal":"hyphen","cubic-vertical":"line"},h=function(t,e){t.forEach(function(t){var n=t.id,i=Gb(t,["data",A(t)]),a=(null==o?void 0:o.getElementType(e,t))||"circle",s=function(t,e){return null==o?void 0:o.getElementComputedStyle(t,e)}(e,t),u=("edge"===e?null==s?void 0:s.stroke:null==s?void 0:s.fill)||"#1783ff";n&&i&&i.replace(/\s+/g,"")&&(r.setFieldMap(i,n,e),l[i]||(l[i]={id:"".concat(e,"__").concat(n),label:i,marker:d[a]||f[e],elementType:e,lineWidth:1,stroke:u,fill:u}))})};switch(e){case"node":h(s,"node");break;case"edge":h(u,"edge");break;case"combo":h(c,"combo");break;default:return[]}return Object.values(l)},r.createElement=function(){if(r.draw)r.updateElement();else{var t=r.options,e=t.width,n=t.height,i=t.nodeField,o=t.edgeField,a=t.comboField,s=(t.trigger,t.position,t.container,t.containerStyle,t.className,function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["width","height","nodeField","edgeField","comboField","trigger","position","container","containerStyle","className"])),u=r.getMarkerData(i,"node"),c=r.getMarkerData(o,"edge"),l=r.getMarkerData(a,"combo"),A=[].concat(O(u),O(l),O(c)),f=Object.assign({width:e,height:n,data:A,itemMarkerLineWidth:function(t){return t.lineWidth},itemMarker:function(t){return t.marker},itemMarkerStroke:function(t){return t.stroke},itemMarkerFill:function(t){return t.fill},gridCol:u.length},s,r.getEvents()),d=new wP({className:"legend",style:f});r.category=d,r.upsertCanvas().appendChild(d),r.draw=!0}},r.bindEvents(),r}return P(e,t),B(e,[{key:"update",value:function(t){xn(e,"update",this,3)([t]),this.clear(),this.createElement()}},{key:"clear",value:function(){var t,e;null===(t=this.canvas)||void 0===t||t.destroy(),null===(e=this.container)||void 0===e||e.remove(),this.canvas=void 0,this.container=void 0,this.draw=!1}},{key:"updateElement",value:function(){var t=this;this.category&&this.category.update({itemMarkerOpacity:function(e){var n=e.id;return!t.selectedItems.length||t.selectedItems.includes(n)?1:.5},itemLabelOpacity:function(e){var n=e.id;return!t.selectedItems.length||t.selectedItems.includes(n)?1:.5}})}},{key:"upsertCanvas",value:function(){if(this.canvas)return this.canvas;var t=this.context.canvas,e=v(t.getSize(),2),n=e[0],r=e[1],i=this.options,o=i.width,a=void 0===o?n:o,s=i.height,u=void 0===s?r:s,c=i.position,l=i.container,A=i.containerStyle,f=i.className,d=v(xP({width:a,height:u,graphCanvas:t,container:l,containerStyle:A,placement:c,className:"legend"}),2),h=d[0],p=d[1];return this.container=h,f&&h.classList.add(f),this.canvas=p,this.canvas}},{key:"destroy",value:function(){this.clear(),this.context.graph.off(ry.AFTER_DRAW,this.createElement),xn(e,"destroy",this,3)([])}}])}(aS);EP.defaultOptions={position:"bottom",trigger:"hover",orientation:"horizontal",layout:"flex",itemSpacing:4,rowPadding:10,colPadding:10,itemMarkerSize:16,itemLabelFontSize:16,width:240,height:160};var BP=function(t){function e(t,n){var r;return x(this,e),(r=F(this,e,[t,Object.assign({},e.defaultOptions,n)])).onDraw=function(t){var e;(null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.render)||r.onRender()},r.landmarkMap=new Map,r.mask=null,r.isMaskDragging=!1,r.onMaskDragStart=function(t){r.mask&&(r.isMaskDragging=!0,r.mask.setPointerCapture(t.pointerId),r.mask.addEventListener("pointermove",r.onMaskDrag),r.mask.addEventListener("pointerup",r.onMaskDragEnd),r.mask.addEventListener("pointercancel",r.onMaskDragEnd))},r.onMaskDrag=function(t){if(r.mask&&r.isMaskDragging){var e=v(r.options.size,2),n=e[0],i=e[1],o=t.movementX,a=t.movementY,s=r.mask.style,u=s.left,c=s.top,l=s.width,A=s.height,f=v(r.maskBBox,4),d=f[2],h=f[3],p=parseInt(u)+o,g=parseInt(c)+a,y=parseInt(l),m=parseInt(A);p<0&&(p=0),g<0&&(g=0),p+y>n&&(p=OP(n-y,0)),g+m>i&&(g=OP(i-m,0)),y<d&&(o>0?(p=OP(p-o,0),y=kP(y+o,n)):o<0&&(y=kP(y-o,n))),m<h&&(a>0?(g=OP(g-a,0),m=kP(m+a,i)):a<0&&(m=kP(m-a,i))),Object.assign(r.mask.style,{left:p+"px",top:g+"px",width:y+"px",height:m+"px"});var b=parseInt(u)-p,w=parseInt(c)-g;if(0!==b||0!==w){var x=r.context.canvas.getCamera().getZoom()/r.canvas.getCamera().getZoom();r.context.graph.translateBy([b*x,w*x],!1)}}},r.onMaskDragEnd=function(t){r.mask&&(r.isMaskDragging=!1,r.mask.releasePointerCapture(t.pointerId),r.mask.removeEventListener("pointermove",r.onMaskDrag),r.mask.removeEventListener("pointerup",r.onMaskDragEnd),r.mask.removeEventListener("pointercancel",r.onMaskDragEnd))},r.onTransform=Iy(function(){r.isMaskDragging||(r.updateMask(),r.setCamera())},32,{leading:!0}),r.setOnRender(),r.bindEvents(),r}return P(e,t),B(e,[{key:"update",value:function(t){this.unbindEvents(),xn(e,"update",this,3)([t]),"delay"in t&&this.setOnRender(),this.bindEvents()}},{key:"setOnRender",value:function(){var t=this;this.onRender=AB(function(){t.renderMinimap(),t.renderMask()},this.options.delay)}},{key:"bindEvents",value:function(){var t=this.context.graph;t.on(ry.AFTER_DRAW,this.onDraw),t.on(ry.AFTER_RENDER,this.onRender),t.on(ry.AFTER_ANIMATE,this.onRender),t.on(ry.AFTER_TRANSFORM,this.onTransform)}},{key:"unbindEvents",value:function(){var t=this.context.graph;t.off(ry.AFTER_DRAW,this.onDraw),t.off(ry.AFTER_RENDER,this.onRender),t.off(ry.AFTER_ANIMATE,this.onRender),t.off(ry.AFTER_TRANSFORM,this.onTransform)}},{key:"renderMinimap",value:function(){var t=this.getElements(),e=this.initCanvas();this.setShapes(e,t)}},{key:"getElements",value:function(){var t=this.options.filter,e=this.context,n=e.model,r=e.element,i=n.getData(),o={nodes:i.nodes.filter(function(t){return null==r?void 0:r.getElement(Sm(t))}),edges:i.edges.filter(function(t){var e=null==r?void 0:r.getElement(Sm(t));return e&&rB(e)}),combos:i.combos.filter(function(t){return null==r?void 0:r.getElement(Sm(t))})};if(!t)return o;var a=o.edges,s=o.combos;return{nodes:o.nodes.filter(function(e){return t(Sm(e),"node")}),edges:a.filter(function(e){return t(Sm(e),"edge")}),combos:s.filter(function(e){return t(Sm(e),"combo")})}}},{key:"setShapes",value:function(t,e){var n=e.nodes,r=e.edges,i=e.combos,o=this.options.shape,a=this.context.element,s=function(e,n){var r=Sm(e),i=null==a?void 0:a.getElement(r);if(i){var s,u=i.getShape("key");if("string"==typeof o){var c=o;s=i.getShape(c).cloneNode()}else{var l=o(r,n,i);s=l===i?l.cloneNode(!0):l}s.setPosition(u.getPosition()),i.style.zIndex&&(s.style.zIndex=i.style.zIndex),s.id=i.id,t.appendChild(s)}};t.removeChildren(),r.forEach(function(t){return s(t,"edge")}),i.forEach(function(t){return s(t,"combo")}),n.forEach(function(t){return s(t,"node")})}},{key:"initCanvas",value:function(){var t=this.options,e=t.renderer,n=v(t.size,2),r=n[0],i=n[1];if(this.canvas){var o=this.canvas.getConfig(),a=o.width,s=o.height;r===a&&i===s||this.canvas.resize(r,i),e&&this.canvas.setRenderer(e)}else{var u=this.options,c=u.className,l=v(xP({renderer:e,width:r,height:i,placement:u.position,className:"minimap",container:u.container,containerStyle:u.containerStyle,graphCanvas:this.context.canvas}),2),A=l[0],f=l[1];c&&A.classList.add(c),this.container=A,this.canvas=f}return this.setCamera(),this.canvas}},{key:"createLandmark",value:function(t,e,n){var r="".concat(t.join(","),"-").concat(e.join(","),"-").concat(n);if(this.landmarkMap.has(r))return this.landmarkMap.get(r);var i=this.canvas.getCamera().createLandmark(r,{position:t,focalPoint:e,zoom:n});return this.landmarkMap.set(r,i),i}},{key:"setCamera",value:function(){var t,e=this.context.canvas,n=null===(t=this.canvas)||void 0===t?void 0:t.getCamera();if(n){var r=this.options,i=v(r.size,2),o=i[0],a=i[1],s=v(Uy(r.padding),4),u=s[0],c=s[1],l=s[2],A=s[3],f=e.getBounds("elements"),d=f.min,h=f.max,p=f.center,g=(o-A-c)/(h[0]-d[0]),y=(a-u-l)/(h[1]-d[1]),m=Math.min(g,y),b=this.createLandmark(p,p,m);n.gotoLandmark(b,0)}}},{key:"maskBBox",get:function(){var t=this.context.canvas,e=t.getSize(),n=t.getCanvasByViewport([0,0]),r=t.getCanvasByViewport(e),i=this.canvas.canvas2Viewport(mb(n)),o=this.canvas.canvas2Viewport(mb(r)),a=o.x-i.x,s=o.y-i.y;return[i.x,i.y,a,s]}},{key:"calculateMaskBBox",value:function(){var t=v(this.options.size,2),e=t[0],n=t[1],r=v(this.maskBBox,4),i=r[0],o=r[1],a=r[2],s=r[3];return i<0&&(a=kP(a+i,e),i=0),o<0&&(s=kP(s+o,n),o=0),i+a>e&&(a=OP(e-i,0)),o+s>n&&(s=OP(n-o,0)),[kP(i,e),kP(o,n),OP(a,0),OP(s,0)]}},{key:"renderMask",value:function(){var t=this.options.maskStyle;this.mask||(this.mask=document.createElement("div"),this.mask.addEventListener("pointerdown",this.onMaskDragStart),this.mask.draggable=!0,this.mask.addEventListener("dragstart",function(t){return t.preventDefault&&t.preventDefault()})),this.container.appendChild(this.mask),Object.assign(this.mask.style,Object.assign(Object.assign({},t),{cursor:"move",position:"absolute",pointerEvents:"auto"})),this.updateMask()}},{key:"updateMask",value:function(){if(this.mask){var t=v(this.calculateMaskBBox(),4),e=t[0],n=t[1],r=t[2],i=t[3];Object.assign(this.mask.style,{top:n+"px",left:e+"px",width:r+"px",height:i+"px"})}}},{key:"destroy",value:function(){var t,n,r;this.unbindEvents(),null===(t=this.canvas)||void 0===t||t.destroy(),null===(n=this.mask)||void 0===n||n.remove(),null===(r=this.container)||void 0===r||r.remove(),xn(e,"destroy",this,3)([])}}])}(aS);BP.defaultOptions={size:[240,160],shape:"key",padding:10,position:"right-bottom",maskStyle:{border:"1px solid #ddd",background:"rgba(0, 0, 0, 0.1)"},containerStyle:{border:"1px solid #ddd",background:"#fff"},delay:128};var kP=function(t,e){return Math.min(t,e)},OP=function(t,e){return Math.max(t,e)},CP=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())})},MP={x1:0,y1:0,x2:0,y2:0,visibility:"hidden"},SP=function(t){function e(t,n){var r;return x(this,e),(r=F(this,e,[t,Object.assign({},e.defaultOptions,n)])).initSnapline=function(){var t=r.context.canvas.getLayer("transient");r.horizontalLine||(r.horizontalLine=t.appendChild(new Ru({style:Object.assign(Object.assign({},MP),r.options.horizontalLineStyle)}))),r.verticalLine||(r.verticalLine=t.appendChild(new Ru({style:Object.assign(Object.assign({},MP),r.options.verticalLineStyle)})))},r.isHorizontalSticking=!1,r.isVerticalSticking=!1,r.enableStick=!0,r.autoSnapToLine=function(t,e,n){return CP(r,void 0,void 0,(0,Dn.A)().m(function r(){var i,o,a,s,u,c,l,A,f,d,h,p,g,y;return(0,Dn.A)().w(function(r){for(;;)switch(r.n){case 0:if(i=n.verticalX,o=n.horizontalY,a=this.options.tolerance,s=v(e.min,2),u=s[0],c=s[1],l=v(e.max,2),A=l[0],f=l[1],d=v(e.center,2),h=d[0],p=d[1],g=0,y=0,null!==i&&(FP(A,i)<a&&(g=i-A),FP(u,i)<a&&(g=i-u),FP(h,i)<a&&(g=i-h),0!==g&&(this.isVerticalSticking=!0)),null!==o&&(FP(f,o)<a&&(y=o-f),FP(c,o)<a&&(y=o-c),FP(p,o)<a&&(y=o-p),0!==y&&(this.isHorizontalSticking=!0)),0===g&&0===y){r.n=1;break}return r.n=1,this.context.graph.translateElementBy(m({},t,[g,y]),!1);case 1:return r.a(2)}},r,this)}))},r.enableSnap=function(t){var e=t.target,n=.5;if(r.isHorizontalSticking||r.isVerticalSticking){var i=v(r.getDelta(t),2),o=i[0],a=i[1];if(r.isHorizontalSticking&&r.isVerticalSticking&&Math.abs(o)<=n&&Math.abs(a)<=n)return r.context.graph.translateElementBy(m({},e.id,[-o,-a]),!1),!1;if(r.isHorizontalSticking&&Math.abs(a)<=n)return r.context.graph.translateElementBy(m({},e.id,[0,-a]),!1),!1;if(r.isVerticalSticking&&Math.abs(o)<=n)return r.context.graph.translateElementBy(m({},e.id,[-o,0]),!1),!1;r.isHorizontalSticking=!1,r.isVerticalSticking=!1,r.enableStick=!1,setTimeout(function(){r.enableStick=!0},200)}return r.enableStick},r.calcSnaplineMetadata=function(t,e){var n=r.options,i=n.tolerance,o=n.shape,a=v(e.min,2),s=a[0],u=a[1],c=v(e.max,2),l=c[0],A=c[1],f=v(e.center,2),d=f[0],h=f[1],p=null,g=null,y=null,m=null,b=null,w=null;return r.getNodes().some(function(e){if(Xg(t.id,e.id))return!1;var n=TP(e,o).getRenderBounds(),r=v(n.min,2),a=r[0],c=r[1],f=v(n.max,2),x=f[0],E=f[1],B=v(n.center,2),k=B[0],O=B[1];return null===p&&(FP(k,d)<i?p=k:FP(a,s)<i||FP(a,l)<i?p=a:(FP(x,l)<i||FP(x,s)<i)&&(p=x),null!==p&&(g=Math.min(c,u),y=Math.max(E,A))),null===m&&(FP(O,h)<i?m=O:FP(c,u)<i||FP(c,A)<i?m=c:(FP(E,A)<i||FP(E,u)<i)&&(m=E),null!==m&&(b=Math.min(a,s),w=Math.max(x,l))),null!==p&&null!==m}),{verticalX:p,verticalMinY:g,verticalMaxY:y,horizontalY:m,horizontalMinX:b,horizontalMaxX:w}},r.onDragStart=function(){r.initSnapline()},r.onDrag=function(t){return CP(r,void 0,void 0,(0,Dn.A)().m(function e(){var n,r,i;return(0,Dn.A)().w(function(e){for(;;)switch(e.n){case 0:if(n=t.target,!this.options.autoSnap){e.n=1;break}if(this.enableSnap(t)){e.n=1;break}return e.a(2);case 1:if(r=TP(n,this.options.shape).getRenderBounds(),i=this.calcSnaplineMetadata(n,r),this.hideSnapline(),null===i.verticalX&&null===i.horizontalY||this.updateSnapline(i),!this.options.autoSnap){e.n=2;break}return e.n=2,this.autoSnapToLine(n.id,r,i);case 2:return e.a(2)}},e,this)}))},r.onDragEnd=function(){r.hideSnapline()},r.bindEvents(),r}return P(e,t),B(e,[{key:"getNodes",value:function(){var t,e=this,n=this.options.filter,r=((null===(t=this.context.element)||void 0===t?void 0:t.getNodes())||[]).filter(function(t){var n;return rB(t)&&(null===(n=e.context.viewport)||void 0===n?void 0:n.isInViewport(t.getRenderBounds()))});return n?r.filter(function(t){return n(t)}):r}},{key:"hideSnapline",value:function(){this.horizontalLine.style.visibility="hidden",this.verticalLine.style.visibility="hidden"}},{key:"getLineWidth",value:function(t){return+(this.options["".concat(t,"LineStyle")].lineWidth||MP.lineWidth||1)/this.context.graph.getZoom()}},{key:"updateSnapline",value:function(t){var e=t.verticalX,n=t.verticalMinY,r=t.verticalMaxY,i=t.horizontalY,o=t.horizontalMinX,a=t.horizontalMaxX,s=v(this.context.canvas.getSize(),2),u=s[0],c=s[1],l=this.options.offset;null!==i?Object.assign(this.horizontalLine.style,{x1:l===1/0?0:o-l,y1:i,x2:l===1/0?u:a+l,y2:i,visibility:"visible",lineWidth:this.getLineWidth("horizontal")}):this.horizontalLine.style.visibility="hidden",null!==e?Object.assign(this.verticalLine.style,{x1:e,y1:l===1/0?0:n-l,x2:e,y2:l===1/0?c:r+l,visibility:"visible",lineWidth:this.getLineWidth("vertical")}):this.verticalLine.style.visibility="hidden"}},{key:"getDelta",value:function(t){var e=this.context.graph.getZoom();return tb([t.dx,t.dy],e)}},{key:"bindEvents",value:function(){return CP(this,void 0,void 0,(0,Dn.A)().m(function t(){var e;return(0,Dn.A)().w(function(t){for(;;)switch(t.n){case 0:(e=this.context.graph).on(oy.DRAG_START,this.onDragStart),e.on(oy.DRAG,this.onDrag),e.on(oy.DRAG_END,this.onDragEnd);case 1:return t.a(2)}},t,this)}))}},{key:"unbindEvents",value:function(){var t=this.context.graph;t.off(oy.DRAG_START,this.onDragStart),t.off(oy.DRAG,this.onDrag),t.off(oy.DRAG_END,this.onDragEnd)}},{key:"destroyElements",value:function(){var t,e;null===(t=this.horizontalLine)||void 0===t||t.destroy(),null===(e=this.verticalLine)||void 0===e||e.destroy()}},{key:"destroy",value:function(){this.destroyElements(),this.unbindEvents(),xn(e,"destroy",this,3)([])}}])}(aS);SP.defaultOptions={tolerance:5,offset:20,autoSnap:!0,shape:"key",verticalLineStyle:{stroke:"#1783FF"},horizontalLineStyle:{stroke:"#1783FF"},filter:function(){return!0}};var FP=function(t,e){return Math.abs(t-e)},TP=function(t,e){return"function"==typeof e?e(t):t.getShape(e)};function PP(t,e){var n={YYYY:t.getFullYear(),MM:t.getMonth()+1,DD:t.getDate(),HH:t.getHours(),mm:t.getMinutes(),ss:t.getSeconds()},r=e;return Object.keys(n).forEach(function(t){var e=n[t];r=r.replace(t,"YYYY"===t?"".concat(e):"".concat(e).padStart(2,"0"))}),r}var IP="grid-group",NP="main-group",LP="line-group",_P="tick-group",QP="label-group",UP="title-group",jP="grid",DP="line",RP="line-first",HP="line-second",zP="tick",KP="tick-item",GP="label",VP="label-item",WP="title",YP={data:[],animate:{enter:!1,update:{duration:100,easing:"ease-in-out-sine",fill:"both"},exit:{duration:100,fill:"both"}},showArrow:!0,showGrid:!0,showLabel:!0,showLine:!0,showTick:!0,showTitle:!0,showTrunc:!1,dataThreshold:100,lineLineWidth:1,lineStroke:"black",crossPadding:10,titleFill:"black",titleFontSize:12,titlePosition:"lb",titleSpacing:0,titleTextAlign:"center",titleTextBaseline:"middle",lineArrow:function(){return new zu({style:{d:[["M",10,10],["L",-10,0],["L",10,-10],["L",0,0],["L",10,10],["Z"]],fill:"black",transformOrigin:"center"}})},labelAlign:"parallel",labelDirection:"positive",labelFontSize:12,labelSpacing:0,gridConnect:"line",gridControlAngles:[],gridDirection:"positive",gridLength:0,gridType:"segment",lineArrowOffset:15,lineArrowSize:10,tickDirection:"positive",tickLength:5,tickLineWidth:1,tickStroke:"black",labelOverlap:[]},XP=(Xm({},YP,{style:{type:"arc"}}),Xm({},YP,{style:{}}),hT({mainGroup:NP,gridGroup:IP,grid:jP,lineGroup:LP,line:DP,tickGroup:_P,tick:zP,tickItem:KP,labelGroup:QP,label:GP,labelItem:VP,titleGroup:UP,title:WP,lineFirst:RP,lineSecond:HP},"axis"));function qP(t,e){return[t[0]*e,t[1]*e]}function ZP(t,e){return[t[0]+e[0],t[1]+e[1]]}function JP(t,e){return[t[0]-e[0],t[1]-e[1]]}function $P(t,e){return[Math.min(t[0],e[0]),Math.min(t[1],e[1])]}function tI(t,e){return[Math.max(t[0],e[0]),Math.max(t[1],e[1])]}function eI(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}function nI(t){if(0===t[0]&&0===t[1])return[0,0];var e=Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2));return[t[0]/e,t[1]/e]}function rI(t){return t*Math.PI/180}function iI(t){return Number((180*t/Math.PI).toPrecision(5))}function oI(t,e){return t.style.opacity||(t.style.opacity=1),TT(t,{opacity:0},e)}var aI=["$el","cx","cy","d","dx","dy","fill","fillOpacity","filter","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","height","img","increasedLineWidthForHitTesting","innerHTML","isBillboard","billboardRotation","isSizeAttenuation","isClosed","isOverflowing","leading","letterSpacing","lineDash","lineHeight","lineWidth","markerEnd","markerEndOffset","markerMid","markerStart","markerStartOffset","maxLines","metrics","miterLimit","offsetX","offsetY","opacity","path","points","r","radius","rx","ry","shadowColor","src","stroke","strokeOpacity","text","textAlign","textBaseline","textDecorationColor","textDecorationLine","textDecorationStyle","textOverflow","textPath","textPathSide","textPathStartOffset","transform","transformOrigin","visibility","width","wordWrap","wordWrapWidth","x","x1","x2","y","y1","y2","z1","z2","zIndex"];function sI(t){return aI.includes(t)}function uI(t){var e={};for(var n in t)sI(n)&&(e[n]=t[n]);return e}var cI=hT({lineGroup:"line-group",line:"line",regionGroup:"region-group",region:"region"},"grid");function lI(t){return t.reduce(function(t,e,n){return t.push(ke([0===n?"M":"L"],Be(e),!1)),t},[])}function AI(t,e,n){return"surround"===e.type?function(t,e,n){var r=e.connect,i=void 0===r?"line":r,o=e.center;if("line"===i)return lI(t);if(!o)return[];var a=eI(t[0],o),s=n?0:1;return t.reduce(function(t,e,n){return 0===n?t.push(ke(["M"],Be(e),!1)):t.push(ke(["A",a,a,0,0,s],Be(e),!1)),t},[])}(t,e,n):lI(t)}function fI(t,e,n){var r=n.type,i=n.connect,o=n.center,a=n.closed?[["Z"]]:[],s=Be([AI(t,n),AI(e.slice().reverse(),n,!0)],2),u=s[0],c=s[1],l=Be([t[0],e.slice(-1)[0]],2),A=l[0],f=l[1],d=function(t,e){return[u,t,c,e,a].flat()};if("line"===i||"surround"===r)return d([ke(["L"],Be(f),!1)],[ke(["L"],Be(A),!1)]);if(!o)throw new Error("Arc grid need to specified center");var h=Be([eI(f,o),eI(A,o)],2),p=h[0],v=h[1];return d([ke(["A",p,p,0,0,1],Be(f),!1),ke(["L"],Be(f),!1)],[ke(["A",v,v,0,0,0],Be(A),!1),ke(["L"],Be(A),!1)])}var dI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return me(e,t),e.prototype.render=function(t,e){t.type,t.center,t.areaFill,t.closed;var n=we(t,["type","center","areaFill","closed"]),r=function(t){var e=t.data,n=void 0===e?[]:e;return t.closed?n.map(function(t){var e=t.points,n=Be(e,1)[0];return be(be({},t),{points:ke(ke([],Be(e),!1),[n],!1)})}):n}(t),i=fT(e).maybeAppendByClassName(cI.lineGroup,"g"),o=fT(e).maybeAppendByClassName(cI.regionGroup,"g"),a=function(t,e,n,r){var i=n.animate,o=n.isBillboard,a=e.map(function(t,e){return{id:t.id||"grid-line-".concat(e),d:AI(t.points,n)}});return t.selectAll(cI.line.class).data(a,function(t){return t.id}).join(function(t){return t.append("path").each(function(t,e){var n=OT(uI(be({d:t.d},r)),[t,e,a]);this.attr(be({class:cI.line.name,stroke:"#D9D9D9",lineWidth:1,lineDash:[4,4],isBillboard:o},n))})},function(t){return t.transition(function(t,e){return TT(this,OT(uI(be({d:t.d},r)),[t,e,a]),i.update)})},function(t){return t.transition(function(){var t=this,e=oI(this,i.exit);return MT(e,function(){return t.remove()}),e})}).transitions()}(i,r,t,n),s=function(t,e,n){var r=n.animate,i=n.connect,o=n.areaFill;if(e.length<2||!o||!i)return[];for(var a=Array.isArray(o)?o:[o,"transparent"],s=function(t){return a[t%a.length]},u=[],c=0;c<e.length-1;c++){var l=Be([e[c].points,e[c+1].points],2),A=fI(l[0],l[1],n);u.push({d:A,fill:s(c)})}return t.selectAll(cI.region.class).data(u,function(t,e){return e}).join(function(t){return t.append("path").each(function(t,e){var n=OT(t,[t,e,u]);this.attr(n)}).attr("className",cI.region.name)},function(t){return t.transition(function(t,e){return TT(this,OT(t,[t,e,u]),r.update)})},function(t){return t.transition(function(){var t=this,e=oI(this,r.exit);return MT(e,function(){return t.remove()}),e})}).transitions()}(o,r,t);return ke(ke([],Be(a),!1),Be(s),!1)},e}(rT);function hI(t,e){return"number"==typeof t&&"number"==typeof e?function(t,e){return function(n){return t*(1-n)+e*n}}(t,e):Array.isArray(t)&&Array.isArray(e)?function(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0;return function(i){var o=new Array(r),a=new Array(n),s=0;for(s=0;s<r;++s)o[s]=hI(t[s],e[s]);for(;s<n;++s)a[s]=e[s];for(s=0;s<r;++s)a[s]=o[s](i);return a}}(t,e):"object"==typeof t&&"object"==typeof e?function(t,e){void 0===t&&(t={}),void 0===e&&(e={});var n={},r={};return Object.entries(e).forEach(function(e){var i=Be(e,2),o=i[0],a=i[1];o in t?n[o]=hI(t[o],a):r[o]=a}),function(t){return Object.entries(n).forEach(function(e){var n=Be(e,2),i=n[0],o=n[1];return r[i]=o(t)}),r}}(t,e):function(e){return t}}function pI(t,e){var n={},r=Array.isArray(e)?e:[e];for(var i in t)r.includes(i)||(n[i]=t[i]);return n}function vI(t,e){return Object.fromEntries(Object.entries(t).map(function(t){var n=Be(t,2);return[n[0],OT(n[1],e)]}))}function gI(t,e){return e&&mn(e)?t.filter(e):t}function yI(t,e){var n=e.startAngle;return(e.endAngle-n)*t+n}function mI(t,e){if("linear"===e.type){var n=Be(e.startPos,2),r=n[0],i=n[1],o=Be(e.endPos,2),a=Be([o[0]-r,o[1]-i],2);return nI([a[0],a[1]])}var s=rI(yI(t,e));return[-Math.sin(s),Math.cos(s)]}function bI(t,e,n){return function(t,e){return e?[t[1],-t[0]]:[-t[1],t[0]]}(mI(t,n),"positive"!==e)}function wI(t,e){return bI(t,e.labelDirection,e)}function xI(t,e,n){return n?"".concat(t," ").concat(n,"axis-").concat(e):t}function EI(t,e,n,r){return r&&t.attr("className",xI(e.name,n,r)),t}function BI(t,e){return"linear"===e.type?function(t,e){var n=Be(e.startPos,2),r=n[0],i=n[1],o=Be(e.endPos,2),a=Be([o[0]-r,o[1]-i],2);return[r+a[0]*t,i+a[1]*t]}(t,e):function(t,e){var n=e.radius,r=Be(e.center,2),i=r[0],o=r[1],a=rI(yI(t,e));return[i+n*Math.cos(a),o+n*Math.sin(a)]}(t,e)}function kI(t){return 0===mI(0,t)[1]}function OI(t){return 0===mI(0,t)[0]}function CI(t,e){return e-t===360}function MI(t,e,n,r,i){var o=e-t,a=Be([i,i],2),s=a[0],u=a[1],c=Be([rI(t),rI(e)],2),l=c[0],A=c[1],f=function(t){return[n+i*Math.cos(t),r+i*Math.sin(t)]},d=Be(f(l),2),h=d[0],p=d[1],v=Be(f(A),2),g=v[0],y=v[1];if(CI(t,e)){var m=Be(f((A+l)/2),2);return[["M",h,p],["A",s,u,0,1,0,m[0],m[1]],["A",s,u,0,1,0,g,y]]}var b=o>180?1:0,w=t>e?0:1;return"M".concat(h,",").concat(p,",A").concat(s,",").concat(u,",0,").concat(b,",").concat(w,",").concat(g,",").concat(y)}function SI(t,e,n,r){var i=e.startAngle,o=e.endAngle,a=e.center,s=e.radius,u=e.classNamePrefix;return t.selectAll(XP.line.class).data([{d:MI.apply(void 0,ke(ke([i,o],Be(a),!1),[s],!1))}],function(t,e){return e}).join(function(t){var n=t.append("path").attr("className",XP.line.name).styles(e).styles({d:function(t){return t.d}});return EI(n,XP.line,DP,u),n},function(t){return t.transition(function(){var t=this,e=function(t,e,n,r){if(!r)return t.attr("__keyframe_data__",n),null;var i=r.duration,o=void 0===i?0:i,a=hI(e,n),s=Math.ceil(+o/16),u=new Array(s).fill(0).map(function(t,e,n){return{__keyframe_data__:a(e/(n.length-1))}});return t.animate(u,be({fill:"both"},r))}(this,function(t){var e=t.attributes,n=e.startAngle,r=e.endAngle,i=e.center,o=e.radius;return ke(ke([n,r],Be(i),!1),[o],!1)}(this),ke(ke([i,o],Be(a),!1),[s],!1),r.update);if(e){var n=function(){var e=Gb(t.attributes,"__keyframe_data__");t.style.d=MI.apply(void 0,ke([],Be(e),!1))};e.onframe=n,e.onfinish=n}return e}).styles(e)},function(t){return t.remove()}).styles(n).transitions()}function FI(t){var e=Be(t,2),n=Be(e[0],2),r=n[0],i=n[1],o=Be(e[1],2);return{x1:r,y1:i,x2:o[0],y2:o[1]}}function TI(t,e,n){var r,i=e.type,o=sT(e,"line");return r="linear"===i?function(t,e,n,r){var i=e.showTrunc,o=e.startPos,a=e.endPos,s=e.truncRange,u=e.lineExtension,c=e.classNamePrefix,l=Be([o,a],2),A=Be(l[0],2),f=A[0],d=A[1],h=Be(l[1],2),p=h[0],v=h[1],g=Be(u?function(t,e,n){void 0===n&&(n=[0,0]);var r=Be([t,e,n],3),i=Be(r[0],2),o=i[0],a=i[1],s=Be(r[1],2),u=s[0],c=s[1],l=Be(r[2],2),A=l[0],f=l[1],d=Be([u-o,c-a],2),h=d[0],p=d[1],v=Math.sqrt(Math.pow(h,2)+Math.pow(p,2)),g=Be([-A/v,f/v],2),y=g[0],m=g[1];return[y*h,y*p,m*h,m*p]}(o,a,u):new Array(4).fill(0),4),y=g[0],m=g[1],b=g[2],w=g[3],x=function(e){return t.selectAll(XP.line.class).data(e,function(t,e){return e}).join(function(t){var e=t.append("line").styles(n).transition(function(t){return TT(this,FI(t.line),!1)});return e.attr("className",function(t){if(!c)return"".concat(XP.line.name," ").concat(t.className);var e=xI(XP.line.name,DP,c);if(t.className===XP.lineFirst.name){var n=xI(XP.lineFirst.name,RP,c);return"".concat(e," ").concat(n)}return t.className===XP.lineSecond.name?(n=xI(XP.lineSecond.name,HP,c),"".concat(e," ").concat(n)):e}),e},function(t){return t.styles(n).transition(function(t){return TT(this,FI(t.line),r.update)})},function(t){return t.remove()}).transitions()};if(!i||!s)return x([{line:[[f+y,d+m],[p+b,v+w]],className:XP.line.name}]);var E=Be(s,2),B=E[0],k=E[1],O=p-f,C=v-d,M=Be([f+O*B,d+C*B],2),S=M[0],F=M[1],T=Be([f+O*k,d+C*k],2),P=T[0],I=T[1],N=x([{line:[[f+y,d+m],[S,F]],className:XP.lineFirst.name},{line:[[P,I],[p+b,v+w]],className:XP.lineSecond.name}]);return function(t,e){e.truncRange,e.truncShape,e.lineExtension}(0,e),N}(t,e,pI(o,"arrow"),n):SI(t,e,pI(o,"arrow"),n),function(t,e,n,r){var i,o=n.showArrow,a=n.showTrunc,s=n.lineArrow,u=n.lineArrowOffset,c=n.lineArrowSize;if(i="arc"===e?t.select(XP.line.class):a?t.select(XP.lineSecond.class):t.select(XP.line.class),!o||!s||"arc"===n.type&&CI(n.startAngle,n.endAngle)){var l=i.node();l&&(l.style.markerEnd=void 0)}else{var A=VT(s);A.attr(r),PT(A,c,!0),i.style("markerEnd",A).style("markerEndOffset",-u)}}(t,i,e,o),r}function PI(t){var e=t.type,n=t.gridCenter;return"linear"===e?n:n||t.center}function II(t,e,n,r){var i=n.classNamePrefix,o=sT(n,"grid"),a=o.type,s=o.areaFill,u=PI(n),c=gI(e,n.gridFilter),l="segment"===a?function(t,e){var n=e.gridLength;return t.map(function(t,r){var i=t.value,o=Be(BI(i,e),2),a=o[0],s=o[1],u=Be(qP(function(t,e){return bI(t,e.gridDirection,e)}(i,e),n),2);return{id:r,points:[[a,s],[a+u[0],s+u[1]]]}})}(c,n):function(t,e){var n=e.gridControlAngles,r=PI(e);if(!r)throw new Error("grid center is not provide");if(t.length<2)throw new Error("Invalid grid data");if(!n||0===n.length)throw new Error("Invalid gridControlAngles");var i=Be(r,2),o=i[0],a=i[1];return t.map(function(t,r){var i=Be(BI(t.value,e),2),s=i[0],u=i[1],c=Be([s-o,u-a],2),l=c[0],A=c[1],f=[];return n.forEach(function(t){var e=rI(t),n=Be([Math.cos(e),Math.sin(e)],2),r=n[0],i=n[1],s=l*r-A*i+o,u=l*i+A*r+a;f.push([s,u])}),{points:f,id:r}})}(c,n),A=be(be({},o),{center:u,areaFill:mn(s)?c.map(function(t,e){return OT(s,[t,e,c])}):s,animate:r,data:l});return t.selectAll(XP.grid.class).data([1]).join(function(t){var e=t.append(function(){return new dI({style:A})}).attr("className",XP.grid.name);return EI(e,XP.grid,jP,i),e},function(t){return t.transition(function(){return this.update(A)})},function(t){return t.remove()}).transitions()}function NI(t,e,n,r,i){return void 0===r&&(r=!0),void 0===i&&(i=!1),!!(r&&t===e||i&&t===n)||t>e&&t<n}function LI(t,e){if(e)try{var n=e.replace(/translate\(([+-]*[\d]+[%]*),[ ]*([+-]*[\d]+[%]*)\)/g,function(e,n,r){return"translate(".concat(function(t,e,n){var r=t.getBBox(),i=r.width,o=r.height,a=Be([e,n].map(function(t,e){var n;return t.includes("%")?parseFloat((null===(n=t.match(/[+-]?([0-9]*[.])?[0-9]+/))||void 0===n?void 0:n[0])||"0")/100*(0===e?i:o):t}),2);return[a[0],a[1]]}(t,n,r),")")});t.attr("transform",n)}catch(t){}}var _I=function(){function t(t,e,n,r){this.set(t,e,n,r)}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.defined("x2")&&this.defined("x1")?this.x2-this.x1:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.defined("y2")&&this.defined("y1")?this.y2-this.y1:void 0},enumerable:!1,configurable:!0}),t.prototype.rotatedPoints=function(t,e,n){var r=this,i=r.x1,o=r.y1,a=r.x2,s=r.y2,u=Math.cos(t),c=Math.sin(t),l=e-e*u+n*c,A=n-e*c-n*u;return[[u*i-c*s+l,c*i+u*s+A],[u*a-c*s+l,c*a+u*s+A],[u*i-c*o+l,c*i+u*o+A],[u*a-c*o+l,c*a+u*o+A]]},t.prototype.set=function(t,e,n,r){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),r<e?(this.y2=e,this.y1=r):(this.y1=e,this.y2=r),this},t.prototype.defined=function(t){return this[t]!==Number.MAX_VALUE&&this[t]!==-Number.MAX_VALUE},t}();function QI(t,e){var n=t.getEulerAngles()||0;t.setEulerAngles(0);var r=t.getBounds(),i=Be(r.min,2),o=i[0],a=i[1],s=Be(r.max,2),u=s[0],c=s[1],l=t.getBBox(),A=l.width,f=l.height,d=0,h=0,p=o,v=a,g=qT(t);if(g){f-=1.5;var y=g.style.textAlign,m=g.style.textBaseline;"center"===y?p=(o+u)/2:"right"!==y&&"end"!==y||(p=u),"middle"===m?v=(a+c)/2:"bottom"===m&&(v=c)}var b=Be(vT(e),4),w=b[0],x=void 0===w?0:w,E=b[1],B=void 0===E?0:E,k=b[2],O=void 0===k?x:k,C=b[3],M=new _I((d+=o)-(void 0===C?B:C),(h+=a)-x,d+A+B,h+f+O);return t.setEulerAngles(n),M.rotatedPoints(rI(n),p,v)}function UI(t,e){return e[0]<=Math.max(t[0][0],t[1][0])&&e[0]<=Math.min(t[0][0],t[1][0])&&e[1]<=Math.max(t[0][1],t[1][1])&&e[1]<=Math.min(t[0][1],t[1][1])}function jI(t,e,n){var r=(e[1]-t[1])*(n[0]-e[0])-(e[0]-t[0])*(n[1]-e[1]);return 0===r?0:r<0?2:1}function DI(t,e){var n=jI(t[0],t[1],e[0]),r=jI(t[0],t[1],e[1]),i=jI(e[0],e[1],t[0]),o=jI(e[0],e[1],t[1]);return n!==r&&i!==o||!(0!==n||!UI(t,e[0]))||!(0!==r||!UI(t,e[1]))||!(0!==i||!UI(e,t[0]))||!(0!==o||!UI(e,t[1]))}function RI(t,e){return[[t[0],t[1],t[2],t[3]],[t[2],t[3],t[4],t[5]],[t[4],t[5],t[6],t[7]],[t[6],t[7],t[0],t[1]]].some(function(t){return function(t,e){var n=Be(t,4),r=n[0],i=n[1],o=n[2],a=n[3],s=Be(e,4),u=s[0],c=s[1],l=o-r,A=a-i,f=s[2]-u,d=s[3]-c,h=l*d-f*A;if(0===h)return!1;var p=h>0,v=r-u,g=i-c,y=l*g-A*v;if(y<0===p)return!1;var m=f*g-d*v;return m<0!==p&&y>h!==p&&m>h!==p}(e,t)})}function HI(t,e,n){var r,i,o=e.crossPadding,a=new Set,s=null,u=function(t,e){var n=t.type,r=t.labelDirection,i=t.crossSize;if(!i)return!1;if("arc"===n){var o=t.center,a=t.radius,s=Be(o,2),u=s[0],c=s[1],l="negative"===r?0:i,A=-a-l,f=a+l,d=Be(vT(e),4),h=d[0],p=d[1],v=d[2],g=d[3];return new _I(u+A-g,c+A-h,u+f+p,c+f+v)}var y=Be(t.startPos,2),m=y[0],b=y[1],w=Be(t.endPos,2),x=w[0],E=w[1],B=Be(OI(t)?[-e,0,e,0]:[0,e,0,-e],4),k=B[0],O=B[1],C=B[2],M=B[3],S=qP(wI(0,t),i),F=new _I(m,b,x,E);return F.x1+=M,F.y1+=k,F.x2+=O+S[0],F.y2+=C+S[1],F}(e,o),c=function(t){return!u||function(t,e){var n,r=t.x1,i=t.x2,o=t.y1,a=t.y2;return n=[[r,o],[i,o],[i,a],[r,a]],QI(e,void 0).every(function(t){return function(t,e){var n=t.length;if(n<3)return!1;var r=[e,[9999,e[1]]],i=0,o=0;do{var a=[t[o],t[(o+1)%n]];if(DI(a,r)){if(0===jI(a[0],e,a[1]))return UI(a,e);i++}o=(o+1)%n}while(0!==o);return!!(1&i)}(n,t)})}(u,t)},l=function(t,e){return!t||!t.firstChild||!function(t,e,n){var r,i,o=QI(t,n).flat(1),a=QI(e,n).flat(1),s=[[o[0],o[1],o[2],o[3]],[o[0],o[1],o[4],o[5]],[o[4],o[5],o[6],o[7]],[o[2],o[3],o[6],o[7]]];try{for(var u=Ee(s),c=u.next();!c.done;c=u.next())if(RI(a,c.value))return!0}catch(t){r={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return!1}(t.firstChild,e.firstChild,vT(n))};try{for(var A=Ee(t),f=A.next();!f.done;f=A.next()){var d=f.value;c(d)?!s||l(s,d)?s=d:(a.add(s),a.add(d)):a.add(d)}}catch(t){r={error:t}}finally{try{f&&!f.done&&(i=A.return)&&i.call(A)}finally{if(r)throw r.error}}return Array.from(a)}function zI(t,e){return void 0===e&&(e={}),pe(t)?0:"number"==typeof t?t:Math.floor(YT(t,e))}var KI=function(t){return void 0!==t&&null!=t&&!Number.isNaN(t)},GI=function(t,e){var n=e.seq,r=void 0===n?2:n;return t.filter(function(t,e){return!(e%r&&(qF(t),1))})},VI=function(t){return t.filter(KI)},WI=new Map([["hide",function(t,e,n,r){var i=t.length,o=e.keepHeader,a=e.keepTail;if(!(i<=1||2===i&&o&&a)){var s,u,c=GI,l=function(t){return t.forEach(r.show),t},A=2,f=t.slice(),d=t.slice(),h=Math.min.apply(Math,ke([1],Be(t.map(function(t){return t.getBBox().width})),!1));if("linear"===n.type&&(kI(n)||OI(n))){var p=KT(t[0]).left,v=KT(t[i-1]).right,g=Math.abs(v-p)||1;A=Math.max(Math.floor(i*h/g),A)}for(o&&(s=f.splice(0,1)[0]),a&&(u=f.splice(-1,1)[0],f.reverse()),l(f);A<t.length&&HI(VI(u?ke(ke([u],Be(d),!1),[s],!1):ke([s],Be(d),!1)),n,null==e?void 0:e.margin).length;)(u&&!s&&A%2==0||u&&s)&&f.splice(0,1).forEach(r.hide),d=c(l(f),{seq:A}),A++}}],["rotate",function(t,e,n,r){var i,o,a=e.optionalAngles,s=void 0===a?[0,45,90]:a,u=e.margin,c=e.recoverWhenFailed,l=void 0===c||c,A=t.map(function(t){return t.getLocalEulerAngles()}),f=function(){return HI(t,n,u).length<1},d=function(e){return t.forEach(function(t,n){var i=Array.isArray(e)?e[n]:e;r.rotate(t,+i)})};try{for(var h=Ee(s),p=h.next();!p.done;p=h.next())if(d(p.value),f())return}catch(t){i={error:t}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}l&&d(A)}],["ellipsis",function(t,e,n,r){if(!(t.length<=0)){var i=e.suffix,o=void 0===i?"...":i,a=e.minLength,s=e.maxLength,u=void 0===s?1/0:s,c=e.step,l=void 0===c?" ":c,A=e.margin,f=void 0===A?[0,0,0,0]:A,d=XT(r.getTextShape(t[0])),h=zI(l,d),p=a?zI(a,d):h,v=zI(u,d);(pe(v)||v===1/0)&&(v=Math.max.apply(null,t.map(function(t){return t.getBBox().width})));for(var g=t.slice(),y=Be(f,4),m=(y[0],y[1],y[2],y[3],function(e){if(g.forEach(function(t){r.ellipsis(r.getTextShape(t),e,o)}),(g=HI(t,n,f)).length<1)return{value:void 0}}),b=v;b>p+h;b-=h){var w=m(b);if("object"==typeof w)return w.value}}}],["wrap",function(t,e,n,r,i){var o,a=e.maxLines,s=void 0===a?3:a,u=e.recoverWhenFailed,c=void 0===u||u,l=e.margin,A=void 0===l?[0,0,0,0]:l,f=OT(null!==(o=e.wordWrapWidth)&&void 0!==o?o:50,[i]),d=t.map(function(t){return t.attr("maxLines")||1}),h=Math.min.apply(Math,ke([],Be(d),!1)),p=function(){return HI(t,n,A).length<1},v=function(t){var e=t.type,n=t.labelDirection;return"linear"===e&&kI(t)?"negative"===n?"bottom":"top":"middle"}(n),g=function(e){return t.forEach(function(t,n){var i=Array.isArray(e)?e[n]:e;r.wrap(t,f,i,v)})};if(!(h>s)){if("linear"===n.type&&kI(n)){if(g(s),p())return}else for(var y=h;y<=s;y++)if(g(y),p())return;c&&g(d)}}]]);function YI(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.reduce(function(t,e){return t*("positive"===e?-1:1)},1)}function XI(t){for(var e=t;e<0;)e+=360;return Math.round(e%360)}function qI(t,e){var n=Be(t,2),r=n[0],i=n[1],o=Be(e,2),a=o[0],s=o[1],u=Be([r*a+i*s,r*s-i*a],2),c=u[0],l=u[1];return Math.atan2(l,c)}function ZI(t,e,n){var r=n.type,i=n.labelAlign,o=wI(t,n),a=XI(e),s=XI(iI(qI([1,0],o))),u="center",c="middle";return"linear"===r?[90,270].includes(s)&&0===a?(u="center",c=1===o[1]?"top":"bottom"):s%180||![90,270].includes(a)?0===s?(NI(a,0,90,!1,!0)||NI(a,0,90)||NI(a,270,360))&&(u="start"):90===s?NI(a,0,90,!1,!0)?u="start":(NI(a,90,180)||NI(a,270,360))&&(u="end"):270===s?NI(a,0,90,!1,!0)?u="end":(NI(a,90,180)||NI(a,270,360))&&(u="start"):180===s&&(90===a?u="start":(NI(a,0,90)||NI(a,270,360))&&(u="end")):u="center":"parallel"===i?c=NI(s,0,180,!0)?"top":"bottom":"horizontal"===i?NI(s,90,270,!1)?u="end":(NI(s,270,360,!1)||NI(s,0,90))&&(u="start"):"perpendicular"===i&&(u=NI(s,90,270)?"end":"start"),{textAlign:u,textBaseline:c}}function JI(t,e,n){var r=n.showTick,i=n.tickLength,o=n.tickDirection,a=n.labelDirection,s=n.labelSpacing,u=e.indexOf(t),c=OT(s,[t,u,e]),l=Be([wI(t.value,n),YI(a,o)],2),A=Be(ZP(qP(l[0],c+(1===l[1]?OT(r?i:0,[t,u,e]):0)),BI(t.value,n)),2);return{x:A[0],y:A[1]}}var $I={html:["fill"],text:[]};function tN(t,e){["text","html"].includes(t.nodeName)&&t.attr(pI(e,$I[t.nodeName]))}function eN(t,e){!function(t,e,n,r){var i=e.labelOverlap,o=void 0===i?[]:i;o.length&&o.forEach(function(i){var o=i.type,a=WI.get(o);(function(t,e,n){return!(e.labelOverlap.length<1)&&("hide"===n?!function(t){for(var e=t;e;){if("offscreen"===e.className)return!0;e=e.parent}return!1}(t[0]):"rotate"===n?!t.some(function(t){var e;return!!(null===(e=t.attr("transform"))||void 0===e?void 0:e.includes("rotate"))}):"ellipsis"!==n&&"wrap"!==n||t.filter(function(t){return t.querySelector("text")}).length>=1)})(t,e,o)&&(null==a||a(t,i,e,r,n))})}(this.node().childNodes,t,e,{hide:qF,show:XF,rotate:function(e,n){!function(t,e,n){e.setLocalEulerAngles(t);var r=ZI(e.__data__.value,t,n),i=e.querySelector(XP.labelItem.class);i&&tN(i,r)}(+n,e,t)},ellipsis:function(t,e,n){t&&JT(t,e||1/0,n)},wrap:function(t,e,n){t&&function(t,e,n,r){void 0===n&&(n=2),void 0===r&&(r="top"),ZT(t,{wordWrap:!0,wordWrapWidth:e,maxLines:n,textBaseline:r})}(t,e,n)},getTextShape:function(t){return t.querySelector(XP.labelItem.class)}})}function nN(t,e,n,r,i){var o=n.indexOf(e),a=i.labelRender,s=i.classNamePrefix,u=fT(t).append(a?function(t,e,n,r){var i=r.labelRender,o=(Gb(r,"endPos.0",400)-Gb(r,"startPos.0",0))/n.length,a=mn(i)?OT(i,[t,e,n,wI(t.value,r)]):t.label||"",s=function(t){var e=(new DOMParser).parseFromString(t,"text/html").body.firstElementChild;if(console.log(null==e?void 0:e.getClientRects(),11),!e)return 0;var n=e.getAttribute("style")||"",r=Object.fromEntries(n.split(";").map(function(t){return t.trim()}).filter(function(t){return t.includes(":")}).map(function(t){var e=Be(t.split(":").map(function(t){return t.trim()}),2),n=e[0],r=e[1];return[n.toLowerCase(),r]})),i=function(t){if(!t)return 0;var e=t.match(/([\d.]+)px/);return e?parseFloat(e[1]):0};if(r.height)return i(r.height);var o,a=i(r["font-size"])||16,s=r["line-height"];o=s&&"normal"!==s?s.endsWith("px")?i(s):/^[\d.]+$/.test(s)?parseFloat(s)*a:a:1.2*a;var u=i(r["padding-top"]),c=i(r["padding-bottom"]);r.padding&&(1===(l=r.padding.split(/\s+/).map(i)).length||2===l.length?(u=l[0],c=l[0]):(3===l.length||4===l.length)&&(u=l[0],c=l[2]));var l,A=i(r["border-top-width"]),f=i(r["border-bottom-width"]);if(r.border){var d=r.border.match(/([\d.]+)px/);d&&(A=parseFloat(d[1]),f=parseFloat(d[1]))}return r["border-width"]&&(1===(l=r["border-width"].split(/\s+/).map(i)).length||2===l.length?(A=l[0],f=l[0]):(3===l.length||4===l.length)&&(A=l[0],f=l[2])),o+u+c+A+f}(a)||30;return function(){return e={width:o,height:s},"function"==typeof(t=a)?t():ve(t)||de(t)?new Uu({style:be(be({pointerEvents:"auto"},e),{innerHTML:t})}):t;var t,e}}(e,o,n,i):function(t,e,n,r){var i=r.labelFormatter;return mn(i)?function(){return VT(OT(i,[t,e,n,wI(t.value,r)]))}:function(){return VT(t.label||"")}}(e,o,n,i)).attr("className",XP.labelItem.name).node();EI(fT(u),XP.labelItem,VP,s);var c=Be(cT(vI(r,[e,o,n])),2),l=c[0],A=c[1],f=A.transform,d=we(A,["transform"]);LI(u,f);var h=function(t,e,n){var r,i=n.labelAlign;if(null===(r=e.style.transform)||void 0===r?void 0:r.includes("rotate"))return e.getLocalEulerAngles();var o=wI(t.value,n),a=mI(t.value,n);return"horizontal"===i?0:function(t){var e=(t+360)%180;return NI(e,-90,90)||(e+=180),e}(iI("perpendicular"===i?qI([1,0],o):qI([a[0]<0?-1:1,0],a)))}(e,u,i);if(u.getLocalEulerAngles()||u.setLocalEulerAngles(h),tN(u,be(be({},ZI(e.value,h,i)),l)),"html"===u.nodeName){var p=u.getBBox(),v=u.style.x||0;u.attr("x",v-p.width/2)}return t.attr(d),u}function rN(t,e,n,r,i){var o,a,s,u=n.classNamePrefix,c=gI(e,n.labelFilter),l=sT(n,"label"),A=t.selectAll(XP.label.class).data(c,function(t,e){return e}).join(function(t){var r=t.append("g").attr("className",XP.label.name).transition(function(t){nN(this,t,e,l,n);var r=JI(t,e,n),i=r.x,o=r.y;return this.style.transform="translate(".concat(i,", ").concat(o,")"),null});return EI(r,XP.label,GP,u),r},function(t){return t.transition(function(t){var i=function(t,e,n,r){if(void 0===r&&(r="destroy"),function(t,e){return"text"===t.nodeName&&"text"===e.nodeName&&t.attributes.text===e.attributes.text}(t,e))return t.remove(),[null];var i=function(){"destroy"===r?t.destroy():"hide"===r&&qF(t),e.isVisible()&&XF(e)};if(!n)return i(),[null];var o=n.duration,a=void 0===o?0:o,s=n.delay,u=void 0===s?0:s,c=Math.ceil(+a/2),l=+a/4,A=Be(t.getGeometryBounds().center,2),f=A[0],d=A[1],h=Be(e.getGeometryBounds().center,2),p=Be([(f+h[0])/2-f,(d+h[1])/2-d],2),v=p[0],g=p[1],y=t.style.opacity,m=void 0===y?1:y,b=e.style.opacity,w=void 0===b?1:b,x=t.style.transform||"",E=e.style.transform||"",B=t.animate([{opacity:m,transform:"translate(0, 0) ".concat(x)},{opacity:0,transform:"translate(".concat(v,", ").concat(g,") ").concat(x)}],be(be({fill:"both"},n),{duration:u+c+l})),k=e.animate([{opacity:0,transform:"translate(".concat(-v,", ").concat(-g,") ").concat(E),offset:.01},{opacity:w,transform:"translate(0, 0) ".concat(E)}],be(be({fill:"both"},n),{duration:c+l,delay:u+c-l}));return MT(k,i),[B,k]}(this.querySelector(XP.labelItem.class),nN(this,t,e,l,n),r.update),o=JI(t,e,n),a=o.x,s=o.y,u=TT(this,{transform:"translate(".concat(a,", ").concat(s,")")},r.update);return ke(ke([],Be(i),!1),[u],!1)})},function(t){return o=t,t.transition(function(){var t=this,e=oI(this.childNodes[0],r.exit);return MT(e,function(){return fT(t).remove()}),e}),o}).transitions();return s=function(){eN.call(t,n,i)},0===(a=A).length?s():Promise.all(a.map(function(t){return null==t?void 0:t.finished})).then(s),A}function iN(t,e){return bI(t,e.tickDirection,e)}function oN(t,e,n,r,i,o){var a=function(t,e,n,r,i){var o=i.tickFormatter,a=i.classNamePrefix,s=iN(e.value,i),u="line";mn(o)&&(u=function(){return OT(o,[e,n,r,s])});var c=t.append(u).attr("className",XP.tickItem.name);return EI(c,XP.tickItem,KP,a),c}(fT(this),t,e,n,r);!function(t,e,n,r,i,o,a){var s=iN(t.value,o),u=function(t,e,n,r,i){var o=Be(function(t,e){var n=Be(t,2);return[[0,0],[n[0]*e,n[1]*e]]}(r,OT(i.tickLength,[t,e,n])),2),a=Be(o[0],2),s=a[0],u=a[1],c=Be(o[1],2);return{x1:s,x2:c[0],y1:u,y2:c[1]}}(t,e,n,s,o),c=u.x1,l=u.x2,A=u.y1,f=u.y2,d=Be(cT(vI(a,[t,e,n,s])),2),h=d[0],p=d[1];"line"===r.node().nodeName&&r.styles(be({x1:c,x2:l,y1:A,y2:f},h)),i.attr(p),r.styles(h)}(t,e,n,a,this,r,i);var s=Be(BI(t.value,r),2),u=s[0],c=s[1];return TT(this,{transform:"translate(".concat(u,", ").concat(c,")")},o)}function aN(t,e,n,r,i){var o=Be(cT(sT(r,"title")),2),a=o[0],s=o[1],u=s.transform,c=s.transformOrigin,l=we(s,["transform","transformOrigin"]);e.styles(l);var A=u||function(t,e,n){var r=2*t.getGeometryBounds().halfExtents[1];if("vertical"===e){if("left"===n)return"rotate(-90) translate(0, ".concat(r/2,")");if("right"===n)return"rotate(-90) translate(0, -".concat(r/2,")")}return""}(t.node(),a.direction,a.position);t.styles(be(be({},a),{transformOrigin:c})),LI(t.node(),A);var f=function(t,e,n){var r=n.titlePosition,i=void 0===r?"lb":r,o=n.titleSpacing,a=pT(i),s=t.node().getLocalBounds(),u=Be(s.min,2),c=u[0],l=u[1],A=Be(s.halfExtents,2),f=A[0],d=A[1],h=Be(e.node().getLocalBounds().halfExtents,2),p=h[0],v=h[1],g=Be([c+f,l+d],2),y=g[0],m=g[1],b=Be(vT(o),4),w=b[0],x=b[1],E=b[2],B=b[3];if(["start","end"].includes(i)&&"linear"===n.type){var k=n.startPos,O=n.endPos,C=Be("start"===i?[k,O]:[O,k],2),M=C[0],S=C[1],F=Be(qP(nI([-S[0]+M[0],-S[1]+M[1]]),w),2),T=F[0],P=F[1];return{x:M[0]+T,y:M[1]+P}}return a.includes("t")&&(m-=d+v+w),a.includes("r")&&(y+=f+p+x),a.includes("l")&&(y-=f+p+B),a.includes("b")&&(m+=d+v+E),{x:y,y:m}}(fT(n._offscreen||n.querySelector(XP.mainGroup.class)),e,r),d=f.x,h=f.y;return TT(e.node(),{transform:"translate(".concat(d,", ").concat(h,")")},i)}function sN(t,e,n,r){var i=t.showLine,o=t.showTick,a=t.showLabel,s=t.classNamePrefix,u=e.maybeAppendByClassName(XP.lineGroup,"g");EI(u,XP.lineGroup,LP,s);var c=gT(i,u,function(e){return TI(e,t,r)})||[],l=e.maybeAppendByClassName(XP.tickGroup,"g");EI(l,XP.tickGroup,_P,s);var A=gT(o,l,function(e){return function(t,e,n,r){var i=n.classNamePrefix,o=gI(e,n.tickFilter),a=sT(n,"tick");return t.selectAll(XP.tick.class).data(o,function(t){return t.id||t.label}).join(function(t){var e=t.append("g").attr("className",XP.tick.name).transition(function(t,e){return oN.call(this,t,e,o,n,a,!1)});return EI(e,XP.tick,zP,i),e},function(t){return t.transition(function(t,e){return this.removeChildren(),oN.call(this,t,e,o,n,a,r.update)})},function(t){return t.transition(function(){var t=this,e=oI(this.childNodes[0],r.exit);return MT(e,function(){return t.remove()}),e})}).transitions()}(e,n,t,r)})||[],f=e.maybeAppendByClassName(XP.labelGroup,"g");EI(f,XP.labelGroup,QP,s);var d=gT(a,f,function(i){return rN(i,n,t,r,e.node())})||[];return ke(ke(ke([],Be(c),!1),Be(A),!1),Be(d),!1).filter(function(t){return!!t})}var uN=function(t){function e(e){return t.call(this,e,YP)||this}return me(e,t),e.prototype.render=function(t,e,n){var r=this,i=t.titleText,o=t.data,a=t.animate,s=t.showTitle,u=t.showGrid,c=t.dataThreshold,l=t.truncRange,A=t.classNamePrefix,f=e.className||"axis";A?e.attr("className","".concat(f," ").concat(A,"axis")):e.className||e.attr("className","axis");var d=function(t,e){if(t.length<=e)return t;for(var n=Math.floor(t.length/e),r=[],i=0;i<t.length;i+=n)r.push(t[i]);return r}(o,c).filter(function(t){var e=t.value;return!(l&&e>l[0]&&e<l[1])}),h=CT(void 0===n?a:n),p=fT(e).maybeAppendByClassName(XP.gridGroup,"g");EI(p,XP.gridGroup,IP,A);var v=gT(u,p,function(e){return II(e,d,t,h)})||[],g=fT(e).maybeAppendByClassName(XP.mainGroup,"g");EI(g,XP.mainGroup,NP,A),i&&(!this.initialized&&h.enter||this.initialized&&h.update)&&sN(t,fT(this.offscreenGroup),d,CT(!1));var y=sN(t,fT(g.node()),d,h),m=fT(e).maybeAppendByClassName(XP.titleGroup,"g");EI(m,XP.titleGroup,UP,A);var b=gT(s,m,function(e){return function(t,e,n,r){var i=n.titleText,o=n.classNamePrefix;return t.selectAll(XP.title.class).data([{title:i}].filter(function(t){return!!t.title}),function(t,e){return t.title}).join(function(a){var s=a.append(function(){return VT(i)}).attr("className",XP.title.name).transition(function(){return aN(fT(this),t,e,n,r.enter)});return EI(s,XP.title,WP,o),s},function(i){return i.transition(function(){return aN(fT(this),t,e,n,r.update)})},function(t){return t.remove()}).transitions()}(e,r,t,h)})||[];return ke(ke(ke([],Be(v),!1),Be(y),!1),Be(b),!1).flat().filter(function(t){return!!t})},e}(rT);function cN(t){var e=t.canvas,n=t.touches,r=t.offsetX,i=t.offsetY;if(e)return[e.x,e.y];if(n){var o=n[0];return[o.clientX,o.clientY]}return r&&i?[r,i]:[0,0]}function lN(t){var e=t.nativeEvent,n=t.touches,r=t.clientX,i=t.clientY;if(e)return[e.clientX,e.clientY];if(n){var o=n[0];return[o.clientX,o.clientY]}return"number"==typeof r&&"number"==typeof i?[r,i]:[0,0]}function AN(t,e){return+t.toPrecision(e)}const fN=function(t){return t};var dN=function(){return B(function t(e){x(this,t),this.options=Xm({},this.getDefaultOptions()),this.update(e)},[{key:"getOptions",value:function(){return this.options}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=Xm({},this.options,t),this.rescale(t)}},{key:"rescale",value:function(t){}}])}();function hN(t,e){return e-t?function(n){return(n-t)/(e-t)}:function(t){return.5}}function pN(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.reduce(function(t,e){return function(n){return t(e(n))}},t)}var vN=c(5193),gN=c.n(vN);function yN(t,e,n){var r=n;return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function mN(t){var e=gN().get(t);if(!e)return null;var n=e.model,r=e.value;return"rgb"===n?r:"hsl"===n?function(t){var e=t[0]/360,n=t[1]/100,r=t[2]/100,i=t[3];if(0===n)return[255*r,255*r,255*r,i];var o=r<.5?r*(1+n):r+n-r*n,a=2*r-o;return[255*yN(a,o,e+1/3),255*yN(a,o,e),255*yN(a,o,e-1/3),i]}(r):null}var bN=function(t,e){return function(n){return t*(1-n)+e*n}},wN=function(t,e){return"number"==typeof t&&"number"==typeof e?bN(t,e):"string"==typeof t&&"string"==typeof e?function(t,e){var n=mN(t),r=mN(e);return null===n||null===r?n?function(){return t}:function(){return e}:function(t){for(var e=new Array(4),i=0;i<4;i+=1){var o=n[i],a=r[i];e[i]=o*(1-t)+a*t}var s=e[0],u=e[1],c=e[2],l=e[3];return"rgba(".concat(Math.round(s),", ").concat(Math.round(u),", ").concat(Math.round(c),", ").concat(l,")")}}(t,e):function(){return t}},xN=function(t,e){var n=bN(t,e);return function(t){return Math.round(n(t))}};function EN(t){return null===t}function BN(t){return!pn(t)&&!EN(t)&&!Number.isNaN(t)}var kN=Math.sqrt(50),ON=Math.sqrt(10),CN=Math.sqrt(2);function MN(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=kN?10:o>=ON?5:o>=CN?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=kN?10:o>=ON?5:o>=CN?2:1)}var SN=function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,i=[t,e],o=0,a=i.length-1,s=i[o],u=i[a];if(u<s){var c=[u,s];s=c[0],u=c[1];var l=[a,o];o=l[0],a=l[1]}return(n=MN(s,u,r))>0?n=MN(s=Math.floor(s/n)*n,u=Math.ceil(u/n)*n,r):n<0&&(n=MN(s=Math.ceil(s*n)/n,u=Math.floor(u*n)/n,r)),n>0?(i[o]=Math.floor(s/n)*n,i[a]=Math.ceil(u/n)*n):n<0&&(i[o]=Math.ceil(s*n)/n,i[a]=Math.floor(u*n)/n),i},FN=function(t,e,n){var r,i,o=v(t,2),a=o[0],s=o[1],u=v(e,2),c=u[0],l=u[1];return a<s?(r=hN(a,s),i=n(c,l)):(r=hN(s,a),i=n(l,c)),pN(i,r)},TN=function(t,e,n){for(var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=t[0]>t[r],s=a?O(t).reverse():t,u=a?O(e).reverse():e,c=0;c<r;c+=1)i[c]=hN(s[c],s[c+1]),o[c]=n(u[c],u[c+1]);return function(e){var n=function(t,e,n,r){for(var i=1,o=r||t.length,a=function(t){return t};i<o;){var s=Math.floor((i+o)/2);a(t[s])>e?o=s:i=s+1}return i}(t,e,0,r)-1,a=i[n];return pN(o[n],a)(e)}},PN=function(t,e,n,r){return(Math.min(t.length,e.length)>2?TN:FN)(t,e,r?xN:n)},IN=function(t){function e(){return x(this,e),F(this,e,arguments)}return P(e,t),B(e,[{key:"getDefaultOptions",value:function(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:bN,tickCount:5}}},{key:"map",value:function(t){return BN(t)?this.output(t):this.options.unknown}},{key:"invert",value:function(t){return BN(t)?this.input(t):this.options.unknown}},{key:"nice",value:function(){if(this.options.nice){var t=hw(this.getTickMethodOptions()),e=t[0],n=t[1],r=t[2],i=d(t).slice(3);this.options.domain=this.chooseNice().apply(void 0,[e,n,r].concat(O(i)))}}},{key:"getTicks",value:function(){var t=this.options.tickMethod,e=hw(this.getTickMethodOptions()),n=e[0],r=e[1],i=e[2],o=d(e).slice(3);return t.apply(void 0,[n,r,i].concat(O(o)))}},{key:"getTickMethodOptions",value:function(){var t=this.options,e=t.domain,n=t.tickCount;return[e[0],e[e.length-1],n]}},{key:"chooseNice",value:function(){return SN}},{key:"rescale",value:function(){this.nice();var t=v(this.chooseTransforms(),2),e=t[0],n=t[1];this.composeOutput(e,this.chooseClamp(e)),this.composeInput(e,n,this.chooseClamp(n))}},{key:"chooseClamp",value:function(t){var e,n,r,i,o=this.options,a=o.clamp,s=o.range,u=this.options.domain.map(t),c=Math.min(u.length,s.length);return a?(e=u[0],n=u[c-1],r=n<e?n:e,i=e>n?e:n,function(t){return Math.min(Math.max(r,t),i)}):fN}},{key:"composeOutput",value:function(t,e){var n=this.options,r=n.domain,i=n.range,o=n.round,a=n.interpolate,s=PN(r.map(t),i,a,o);this.output=pN(s,e,t)}},{key:"composeInput",value:function(t,e,n){var r=this.options,i=r.domain,o=r.range,a=PN(o,i.map(t),bN);this.input=pN(e,n,a)}}])}(dN),NN=function(t,e,n){var r,i,o=t,a=e;if(o===a&&n>0)return[o];var s=MN(o,a,n);if(0===s||!Number.isFinite(s))return[];if(s>0){o=Math.ceil(o/s),a=Math.floor(a/s),i=new Array(r=Math.ceil(a-o+1));for(var u=0;u<r;u+=1)i[u]=(o+u)*s}else{s=-s,o=Math.ceil(o*s),a=Math.floor(a*s),i=new Array(r=Math.ceil(a-o+1));for(var c=0;c<r;c+=1)i[c]=(o+c)/s}return i},LN=function(t){function e(){return x(this,e),F(this,e,arguments)}return P(e,t),B(e,[{key:"getDefaultOptions",value:function(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:wN,tickMethod:NN,tickCount:5}}},{key:"chooseTransforms",value:function(){return[fN,fN]}},{key:"clone",value:function(){return new e(this.options)}}])}(IN);function _N(t,e,n){if(M())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var i=new(t.bind.apply(t,r));return n&&T(i,n.prototype),i}function QN(t){var e="function"==typeof Map?new Map:void 0;return QN=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return _N(t,arguments,C(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),T(n,t)},QN(t)}function UN(t,e){var n=t.map,r=(0,t.initKey)(e);return n.has(r)?n.get(r):e}function jN(t,e){var n=t.map,r=(0,t.initKey)(e);return n.has(r)?n.get(r):(n.set(r,e),e)}function DN(t,e){var n=t.map,r=(0,t.initKey)(e);return n.has(r)&&(e=n.get(r),n.delete(r)),e}function RN(t){return"object"==typeof t?t.valueOf():t}var HN=function(t){function e(t){var n;if(x(this,e),(n=F(this,e)).map=new Map,n.initKey=RN,null!==t){var r,i=qn(t);try{for(i.s();!(r=i.n()).done;){var o=v(r.value,2),a=o[0],s=o[1];n.set(a,s)}}catch(t){i.e(t)}finally{i.f()}}return n}return P(e,t),B(e,[{key:"get",value:function(t){return xn(e,"get",this,3)([UN({map:this.map,initKey:this.initKey},t)])}},{key:"has",value:function(t){return xn(e,"has",this,3)([UN({map:this.map,initKey:this.initKey},t)])}},{key:"set",value:function(t,n){return xn(e,"set",this,3)([jN({map:this.map,initKey:this.initKey},t),n])}},{key:"delete",value:function(t){return xn(e,"delete",this,3)([DN({map:this.map,initKey:this.initKey},t)])}}])}(QN(Map)),zN=Symbol("defaultUnknown");function KN(t,e,n){for(var r=0;r<e.length;r+=1)t.has(e[r])||t.set(n(e[r]),r)}function GN(t){var e=t.value,n=t.from,r=t.to,i=t.mapper,o=t.notFoundReturn,a=i.get(e);if(void 0===a){if(o!==zN)return o;a=n.push(e)-1,i.set(e,a)}return r[a%r.length]}function VN(t){return t instanceof Date?function(t){return"".concat(t)}:"object"==typeof t?function(t){return JSON.stringify(t)}:function(t){return t}}var WN=function(t){function e(t){return x(this,e),F(this,e,[t])}return P(e,t),B(e,[{key:"getDefaultOptions",value:function(){return{domain:[],range:[],unknown:zN}}},{key:"map",value:function(t){return 0===this.domainIndexMap.size&&KN(this.domainIndexMap,this.getDomain(),this.domainKey),GN({value:this.domainKey(t),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}},{key:"invert",value:function(t){return 0===this.rangeIndexMap.size&&KN(this.rangeIndexMap,this.getRange(),this.rangeKey),GN({value:this.rangeKey(t),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}},{key:"rescale",value:function(t){var e=v(this.options.domain,1)[0],n=v(this.options.range,1)[0];if(this.domainKey=VN(e),this.rangeKey=VN(n),!this.rangeIndexMap)return this.rangeIndexMap=new Map,void(this.domainIndexMap=new Map);t&&!t.range||this.rangeIndexMap.clear(),(!t||t.domain||t.compare)&&(this.domainIndexMap.clear(),this.sortedDomain=void 0)}},{key:"clone",value:function(){return new e(this.options)}},{key:"getRange",value:function(){return this.options.range}},{key:"getDomain",value:function(){if(this.sortedDomain)return this.sortedDomain;var t=this.options,e=t.domain,n=t.compare;return this.sortedDomain=n?O(e).sort(n):e,this.sortedDomain}}])}(dN);function YN(t){return Math.round(1e12*t)/1e12}var XN=function(t){function e(t){return x(this,e),F(this,e,[t])}return P(e,t),B(e,[{key:"getDefaultOptions",value:function(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:zN,flex:[]}}},{key:"clone",value:function(){return new e(this.options)}},{key:"getStep",value:function(t){return void 0===this.valueStep?1:"number"==typeof this.valueStep?this.valueStep:void 0===t?Array.from(this.valueStep.values())[0]:this.valueStep.get(t)}},{key:"getBandWidth",value:function(t){return void 0===this.valueBandWidth?1:"number"==typeof this.valueBandWidth?this.valueBandWidth:void 0===t?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(t)}},{key:"getRange",value:function(){return this.adjustedRange}},{key:"getPaddingInner",value:function(){var t=this.options,e=t.padding,n=t.paddingInner;return e>0?e:n}},{key:"getPaddingOuter",value:function(){var t=this.options,e=t.padding,n=t.paddingOuter;return e>0?e:n}},{key:"rescale",value:function(){xn(e,"rescale",this,3)([]);var t=this.options,n=t.align,r=t.domain,i=function(t){var e,n=t.domain.length;if(0===n)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(null===(e=t.flex)||void 0===e?void 0:e.length)return function(t){for(var e=t.domain,n=t.range,r=t.paddingOuter,i=t.paddingInner,o=t.flex,a=t.round,s=t.align,u=e.length,c=function(t,e){var n=e-t.length;return n>0?[].concat(O(t),O(new Array(n).fill(1))):n<0?t.slice(0,e):t}(o,u),l=v(n,2),A=l[0],f=l[1]-A,d=f/(2/u*r+1-1/u*i),h=d*i/u,p=d-u*h,g=function(t){var e=Math.min.apply(Math,O(t));return t.map(function(t){return t/e})}(c),y=g.reduce(function(t,e){return t+e}),m=p/y,b=new HN(e.map(function(t,e){var n=g[e]*m;return[t,a?Math.floor(n):n]})),w=new HN(e.map(function(t,e){var n=g[e]*m+h;return[t,a?Math.floor(n):n]})),x=Array.from(w.values()).reduce(function(t,e){return t+e}),E=A+(f-(x-x/u*i))*s,B=a?Math.round(E):E,k=new Array(u),C=0;C<u;C+=1){k[C]=YN(B);var M=e[C];B+=w.get(M)}return{valueBandWidth:b,valueStep:w,adjustedRange:k}}(t);var r,i,o=t.range,a=t.paddingOuter,s=t.paddingInner,u=t.round,c=t.align,l=o[0],A=o[1]-l,f=2*a,d=n-s;r=A/Math.max(1,f+d),u&&(r=Math.floor(r)),l+=(A-r*(n-s))*c,i=r*(1-s),u&&(l=Math.round(l),i=Math.round(i));var h=new Array(n).fill(0).map(function(t,e){return l+e*r});return{valueStep:r,valueBandWidth:i,adjustedRange:h}}({align:n,range:t.range,round:t.round,flex:t.flex,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:r}),o=i.adjustedRange,a=i.valueBandWidth,s=i.valueStep;this.valueStep=s,this.valueBandWidth=a,this.adjustedRange=o}}])}(WN),qN=function(t){function e(e){var n=this,r=e.style,i=we(e,["style"]);return(n=t.call(this,Xm({},{type:"column"},be({style:r},i)))||this).columnsGroup=new _u({name:"columns"}),n.appendChild(n.columnsGroup),n.render(),n}return me(e,t),e.prototype.render=function(){var t=this.attributes,e=t.columns,n=t.x,r=t.y;this.columnsGroup.style.transform="translate(".concat(n,", ").concat(r,")"),fT(this.columnsGroup).selectAll(".column").data(e.flat()).join(function(t){return t.append("rect").attr("className","column").each(function(t){this.attr(t)})},function(t){return t.each(function(t){this.attr(t)})},function(t){return t.remove()})},e.prototype.update=function(t){this.attr($F({},this.attributes,t)),this.render()},e.prototype.clear=function(){this.removeChildren()},e}(Tu),ZN=function(t){function e(e){var n=this,r=e.style,i=we(e,["style"]);return(n=t.call(this,Xm({},{type:"lines"},be({style:r},i)))||this).linesGroup=n.appendChild(new _u),n.areasGroup=n.appendChild(new _u),n.render(),n}return me(e,t),e.prototype.render=function(){var t=this.attributes,e=t.lines,n=t.areas,r=t.x,i=t.y;this.style.transform="translate(".concat(r,", ").concat(i,")"),e&&this.renderLines(e),n&&this.renderAreas(n)},e.prototype.clear=function(){this.linesGroup.removeChildren(),this.areasGroup.removeChildren()},e.prototype.update=function(t){this.attr($F({},this.attributes,t)),this.render()},e.prototype.renderLines=function(t){fT(this.linesGroup).selectAll(".line").data(t).join(function(t){return t.append("path").attr("className","line").each(function(t){this.attr(t)})},function(t){return t.each(function(t){this.attr(t)})},function(t){return t.remove()})},e.prototype.renderAreas=function(t){fT(this.linesGroup).selectAll(".area").data(t).join(function(t){return t.append("path").attr("className","area").each(function(t){this.attr(t)})},function(t){return t.each(function(t){this.style(t)})},function(t){return t.remove()})},e}(Tu);function JN(t,e){void 0===e&&(e=!1);var n=e?t.length-1:0,r=t.map(function(t,e){return ke([e===n?"M":"L"],Be(t),!1)});return e?r.reverse():r}function $N(t,e){if(void 0===e&&(e=!1),t.length<=2)return JN(t);for(var n=[],r=t.length,i=0;i<r;i+=1){var o=e?t[r-i-1]:t[i];Xg(o,n.slice(-2))||n.push.apply(n,ke([],Be(o),!1))}var a=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=[[0,0],[1,1]]);for(var r=!!e,i=[],o=0,a=t.length;o<a;o+=2)i.push([t[o],t[o+1]]);var s,u,c,l=function(t,e,n,r){var i,o,a,s,u,c,l=[],A=!!r,f=[1/0,1/0],d=[-1/0,-1/0];if(A){f=(i=Be(r,2))[0],d=i[1];for(var h=0,p=t.length;h<p;h+=1)f=$P(f,g=t[h]),d=tI(d,g)}h=0;for(var v=t.length;h<v;h+=1){var g=t[h];if(0!==h||n)if(h!==v-1||n){o=t[[h?h-1:v-1,h-1][n?0:1]];var y=[0,0];y=qP(y=JP(a=t[n?(h+1)%v:h+1],o),.4);var m=eI(g,o),b=eI(g,a),w=m+b;0!==w&&(m/=w,b/=w);var x=qP(y,-m),E=qP(y,b);u=ZP(g,x),s=$P(s=ZP(g,E),tI(a,g)),s=tI(s,$P(a,g)),u=$P(u=ZP(g,x=qP(x=JP(s,g),-m/b)),tI(o,g)),s=ZP(g,E=qP(E=JP(g,u=tI(u,$P(o,g))),b/m)),A&&(u=$P(u=tI(u,f),d),s=$P(s=tI(s,f),d)),l.push(c),l.push(u),c=s}else u=g,l.push(c),l.push(u);else c=g}return n&&l.push(l.shift()),l}(i,0,r,n),A=i.length,f=[];for(o=0;o<A-1;o+=1)s=l[2*o],u=l[2*o+1],c=i[o+1],f.push(["C",s[0],s[1],u[0],u[1],c[0],c[1]]);return r&&(s=l[A],u=l[A+1],c=Be(i,1)[0],f.push(["C",s[0],s[1],u[0],u[1],c[0],c[1]])),f}(n,!1);return e?a.unshift(ke(["M"],Be(t[r-1]),!1)):a.unshift(ke(["M"],Be(t[0]),!1)),a}function tL(t,e,n){var r=Ly(t);return r.push(["L",e,n],["L",0,n],["Z"]),r}const eL=function(t,e){if(tn(t)){for(var n,r=1/0,i=0;i<t.length;i++){var o=t[i],a=mn(e)?e(o):o[e];a<r&&(n=o,r=a)}return n}},nL=function(t,e){if(tn(t)){for(var n,r=-1/0,i=0;i<t.length;i++){var o=t[i],a=mn(e)?e(o):o[e];a>r&&(n=o,r=a)}return n}};function rL(t){return 0===t.length?[0,0]:[en(eL(t,function(t){return en(t)||0})),nn(nL(t,function(t){return nn(t)||0}))]}function iL(t){for(var e=Ly(t),n=e[0].length,r=Be([Array(n).fill(0),Array(n).fill(0)],2),i=r[0],o=r[1],a=0;a<e.length;a+=1)for(var s=e[a],u=0;u<n;u+=1)s[u]>=0?(s[u]+=i[u],i[u]=s[u]):(s[u]+=o[u],o[u]=s[u]);return e}var oL=function(t){function e(e){return t.call(this,e,{type:"line",x:0,y:0,width:200,height:20,isStack:!1,color:["#83daad","#edbf45","#d2cef9","#e290b3","#6f63f4"],smooth:!0,lineLineWidth:1,areaOpacity:0,isGroup:!1,columnLineWidth:1,columnStroke:"#fff",scale:1,spacing:0})||this}return me(e,t),Object.defineProperty(e.prototype,"rawData",{get:function(){var t=this.attributes.data;if(!t||0===(null==t?void 0:t.length))return[[]];var e=Ly(t);return de(e[0])?[e]:e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this.attributes.isStack?iL(this.rawData):this.rawData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scales",{get:function(){return this.createScales(this.data)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baseline",{get:function(){var t=this.scales.y,e=Be(t.getOptions().domain||[0,0],2),n=e[0],r=e[1];return r<0?t.map(r):t.map(n<0?0:n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"containerShape",{get:function(){var t=this.attributes;return{width:t.width,height:t.height}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"linesStyle",{get:function(){var t=this,e=this.attributes,n=e.type,r=e.isStack,i=e.smooth;if("line"!==n)throw new Error("linesStyle can only be used in line type");var o=sT(this.attributes,"area"),a=sT(this.attributes,"line"),s=this.containerShape.width,u=this.data;if(0===u[0].length)return{lines:[],areas:[]};var c=this.scales,l=function(t,e){var n,r=e.x,i=e.y,o=Be(i.getOptions().range||[0,0],2),a=o[0],s=o[1];return s>a&&(n=Be([a,s],2),s=n[0],a=n[1]),t.map(function(t){return t.map(function(t,e){return[r.map(e),ge(i.map(t),s,a)]})})}(u,{type:"line",x:c.x,y:c.y}),A=[];if(o){var f=this.baseline;A=r?i?function(t,e,n){for(var r=[],i=t.length-1;i>=0;i-=1){var o=t[i],a=$N(o),s=void 0;if(0===i)s=tL(a,e,n);else{var u=$N(t[i-1],!0),c=o[0];u[0][0]="L",s=ke(ke(ke([],Be(a),!1),Be(u),!1),[ke(["M"],Be(c),!1),["Z"]],!1)}r.push(s)}return r}(l,s,f):function(t,e,n){for(var r=[],i=t.length-1;i>=0;i-=1){var o=JN(t[i]),a=void 0;if(0===i)a=tL(o,e,n);else{var s=JN(t[i-1],!0);s[0][0]="L",a=ke(ke(ke([],Be(o),!1),Be(s),!1),[["Z"]],!1)}r.push(a)}return r}(l,s,f):function(t,e,n,r){return t.map(function(t){return tL(e?$N(t):JN(t),n,r)})}(l,i,s,f)}return{lines:l.map(function(e,n){return be({stroke:t.getColor(n),d:i?$N(e):JN(e)},a)}),areas:A.map(function(e,n){return be({d:e,fill:t.getColor(n)},o)})}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"columnsStyle",{get:function(){var t=this,e=sT(this.attributes,"column"),n=this.attributes,r=n.isStack,i=n.type,o=n.scale;if("column"!==i)throw new Error("columnsStyle can only be used in column type");var a=this.containerShape.height,s=this.rawData;if(!s)return{columns:[]};r&&(s=iL(s));var u=this.createScales(s),c=u.x,l=u.y,A=Be(rL(s),2),f=A[0],d=A[1],h=new LN({domain:[0,d-(f>0?0:f)],range:[0,a*o]}),p=c.getBandWidth(),v=this.rawData;return{columns:s.map(function(n,i){return n.map(function(n,o){var a=p/s.length;return be(be({fill:t.getColor(i)},e),r?{x:c.map(o),y:l.map(n),width:p,height:h.map(v[i][o])}:{x:c.map(o)+a*i,y:n>=0?l.map(n):l.map(0),width:a,height:h.map(Math.abs(n))})})})}},enumerable:!1,configurable:!0}),e.prototype.render=function(t,e){var n,r;(n=e,r=".container",n.querySelector(r)?fT(n).select(r):fT(n).append("rect")).attr("className","container").node();var i=t.type,o=t.x,a=t.y,s="spark".concat(i),u=be({x:o,y:a},"line"===i?this.linesStyle:this.columnsStyle);fT(e).selectAll(".spark").data([i]).join(function(t){return t.append(function(t){return"line"===t?new ZN({className:s,style:u}):new qN({className:s,style:u})}).attr("className","spark ".concat(s))},function(t){return t.update(u)},function(t){return t.remove()})},e.prototype.getColor=function(t){var e=this.attributes.color;return tn(e)?e[t%e.length]:mn(e)?e.call(null,t):e},e.prototype.createScales=function(t){var e,n,r=this.attributes,i=r.type,o=r.scale,a=r.range,s=void 0===a?[]:a,u=r.spacing,c=this.containerShape,l=c.width,A=c.height,f=Be(rL(t),2),d=f[0],h=f[1],p=new LN({domain:[null!==(e=s[0])&&void 0!==e?e:d,null!==(n=s[1])&&void 0!==n?n:h],range:[A,A*(1-o)]});return"line"===i?{type:i,x:new LN({domain:[0,t[0].length-1],range:[0,l]}),y:p}:{type:i,x:new XN({domain:t[0].map(function(t,e){return e}),range:[0,l],paddingInner:u,paddingOuter:u/2,align:.5}),y:p}},e.tag="sparkline",e}(rT),aL={fill:"#fff",lineWidth:1,radius:2,size:10,stroke:"#bfbfbf",strokeOpacity:1,zIndex:0},sL={fill:"#000",fillOpacity:.45,fontSize:12,textAlign:"center",textBaseline:"middle",zIndex:1},uL={x:0,y:0,orientation:"horizontal",showLabel:!0,type:"start"},cL=hT({foreground:"foreground",handle:"handle",selection:"selection",sparkline:"sparkline",sparklineGroup:"sparkline-group",track:"track",brushArea:"brush-area"},"slider"),lL=hT({labelGroup:"label-group",label:"label",iconGroup:"icon-group",icon:"icon",iconRect:"icon-rect",iconLine:"icon-line"},"handle"),AL=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return me(e,t),e.prototype.render=function(t,e){var n=t.x,r=t.y,i=t.size,o=void 0===i?10:i,a=t.radius,s=void 0===a?o/4:a,u=t.orientation,c=t.classNamePrefix,l=we(t,["x","y","size","radius","orientation","classNamePrefix"]),A=o,f=2.4*A,d=c?"".concat(lL.iconRect.name," ").concat(c,"handle-icon-rect"):lL.iconRect.name,h=function(t){return c?"".concat(lL.iconLine,"-").concat(t," ").concat(c,"handle-icon-line"):"".concat(lL.iconLine,"-").concat(t)},p=fT(e).maybeAppendByClassName(lL.iconRect,"rect").attr("className",d).styles(be(be({},l),{width:A,height:f,radius:s,x:n-A/2,y:r-f/2,transformOrigin:"center"})),v=n+1/3*A-A/2,g=n+2/3*A-A/2,y=r+1/4*f-f/2,m=r+3/4*f-f/2;p.maybeAppendByClassName("".concat(lL.iconLine,"-1"),"line").attr("className",h(1)).styles(be({x1:v,x2:v,y1:y,y2:m},l)),p.maybeAppendByClassName("".concat(lL.iconLine,"-2"),"line").attr("className",h(2)).styles(be({x1:g,x2:g,y1:y,y2:m},l)),"vertical"===u&&(p.node().style.transform="rotate(90)")},e}(rT),fL=function(t){function e(e){return t.call(this,e,uL)||this}return me(e,t),e.prototype.renderLabel=function(t){var e=this,n=this.attributes,r=n.x,i=n.y,o=n.showLabel,a=sT(this.attributes,"label"),s=a.x,u=void 0===s?0:s,c=a.y,l=void 0===c?0:c,A=a.transform,f=a.transformOrigin,d=Be(cT(we(a,["x","y","transform","transformOrigin"]),[]),2),h=d[0],p=d[1],v=fT(t).maybeAppendByClassName(lL.labelGroup,"g").styles(p),g=be(be({},sL),h),y=g.text,m=we(g,["text"]);gT(!!o,v,function(t){e.label=t.maybeAppendByClassName(lL.label,"text").styles(be(be({},m),{x:r+u,y:i+l,transform:A,transformOrigin:f,text:"".concat(y)})),e.label.on("mousedown",function(t){t.stopPropagation()}),e.label.on("touchstart",function(t){t.stopPropagation()})})},e.prototype.renderIcon=function(t){var e=this.attributes,n=e.x,r=e.y,i=e.orientation,o=e.type,a=e.classNamePrefix,s=be(be({x:n,y:r,orientation:i,classNamePrefix:a},aL),sT(this.attributes,"icon")),u=this.attributes.iconShape,c=void 0===u?function(){return new AL({style:s})}:u;fT(t).maybeAppendByClassName(lL.iconGroup,"g").selectAll(lL.icon.class).data([c]).join(function(t){return t.append("string"==typeof c?c:function(){return c(o)}).attr("className",lL.icon.name)},function(t){return t.update(s)},function(t){return t.remove()})},e.prototype.render=function(t,e){this.renderIcon(e),this.renderLabel(e)},e}(rT),dL=function(t){function e(e){var n=t.call(this,e,be(be(be({x:0,y:0,animate:{duration:100,fill:"both"},brushable:!0,formatter:function(t){return t.toString()},handleSpacing:2,orientation:"horizontal",padding:0,autoFitLabel:!0,scrollable:!0,selectionFill:"#5B8FF9",selectionFillOpacity:.45,selectionZIndex:2,showHandle:!0,showLabel:!0,slidable:!0,trackFill:"#416180",trackLength:200,trackOpacity:.05,trackSize:20,trackZIndex:-1,values:[0,1],type:"range",selectionType:"select",handleIconOffset:0},uT(uL,"handle")),uT(aL,"handleIcon")),uT(sL,"handleLabel")))||this;return n.range=[0,1],n.onDragStart=function(t){return function(e){e.stopPropagation(),n.target=t,n.prevPos=n.getOrientVal(lN(e));var r=n.availableSpace,i=r.x,o=r.y,a=n.getBBox(),s=a.x,u=a.y;n.selectionStartPos=n.getRatio(n.prevPos-n.getOrientVal([i,o])-n.getOrientVal([+s,+u])),n.selectionWidth=0,document.addEventListener("pointermove",n.onDragging),document.addEventListener("pointerup",n.onDragEnd)}},n.onDragging=function(t){var e=n.attributes,r=e.slidable,i=e.brushable,o=e.type;t.stopPropagation();var a=n.getOrientVal(lN(t)),s=a-n.prevPos;if(s){var u=n.getRatio(s);switch(n.target){case"start":r&&n.setValuesOffset(u);break;case"end":r&&n.setValuesOffset(0,u);break;case"selection":r&&n.setValuesOffset(u,u);break;case"track":if(!i)return;n.selectionWidth+=u,"range"===o?n.innerSetValues([n.selectionStartPos,n.selectionStartPos+n.selectionWidth].sort(),!0):n.innerSetValues([0,n.selectionStartPos+n.selectionWidth],!0)}n.prevPos=a}},n.onDragEnd=function(){document.removeEventListener("pointermove",n.onDragging),document.removeEventListener("pointermove",n.onDragging),document.removeEventListener("pointerup",n.onDragEnd),n.target="",n.updateHandlesPosition(!1)},n.onValueChange=function(t){var e=n.attributes,r=e.onChange,i=e.type,o="range"===i?t:t[1],a="range"===i?n.getValues():n.getValues()[1],s=new Is("valuechange",{detail:{oldValue:o,value:a}});n.dispatchEvent(s),null==r||r(a)},n.selectionStartPos=0,n.selectionWidth=0,n.prevPos=0,n.target="",n}return me(e,t),Object.defineProperty(e.prototype,"values",{get:function(){return this.attributes.values},set:function(t){this.attributes.values=this.clampValues(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sparklineStyle",{get:function(){if("horizontal"!==this.attributes.orientation)return null;var t=sT(this.attributes,"sparkline");return be(be({zIndex:0},this.availableSpace),t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shape",{get:function(){var t=this.attributes,e=t.trackLength,n=t.trackSize,r=Be(this.getOrientVal([[e,n],[n,e]]),2);return{width:r[0],height:r[1]}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"availableSpace",{get:function(){var t=this.attributes,e=(t.x,t.y,Be(vT(t.padding),4)),n=e[0],r=e[1],i=e[2],o=e[3],a=this.shape;return{x:o,y:n,width:a.width-(o+r),height:a.height-(n+i)}},enumerable:!1,configurable:!0}),e.prototype.getValues=function(){return this.values},e.prototype.setValues=function(t,e){void 0===t&&(t=[0,0]),void 0===e&&(e=!1),this.attributes.values=t;var n=!1!==e&&this.attributes.animate;this.updateSelectionArea(n),this.updateHandlesPosition(n)},e.prototype.updateSelectionArea=function(t){var e=this.calcSelectionArea();this.foregroundGroup.selectAll(cL.selection.class).each(function(n,r){TT(this,e[r],t)})},e.prototype.updateHandlesPosition=function(t){this.attributes.showHandle&&(this.startHandle&&TT(this.startHandle,this.getHandleStyle("start"),t),this.endHandle&&TT(this.endHandle,this.getHandleStyle("end"),t))},e.prototype.innerSetValues=function(t,e){void 0===t&&(t=[0,0]),void 0===e&&(e=!1);var n=this.values,r=this.clampValues(t);this.attributes.values=r,this.setValues(r),e&&this.onValueChange(n)},e.prototype.renderTrack=function(t){var e=this.attributes,n=e.x,r=e.y,i=sT(this.attributes,"track");this.trackShape=fT(t).maybeAppendByClassName(cL.track,"rect").styles(be(be({x:n,y:r},this.shape),i))},e.prototype.renderBrushArea=function(t){var e=this.attributes,n=e.x,r=e.y,i=e.brushable;this.brushArea=fT(t).maybeAppendByClassName(cL.brushArea,"rect").styles(be({x:n,y:r,fill:"transparent",cursor:i?"crosshair":"default"},this.shape))},e.prototype.renderSparkline=function(t){var e=this,n=this.attributes,r=n.x,i=n.y;gT("horizontal"===n.orientation,fT(t).maybeAppendByClassName(cL.sparklineGroup,"g"),function(t){var n=be(be({},e.sparklineStyle),{x:r,y:i});t.maybeAppendByClassName(cL.sparkline,function(){return new oL({style:n})}).update(n)})},e.prototype.renderHandles=function(){var t,e=this,n=this.attributes,r=n.showHandle,i=n.type,o=r?"range"===i?["start","end"]:["end"]:[],a=this;null===(t=this.foregroundGroup)||void 0===t||t.selectAll(cL.handle.class).data(o.map(function(t){return{type:t}}),function(t){return t.type}).join(function(t){return t.append(function(t){var n=t.type;return new fL({style:e.getHandleStyle(n)})}).each(function(t){var e=t.type;this.attr("class","".concat(cL.handle.name," ").concat(e,"-handle"));var n="".concat(e,"Handle");a[n]=this,this.addEventListener("pointerdown",a.onDragStart(e))})},function(t){return t.each(function(t){var e=t.type;this.update(a.getHandleStyle(e))})},function(t){return t.each(function(t){var e=t.type,n="".concat(e,"Handle");a[n]=void 0}).remove()})},e.prototype.renderSelection=function(t){var e=this.attributes,n=e.x,r=e.y,i=e.type,o=e.selectionType;this.foregroundGroup=fT(t).maybeAppendByClassName(cL.foreground,"g");var a=sT(this.attributes,"selection"),s=function(t){return t.style("visibility",function(t){return t.show?"visible":"hidden"}).style("cursor",function(t){return"select"===o?"grab":"invert"===o?"crosshair":"default"}).styles(be(be({},a),{transform:"translate(".concat(n,", ").concat(r,")")}))},u=this;this.foregroundGroup.selectAll(cL.selection.class).data("value"===i?[]:this.calcSelectionArea().map(function(t,e){return{style:be({},t),index:e,show:"select"===o?1===e:1!==e}}),function(t){return t.index}).join(function(t){return t.append("rect").attr("className",cL.selection.name).call(s).each(function(t,e){var n=this;1===e?(u.selectionShape=fT(this),this.on("pointerdown",function(t){n.attr("cursor","grabbing"),u.onDragStart("selection")(t)}),u.dispatchCustomEvent(this,"pointerenter","selectionMouseenter"),u.dispatchCustomEvent(this,"pointerleave","selectionMouseleave"),u.dispatchCustomEvent(this,"click","selectionClick"),this.addEventListener("pointerdown",function(){n.attr("cursor","grabbing")}),this.addEventListener("pointerup",function(){n.attr("cursor","pointer")}),this.addEventListener("pointerover",function(){n.attr("cursor","pointer")})):this.on("pointerdown",u.onDragStart("track"))})},function(t){return t.call(s)},function(t){return t.remove()}),this.updateSelectionArea(!1),this.renderHandles()},e.prototype.render=function(t,e){this.renderTrack(e),this.renderSparkline(e),this.renderBrushArea(e),this.renderSelection(e)},e.prototype.clampValues=function(t,e){var n;void 0===e&&(e=4);var r=Be(this.range,2),i=r[0],o=r[1],a=Be(this.getValues().map(function(t){return AN(t,e)}),2),s=a[0],u=a[1],c=Be(((Array.isArray(t)?t:[s,null!=t?t:u])||[s,u]).map(function(t){return AN(t,e)}),2),l=c[0],A=c[1];if("value"===this.attributes.type)return[0,ge(A,i,o)];l>A&&(l=(n=Be([A,l],2))[0],A=n[1]);var f=A-l;return f>o-i?[i,o]:l<i?s===i&&u===A?[i,A]:[i,f+i]:A>o?u===o&&s===l?[l,o]:[o-f,o]:[l,A]},e.prototype.calcSelectionArea=function(t){var e=Be(this.clampValues(t),2),n=e[0],r=e[1],i=this.availableSpace,o=i.x,a=i.y,s=i.width,u=i.height;return this.getOrientVal([[{y:a,height:u,x:o,width:n*s},{y:a,height:u,x:n*s+o,width:(r-n)*s},{y:a,height:u,x:r*s,width:(1-r)*s}],[{x:o,width:s,y:a,height:n*u},{x:o,width:s,y:n*u+a,height:(r-n)*u},{x:o,width:s,y:r*u,height:(1-r)*u}]])},e.prototype.calcHandlePosition=function(t){var e=this.attributes.handleIconOffset,n=this.availableSpace,r=n.x,i=n.y,o=n.width,a=n.height,s=Be(this.clampValues(),2),u=s[0],c=s[1],l="start"===t?-e:e,A=("start"===t?u:c)*this.getOrientVal([o,a])+l;return{x:r+this.getOrientVal([A,o/2]),y:i+this.getOrientVal([a/2,A])}},e.prototype.inferTextStyle=function(t){return"horizontal"===this.attributes.orientation?{}:"start"===t?{transformOrigin:"left center",transform:"rotate(90)",textAlign:"start"}:"end"===t?{transformOrigin:"right center",transform:"rotate(90)",textAlign:"end"}:{}},e.prototype.calcHandleText=function(t){var e,n=this.attributes,r=n.type,i=n.orientation,o=n.formatter,a=n.autoFitLabel,s=sT(this.attributes,"handle"),u=sT(s,"label"),c=s.spacing,l=this.getHandleSize(),A=this.clampValues(),f=o("start"===t?A[0]:A[1]),d=new lT({style:be(be(be({},u),this.inferTextStyle(t)),{text:f})}),h=d.getBBox(),p=h.width,v=h.height;if(d.destroy(),!a){if("value"===r)return{text:f,x:0,y:-v-c};var g=c+l+("horizontal"===i?p/2:0);return(e={text:f})["horizontal"===i?"x":"y"]="start"===t?-g:g,e}var y=0,m=0,b=this.availableSpace,w=b.width,x=b.height,E=this.calcSelectionArea()[1],B=E.x,k=E.y,O=E.width,C=E.height,M=c+l;if("horizontal"===i){var S=M+p/2;y="start"===t?B-M-p>0?-S:S:w-B-O-M>p?S:-S}else{var F=v+M;m="start"===t?k-l>v?-F:M:x-(k+C)-l>v?F:-M}return{x:y,y:m,text:f}},e.prototype.getHandleLabelStyle=function(t){var e=sT(this.attributes,"handleLabel");return be(be(be({},e),this.calcHandleText(t)),this.inferTextStyle(t))},e.prototype.getHandleIconStyle=function(){var t=this.attributes.handleIconShape,e=sT(this.attributes,"handleIcon"),n=this.getOrientVal(["ew-resize","ns-resize"]),r=this.getHandleSize();return be({cursor:n,shape:t,size:r},e)},e.prototype.getHandleStyle=function(t){var e=this.attributes,n=e.x,r=e.y,i=e.showLabel,o=e.showLabelOnInteraction,a=e.orientation,s=this.calcHandlePosition(t),u=s.x,c=s.y,l=this.calcHandleText(t),A=i;return!i&&o&&(A=!!this.target),be(be(be({},uT(this.getHandleIconStyle(),"icon")),uT(be(be({},this.getHandleLabelStyle(t)),l),"label")),{transform:"translate(".concat(u+n,", ").concat(c+r,")"),orientation:a,showLabel:A,type:t,zIndex:3})},e.prototype.getHandleSize=function(){var t=this.attributes,e=t.handleIconSize,n=t.width,r=t.height;return e||Math.floor((this.getOrientVal([+r,+n])+4)/2.4)},e.prototype.getOrientVal=function(t){var e=Be(t,2),n=e[0],r=e[1];return"horizontal"===this.attributes.orientation?n:r},e.prototype.setValuesOffset=function(t,e){void 0===e&&(e=0);var n=this.attributes.type,r=Be(this.getValues(),2),i=[r[0]+("range"===n?t:0),r[1]+e].sort();this.innerSetValues(i,!0)},e.prototype.getRatio=function(t){var e=this.availableSpace,n=e.width,r=e.height;return t/this.getOrientVal([n,r])},e.prototype.dispatchCustomEvent=function(t,e,n){var r=this;t.on(e,function(t){t.stopPropagation(),r.dispatchEvent(new Is(n,{detail:t}))})},e.prototype.bindEvents=function(){this.addEventListener("wheel",this.onScroll);var t=this.brushArea;this.dispatchCustomEvent(t,"click","trackClick"),this.dispatchCustomEvent(t,"pointerenter","trackMouseenter"),this.dispatchCustomEvent(t,"pointerleave","trackMouseleave"),t.on("pointerdown",this.onDragStart("track"))},e.prototype.onScroll=function(t){if(this.attributes.scrollable){var e=t.deltaX,n=t.deltaY||e,r=this.getRatio(n);this.setValuesOffset(r,r)}},e.tag="slider",e}(rT),hL={backgroundFill:"#262626",backgroundLineCap:"round",backgroundLineWidth:1,backgroundStroke:"#333",backgroundZIndex:-1,formatter:function(t){return t.toString()},labelFill:"#fff",labelFontSize:12,labelTextBaseline:"middle",padding:[2,4],position:"right",radius:0,zIndex:999},pL=hT({background:"background",labelGroup:"label-group",label:"label"},"indicator"),vL=function(t){function e(e){var n=t.call(this,e,hL)||this;return n.point=[0,0],n.group=n.appendChild(new _u({})),n.isMutationObserved=!0,n}return me(e,t),e.prototype.renderBackground=function(){if(this.label){var t=this.attributes,e=t.position,n=Be(vT(t.padding),4),r=n[0],i=n[1],o=n[2],a=n[3],s=this.label.node().getLocalBounds(),u=s.min,c=s.max,l=new dT(u[0]-a,u[1]-r,c[0]+i-u[0]+a,c[1]+o-u[1]+r),A=this.getPath(e,l),f=sT(this.attributes,"background");this.background=fT(this.group).maybeAppendByClassName(pL.background,"path").styles(be(be({},f),{d:A})),this.group.appendChild(this.label.node())}},e.prototype.renderLabel=function(){var t=this.attributes,e=t.formatter,n=t.labelText,r=Be(cT(sT(this.attributes,"label")),2),i=r[0],o=r[1],a=(i.text,we(i,["text"]));this.label=fT(this.group).maybeAppendByClassName(pL.labelGroup,"g").styles(o),n&&this.label.maybeAppendByClassName(pL.label,function(){return VT(e(n))}).style("text",e(n).toString()).selectAll("text").styles(a)},e.prototype.adjustLayout=function(){var t=Be(this.point,2),e=t[0],n=t[1],r=this.attributes,i=r.x,o=r.y;this.group.attr("transform","translate(".concat(i-e,", ").concat(o-n,")"))},e.prototype.getPath=function(t,e){var n=this.attributes.radius,r=e.x,i=e.y,o=e.width,a=e.height,s=[["M",r+n,i],["L",r+o-n,i],["A",n,n,0,0,1,r+o,i+n],["L",r+o,i+a-n],["A",n,n,0,0,1,r+o-n,i+a],["L",r+n,i+a],["A",n,n,0,0,1,r,i+a-n],["L",r,i+n],["A",n,n,0,0,1,r+n,i],["Z"]],u={top:4,right:6,bottom:0,left:2}[t],c=this.createCorner([s[u].slice(-2),s[u+1].slice(-2)]);return s.splice.apply(s,ke([u+1,1],Be(c),!1)),s[0][0]="M",s},e.prototype.createCorner=function(t,e){void 0===e&&(e=10);var n=GT.apply(void 0,ke([],Be(t),!1)),r=Be(t,2),i=Be(r[0],2),o=i[0],a=i[1],s=Be(r[1],2),u=s[0],c=s[1],l=Be(n?[u-o,[o,u]]:[c-a,[a,c]],2),A=l[0],f=Be(l[1],2),d=f[0],h=f[1],p=A/2,v=e*(A/Math.abs(A)),g=v/2,y=v*Math.sqrt(3)/2*.8,m=Be([d,d+p-g,d+p,d+p+g,h],5),b=m[0],w=m[1],x=m[2],E=m[3],B=m[4];return n?(this.point=[x,a-y],[["L",b,a],["L",w,a],["L",x,a-y],["L",E,a],["L",B,a]]):(this.point=[o+y,x],[["L",o,b],["L",o,w],["L",o+y,x],["L",o,E],["L",o,B]])},e.prototype.applyVisibility=function(){"hidden"===this.attributes.visibility?qF(this):XF(this)},e.prototype.bindEvents=function(){this.label.on(Hs.BOUNDS_CHANGED,this.renderBackground)},e.prototype.render=function(){this.renderLabel(),this.renderBackground(),this.adjustLayout(),this.applyVisibility()},e}(rT),gL=function(t){function e(n){var r=t.call(this,$F({},e.defaultOptions,n))||this;return r.hoverColor="#f5f5f5",r.selectedColor="#e6f7ff",r.background=r.appendChild(new Yu({})),r.label=r.background.appendChild(new _u({})),r}return me(e,t),Object.defineProperty(e.prototype,"padding",{get:function(){return vT(this.style.padding)},enumerable:!1,configurable:!0}),e.prototype.renderLabel=function(){var t=this.style,e=t.label,n=t.value,r=sT(this.attributes,"label");fT(this.label).maybeAppend(".label",function(){return VT(e)}).attr("className","label").styles(r),this.label.attr("__data__",n)},e.prototype.renderBackground=function(){var t=this.label.getBBox(),e=Be(this.padding,4),n=e[0],r=e[1],i=e[2],o=e[3],a=t.width,s=t.height,u=a+o+r,c=s+n+i,l=sT(this.attributes,"background"),A=this.style,f=A.width,d=void 0===f?0:f,h=A.height,p=void 0===h?0:h,v=A.selected;this.background.attr(be(be({},l),{width:Math.max(u,d),height:Math.max(c,p),fill:v?this.selectedColor:"#fff"})),this.label.attr({transform:"translate(".concat(o,", ").concat((c-s)/2,")")})},e.prototype.render=function(){this.renderLabel(),this.renderBackground()},e.prototype.bindEvents=function(){var t=this;this.addEventListener("pointerenter",function(){t.style.selected||t.background.attr("fill",t.hoverColor)}),this.addEventListener("pointerleave",function(){t.style.selected||t.background.attr("fill",t.style.backgroundFill)});var e=this;this.addEventListener("click",function(){var n=t.style,r=n.label,i=n.value,o=n.onClick;null==o||o(i,{label:r,value:i},e)})},e.defaultOptions={style:{value:"",label:"",cursor:"pointer"}},e}(rT),yL=function(t){function e(n){var r,i,o=t.call(this,$F({},e.defaultOptions,n))||this;o.currentValue=null===(r=e.defaultOptions.style)||void 0===r?void 0:r.defaultValue,o.isPointerInSelect=!1,o.select=o.appendChild(new Yu({className:"select",style:{cursor:"pointer",width:0,height:0}})),o.dropdown=o.appendChild(new Yu({className:"dropdown"}));var a=o.style.defaultValue;return a&&(null===(i=o.style.options)||void 0===i?void 0:i.some(function(t){return t.value===a}))&&(o.currentValue=a),o}return me(e,t),e.prototype.setValue=function(t){this.currentValue=t,this.render()},e.prototype.getValue=function(){return this.currentValue},Object.defineProperty(e.prototype,"dropdownPadding",{get:function(){return vT(this.style.dropdownPadding)},enumerable:!1,configurable:!0}),e.prototype.renderSelect=function(){var t,e=this,n=this.style,r=n.x,i=n.y,o=n.width,a=n.height,s=n.bordered,u=n.showDropdownIcon,c=sT(this.attributes,"select"),l=sT(this.attributes,"placeholder");this.select.attr(be(be({x:r,y:i,width:o,height:a},c),{fill:"#fff",strokeWidth:s?1:0}));var A=this.dropdownPadding;u&&fT(this.select).maybeAppend(".dropdown-icon","path").style("d","M-5,-3.5 L0,3.5 L5,-3.5").style("transform","translate(".concat(r+o-10-A[1]-A[3],", ").concat(i+a/2,")")).style("lineWidth",1).style("stroke",this.select.style.stroke);var f=null===(t=this.style.options)||void 0===t?void 0:t.find(function(t){return t.value===e.currentValue}),d=be({x:r+A[3]},l);fT(this.select).selectAll(".placeholder").data(f?[]:[1]).join(function(t){return t.append("text").attr("className","placeholder").styles(d).style("y",function(){var t=this.getBBox();return i+(a-t.height)/2})},function(t){return t.styles(d)},function(t){return t.remove()});var h=sT(this.attributes,"optionLabel"),p=be({x:r+A[3]},h);fT(this.select).selectAll(".value").data(f?[f]:[]).join(function(t){return t.append(function(t){return VT(t.label)}).attr("className","value").styles(p).style("y",function(){var t=this.getBBox();return i+(a-t.height)/2})},function(t){return t.styles(p)},function(t){return t.remove()})},e.prototype.renderDropdown=function(){var t,e,n=this,r=this.style,i=r.x,o=r.y,a=r.width,s=r.height,u=r.options,c=r.onSelect,l=r.open,A=sT(this.attributes,"dropdown"),f=sT(this.attributes,"option"),d=this.dropdownPadding;fT(this.dropdown).maybeAppend(".dropdown-container","g").attr("className","dropdown-container").selectAll(".dropdown-item").data(u,function(t){return t.value}).join(function(t){return t.append(function(t){return new gL({className:"dropdown-item",style:be(be(be({},t),f),{width:a-d[1]-d[3],selected:t.value===n.currentValue,onClick:function(t,e,r){n.setValue(t),null==c||c(t,e,r),n.dispatchEvent(new Is("change",{detail:{value:t,option:e,item:r}})),qF(n.dropdown)}})})}).each(function(t,e){var n,r=(null===(n=this.parentNode)||void 0===n?void 0:n.children).reduce(function(t,n,r){return r<e&&(t+=n.getBBox().height),t},0);this.attr("transform","translate(".concat(d[3],", ").concat(d[0]+r,")"))})},function(t){return t.update(function(t){return{selected:t.value===n.currentValue}})},function(t){return t.remove()});var h=null===(e=null===(t=this.dropdown.getElementsByClassName("dropdown-container"))||void 0===t?void 0:t[0])||void 0===e?void 0:e.getBBox(),p=A.spacing;this.dropdown.attr(be({transform:"translate(".concat(i,", ").concat(o+s+p,")"),width:h.width+d[1]+d[3],height:h.height+d[0]+d[2]},A)),!l&&qF(this.dropdown)},e.prototype.render=function(){this.renderSelect(),this.renderDropdown()},e.prototype.bindEvents=function(){var t=this;this.addEventListener("click",function(t){t.stopPropagation()}),this.select.addEventListener("click",function(){"visible"===t.dropdown.style.visibility?qF(t.dropdown):XF(t.dropdown)}),this.addEventListener("pointerenter",function(){t.isPointerInSelect=!0}),this.addEventListener("pointerleave",function(){t.isPointerInSelect=!1}),null===document||void 0===document||document.addEventListener("click",function(){t.isPointerInSelect||qF(t.dropdown)})},e.defaultOptions={style:{x:0,y:0,width:140,height:32,options:[],bordered:!0,defaultValue:"",selectRadius:8,selectStroke:"#d9d9d9",showDropdownIcon:!0,placeholderText:"",placeholderFontSize:12,placeholderTextBaseline:"top",placeholderFill:"#c2c2c2",dropdownFill:"#fff",dropdownStroke:"#d9d9d9",dropdownRadius:8,dropdownShadowBlur:4,dropdownShadowColor:"rgba(0, 0, 0, 0.08)",dropdownPadding:8,dropdownSpacing:10,optionPadding:[8,12],optionFontSize:12,optionTextBaseline:"top",optionBackgroundFill:"#fff",optionBackgroundRadius:4,optionLabelFontSize:12,optionLabelTextBaseline:"top"}},e}(rT),mL=function(t){function e(n){var r=t.call(this,$F({},{style:{backgroundOpacity:e.backgroundOpacities.default}},e.defaultOptions,n))||this;return r.showBackground=!0,r.background=r.appendChild(new Yu({})),r.icon=r.appendChild(new _u({})),r}return me(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return"BaseIcon"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineWidth",{get:function(){return Math.log10(this.attributes.size)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"padding",{get:function(){return vT(this.attributes.size/5)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iconSize",{get:function(){var t=this.attributes.size,e=Be(this.padding,4),n=e[0],r=e[1],i=e[2],o=e[3];return Math.max(t-Math.max(o+r,n+i),2*this.lineWidth+1)},enumerable:!1,configurable:!0}),e.prototype.renderBackground=function(){var t=this.attributes,e=t.x,n=t.y,r=t.size,i=r/2,o=sT(this.attributes,"background");this.background.attr(be({x:e-i,y:n-i,width:r,height:r},o))},e.prototype.showIndicator=function(){if(this.label){var t=this.attributes.size,e=this.background.getBBox(),n=e.x,r=e.y;this.indicator.update({x:n+t/2,y:r-5,labelText:this.label,visibility:"visible"})}},e.prototype.hideIndicator=function(){this.indicator.update({visibility:"hidden"})},e.prototype.connectedCallback=function(){var e;t.prototype.connectedCallback.call(this);var n=this.attributes.size,r=this.background.getBBox(),i=r.x,o=r.y,a=null===(e=this.ownerDocument)||void 0===e?void 0:e.defaultView;a&&(this.indicator=a.appendChild(new vL({style:{x:i+n/2,y:o-n/2,visibility:"hidden",position:"top",radius:3,zIndex:100}})))},e.prototype.disconnectedCallback=function(){this.indicator.destroy()},e.prototype.render=function(){this.renderIcon(),this.showBackground&&this.renderBackground()},e.prototype.bindEvents=function(){var t=this,n=this.attributes.onClick;if(this.addEventListener("click",function(){null==n||n(t)}),this.showBackground){var r=function(){return t.background.attr({opacity:e.backgroundOpacities.default})};this.addEventListener("pointerenter",function(){t.background.attr({opacity:e.backgroundOpacities.hover}),t.showIndicator()}),this.addEventListener("pointerleave",function(){r(),t.hideIndicator()}),this.addEventListener("pointerdown",function(){t.background.attr({opacity:e.backgroundOpacities.active})}),this.addEventListener("pointerup",function(){r()})}},e.tag="IconBase",e.defaultOptions={style:{x:0,y:0,size:10,color:"#565758",backgroundRadius:4,backgroundFill:"#e2e2e2"}},e.backgroundOpacities={default:0,hover:.8,active:1},e}(rT),bL=function(t,e){return void 0===e&&(e="#565758"),new zu({style:{fill:e,d:"M ".concat(t,",").concat(t," L -").concat(t,",0 L ").concat(t,",-").concat(t," Z"),transformOrigin:"center"}})},wL=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return me(e,t),e.prototype.arcPath=function(t,e,n){var r=Be([n,n],2),i=r[0],o=r[1],a=function(r){return[t+n*Math.cos(r),e+n*Math.sin(r)]},s=Be(a(-5/4*Math.PI),2),u=s[0],c=s[1],l=Be(a(1/4*Math.PI),2),A=l[0],f=l[1];return"M".concat(u,",").concat(c,",A").concat(i,",").concat(o,",0,1,1,").concat(A,",").concat(f)},Object.defineProperty(e.prototype,"label",{get:function(){return""},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,r=t.color,i=this.iconSize,o=this.lineWidth,a=o+.5;fT(this.icon).maybeAppend(".reset","path").styles({stroke:r,lineWidth:o,d:this.arcPath(e,n,i/2-o),markerStart:bL(a,r)})},e}(mL),xL=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return me(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return""},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,r=t.color,i=this.iconSize,o=i/2,a=i/2/Math.pow(3,.5),s=[[e,n],[e,n-a],[e-o,n],[e,n+a],[e,n],[e+o,n-a],[e+o,n+a],[e,n]];fT(this.icon).maybeAppend(".backward","polygon").styles({points:s,fill:r})},e}(mL),EL=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return me(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return""},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,r=t.color,i=this.iconSize,o=i/2,a=i/2/Math.pow(3,.5),s=[[e,n],[e,n-a],[e+o,n],[e,n+a],[e,n],[e-o,n-a],[e-o,n+a],[e,n]];fT(this.icon).maybeAppend(".forward","polygon").styles({points:s,fill:r})},e}(mL),BL=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return me(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return""},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,r=t.color,i=this.iconSize,o=i/3*Math.pow(3,.5)*.8,a=[[e+o,n],[e-o/2,n-i/2*.8],[e-o/2,n+i/2*.8],[e+o,n]];fT(this.icon).maybeAppend(".play","polygon").styles({points:a,fill:r})},e}(mL),kL=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return me(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return""},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,r=t.color,i=this.iconSize,o=i/3,a=[[e-o,n-i/2],[e-o,n+i/2],[e-o/2,n+i/2],[e-o/2,n-i/2],[e-o,n-i/2],[e+o/2,n-i/2],[e+o/2,n+i/2],[e+o,n+i/2],[e+o,n-i/2]];fT(this.icon).maybeAppend(".pause","polygon").styles({points:a,fill:r})},e}(mL),OL=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return me(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return""},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,r=t.color,i=this.iconSize,o=this.lineWidth,a=o;fT(this.icon).maybeAppend(".left-line","line").styles({x1:e-i/2,y1:n-i/2,x2:e-i/2,y2:n+i/2,stroke:r,lineWidth:o}),fT(this.icon).maybeAppend(".right-line","line").styles({x1:e+i/2,y1:n-i/2,x2:e+i/2,y2:n+i/2,stroke:r,lineWidth:o}),fT(this.icon).maybeAppend(".left-arrow","line").styles({x1:e,y1:n,x2:e-i/2+2*a,y2:n,stroke:r,lineWidth:o,markerEnd:bL(2*o,r)}),fT(this.icon).maybeAppend(".right-arrow","line").styles({x1:e,y1:n,x2:e+i/2-2*a,y2:n,stroke:r,lineWidth:o,markerEnd:bL(2*o,r)})},e}(mL),CL=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return me(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return""},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,r=t.color,i=this.iconSize,o=this.lineWidth;fT(this.icon).maybeAppend(".line","line").styles({x1:e,y1:n-i/2,x2:e,y2:n+i/2,stroke:r,lineWidth:o});var a=o;fT(this.icon).maybeAppend(".left-arrow","line").styles({x1:e-i/2-2*a,y1:n,x2:e-2*a,y2:n,stroke:r,lineWidth:o,markerEnd:bL(2*o,r)}),fT(this.icon).maybeAppend(".right-arrow","line").styles({x1:e+i/2+2*a,y1:n,x2:e+2*a,y2:n,stroke:r,lineWidth:o,markerEnd:bL(2*o,r)})},e}(mL),ML=function(t){return[[-t/2,-t/2],[-t/2,t/2],[t/2,t/2]]},SL=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return me(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return""},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,r=t.color,i=this.iconSize,o=this.lineWidth,a=(i-2*o-o)/4,s=(i-2*o-o)/2,u=Be([e-i/2+o,n+i/2-2*o],2),c=u[0],l=u[1];fT(this.icon).maybeAppend(".coordinate","polyline").styles({points:ML(i).map(function(t){var r=Be(t,2),i=r[0],o=r[1];return[i+e,o+n]}),stroke:r,lineWidth:o}),fT(this.icon).maybeAppend(".line","polyline").styles({points:[[c,l],[c+a,l-s],[c+2*a,l],[c+4*a,l-2*s]],stroke:r,lineWidth:o})},e}(mL),FL=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return me(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return[1,4,2,4,3]},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.data,e=this.attributes,n=e.x,r=e.y,i=e.color,o=this.iconSize,a=this.lineWidth,s=a,u=(o-s)/t.length,c=(o-2*s)/4,l=Be([n-o/2+2*s,r+o/2-s],2),A=l[0],f=l[1];fT(this.icon).maybeAppend(".coordinate","polyline").styles({points:ML(o).map(function(t){var e=Be(t,2),i=e[0],o=e[1];return[i+n,o+r]}),stroke:i,lineWidth:a}),fT(this.icon).maybeAppend(".bars","g").selectAll(".column").data(this.data.map(function(t,e){return{value:t,index:e}})).join(function(t){return t.append("line").attr("className","column").style("x1",function(t){var e=t.index;return A+u*e}).style("y1",f).style("x2",function(t){var e=t.index;return A+u*e}).style("y2",function(t){var e=t.value;return f-c*e}).styles({y1:f,stroke:i,lineWidth:a})})},e}(mL),TL=function(t){function e(e){var n=t.call(this,$F({},{style:{color:"#d8d9d9"}},e))||this;return n.showBackground=!1,n}return me(e,t),e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,r=t.color,i=this.iconSize,o=this.lineWidth;fT(this.icon).maybeAppend(".split","line").styles({x1:e,y1:n-i/2,x2:e,y2:n+i/2,stroke:r,lineWidth:o})},e}(mL),PL=function(t){function e(){var e=t.apply(this,ke([],Be(arguments),!1))||this;return e.showBackground=!1,e}return me(e,t),Object.defineProperty(e.prototype,"padding",{get:function(){return vT(0)},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var t=this.iconSize,e=this.attributes,n=e.x,r=e.y,i=e.speed,o=void 0===i?1:i,a=oS(this.attributes,["x","y","transform","transformOrigin","width","height","size","color","speed"]),s=ge(t,20,1/0),u=be(be({},a),{x:n-s/2,y:r-10,width:s,height:20,defaultValue:o,bordered:!1,showDropdownIcon:!1,selectRadius:2,dropdownPadding:this.padding,dropdownRadius:2,dropdownSpacing:t/5,placeholderFontSize:t/2,optionPadding:0,optionLabelFontSize:t/2,optionBackgroundRadius:1,options:[{label:"1x",value:1},{label:"1.5x",value:1.5},{label:"2x",value:2}]});fT(this.icon).maybeAppend(".speed",function(){return new yL({style:u})}).attr("className","speed").each(function(){this.update(u)})},e.tag="SpeedSelect",e}(mL),IL=function(t){function e(e){var n=t.call(this,e)||this;return n.icon=n.appendChild(new _u({})),n.currentType=n.attributes.type,n}return me(e,t),e.prototype.getType=function(){return this.currentType},e.prototype.render=function(){var t=this,e=this.attributes,n=(e.onChange,we(e,["onChange"]));fT(this.icon).selectAll(".icon").data([this.currentType]).join(function(e){return e.append(function(e){var n,r=null===(n=t.toggles.find(function(t){return Be(t,1)[0]===e}))||void 0===n?void 0:n[1];if(!r)throw new Error("Invalid type: ".concat(e));return new r({})}).attr("className","icon").styles(n,!1).update({})},function(t){return t.styles({restStyles:n}).update({})},function(t){return t.remove()})},e.prototype.bindEvents=function(){var t=this,e=this.attributes.onChange;this.addEventListener("click",function(n){n.preventDefault(),n.stopPropagation();var r=(t.toggles.findIndex(function(e){return Be(e,1)[0]===t.currentType})+1)%t.toggles.length,i=t.toggles[r][0];null==e||e(t.currentType),t.currentType=i,t.render()})},e.tag="ToggleIcon",e}(rT),NL=function(t){function e(e){var n=t.call(this,$F({},{style:{type:"play"}},e))||this;return n.toggles=[["play",BL],["pause",kL]],n}return me(e,t),e}(IL),LL=function(t){function e(e){var n=t.call(this,$F({},{style:{type:"range"}},e))||this;return n.toggles=[["range",OL],["value",CL]],n}return me(e,t),e}(IL),_L=function(t){function e(e){var n=t.call(this,$F({},{style:{type:"column"}},e))||this;return n.toggles=[["line",SL],["column",FL]],n}return me(e,t),e}(IL),QL={reset:wL,speed:PL,backward:xL,playPause:NL,forward:EL,selectionType:LL,chartType:_L,split:TL},UL=function(t){function e(n){var r=t.call(this,$F({},e.defaultOptions,n))||this;return r.background=r.appendChild(new Yu({})),r.functions=r.appendChild(new _u({})),r}return me(e,t),Object.defineProperty(e.prototype,"padding",{get:function(){return vT(this.attributes.padding)},enumerable:!1,configurable:!0}),e.prototype.renderBackground=function(){var t=this.style,e=t.x,n=t.y,r=t.width,i=t.height,o=sT(this.attributes,"background");this.background.attr(be({x:e,y:n,width:r,height:i},o))},e.prototype.renderFunctions=function(){var t,e=this,n=this.attributes,r=n.functions,i=n.iconSize,o=n.iconSpacing,a=n.x,s=n.y,u=n.width,c=n.height,l=n.align,A=Be(this.padding,4),f=A[1],d=A[3],h=r.reduce(function(t,e){return t.length&&e.length?t.concat.apply(t,ke(["split"],Be(e),!1)):t.concat.apply(t,ke([],Be(e),!1))},[]),p=h.length*(i+o)-o,v={left:d+i/2,center:(u-p)/2+i/2,right:u-p-d-f+i/2}[l]||0;null===(t=this.speedSelect)||void 0===t||t.destroy(),this.functions.removeChildren(),h.forEach(function(t,n){var r,u=QL[t],l={x:a+n*(i+o)+v,y:s+c/2,size:i};if(u===PL?(l.speed=e.attributes.speed,l.onSelect=function(n){return e.handleFunctionChange(t,{value:n})}):[NL,LL,_L].includes(u)?(l.onChange=function(n){return e.handleFunctionChange(t,{value:n})},u===NL&&(l.type="play"===e.attributes.state?"pause":"play"),u===LL&&(l.type="range"===e.attributes.selectionType?"value":"range"),u===_L&&(l.type="line"===e.attributes.chartType?"column":"line")):l.onClick=function(){return e.handleFunctionChange(t,{value:t})},u===PL){var A=null===(r=e.ownerDocument)||void 0===r?void 0:r.defaultView;A&&(e.speedSelect=new u({style:be(be({},l),{zIndex:100})}),A.appendChild(e.speedSelect))}else e.functions.appendChild(new u({style:l}))})},e.prototype.disconnectedCallback=function(){var e;t.prototype.disconnectedCallback.call(this),null===(e=this.speedSelect)||void 0===e||e.destroy()},e.prototype.render=function(){this.renderBackground(),this.renderFunctions()},e.prototype.handleFunctionChange=function(t,e){var n=this.attributes.onChange;null==n||n(t,e)},e.defaultOptions={style:{x:0,y:0,width:300,height:40,padding:0,align:"center",iconSize:25,iconSpacing:0,speed:1,state:"pause",chartType:"line",selectionType:"range",backgroundFill:"#fbfdff",backgroundStroke:"#ebedf0",functions:[["reset","speed"],["backward","playPause","forward"],["selectionType","chartType"]]}},e}(rT),jL=function(t){function e(n){var r=t.call(this,$F({},e.defaultOptions,n))||this;return r.bindEvents(),r}return me(e,t),e.prototype.bindEvents=function(){var t=this;this.addEventListener("mouseenter",function(){t.attr("lineWidth",Math.ceil(+(t.style.r||0)/2))}),this.addEventListener("mouseleave",function(){t.attr("lineWidth",0)})},e.defaultOptions={style:{r:5,fill:"#3f7cf7",lineWidth:0,stroke:"#3f7cf7",strokeOpacity:.5,cursor:"pointer"}},e}(Pu),DL=function(t){function e(n){return t.call(this,$F({},e.defaultOptions,n))||this}return me(e,t),e.prototype.renderBackground=function(){var t=this.attributes,e=t.x,n=t.y,r=t.width,i=t.height,o=sT(this.attributes,"background");fT(this).maybeAppend("background","rect").attr("className","background").styles(be({x:e-r/2,y:n-i/2,width:r,height:i},o))},e.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,r=t.iconSize,i=sT(this.attributes,"icon"),o=r/2;fT(this).maybeAppend("icon-left-line","line").attr("className","icon-left-line").styles(be({x1:e-1,y1:n-o,x2:e-1,y2:n+o},i)),fT(this).maybeAppend("icon-right-line","line").attr("className","icon-right-line").styles(be({x1:e+1,y1:n-o,x2:e+1,y2:n+o},i))},e.prototype.renderBorder=function(){var t=this.attributes,e=t.x,n=t.y,r=t.width,i=t.height,o=t.type,a=sT(this.attributes,"border"),s="start"===o?+r/2:-r/2;fT(this).maybeAppend("border","line").attr("className","border").styles(be({x1:s+e,y1:n-i/2,x2:s+e,y2:n+i/2},a))},e.prototype.render=function(){this.renderBackground(),this.renderIcon(),this.renderBorder()},e.defaultOptions={style:{x:0,y:0,width:10,height:50,iconSize:10,type:"start",backgroundFill:"#fff",backgroundFillOpacity:.5,iconStroke:"#9a9a9a",iconLineWidth:1,borderStroke:"#e8e8e8",borderLineWidth:1}},e}(rT);function RL(t){var e=String(Math.floor(t/3600)).padStart(2,"0"),n=String(Math.floor(t%3600/60)).padStart(2,"0"),r=String(Math.floor(t%60)).padStart(2,"0");return t<3600?"".concat(n,":").concat(r):"".concat(e,":").concat(n,":").concat(r)}var HL=function(t){function e(n){var r=t.call(this,$F({},e.defaultOptions,n))||this;r.axis=r.appendChild(new uN({style:{type:"linear",startPos:[0,0],endPos:[0,0],data:[],showArrow:!1,animate:!1}})),r.timeline=r.appendChild(new dL({style:{onChange:function(t){r.handleSliderChange(t)}}})),r.controller=r.appendChild(new UL({})),r.states={},r.handleSliderChange=function(t){var e,n=(e=r.states.values,Array.isArray(e)?ke([],Be(e),!1):e);r.setBySliderValues(t),r.dispatchOnChange(n)};var i=r.attributes,o=i.selectionType,a=i.chartType,s=i.speed,u=i.state,c=i.playMode,l=i.values;return r.states={chartType:a,playMode:c,selectionType:o,speed:s,state:u},r.setByTimebarValues(l),r}return me(e,t),Object.defineProperty(e.prototype,"data",{get:function(){return this.attributes.data.sort(function(t,e){return t.time<e.time?-1:t.time>e.time?1:0})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"space",{get:function(){var t=this.attributes,e=t.x,n=t.y,r=t.width,i=t.height,o=t.type,a=t.controllerHeight,s=ge(+i-a,0,+i),u=new dT(e,n+ +i-a,+r,a),c=0,l="time"===o?10:s;return{axisBBox:"chart"===o?new dT(e,n+s-(c=35),+r,c):new dT,controllerBBox:u,timelineBBox:new dT(e,n+("time"===o?s:s-l),+r,l-c)}},enumerable:!1,configurable:!0}),e.prototype.setBySliderValues=function(t){var e,n,r=this.data,i=Be(Array.isArray(t)?t:[0,t],2),o=i[0],a=i[1],s=r.length,u=r[Math.floor(o*s)],c=r[Math.ceil(a*s)-(Array.isArray(t)?0:1)];this.states.values=[null!==(e=null==u?void 0:u.time)&&void 0!==e?e:r[0].time,null!==(n=null==c?void 0:c.time)&&void 0!==n?n:1/0]},e.prototype.setByTimebarValues=function(t){var e,n,r,i=this.data,o=Be(Array.isArray(t)?t:[void 0,t],2),a=o[0],s=o[1],u=i.find(function(t){return t.time===a}),c=i.find(function(t){return t.time===s});this.states.values=[null!==(e=null==u?void 0:u.time)&&void 0!==e?e:null===(n=i[0])||void 0===n?void 0:n.time,null!==(r=null==c?void 0:c.time)&&void 0!==r?r:1/0]},e.prototype.setByIndex=function(t){var e,n,r,i,o=this.data,a=Be(t,2),s=a[0],u=a[1];this.states.values=[null!==(n=null===(e=o[s])||void 0===e?void 0:e.time)&&void 0!==n?n:o[0].time,null!==(i=null===(r=this.data[u])||void 0===r?void 0:r.time)&&void 0!==i?i:1/0]},Object.defineProperty(e.prototype,"sliderValues",{get:function(){var t,e=this.states,n=e.values,r=e.selectionType,i=Be(Array.isArray(n)?n:[void 0,n],2),o=i[0],a=i[1],s=this.data,u=s.length,c="value"===r;return[(t=s.findIndex(function(t){return t.time===o}),c?0:t>-1?t/u:0),function(){if(a===1/0)return 1;var t=s.findIndex(function(t){return t.time===a});return t>-1?t/u:c?.5:1}()]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"values",{get:function(){var t=this.states,e=t.values,n=t.selectionType,r=Be(Array.isArray(e)?e:[this.data[0].time,e],2),i=r[0],o=r[1];return"value"===n?o:[i,o]},enumerable:!1,configurable:!0}),e.prototype.getDatumByRatio=function(t){var e=this.data,n=e.length;return e[Math.floor(t*(n-1))]},Object.defineProperty(e.prototype,"chartHandleIconShape",{get:function(){var t=this.states.selectionType,e=this.space.timelineBBox.height;return"range"===t?function(t){return new DL({style:{type:t,height:e,iconSize:e/6}})}:function(){return new Ru({style:{x1:0,y1:-e/2,x2:0,y2:e/2,lineWidth:2,stroke:"#c8c8c8"}})}},enumerable:!1,configurable:!0}),e.prototype.getChartStyle=function(t){var e=this,n=t.x,r=t.y,i=t.width,o=t.height,a=this.states,s=a.selectionType,u=a.chartType,c=this.data,l=this.attributes,A=l.type,f=l.labelFormatter,d=sT(this.attributes,"chart"),h=(d.type,we(d,["type"])),p="range"===s;if("time"===A)return be({handleIconShape:function(){return new jL({})},selectionFill:"#2e7ff8",selectionFillOpacity:1,showLabelOnInteraction:!0,handleLabelDy:p?-15:0,autoFitLabel:p,handleSpacing:p?-15:0,trackFill:"#edeeef",trackLength:i,trackOpacity:.5,trackRadius:o/2,trackSize:o/2,type:s,values:this.sliderValues,formatter:function(t){if(f)return f(t);var n=e.getDatumByRatio(t).time;return"number"==typeof n?RL(n):PP(n,"YYYY-MM-DD HH:mm:ss")},transform:"translate(".concat(n,", ").concat(r,")"),zIndex:1},h);var v="range"===s?5:0,g=c.map(function(t){return t.value});return be({handleIconOffset:v,handleIconShape:this.chartHandleIconShape,selectionFill:"#fff",selectionFillOpacity:.5,selectionType:"invert",sparklineSpacing:.1,sparklineColumnLineWidth:0,sparklineColor:"#d4e5fd",sparklineAreaOpacity:1,sparklineAreaLineWidth:0,sparklineData:g,sparklineType:u,sparklineScale:.8,trackLength:i,trackSize:o,type:s,values:this.sliderValues,transform:"translate(".concat(n,", ").concat(r,")"),zIndex:1},h)},e.prototype.renderChart=function(t){void 0===t&&(t=this.space.timelineBBox),this.timeline.update(this.getChartStyle(t))},e.prototype.updateSelection=function(){this.timeline.setValues(this.sliderValues,!0),this.handleSliderChange(this.sliderValues)},e.prototype.getAxisStyle=function(t){var e=this.data,n=this.attributes,r=n.interval,i=n.labelFormatter,o=sT(this.attributes,"axis"),a=t.x,s=t.y,u=t.width,c=ke(ke([],Be(e),!1),[{time:0}],!1).map(function(t,e,n){var r=t.time;return{label:"".concat(r),value:e/(n.length-1),time:r}}),l=be({startPos:[a,s],endPos:[a+u,s],data:c,labelFilter:function(t,e){return e<c.length-1},labelFormatter:function(t){var e=t.time;return i?i(e):function(t,e){return"number"==typeof t?RL(t):function(t,e){var n=new Date(t);switch(e){case"half-hour":case"hour":case"four-hour":return[0,6,12,18].includes(n.getHours())&&0===n.getMinutes()?PP(n,"HH:mm\nYYYY-MM-DD"):PP(n,"HH:mm");case"half-day":return n.getHours()<12?"AM\n".concat(PP(n,"YYYY-MM-DD")):"PM";case"day":return[1,10,20].includes(n.getDate())?PP(n,"DD\nYYYY-MM"):PP(n,"DD");case"week":return n.getDate()<=7?PP(n,"DD\nYYYY-MM"):PP(n,"DD");case"month":return[0,6].includes(n.getMonth())?PP(n,"MM\nYYYY"):PP(n,"MM");case"season":return[0].includes(n.getMonth())?PP(n,"MM\nYYYY"):PP(n,"MM");case"year":return PP(n,"YYYY");default:return PP(n,"YYYY-MM-DD HH:mm")}}(t,e)}(e,r)}},o);return l},e.prototype.renderAxis=function(t){void 0===t&&(t=this.space.axisBBox),"chart"===this.attributes.type&&this.axis.update(this.getAxisStyle(t))},e.prototype.renderController=function(t){void 0===t&&(t=this.space.controllerBBox);var e=this.attributes.type,n=this.states,r=n.state,i=n.speed,o=n.selectionType,a=n.chartType,s=sT(this.attributes,"controller"),u=this,c=be(be(be({},t),{iconSize:20,speed:i,state:r,selectionType:o,chartType:a,onChange:function(t,e){var n=e.value;switch(t){case"reset":u.internalReset();break;case"speed":u.handleSpeedChange(n);break;case"backward":u.internalBackward();break;case"playPause":"play"===n?u.internalPlay():u.internalPause();break;case"forward":u.internalForward();break;case"selectionType":u.handleSelectionTypeChange(n);break;case"chartType":u.handleChartTypeChange(n)}}}),s);"time"===e&&(c.functions=[["reset","speed"],["backward","playPause","forward"],["selectionType"]]),this.controller.update(c)},e.prototype.dispatchOnChange=function(t){var e=this.data,n=this.attributes.onChange,r=this.states,i=r.values,o=r.selectionType,a=Be(i,2),s=a[0],u=a[1],c=u===1/0?e.at(-1).time:u;t&&function(t,e){if(Array.isArray(t)){if(!Array.isArray(e))return!1;if(t[0]===e[0]){if(t[1]===e[1])return!0;if(t[1]===1/0||e[1]===1/0)return!0}return!1}return!Array.isArray(e)&&t===e}(t,"range"===o?[s,c]:c)||null==n||n("range"===o?[s,c]:c)},e.prototype.internalReset=function(t){var e,n,r=this.states.selectionType;this.internalPause(),this.setBySliderValues("range"===r?[0,1]:[0,0]),this.renderController(),this.updateSelection(),t||(null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onReset)||void 0===n||n.call(e),this.dispatchOnChange())},e.prototype.reset=function(){this.internalReset()},e.prototype.moveSelection=function(t,e){var n=this.data,r=n.length,i=this.states,o=i.values,a=i.selectionType,s=i.playMode,u=Be(o,2),c=u[0],l=u[1],A=n.findIndex(function(t){return t.time===c}),f=n.findIndex(function(t){return t.time===l});-1===f&&(f=r);var d,h="backward"===t?-1:1;"range"===a?"acc"===s?(d=[A,f+h],-1===h&&A===f&&(d=[A,r])):d=[A+h,f+h]:d=[A,f+h];var p=function(t){var e=Be(t.sort(function(t,e){return t-e}),2),n=e[0],i=e[1],o=function(t){return ge(t,0,r)};return i>r?"value"===a?[0,0]:"acc"===s?[o(n),o(n)]:[0,o(i-n)]:n<0?"acc"===s?[0,o(i)]:[o(n+r-i),r]:[o(n),o(i)]}(d);return this.setByIndex(p),this.updateSelection(),p},e.prototype.internalBackward=function(t){var e,n,r=this.moveSelection("backward",t);return t||(null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onBackward)||void 0===n||n.call(e),this.dispatchOnChange()),r},e.prototype.backward=function(){this.internalBackward()},e.prototype.internalPlay=function(t){var e,n,r=this,i=this.data,o=this.attributes.loop,a=this.states.speed,s=void 0===a?1:a;this.playInterval=window.setInterval(function(){r.internalForward()[1]!==i.length||o||(r.internalPause(),r.renderController())},1e3/s),this.states.state="play",!t&&(null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onPlay)||void 0===n||n.call(e))},e.prototype.play=function(){this.internalPlay()},e.prototype.internalPause=function(t){var e,n;clearInterval(this.playInterval),this.states.state="pause",!t&&(null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onPause)||void 0===n||n.call(e))},e.prototype.pause=function(){this.internalPause()},e.prototype.internalForward=function(t){var e,n,r=this.moveSelection("forward",t);return t||(null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onForward)||void 0===n||n.call(e),this.dispatchOnChange()),r},e.prototype.forward=function(){this.internalForward()},e.prototype.handleSpeedChange=function(t){var e,n;this.states.speed=t,"play"===this.states.state&&(this.internalPause(!0),this.internalPlay(!0)),null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onSpeedChange)||void 0===n||n.call(e,t)},e.prototype.handleSelectionTypeChange=function(t){var e,n;this.states.selectionType=t,this.renderChart(),null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onSelectionTypeChange)||void 0===n||n.call(e,t)},e.prototype.handleChartTypeChange=function(t){var e,n;this.states.chartType=t,this.renderChart(),null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onChartTypeChange)||void 0===n||n.call(e,t)},e.prototype.render=function(){var t=this.space,e=t.axisBBox,n=t.controllerBBox,r=t.timelineBBox;this.renderController(n),this.renderAxis(e),this.renderChart(r),"play"===this.states.state&&this.internalPlay()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.internalPause(!0)},e.defaultOptions={style:{x:0,y:0,axisLabelFill:"#6e6e6e",axisLabelTextAlign:"left",axisLabelTextBaseline:"top",axisLabelTransform:"translate(5, -12)",axisLineLineWidth:1,axisLineStroke:"#cacdd1",axisTickLength:15,axisTickLineWidth:1,axisTickStroke:"#cacdd1",chartShowLabel:!1,chartType:"line",controllerAlign:"center",controllerHeight:40,data:[],interval:"day",loop:!1,playMode:"acc",selectionType:"range",type:"time"}},e}(rT),zL=["timestamp","time","date","datetime"],KL=function(t){function e(t,n){var r;return x(this,e),(r=F(this,e,[t,Object.assign({},e.defaultOptions,n)])).backup(),r.upsertTimebar(),r}return P(e,t),B(e,[{key:"padding",get:function(){return Uy(this.options.padding)}},{key:"play",value:function(){var t;null===(t=this.timebar)||void 0===t||t.play()}},{key:"pause",value:function(){var t;null===(t=this.timebar)||void 0===t||t.pause()}},{key:"forward",value:function(){var t;null===(t=this.timebar)||void 0===t||t.forward()}},{key:"backward",value:function(){var t;null===(t=this.timebar)||void 0===t||t.backward()}},{key:"reset",value:function(){var t;null===(t=this.timebar)||void 0===t||t.reset()}},{key:"update",value:function(t){xn(e,"update",this,3)([t]),this.backup(),this.upsertTimebar()}},{key:"backup",value:function(){this.originalData=GL(this.context.graph.getData())}},{key:"upsertTimebar",value:function(){var t=this,e=this.context.canvas,n=this.options,r=n.onChange,i=n.timebarType,o=n.data,a=(n.x,n.y,n.width),s=n.height,u=(n.mode,function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(n,["onChange","timebarType","data","x","y","width","height","mode"])),c=e.getSize(),l=v(this.padding,1)[0];this.upsertCanvas().ready.then(function(){var e,n=Object.assign(Object.assign({x:c[0]/2-a/2,y:l,onChange:function(e){var n=(tn(e)?e:[e,e]).map(function(t){return function(t){return t instanceof Date}(t)?t.getTime():t});"modify"===t.options.mode?t.filterElements(n):t.hiddenElements(n),null==r||r(n)}},u),{data:o.map(function(t){return de(t)?{time:t,value:0}:t}),width:a,height:s,type:i});t.timebar?t.timebar.update(n):(t.timebar=new HL({style:n}),null===(e=t.canvas)||void 0===e||e.appendChild(t.timebar))})}},{key:"upsertCanvas",value:function(){if(this.canvas)return this.canvas;var t=this.options,e=t.className,n=t.height,r=t.position,i=this.context.canvas,o=v(i.getSize(),1)[0],a=v(this.padding,3),s=v(xP({width:o,height:n+a[0]+a[2],graphCanvas:i,className:"timebar",placement:r}),2),u=s[0],c=s[1];return this.container=u,e&&u.classList.add(e),this.canvas=c,this.canvas}},{key:"filterElements",value:function(t){return e=this,n=void 0,r=void 0,i=(0,Dn.A)().m(function e(){var n,r,i,o,a,s,u,c,l,A=this;return(0,Dn.A)().w(function(e){for(;;)switch(e.n){case 0:if(this.originalData){e.n=1;break}return e.a(2);case 1:return r=this.options,i=r.elementTypes,o=r.getTime,a=this.context,s=a.graph,u=a.element,c=GL(this.originalData),i.forEach(function(e){var n="".concat(e,"s");c[n]=(A.originalData[n]||[]).filter(function(e){var n=o(e);return!!VL(n,t)})}),l=[].concat(O(c.nodes),O(c.combos)).map(function(t){return Sm(t)}),c.edges=c.edges.filter(function(t){var e=t.source,n=t.target;return l.includes(e)&&l.includes(n)}),s.setData(c),e.n=2,null===(n=u.draw({animation:!1,silence:!0}))||void 0===n?void 0:n.finished;case 2:return e.a(2)}},e,this)}),new(r||(r=Promise))(function(t,o){function a(t){try{u(i.next(t))}catch(t){o(t)}}function s(t){try{u(i.throw(t))}catch(t){o(t)}}function u(e){e.done?t(e.value):function(t){return t instanceof r?t:new r(function(e){e(t)})}(e.value).then(a,s)}u((i=i.apply(e,n||[])).next())});var e,n,r,i}},{key:"hiddenElements",value:function(t){var e=this,n=this.context.graph,r=this.options,i=r.elementTypes,o=r.getTime,a=[],s=[];i.forEach(function(n){var r,i="".concat(n,"s");((null===(r=e.originalData)||void 0===r?void 0:r[i])||[]).forEach(function(e){var n=Sm(e),r=o(e);VL(r,t)?s.push(n):a.push(n)})}),n.hideElement(a,!1),n.showElement(s,!1)}},{key:"destroy",value:function(){var t,n,r,i=this.context.graph;this.originalData&&i.setData(Object.assign({},this.originalData)),null===(t=this.timebar)||void 0===t||t.destroy(),null===(n=this.canvas)||void 0===n||n.destroy(),null===(r=this.container)||void 0===r||r.remove(),this.originalData=void 0,this.container=void 0,this.timebar=void 0,this.canvas=void 0,xn(e,"destroy",this,3)([])}}])}(aS);KL.defaultOptions={position:"bottom",enable:!0,timebarType:"time",className:"g6-timebar",width:450,height:60,zIndex:3,elementTypes:["node"],padding:10,mode:"modify",getTime:function(t){return WL(t,zL,void 0)},loop:!1};var GL=function(t){var e=t.nodes,n=void 0===e?[]:e,r=t.edges,i=void 0===r?[]:r,o=t.combos,a=void 0===o?[]:o;return{nodes:O(n),edges:O(i),combos:O(a)}},VL=function(t,e){if(de(e))return t===e;var n=v(e,2),r=n[0],i=n[1];return t>=r&&t<=i},WL=function(t,e,n){for(var r,i=0;i<e.length;i++){var o=e[i],a=null===(r=t.data)||void 0===r?void 0:r[o];if(a)return a}return n},YL={fill:"#1D2129",wordWrap:!0,maxLines:1,textOverflow:"ellipsis",textBaseline:"top",textAlign:"start",x:0},XL=Object.assign(Object.assign({},YL),{fillOpacity:.9,fontSize:16,fontWeight:"bold"}),qL=Object.assign(Object.assign({},YL),{fillOpacity:.65,fontSize:12,fontWeight:"normal"}),ZL={align:"left",spacing:8,size:44,padding:[16,24,0,24]},JL="title",$L="subtitle",t_=function(t){function e(t,n){var r;x(this,e);var i=Object.assign({},ZL,n);return(r=F(this,e,[t,i])).onRender=function(){var t=r.updateCanvas();r.renderTitle(t)},r.bindEvents(),r}return P(e,t),B(e,[{key:"padding",get:function(){return Uy(this.options.padding)}},{key:"bindEvents",value:function(){var t=this.context.graph;t.on(ry.AFTER_RENDER,this.onRender),t.on(ry.AFTER_ANIMATE,this.onRender)}},{key:"unbindEvents",value:function(){var t=this.context.graph;t.off(ry.AFTER_RENDER,this.onRender),t.off(ry.AFTER_ANIMATE,this.onRender)}},{key:"destroy",value:function(){var t,n;this.unbindEvents(),null===(t=this.canvas)||void 0===t||t.destroy(),null===(n=this.container)||void 0===n||n.remove(),xn(e,"destroy",this,3)([])}},{key:"updateCanvas",value:function(){var t=this.options,e=t.size,n=t.className,r=t.align,i=v(this.context.canvas.getSize(),1)[0],o=v(this.padding,3),a=o[0],s=void 0===a?0:a,u=o[2],c=e+s+(void 0===u?0:u);if(this.canvas){var l=this.canvas.getConfig(),A=l.width,f=l.height;i===A&&c===f||this.canvas.resize(i,c)}else{var d={left:"left-top",center:"top",right:"right-top"},h=v(xP({width:i,height:c,placement:d[r]||d.left,className:"title-canvas",graphCanvas:this.context.canvas}),2),p=h[0],g=h[1];n&&p.classList.add(n),this.container=p,this.canvas=g}return this.canvas}},{key:"renderTitle",value:function(t){var e=new e_({options:this.options,ctx:this.context});t.removeChildren(),e.getTitle().forEach(function(e){e&&t.appendChild(e)})}}])}(aS),e_=function(){return B(function t(e){x(this,t);var n=e.options,r=e.ctx;this.options=n,this.context=r},[{key:"padding",get:function(){return Uy(this.options.padding)}},{key:"getTitle",value:function(){var t=this.options,e=JL,n=t[e],r=$L,i=t[r],o=t.spacing,a=void 0===o?44:o,s=(t.padding,t.align),u=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,[e+"",r+"","spacing","padding","align"]),c=n,l=i,A=Xb(u,JL),f=Xb(u,$L),d=v(this.context.graph.getSize(),1)[0],h=v(this.padding,4),p=h[0],g=void 0===p?0:p,y=h[1],m=void 0===y?0:y,b=h[3],w=void 0===b?0:b,x=d,E=x-w-m,B=null,k=w,O="left";switch(s){case"left":default:k=w,O="left";break;case"center":k=x/2,O="center";break;case"right":k=x-m,O="right"}var C=new fw({className:JL,style:Object.assign(Object.assign(Object.assign(Object.assign({},XL),{wordWrapWidth:E-5,x:k,y:g,textAlign:O}),A),{text:c})}),M=C.getBBox();return l&&(B=new fw({className:"subTitle",style:Object.assign(Object.assign(Object.assign(Object.assign({},qL),{wordWrapWidth:E-5,x:k,y:M.height+a+g,textAlign:O}),f),{text:l})})),[C,B]}}])}();function n_(t){var e={top:"unset",right:"unset",bottom:"unset",left:"unset"};return t.split("-").forEach(function(t){e[t]="8px"}),e.flexDirection=t.startsWith("top")||t.startsWith("bottom")?"row":"column",e}var r_=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())})},i_=function(t){function e(t,n){var r;x(this,e),(r=F(this,e,[t,Object.assign({},e.defaultOptions,n)])).$element=sS("toolbar",!1),r.onToolbarItemClick=function(t){var e=r.options.onClick;if(t.target instanceof Element&&t.target.className.includes("g6-toolbar-item")){var n=t.target.getAttribute("value");null==e||e(n,t.target)}};var i=r.context.canvas.getContainer();return r.$element.style.display="flex",i.appendChild(r.$element),uS("g6-toolbar-css","style",{},"\n  .g6-toolbar {\n    position: absolute;\n    z-index: 100;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n    border-radius: 4px;\n    box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.1);\n    opacity: 0.65;\n  }\n  .g6-toolbar .g6-toolbar-item {\n    display: inline-block;\n    width: 16px;\n    height: 16px;\n    padding: 4px;\n    cursor: pointer;\n    box-sizing: content-box;\n  }\n\n  .g6-toolbar .g6-toolbar-item:hover {\n    background-color: #f0f0f0;\n  }\n\n  .g6-toolbar .g6-toolbar-item svg {\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    pointer-events: none;\n  }\n",document.head),uS("g6-toolbar-svgicon","div",{display:"none"},'\n  <svg>\n    <symbol id="zoom-in" viewBox="64 64 896 896">\n      <path d="M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"></path>\n    </symbol>\n    <symbol id="zoom-out" viewBox="64 64 896 896">\n      <path d="M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"></path>\n    </symbol>\n    <symbol id="edit" viewBox="64 64 896 896">\n      <path d="M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"></path>\n    </symbol>\n    <symbol id="delete" viewBox="64 64 896 896">\n      <path d="M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"></path>\n    </symbol>\n    <symbol id="redo" viewBox="64 64 896 896">\n      <path d="M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"></path>\n    </symbol>\n    <symbol id="undo" viewBox="64 64 896 896">\n      <path d="M511.4 124C290.5 124.3 112 303 112 523.9c0 128 60.2 242 153.8 315.2l-37.5 48c-4.1 5.3-.3 13 6.3 12.9l167-.8c5.2 0 9-4.9 7.7-9.9L369.8 727a8 8 0 00-14.1-3L315 776.1c-10.2-8-20-16.7-29.3-26a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-7.5 7.5-15.3 14.5-23.4 21.2a7.93 7.93 0 00-1.2 11.1l39.4 50.5c2.8 3.5 7.9 4.1 11.4 1.3C854.5 760.8 912 649.1 912 523.9c0-221.1-179.4-400.2-400.6-399.9z"></path>\n    </symbol>\n    <symbol id="export" viewBox="64 64 896 896">\n      <path d="M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"></path>\n    </symbol>\n    <symbol id="auto-fit" viewBox="64 64 896 896">\n      <path d="M952 474H829.8C812.5 327.6 696.4 211.5 550 194.2V72c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v122.2C327.6 211.5 211.5 327.6 194.2 474H72c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h122.2C211.5 696.4 327.6 812.5 474 829.8V952c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V829.8C696.4 812.5 812.5 696.4 829.8 550H952c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zM512 756c-134.8 0-244-109.2-244-244s109.2-244 244-244 244 109.2 244 244-109.2 244-244 244z"></path>\n      <path d="M512 392c-32.1 0-62.1 12.4-84.8 35.2-22.7 22.7-35.2 52.7-35.2 84.8s12.5 62.1 35.2 84.8C449.9 619.4 480 632 512 632s62.1-12.5 84.8-35.2C619.4 574.1 632 544 632 512s-12.5-62.1-35.2-84.8A118.57 118.57 0 00512 392z"></path>\n    </symbol>\n    <symbol id="reset" viewBox="64 64 896 896">\n      <path d="M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"></path>\n    </symbol>\n    <symbol id="exit-fullscreen" viewBox="0 0 1024 1024">\n      <path d="M418.13333333 361.43786666c0 0.2048-0.13653333 0.4096-0.13653334 0.68266667C417.99679999 362.32533333 418.13333333 362.53013333 418.13333333 362.73493333 418.13333333 371.54133333 414.44693333 379.392 408.78079999 385.39946666 408.43946666 385.7408 408.30293333 386.21866666 408.02986666 386.49173333c-1.09226667 1.09226667-2.59413333 1.77493333-3.82293333 2.73066667C398.40426666 393.65973333 391.64586666 396.8 383.93173333 396.8 383.72693333 396.8 383.59039999 396.73173333 383.38559999 396.73173333S382.97599999 396.8 382.77119999 396.8L112.29866666 396.8C92.50133333 396.8 76.79999999 381.50826666 76.79999999 362.66666666 76.66346666 343.89333333 92.63786666 328.53333333 112.16213333 328.53333333l189.44 0L87.44959999 114.51733333C73.59146666 100.59093333 73.25013333 78.5408 86.63039999 65.29706666c13.17546667-13.44853333 35.36213333-12.97066667 49.152 0.88746667l214.08426667 214.08426667L349.86666666 90.89706666C349.79839999 71.23626666 365.22666666 55.46666666 383.99999999 55.46666666 402.77333333 55.33013333 418.13333333 71.30453333 418.13333333 90.8288L418.13333333 361.43786666zM928.90453333 328.53333333l-189.44 0 214.15253333-214.08426667c13.85813333-13.9264 14.19946667-35.90826667 0.88746667-49.22026666-13.17546667-13.44853333-35.36213333-12.97066667-49.152 0.88746666l-214.08426667 214.08426667L691.26826666 90.89706666C691.26826666 71.23626666 675.83999999 55.46666666 657.06666666 55.46666666 638.29333333 55.33013333 622.93333333 71.30453333 622.93333333 90.8288l0 270.60906666c0 0.2048 0.13653333 0.4096 0.13653333 0.68266667C623.06986666 362.32533333 622.93333333 362.53013333 622.93333333 362.73493333 622.93333333 371.54133333 626.61973333 379.392 632.28586666 385.39946666c0.34133333 0.34133333 0.47786667 0.8192 0.8192 1.09226667 1.09226667 1.09226667 2.59413333 1.77493333 3.8912 2.73066667C642.66239999 393.65973333 649.42079999 396.8 657.13493333 396.8c0.2048 0 0.34133333-0.06826667 0.54613333-0.06826667S658.09066666 396.8 658.29546666 396.8l270.5408 0C948.56533333 396.8 964.26666666 381.50826666 964.26666666 362.66666666 964.40319999 343.89333333 948.42879999 328.53333333 928.90453333 328.53333333zM418.13333333 635.73333333c0-8.8064-3.6864-16.5888-9.35253334-22.66453333C408.43946666 612.72746666 408.30293333 612.2496 408.02986666 611.90826666 406.86933333 610.88426666 405.43573333 610.2016 404.20693333 609.24586666 398.47253333 604.80853333 391.64586666 601.6 383.93173333 601.6 383.72693333 601.6 383.59039999 601.73653333 383.38559999 601.73653333S382.97599999 601.6 382.77119999 601.6L112.29866666 601.6C92.50133333 601.6 76.79999999 616.96 76.79999999 635.73333333 76.66346666 654.50666666 92.63786666 669.86666666 112.16213333 669.86666666l189.44 0-214.15253334 214.15253334c-13.85813333 13.85813333-14.19946667 35.84-0.88746666 49.22026666 13.17546667 13.44853333 35.36213333 12.9024 49.152-0.95573333l214.08426666-214.08426667 0 189.37173334c0 19.59253333 15.42826667 35.49866667 34.2016 35.36213333C402.77333333 943.2064 418.13333333 927.232 418.13333333 907.5712L418.13333333 637.09866666c0-0.27306667-0.13653333-0.47786667-0.13653334-0.68266666C417.99679999 636.14293333 418.13333333 635.93813333 418.13333333 635.73333333zM739.46453333 669.86666666l189.44 0c19.456 0 35.49866667-15.36 35.36213333-34.13333333C964.26666666 616.96 948.56533333 601.6 928.76799999 601.6L658.29546666 601.6C658.09066666 601.6 657.88586666 601.73653333 657.68106666 601.73653333S657.33973333 601.6 657.13493333 601.6C649.42079999 601.6 642.59413333 604.80853333 636.85973333 609.24586666 635.63093333 610.2016 634.19733333 610.88426666 633.03679999 611.90826666 632.76373333 612.2496 632.62719999 612.72746666 632.28586666 613.0688 626.61973333 619.14453333 622.93333333 626.92693333 622.93333333 635.73333333c0 0.2048 0.13653333 0.4096 0.13653333 0.68266667C623.06986666 636.6208 622.93333333 636.8256 622.93333333 637.09866666l0 270.5408C622.93333333 927.232 638.29333333 943.2064 657.06666666 942.93333333c18.77333333 0.13653333 34.2016-15.70133333 34.2016-35.36213333l0-189.37173334 214.08426667 214.08426667c13.78986667 13.85813333 35.90826667 14.40426667 49.152 0.95573333 13.312-13.312 12.97066667-35.36213333-0.88746667-49.22026666L739.46453333 669.86666666z"  ></path></symbol>\n    <symbol id="request-fullscreen" viewBox="0 0 1024 1024">\n      <path d="M69.818182 87.598545v273.128728a34.909091 34.909091 0 0 0 69.818182 0V163.653818l221.928727 222.021818a33.512727 33.512727 0 0 0 47.383273-47.383272L186.926545 116.363636h197.073455a34.909091 34.909091 0 0 0 0-69.818181H110.871273C85.364364 46.545455 69.818182 59.671273 69.818182 87.598545zM938.542545 46.545455H665.413818a34.909091 34.909091 0 0 0 0 69.818181h197.073455L640.465455 338.292364a33.512727 33.512727 0 0 0 47.383272 47.383272l221.928728-222.021818v197.073455a34.909091 34.909091 0 0 0 69.818181 0V87.598545c0-27.927273-15.453091-41.053091-40.96-41.05309z m-827.671272 907.636363h273.128727a34.909091 34.909091 0 0 0 0-69.818182H186.926545l222.021819-221.928727a33.512727 33.512727 0 0 0-47.383273-47.383273L139.636364 837.073455V640a34.909091 34.909091 0 0 0-69.818182 0v273.128727c0 27.927273 15.546182 41.053091 41.053091 41.053091z m868.724363-41.053091V640a34.909091 34.909091 0 0 0-69.818181 0v197.073455L687.941818 615.051636a33.512727 33.512727 0 0 0-47.383273 47.383273L862.487273 884.363636H665.413818a34.909091 34.909091 0 0 0 0 69.818182h273.128727c25.6 0 41.053091-13.125818 41.053091-41.053091z"  ></path></symbol>\n  </svg>\n'),r.$element.addEventListener("click",r.onToolbarItemClick),r.update(n),r}return P(e,t),B(e,[{key:"update",value:function(t){var n=this,r=Object.create(null,{update:{get:function(){return xn(e,"update",n,1)}}});return r_(this,void 0,void 0,(0,Dn.A)().m(function e(){var n,i,o,a;return(0,Dn.A)().w(function(e){for(;;)switch(e.n){case 0:return r.update.call(this,t),n=this.options,i=n.className,o=n.position,a=n.style,this.$element.className="g6-toolbar ".concat(i||""),Object.assign(this.$element.style,a,n_(o)),e.n=1,this.getDOMContent();case 1:this.$element.innerHTML=e.v;case 2:return e.a(2)}},e,this)}))}},{key:"destroy",value:function(){this.$element.removeEventListener("click",this.onToolbarItemClick),this.$element.remove(),xn(e,"destroy",this,3)([])}},{key:"getDOMContent",value:function(){return r_(this,void 0,void 0,(0,Dn.A)().m(function t(){var e;return(0,Dn.A)().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.options.getItems();case 1:return e=t.v,t.a(2,e.map(function(t){var e;return'\n          <div class="g6-toolbar-item" value="'.concat(t.value,'" title="').concat(null!==(e=t.title)&&void 0!==e?e:"",'">\n            <svg aria-hidden="true" focusable="false">\n              <use xlink:href="#').concat(t.id,'"></use>\n            </svg>\n          </div>')}).join(""))}},t,this)}))}}])}(aS);function o_(t){var e=document.createElement("div");e.innerHTML=t;var n=e.childNodes[0];return n&&e.contains(n)&&e.removeChild(n),n}i_.defaultOptions={position:"top-left"};var a_=function(t,e){null!=e?t.replaceChildren?Array.isArray(e)?t.replaceChildren.apply(t,ke([],Be(e),!1)):t.replaceChildren(e):(t.innerHTML="",Array.isArray(e)?e.forEach(function(e){return t.appendChild(e)}):t.appendChild(e)):t.innerHTML=""};function s_(t){return void 0===t&&(t=""),{CONTAINER:"".concat(t,"tooltip"),TITLE:"".concat(t,"tooltip-title"),LIST:"".concat(t,"tooltip-list"),LIST_ITEM:"".concat(t,"tooltip-list-item"),NAME:"".concat(t,"tooltip-list-item-name"),MARKER:"".concat(t,"tooltip-list-item-marker"),NAME_LABEL:"".concat(t,"tooltip-list-item-name-label"),VALUE:"".concat(t,"tooltip-list-item-value"),CROSSHAIR_X:"".concat(t,"tooltip-crosshair-x"),CROSSHAIR_Y:"".concat(t,"tooltip-crosshair-y")}}var u_={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"};function c_(t){var e;void 0===t&&(t="");var n=s_(t);return(e={})[".".concat(n.CONTAINER)]={position:"absolute",visibility:"visible","z-index":8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)","background-color":"rgba(255, 255, 255, 0.96)","box-shadow":"0 6px 12px 0 rgba(0, 0, 0, 0.12)","border-radius":"4px",color:"rgba(0, 0, 0, 0.65)","font-size":"12px","line-height":"20px",padding:"12px","min-width":"120px","max-width":"360px","font-family":"Roboto-Regular"},e[".".concat(n.TITLE)]={color:"rgba(0, 0, 0, 0.45)"},e[".".concat(n.LIST)]={margin:"0px","list-style-type":"none",padding:"0px"},e[".".concat(n.LIST_ITEM)]={"list-style-type":"none",display:"flex","line-height":"2em","align-items":"center","justify-content":"space-between","white-space":"nowrap"},e[".".concat(n.MARKER)]={width:"8px",height:"8px","border-radius":"50%",display:"inline-block","margin-right":"4px"},e[".".concat(n.NAME)]={display:"flex","align-items":"center","max-width":"216px"},e[".".concat(n.NAME_LABEL)]=be({flex:1},u_),e[".".concat(n.VALUE)]=be({display:"inline-block",float:"right",flex:1,"text-align":"right","min-width":"28px","margin-left":"30px",color:"rgba(0, 0, 0, 0.85)"},u_),e[".".concat(n.CROSSHAIR_X)]={position:"absolute",width:"1px","background-color":"rgba(0, 0, 0, 0.25)"},e[".".concat(n.CROSSHAIR_Y)]={position:"absolute",height:"1px","background-color":"rgba(0, 0, 0, 0.25)"},e}var l_=function(t){function e(e){var n,r,i=this,o=null===(r=null===(n=e.style)||void 0===n?void 0:n.template)||void 0===r?void 0:r.prefixCls,a=s_(o);return(i=t.call(this,e,{data:[],x:0,y:0,visibility:"visible",title:"",position:"bottom-right",offset:[5,5],enterable:!1,container:{x:0,y:0},bounding:null,template:{prefixCls:"",container:'<div class="'.concat(a.CONTAINER,'"></div>'),title:'<div class="'.concat(a.TITLE,'"></div>'),item:'<li class="'.concat(a.LIST_ITEM,'" data-index={index}>\n        <span class="').concat(a.NAME,'">\n          <span class="').concat(a.MARKER,'" style="background:{color}"></span>\n          <span class="').concat(a.NAME_LABEL,'" title="{name}">{name}</span>\n        </span>\n        <span class="').concat(a.VALUE,'" title="{value}">{value}</span>\n      </li>')},style:c_(o)})||this).timestamp=-1,i.prevCustomContentKey=i.attributes.contentKey,i.initShape(),i.render(i.attributes,i),i}return me(e,t),Object.defineProperty(e.prototype,"HTMLTooltipElement",{get:function(){return this.element},enumerable:!1,configurable:!0}),e.prototype.getContainer=function(){return this.element},Object.defineProperty(e.prototype,"elementSize",{get:function(){return{width:this.element.offsetWidth,height:this.element.offsetHeight}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"HTMLTooltipItemsElements",{get:function(){var t=this.attributes,e=t.data,n=t.template;return e.map(function(t,e){var r,i,o=t.name,a=void 0===o?"":o,s=t.color,u=void 0===s?"black":s,c=t.index,l=we(t,["name","color","index"]),A=be({name:a,color:u,index:null!=c?c:e},l);return o_((r=n.item,i=A,r&&i?r.replace(/\\?\{([^{}]+)\}/g,function(t,e){return"\\"===t.charAt(0)?t.slice(1):void 0===i[e]?"":i[e]}):r))})},enumerable:!1,configurable:!0}),e.prototype.render=function(t,e){this.renderHTMLTooltipElement(),this.updatePosition()},e.prototype.destroy=function(){var e;null===(e=this.element)||void 0===e||e.remove(),t.prototype.destroy.call(this)},e.prototype.show=function(t,e){var n=this;if(void 0!==t&&void 0!==e){var r=function(){n.attributes.x=null!=t?t:n.attributes.x,n.attributes.y=null!=e?e:n.attributes.y,n.updatePosition()};"hidden"===this.element.style.visibility?this.closeTransition(r):r()}this.element.style.visibility="visible"},e.prototype.hide=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.attributes.enterable&&this.isCursorEntered(t,e)||(this.element.style.visibility="hidden")},e.prototype.initShape=function(){var t=this.attributes.template;this.element=o_(t.container),this.id&&this.element.setAttribute("id",this.id)},e.prototype.renderCustomContent=function(){if(void 0===this.prevCustomContentKey||this.prevCustomContentKey!==this.attributes.contentKey){this.prevCustomContentKey=this.attributes.contentKey;var t=this.attributes.content;t&&("string"==typeof t?this.element.innerHTML=t:a_(this.element,t))}},e.prototype.renderHTMLTooltipElement=function(){var t,e,n=this.attributes,r=n.template,i=n.title,o=n.enterable,a=n.style,s=n.content,u=s_(r.prefixCls),c=this.element;if(this.element.style.pointerEvents=o?"auto":"none",s)this.renderCustomContent();else{i?(c.innerHTML=r.title,c.getElementsByClassName(u.TITLE)[0].innerHTML=i):null===(e=null===(t=c.getElementsByClassName(u.TITLE))||void 0===t?void 0:t[0])||void 0===e||e.remove();var l=this.HTMLTooltipItemsElements,A=document.createElement("ul");A.className=u.LIST,a_(A,l);var f=this.element.querySelector(".".concat(u.LIST));f?f.replaceWith(A):c.appendChild(A)}!function(t,e){Object.entries(e).forEach(function(e){var n=Be(e,2),r=n[0],i=n[1];ke([t],Be(t.querySelectorAll(r)),!1).filter(function(t){return t.matches(r)}).forEach(function(t){t&&(t.style.cssText+=Object.entries(i).reduce(function(t,e){return"".concat(t).concat(e.join(":"),";")},""))})})}(c,a)},e.prototype.getRelativeOffsetFromCursor=function(t){var e=this.attributes,n=e.position,r=e.offset,i=(t||n).split("-"),o={left:[-1,0],right:[1,0],top:[0,-1],bottom:[0,1]},a=this.elementSize,s=a.width,u=a.height,c=[-s/2,-u/2];return i.forEach(function(t){var e=Be(c,2),n=e[0],i=e[1],a=Be(o[t],2),l=a[0],A=a[1];c=[n+(s/2+r[0])*l,i+(u/2+r[1])*A]}),c},e.prototype.setOffsetPosition=function(t){var e=Be(t,2),n=e[0],r=e[1],i=this.attributes,o=i.x,a=void 0===o?0:o,s=i.y,u=void 0===s?0:s,c=i.container,l=c.x,A=c.y;this.element.style.left="".concat(+a+l+n,"px"),this.element.style.top="".concat(+u+A+r,"px")},e.prototype.updatePosition=function(){var t=this.attributes.showDelay,e=void 0===t?60:t,n=Date.now();this.timestamp>0&&n-this.timestamp<e||(this.timestamp=n,this.setOffsetPosition(this.autoPosition(this.getRelativeOffsetFromCursor())))},e.prototype.autoPosition=function(t){var e=Be(t,2),n=e[0],r=e[1],i=this.attributes,o=i.x,a=i.y,s=i.bounding,u=i.position;if(!s)return[n,r];var c=this.element,l=c.offsetWidth,A=c.offsetHeight,f=Be([+o+n,+a+r],2),d=f[0],h=f[1],p={left:"right",right:"left",top:"bottom",bottom:"top"},v=s.x,g=s.y,y={left:d<v,right:d+l>v+s.width,top:h<g,bottom:h+A>g+s.height},m=[];u.split("-").forEach(function(t){y[t]?m.push(p[t]):m.push(t)});var b=m.join("-");return this.getRelativeOffsetFromCursor(b)},e.prototype.isCursorEntered=function(t,e){if(this.element){var n=this.element.getBoundingClientRect(),r=n.x,i=n.y,o=n.width,a=n.height;return new dT(r,i,o,a).isPointIn(t,e)}return!1},e.prototype.closeTransition=function(t){var e=this,n=this.element.style.transition;this.element.style.transition="none",t(),setTimeout(function(){e.element.style.transition=n},10)},e.tag="tooltip",e}(rT),A_=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())})},f_=function(t){function e(t,n){var r;return x(this,e),(r=F(this,e,[t,Object.assign({},e.defaultOptions,n)])).currentTarget=null,r.tooltipElement=null,r.container=null,r.isEnable=function(t,e){var n=r.options.enable;return"function"==typeof n?n(t,e):n},r.onClick=function(t){var e=t.target.id;r.currentTarget===e?r.hide(t):r.show(t)},r.onPointerMove=function(t){var e=t.target;r.currentTarget&&e.id!==r.currentTarget&&r.show(t)},r.onPointerLeave=function(t){r.hide(t)},r.onCanvasMove=function(t){r.hide(t)},r.onPointerOver=function(t){r.show(t)},r.showById=function(t){return A_(r,void 0,void 0,(0,Dn.A)().m(function e(){var n;return(0,Dn.A)().w(function(e){for(;;)switch(e.n){case 0:return n={target:{id:t}},e.n=1,this.show(n);case 1:return e.a(2)}},e,this)}))},r.getElementData=function(t,e){var n=r.context.model;switch(e){case"node":return n.getNodeData([t]);case"edge":return n.getEdgeData([t]);case"combo":return n.getComboData([t]);default:return[]}},r.show=function(t){return A_(r,void 0,void 0,(0,Dn.A)().m(function e(){var n,r,i,o,a,s,u,c,l,A,f,d,h,p,v;return(0,Dn.A)().w(function(e){for(;;)switch(e.n){case 0:if(i=t.client,o=t.target.id,!oB(t.target)){e.n=1;break}return e.a(2);case 1:if(a=this.context.graph.getElementType(o),s=this.options,u=s.getContent,c=s.title,l=this.getElementData(o,a),this.tooltipElement&&this.isEnable(t,l)){e.n=2;break}return e.a(2);case 2:if(A={},!u){e.n=5;break}return e.n=3,u(t,l);case 3:if(A.content=e.v,A.content){e.n=4;break}return e.a(2);case 4:e.n=6;break;case 5:f=this.context.graph.getElementRenderStyle(o),d="node"===a?f.fill:f.stroke,A={title:c||a,data:l.map(function(t){return{name:"ID",value:t.id||"".concat(t.source," -> ").concat(t.target),color:d}})};case 6:this.currentTarget=o,i?(h=i.x,p=i.y):(v=Gb(l,"0.style",{x:0,y:0}),h=v.x,p=v.y),null===(r=(n=this.options).onOpenChange)||void 0===r||r.call(n,!0),this.tooltipElement.update(Object.assign(Object.assign(Object.assign({},this.tooltipStyleProps),{x:h,y:p,style:{".tooltip":{visibility:"visible"}}}),A));case 7:return e.a(2)}},e,this)}))},r.hide=function(t){var e,n,i,o,a;if(!t)return null===(n=(e=r.options).onOpenChange)||void 0===n||n.call(e,!1),null===(i=r.tooltipElement)||void 0===i||i.hide(),void(r.currentTarget=null);if(r.tooltipElement&&r.currentTarget){var s=t.client,u=s.x,c=s.y;null===(a=(o=r.options).onOpenChange)||void 0===a||a.call(o,!1),r.tooltipElement.hide(u,c),r.currentTarget=null}},r.initTooltip=function(){var t,e=new l_({className:"tooltip",style:r.tooltipStyleProps});return null===(t=r.container)||void 0===t||t.appendChild(e.HTMLTooltipElement),e},r.render(),r.bindEvents(),r}return P(e,t),B(e,[{key:"getEvents",value:function(){return"click"===this.options.trigger?{"node:click":this.onClick,"edge:click":this.onClick,"combo:click":this.onClick,"canvas:click":this.onPointerLeave,contextmenu:this.onPointerLeave,drag:this.onPointerLeave}:{"node:pointerover":this.onPointerOver,"node:pointermove":this.onPointerMove,"canvas:pointermove":this.onCanvasMove,"edge:pointerover":this.onPointerOver,"edge:pointermove":this.onPointerMove,"combo:pointerover":this.onPointerOver,"combo:pointermove":this.onPointerMove,contextmenu:this.onPointerLeave,"node:drag":this.onPointerLeave}}},{key:"update",value:function(t){var n;this.unbindEvents(),xn(e,"update",this,3)([t]),this.tooltipElement&&(null===(n=this.container)||void 0===n||n.removeChild(this.tooltipElement.HTMLTooltipElement)),this.tooltipElement=this.initTooltip(),this.bindEvents()}},{key:"render",value:function(){var t=this.context.canvas.getContainer();t&&(this.container=t,this.tooltipElement=this.initTooltip())}},{key:"unbindEvents",value:function(){var t=this.context.graph,e=this.getEvents();Object.keys(e).forEach(function(n){t.off(n,e[n])})}},{key:"bindEvents",value:function(){var t=this.context.graph,e=this.getEvents();Object.keys(e).forEach(function(n){t.on(n,e[n])})}},{key:"tooltipStyleProps",get:function(){var t=this.context.canvas,e=t.getBounds().center,n=t.getContainer().getBoundingClientRect(),r=n.top,i=n.left,o=this.options,a=o.style,s=o.position,u=o.enterable,c=o.container,l=void 0===c?{x:-i,y:-r}:c,A=o.title,f=o.offset,d=v(e,2),h=d[0],p=d[1],g=v(t.getSize(),2);return{x:h,y:p,container:l,title:A,bounding:{x:0,y:0,width:g[0],height:g[1]},position:s,enterable:u,offset:f,style:a}}},{key:"destroy",value:function(){var t;this.unbindEvents(),this.tooltipElement&&(null===(t=this.container)||void 0===t||t.removeChild(this.tooltipElement.HTMLTooltipElement)),xn(e,"destroy",this,3)([])}}])}(aS);f_.defaultOptions={trigger:"hover",position:"top-right",enterable:!1,enable:!0,offset:[10,10],style:{".tooltip":{visibility:"hidden"}}};var d_,h_=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())})};function p_(t,e){return d_||(d_=document.createElement("canvas")),d_.width=t,d_.height=e,d_.getContext("2d").clearRect(0,0,t,e),d_}function v_(t,e,n,r){return h_(this,void 0,void 0,(0,Dn.A)().m(function i(){var o,a,s,u,c,l,A,f,d,h,p;return(0,Dn.A)().w(function(i){for(;;)if(0===i.n)return o=p_(t,e),a=o.getContext("2d"),s=r.rotate,u=r.opacity,c=r.textFill,l=r.textFontSize,A=r.textFontFamily,f=r.textFontVariant,d=r.textFontWeight,h=r.textAlign,p=r.textBaseline,a.textAlign=h,a.textBaseline=p,a.translate(t/2,e/2),a.font="".concat(l,"px ").concat(A," ").concat(f," ").concat(d),s&&a.rotate(s),u&&(a.globalAlpha=u),c&&(a.fillStyle=c,a.fillText("".concat(n),0,0)),i.a(2,o.toDataURL())},i)}))}function g_(t,e,n,r){return h_(this,void 0,void 0,(0,Dn.A)().m(function i(){var o,a,s,u,c;return(0,Dn.A)().w(function(i){for(;;)if(0===i.n)return o=p_(t,e),a=o.getContext("2d"),s=r.rotate,u=r.opacity,s&&a.rotate(s),u&&(a.globalAlpha=u),(c=new Image).crossOrigin="anonymous",c.src=n,i.a(2,new Promise(function(n){c.onload=function(){var r=t>c.width?(t-c.width)/2:0,i=e>c.height?(e-c.height)/2:0;a.drawImage(c,0,0,c.width,c.height,r,i,t-2*r,e-2*i),n(o.toDataURL())}}))},i)}))}var y_=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},m_=function(t){function e(t,n){var r;return x(this,e),(r=F(this,e,[t,Object.assign({},e.defaultOptions,n)])).$element=sS("watermark"),r.context.canvas.getContainer().appendChild(r.$element),r.update(n),r}return P(e,t),B(e,[{key:"update",value:function(t){var n,r,i,o,a=this,s=Object.create(null,{update:{get:function(){return xn(e,"update",a,1)}}});return n=this,r=void 0,i=void 0,o=(0,Dn.A)().m(function e(){var n,r,i,o,a,u,c,l,A=this;return(0,Dn.A)().w(function(e){for(;;)switch(e.n){case 0:if(s.update.call(this,t),n=this.options,r=n.width,i=n.height,o=n.text,a=n.imageURL,u=y_(n,["width","height","text","imageURL"]),Object.keys(u).forEach(function(e){e.startsWith("background")&&(A.$element.style[e]=t[e])}),!a){e.n=2;break}return e.n=1,g_(r,i,a,u);case 1:l=e.v,e.n=4;break;case 2:return e.n=3,v_(r,i,o,u);case 3:l=e.v;case 4:c=l,this.$element.style.backgroundImage="url(".concat(c,")");case 5:return e.a(2)}},e,this)}),new(i||(i=Promise))(function(t,e){function a(t){try{u(o.next(t))}catch(t){e(t)}}function s(t){try{u(o.throw(t))}catch(t){e(t)}}function u(e){e.done?t(e.value):function(t){return t instanceof i?t:new i(function(e){e(t)})}(e.value).then(a,s)}u((o=o.apply(n,r||[])).next())})}},{key:"destroy",value:function(){xn(e,"destroy",this,3)([]),this.$element.remove()}}])}(aS);m_.defaultOptions={width:200,height:100,opacity:.2,rotate:Math.PI/12,text:"",textFill:"#000",textFontSize:16,textAlign:"center",textBaseline:"middle",backgroundRepeat:"repeat"};var b_=["#7E92B5","#F4664A","#FFBE3A"],w_={type:"group",color:["#1783FF","#00C9C9","#F08F56","#D580FF","#7863FF","#DB9D0D","#60C42D","#FF80CA","#2491B3","#17C76F"]},x_={type:"group",color:["#99ADD1","#1783FF","#00C9C9","#F08F56","#D580FF","#7863FF","#DB9D0D","#60C42D","#FF80CA","#2491B3","#17C76F"]};function E_(t){var e=t.bgColor,n=t.textColor,r=t.nodeColor,i=t.nodeColorDisabled,o=t.nodeStroke,a=t.nodeHaloStrokeOpacityActive,s=void 0===a?.15:a,u=t.nodeHaloStrokeOpacitySelected,c=void 0===u?.25:u,l=t.nodeOpacityDisabled,A=void 0===l?.06:l,f=t.nodeIconOpacityInactive,d=void 0===f?.85:f,h=t.nodeOpacityInactive,p=void 0===h?.25:h,v=t.nodeBadgePalette,g=void 0===v?b_:v,y=t.nodePaletteOptions,m=void 0===y?w_:y,b=t.edgeColor,w=t.edgeColorDisabled,x=t.edgePaletteOptions,E=void 0===x?x_:x,B=t.comboColor,k=t.comboColorDisabled,O=t.comboStroke,C=t.comboStrokeDisabled;return{background:e,node:{palette:m,style:{donutOpacity:1,badgeBackgroundOpacity:1,badgeFill:"#fff",badgeFontSize:8,badgePadding:[0,4],badgePalette:g,fill:r,fillOpacity:1,halo:!1,iconFill:"#fff",iconOpacity:1,labelBackground:!1,labelBackgroundFill:e,labelBackgroundLineWidth:0,labelBackgroundOpacity:.75,labelFill:n,labelFillOpacity:.85,labelLineHeight:16,labelPadding:[0,2],labelFontSize:12,labelFontWeight:400,labelOpacity:1,labelOffsetY:2,lineWidth:0,portFill:r,portLineWidth:1,portStroke:o,portStrokeOpacity:.65,size:32,stroke:o,strokeOpacity:1,zIndex:2},state:{selected:{halo:!0,haloLineWidth:24,haloStrokeOpacity:c,labelFontSize:12,labelFontWeight:"bold",lineWidth:4,stroke:o},active:{halo:!0,haloLineWidth:12,haloStrokeOpacity:s},highlight:{labelFontWeight:"bold",lineWidth:4,stroke:o,strokeOpacity:.85},inactive:{badgeBackgroundOpacity:p,donutOpacity:p,fillOpacity:p,iconOpacity:d,labelFill:n,labelFillOpacity:p,strokeOpacity:p},disabled:{badgeBackgroundOpacity:.25,donutOpacity:A,fill:i,fillOpacity:A,iconFill:i,iconOpacity:.25,labelFill:n,labelFillOpacity:.25,strokeOpacity:A}},animation:{enter:"fade",exit:"fade",show:"fade",hide:"fade",expand:"node-expand",collapse:"node-collapse",update:[{fields:["x","y","fill","stroke"]}],translate:[{fields:["x","y"]}]}},edge:{palette:E,style:{badgeBackgroundFill:b,badgeFill:"#fff",badgeFontSize:8,badgeOffsetX:10,badgeBackgroundOpacity:1,fillOpacity:1,halo:!1,haloLineWidth:12,haloStrokeOpacity:1,increasedLineWidthForHitTesting:2,labelBackground:!1,labelBackgroundFill:e,labelBackgroundLineWidth:0,labelBackgroundOpacity:.75,labelBackgroundPadding:[4,4,4,4],labelFill:n,labelFontSize:12,labelFontWeight:400,labelOpacity:1,labelPlacement:"center",labelTextBaseline:"middle",lineWidth:1,stroke:b,strokeOpacity:1,zIndex:1},state:{selected:{halo:!0,haloStrokeOpacity:.25,labelFontSize:14,labelFontWeight:"bold",lineWidth:3},active:{halo:!0,haloStrokeOpacity:.15},highlight:{labelFontWeight:"bold",lineWidth:3},inactive:{stroke:t.edgeColorInactive,fillOpacity:.08,labelOpacity:.25,strokeOpacity:.08,badgeBackgroundOpacity:.25},disabled:{stroke:w,fillOpacity:.45,strokeOpacity:.45,labelOpacity:.25,badgeBackgroundOpacity:.45}},animation:{enter:"fade",exit:"fade",expand:"path-in",collapse:"path-out",show:"fade",hide:"fade",update:[{fields:["sourceNode","targetNode"]},{fields:["stroke"],shape:"key"}],translate:[{fields:["sourceNode","targetNode"]}]}},combo:{style:{collapsedMarkerFill:e,collapsedMarkerFontSize:12,collapsedMarkerFillOpacity:1,collapsedSize:32,collapsedFillOpacity:1,fill:B,halo:!1,haloLineWidth:12,haloStroke:O,haloStrokeOpacity:.25,labelBackground:!1,labelBackgroundFill:e,labelBackgroundLineWidth:0,labelBackgroundOpacity:.75,labelBackgroundPadding:[2,4,2,4],labelFill:n,labelFontSize:12,labelFontWeight:400,labelOpacity:1,lineDash:0,lineWidth:1,fillOpacity:.04,strokeOpacity:1,padding:10,stroke:O},state:{selected:{halo:!0,labelFontSize:14,labelFontWeight:700,lineWidth:4},active:{halo:!0},highlight:{labelFontWeight:700,lineWidth:4},inactive:{fillOpacity:.65,labelOpacity:.25,strokeOpacity:.65},disabled:{fill:k,fillOpacity:.25,labelOpacity:.25,stroke:C,strokeOpacity:.25}},animation:{enter:"fade",exit:"fade",show:"fade",hide:"fade",expand:"combo-expand",collapse:"combo-collapse",update:[{fields:["x","y"]},{fields:["fill","stroke","lineWidth"],shape:"key"}],translate:[{fields:["x","y"]}]}}}}var B_=E_({bgColor:"#000000",comboColor:"#fdfdfd",comboColorDisabled:"#d0e4ff",comboStroke:"#99add1",comboStrokeDisabled:"#969696",edgeColor:"#637088",edgeColorDisabled:"#637088",edgeColorInactive:"#D0E4FF",edgePaletteOptions:{type:"group",color:["#637088","#0F55A6","#008383","#9C5D38","#8B53A6","#4E40A6","#8F6608","#3E801D","#A65383","#175E75","#0F8248"]},nodeColor:"#1783ff",nodeColorDisabled:"#D0E4FF",nodeHaloStrokeOpacityActive:.25,nodeHaloStrokeOpacitySelected:.45,nodeIconOpacityInactive:.45,nodeOpacityDisabled:.25,nodeOpacityInactive:.45,nodeStroke:"#d0e4ff",textColor:"#ffffff"}),k_=E_({bgColor:"#ffffff",comboColor:"#99ADD1",comboColorDisabled:"#f0f0f0",comboStroke:"#99add1",comboStrokeDisabled:"#d9d9d9",edgeColor:"#99add1",edgeColorDisabled:"#d9d9d9",edgeColorInactive:"#1B324F",nodeColor:"#1783ff",nodeColorDisabled:"#1B324F",nodeHaloStrokeOpacityActive:.15,nodeHaloStrokeOpacitySelected:.25,nodeIconOpacityInactive:.85,nodeOpacityDisabled:.06,nodeOpacityInactive:.25,nodeStroke:"#000000",textColor:"#000000"}),O_=function(t){function e(){return x(this,e),F(this,e,arguments)}return P(e,t),B(e,[{key:"beforeDraw",value:function(t,e){return t}},{key:"afterLayout",value:function(t,e){}}])}(zm),C_=function(t){function e(){return x(this,e),F(this,e,arguments)}return P(e,t),B(e,[{key:"beforeDraw",value:function(t){var e=this.context.model,n=t.add.combos,r=function(t){var n=[];return t.forEach(function(t,r){var i=e.getAncestorsData(r,"combo").map(function(t){return Sm(t)}).reverse();n.push([r,t,i.length])}),new Map(n.sort(function(t,e){var n=v(t,3)[2];return v(e,3)[2]-n}).map(function(t){var e=v(t,2);return[e[0],e[1]]}))};return t.add.combos=r(n),t.update.combos=r(t.update.combos),t}}])}(O_);function M_(t,e,n,r,i){var o=Sm(r),a="".concat(n,"s"),s=i?r:t.add[a].get(o)||t.update[a].get(o)||t.remove[a].get(o)||r;Object.entries(t).forEach(function(t){var n=v(t,2),r=n[0],i=n[1];e===r?i[a].set(o,s):i[a].delete(o)})}function S_(t,e){return Object.keys(t).every(function(n){return t[n]===e[n]})}var F_=function(t){function e(){return x(this,e),F(this,e,arguments)}return P(e,t),B(e,[{key:"beforeDraw",value:function(t,e){var n=this;if("visibility"===e.stage)return t;if(!this.context.model.model.hasTreeStructure(cy))return t;for(var r=this.context.model,i=t.add,o=t.update,a=[].concat(O(t.update.combos.entries()),O(t.add.combos.entries()));a.length;){var s=v(a.pop(),2),u=s[0];if(Kb(s[1])){var c=r.getDescendantsData(u),l=pE(c.map(Sm),function(t){return r.getRelatedEdgesData(t)}),A=l.internal,f=l.external;c.forEach(function(e){var n=Sm(e),i=a.findIndex(function(t){return v(t,1)[0]===n});-1!==i&&a.splice(i,1);var o=r.getElementType(n);M_(t,"remove",o,e)}),A.forEach(function(e){return M_(t,"remove","edge",e)}),f.forEach(function(t){var e,r=Sm(t);(null===(e=n.context.element)||void 0===e?void 0:e.getElement(r))?o.edges.set(r,t):i.edges.set(r,t)})}else{var d=r.getChildrenData(u),h=pE(d.map(Sm),function(t){return r.getRelatedEdgesData(t)}),p=h.edges;[].concat(O(d),O(p)).forEach(function(e){var i,o=Sm(e),s=r.getElementType(o),u=null===(i=n.context.element)||void 0===i?void 0:i.getElement(o);M_(t,u?"update":"add",s,e),"combo"===s&&a.push([o,e])})}}return t}}])}(O_),T_=function(t,e,n,r){var i="".concat(n,"s"),o=Sm(r);t.add[i].has(o)||t.update[i].has(o)||t[e][i].set(Sm(r),r)},P_=function(t){function e(){return x(this,e),F(this,e,arguments)}return P(e,t),B(e,[{key:"getElement",value:function(t){return this.context.element.getElement(t)}},{key:"handleExpand",value:function(t,e){var n=this;if(T_(e,"add","node",t),!Kb(t)){var r=Sm(t);T_(e,"add","node",t),this.context.model.getRelatedEdgesData(r).forEach(function(t){M_(e,"add","edge",t)}),this.context.model.getChildrenData(r).forEach(function(t){n.handleExpand(t,e)})}}},{key:"beforeDraw",value:function(t){var e=this,n=this.context,r=n.graph,i=n.model;if(!i.model.hasTreeStructure(ly))return t;var o=t.add,a=o.nodes,s=o.edges,u=t.update.nodes,c=new Map,l=new Map;a.forEach(function(t,e){Kb(t)&&c.set(e,t)}),s.forEach(function(t){if("node"===r.getElementType(t.source)){var e=r.getNodeData(t.source);Kb(e)&&c.set(t.source,e)}}),u.forEach(function(t,n){var r=e.getElement(n);if(r){var i=r.attributes.collapsed;Kb(t)?i||c.set(n,t):i&&l.set(n,t)}});var A=new Set;return c.forEach(function(e,n){i.getDescendantsData(n).forEach(function(e){var n=Sm(e);A.has(n)||(M_(t,"remove","node",e),i.getRelatedEdgesData(n).forEach(function(e){M_(t,"remove","edge",e)}),A.add(n))})}),l.forEach(function(n,r){i.getAncestorsData(r,ly).some(Kb)?M_(t,"remove","node",n):e.handleExpand(n,t)}),t}}])}(O_),I_=new WeakMap;function N_(t,e,n){I_.has(t)||I_.set(t,{});var r=I_.get(t);if(!r[e])return r[e]=n,!0;var i=r[e];return!L_(i,n)&&(r[e]=n,!0)}var L_=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;if("object"!=typeof t||"object"!=typeof e)return t===e;var r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(var o=0,a=r;o<a.length;o++){var s=a[o],u=t[s],c=e[s];if(n>1&&"object"==typeof u&&"object"==typeof c){if(!L_(u,c,n-1))return!1}else if(u!==c)return!1}return!0};function __(t,e,n){Ay[t][e]&&gy.warn("The extension ".concat(e," of ").concat(t," has been registered before, and will be overridden.")),Object.assign(Ay[t],m({},e,n))}var Q_=function(){function t(e){x(this,t),this.dragndropPluginOptions=e}return B(t,[{key:"apply",value:function(e){var n=this,r=e.renderingService,i=e.renderingContext.root.ownerDocument,o=i.defaultView,a=function(t){var e=t.target,r=e===i,a=r&&n.dragndropPluginOptions.isDocumentDraggable?i:e.closest&&e.closest("[draggable=true]");if(a){var s=!1,u=t.timeStamp,c=[t.clientX,t.clientY],l=null,A=[t.clientX,t.clientY],f=function(){var t=Xn(Wn().mark(function t(o){var f,d,h,p,v,g;return Wn().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s){t.next=2;break}if(f=o.timeStamp-u,d=he([o.clientX,o.clientY],c),!(f<=n.dragndropPluginOptions.dragstartTimeThreshold||d<=n.dragndropPluginOptions.dragstartDistanceThreshold)){t.next=1;break}return t.abrupt("return");case 1:o.type="dragstart",a.dispatchEvent(o),s=!0;case 2:if(o.type="drag",o.dx=o.clientX-A[0],o.dy=o.clientY-A[1],a.dispatchEvent(o),A=[o.clientX,o.clientY],r){t.next=4;break}return h="pointer"===n.dragndropPluginOptions.overlap?[o.canvasX,o.canvasY]:e.getBounds().center,t.next=3,i.elementsFromPoint(h[0],h[1]);case 3:p=t.sent,v=p[p.indexOf(e)+1],g=(null==v?void 0:v.closest("[droppable=true]"))||(n.dragndropPluginOptions.isDocumentDroppable?i:null),l!==g&&(l&&(o.type="dragleave",o.target=l,l.dispatchEvent(o)),g&&(o.type="dragenter",o.target=g,g.dispatchEvent(o)),(l=g)&&(o.type="dragover",o.target=l,l.dispatchEvent(o)));case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();o.addEventListener("pointermove",f);var d=function(t){if(s){t.detail={preventClick:!0};var e=t.clone();l&&(e.type="drop",e.target=l,l.dispatchEvent(e)),e.type="dragend",a.dispatchEvent(e),s=!1}o.removeEventListener("pointermove",f)};e.addEventListener("pointerup",d,{once:!0}),e.addEventListener("pointerupoutside",d,{once:!0})}};r.hooks.init.tap(t.tag,function(){o.addEventListener("pointerdown",a)}),r.hooks.destroy.tap(t.tag,function(){o.removeEventListener("pointerdown",a)})}}])}();Q_.tag="Dragndrop";var U_=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return x(this,e),(t=F(this,e)).name="dragndrop",t.options=n,t}return P(e,t),B(e,[{key:"init",value:function(){this.addRenderingPlugin(new Q_(w({overlap:"pointer",isDocumentDraggable:!1,isDocumentDroppable:!1,dragstartDistanceThreshold:0,dragstartTimeThreshold:0},this.options)))}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}},{key:"setOptions",value:function(t){Object.assign(this.plugins[0].dragndropPluginOptions,t)}}])}(tr),j_=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())})},D_=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},R_=["main"],H_=["background","main","label","transient"],z_=function(){return B(function t(e){x(this,t),this.config={enableMultiLayer:!0},Object.assign(this.config,e);var n=this.config,r=n.renderer,i=n.background,o=(n.cursor,n.enableMultiLayer),a=D_(n,["renderer","background","cursor","enableMultiLayer"]),s=o?H_:R_,u=K_(r,s),c=Object.fromEntries(s.map(function(t){return[t,new Ac(Object.assign(Object.assign({},a),{supportsMutipleCanvasesInOneContainer:o,renderer:u[t],background:o?"background"===t?i:void 0:i}))]}));G_(c),this.extends={config:this.config,renderer:r,renderers:u,layers:c}},[{key:"getConfig",value:function(){return this.config}},{key:"getLayer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";return this.extends.layers[t]||this.getLayers().main}},{key:"getLayers",value:function(){return this.extends.layers}},{key:"getRenderer",value:function(t){return this.extends.renderers[t]}},{key:"getCamera",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";return this.getLayer(t).getCamera()}},{key:"getRoot",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";return this.getLayer(t).getRoot()}},{key:"getContextService",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";return this.getLayer(t).getContextService()}},{key:"setCursor",value:function(t){this.config.cursor=t,this.getLayer().setCursor(t)}},{key:"document",get:function(){return this.getLayer().document}},{key:"context",get:function(){return this.getLayer().context}},{key:"ready",get:function(){return Promise.all(Object.entries(this.getLayers()).map(function(t){return v(t,2)[1].ready}))}},{key:"resize",value:function(t,e){Object.assign(this.extends.config,{width:t,height:e}),Object.values(this.getLayers()).forEach(function(n){var r=n.getCamera(),i=r.getPosition(),o=r.getFocalPoint();n.resize(t,e),r.setPosition(i),r.setFocalPoint(o)})}},{key:"getBounds",value:function(t){return Vy(Object.values(this.getLayers()).map(function(e){var n=t?e.getRoot().childNodes.find(function(e){return e.classList.includes(t)}):e.getRoot();return n}).filter(function(t){return(null==t?void 0:t.childNodes.length)>0}).map(function(t){return t.getBounds()}))}},{key:"getContainer",value:function(){var t=this.extends.config.container;return"string"==typeof t?document.getElementById(t):t}},{key:"getSize",value:function(){return[this.extends.config.width||0,this.extends.config.height||0]}},{key:"appendChild",value:function(t,e){var n,r=(null===(n=t.style)||void 0===n?void 0:n.$layer)||"main";return this.getLayer(r).appendChild(t,e)}},{key:"setRenderer",value:function(t){var e=this;if(t!==this.extends.renderer){var n=K_(t,this.config.enableMultiLayer?H_:R_);this.extends.renderers=n,Object.entries(n).forEach(function(t){var n=v(t,2),r=n[0],i=n[1];return e.getLayer(r).setRenderer(i)}),G_(this.getLayers())}}},{key:"getCanvasByViewport",value:function(t){return yb(this.getLayer().viewport2Canvas(mb(t)))}},{key:"getViewportByCanvas",value:function(t){return yb(this.getLayer().canvas2Viewport(mb(t)))}},{key:"getViewportByClient",value:function(t){return yb(this.getLayer().client2Viewport(mb(t)))}},{key:"getClientByViewport",value:function(t){return yb(this.getLayer().viewport2Client(mb(t)))}},{key:"getClientByCanvas",value:function(t){return this.getClientByViewport(this.getViewportByCanvas(t))}},{key:"getCanvasByClient",value:function(t){var e=this.getLayer(),n=e.client2Viewport(mb(t));return yb(e.viewport2Canvas(n))}},{key:"toDataURL",value:function(){return j_(this,arguments,void 0,function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,Dn.A)().m(function n(){var r,i,o,a,s,u,c,l,A,f,d,h,p,g,y,m,b,w,x,E,B,k,O,C,M,S,F,T,P,I,N,L;return(0,Dn.A)().w(function(n){for(;;)switch(n.n){case 0:return r=globalThis.devicePixelRatio||1,i=e.mode,o=void 0===i?"viewport":i,a=D_(e,["mode"]),s=0,u=0,c=0,l=0,"viewport"===o?(A=t.getSize(),f=v(A,2),c=f[0],l=f[1]):"overall"===o&&(d=t.getBounds(),h=Hy(d),p=v(d.min,2),s=p[0],u=p[1],g=v(h,2),c=g[0],l=g[1]),y=o_('<div id="virtual-image"></div>'),m=new Ac({width:c,height:l,renderer:new Lx,devicePixelRatio:r,container:y,background:t.extends.config.background}),n.n=1,m.ready;case 1:return m.appendChild(t.getLayer("background").getRoot().cloneNode(!0)),m.appendChild(t.getRoot().cloneNode(!0)),b=t.getLayer("label").getRoot().cloneNode(!0),w=m.viewport2Canvas({x:0,y:0}),x=t.getCanvasByViewport([0,0]),b.translate([x[0]-w.x,x[1]-w.y]),b.scale(1/t.getCamera().getZoom()),m.appendChild(b),m.appendChild(t.getLayer("transient").getRoot().cloneNode(!0)),E=t.getCamera(),B=m.getCamera(),"viewport"===o?(B.setZoom(E.getZoom()),B.setPosition(E.getPosition()),B.setFocalPoint(E.getFocalPoint())):"overall"===o&&(k=B.getPosition(),O=v(k,3),C=O[0],M=O[1],S=O[2],F=B.getFocalPoint(),T=v(F,3),P=T[0],I=T[1],N=T[2],B.setPosition([C+s,M+u,S]),B.setFocalPoint([P+s,I+u,N])),L=m.getContextService(),n.a(2,new Promise(function(e){m.addEventListener(oc.RERENDER,function(){return j_(t,void 0,void 0,(0,Dn.A)().m(function t(){var n;return(0,Dn.A)().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,new Promise(function(t){return setTimeout(t,300)});case 1:return t.n=2,L.toDataURL(a);case 2:n=t.v,e(n);case 3:return t.a(2)}},t)}))})}))}},n)})()})}},{key:"destroy",value:function(){Object.values(this.getLayers()).forEach(function(t){t.getCamera().cancelLandmarkAnimation(),t.destroy()})}}])}();function K_(t,e){return Object.fromEntries(e.map(function(e){var n=(null==t?void 0:t(e))||new Lx;return n instanceof Lx&&n.setConfig({enableDirtyRectangleRendering:!1}),"main"===e?n.registerPlugin(new U_({isDocumentDraggable:!0,isDocumentDroppable:!0,dragstartDistanceThreshold:10,dragstartTimeThreshold:100})):n.unregisterPlugin(n.getPlugin("dom-interaction")),[e,n]}))}function G_(t){Object.entries(t).forEach(function(t){var e=v(t,2),n=e[0],r=e[1].getContextService().getDomElement();(null==r?void 0:r.style)&&(r.style.gridArea="1 / 1 / 2 / 2",r.style.outline="none",r.tabIndex=1,"main"!==n&&(r.style.pointerEvents="none")),(null==r?void 0:r.parentElement)&&(r.parentElement.style.display="grid",r.parentElement.style.isolation="isolate")})}var V_=function(t){return t?parseInt(t):0};function W_(t){if(!t)return[0,0];var e=640,n=480,r=function(t){var e=getComputedStyle(t),n=t.clientWidth||V_(e.width),r=t.clientHeight||V_(e.height);return[n-(V_(e.paddingLeft)+V_(e.paddingRight)),r-(V_(e.paddingTop)+V_(e.paddingBottom))]}(t),i=v(r,2);return e=i[0]||e,n=i[1]||n,[Math.max(de(e)?e:1,1),Math.max(de(n)?n:1,1)]}var Y_=B(function t(e){x(this,t),this.type=e}),X_=function(t){function e(t,n){var r;return x(this,e),(r=F(this,e,[t])).data=n,r}return P(e,t),B(e)}(Y_),q_=function(t){function e(t,n,r,i){var o;return x(this,e),(o=F(this,e,[t])).animationType=n,o.animation=r,o.data=i,o}return P(e,t),B(e)}(Y_),Z_=function(t){function e(t,n,r){var i;return x(this,e),(i=F(this,e,[t])).elementType=n,i.data=r,i}return P(e,t),B(e)}(Y_),J_=function(t){function e(t,n){var r;return x(this,e),(r=F(this,e,[t])).data=n,r}return P(e,t),B(e)}(Y_);function $_(t,e){t.emit(e.type,e)}function tQ(t){var e;return(null===(e=null==t?void 0:t.style)||void 0===e?void 0:e.zIndex)||0}var eQ="cachedStyle",nQ=function(t){return"__".concat(t,"__")};function rQ(t,e){return Gb(t,[eQ,nQ(e)])}var iQ=function(){return B(function t(e){x(this,t),this.tasks=[],this.animations=new Set,this.context=e},[{key:"getTasks",value:function(){var t=O(this.tasks);return this.tasks=[],t}},{key:"add",value:function(t,e){this.tasks.push([t,e])}},{key:"animate",value:function(t,e,n){var r,i,o,a=this;null===(r=null==e?void 0:e.before)||void 0===r||r.call(e);var s=this.getTasks().map(function(e){var r,i,o,s=v(e,2),u=s[0],c=s[1],l=u.element,A=u.elementType,f=u.stage,d=function(t,e,n,r){var i,o,a=t.animation;if(!1===a||!1===r)return[];var s=null===(i=null==t?void 0:t[e])||void 0===i?void 0:i.animation;if(!1===s)return[];var u=null==s?void 0:s[n];if(!1===u)return[];var c=null===(o=yy(t)[e])||void 0===o?void 0:o.animation,l=function(){return function(t){return"string"==typeof t?fy(uy.ANIMATION,t)||(gy.warn("The animation of ".concat(t," is not registered.")),[]):t}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(function(t){return Object.assign(Object.assign(Object.assign(Object.assign({},sy),bn(a)&&a),t),bn(r)&&r)})};if(u)return l(u);if(!c)return[];var A=c[n];return!1===A?[]:l(A)}(a.context.options,A,f,t);null===(r=null==c?void 0:c.before)||void 0===r||r.call(c);var h=d.length?By(l,a.inferStyle(u,n),d):null;return h?(null===(i=null==c?void 0:c.beforeAnimate)||void 0===i||i.call(c,h),h.finished.then(function(){var t,e;null===(t=null==c?void 0:c.afterAnimate)||void 0===t||t.call(c,h),null===(e=null==c?void 0:c.after)||void 0===e||e.call(c),a.animations.delete(h)})):null===(o=null==c?void 0:c.after)||void 0===o||o.call(c),h}).filter(Boolean);s.forEach(function(t){return a.animations.add(t)});var u=my(s);return u?(null===(i=null==e?void 0:e.beforeAnimate)||void 0===i||i.call(e,u),u.finished.then(function(){var t,n;null===(t=null==e?void 0:e.afterAnimate)||void 0===t||t.call(e,u),null===(n=null==e?void 0:e.after)||void 0===n||n.call(e),a.release()})):null===(o=null==e?void 0:e.after)||void 0===o||o.call(e),u}},{key:"inferStyle",value:function(t,e){var n,r,i=t.element,o=t.elementType,a=t.stage,s=t.originalStyle,u=t.updatedStyle,c=void 0===u?{}:u;t.modifiedStyle||(t.modifiedStyle=Object.assign(Object.assign({},s),c));var l=t.modifiedStyle,A={},f={};if("enter"===a)Object.assign(A,{opacity:0});else if("exit"===a)Object.assign(f,{opacity:0});else if("show"===a)Object.assign(A,{opacity:0}),Object.assign(f,{opacity:null!==(n=rQ(i,"opacity"))&&void 0!==n?n:wy("opacity")});else if("hide"===a)Object.assign(A,{opacity:null!==(r=rQ(i,"opacity"))&&void 0!==r?r:wy("opacity")}),Object.assign(f,{opacity:0});else if("collapse"===a){var d=(e||{}).collapse,h=d.target,p=d.descendants,g=d.position;if("node"===o){if(p.includes(i.id)){var y=v(g,3),m=y[0],b=y[1],w=y[2];Object.assign(f,{x:m,y:b,z:w})}}else if("combo"===o){if(i.id===h||p.includes(i.id)){var x=v(g,2),E=x[0],B=x[1];Object.assign(f,{x:E,y:B,childrenNode:s.childrenNode})}}else"edge"===o&&Object.assign(f,{sourceNode:l.sourceNode,targetNode:l.targetNode})}else if("expand"===a){var k=(e||{}).expand,O=k.target,C=k.descendants,M=k.position;if("node"===o){if(i.id===O||C.includes(i.id)){var S=v(M,3),F=S[0],T=S[1],P=S[2];Object.assign(A,{x:F,y:T,z:P})}}else if("combo"===o){if(i.id===O||C.includes(i.id)){var I=v(M,3),N=I[0],L=I[1],_=I[2];Object.assign(A,{x:N,y:L,z:_,childrenNode:l.childrenNode})}}else"edge"===o&&Object.assign(A,{sourceNode:l.sourceNode,targetNode:l.targetNode})}return[Object.keys(A).length>0?Object.assign({},s,A):s,Object.keys(f).length>0?Object.assign({},l,f):l]}},{key:"stop",value:function(){this.animations.forEach(function(t){return t.cancel()})}},{key:"clear",value:function(){this.tasks=[]}},{key:"release",value:function(){var t,e,n=this.context.canvas,r=null===(e=null===(t=n.document)||void 0===t?void 0:t.timeline)||void 0===e?void 0:e.animationsWithPromises;r&&(n.document.timeline.animationsWithPromises=r.filter(function(t){return"finished"!==t.playState}))}},{key:"destroy",value:function(){this.stop(),this.animations.clear(),this.tasks=[]}}])}(),oQ=function(){return B(function t(e){x(this,t),this.batchCount=0,this.context=e},[{key:"emit",value:function(t){this.context.graph.emit(t.type,t)}},{key:"startBatch",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.batchCount++,1===this.batchCount&&this.emit(new X_(ry.BATCH_START,{initiate:t}))}},{key:"endBatch",value:function(){this.batchCount--,0===this.batchCount&&this.emit(new X_(ry.BATCH_END))}},{key:"isBatching",get:function(){return this.batchCount>0}},{key:"destroy",value:function(){this.context=null}}])}(),aQ=function(t){function e(t){var n;return x(this,e),(n=F(this,e,[t])).currentTarget=null,n.currentTargetType=null,n.category="behavior",n.forwardCanvasEvents=function(t){var e=t.target,r=function(t){if(!t)return null;if(t instanceof $u)return{type:"canvas",element:t};for(var e=t;e;){if(zE(e))return{type:"node",element:e};if(KE(e))return{type:"edge",element:e};if(GE(e))return{type:"combo",element:e};e=e.parentElement}return null}(e);if(r){var i=n.context,o=i.graph,a=i.canvas,s=r.type,u=r.element;if(!("destroyed"in u)||!oB(u)&&!u.destroyed){var c=t.type,l=t.detail,A=t.button,f=Object.assign(Object.assign({},t),{target:u,targetType:s,originalTarget:e});c===ty.POINTER_MOVE&&(n.currentTarget!==u&&(n.currentTarget&&o.emit("".concat(n.currentTargetType,":").concat(ty.POINTER_LEAVE),Object.assign(Object.assign({},f),{type:ty.POINTER_LEAVE,target:n.currentTarget,targetType:n.currentTargetType})),u&&(Object.assign(f,{type:ty.POINTER_ENTER}),o.emit("".concat(s,":").concat(ty.POINTER_ENTER),f))),n.currentTarget=u,n.currentTargetType=s),c===ty.CLICK&&2===A||(o.emit("".concat(s,":").concat(c),f),o.emit(c,f)),c===ty.CLICK&&2===l&&(Object.assign(f,{type:ty.DBLCLICK}),o.emit("".concat(s,":").concat(ty.DBLCLICK),f),o.emit(ty.DBLCLICK,f)),c===ty.POINTER_DOWN&&2===A&&(Object.assign(f,{type:ty.CONTEXT_MENU,preventDefault:function(){var t;null===(t=a.getContainer())||void 0===t||t.addEventListener(ty.CONTEXT_MENU,function(t){return t.preventDefault()},{once:!0})}}),o.emit("".concat(s,":").concat(ty.CONTEXT_MENU),f),o.emit(ty.CONTEXT_MENU,f))}}},n.forwardContainerEvents=function(t){n.context.graph.emit(t.type,t)},n.forwardEvents(),n.setBehaviors(n.context.options.behaviors||[]),n}return P(e,t),B(e,[{key:"setBehaviors",value:function(t){this.setExtensions(t)}},{key:"forwardEvents",value:function(){var t=this,e=this.context.canvas.getContainer();e&&[ey.KEY_DOWN,ey.KEY_UP].forEach(function(n){e.addEventListener(n,t.forwardContainerEvents)});var n=this.context.canvas.document;n&&[ty.CLICK,ty.DBLCLICK,ty.POINTER_OVER,ty.POINTER_LEAVE,ty.POINTER_ENTER,ty.POINTER_MOVE,ty.POINTER_OUT,ty.POINTER_DOWN,ty.POINTER_UP,ty.CONTEXT_MENU,ty.DRAG_START,ty.DRAG,ty.DRAG_END,ty.DRAG_ENTER,ty.DRAG_OVER,ty.DRAG_LEAVE,ty.DROP,ty.WHEEL].forEach(function(e){n.addEventListener(e,t.forwardCanvasEvents)})}},{key:"destroy",value:function(){var t=this,n=this.context.canvas.getContainer();n&&[ey.KEY_DOWN,ey.KEY_UP].forEach(function(e){n.removeEventListener(e,t.forwardContainerEvents)}),this.context.canvas.document.removeAllEventListeners(),xn(e,"destroy",this,3)([])}}])}(Hm),sQ=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function uQ(t,e){var n=t.data,r=t.style,i=sQ(t,["data","style"]),o=e.data,a=e.style,s=sQ(e,["data","style"]),u=Object.assign(Object.assign({},i),s);return(n||o)&&Object.assign(u,{data:Object.assign(Object.assign({},n),o)}),(r||a)&&Object.assign(u,{style:Object.assign(Object.assign({},r),a)}),u}function cQ(t){var e=t.data,n=t.style,r=sQ(t,["data","style"]);return e&&(r.data=Object.assign({},e)),n&&(r.style=Object.assign({},n)),r}function lQ(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.states,r=void 0===n?[]:n,i=t.data,o=void 0===i?{}:i,a=t.style,s=void 0===a?{}:a,u=t.children,c=void 0===u?[]:u,l=sQ(t,["states","data","style","children"]),A=e.states,f=void 0===A?[]:A,d=e.data,h=void 0===d?{}:d,p=e.style,v=void 0===p?{}:p,g=e.children,y=void 0===g?[]:g,m=function(t,e){return t.length===e.length&&t.every(function(t,n){return t===e[n]})},b=function(t,e){var n=Object.keys(t),r=Object.keys(e);return n.length===r.length&&n.every(function(n){return t[n]===e[n]})};return!!(b(l,sQ(e,["states","data","style","children"]))&&m(c,y)&&m(r,f)&&b(o,h)&&b(s,v))}function AQ(t){var e=t.id,n=void 0===e?Sm(t):e,r=t.style,i=t.data,o=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["id","style","data"]),a=Object.assign(Object.assign({},t),{style:Object.assign({},r),data:Object.assign({},i)});return function(t){return"source"in t&&"target"in t}(t)?Object.assign({id:n,data:a},o):{id:n,data:a}}function fQ(t){return t.data}function dQ(t){if(!t.hasTreeStructure(ly)){t.attachTreeStructure(ly);var e,n=qn(t.getAllEdges());try{for(n.s();!(e=n.n()).done;){var r=e.value,i=r.source,o=r.target;t.setParent(o,i,ly)}}catch(t){n.e(t)}finally{n.f()}}}var hQ=function(){return B(function t(){x(this,t),this.latestRemovedComboIds=new Set,this.comboIds=new Set,this.changes=[],this.batchCount=0,this.isTraceless=!1,this.enableUpdateNodeLikeHierarchy=!0,this.model=new xB},[{key:"pushChange",value:function(t){if(!this.isTraceless){var e=t.type;if(e===qg.NodeUpdated||e===qg.EdgeUpdated||e===qg.ComboUpdated){var n=t.value,r=t.original;this.changes.push({value:cQ(n),original:cQ(r),type:e})}else this.changes.push({value:cQ(t.value),type:e})}}},{key:"getChanges",value:function(){return this.changes}},{key:"clearChanges",value:function(){this.changes=[]}},{key:"batch",value:function(t){this.batchCount++,this.model.batch(t),this.batchCount--}},{key:"isBatching",value:function(){return this.batchCount>0}},{key:"silence",value:function(t){this.isTraceless=!0,t(),this.isTraceless=!1}},{key:"isCombo",value:function(t){return this.comboIds.has(t)||this.latestRemovedComboIds.has(t)}},{key:"getData",value:function(){return{nodes:this.getNodeData(),edges:this.getEdgeData(),combos:this.getComboData()}}},{key:"getNodeData",value:function(t){var e=this;return this.model.getAllNodes().reduce(function(n,r){var i=fQ(r);return e.isCombo(Sm(i))||(void 0===t||t.includes(Sm(i)))&&n.push(i),n},[])}},{key:"getEdgeDatum",value:function(t){return fQ(this.model.getEdge(t))}},{key:"getEdgeData",value:function(t){return this.model.getAllEdges().reduce(function(e,n){var r=fQ(n);return(void 0===t||t.includes(Sm(r)))&&e.push(r),e},[])}},{key:"getComboData",value:function(t){var e=this;return this.model.getAllNodes().reduce(function(n,r){var i=fQ(r);return e.isCombo(Sm(i))?((void 0===t||t.includes(Sm(i)))&&n.push(i),n):n},[])}},{key:"getRootsData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ly;return this.model.getRoots(t).map(fQ)}},{key:"getAncestorsData",value:function(t,e){var n=this.model;return n.hasNode(t)&&n.hasTreeStructure(e)?n.getAncestors(t,e).map(fQ):[]}},{key:"getDescendantsData",value:function(t){var e=this,n=this.getElementDataById(t),r=[];return Ub(n,function(t){t!==n&&r.push(t)},function(t){return e.getChildrenData(Sm(t))},"TB"),r}},{key:"getParentData",value:function(t,e){var n=this.model;if(e){if(n.hasNode(t)&&n.hasTreeStructure(e)){var r=n.getParent(t,e);return r?fQ(r):void 0}}else gy.warn("The hierarchy structure key is not specified")}},{key:"getChildrenData",value:function(t){var e="node"===this.getElementType(t)?ly:cy,n=this.model;return n.hasNode(t)&&n.hasTreeStructure(e)?n.getChildren(t,e).map(fQ):[]}},{key:"getElementsDataByType",value:function(t){return"node"===t?this.getNodeData():"edge"===t?this.getEdgeData():"combo"===t?this.getComboData():[]}},{key:"getElementDataById",value:function(t){return"edge"===this.getElementType(t)?this.getEdgeDatum(t):this.getNodeLikeDatum(t)}},{key:"getNodeLikeDatum",value:function(t){return fQ(this.model.getNode(t))}},{key:"getNodeLikeData",value:function(t){return this.model.getAllNodes().reduce(function(e,n){var r=fQ(n);return t?t.includes(Sm(r))&&e.push(r):e.push(r),e},[])}},{key:"getElementDataByState",value:function(t,e){return this.getElementsDataByType(t).filter(function(t){var n;return null===(n=t.states)||void 0===n?void 0:n.includes(e)})}},{key:"getElementState",value:function(t){var e;return(null===(e=this.getElementDataById(t))||void 0===e?void 0:e.states)||[]}},{key:"hasNode",value:function(t){return this.model.hasNode(t)&&!this.isCombo(t)}},{key:"hasEdge",value:function(t){return this.model.hasEdge(t)}},{key:"hasCombo",value:function(t){return this.model.hasNode(t)&&this.isCombo(t)}},{key:"getRelatedEdgesData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"both";return this.model.getRelatedEdges(t,e).map(fQ)}},{key:"getNeighborNodesData",value:function(t){return this.model.getNeighbors(t).map(fQ)}},{key:"setData",value:function(t){var e=this,n=t.nodes,r=void 0===n?[]:n,i=t.edges,o=void 0===i?[]:i,a=t.combos,s=void 0===a?[]:a,u=this.getData(),c=u.nodes,l=u.edges,A=u.combos,f=Dm(c,r,function(t){return Sm(t)},lQ),d=Dm(l,o,function(t){return Sm(t)},lQ),h=Dm(A,s,function(t){return Sm(t)},lQ);this.batch(function(){var t={nodes:f.enter,edges:d.enter,combos:h.enter};e.addData(t),e.computeZIndex(t,"add",!0);var n={nodes:f.update,edges:d.update,combos:h.update};e.updateData(n),e.computeZIndex(n,"update",!0);var r={nodes:f.exit.map(Sm),edges:d.exit.map(Sm),combos:h.exit.map(Sm)};e.removeData(r)})}},{key:"addData",value:function(t){var e=this,n=t.nodes,r=t.edges,i=t.combos;this.batch(function(){e.addComboData(i),e.addNodeData(n),e.addEdgeData(r)}),this.computeZIndex(t,"add")}},{key:"addNodeData",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.length&&(this.model.addNodes(e.map(function(e){return t.pushChange({value:e,type:qg.NodeAdded}),AQ(e)})),this.updateNodeLikeHierarchy(e),this.computeZIndex({nodes:e},"add"))}},{key:"addEdgeData",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.length&&(this.model.addEdges(e.map(function(e){return t.pushChange({value:e,type:qg.EdgeAdded}),AQ(e)})),this.computeZIndex({edges:e},"add"))}},{key:"addComboData",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.length){var n=this.model;n.hasTreeStructure(cy)||n.attachTreeStructure(cy),n.addNodes(e.map(function(e){return t.comboIds.add(Sm(e)),t.pushChange({value:e,type:qg.ComboAdded}),AQ(e)})),this.updateNodeLikeHierarchy(e),this.computeZIndex({combos:e},"add")}}},{key:"addChildrenData",value:function(t,e){var n=this.getNodeLikeDatum(t),r=e.map(Sm);this.addNodeData(e),this.updateNodeData([{id:t,children:[].concat(O(n.children||[]),O(r))}]),this.addEdgeData(r.map(function(e){return{source:t,target:e}}))}},{key:"computeZIndex",value:function(t,e){var n=this;!(arguments.length>2&&void 0!==arguments[2]&&arguments[2])&&this.isBatching()||this.batch(function(){var r=t.nodes,i=void 0===r?[]:r,o=t.edges,a=void 0===o?[]:o,s=t.combos;(void 0===s?[]:s).forEach(function(t){var r,i,o,a=Sm(t);if(!("add"===e&&de(null===(r=t.style)||void 0===r?void 0:r.zIndex)||"update"===e&&!("combo"in t))){var s=n.getParentData(a,cy),u=s?(null!==(o=null===(i=s.style)||void 0===i?void 0:i.zIndex)&&void 0!==o?o:0)+1:0;n.preventUpdateNodeLikeHierarchy(function(){n.updateComboData([{id:a,style:{zIndex:u}}])})}}),i.forEach(function(t){var r,i,o,a=Sm(t);if(("add"!==e||!de(null===(r=t.style)||void 0===r?void 0:r.zIndex))&&("update"!==e||"combo"in t||"children"in t)){var s=0,u=n.getParentData(a,cy);if(u)s=((null===(i=u.style)||void 0===i?void 0:i.zIndex)||0)+1;else{var c=n.getParentData(a,ly);c&&(s=(null===(o=null==c?void 0:c.style)||void 0===o?void 0:o.zIndex)||0)}n.preventUpdateNodeLikeHierarchy(function(){n.updateNodeData([{id:a,style:{zIndex:s}}])})}}),a.forEach(function(t){var e,r,i,o,a;if(!de(null===(e=t.style)||void 0===e?void 0:e.zIndex)){var s=t.id,u=t.source,c=t.target;if(s){var l=n.getEdgeDatum(s);u=l.source,c=l.target}else s=Sm(t);if(u&&c){var A=(null===(i=null===(r=n.getNodeLikeDatum(u))||void 0===r?void 0:r.style)||void 0===i?void 0:i.zIndex)||0,f=(null===(a=null===(o=n.getNodeLikeDatum(c))||void 0===o?void 0:o.style)||void 0===a?void 0:a.zIndex)||0;n.updateEdgeData([{id:Sm(t),style:{zIndex:Math.max(A,f)-1}}])}}})})}},{key:"getFrontZIndex",value:function(t){var e,n=this.getElementType(t),r=this.getElementDataById(t),i=this.getData();if(Object.assign(i,m({},"".concat(n,"s"),i["".concat(n,"s")].filter(function(e){return Sm(e)!==t}))),"combo"===n&&!Kb(r)){var o=new Set(this.getAncestorsData(t,cy).map(Sm));i.nodes=i.nodes.filter(function(t){return!o.has(Sm(t))}),i.combos=i.combos.filter(function(t){return!o.has(Sm(t))}),i.edges=i.edges.filter(function(t){var e=t.source,n=t.target;return!o.has(e)&&!o.has(n)})}return Math.max.apply(Math,[(null===(e=r.style)||void 0===e?void 0:e.zIndex)||0,0].concat(O(Object.values(i).flat().map(function(t){var e;return((null===(e=null==t?void 0:t.style)||void 0===e?void 0:e.zIndex)||0)+1}))))}},{key:"updateNodeLikeHierarchy",value:function(t){var e=this;if(this.enableUpdateNodeLikeHierarchy){var n=this.model;t.forEach(function(t){var r=Sm(t),i=Fm(t);void 0!==i&&(n.hasTreeStructure(cy)||n.attachTreeStructure(cy),null===i&&e.refreshComboData(r),e.setParent(r,Fm(t),cy));var o=t.children||[];if(o.length){n.hasTreeStructure(ly)||n.attachTreeStructure(ly);var a=o.filter(function(t){return n.hasNode(t)});a.forEach(function(t){return e.setParent(t,r,ly)}),a.length!==o.length&&e.updateNodeData([{id:r,children:a}])}})}}},{key:"preventUpdateNodeLikeHierarchy",value:function(t){this.enableUpdateNodeLikeHierarchy=!1,t(),this.enableUpdateNodeLikeHierarchy=!0}},{key:"updateData",value:function(t){var e=this,n=t.nodes,r=t.edges,i=t.combos;this.batch(function(){e.updateNodeData(n),e.updateComboData(i),e.updateEdgeData(r)}),this.computeZIndex(t,"update")}},{key:"updateNodeData",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.length){var n=this.model;this.batch(function(){var r=[];e.forEach(function(e){var i=Sm(e),o=fQ(n.getNode(i));if(!lQ(o,e)){var a=uQ(o,e);t.pushChange({value:a,original:o,type:qg.NodeUpdated}),n.mergeNodeData(i,a),r.push(a)}}),t.updateNodeLikeHierarchy(r)}),this.computeZIndex({nodes:e},"update")}}},{key:"refreshData",value:function(){var t=this,e=this.getData(),n=e.nodes,r=e.edges,i=e.combos;n.forEach(function(e){t.pushChange({value:e,original:e,type:qg.NodeUpdated})}),r.forEach(function(e){t.pushChange({value:e,original:e,type:qg.EdgeUpdated})}),i.forEach(function(e){t.pushChange({value:e,original:e,type:qg.ComboUpdated})})}},{key:"syncNodeLikeDatum",value:function(t){var e=this.model,n=Sm(t);if(e.hasNode(n)){var r=uQ(fQ(e.getNode(n)),t);e.mergeNodeData(n,r)}}},{key:"syncEdgeDatum",value:function(t){var e=this.model,n=Sm(t);if(e.hasEdge(n)){var r=uQ(fQ(e.getEdge(n)),t);e.mergeEdgeData(n,r)}}},{key:"updateEdgeData",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.length){var n=this.model;this.batch(function(){e.forEach(function(e){var r=Sm(e),i=fQ(n.getEdge(r));if(!lQ(i,e)){e.source&&i.source!==e.source&&n.updateEdgeSource(r,e.source),e.target&&i.target!==e.target&&n.updateEdgeTarget(r,e.target);var o=uQ(i,e);t.pushChange({value:o,original:i,type:qg.EdgeUpdated}),n.mergeEdgeData(r,o)}})}),this.computeZIndex({edges:e},"update")}}},{key:"updateComboData",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.length){var n=this.model;n.batch(function(){var r=[];e.forEach(function(e){var i=Sm(e),o=fQ(n.getNode(i));if(!lQ(o,e)){var a=uQ(o,e);t.pushChange({value:a,original:o,type:qg.ComboUpdated}),n.mergeNodeData(i,a),r.push(a)}}),t.updateNodeLikeHierarchy(r)}),this.computeZIndex({combos:e},"update")}}},{key:"setParent",value:function(t,e,n){var r=this,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(t!==e){var o=Fm(this.getNodeLikeDatum(t));if(o!==e&&n===cy){var a={id:t,combo:e};this.isCombo(t),this.syncNodeLikeDatum(a)}this.model.setParent(t,e,n),i&&n===cy&&function(t,e){void 0===e&&(e=new Map);var n=[];if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++){var o=t[r];e.has(o)||(n.push(o),e.set(o,!0))}return n}([o,e]).forEach(function(t){void 0!==t&&r.refreshComboData(t)})}}},{key:"refreshComboData",value:function(t){var e=this,n=this.getComboData([t])[0],r=this.getAncestorsData(t,cy);n&&this.pushChange({value:n,original:n,type:qg.ComboUpdated}),r.forEach(function(t){e.pushChange({value:t,original:t,type:qg.ComboUpdated})})}},{key:"getElementPosition",value:function(t){return pb(this.getElementDataById(t))}},{key:"translateNodeLikeBy",value:function(t,e){this.isCombo(t)?this.translateComboBy(t,e):this.translateNodeBy(t,e)}},{key:"translateNodeLikeTo",value:function(t,e){this.isCombo(t)?this.translateComboTo(t,e):this.translateNodeTo(t,e)}},{key:"translateNodeBy",value:function(t,e){var n=Zm(this.getElementPosition(t),[].concat(O(e),[0]).slice(0,3));this.translateNodeTo(t,n)}},{key:"translateNodeTo",value:function(t,e){var n=this,r=v(e,3),i=r[0],o=void 0===i?0:i,a=r[1],s=void 0===a?0:a,u=r[2],c=void 0===u?0:u;this.preventUpdateNodeLikeHierarchy(function(){n.updateNodeData([{id:t,style:{x:o,y:s,z:c}}])})}},{key:"translateComboBy",value:function(t,e){var n=this,r=v(e,3),i=r[0],o=void 0===i?0:i,a=r[1],s=void 0===a?0:a,u=r[2],c=void 0===u?0:u;if(![o,s,c].some(isNaN)&&![o,s,c].every(function(t){return 0===t})){var l=this.getComboData([t])[0];if(l){var A=new Set;Ub(l,function(t){var e=Sm(t);if(!A.has(e)){A.add(e);var r=v(pb(t),3),i=r[0],a=r[1],u=r[2],l=uQ(t,{style:{x:i+o,y:a+s,z:u+c}});n.pushChange({value:l,original:t,type:n.isCombo(e)?qg.ComboUpdated:qg.NodeUpdated}),n.model.mergeNodeData(e,l)}},function(t){return n.getChildrenData(Sm(t))},"BT")}}}},{key:"translateComboTo",value:function(t,e){var n,r=this;if(!e.some(isNaN)){var i=v(e,3),o=i[0],a=void 0===o?0:o,s=i[1],u=void 0===s?0:s,c=i[2],l=void 0===c?0:c,A=null===(n=this.getComboData([t]))||void 0===n?void 0:n[0];if(A){var f=v(pb(A),3),d=f[0],h=f[1],p=f[2],g=a-d,y=u-h,m=l-p;Ub(A,function(t){var e=Sm(t),n=v(pb(t),3),i=n[0],o=n[1],a=n[2],s=uQ(t,{style:{x:i+g,y:o+y,z:a+m}});r.pushChange({value:s,original:t,type:r.isCombo(e)?qg.ComboUpdated:qg.NodeUpdated}),r.model.mergeNodeData(e,s)},function(t){return r.getChildrenData(Sm(t))},"BT")}}}},{key:"removeData",value:function(t){var e=this,n=t.nodes,r=t.edges,i=t.combos;this.batch(function(){e.removeEdgeData(r),e.removeNodeData(n),e.removeComboData(i),e.latestRemovedComboIds=new Set(i)})}},{key:"removeNodeData",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.length&&this.batch(function(){e.forEach(function(e){t.removeEdgeData(t.getRelatedEdgesData(e).map(Sm)),t.pushChange({value:t.getNodeData([e])[0],type:qg.NodeRemoved}),t.removeNodeLikeHierarchy(e)}),t.model.removeNodes(e)})}},{key:"removeEdgeData",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.length&&(e.forEach(function(e){return t.pushChange({value:t.getEdgeData([e])[0],type:qg.EdgeRemoved})}),this.model.removeEdges(e))}},{key:"removeComboData",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.length&&this.batch(function(){e.forEach(function(e){t.pushChange({value:t.getComboData([e])[0],type:qg.ComboRemoved}),t.removeNodeLikeHierarchy(e),t.comboIds.delete(e)}),t.model.removeNodes(e)})}},{key:"removeNodeLikeHierarchy",value:function(t){var e=this;if(this.model.hasTreeStructure(cy)){var n=Fm(this.getNodeLikeDatum(t));this.setParent(t,void 0,cy,!1),this.model.getChildren(t,cy).forEach(function(t){var r=fQ(t),i=Sm(r);e.setParent(Sm(r),n,cy,!1);var o=uQ(r,{id:Sm(r),combo:n});e.pushChange({value:o,original:r,type:e.isCombo(i)?qg.ComboUpdated:qg.NodeUpdated}),e.model.mergeNodeData(Sm(r),o)}),pe(n)||this.refreshComboData(n)}}},{key:"getElementType",value:function(t){if(this.model.hasNode(t))return this.isCombo(t)?"combo":"node";if(this.model.hasEdge(t))return"edge";throw new Error(vy("Unknown element type of id: ".concat(t)))}},{key:"destroy",value:function(){var t=this.model,e=t.getAllNodes(),n=t.getAllEdges();t.removeEdges(n.map(function(t){return t.id})),t.removeNodes(e.map(function(t){return t.id})),this.context={}}}])}(),pQ=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())})},vQ=function(){return B(function t(e){x(this,t),this.elementMap={},this.shapeTypeMap={},this.paletteStyle={},this.defaultStyle={},this.stateStyle={},this.visibilityCache=new WeakMap,this.context=e},[{key:"init",value:function(){this.initContainer()}},{key:"initContainer",value:function(){if(!this.container||this.container.destroyed){var t=this.context.canvas;this.container=t.appendChild(new _u({className:"elements"}))}}},{key:"emit",value:function(t,e){e.silence||$_(this.context.graph,t)}},{key:"forEachElementData",value:function(t){var e=this;Qb.forEach(function(n){var r=e.context.model.getElementsDataByType(n);t(n,r)})}},{key:"getElementType",value:function(t,e){var n,r=this.context,i=r.options,o=r.graph,a=(null===(n=i[t])||void 0===n?void 0:n.type)||e.type;return a?"string"==typeof a?a:a.call(o,e):"edge"===t?"line":"circle"}},{key:"getTheme",value:function(t){return yy(this.context.options)[t]||{}}},{key:"getThemeStyle",value:function(t){return this.getTheme(t).style||{}}},{key:"getThemeStateStyle",value:function(t,e){var n=this.getTheme(t).state,r=void 0===n?{}:n;return Object.assign.apply(Object,[{}].concat(O(e.map(function(t){return r[t]||{}}))))}},{key:"computePaletteStyle",value:function(){var t=this,e=this.context.options;this.paletteStyle={},this.forEachElementData(function(n,r){var i,o,a=Object.assign({},ew(null===(i=t.getTheme(n))||void 0===i?void 0:i.palette),ew(null===(o=e[n])||void 0===o?void 0:o.palette));(null==a?void 0:a.field)&&Object.assign(t.paletteStyle,function(t,e){if(!e)return{};var n=e.type,r=e.color,i=e.field,o=e.invert,a=function(t){var e="string"==typeof r?fy("palette",r):r;if("function"==typeof e){var n={};return t.forEach(function(t){var r=v(t,2),i=r[0],a=r[1];n[i]=e(o?1-a:a)}),n}if(Array.isArray(e)){var i=o?O(e).reverse():e,a={};return t.forEach(function(t){var n=v(t,2),r=n[0],o=n[1];a[r]=i[o%e.length]}),a}return{}},s=function(t,e){var n;return"string"==typeof t?null===(n=e.data)||void 0===n?void 0:n[t]:null==t?void 0:t(e)};if("group"===n){var u=Py(t,function(t){if(!i)return"default";var e=s(i,t);return e?String(e):"default"}),c=a(Object.keys(u).map(function(t,e){return[t,e]})),l={};return Object.entries(u).forEach(function(t){var e=v(t,2),n=e[0];e[1].forEach(function(t){l[Sm(t)]=c[n]})}),l}if("value"===n){var A=t.reduce(function(t,e){var n=v(t,2),r=n[0],o=n[1],a=s(i,e);if("number"!=typeof a)throw new Error(vy("Palette field ".concat(i," is not a number")));return[Math.min(r,a),Math.max(o,a)]},[1/0,-1/0]),f=v(A,2),d=f[0],h=f[1]-d;return a(t.map(function(t){return[t.id,(s(i,t)-d)/h]}))}}(r,a))})}},{key:"getPaletteStyle",value:function(t,e){var n=this.paletteStyle[e];return n?"edge"===t?{stroke:n}:{fill:n}:{}}},{key:"computeElementDefaultStyle",value:function(t,e){var n,r=(null===(n=this.context.options[t])||void 0===n?void 0:n.style)||{};"transform"in r&&Array.isArray(r.transform)&&(r.transform=O(r.transform)),this.defaultStyle[Sm(e.datum)]=$b(r,e)}},{key:"computeElementsDefaultStyle",value:function(t){var e=this,n=this.context.graph;this.forEachElementData(function(r,i){for(var o=i.length,a=0;a<o;a++){var s=i[a];(void 0===t||t.includes(Sm(s)))&&e.computeElementDefaultStyle(r,{datum:s,graph:n})}})}},{key:"getDefaultStyle",value:function(t){return this.defaultStyle[t]||{}}},{key:"getElementState",value:function(t){try{return this.context.model.getElementState(t)}catch(t){return[]}}},{key:"getElementStateStyle",value:function(t,e,n){var r,i;return $b((null===(i=null===(r=this.context.options[t])||void 0===r?void 0:r.state)||void 0===i?void 0:i[e])||{},n)}},{key:"computeElementStatesStyle",value:function(t,e,n){var r=this;this.stateStyle[Sm(n.datum)]=Object.assign.apply(Object,[{}].concat(O(e.map(function(e){return r.getElementStateStyle(t,e,n)}))))}},{key:"computeElementsStatesStyle",value:function(t){var e=this,n=this.context.graph;this.forEachElementData(function(r,i){for(var o=i.length,a=0;a<o;a++){var s=i[a];if(void 0===t||t.includes(Sm(s))){var u=e.getElementState(Sm(s));e.computeElementStatesStyle(r,u,{datum:s,graph:n})}}})}},{key:"getStateStyle",value:function(t){return this.stateStyle[t]||{}}},{key:"computeStyle",value:function(t,e){t&&["translate","zIndex"].includes(t)||(this.computePaletteStyle(),this.computeElementsDefaultStyle(e),this.computeElementsStatesStyle(e))}},{key:"getElement",value:function(t){return this.elementMap[t]}},{key:"getNodes",value:function(){var t=this;return this.context.model.getNodeData().map(function(e){var n=e.id;return t.elementMap[n]})}},{key:"getEdges",value:function(){var t=this;return this.context.model.getEdgeData().map(function(e){return t.elementMap[Sm(e)]})}},{key:"getCombos",value:function(){var t=this;return this.context.model.getComboData().map(function(e){var n=e.id;return t.elementMap[n]})}},{key:"getElementComputedStyle",value:function(t,e){var n=this,r=Sm(e),i=this.getThemeStyle(t),o=this.getPaletteStyle(t,r),a=e.style||{},s=this.getDefaultStyle(r),u=this.getThemeStateStyle(t,this.getElementState(r)),c=this.getStateStyle(r),l=Object.assign({},i,o,a,s,u,c);if("combo"===t){var A=this.context.model.getChildrenData(r),f=l.collapsed?[]:A.map(Sm).filter(function(t){return n.getElement(t)});Object.assign(l,{childrenNode:f,childrenData:A})}return l}},{key:"getDrawData",value:function(t){this.init();var e=this.computeChangesAndDrawData(t);if(!e)return null;var n=t.type,r=void 0===n?"draw":n,i=t.stage,o=void 0===i?r:i;return this.markDestroyElement(e.drawData),this.computeStyle(o),{type:r,stage:o,data:e}}},{key:"draw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{animation:!0},e=this.getDrawData(t);if(e){var n=e.data.drawData,r=n.add,i=n.update,o=n.remove;return this.destroyElements(o,t),this.createElements(r,t),this.updateElements(i,t),this.setAnimationTask(t,e)}}},{key:"preLayoutDraw",value:function(){return pQ(this,arguments,void 0,function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{animation:!0};return(0,Dn.A)().m(function n(){var r,i,o,a,s,u,c;return(0,Dn.A)().w(function(n){for(;;)switch(n.n){case 0:if(o=t.getDrawData(e)){n.n=1;break}return n.a(2);case 1:return a=o.data.drawData,n.n=2,null===(i=null===(r=t.context.layout)||void 0===r?void 0:r.preLayout)||void 0===i?void 0:i.call(r,a);case 2:return s=a.add,u=a.update,c=a.remove,t.destroyElements(c,e),t.createElements(s,e),t.updateElements(u,e),n.a(2,t.setAnimationTask(e,o))}},n)})()})}},{key:"setAnimationTask",value:function(t,e){var n=this,r=t.animation,i=t.silence,o=e.data,a=o.dataChanges,s=o.drawData,u=e.stage,c=e.type;return this.context.animation.animate(r,i?{}:{before:function(){return n.emit(new X_(ry.BEFORE_DRAW,{dataChanges:a,animation:r,stage:u,render:"render"===c}),t)},beforeAnimate:function(e){return n.emit(new q_(ry.BEFORE_ANIMATE,Zg.DRAW,e,s),t)},afterAnimate:function(e){return n.emit(new q_(ry.AFTER_ANIMATE,Zg.DRAW,e,s),t)},after:function(){return n.emit(new X_(ry.AFTER_DRAW,{dataChanges:a,animation:r,stage:u,render:"render"===c,firstRender:!1===n.context.graph.rendered}),t)}})}},{key:"computeChangesAndDrawData",value:function(t){var e=this.context.model,n=e.getChanges(),r=fF(n);if(0===r.length)return null;var i=Py(r,function(t){return t.type}),o=i.NodeAdded,a=void 0===o?[]:o,s=i.NodeUpdated,u=void 0===s?[]:s,c=i.NodeRemoved,l=void 0===c?[]:c,A=i.EdgeAdded,f=void 0===A?[]:A,d=i.EdgeUpdated,h=void 0===d?[]:d,p=i.EdgeRemoved,v=void 0===p?[]:p,g=i.ComboAdded,y=void 0===g?[]:g,m=i.ComboUpdated,b=void 0===m?[]:m,w=i.ComboRemoved,x=void 0===w?[]:w,E=function(t){return new Map(t.map(function(t){var e=t.value;return[Sm(e),e]}))},B={add:{nodes:E(a),edges:E(f),combos:E(y)},update:{nodes:E(u),edges:E(h),combos:E(b)},remove:{nodes:E(l),edges:E(v),combos:E(x)}},k=this.transformData(B,t);return e.clearChanges(),{dataChanges:n,drawData:k}}},{key:"transformData",value:function(t,e){var n=this.context.transform.getTransformInstance();return Object.values(n).reduce(function(t,n){return n.beforeDraw(t,e)},t)}},{key:"createElement",value:function(t,e,n){var r,i=this,o=Sm(e);if(!this.getElement(o)){var a=this.getElementType(t,e),s=this.getElementComputedStyle(t,e),u=fy(t,a);if(!u)return gy.warn("The element ".concat(a," of ").concat(t," is not registered."));this.emit(new Z_(ry.BEFORE_ELEMENT_CREATE,t,e),n);var c=this.container.appendChild(new u({id:o,context:this.context,style:s}));this.shapeTypeMap[o]=a,this.elementMap[o]=c;var l=n.stage,A=void 0===l?"enter":l;null===(r=this.context.animation)||void 0===r||r.add({element:c,elementType:t,stage:A,originalStyle:Object.assign({},c.attributes),updatedStyle:s},{after:function(){var r;i.emit(new Z_(ry.AFTER_ELEMENT_CREATE,t,e),n),null===(r=c.onCreate)||void 0===r||r.call(c)}})}}},{key:"createElements",value:function(t,e){var n=this,r=t.nodes,i=t.edges;[["node",r],["combo",t.combos],["edge",i]].forEach(function(t){var r=v(t,2),i=r[0];r[1].forEach(function(t){return n.createElement(i,t,e)})})}},{key:"getUpdateStageStyle",value:function(t,e,n){var r=n.stage;if("translate"===(void 0===r?"update":r)){if("node"===t||"combo"===t){var i=e.style,o=void 0===i?{}:i,a=o.x,s=void 0===a?0:a,u=o.y,c=void 0===u?0:u,l=o.z;return{x:s,y:c,z:void 0===l?0:l}}return{}}return this.getElementComputedStyle(t,e)}},{key:"updateElement",value:function(t,e,n){var r,i=this,o=Sm(e),a=n.stage,s=void 0===a?"update":a,u=this.getElement(o);if(!u)return function(){return null};this.emit(new Z_(ry.BEFORE_ELEMENT_UPDATE,t,e),n);var c=this.getElementType(t,e),l=this.getUpdateStageStyle(t,e,n);this.shapeTypeMap[o]!==c&&(u.destroy(),delete this.shapeTypeMap[o],delete this.elementMap[o],this.createElement(t,e,{animation:!1,silence:!0}));var A="visibility"!==s?s:"hidden"===l.visibility?"hide":"show";"hide"===A&&delete l.visibility,null===(r=this.context.animation)||void 0===r||r.add({element:u,elementType:t,stage:A,originalStyle:Object.assign({},u.attributes),updatedStyle:l},{before:function(){var t=i.elementMap[o];"collapse"!==s&&iB(t,l),"visibility"===s&&(function(t){return nQ("opacity")in(Gb(t,eQ)||{})}(t)||function(t,e){var n=Array.isArray(e)?e:[e];Gb(t,eQ)||Vb(t,eQ,{}),n.forEach(function(e){Vb(Gb(t,eQ),nQ(e),t.attributes[e])})}(t,"opacity"),i.visibilityCache.set(t,"show"===A?"visible":"hidden"),"show"===A&&Rm(t,"visible"))},after:function(){var r,a=i.elementMap[o];"collapse"===s&&iB(a,l),"hide"===A&&Rm(a,i.visibilityCache.get(a)),i.emit(new Z_(ry.AFTER_ELEMENT_UPDATE,t,e),n),null===(r=a.onUpdate)||void 0===r||r.call(a)}})}},{key:"updateElements",value:function(t,e){var n=this,r=t.nodes,i=t.edges;[["node",r],["combo",t.combos],["edge",i]].forEach(function(t){var r=v(t,2),i=r[0];r[1].forEach(function(t){return n.updateElement(i,t,e)})})}},{key:"markDestroyElement",value:function(t){var e=this;Object.values(t.remove).forEach(function(t){t.forEach(function(t){var n=Sm(t),r=e.getElement(n);r&&function(t){Vb(t,"__to_be_destroyed__",!0)}(r)})})}},{key:"destroyElement",value:function(t,e,n){var r,i=this,o=n.stage,a=void 0===o?"exit":o,s=Sm(e),u=this.elementMap[s];if(!u)return function(){return null};this.emit(new Z_(ry.BEFORE_ELEMENT_DESTROY,t,e),n),null===(r=this.context.animation)||void 0===r||r.add({element:u,elementType:t,stage:a,originalStyle:Object.assign({},u.attributes),updatedStyle:{}},{after:function(){var r;i.clearElement(s),u.destroy(),null===(r=u.onDestroy)||void 0===r||r.call(u),i.emit(new Z_(ry.AFTER_ELEMENT_DESTROY,t,e),n)}})}},{key:"destroyElements",value:function(t,e){var n=this,r=t.nodes,i=t.edges;[["combo",t.combos],["edge",i],["node",r]].forEach(function(t){var r=v(t,2),i=r[0];r[1].forEach(function(t){return n.destroyElement(i,t,e)})})}},{key:"clearElement",value:function(t){delete this.paletteStyle[t],delete this.defaultStyle[t],delete this.stateStyle[t],delete this.elementMap[t],delete this.shapeTypeMap[t]}},{key:"alignLayoutResultToElement",value:function(t,e){var n,r,i=null===(n=t.nodes)||void 0===n?void 0:n.find(function(t){return Sm(t)===e});if(i){var o=Jm(pb(this.context.model.getNodeLikeDatum(e)),pb(i));null===(r=t.nodes)||void 0===r||r.forEach(function(t){var e,n,r;(null===(e=t.style)||void 0===e?void 0:e.x)&&(t.style.x+=o[0]),(null===(n=t.style)||void 0===n?void 0:n.y)&&(t.style.y+=o[1]),(null===(r=t.style)||void 0===r?void 0:r.z)&&(t.style.z+=o[2]||0)})}}},{key:"collapseNode",value:function(t,e){return pQ(this,void 0,void 0,(0,Dn.A)().m(function n(){var r,i,o,a,s,u,c,l,A=this;return(0,Dn.A)().w(function(n){for(;;)switch(n.n){case 0:if(i=e.animation,this.context.model,o=this.computeChangesAndDrawData({stage:"collapse",animation:i})){n.n=1;break}return n.a(2);case 1:return a=o.drawData,s=a.add,u=a.remove,c=a.update,this.markDestroyElement(a),l={animation:i,stage:"collapse",data:a},this.destroyElements(u,l),this.createElements(s,l),this.updateElements(c,l),n.n=2,null===(r=this.context.animation.animate(i,{beforeAnimate:function(t){return A.emit(new q_(ry.BEFORE_ANIMATE,Zg.COLLAPSE,t,a),l)},afterAnimate:function(t){return A.emit(new q_(ry.AFTER_ANIMATE,Zg.COLLAPSE,t,a),l)}},{collapse:{target:t,descendants:Array.from(u.nodes).map(function(t){return Sm(v(t,2)[1])}),position:pb(c.nodes.get(t))}}))||void 0===r?void 0:r.finished;case 2:return n.a(2)}},n,this)}))}},{key:"expandNode",value:function(t,e){return pQ(this,void 0,void 0,(0,Dn.A)().m(function n(){var r,i,o,a,s,u,c,l,A,f,d=this;return(0,Dn.A)().w(function(n){for(;;)switch(n.n){case 0:if(i=this.context,o=i.model,i.layout,a=e.animation,e.align,s=pb(o.getNodeData([t])[0]),u=this.computeChangesAndDrawData({stage:"expand",animation:a}),this.createElements(u.drawData.add,{animation:!1,stage:"expand",target:t}),this.context.animation.clear(),this.computeStyle("expand"),u){n.n=1;break}return n.a(2);case 1:return c=u.drawData,l=c.update,A=c.add,f={animation:a,stage:"expand",data:c},A.edges.forEach(function(t){return l.edges.set(Sm(t),t)}),A.nodes.forEach(function(t){return l.nodes.set(Sm(t),t)}),this.updateElements(l,f),n.n=2,null===(r=this.context.animation.animate(a,{beforeAnimate:function(t){return d.emit(new q_(ry.BEFORE_ANIMATE,Zg.EXPAND,t,c),f)},afterAnimate:function(t){return d.emit(new q_(ry.AFTER_ANIMATE,Zg.EXPAND,t,c),f)}},{expand:{target:t,descendants:Array.from(A.nodes).map(function(t){return Sm(v(t,2)[1])}),position:s}}))||void 0===r?void 0:r.finished;case 2:return n.a(2)}},n,this)}))}},{key:"collapseCombo",value:function(t,e){return pQ(this,void 0,void 0,(0,Dn.A)().m(function n(){var r,i,o,a,s,u,c,l,A,f,d,h,p,g=this;return(0,Dn.A)().w(function(n){for(;;)switch(n.n){case 0:if(i=this.context,o=i.model,a=i.element,!o.getAncestorsData(t,cy).some(function(t){return Kb(t)})){n.n=1;break}return n.a(2);case 1:if(s=a.getElement(t),u=s.getComboPosition(Object.assign(Object.assign({},s.attributes),{collapsed:!0})),c=this.computeChangesAndDrawData({stage:"collapse",animation:e})){n.n=2;break}return n.a(2);case 2:return l=c.dataChanges,A=c.drawData,this.markDestroyElement(A),f=A.update,d=A.remove,h={animation:e,stage:"collapse",data:A},this.destroyElements(d,h),this.updateElements(f,h),p=function(t){return Array.from(t).map(function(t){return Sm(v(t,2)[1])})},n.n=3,null===(r=this.context.animation.animate(e,{before:function(){return g.emit(new X_(ry.BEFORE_DRAW,{dataChanges:l,animation:e}),h)},beforeAnimate:function(t){return g.emit(new q_(ry.BEFORE_ANIMATE,Zg.COLLAPSE,t,A),h)},afterAnimate:function(t){return g.emit(new q_(ry.AFTER_ANIMATE,Zg.COLLAPSE,t,A),h)},after:function(){return g.emit(new X_(ry.AFTER_DRAW,{dataChanges:l,animation:e}),h)}},{collapse:{target:t,descendants:[].concat(O(p(d.nodes)),O(p(d.combos))),position:u}}))||void 0===r?void 0:r.finished;case 3:return n.a(2)}},n,this)}))}},{key:"expandCombo",value:function(t,e){return pQ(this,void 0,void 0,(0,Dn.A)().m(function n(){var r,i,o,a,s,u,c,l,A,f,d=this;return(0,Dn.A)().w(function(n){for(;;)switch(n.n){case 0:if(i=this.context.model,o=pb(i.getComboData([t])[0]),this.computeStyle("expand"),a=this.computeChangesAndDrawData({stage:"expand",animation:e})){n.n=1;break}return n.a(2);case 1:return s=a.dataChanges,u=a.drawData,c=u.add,l=u.update,A={animation:e,stage:"expand",data:u,target:t},this.createElements(c,A),this.updateElements(l,A),f=function(t){return Array.from(t).map(function(t){return Sm(v(t,2)[1])})},n.n=2,null===(r=this.context.animation.animate(e,{before:function(){return d.emit(new X_(ry.BEFORE_DRAW,{dataChanges:s,animation:e}),A)},beforeAnimate:function(t){return d.emit(new q_(ry.BEFORE_ANIMATE,Zg.EXPAND,t,u),A)},afterAnimate:function(t){return d.emit(new q_(ry.AFTER_ANIMATE,Zg.EXPAND,t,u),A)},after:function(){return d.emit(new X_(ry.AFTER_DRAW,{dataChanges:s,animation:e}),A)}},{expand:{target:t,descendants:[].concat(O(f(c.nodes)),O(f(c.combos))),position:o}}))||void 0===r?void 0:r.finished;case 2:return n.a(2)}},n,this)}))}},{key:"clear",value:function(){this.container.destroy(),this.initContainer(),this.elementMap={},this.shapeTypeMap={},this.defaultStyle={},this.stateStyle={},this.paletteStyle={}}},{key:"destroy",value:function(){this.clear(),this.container.destroy(),this.context={}}}])}(),gQ=Symbol("Comlink.proxy"),yQ=Symbol("Comlink.endpoint"),mQ=Symbol("Comlink.releaseProxy"),bQ=Symbol("Comlink.finalizer"),wQ=Symbol("Comlink.thrown"),xQ=function(t){return"object"==typeof t&&null!==t||"function"==typeof t},EQ={canHandle:function(t){return xQ(t)&&wQ in t},serialize:function(t){var e=t.value;return[e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[]]},deserialize:function(t){if(t.isError)throw Object.assign(new Error(t.value.message),t.value);throw t.value}},BQ=new Map([["proxy",{canHandle:function(t){return xQ(t)&&t[gQ]},serialize:function(t){var e=new MessageChannel,n=e.port1,r=e.port2;return kQ(t,n),[r,[r]]},deserialize:function(t){return t.start(),CQ(t)}}],["throw",EQ]]);function kQ(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:globalThis,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["*"];e.addEventListener("message",function r(i){if(i&&i.data)if(function(t,e){var n,r=qn(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(e===i||"*"===i)return!0;if(i instanceof RegExp&&i.test(e))return!0}}catch(t){r.e(t)}finally{r.f()}return!1}(n,i.origin)){var o,a=Object.assign({path:[]},i.data),s=a.id,u=a.type,c=a.path,l=(i.data.argumentList||[]).map(_Q);try{var A=c.slice(0,-1).reduce(function(t,e){return t[e]},t),f=c.reduce(function(t,e){return t[e]},t);switch(u){case"GET":o=f;break;case"SET":A[c.slice(-1)[0]]=_Q(i.data.value),o=!0;break;case"APPLY":o=f.apply(A,l);break;case"CONSTRUCT":var d;o=function(t){return Object.assign(t,m({},gQ,!0))}(_N(f,O(l)));break;case"ENDPOINT":var h=new MessageChannel,p=h.port1,g=h.port2;kQ(t,g),o=function(t,e){return NQ.set(t,e),t}(p,[p]);break;case"RELEASE":o=void 0;break;default:return}}catch(d){o=m({value:d},wQ,0)}Promise.resolve(o).catch(function(t){return m({value:t},wQ,0)}).then(function(n){var i=v(LQ(n),2),o=i[0],a=i[1];e.postMessage(Object.assign(Object.assign({},o),{id:s}),a),"RELEASE"===u&&(e.removeEventListener("message",r),OQ(e),bQ in t&&"function"==typeof t[bQ]&&t[bQ]())}).catch(function(t){var n=v(LQ(m({value:new TypeError("Unserializable return value")},wQ,0)),2),r=n[0],i=n[1];e.postMessage(Object.assign(Object.assign({},r),{id:s}),i)})}else console.warn("Invalid origin '".concat(i.origin,"' for comlink proxy"))}),e.start&&e.start()}function OQ(t){(function(t){return"MessagePort"===t.constructor.name})(t)&&t.close()}function CQ(t,e){var n=new Map;return t.addEventListener("message",function(t){var e=t.data;if(e&&e.id){var r=n.get(e.id);if(r)try{r(e)}finally{n.delete(e.id)}}}),PQ(t,n,[],e)}function MQ(t){if(t)throw new Error("Proxy has been released and is not useable")}function SQ(t){return QQ(t,new Map,{type:"RELEASE"}).then(function(){OQ(t)})}var FQ=new WeakMap,TQ="FinalizationRegistry"in globalThis&&new FinalizationRegistry(function(t){var e=(FQ.get(t)||0)-1;FQ.set(t,e),0===e&&SQ(t)});function PQ(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=!1,i=new Proxy(arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},{get:function(o,a){if(MQ(r),a===mQ)return function(){!function(t){TQ&&TQ.unregister(t)}(i),SQ(t),e.clear(),r=!0};if("then"===a){if(0===n.length)return{then:function(){return i}};var s=QQ(t,e,{type:"GET",path:n.map(function(t){return t.toString()})}).then(_Q);return s.then.bind(s)}return PQ(t,e,[].concat(O(n),[a]))},set:function(i,o,a){MQ(r);var s=v(LQ(a),2),u=s[0],c=s[1];return QQ(t,e,{type:"SET",path:[].concat(O(n),[o]).map(function(t){return t.toString()}),value:u},c).then(_Q)},apply:function(i,o,a){MQ(r);var s=n[n.length-1];if(s===yQ)return QQ(t,e,{type:"ENDPOINT"}).then(_Q);if("bind"===s)return PQ(t,e,n.slice(0,-1));var u=v(IQ(a),2),c=u[0],l=u[1];return QQ(t,e,{type:"APPLY",path:n.map(function(t){return t.toString()}),argumentList:c},l).then(_Q)},construct:function(i,o){MQ(r);var a=v(IQ(o),2),s=a[0],u=a[1];return QQ(t,e,{type:"CONSTRUCT",path:n.map(function(t){return t.toString()}),argumentList:s},u).then(_Q)}});return function(t,e){var n=(FQ.get(e)||0)+1;FQ.set(e,n),TQ&&TQ.register(t,e,t)}(i,t),i}function IQ(t){var e,n=t.map(LQ);return[n.map(function(t){return t[0]}),(e=n.map(function(t){return t[1]}),Array.prototype.concat.apply([],e))]}var NQ=new WeakMap;function LQ(t){var e,n=qn(BQ);try{for(n.s();!(e=n.n()).done;){var r=v(e.value,2),i=r[0],o=r[1];if(o.canHandle(t)){var a=v(o.serialize(t),2);return[{type:"HANDLER",name:i,value:a[0]},a[1]]}}}catch(t){n.e(t)}finally{n.f()}return[{type:"RAW",value:t},NQ.get(t)||[]]}function _Q(t){switch(t.type){case"HANDLER":return BQ.get(t.name).deserialize(t.value);case"RAW":return t.value}}function QQ(t,e,n,r){return new Promise(function(i){var o=new Array(4).fill(0).map(function(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)}).join("-");e.set(o,i),t.start&&t.start(),t.postMessage(Object.assign({id:o},n),r)})}var UQ=function(t){function e(t,n,r){var i;return x(this,e),(i=F(this,e)).graph=t,i.layout=n,i.options=r,i.spawnWorker(),i}return P(e,t),B(e,[{key:"spawnWorker",value:function(){this.proxy=CQ(new Worker(new URL(c.p+c.u(683),c.b),{type:void 0})),this.running&&(this.running=!1,this.execute())}},{key:"execute",value:function(){var t;return xe(this,void 0,void 0,(0,Dn.A)().m(function e(){var n,r,i,o,a,s,u,c;return(0,Dn.A)().w(function(e){for(;;)switch(e.n){case 0:if(!this.running){e.n=1;break}return e.a(2,this);case 1:return this.running=!0,(n=this.layout.options).onTick,r=we(n,["onTick"]),i={},Object.keys(r).forEach(function(t){mn(r[t])||(i[t]=r[t])}),o={layout:{id:this.layout.id,options:i,iterations:null===(t=this.options)||void 0===t?void 0:t.iterations},nodes:this.graph.getAllNodes(),edges:this.graph.getAllEdges()},a=new Float32Array([0]),e.n=2,this.proxy.calculateLayout(o,[a]);case 2:return s=e.v,u=v(s,1),c=u[0],e.a(2,c)}},e,this)}))}},{key:"stop",value:function(){return this.running=!1,this.proxy.stopLayout(),this}},{key:"kill",value:function(){this.proxy[mQ]()}},{key:"isRunning",value:function(){return this.running}}])}(gB),jQ=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())})},DQ=function(){return B(function t(e){x(this,t),this.instances=[],this.context=e},[{key:"presetOptions",get:function(){return{animation:!!xy(this.context.options,!0)}}},{key:"options",get:function(){return this.context.options.layout}},{key:"getLayoutInstance",value:function(){return this.instances}},{key:"preLayout",value:function(t){return jQ(this,void 0,void 0,(0,Dn.A)().m(function e(){var n,r,i,o,a,s,u,c,l;return(0,Dn.A)().w(function(e){for(;;)switch(e.n){case 0:return a=this.context,s=a.graph,u=a.model,c=t.add,$_(s,new X_(ry.BEFORE_LAYOUT,{type:"pre"})),e.n=1,null===(n=this.context.layout)||void 0===n?void 0:n.simulate();case 1:l=e.v,null===(r=null==l?void 0:l.nodes)||void 0===r||r.forEach(function(t){var e=Sm(t),n=c.nodes.get(e);u.syncNodeLikeDatum(t),n&&Object.assign(n.style,t.style)}),null===(i=null==l?void 0:l.edges)||void 0===i||i.forEach(function(t){var e=Sm(t),n=c.edges.get(e);u.syncEdgeDatum(t),n&&Object.assign(n.style,t.style)}),null===(o=null==l?void 0:l.combos)||void 0===o||o.forEach(function(t){var e=Sm(t),n=c.combos.get(e);u.syncNodeLikeDatum(t),n&&Object.assign(n.style,t.style)}),$_(s,new X_(ry.AFTER_LAYOUT,{type:"pre"})),this.transformDataAfterLayout("pre",t);case 2:return e.a(2)}},e,this)}))}},{key:"postLayout",value:function(){return jQ(this,arguments,void 0,function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options;return(0,Dn.A)().m(function n(){var r,i,o,a,s,u,c;return(0,Dn.A)().w(function(n){for(;;)switch(n.n){case 0:if(e){n.n=1;break}return n.a(2);case 1:r=Array.isArray(e)?e:[e],$_(i=t.context.graph,new X_(ry.BEFORE_LAYOUT,{type:"post"})),o=0;case 2:if(!(o<r.length)){n.n=5;break}return a=r[o],s=t.getLayoutData(a),u=Object.assign(Object.assign({},t.presetOptions),a),$_(i,new X_(ry.BEFORE_STAGE_LAYOUT,{options:u,index:o})),n.n=3,t.stepLayout(s,u,o);case 3:c=n.v,$_(i,new X_(ry.AFTER_STAGE_LAYOUT,{options:u,index:o})),a.animation||t.updateElementPosition(c,!1);case 4:o++,n.n=2;break;case 5:$_(i,new X_(ry.AFTER_LAYOUT,{type:"post"})),t.transformDataAfterLayout("post");case 6:return n.a(2)}},n)})()})}},{key:"transformDataAfterLayout",value:function(t,e){var n=this.context.transform.getTransformInstance();Object.values(n).forEach(function(n){return n.afterLayout(t,e)})}},{key:"simulate",value:function(){return jQ(this,void 0,void 0,(0,Dn.A)().m(function t(){var e,n,r,i,o,a;return(0,Dn.A)().w(function(t){for(;;)switch(t.n){case 0:if(this.options){t.n=1;break}return t.a(2,{});case 1:e=Array.isArray(this.options)?this.options:[this.options],n={},r=0;case 2:if(!(r<e.length)){t.n=5;break}return i=e[r],o=this.getLayoutData(i),t.n=3,this.stepLayout(o,Object.assign(Object.assign(Object.assign({},this.presetOptions),i),{animation:!1}),r);case 3:a=t.v,n=a;case 4:r++,t.n=2;break;case 5:return t.a(2,n)}},t,this)}))}},{key:"stepLayout",value:function(t,e,n){return jQ(this,void 0,void 0,(0,Dn.A)().m(function r(){return(0,Dn.A)().w(function(r){for(;;)switch(r.n){case 0:if(!BB(e)){r.n=2;break}return r.n=1,this.treeLayout(t,e,n);case 1:case 3:return r.a(2,r.v);case 2:return r.n=3,this.graphLayout(t,e,n)}},r,this)}))}},{key:"graphLayout",value:function(t,e,n){return jQ(this,void 0,void 0,(0,Dn.A)().m(function r(){var i,o,a,s,u,c,l,A,f,d=this;return(0,Dn.A)().w(function(r){for(;;)switch(r.n){case 0:if(i=e.animation,o=e.enableWorker,a=e.iterations,s=void 0===a?300:a,u=this.initGraphLayout(e)){r.n=1;break}return r.a(2,{});case 1:if(this.instances[n]=u,this.instance=u,!o){r.n=3;break}return c=u,this.supervisor=new UQ(c.graphData2LayoutModel(t),c.instance,{iterations:s}),f=OB,r.n=2,this.supervisor.execute();case 2:return r.a(2,f(r.v));case 3:if(!BC(u)){r.n=6;break}if(!i){r.n=5;break}return r.n=4,u.execute(t,{onTick:function(t){d.updateElementPosition(t,!1)}});case 4:return r.a(2,r.v);case 5:return u.execute(t),u.stop(),r.a(2,u.tick(s));case 6:return r.n=7,u.execute(t);case 7:if(l=r.v,!i){r.n=8;break}return A=this.updateElementPosition(l,i),r.n=8,null==A?void 0:A.finished;case 8:return r.a(2,l)}},r,this)}))}},{key:"treeLayout",value:function(t,e,n){return jQ(this,void 0,void 0,(0,Dn.A)().m(function n(){var r,i,o,a,s,u,c,l,A,f,d,h;return(0,Dn.A)().w(function(n){for(;;)switch(n.n){case 0:if(r=e.type,i=e.animation,o=fy("layout",r)){n.n=1;break}return n.a(2,{});case 1:if(a=t.nodes,s=void 0===a?[]:a,u=t.edges,c=void 0===u?[]:u,l=new xB({nodes:s.map(function(t){return{id:Sm(t),data:t.data||{}}}),edges:c.map(function(t){return{id:Sm(t),source:t.source,target:t.target,data:t.data||{}}})}),dQ(l),A={nodes:[],edges:[]},f={nodes:[],edges:[]},l.getRoots(ly).forEach(function(t){Ub(t,function(t){t.children=l.getSuccessors(t.id)},function(t){return l.getSuccessors(t.id)},"TB");var n=o(t,e),r=n.x,i=n.y,a=n.z,s=void 0===a?0:a;Ub(n,function(t){var e=t.id,n=t.x,o=t.y,a=t.z,u=void 0===a?0:a;A.nodes.push({id:e,style:{x:r,y:i,z:s}}),f.nodes.push({id:e,style:{x:n,y:o,z:u}})},function(t){return t.children},"TB")}),d=this.inferTreeLayoutOffset(f),RQ(f,d),!i){n.n=2;break}return RQ(A,d),this.updateElementPosition(A,!1),h=this.updateElementPosition(f,i),n.n=2,null==h?void 0:h.finished;case 2:return n.a(2,f)}},n,this)}))}},{key:"inferTreeLayoutOffset",value:function(t){var e,n=1/0,r=-1/0,i=1/0,o=-1/0;null===(e=t.nodes)||void 0===e||e.forEach(function(t){var e=t.style||{},a=e.x,s=void 0===a?0:a,u=e.y,c=void 0===u?0:u;n=Math.min(n,s),r=Math.max(r,s),i=Math.min(i,c),o=Math.max(o,c)});var a=this.context.canvas,s=a.getSize(),u=v(a.getCanvasByViewport([0,0]),2),c=u[0],l=u[1],A=v(a.getCanvasByViewport(s),2),f=A[0],d=A[1];return n>=c&&r<=f&&i>=l&&o<=d?[0,0]:[(c+f)/2-(n+r)/2,(l+d)/2-(i+o)/2]}},{key:"stopLayout",value:function(){this.instance&&BC(this.instance)&&(this.instance.stop(),this.instance=void 0),this.supervisor&&(this.supervisor.stop(),this.supervisor=void 0),this.animationResult&&(this.animationResult.finish(),this.animationResult=void 0)}},{key:"getLayoutData",value:function(t){var e=t.nodeFilter,n=void 0===e?function(){return!0}:e,r=t.comboFilter,i=void 0===r?function(){return!0}:r,o=t.preLayout,a=void 0!==o&&o,s=t.isLayoutInvisibleNodes,u=void 0!==s&&s,c=this.context.model.getData(),l=c.nodes,A=c.edges,f=c.combos,d=this.context,h=d.element,p=d.model,v=function(t){return h.getElement(t)},g=a?function(t){var e;if(!u){if("hidden"===(null===(e=t.style)||void 0===e?void 0:e.visibility))return!1;if(p.getAncestorsData(t.id,ly).some(Kb))return!1;if(p.getAncestorsData(t.id,cy).some(Kb))return!1}return n(t)}:function(t){var e=Sm(t),r=v(e);return!!r&&!oB(r)&&n(t)},y=l.filter(g),m=f.filter(i),b=new Map(y.map(function(t){return[Sm(t),t]}));return m.forEach(function(t){return b.set(Sm(t),t)}),{nodes:y,edges:A.filter(function(t){var e=t.source,n=t.target;return b.has(e)&&b.has(n)}),combos:m}}},{key:"initGraphLayout",value:function(t){var e,n=this.context,r=n.element,i=n.viewport,o=t.type,a=(t.enableWorker,t.animation,t.iterations,function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["type","enableWorker","animation","iterations"])),s=v(i.getCanvasSize(),2),u=s[0],c=s[1],l=[u/2,c/2],A=null!==(e=null==t?void 0:t.nodeSize)&&void 0!==e?e:function(t){var e=null==r?void 0:r.getElement(t.id);return e?e.attributes.size:null==r?void 0:r.getElementComputedStyle("node",t).size},f=fy("layout",o);if(!f)return gy.warn("The layout of ".concat(o," is not registered."));var d=Object.getPrototypeOf(f.prototype)===EB.prototype?f:function(t,e){var n=function(n){function r(e,n){var i;if(x(this,r),(i=F(this,r,[e,n])).instance=new t({}),i.id=i.instance.id,"stop"in i.instance&&"tick"in i.instance){var o=i.instance;i.stop=o.stop.bind(o),i.tick=function(t){return OB(o.tick(t))}}return i}return P(r,n),B(r,[{key:"execute",value:function(t,e){return n=this,r=void 0,i=void 0,o=(0,Dn.A)().m(function n(){var r;return(0,Dn.A)().w(function(n){for(;;)switch(n.n){case 0:return r=OB,n.n=1,this.instance.execute(this.graphData2LayoutModel(t),this.transformOptions(Xm({},this.options,e)));case 1:return n.a(2,r(n.v))}},n,this)}),new(i||(i=Promise))(function(t,e){function a(t){try{u(o.next(t))}catch(t){e(t)}}function s(t){try{u(o.throw(t))}catch(t){e(t)}}function u(e){e.done?t(e.value):function(t){return t instanceof i?t:new i(function(e){e(t)})}(e.value).then(a,s)}u((o=o.apply(n,r||[])).next())});var n,r,i,o}},{key:"transformOptions",value:function(t){if(!("onTick"in t))return t;var e=t.onTick;return t.onTick=function(t){return e(OB(t))},t}},{key:"graphData2LayoutModel",value:function(t){var n=t.nodes,r=void 0===n?[]:n,i=t.edges,o=void 0===i?[]:i,a=t.combos,s=void 0===a?[]:a,u=r.map(function(t){var e=Sm(t),n=t.data,r=t.style,i=t.combo,o=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["data","style","combo"]),a={id:e,data:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n),{data:n}),i?{parentId:i}:{}),{style:r}),o)};return(null==r?void 0:r.x)&&Object.assign(a.data,{x:r.x}),(null==r?void 0:r.y)&&Object.assign(a.data,{y:r.y}),(null==r?void 0:r.z)&&Object.assign(a.data,{z:r.z}),a}),c=new Map(u.map(function(t){return[t.id,t]})),l=o.filter(function(t){var e=t.source,n=t.target;return c.has(e)&&c.has(n)}).map(function(t){var e=t.source,n=t.target,r=t.data,i=t.style;return{id:Sm(t),source:e,target:n,data:Object.assign({},r),style:Object.assign({},i)}}),A=s.map(function(t){return{id:Sm(t),data:Object.assign({_isCombo:!0},t.data),style:Object.assign({},t.style)}}),f=new xB({nodes:[].concat(O(u),O(A)),edges:l});return e.model.model.hasTreeStructure(cy)&&(f.attachTreeStructure(cy),u.forEach(function(t){var n=e.model.model.getParent(t.id,cy);n&&f.hasNode(n.id)&&f.setParent(t.id,n.id,cy)})),f}}])}(EB);return n}(f,this.context),h=new d(this.context),p={nodeSize:A,width:u,height:c,center:l};switch(h.id){case"d3-force":case"d3-force-3d":Object.assign(p,{center:{x:u/2,y:c/2,z:0}})}return Xm(h.options,p,a),h}},{key:"updateElementPosition",value:function(t,e){var n=this.context,r=n.model,i=n.element;return i?(r.updateData(t),i.draw({animation:e,silence:!0})):null}},{key:"destroy",value:function(){var t;this.stopLayout(),this.context={},null===(t=this.supervisor)||void 0===t||t.kill(),this.supervisor=void 0,this.instance=void 0,this.instances=[],this.animationResult=void 0}}])}(),RQ=function(t,e){var n,r=v(e,2),i=r[0],o=r[1];null===(n=t.nodes)||void 0===n||n.forEach(function(t){if(t.style){var e=t.style,n=e.x,r=void 0===n?0:n,a=e.y,s=void 0===a?0:a;t.style.x=r+i,t.style.y=s+o}else t.style={x:i,y:o}})};function HQ(t){return t.layout?(Array.isArray(t.layout)||"preLayout"in t.layout||["antv-dagre","combo-combined","compact-box","circular","concentric","dagre","fishbone","grid","indented","mds","radial","random","snake","dendrogram","mindmap"].includes(t.layout.type)&&(t.layout.preLayout=!0),t):t}var zQ=function(t){function e(t){var n;return x(this,e),(n=F(this,e,[t])).category="plugin",n.setPlugins(n.context.options.plugins||[]),n}return P(e,t),B(e,[{key:"setPlugins",value:function(t){this.setExtensions(t)}},{key:"getPluginInstance",value:function(t){var e=this.extensionMap[t];if(e)return e;gy.warn("Cannot find the plugin ".concat(t,", will try to find it by type."));var n=this.extensions.find(function(e){return e.type===t});return n?this.extensionMap[n.key]:void 0}}])}(Hm),KQ=["update-related-edges","collapse-expand-node","collapse-expand-combo","get-edge-actual-ends","arrange-draw-order"],GQ=function(t){function e(t){var n;return x(this,e),(n=F(this,e,[t])).category="transform",n.setTransforms(n.context.options.transforms||[]),n}return P(e,t),B(e,[{key:"getTransforms",value:function(){}},{key:"setTransforms",value:function(t){this.setExtensions([].concat(O(KQ.slice(0,KQ.length-1)),O(t),[KQ[KQ.length-1]]))}},{key:"getTransformInstance",value:function(t){return t?this.extensionMap[t]:this.extensionMap}}])}(Hm),VQ=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())})},WQ=function(){return B(function t(e){x(this,t),this.landmarkCounter=0,this.context=e;var n=v(this.paddingOffset,2),r=n[0],i=n[1],o=e.options,a=o.zoom,s=o.rotation,u=o.x,c=void 0===u?r:u,l=o.y,A=void 0===l?i:l;this.transform({mode:"absolute",scale:a,translate:[c,A],rotate:s},!1)},[{key:"padding",get:function(){return Uy(this.context.options.padding)}},{key:"paddingOffset",get:function(){var t=v(this.padding,4),e=t[0],n=t[1],r=t[2];return[(t[3]-n)/2,(e-r)/2,0]}},{key:"camera",get:function(){var t=this.context.canvas;return new Proxy(t.getCamera(),{get:function(e,n){var r=Object.entries(t.getLayers()).filter(function(t){var e=v(t,1)[0];return!["main"].includes(e)}),i=r.map(function(t){return v(t,2)[1].getCamera()}),o=e[n];if("function"==typeof o)return function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var s=o.apply(e,r);return i.forEach(function(t){t[n].apply(t,r)}),s}}})}},{key:"createLandmark",value:function(t){return this.camera.createLandmark("landmark-".concat(this.landmarkCounter++),t)}},{key:"getAnimation",value:function(t){var e=xy(this.context.options,t);return!!e&&Ux(Object.assign({},e),["easing","duration"])}},{key:"getCanvasSize",value:function(){var t=this.context.canvas.getConfig(),e=t.width,n=void 0===e?0:e,r=t.height;return[n,void 0===r?0:r]}},{key:"getCanvasCenter",value:function(){var t=this.context.canvas.getConfig(),e=t.width,n=void 0===e?0:e,r=t.height;return[n/2,(void 0===r?0:r)/2,0]}},{key:"getViewportCenter",value:function(){var t=v(this.camera.getPosition(),2);return[t[0],t[1],0]}},{key:"getGraphCenter",value:function(){return this.context.graph.getViewportByCanvas(this.getCanvasCenter())}},{key:"getZoom",value:function(){return this.camera.getZoom()}},{key:"getRotation",value:function(){return this.camera.getRoll()}},{key:"getTranslateOptions",value:function(t){var e=this.camera,n=t.mode,r=t.translate,i=void 0===r?[]:r,o=this.getZoom(),a=e.getPosition(),s=e.getFocalPoint(),u=v(this.getCanvasCenter(),2),c=u[0],l=u[1],A=v(i,3),f=A[0],d=void 0===f?0:f,h=A[1],p=void 0===h?0:h,g=A[2],y=tb([-d,-p,-(void 0===g?0:g)],o);return"relative"===n?{position:Zm(a,y),focalPoint:Zm(s,y)}:{position:Zm([c,l,a[2]],y),focalPoint:Zm([c,l,s[2]],y)}}},{key:"getRotateOptions",value:function(t){var e=t.mode,n=t.rotate,r=void 0===n?0:n;return{roll:"relative"===e?this.camera.getRoll()+r:r}}},{key:"getZoomOptions",value:function(t){var e=this.context.options.zoomRange,n=this.camera.getZoom(),r=t.mode,i=t.scale,o=void 0===i?1:i;return ge.apply(void 0,["relative"===r?n*o:o].concat(O(e)))}},{key:"transform",value:function(t,e){return VQ(this,void 0,void 0,(0,Dn.A)().m(function n(){var r,i,o,a,s,u,c,l=this;return(0,Dn.A)().w(function(n){for(;;)switch(n.n){case 0:if(r=this.context.graph,i=t.translate,o=t.rotate,a=t.scale,s=t.origin,this.cancelAnimation(),u=this.getAnimation(e),$_(r,new J_(ry.BEFORE_TRANSFORM,t)),o||!a||i||!s||u){n.n=1;break}return this.camera.setZoomByViewportPoint(this.getZoomOptions(t),s),$_(r,new J_(ry.AFTER_TRANSFORM,t)),n.a(2);case 1:if(c={},i&&Object.assign(c,this.getTranslateOptions(t)),de(o)&&Object.assign(c,this.getRotateOptions(t)),de(a)&&Object.assign(c,{zoom:this.getZoomOptions(t)}),!u){n.n=2;break}return $_(r,new q_(ry.BEFORE_ANIMATE,Zg.TRANSFORM,null,t)),n.a(2,new Promise(function(e){l.transformResolver=e,l.camera.gotoLandmark(l.createLandmark(c),Object.assign(Object.assign({},u),{onfinish:function(){$_(r,new q_(ry.AFTER_ANIMATE,Zg.TRANSFORM,null,t)),$_(r,new J_(ry.AFTER_TRANSFORM,t)),l.transformResolver=void 0,e()}}))}));case 2:this.camera.gotoLandmark(this.createLandmark(c),{duration:0}),$_(r,new J_(ry.AFTER_TRANSFORM,t));case 3:return n.a(2)}},n,this)}))}},{key:"fitView",value:function(t,e){return VQ(this,void 0,void 0,(0,Dn.A)().m(function n(){var r,i,o,a,s,u,c,l,A,f,d,h,p,g,y,m,b,w,x,E,B,k,O,C,M,S,F;return(0,Dn.A)().w(function(n){for(;;)switch(n.n){case 0:if(r=v(this.padding,4),i=r[0],o=r[1],a=r[2],s=r[3],c=(u=t||{}).when,l=void 0===c?"always":c,A=u.direction,f=void 0===A?"both":A,d=this.context.canvas.getSize(),h=v(d,2),p=h[0],g=h[1],y=p-s-o,m=g-i-a,b=this.context.canvas.getBounds(),w=this.getBBoxInViewport(b),x=Hy(w),E=v(x,2),B=E[0],k=E[1],O="x"===f&&B>=y||"y"===f&&k>=m||"both"===f&&B>=y&&k>=m,"overflow"!==l||O){n.n=2;break}return n.n=1,this.fitCenter({animation:e});case 1:return n.a(2,n.v);case 2:if(C=y/B,M=m/k,S="x"===f?C:"y"===f?M:Math.min(C,M),F=this.getAnimation(e),Number.isFinite(S)){n.n=3;break}return n.a(2);case 3:return n.n=4,this.transform({mode:"relative",scale:S,translate:Zm(Jm(this.getCanvasCenter(),this.getBBoxInViewport(b).center),tb(this.paddingOffset,S))},F);case 4:return n.a(2)}},n,this)}))}},{key:"fitCenter",value:function(t){return VQ(this,void 0,void 0,(0,Dn.A)().m(function e(){var n;return(0,Dn.A)().w(function(e){for(;;)switch(e.n){case 0:return n=this.context.canvas.getBounds(),e.n=1,this.focus(n,t);case 1:return e.a(2)}},e,this)}))}},{key:"focusElements",value:function(t){return VQ(this,arguments,void 0,function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,Dn.A)().m(function r(){var i,o,a;return(0,Dn.A)().w(function(r){for(;;)switch(r.n){case 0:if(i=e.context.element){r.n=1;break}return r.a(2);case 1:return o=function(t){return n.shapes?t.getShape(n.shapes).getRenderBounds():t.getRenderBounds()},a=Vy(t.map(function(t){return o(i.getElement(t))})),r.n=2,e.focus(a,n);case 2:return r.a(2)}},r)})()})}},{key:"focus",value:function(t,e){return VQ(this,void 0,void 0,(0,Dn.A)().m(function n(){var r,i,o;return(0,Dn.A)().w(function(n){for(;;)switch(n.n){case 0:return r=this.context.graph.getViewportByCanvas(t.center),i=e.position||this.getCanvasCenter(),o=Jm(i,r),n.n=1,this.transform({mode:"relative",translate:Zm(o,this.paddingOffset)},e.animation);case 1:return n.a(2)}},n,this)}))}},{key:"getBBoxInViewport",value:function(t){var e=t.min,n=t.max,r=this.context.graph,i=v(r.getViewportByCanvas(e),2),o=i[0],a=i[1],s=v(r.getViewportByCanvas(n),2),u=s[0],c=s[1],l=new ar;return l.setMinMax([o,a,0],[u,c,0]),l}},{key:"isInViewport",value:function(t){var e,n,r,i,o,a,s,u,c,l,A,f,d,h,p=arguments.length>1&&void 0!==arguments[1]&&arguments[1],g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,y=this.context.graph,m=this.getCanvasSize(),b=v(y.getCanvasByViewport([0,0]),2),w=b[0],x=b[1],E=v(y.getCanvasByViewport(m),2),B=E[0],k=E[1],O=new ar;return O.setMinMax([w,x,0],[B,k,0]),g&&(O=Gy(O,g)),_y(t)?Wy(t,O):p?(n=O,i=(r=v((e=t).min,2))[0],o=r[1],s=(a=v(e.max,2))[0],u=a[1],l=(c=v(n.min,2))[0],A=c[1],d=(f=v(n.max,2))[0],h=f[1],i>=l&&s<=d&&o>=A&&u<=h):O.intersects(t)}},{key:"cancelAnimation",value:function(){var t,e;(null===(t=this.camera.landmarks)||void 0===t?void 0:t.length)&&this.camera.cancelLandmarkAnimation(),null===(e=this.transformResolver)||void 0===e||e.call(this)}}])}(),YQ=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())})},XQ=function(t){function e(t){var n,r;return x(this,e),(n=F(this,e)).options={},n.rendered=!1,n.destroyed=!1,n.context={model:new hQ},n.isCollapsingExpanding=!1,n.onResize=AB(function(){n.resize()},300),n._setOptions(Object.assign({},e.defaultOptions,t),!0),n.context.graph=n,n.options.autoResize&&(null===(r=globalThis.addEventListener)||void 0===r||r.call(globalThis,"resize",n.onResize)),n}return P(e,t),B(e,[{key:"getOptions",value:function(){return this.options}},{key:"setOptions",value:function(t){this._setOptions(t,!1)}},{key:"_setOptions",value:function(t,e){if(this.updateCanvas(t),Object.assign(this.options,function(t){return[HQ].reduce(function(t,e){return e(t)},t)}(t)),e){var n=t.data;n&&this.addData(n)}else{var r=t.behaviors,i=t.combo,o=t.data,a=t.edge,s=t.layout,u=t.node,c=t.plugins,l=t.theme,A=t.transforms;r&&this.setBehaviors(r),o&&this.setData(o),u&&this.setNode(u),a&&this.setEdge(a),i&&this.setCombo(i),s&&this.setLayout(s),l&&this.setTheme(l),c&&this.setPlugins(c),A&&this.setTransforms(A)}}},{key:"getSize",value:function(){return this.context.canvas?this.context.canvas.getSize():[this.options.width||0,this.options.height||0]}},{key:"setSize",value:function(t,e){t&&(this.options.width=t),e&&(this.options.height=e),this.resize(t,e)}},{key:"setZoomRange",value:function(t){this.options.zoomRange=t}},{key:"getZoomRange",value:function(){return this.options.zoomRange}},{key:"setNode",value:function(t){this.options.node=t,this.context.model.refreshData()}},{key:"setEdge",value:function(t){this.options.edge=t,this.context.model.refreshData()}},{key:"setCombo",value:function(t){this.options.combo=t,this.context.model.refreshData()}},{key:"getTheme",value:function(){return this.options.theme}},{key:"setTheme",value:function(t){this.options.theme=mn(t)?t(this.getTheme()):t}},{key:"setLayout",value:function(t){this.options.layout=mn(t)?t(this.getLayout()):t}},{key:"getLayout",value:function(){return this.options.layout}},{key:"setBehaviors",value:function(t){var e;this.options.behaviors=mn(t)?t(this.getBehaviors()):t,null===(e=this.context.behavior)||void 0===e||e.setBehaviors(this.options.behaviors)}},{key:"updateBehavior",value:function(t){this.setBehaviors(function(e){return e.map(function(e){return"object"==typeof e&&e.key===t.key?Object.assign(Object.assign({},e),t):e})})}},{key:"getBehaviors",value:function(){return this.options.behaviors||[]}},{key:"setPlugins",value:function(t){var e;this.options.plugins=mn(t)?t(this.getPlugins()):t,null===(e=this.context.plugin)||void 0===e||e.setPlugins(this.options.plugins)}},{key:"updatePlugin",value:function(t){this.setPlugins(function(e){return e.map(function(e){return"object"==typeof e&&e.key===t.key?Object.assign(Object.assign({},e),t):e})})}},{key:"getPlugins",value:function(){return this.options.plugins||[]}},{key:"getPluginInstance",value:function(t){return this.context.plugin.getPluginInstance(t)}},{key:"setTransforms",value:function(t){var e;this.options.transforms=mn(t)?t(this.getTransforms()):t,null===(e=this.context.transform)||void 0===e||e.setTransforms(this.options.transforms)}},{key:"updateTransform",value:function(t){this.setTransforms(function(e){return e.map(function(e){return"object"==typeof e&&e.key===t.key?Object.assign(Object.assign({},e),t):e})}),this.context.model.refreshData()}},{key:"getTransforms",value:function(){return this.options.transforms||[]}},{key:"getData",value:function(){return this.context.model.getData()}},{key:"hasNode",value:function(t){return this.context.model.hasNode(t)}},{key:"hasEdge",value:function(t){return this.context.model.hasEdge(t)}},{key:"hasCombo",value:function(t){return this.context.model.hasCombo(t)}},{key:"getElementData",value:function(t){var e=this;return Array.isArray(t)?t.map(function(t){return e.context.model.getElementDataById(t)}):this.context.model.getElementDataById(t)}},{key:"getNodeData",value:function(t){return void 0===t?this.context.model.getNodeData():Array.isArray(t)?this.context.model.getNodeData(t):this.context.model.getNodeLikeDatum(t)}},{key:"getEdgeData",value:function(t){return void 0===t?this.context.model.getEdgeData():Array.isArray(t)?this.context.model.getEdgeData(t):this.context.model.getEdgeDatum(t)}},{key:"getComboData",value:function(t){return void 0===t?this.context.model.getComboData():Array.isArray(t)?this.context.model.getComboData(t):this.context.model.getNodeLikeDatum(t)}},{key:"setData",value:function(t){this.context.model.setData(mn(t)?t(this.getData()):t)}},{key:"addData",value:function(t){this.context.model.addData(mn(t)?t(this.getData()):t)}},{key:"addNodeData",value:function(t){this.context.model.addNodeData(mn(t)?t(this.getNodeData()):t)}},{key:"addEdgeData",value:function(t){this.context.model.addEdgeData(mn(t)?t(this.getEdgeData()):t)}},{key:"addComboData",value:function(t){this.context.model.addComboData(mn(t)?t(this.getComboData()):t)}},{key:"addChildrenData",value:function(t,e){this.context.model.addChildrenData(t,e)}},{key:"updateData",value:function(t){this.context.model.updateData(mn(t)?t(this.getData()):t)}},{key:"updateNodeData",value:function(t){this.context.model.updateNodeData(mn(t)?t(this.getNodeData()):t)}},{key:"updateEdgeData",value:function(t){this.context.model.updateEdgeData(mn(t)?t(this.getEdgeData()):t)}},{key:"updateComboData",value:function(t){this.context.model.updateComboData(mn(t)?t(this.getComboData()):t)}},{key:"removeData",value:function(t){this.context.model.removeData(mn(t)?t(this.getData()):t)}},{key:"removeNodeData",value:function(t){this.context.model.removeNodeData(mn(t)?t(this.getNodeData()):t)}},{key:"removeEdgeData",value:function(t){this.context.model.removeEdgeData(mn(t)?t(this.getEdgeData()):t)}},{key:"removeComboData",value:function(t){this.context.model.removeComboData(mn(t)?t(this.getComboData()):t)}},{key:"getElementType",value:function(t){return this.context.model.getElementType(t)}},{key:"getRelatedEdgesData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"both";return this.context.model.getRelatedEdgesData(t,e)}},{key:"getNeighborNodesData",value:function(t){return this.context.model.getNeighborNodesData(t)}},{key:"getAncestorsData",value:function(t,e){return this.context.model.getAncestorsData(t,e)}},{key:"getParentData",value:function(t,e){return this.context.model.getParentData(t,e)}},{key:"getChildrenData",value:function(t){return this.context.model.getChildrenData(t)}},{key:"getDescendantsData",value:function(t){return this.context.model.getDescendantsData(t)}},{key:"getElementDataByState",value:function(t,e){return this.context.model.getElementDataByState(t,e)}},{key:"initCanvas",value:function(){return YQ(this,void 0,void 0,(0,Dn.A)().m(function t(){var e,n,r,i,o,a,s,u,c,l,A,f,d,h,p,v;return(0,Dn.A)().w(function(t){for(;;)switch(t.n){case 0:if(!this.context.canvas){t.n=2;break}return t.n=1,this.context.canvas.ready;case 1:return t.a(2,t.v);case 2:if(n=this.options,r=n.container,i=void 0===r?"container":r,o=n.width,a=n.height,s=n.renderer,u=n.cursor,c=n.background,l=n.canvas,A=n.devicePixelRatio,f=void 0===A?null!==(e=globalThis.devicePixelRatio)&&void 0!==e?e:1:A,!(i instanceof z_)){t.n=4;break}return this.context.canvas=i,u&&i.setCursor(u),s&&i.setRenderer(s),t.n=3,i.ready;case 3:t.n=6;break;case 4:return d=ve(i)?document.getElementById(i):i,h=W_(d),this.emit(ry.BEFORE_CANVAS_INIT,{container:d,width:o,height:a}),p=Object.assign(Object.assign({},l),{container:d,width:o||h[0],height:a||h[1],background:c,renderer:s,cursor:u,devicePixelRatio:f}),v=new z_(p),this.context.canvas=v,t.n=5,v.ready;case 5:this.emit(ry.AFTER_CANVAS_INIT,{canvas:v});case 6:return t.a(2)}},t,this)}))}},{key:"updateCanvas",value:function(t){var e,n,r=t.renderer,i=t.cursor,o=t.height,a=t.width,s=this.context.canvas;s&&(r&&(this.emit(ry.BEFORE_RENDERER_CHANGE,{renderer:this.options.renderer}),s.setRenderer(r),this.emit(ry.AFTER_RENDERER_CHANGE,{renderer:r})),i&&s.setCursor(i),(de(a)||de(o))&&this.setSize(null!==(e=null!=a?a:this.options.width)&&void 0!==e?e:0,null!==(n=null!=o?o:this.options.height)&&void 0!==n?n:0))}},{key:"initRuntime",value:function(){this.context.options=this.options,this.context.batch||(this.context.batch=new oQ(this.context)),this.context.plugin||(this.context.plugin=new zQ(this.context)),this.context.viewport||(this.context.viewport=new WQ(this.context)),this.context.transform||(this.context.transform=new GQ(this.context)),this.context.element||(this.context.element=new vQ(this.context)),this.context.animation||(this.context.animation=new iQ(this.context)),this.context.layout||(this.context.layout=new DQ(this.context)),this.context.behavior||(this.context.behavior=new aQ(this.context))}},{key:"prepare",value:function(){return YQ(this,void 0,void 0,(0,Dn.A)().m(function t(){return(0,Dn.A)().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Promise.resolve();case 1:if(!this.destroyed){t.n=2;break}return console.error(vy("The graph instance has been destroyed")),t.a(2);case 2:return t.n=3,this.initCanvas();case 3:this.initRuntime();case 4:return t.a(2)}},t,this)}))}},{key:"render",value:function(){return YQ(this,void 0,void 0,(0,Dn.A)().m(function t(){var e,n,r;return(0,Dn.A)().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.prepare();case 1:if($_(this,new X_(ry.BEFORE_RENDER)),this.options.layout){t.n=3;break}return e=this.context.element.draw({type:"render"}),t.n=2,Promise.all([null==e?void 0:e.finished,this.autoFit()]);case 2:t.n=8;break;case 3:if(this.rendered||!kB(this.options.layout)){t.n=6;break}return t.n=4,this.context.element.preLayoutDraw({type:"render"});case 4:return n=t.v,t.n=5,Promise.all([null==n?void 0:n.finished,this.autoFit()]);case 5:t.n=8;break;case 6:return r=this.context.element.draw({type:"render"}),t.n=7,Promise.all([null==r?void 0:r.finished,this.context.layout.postLayout()]);case 7:return t.n=8,this.autoFit();case 8:this.rendered=!0,$_(this,new X_(ry.AFTER_RENDER));case 9:return t.a(2)}},t,this)}))}},{key:"draw",value:function(){return YQ(this,void 0,void 0,(0,Dn.A)().m(function t(){var e;return(0,Dn.A)().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.prepare();case 1:return t.n=2,null===(e=this.context.element.draw())||void 0===e?void 0:e.finished;case 2:return t.a(2)}},t,this)}))}},{key:"layout",value:function(t){return YQ(this,void 0,void 0,(0,Dn.A)().m(function e(){return(0,Dn.A)().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.context.layout.postLayout(t);case 1:return e.a(2)}},e,this)}))}},{key:"stopLayout",value:function(){this.context.layout.stopLayout()}},{key:"clear",value:function(){return YQ(this,void 0,void 0,(0,Dn.A)().m(function t(){var e,n,r;return(0,Dn.A)().w(function(t){for(;;)switch(t.n){case 0:e=this.context,n=e.model,r=e.element,n.setData({}),n.clearChanges(),null==r||r.clear();case 1:return t.a(2)}},t,this)}))}},{key:"destroy",value:function(){var t;$_(this,new X_(ry.BEFORE_DESTROY));var e=this.context,n=e.layout,r=e.animation,i=e.element,o=e.model,a=e.canvas,s=e.behavior,u=e.plugin;null==u||u.destroy(),null==s||s.destroy(),null==n||n.destroy(),null==r||r.destroy(),null==i||i.destroy(),o.destroy(),null==a||a.destroy(),this.options={},this.context={},this.off(),null===(t=globalThis.removeEventListener)||void 0===t||t.call(globalThis,"resize",this.onResize),this.destroyed=!0,$_(this,new X_(ry.AFTER_DESTROY))}},{key:"getCanvas",value:function(){return this.context.canvas}},{key:"resize",value:function(t,e){var n,r,i=W_(null===(r=this.context.canvas)||void 0===r?void 0:r.getContainer()),o=[t||i[0],e||i[1]];if(this.context.canvas){var a=this.context.canvas.getSize();Xg(o,a)||($_(this,new X_(ry.BEFORE_SIZE_CHANGE,{size:o})),(n=this.context.canvas).resize.apply(n,o),$_(this,new X_(ry.AFTER_SIZE_CHANGE,{size:o})))}}},{key:"fitView",value:function(t,e){return YQ(this,void 0,void 0,(0,Dn.A)().m(function n(){var r;return(0,Dn.A)().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,null===(r=this.context.viewport)||void 0===r?void 0:r.fitView(t,e);case 1:return n.a(2)}},n,this)}))}},{key:"fitCenter",value:function(t){return YQ(this,void 0,void 0,(0,Dn.A)().m(function e(){var n;return(0,Dn.A)().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,null===(n=this.context.viewport)||void 0===n?void 0:n.fitCenter({animation:t});case 1:return e.a(2)}},e,this)}))}},{key:"autoFit",value:function(){return YQ(this,void 0,void 0,(0,Dn.A)().m(function t(){var e,n,r;return(0,Dn.A)().w(function(t){for(;;)switch(t.n){case 0:if(e=this.context.options.autoFit){t.n=1;break}return t.a(2);case 1:if(!ve(e)){t.n=5;break}if("view"!==e){t.n=3;break}return t.n=2,this.fitView();case 2:t.n=4;break;case 3:if("center"!==e){t.n=4;break}return t.n=4,this.fitCenter();case 4:case 6:t.n=8;break;case 5:if(n=e.type,r=e.animation,"view"!==n){t.n=7;break}return t.n=6,this.fitView(e.options,r);case 7:if("center"!==n){t.n=8;break}return t.n=8,this.fitCenter(r);case 8:return t.a(2)}},t,this)}))}},{key:"focusElement",value:function(t,e){return YQ(this,void 0,void 0,(0,Dn.A)().m(function n(){var r;return(0,Dn.A)().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,null===(r=this.context.viewport)||void 0===r?void 0:r.focusElements(Array.isArray(t)?t:[t],{animation:e});case 1:return n.a(2)}},n,this)}))}},{key:"zoomBy",value:function(t,e,n){return YQ(this,void 0,void 0,(0,Dn.A)().m(function r(){return(0,Dn.A)().w(function(r){for(;;)switch(r.n){case 0:return r.n=1,this.context.viewport.transform({mode:"relative",scale:t,origin:n},e);case 1:return r.a(2)}},r,this)}))}},{key:"zoomTo",value:function(t,e,n){return YQ(this,void 0,void 0,(0,Dn.A)().m(function r(){return(0,Dn.A)().w(function(r){for(;;)switch(r.n){case 0:return r.n=1,this.context.viewport.transform({mode:"absolute",scale:t,origin:n},e);case 1:return r.a(2)}},r,this)}))}},{key:"getZoom",value:function(){return this.context.viewport.getZoom()}},{key:"rotateBy",value:function(t,e,n){return YQ(this,void 0,void 0,(0,Dn.A)().m(function r(){return(0,Dn.A)().w(function(r){for(;;)switch(r.n){case 0:return r.n=1,this.context.viewport.transform({mode:"relative",rotate:t,origin:n},e);case 1:return r.a(2)}},r,this)}))}},{key:"rotateTo",value:function(t,e,n){return YQ(this,void 0,void 0,(0,Dn.A)().m(function r(){return(0,Dn.A)().w(function(r){for(;;)switch(r.n){case 0:return r.n=1,this.context.viewport.transform({mode:"absolute",rotate:t,origin:n},e);case 1:return r.a(2)}},r,this)}))}},{key:"getRotation",value:function(){return this.context.viewport.getRotation()}},{key:"translateBy",value:function(t,e){return YQ(this,void 0,void 0,(0,Dn.A)().m(function n(){return(0,Dn.A)().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,this.context.viewport.transform({mode:"relative",translate:t},e);case 1:return n.a(2)}},n,this)}))}},{key:"translateTo",value:function(t,e){return YQ(this,void 0,void 0,(0,Dn.A)().m(function n(){return(0,Dn.A)().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,this.context.viewport.transform({mode:"absolute",translate:t},e);case 1:return n.a(2)}},n,this)}))}},{key:"getPosition",value:function(){return Jm([0,0],this.getCanvasByViewport([0,0]))}},{key:"translateElementBy",value:function(t,e){return YQ(this,arguments,void 0,function(t,e){var n=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(0,Dn.A)().m(function i(){var o,a,s,u,c,l;return(0,Dn.A)().w(function(i){for(;;)switch(i.n){case 0:return s=bn(t)?[t,null===(o=e)||void 0===o||o]:[m({},t,e),r],u=v(s,2),c=u[0],l=u[1],Object.entries(c).forEach(function(t){var e=v(t,2),r=e[0],i=e[1];return n.context.model.translateNodeLikeBy(r,i)}),i.n=1,null===(a=n.context.element.draw({animation:l,stage:"translate"}))||void 0===a?void 0:a.finished;case 1:return i.a(2)}},i)})()})}},{key:"translateElementTo",value:function(t,e){return YQ(this,arguments,void 0,function(t,e){var n=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(0,Dn.A)().m(function i(){var o,a,s,u,c,l;return(0,Dn.A)().w(function(i){for(;;)switch(i.n){case 0:return s=bn(t)?[t,null===(o=e)||void 0===o||o]:[m({},t,e),r],u=v(s,2),c=u[0],l=u[1],Object.entries(c).forEach(function(t){var e=v(t,2),r=e[0],i=e[1];return n.context.model.translateNodeLikeTo(r,i)}),i.n=1,null===(a=n.context.element.draw({animation:l,stage:"translate"}))||void 0===a?void 0:a.finished;case 1:return i.a(2)}},i)})()})}},{key:"getElementPosition",value:function(t){return this.context.model.getElementPosition(t)}},{key:"getElementRenderStyle",value:function(t){return oS(this.context.element.getElement(t).attributes,["context"])}},{key:"setElementVisibility",value:function(t,e){return YQ(this,arguments,void 0,function(t,e){var n=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(0,Dn.A)().m(function i(){var o,a,s,u,c,l,A,f,d,h;return(0,Dn.A)().w(function(i){for(;;)switch(i.n){case 0:return s=bn(t)?[t,null===(o=e)||void 0===o||o]:[m({},t,e),r],u=v(s,2),c=u[0],l=u[1],A={nodes:[],edges:[],combos:[]},Object.entries(c).forEach(function(t){var e=v(t,2),r=e[0],i=e[1],o=n.getElementType(r);A["".concat(o,"s")].push({id:r,style:{visibility:i}})}),f=n.context,d=f.model,h=f.element,d.preventUpdateNodeLikeHierarchy(function(){d.updateData(A)}),i.n=1,null===(a=h.draw({animation:l,stage:"visibility"}))||void 0===a?void 0:a.finished;case 1:return i.a(2)}},i)})()})}},{key:"showElement",value:function(t,e){return YQ(this,void 0,void 0,(0,Dn.A)().m(function n(){var r;return(0,Dn.A)().w(function(n){for(;;)switch(n.n){case 0:return r=Array.isArray(t)?t:[t],n.n=1,this.setElementVisibility(Object.fromEntries(r.map(function(t){return[t,"visible"]})),e);case 1:return n.a(2)}},n,this)}))}},{key:"hideElement",value:function(t,e){return YQ(this,void 0,void 0,(0,Dn.A)().m(function n(){var r;return(0,Dn.A)().w(function(n){for(;;)switch(n.n){case 0:return r=Array.isArray(t)?t:[t],n.n=1,this.setElementVisibility(Object.fromEntries(r.map(function(t){return[t,"hidden"]})),e);case 1:return n.a(2)}},n,this)}))}},{key:"getElementVisibility",value:function(t){var e,n,r=this.context.element.getElement(t);return null!==(n=null===(e=null==r?void 0:r.style)||void 0===e?void 0:e.visibility)&&void 0!==n?n:"visible"}},{key:"setElementZIndex",value:function(t,e){return YQ(this,void 0,void 0,(0,Dn.A)().m(function n(){var r,i,o,a,s,u,c=this;return(0,Dn.A)().w(function(n){for(;;)switch(n.n){case 0:return i={nodes:[],edges:[],combos:[]},o=bn(t)?t:m({},t,e),Object.entries(o).forEach(function(t){var e=v(t,2),n=e[0],r=e[1],o=c.getElementType(n);i["".concat(o,"s")].push({id:n,style:{zIndex:r}})}),a=this.context,s=a.model,u=a.element,s.preventUpdateNodeLikeHierarchy(function(){return s.updateData(i)}),n.n=1,null===(r=u.draw({animation:!1,stage:"zIndex"}))||void 0===r?void 0:r.finished;case 1:return n.a(2)}},n,this)}))}},{key:"frontElement",value:function(t){return YQ(this,void 0,void 0,(0,Dn.A)().m(function e(){var n,r,i,o=this;return(0,Dn.A)().w(function(e){for(;;)switch(e.n){case 0:return n=Array.isArray(t)?t:[t],r=this.context.model,i={},n.map(function(t){var e=r.getFrontZIndex(t);if("combo"===r.getElementType(t)){var n=r.getAncestorsData(t,cy).at(-1)||o.getComboData(t),a=[n].concat(O(r.getDescendantsData(Sm(n)))),s=e-tQ(n);a.forEach(function(t){i[Sm(t)]=o.getElementZIndex(Sm(t))+s});var u=pE(a.map(Sm),function(t){return r.getRelatedEdgesData(t)});u.internal.forEach(function(t){var e=Sm(t);i[e]=o.getElementZIndex(e)+s})}else i[t]=e}),e.n=1,this.setElementZIndex(i);case 1:return e.a(2)}},e,this)}))}},{key:"getElementZIndex",value:function(t){return tQ(this.context.model.getElementDataById(t))}},{key:"setElementState",value:function(t,e){return YQ(this,arguments,void 0,function(t,e){var n=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(0,Dn.A)().m(function i(){var o,a,s,u,c,l,A,f;return(0,Dn.A)().w(function(i){for(;;)switch(i.n){case 0:return s=bn(t)?[t,null===(o=e)||void 0===o||o]:[m({},t,e),r],u=v(s,2),c=u[0],l=u[1],A=function(t){return t?Array.isArray(t)?t:[t]:[]},f={nodes:[],edges:[],combos:[]},Object.entries(c).forEach(function(t){var e=v(t,2),r=e[0],i=e[1],o=n.getElementType(r);f["".concat(o,"s")].push({id:r,states:A(i)})}),n.updateData(f),i.n=1,null===(a=n.context.element.draw({animation:l,stage:"state"}))||void 0===a?void 0:a.finished;case 1:return i.a(2)}},i)})()})}},{key:"getElementState",value:function(t){return this.context.model.getElementState(t)}},{key:"getElementRenderBounds",value:function(t){return this.context.element.getElement(t).getRenderBounds()}},{key:"collapseElement",value:function(t){return YQ(this,arguments,void 0,function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(0,Dn.A)().m(function r(){var i,o,a,s;return(0,Dn.A)().w(function(r){for(;;)switch(r.n){case 0:if(i=e.context,o=i.model,a=i.element,!Kb(o.getNodeLikeData([t])[0])){r.n=1;break}return r.a(2);case 1:if(!e.isCollapsingExpanding){r.n=2;break}return r.a(2);case 2:return"boolean"==typeof n&&(n={animation:n,align:!0}),s=o.getElementType(t),r.n=3,e.frontElement(t);case 3:if(e.isCollapsingExpanding=!0,o.updateData("node"===s?{nodes:[{id:t,style:{collapsed:!0}}]}:{combos:[{id:t,style:{collapsed:!0}}]}),"node"!==s){r.n=5;break}return r.n=4,a.collapseNode(t,n);case 4:r.n=6;break;case 5:if("combo"!==s){r.n=6;break}return r.n=6,a.collapseCombo(t,!!n.animation);case 6:e.isCollapsingExpanding=!1;case 7:return r.a(2)}},r)})()})}},{key:"expandElement",value:function(t){return YQ(this,arguments,void 0,function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(0,Dn.A)().m(function r(){var i,o,a,s;return(0,Dn.A)().w(function(r){for(;;)switch(r.n){case 0:if(i=e.context,o=i.model,a=i.element,Kb(o.getNodeLikeData([t])[0])){r.n=1;break}return r.a(2);case 1:if(!e.isCollapsingExpanding){r.n=2;break}return r.a(2);case 2:if("boolean"==typeof n&&(n={animation:n,align:!0}),s=o.getElementType(t),e.isCollapsingExpanding=!0,o.updateData("node"===s?{nodes:[{id:t,style:{collapsed:!1}}]}:{combos:[{id:t,style:{collapsed:!1}}]}),"node"!==s){r.n=4;break}return r.n=3,a.expandNode(t,n);case 3:r.n=5;break;case 4:if("combo"!==s){r.n=5;break}return r.n=5,a.expandCombo(t,!!n.animation);case 5:e.isCollapsingExpanding=!1;case 6:return r.a(2)}},r)})()})}},{key:"setElementCollapsibility",value:function(t,e){var n=this.getElementType(t);"node"===n?this.updateNodeData([{id:t,style:{collapsed:e}}]):"combo"===n&&this.updateComboData([{id:t,style:{collapsed:e}}])}},{key:"toDataURL",value:function(){return YQ(this,arguments,void 0,function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,Dn.A)().m(function n(){return(0,Dn.A)().w(function(n){for(;;)if(0===n.n)return n.a(2,t.context.canvas.toDataURL(e))},n)})()})}},{key:"getCanvasByViewport",value:function(t){return this.context.canvas.getCanvasByViewport(t)}},{key:"getViewportByCanvas",value:function(t){return this.context.canvas.getViewportByCanvas(t)}},{key:"getClientByCanvas",value:function(t){return this.context.canvas.getClientByCanvas(t)}},{key:"getCanvasByClient",value:function(t){return this.context.canvas.getCanvasByClient(t)}},{key:"getViewportCenter",value:function(){return this.context.viewport.getViewportCenter()}},{key:"getCanvasCenter",value:function(){return this.context.viewport.getCanvasCenter()}},{key:"on",value:function(t,n,r){return xn(e,"on",this,3)([t,n,r])}},{key:"once",value:function(t,n){return xn(e,"once",this,3)([t,n])}},{key:"off",value:function(t,n){return xn(e,"off",this,3)([t,n])}}])}(gB);XQ.defaultOptions={autoResize:!1,theme:"light",rotation:0,zoom:1,zoomRange:[.01,10]};var qQ=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function ZQ(t,e){var n=e||{},r=n.getNodeData,i=void 0===r?function(t,e){if(t.depth=e,!t.children)return t;var n=t.children,r=qQ(t,["children"]);return Object.assign(Object.assign({},r),{children:n.map(function(t){return t.id})})}:r,o=n.getEdgeData,a=void 0===o?function(t,e){return{source:t.id,target:e.id}}:o,s=n.getChildren,u=void 0===s?function(t){return t.children||[]}:s,c=[],l=[];return Ub(t,function(t,e){c.push(i(t,e));var n,r=qn(u(t));try{for(r.s();!(n=r.n()).done;){var o=n.value;l.push(a(t,o))}}catch(t){r.e(t)}finally{r.f()}},function(t){return u(t)},"TB"),{nodes:c,edges:l}}var JQ=function(t){function e(){return x(this,e),F(this,e,arguments)}return P(e,t),B(e,[{key:"beforeDraw",value:function(t){var e=t.add,n=t.update,r=this.context.model;return[].concat(O(e.edges.entries()),O(n.edges.entries())).forEach(function(t){var e=v(t,2)[1];$Q(r,e)}),t}}])}(O_),$Q=function(t,e){var n=e.source,r=e.target,i=t.getElementDataById(n),o=t.getElementDataById(r),a=vE(i,function(e){return t.getParentData(e,cy)}),s=vE(o,function(e){return t.getParentData(e,cy)}),u={sourceNode:Sm(a),targetNode:Sm(s)};return e.style?Object.assign(e.style,u):e.style=u,e},tU=function(t){function e(t,n){var r;return x(this,e),(r=F(this,e,[t,Xm({},e.defaultOptions,n)])).assignSizeByCentrality=function(t,e,n,r,i,o){var a=[e,n],s=[r[0],i[0]],u=[r[1],i[1]],c=[r[2],i[2]],l=function(t,e){if("function"==typeof o)return o(t,a,e);switch(o){case"linear":return function(t,e,n){var r=v(e,2),i=r[0],o=r[1],a=v(n,2),s=a[0],u=a[1];return o===i?s:s+(t-i)/(o-i)*(u-s)}(t,a,e);case"log":return function(t,e,n){var r=v(e,2),i=r[0],o=r[1],a=v(n,2),s=a[0],u=a[1];return s+Math.log(t-i+1)/Math.log(o-i+1)*(u-s)}(t,a,e);case"pow":return function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=v(e,2),o=i[0],a=i[1],s=v(n,2),u=s[0],c=s[1];return u+Math.pow((t-o)/(a-o),r)*(c-u)}(t,a,e,2);case"sqrt":return function(t,e,n){var r=v(e,2),i=r[0],o=r[1],a=v(n,2),s=a[0],u=a[1];return s+Math.sqrt((t-i)/(o-i))*(u-s)}(t,a,e);default:return e[0]}};return[l(t,s),l(t,u),l(t,c)]},r}return P(e,t),B(e,[{key:"beforeDraw",value:function(t){var e=this,n=this.context.model.getNodeData(),r=Jb(this.options.maxSize),i=Jb(this.options.minSize),o=this.getCentralities(this.options.centrality),a=o.size>0?Math.max.apply(Math,O(o.values())):0,s=o.size>0?Math.min.apply(Math,O(o.values())):0;return n.forEach(function(n){var u,c=e.assignSizeByCentrality(o.get(Sm(n))||0,s,a,i,r,e.options.scale),l=null===(u=e.context.element)||void 0===u?void 0:u.getElement(Sm(n)),A={size:c};e.assignLabelStyle(A,c,n,l),l&&S_(A,l.attributes)||M_(t,l?"update":"add","node",Xm(n,{style:A}),!0)}),t}},{key:"assignLabelStyle",value:function(t,e,n,r){var i,o=r?r.config.style:null===(i=this.context.element)||void 0===i?void 0:i.getElementComputedStyle("node",n);if(Object.assign(t,Ux(o,["labelFontSize","labelLineHeight"])),this.options.mapLabelSize){var a=this.getLabelSizeByNodeSize(e,1/0,Number(t.labelFontSize));Object.assign(t,{labelFontSize:a,labelLineHeight:a+jy(t.labelPadding)})}return t}},{key:"getLabelSizeByNodeSize",value:function(t,e,n){var r=Math.min.apply(Math,O(t))/2,i=v(Array.isArray(this.options.mapLabelSize)?this.options.mapLabelSize:[n,e],2),o=i[0],a=i[1];return Math.min(a,Math.max(r,o))}},{key:"getCentralities",value:function(t){var e=this.context.model,n=e.getData();if("function"==typeof t)return t(n);var r=e.getRelatedEdgesData.bind(e);return Pm(n,r,t)}}])}(O_);tU.defaultOptions={centrality:{type:"degree"},maxSize:80,minSize:20,scale:"linear",mapLabelSize:!1};var eU=function(t){function e(t,n){return x(this,e),F(this,e,[t,Object.assign({},e.defaultOptions,n)])}return P(e,t),B(e,[{key:"ref",get:function(){return this.context.model.getRootsData()[0]}},{key:"afterLayout",value:function(){var t,e=this,n=pb(this.ref),r=this.context,i=r.graph,o=r.model;null===(t=o.getData().nodes)||void 0===t||t.forEach(function(t){var r;if(Sm(t)!==Sm(e.ref)){var a=lb(Jm(pb(t),n)),s=Math.abs(a)>Math.PI/2,u=!t.children||0===t.children.length,c=Sm(t),l=null===(r=e.context.element)||void 0===r?void 0:r.getElement(c);if(l&&l.isVisible()){var A=(u?1:-1)*(Jb(i.getElementRenderStyle(c).size)[0]/2+e.options.offset),f=[["translate",A*Math.cos(a),A*Math.sin(a)],["rotate",s?br(a)+180:br(a)]];o.updateNodeData([{id:Sm(t),style:{labelTextAlign:s===u?"right":"left",labelTextBaseline:"middle",labelTransform:f}}])}}}),i.draw()}}])}(O_);eU.defaultOptions={offset:5};var nU=["top","top-right","right","right-bottom","bottom","bottom-left","left","left-top"],rU=function(t){function e(t,n){var r;return x(this,e),(r=F(this,e,[t,Object.assign({},e.defaultOptions,n)])).cacheMergeStyle=new Map,r.getAffectedParallelEdges=function(t){var e=t.add.edges,n=t.update,i=n.nodes,o=n.edges,a=n.combos,s=t.remove.edges,u=r.context.model,c=new Map,l=function(t,e){u.getRelatedEdgesData(e).forEach(function(t){return!c.has(Sm(t))&&c.set(Sm(t),t)})};i.forEach(l),a.forEach(l);var A=function(e){var n=new Set(t.remove.edges.keys()),r=u.getEdgeData().filter(function(t){return!n.has(Sm(t))}).map(function(t){return $Q(u,t)});oU(e,r,!0).forEach(function(t){var e=Sm(t);c.has(e)||c.set(e,t)})};if(s.size&&s.forEach(A),e.size&&e.forEach(A),o.size){var f=dF(fF(u.getChanges())).update.edges;o.forEach(function(t){var e;A(t);var n=null===(e=f.find(function(e){return Sm(e.value)===Sm(t)}))||void 0===e?void 0:e.original;n&&!aU(t,n)&&A(n)})}uw(r.options.edges)||c.forEach(function(t,e){return!r.options.edges.includes(e)&&c.delete(e)});var d=u.getEdgeData().map(Sm);return new Map(O(c).sort(function(t,e){return d.indexOf(t[0])-d.indexOf(e[0])}))},r.applyBundlingStyle=function(t,e,n){var i=iU(e),o=i.edgeMap,a=i.reverses;o.forEach(function(e){e.forEach(function(e,i,o){var s,u=o.length,c=e.style||{};if(e.source===e.target){var l=nU.length;c.loopPlacement=nU[i%l],c.loopDist=Math.floor(i/l)*n+50}else if(1===u)c.curveOffset=0;else{var A=(i%2==0?1:-1)*(a["".concat(e.source,"|").concat(e.target,"|").concat(i)]?-1:1);c.curveOffset=u%2==1?A*Math.ceil(i/2)*n*2:A*(Math.floor(i/2)*n*2+n)}var f=Object.assign(e,{type:"quadratic",style:c}),d=null===(s=r.context.element)||void 0===s?void 0:s.getElement(Sm(e));d&&S_(f.style,d.attributes)||M_(t,d?"update":"add","edge",f,!0)})})},r.resetEdgeStyle=function(t){var e=t.style||{},n=r.cacheMergeStyle.get(Sm(t))||{};return Object.keys(n).forEach(function(r){Xg(e[r],n[r])&&(t[r]?e[r]=t[r]:delete e[r])}),Object.assign(t,{style:e})},r.applyMergingStyle=function(t,e){var n=iU(e),i=n.edgeMap,o=n.reverses;i.forEach(function(e){var n;if(1!==e.length){var i=e.map(function(t,e){var n=t.source,r=t.target,i=t.style,a=void 0===i?{}:i,s=a.startArrow,u=a.endArrow,c={},l=v(o["".concat(n,"|").concat(r,"|").concat(e)]?["endArrow","startArrow"]:["startArrow","endArrow"],2),A=l[0],f=l[1];return yn(s)&&(c[A]=s),yn(u)&&(c[f]=u),c}).reduce(function(t,e){return Object.assign(Object.assign({},t),e)},{});e.forEach(function(e,n,o){var a;if(0===n){var s=Object.assign({},mn(r.options.style)?r.options.style(o):r.options.style,{childrenData:o});r.cacheMergeStyle.set(Sm(e),s);var u=Object.assign(Object.assign({},e),{type:"line",style:Object.assign(Object.assign(Object.assign({},e.style),i),s)}),c=null===(a=r.context.element)||void 0===a?void 0:a.getElement(Sm(e));c&&S_(u.style,c.attributes)||M_(t,c?"update":"add","edge",u,!0)}else M_(t,"remove","edge",e)})}else{var a=e[0],s=null===(n=r.context.element)||void 0===n?void 0:n.getElement(Sm(a)),u=r.resetEdgeStyle(a);s&&S_(u,s.attributes)||M_(t,s?"update":"add","edge",u)}})},r}return P(e,t),B(e,[{key:"beforeDraw",value:function(t){var e=this.getAffectedParallelEdges(t);return 0===e.size||("bundle"===this.options.mode?this.applyBundlingStyle(t,e,this.options.distance):this.applyMergingStyle(t,e)),t}}])}(O_);rU.defaultOptions={mode:"bundle",distance:15};var iU=function(t){var e,n=new Map,r=new Set,i={},o=new Map,a=qn(t);try{for(a.s();!(e=a.n()).done;){var s=v(e.value,2),u=s[0],c=s[1];if(!r.has(u)){var l=c.source,A=c.target,f="".concat(l,"-").concat(A);n.has(f)||(n.set(f,[]),o.set(f,new Set));var d=n.get(f),h=o.get(f);d&&h&&!h.has(u)&&(d.push(c),h.add(u),r.add(u));var p,g=qn(t);try{for(g.s();!(p=g.n()).done;){var y=v(p.value,2),m=y[0],b=y[1];if(!r.has(m)&&m!==u&&aU(c,b)){var w=n.get(f),x=o.get(f);w&&x&&!x.has(m)&&(w.push(b),x.add(m),l===b.target&&A===b.source&&(i["".concat(b.source,"|").concat(b.target,"|").concat(w.length-1)]=!0),r.add(m))}}}catch(t){g.e(t)}finally{g.f()}}}}catch(t){a.e(t)}finally{a.f()}return{edgeMap:n,reverses:i}},oU=function(t,e,n){return e.filter(function(e){return(n||Sm(e)!==Sm(t))&&aU(e,t)})},aU=function(t,e){var n=t.style||{},r=n.sourceNode,i=n.targetNode,o=e.style||{},a=o.sourceNode,s=o.targetNode;return r===a&&i===s||r===s&&i===a},sU=function(t){function e(){return x(this,e),F(this,e,arguments)}return P(e,t),B(e,[{key:"beforeDraw",value:function(t,e){if("visibility"===e.stage)return t;var n=this.context.model,r=t.update,i=r.nodes,o=r.edges,a=r.combos,s=function(t,e){n.getRelatedEdgesData(e).forEach(function(t){return!o.has(Sm(t))&&o.set(Sm(t),t)})};return i.forEach(s),a.forEach(s),t}}])}(O_),uU={animation:{"combo-collapse":Sy,"combo-expand":Fy,"node-collapse":ky,"node-expand":Oy,"path-in":Cy,"path-out":My,fade:[{fields:["opacity"]}],translate:[{fields:["x","y"]}]},behavior:{"brush-select":Nb,"click-select":zb,"collapse-expand":aB,"create-edge":lB,"drag-canvas":dB,"drag-element-force":SB,"drag-element":pB,"fix-element-size":TB,"focus-element":PB,"hover-activate":IB,"lasso-select":NB,"auto-adapt-label":Gm,"optimize-viewport-transform":LB,"scroll-canvas":QB,"zoom-canvas":jB},combo:{circle:Wx,rect:Yx},edge:{cubic:OE,line:FE,polyline:DE,quadratic:RE,"cubic-horizontal":CE,"cubic-radial":ME,"cubic-vertical":SE},layout:{"antv-dagre":CO,"combo-combined":CC,"compact-box":DB.compactBox,"d3-force":vM,"force-atlas2":kM,circular:TO,concentric:QO,dagre:bM,dendrogram:DB.dendrogram,fishbone:JM,force:oC,fruchterman:CM,grid:SM,indented:DB.indented,mds:wC,mindmap:DB.mindmap,radial:HM,random:XM,snake:nS},node:{circle:Cw,diamond:Sw,ellipse:Iw,hexagon:Nw,html:jx,image:Rx,rect:Hx,star:zx,donut:Fw,triangle:Kx},palette:{spectral:["rgb(158, 1, 66)","rgb(213, 62, 79)","rgb(244, 109, 67)","rgb(253, 174, 97)","rgb(254, 224, 139)","rgb(255, 255, 191)","rgb(230, 245, 152)","rgb(171, 221, 164)","rgb(102, 194, 165)","rgb(50, 136, 189)","rgb(94, 79, 162)"],tableau:["rgb(78, 121, 167)","rgb(242, 142, 44)","rgb(225, 87, 89)","rgb(118, 183, 178)","rgb(89, 161, 79)","rgb(237, 201, 73)","rgb(175, 122, 161)","rgb(255, 157, 167)","rgb(156, 117, 95)","rgb(186, 176, 171)"],oranges:["rgb(255, 245, 235)","rgb(254, 230, 206)","rgb(253, 208, 162)","rgb(253, 174, 107)","rgb(253, 141, 60)","rgb(241, 105, 19)","rgb(217, 72, 1)","rgb(166, 54, 3)","rgb(127, 39, 4)"],greens:["rgb(247, 252, 245)","rgb(229, 245, 224)","rgb(199, 233, 192)","rgb(161, 217, 155)","rgb(116, 196, 118)","rgb(65, 171, 93)","rgb(35, 139, 69)","rgb(0, 109, 44)","rgb(0, 68, 27)"],blues:["rgb(247, 251, 255)","rgb(222, 235, 247)","rgb(198, 219, 239)","rgb(158, 202, 225)","rgb(107, 174, 214)","rgb(66, 146, 198)","rgb(33, 113, 181)","rgb(8, 81, 156)","rgb(8, 48, 107)"]},theme:{dark:B_,light:k_},plugin:{"bubble-sets":GS,"edge-bundling":JS,"edge-filter-lens":sF,"grid-line":AF,background:cS,contextmenu:ZS,fisheye:cF,fullscreen:lF,history:vF,hull:WF,legend:EP,minimap:BP,snapline:SP,timebar:KL,title:t_,toolbar:i_,tooltip:f_,watermark:m_},transform:{"arrange-draw-order":C_,"collapse-expand-combo":F_,"collapse-expand-node":P_,"get-edge-actual-ends":JQ,"map-node-size":tU,"place-radial-labels":eU,"process-parallel-edges":rU,"update-related-edges":sU},shape:{circle:Pu,ellipse:Lu,group:_u,html:Uu,image:yw,line:Ru,path:zu,polygon:Gu,polyline:Wu,rect:Yu,text:qu,label:fw,badge:dw}};Object.entries(uU).forEach(function(t){var e=v(t,2),n=e[0],r=e[1];Object.entries(r).forEach(function(t){var e=v(t,2),r=e[0],i=e[1];__(n,r,i)})});var cU,lU={css:"//at.alicdn.com/t/a/font_470089_8hnbbf8n4u8.css",js:"//at.alicdn.com/t/a/font_470089_8hnbbf8n4u8.js"},AU=c(6003),fU=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())})},dU=AU.version,hU=function(){if(!cU){var t=Number((dU||"").split(".")[0]);cU=t>=18?c.e(394).then(c.bind(c,6394)):c.e(540).then(c.bind(c,1540))}return cU};function pU(t,e){return fU(this,void 0,void 0,(0,Dn.A)().m(function n(){var r,i;return(0,Dn.A)().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,hU();case 1:return r=n.v,i=r.render,n.a(2,i(t,e))}},n)}))}var vU=function(t){function e(t){return x(this,e),F(this,e,[t])}return P(e,t),B(e,[{key:"getKeyStyle",value:function(t){return Object.assign({},xn(e,"getKeyStyle",this,3)([t]))}},{key:"update",value:function(t){xn(e,"update",this,3)([t])}},{key:"connectedCallback",value:function(){xn(e,"connectedCallback",this,3)([]),pU(this.attributes.component,this.getDomElement())}},{key:"attributeChangedCallback",value:function(t,n,r){xn(e,"attributeChangedCallback",this,3)([t,n,r]),"component"===t&&n!==r&&pU(this.attributes.component,this.getDomElement())}},{key:"destroy",value:function(){!function(t){fU(this,void 0,void 0,(0,Dn.A)().m(function e(){var n,r;return(0,Dn.A)().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,hU();case 1:return n=e.v,r=n.unmount,e.a(2,r(t))}},e)}))}(this.getDomElement()),xn(e,"destroy",this,3)([])}}])}(jx),gU=function(t){function e(){return x(this,e),F(this,e,arguments)}return P(e,t),B(e,[{key:"getActiveIds",value:function(t){var e=this.context,n=e.model,r=e.graph,i=t.target.id,o=r.getElementType(i),a=[i];if("edge"===o){var s=n.getEdgeDatum(i);this.collectChainNodes(s.source,"in",a),this.collectChainNodes(s.target,"out",a)}else"node"===o&&this.collectChainNodes(i,"both",a);return r.frontElement(a),a}},{key:"collectChainNodes",value:function(t,e,n){var r=this;this.context.model.getRelatedEdgesData(t,e).forEach(function(t){n.includes(Sm(t))||n.push(Sm(t)),n.includes(t.source)||(n.push(t.source),r.collectChainNodes(t.source,"in",n)),n.includes(t.target)||(n.push(t.target),r.collectChainNodes(t.target,"out",n))})}}])}(IB),yU=function(t){function e(){return x(this,e),F(this,e,arguments)}return P(e,t),B(e,[{key:"getActiveIds",value:function(t){var e=this.context,n=e.model,r=e.graph,i=t.target.id,o=r.getElementType(i),a=[i];if("edge"===o){var s=n.getEdgeDatum(i);a.push(s.source,s.target)}else"node"===o&&a.push.apply(a,O(n.getRelatedEdgesData(i).map(Sm)));return r.frontElement(a),a}}])}(IB),mU=function(t){function e(){return x(this,e),F(this,e,arguments)}return P(e,t),B(e,[{key:"getControlPoints",value:function(t){var e=v(this.getEndpoints(t,!1),2),n=e[0],r=e[1];return[[v(n,1)[0],v(r,2)[1]]]}}])}(DE),bU=function(t){function e(){return x(this,e),F(this,e,arguments)}return P(e,t),B(e,[{key:"beforeDraw",value:function(t){var e=this.context.model.getData(),n=e.nodes,r=e.edges,i=n.filter(function(t){return 1===t.depth}),o=i.map(function(t){return t.id});return r.forEach(function(t){o.includes(t.target)&&(t.style||(t.style={}),t.style.zIndex=i.length-i.findIndex(function(e){return e.id===t.target}))}),t}}])}(O_),wU=function(t){function e(t,n){return x(this,e),F(this,e,[t,Object.assign({},e.defaultOptions,n)])}return P(e,t),B(e,[{key:"beforeDraw",value:function(t){var e=this,n=this.context.model.getNodeData();if(0===n.length)return t;var r=0,i=function(t,o){var a,s=n.find(function(e){return e.id==t});s&&(s.style||(s.style={}),s.style.color=o||e.options.colors[r++%e.options.colors.length],null===(a=s.children)||void 0===a||a.forEach(function(t){var e;return i(t,null===(e=s.style)||void 0===e?void 0:e.color)}))};return n.filter(function(t){return 1===t.depth}).forEach(function(t){return i(t.id)}),t}}])}(O_);m(wU,"defaultOptions",{colors:["#1783FF","#F08F56","#D580FF","#00C9C9","#7863FF","#DB9D0D","#60C42D","#FF80CA","#2491B3","#17C76F"]});var xU=c(9276),EU=c(5442),BU=c.n(EU);function kU(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var OU=function(){return OU=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},OU.apply(this,arguments)};function CU(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var MU=c(1554),SU=c.n(MU),FU="-ms-",TU="-moz-",PU="-webkit-",IU="comm",NU="rule",LU="decl",_U="@keyframes",QU=Math.abs,UU=String.fromCharCode,jU=Object.assign;function DU(t){return t.trim()}function RU(t,e){return(t=e.exec(t))?t[0]:t}function HU(t,e,n){return t.replace(e,n)}function zU(t,e,n){return t.indexOf(e,n)}function KU(t,e){return 0|t.charCodeAt(e)}function GU(t,e,n){return t.slice(e,n)}function VU(t){return t.length}function WU(t){return t.length}function YU(t,e){return e.push(t),t}function XU(t,e){return t.filter(function(t){return!RU(t,e)})}var qU=1,ZU=1,JU=0,$U=0,tj=0,ej="";function nj(t,e,n,r,i,o,a,s){return{value:t,root:e,parent:n,type:r,props:i,children:o,line:qU,column:ZU,length:a,return:"",siblings:s}}function rj(t,e){return jU(nj("",null,null,"",null,null,0,t.siblings),t,{length:-t.length},e)}function ij(t){for(;t.root;)t=rj(t.root,{children:[t]});YU(t,t.siblings)}function oj(){return tj=$U>0?KU(ej,--$U):0,ZU--,10===tj&&(ZU=1,qU--),tj}function aj(){return tj=$U<JU?KU(ej,$U++):0,ZU++,10===tj&&(ZU=1,qU++),tj}function sj(){return KU(ej,$U)}function uj(){return $U}function cj(t,e){return GU(ej,t,e)}function lj(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Aj(t){return DU(cj($U-1,hj(91===t?t+2:40===t?t+1:t)))}function fj(t){for(;(tj=sj())&&tj<33;)aj();return lj(t)>2||lj(tj)>3?"":" "}function dj(t,e){for(;--e&&aj()&&!(tj<48||tj>102||tj>57&&tj<65||tj>70&&tj<97););return cj(t,uj()+(e<6&&32==sj()&&32==aj()))}function hj(t){for(;aj();)switch(tj){case t:return $U;case 34:case 39:34!==t&&39!==t&&hj(tj);break;case 40:41===t&&hj(t);break;case 92:aj()}return $U}function pj(t,e){for(;aj()&&t+tj!==57&&(t+tj!==84||47!==sj()););return"/*"+cj(e,$U-1)+"*"+UU(47===t?t:aj())}function vj(t){for(;!lj(sj());)aj();return cj(t,$U)}function gj(t,e){for(var n="",r=0;r<t.length;r++)n+=e(t[r],r,t,e)||"";return n}function yj(t,e,n,r){switch(t.type){case"@layer":if(t.children.length)break;case"@import":case LU:return t.return=t.return||t.value;case IU:return"";case _U:return t.return=t.value+"{"+gj(t.children,r)+"}";case NU:if(!VU(t.value=t.props.join(",")))return""}return VU(n=gj(t.children,r))?t.return=t.value+"{"+n+"}":""}function mj(t,e,n){switch(function(t,e){return 45^KU(t,0)?(((e<<2^KU(t,0))<<2^KU(t,1))<<2^KU(t,2))<<2^KU(t,3):0}(t,e)){case 5103:return PU+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return PU+t+t;case 4789:return TU+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return PU+t+TU+t+FU+t+t;case 5936:switch(KU(t,e+11)){case 114:return PU+t+FU+HU(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return PU+t+FU+HU(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return PU+t+FU+HU(t,/[svh]\w+-[tblr]{2}/,"lr")+t}case 6828:case 4268:case 2903:return PU+t+FU+t+t;case 6165:return PU+t+FU+"flex-"+t+t;case 5187:return PU+t+HU(t,/(\w+).+(:[^]+)/,PU+"box-$1$2"+FU+"flex-$1$2")+t;case 5443:return PU+t+FU+"flex-item-"+HU(t,/flex-|-self/g,"")+(RU(t,/flex-|baseline/)?"":FU+"grid-row-"+HU(t,/flex-|-self/g,""))+t;case 4675:return PU+t+FU+"flex-line-pack"+HU(t,/align-content|flex-|-self/g,"")+t;case 5548:return PU+t+FU+HU(t,"shrink","negative")+t;case 5292:return PU+t+FU+HU(t,"basis","preferred-size")+t;case 6060:return PU+"box-"+HU(t,"-grow","")+PU+t+FU+HU(t,"grow","positive")+t;case 4554:return PU+HU(t,/([^-])(transform)/g,"$1"+PU+"$2")+t;case 6187:return HU(HU(HU(t,/(zoom-|grab)/,PU+"$1"),/(image-set)/,PU+"$1"),t,"")+t;case 5495:case 3959:return HU(t,/(image-set\([^]*)/,PU+"$1$`$1");case 4968:return HU(HU(t,/(.+:)(flex-)?(.*)/,PU+"box-pack:$3"+FU+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+PU+t+t;case 4200:if(!RU(t,/flex-|baseline/))return FU+"grid-column-align"+GU(t,e)+t;break;case 2592:case 3360:return FU+HU(t,"template-","")+t;case 4384:case 3616:return n&&n.some(function(t,n){return e=n,RU(t.props,/grid-\w+-end/)})?~zU(t+(n=n[e].value),"span",0)?t:FU+HU(t,"-start","")+t+FU+"grid-row-span:"+(~zU(n,"span",0)?RU(n,/\d+/):+RU(n,/\d+/)-+RU(t,/\d+/))+";":FU+HU(t,"-start","")+t;case 4896:case 4128:return n&&n.some(function(t){return RU(t.props,/grid-\w+-start/)})?t:FU+HU(HU(t,"-end","-span"),"span ","")+t;case 4095:case 3583:case 4068:case 2532:return HU(t,/(.+)-inline(.+)/,PU+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(VU(t)-1-e>6)switch(KU(t,e+1)){case 109:if(45!==KU(t,e+4))break;case 102:return HU(t,/(.+:)(.+)-([^]+)/,"$1"+PU+"$2-$3$1"+TU+(108==KU(t,e+3)?"$3":"$2-$3"))+t;case 115:return~zU(t,"stretch",0)?mj(HU(t,"stretch","fill-available"),e,n)+t:t}break;case 5152:case 5920:return HU(t,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(e,n,r,i,o,a,s){return FU+n+":"+r+s+(i?FU+n+"-span:"+(o?a:+a-+r)+s:"")+t});case 4949:if(121===KU(t,e+6))return HU(t,":",":"+PU)+t;break;case 6444:switch(KU(t,45===KU(t,14)?18:11)){case 120:return HU(t,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+PU+(45===KU(t,14)?"inline-":"")+"box$3$1"+PU+"$2$3$1"+FU+"$2box$3")+t;case 100:return HU(t,":",":"+FU)+t}break;case 5719:case 2647:case 2135:case 3927:case 2391:return HU(t,"scroll-","scroll-snap-")+t}return t}function bj(t,e,n,r){if(t.length>-1&&!t.return)switch(t.type){case LU:return void(t.return=mj(t.value,t.length,n));case _U:return gj([rj(t,{value:HU(t.value,"@","@"+PU)})],r);case NU:if(t.length)return function(t,e){return t.map(e).join("")}(n=t.props,function(e){switch(RU(e,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":ij(rj(t,{props:[HU(e,/:(read-\w+)/,":-moz-$1")]})),ij(rj(t,{props:[e]})),jU(t,{props:XU(n,r)});break;case"::placeholder":ij(rj(t,{props:[HU(e,/:(plac\w+)/,":"+PU+"input-$1")]})),ij(rj(t,{props:[HU(e,/:(plac\w+)/,":-moz-$1")]})),ij(rj(t,{props:[HU(e,/:(plac\w+)/,FU+"input-$1")]})),ij(rj(t,{props:[e]})),jU(t,{props:XU(n,r)})}return""})}}function wj(t){return function(t){return ej="",t}(xj("",null,null,null,[""],t=function(t){return qU=ZU=1,JU=VU(ej=t),$U=0,[]}(t),0,[0],t))}function xj(t,e,n,r,i,o,a,s,u){for(var c=0,l=0,A=a,f=0,d=0,h=0,p=1,v=1,g=1,y=0,m="",b=i,w=o,x=r,E=m;v;)switch(h=y,y=aj()){case 40:if(108!=h&&58==KU(E,A-1)){-1!=zU(E+=HU(Aj(y),"&","&\f"),"&\f",QU(c?s[c-1]:0))&&(g=-1);break}case 34:case 39:case 91:E+=Aj(y);break;case 9:case 10:case 13:case 32:E+=fj(h);break;case 92:E+=dj(uj()-1,7);continue;case 47:switch(sj()){case 42:case 47:YU(Bj(pj(aj(),uj()),e,n,u),u);break;default:E+="/"}break;case 123*p:s[c++]=VU(E)*g;case 125*p:case 59:case 0:switch(y){case 0:case 125:v=0;case 59+l:-1==g&&(E=HU(E,/\f/g,"")),d>0&&VU(E)-A&&YU(d>32?kj(E+";",r,n,A-1,u):kj(HU(E," ","")+";",r,n,A-2,u),u);break;case 59:E+=";";default:if(YU(x=Ej(E,e,n,c,l,i,s,m,b=[],w=[],A,o),o),123===y)if(0===l)xj(E,e,x,x,b,o,A,s,w);else switch(99===f&&110===KU(E,3)?100:f){case 100:case 108:case 109:case 115:xj(t,x,x,r&&YU(Ej(t,x,x,0,0,i,s,m,i,b=[],A,w),w),i,w,A,s,r?b:w);break;default:xj(E,x,x,x,[""],w,0,s,w)}}c=l=d=0,p=g=1,m=E="",A=a;break;case 58:A=1+VU(E),d=h;default:if(p<1)if(123==y)--p;else if(125==y&&0==p++&&125==oj())continue;switch(E+=UU(y),y*p){case 38:g=l>0?1:(E+="\f",-1);break;case 44:s[c++]=(VU(E)-1)*g,g=1;break;case 64:45===sj()&&(E+=Aj(aj())),f=sj(),l=A=VU(m=E+=vj(uj())),y++;break;case 45:45===h&&2==VU(E)&&(p=0)}}return o}function Ej(t,e,n,r,i,o,a,s,u,c,l,A){for(var f=i-1,d=0===i?o:[""],h=WU(d),p=0,v=0,g=0;p<r;++p)for(var y=0,m=GU(t,f+1,f=QU(v=a[p])),b=t;y<h;++y)(b=DU(v>0?d[y]+" "+m:HU(m,/&\f/g,d[y])))&&(u[g++]=b);return nj(t,e,n,0===i?NU:s,u,c,l,A)}function Bj(t,e,n,r){return nj(t,e,n,IU,UU(tj),GU(t,2,-2),0,r)}function kj(t,e,n,r,i){return nj(t,e,n,LU,GU(t,0,r),GU(t,r+1,-1),r,i)}var Oj={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Cj="undefined"!=typeof process&&void 0!==process.env&&(process.env.REACT_APP_SC_ATTR||process.env.SC_ATTR)||"data-styled",Mj="active",Sj="data-styled-version",Fj="6.1.19",Tj="/*!sc*/\n",Pj="undefined"!=typeof window&&"undefined"!=typeof document,Ij=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!==process.env&&void 0!==process.env.REACT_APP_SC_DISABLE_SPEEDY&&""!==process.env.REACT_APP_SC_DISABLE_SPEEDY?"false"!==process.env.REACT_APP_SC_DISABLE_SPEEDY&&process.env.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!==process.env&&void 0!==process.env.SC_DISABLE_SPEEDY&&""!==process.env.SC_DISABLE_SPEEDY&&"false"!==process.env.SC_DISABLE_SPEEDY&&process.env.SC_DISABLE_SPEEDY),Nj=(new Set,Object.freeze([])),Lj=Object.freeze({});var _j=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),Qj=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Uj=/(^-|-$)/g;function jj(t){return t.replace(Qj,"-").replace(Uj,"")}var Dj=/(a)(d)/gi,Rj=function(t){return String.fromCharCode(t+(t>25?39:97))};function Hj(t){var e,n="";for(e=Math.abs(t);e>52;e=e/52|0)n=Rj(e%52)+n;return(Rj(e%52)+n).replace(Dj,"$1-$2")}var zj,Kj=function(t,e){for(var n=e.length;n;)t=33*t^e.charCodeAt(--n);return t},Gj=function(t){return Kj(5381,t)};function Vj(t){return"string"==typeof t&&!0}var Wj="function"==typeof Symbol&&Symbol.for,Yj=Wj?Symbol.for("react.memo"):60115,Xj=Wj?Symbol.for("react.forward_ref"):60112,qj={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Zj={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Jj={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},$j=((zj={})[Xj]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},zj[Yj]=Jj,zj);function tD(t){return("type"in(e=t)&&e.type.$$typeof)===Yj?Jj:"$$typeof"in t?$j[t.$$typeof]:qj;var e}var eD=Object.defineProperty,nD=Object.getOwnPropertyNames,rD=Object.getOwnPropertySymbols,iD=Object.getOwnPropertyDescriptor,oD=Object.getPrototypeOf,aD=Object.prototype;function sD(t,e,n){if("string"!=typeof e){if(aD){var r=oD(e);r&&r!==aD&&sD(t,r,n)}var i=nD(e);rD&&(i=i.concat(rD(e)));for(var o=tD(t),a=tD(e),s=0;s<i.length;++s){var u=i[s];if(!(u in Zj||n&&n[u]||a&&u in a||o&&u in o)){var c=iD(e,u);try{eD(t,u,c)}catch(t){}}}}return t}function uD(t){return"function"==typeof t}function cD(t){return"object"==typeof t&&"styledComponentId"in t}function lD(t,e){return t&&e?"".concat(t," ").concat(e):t||e||""}function AD(t,e){if(0===t.length)return"";for(var n=t[0],r=1;r<t.length;r++)n+=e?e+t[r]:t[r];return n}function fD(t){return null!==t&&"object"==typeof t&&t.constructor.name===Object.name&&!("props"in t&&t.$$typeof)}function dD(t,e,n){if(void 0===n&&(n=!1),!n&&!fD(t)&&!Array.isArray(t))return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)t[r]=dD(t[r],e[r]);else if(fD(e))for(var r in e)t[r]=dD(t[r],e[r]);return t}function hD(t,e){Object.defineProperty(t,"toString",{value:e})}function pD(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(t," for more information.").concat(e.length>0?" Args: ".concat(e.join(", ")):""))}var vD=function(){function t(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}return t.prototype.indexOfGroup=function(t){for(var e=0,n=0;n<t;n++)e+=this.groupSizes[n];return e},t.prototype.insertRules=function(t,e){if(t>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;t>=i;)if((i<<=1)<0)throw pD(16,"".concat(t));this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var o=r;o<i;o++)this.groupSizes[o]=0}for(var a=this.indexOfGroup(t+1),s=(o=0,e.length);o<s;o++)this.tag.insertRule(a,e[o])&&(this.groupSizes[t]++,a++)},t.prototype.clearGroup=function(t){if(t<this.length){var e=this.groupSizes[t],n=this.indexOfGroup(t),r=n+e;this.groupSizes[t]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},t.prototype.getGroup=function(t){var e="";if(t>=this.length||0===this.groupSizes[t])return e;for(var n=this.groupSizes[t],r=this.indexOfGroup(t),i=r+n,o=r;o<i;o++)e+="".concat(this.tag.getRule(o)).concat(Tj);return e},t}(),gD=new Map,yD=new Map,mD=1,bD=function(t){if(gD.has(t))return gD.get(t);for(;yD.has(mD);)mD++;var e=mD++;return gD.set(t,e),yD.set(e,t),e},wD=function(t,e){mD=e+1,gD.set(t,e),yD.set(e,t)},xD="style[".concat(Cj,"][").concat(Sj,'="').concat(Fj,'"]'),ED=new RegExp("^".concat(Cj,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),BD=function(t,e,n){for(var r,i=n.split(","),o=0,a=i.length;o<a;o++)(r=i[o])&&t.registerName(e,r)},kD=function(t,e){for(var n,r=(null!==(n=e.textContent)&&void 0!==n?n:"").split(Tj),i=[],o=0,a=r.length;o<a;o++){var s=r[o].trim();if(s){var u=s.match(ED);if(u){var c=0|parseInt(u[1],10),l=u[2];0!==c&&(wD(l,c),BD(t,l,u[3]),t.getTag().insertRules(c,i)),i.length=0}else i.push(s)}}},OD=function(t){for(var e=document.querySelectorAll(xD),n=0,r=e.length;n<r;n++){var i=e[n];i&&i.getAttribute(Cj)!==Mj&&(kD(t,i),i.parentNode&&i.parentNode.removeChild(i))}};function CD(){return c.nc}var MD=function(t){var e=document.head,n=t||e,r=document.createElement("style"),i=function(t){var e=Array.from(t.querySelectorAll("style[".concat(Cj,"]")));return e[e.length-1]}(n),o=void 0!==i?i.nextSibling:null;r.setAttribute(Cj,Mj),r.setAttribute(Sj,Fj);var a=CD();return a&&r.setAttribute("nonce",a),n.insertBefore(r,o),r},SD=function(){function t(t){this.element=MD(t),this.element.appendChild(document.createTextNode("")),this.sheet=function(t){if(t.sheet)return t.sheet;for(var e=document.styleSheets,n=0,r=e.length;n<r;n++){var i=e[n];if(i.ownerNode===t)return i}throw pD(17)}(this.element),this.length=0}return t.prototype.insertRule=function(t,e){try{return this.sheet.insertRule(e,t),this.length++,!0}catch(t){return!1}},t.prototype.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},t.prototype.getRule=function(t){var e=this.sheet.cssRules[t];return e&&e.cssText?e.cssText:""},t}(),FD=function(){function t(t){this.element=MD(t),this.nodes=this.element.childNodes,this.length=0}return t.prototype.insertRule=function(t,e){if(t<=this.length&&t>=0){var n=document.createTextNode(e);return this.element.insertBefore(n,this.nodes[t]||null),this.length++,!0}return!1},t.prototype.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},t.prototype.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},t}(),TD=function(){function t(t){this.rules=[],this.length=0}return t.prototype.insertRule=function(t,e){return t<=this.length&&(this.rules.splice(t,0,e),this.length++,!0)},t.prototype.deleteRule=function(t){this.rules.splice(t,1),this.length--},t.prototype.getRule=function(t){return t<this.length?this.rules[t]:""},t}(),PD=Pj,ID={isServer:!Pj,useCSSOMInjection:!Ij},ND=function(){function t(t,e,n){void 0===t&&(t=Lj),void 0===e&&(e={});var r=this;this.options=OU(OU({},ID),t),this.gs=e,this.names=new Map(n),this.server=!!t.isServer,!this.server&&Pj&&PD&&(PD=!1,OD(this)),hD(this,function(){return function(t){for(var e=t.getTag(),n=e.length,r="",i=function(n){var i=function(t){return yD.get(t)}(n);if(void 0===i)return"continue";var o=t.names.get(i),a=e.getGroup(n);if(void 0===o||!o.size||0===a.length)return"continue";var s="".concat(Cj,".g").concat(n,'[id="').concat(i,'"]'),u="";void 0!==o&&o.forEach(function(t){t.length>0&&(u+="".concat(t,","))}),r+="".concat(a).concat(s,'{content:"').concat(u,'"}').concat(Tj)},o=0;o<n;o++)i(o);return r}(r)})}return t.registerId=function(t){return bD(t)},t.prototype.rehydrate=function(){!this.server&&Pj&&OD(this)},t.prototype.reconstructWithOptions=function(e,n){return void 0===n&&(n=!0),new t(OU(OU({},this.options),e),this.gs,n&&this.names||void 0)},t.prototype.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},t.prototype.getTag=function(){return this.tag||(this.tag=(t=function(t){var e=t.useCSSOMInjection,n=t.target;return t.isServer?new TD(n):e?new SD(n):new FD(n)}(this.options),new vD(t)));var t},t.prototype.hasNameForId=function(t,e){return this.names.has(t)&&this.names.get(t).has(e)},t.prototype.registerName=function(t,e){if(bD(t),this.names.has(t))this.names.get(t).add(e);else{var n=new Set;n.add(e),this.names.set(t,n)}},t.prototype.insertRules=function(t,e,n){this.registerName(t,e),this.getTag().insertRules(bD(t),n)},t.prototype.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},t.prototype.clearRules=function(t){this.getTag().clearGroup(bD(t)),this.clearNames(t)},t.prototype.clearTag=function(){this.tag=void 0},t}(),LD=/&/g,_D=/^\s*\/\/.*$/gm;function QD(t,e){return t.map(function(t){return"rule"===t.type&&(t.value="".concat(e," ").concat(t.value),t.value=t.value.replaceAll(",",",".concat(e," ")),t.props=t.props.map(function(t){return"".concat(e," ").concat(t)})),Array.isArray(t.children)&&"@keyframes"!==t.type&&(t.children=QD(t.children,e)),t})}function UD(t){var e,n,r,i=void 0===t?Lj:t,o=i.options,a=void 0===o?Lj:o,s=i.plugins,u=void 0===s?Nj:s,c=function(t,r,i){return i.startsWith(n)&&i.endsWith(n)&&i.replaceAll(n,"").length>0?".".concat(e):t},l=u.slice();l.push(function(t){t.type===NU&&t.value.includes("&")&&(t.props[0]=t.props[0].replace(LD,n).replace(r,c))}),a.prefix&&l.push(bj),l.push(yj);var A=function(t,i,o,s){void 0===i&&(i=""),void 0===o&&(o=""),void 0===s&&(s="&"),e=s,n=i,r=new RegExp("\\".concat(n,"\\b"),"g");var u=t.replace(_D,""),c=wj(o||i?"".concat(o," ").concat(i," { ").concat(u," }"):u);a.namespace&&(c=QD(c,a.namespace));var A,f,d,h=[];return gj(c,(A=l.concat((d=function(t){return h.push(t)},function(t){t.root||(t=t.return)&&d(t)})),f=WU(A),function(t,e,n,r){for(var i="",o=0;o<f;o++)i+=A[o](t,e,n,r)||"";return i})),h};return A.hash=u.length?u.reduce(function(t,e){return e.name||pD(15),Kj(t,e.name)},5381).toString():"",A}var jD=new ND,DD=UD(),RD=BU().createContext({shouldForwardProp:void 0,styleSheet:jD,stylis:DD}),HD=(RD.Consumer,BU().createContext(void 0));function zD(){return(0,EU.useContext)(RD)}function KD(t){var e=(0,EU.useState)(t.stylisPlugins),n=e[0],r=e[1],i=zD().styleSheet,o=(0,EU.useMemo)(function(){var e=i;return t.sheet?e=t.sheet:t.target&&(e=e.reconstructWithOptions({target:t.target},!1)),t.disableCSSOMInjection&&(e=e.reconstructWithOptions({useCSSOMInjection:!1})),e},[t.disableCSSOMInjection,t.sheet,t.target,i]),a=(0,EU.useMemo)(function(){return UD({options:{namespace:t.namespace,prefix:t.enableVendorPrefixes},plugins:n})},[t.enableVendorPrefixes,t.namespace,n]);(0,EU.useEffect)(function(){SU()(n,t.stylisPlugins)||r(t.stylisPlugins)},[t.stylisPlugins]);var s=(0,EU.useMemo)(function(){return{shouldForwardProp:t.shouldForwardProp,styleSheet:o,stylis:a}},[t.shouldForwardProp,o,a]);return BU().createElement(RD.Provider,{value:s},BU().createElement(HD.Provider,{value:a},t.children))}var GD=function(){function t(t,e){var n=this;this.inject=function(t,e){void 0===e&&(e=DD);var r=n.name+e.hash;t.hasNameForId(n.id,r)||t.insertRules(n.id,r,e(n.rules,r,"@keyframes"))},this.name=t,this.id="sc-keyframes-".concat(t),this.rules=e,hD(this,function(){throw pD(12,String(n.name))})}return t.prototype.getName=function(t){return void 0===t&&(t=DD),this.name+t.hash},t}(),VD=function(t){return t>="A"&&t<="Z"};function WD(t){for(var e="",n=0;n<t.length;n++){var r=t[n];if(1===n&&"-"===r&&"-"===t[0])return t;VD(r)?e+="-"+r.toLowerCase():e+=r}return e.startsWith("ms-")?"-"+e:e}var YD=function(t){return null==t||!1===t||""===t},XD=function(t){var e,n,r=[];for(var i in t){var o=t[i];t.hasOwnProperty(i)&&!YD(o)&&(Array.isArray(o)&&o.isCss||uD(o)?r.push("".concat(WD(i),":"),o,";"):fD(o)?r.push.apply(r,CU(CU(["".concat(i," {")],XD(o),!1),["}"],!1)):r.push("".concat(WD(i),": ").concat((e=i,null==(n=o)||"boolean"==typeof n||""===n?"":"number"!=typeof n||0===n||e in Oj||e.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return r};function qD(t,e,n,r){return YD(t)?[]:cD(t)?[".".concat(t.styledComponentId)]:uD(t)?!uD(i=t)||i.prototype&&i.prototype.isReactComponent||!e?[t]:qD(t(e),e,n,r):t instanceof GD?n?(t.inject(n,r),[t.getName(r)]):[t]:fD(t)?XD(t):Array.isArray(t)?Array.prototype.concat.apply(Nj,t.map(function(t){return qD(t,e,n,r)})):[t.toString()];var i}function ZD(t){for(var e=0;e<t.length;e+=1){var n=t[e];if(uD(n)&&!cD(n))return!1}return!0}var JD=Gj(Fj),$D=function(){function t(t,e,n){this.rules=t,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&ZD(t),this.componentId=e,this.baseHash=Kj(JD,e),this.baseStyle=n,ND.registerId(e)}return t.prototype.generateAndInjectStyles=function(t,e,n){var r=this.baseStyle?this.baseStyle.generateAndInjectStyles(t,e,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&e.hasNameForId(this.componentId,this.staticRulesId))r=lD(r,this.staticRulesId);else{var i=AD(qD(this.rules,t,e,n)),o=Hj(Kj(this.baseHash,i)>>>0);if(!e.hasNameForId(this.componentId,o)){var a=n(i,".".concat(o),void 0,this.componentId);e.insertRules(this.componentId,o,a)}r=lD(r,o),this.staticRulesId=o}else{for(var s=Kj(this.baseHash,n.hash),u="",c=0;c<this.rules.length;c++){var l=this.rules[c];if("string"==typeof l)u+=l;else if(l){var A=AD(qD(l,t,e,n));s=Kj(s,A+c),u+=A}}if(u){var f=Hj(s>>>0);e.hasNameForId(this.componentId,f)||e.insertRules(this.componentId,f,n(u,".".concat(f),void 0,this.componentId)),r=lD(r,f)}}return r},t}(),tR=BU().createContext(void 0);tR.Consumer;var eR={};function nR(t,e,n){var r=cD(t),i=t,o=!Vj(t),a=e.attrs,s=void 0===a?Nj:a,u=e.componentId,c=void 0===u?function(t,e){var n="string"!=typeof t?"sc":jj(t);eR[n]=(eR[n]||0)+1;var r="".concat(n,"-").concat(function(t){return Hj(Gj(t)>>>0)}(Fj+n+eR[n]));return e?"".concat(e,"-").concat(r):r}(e.displayName,e.parentComponentId):u,l=e.displayName,A=void 0===l?function(t){return Vj(t)?"styled.".concat(t):"Styled(".concat(function(t){return t.displayName||t.name||"Component"}(t),")")}(t):l,f=e.displayName&&e.componentId?"".concat(jj(e.displayName),"-").concat(e.componentId):e.componentId||c,d=r&&i.attrs?i.attrs.concat(s).filter(Boolean):s,h=e.shouldForwardProp;if(r&&i.shouldForwardProp){var p=i.shouldForwardProp;if(e.shouldForwardProp){var v=e.shouldForwardProp;h=function(t,e){return p(t,e)&&v(t,e)}}else h=p}var g=new $D(n,f,r?i.componentStyle:void 0);function y(t,e){return function(t,e,n){var r=t.attrs,i=t.componentStyle,o=t.defaultProps,a=t.foldedComponentIds,s=t.styledComponentId,u=t.target,c=BU().useContext(tR),l=zD(),A=t.shouldForwardProp||l.shouldForwardProp,f=function(t,e,n){return void 0===n&&(n=Lj),t.theme!==n.theme&&t.theme||e||n.theme}(e,c,o)||Lj,d=function(t,e,n){for(var r,i=OU(OU({},e),{className:void 0,theme:n}),o=0;o<t.length;o+=1){var a=uD(r=t[o])?r(i):r;for(var s in a)i[s]="className"===s?lD(i[s],a[s]):"style"===s?OU(OU({},i[s]),a[s]):a[s]}return e.className&&(i.className=lD(i.className,e.className)),i}(r,e,f),h=d.as||u,p={};for(var v in d)void 0===d[v]||"$"===v[0]||"as"===v||"theme"===v&&d.theme===f||("forwardedAs"===v?p.as=d.forwardedAs:A&&!A(v,h)||(p[v]=d[v]));var g=function(t,e){var n=zD();return t.generateAndInjectStyles(e,n.styleSheet,n.stylis)}(i,d),y=lD(a,s);return g&&(y+=" "+g),d.className&&(y+=" "+d.className),p[Vj(h)&&!_j.has(h)?"class":"className"]=y,n&&(p.ref=n),(0,EU.createElement)(h,p)}(m,t,e)}y.displayName=A;var m=BU().forwardRef(y);return m.attrs=d,m.componentStyle=g,m.displayName=A,m.shouldForwardProp=h,m.foldedComponentIds=r?lD(i.foldedComponentIds,i.styledComponentId):"",m.styledComponentId=f,m.target=r?i.target:t,Object.defineProperty(m,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=r?function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++)dD(t,i[r],!0);return t}({},i.defaultProps,t):t}}),hD(m,function(){return".".concat(m.styledComponentId)}),o&&sD(m,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),m}function rR(t,e){for(var n=[t[0]],r=0,i=e.length;r<i;r+=1)n.push(e[r],t[r+1]);return n}new Set;var iR=function(t){return Object.assign(t,{isCss:!0})};function oR(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(uD(t)||fD(t))return iR(qD(rR(Nj,CU([t],e,!0))));var r=t;return 0===e.length&&1===r.length&&"string"==typeof r[0]?qD(r):iR(qD(rR(r,e)))}function aR(t,e,n){if(void 0===n&&(n=Lj),!e)throw pD(1,e);var r=function(r){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];return t(e,n,oR.apply(void 0,CU([r],i,!1)))};return r.attrs=function(r){return aR(t,e,OU(OU({},n),{attrs:Array.prototype.concat(n.attrs,r).filter(Boolean)}))},r.withConfig=function(r){return aR(t,e,OU(OU({},n),r))},r}var sR=function(t){return aR(nR,t)},uR=sR;_j.forEach(function(t){uR[t]=sR(t)}),function(){function t(t,e){this.rules=t,this.componentId=e,this.isStatic=ZD(t),ND.registerId(this.componentId+1)}t.prototype.createStyles=function(t,e,n,r){var i=r(AD(qD(this.rules,e,n,r)),""),o=this.componentId+t;n.insertRules(o,o,i)},t.prototype.removeStyles=function(t,e){e.clearRules(this.componentId+t)},t.prototype.renderStyles=function(t,e,n,r){t>2&&ND.registerId(this.componentId+t),this.removeStyles(t,n),this.createStyles(t,e,n,r)}}(),function(){function t(){var t=this;this._emitSheetCSS=function(){var e=t.instance.toString();if(!e)return"";var n=CD(),r=AD([n&&'nonce="'.concat(n,'"'),"".concat(Cj,'="true"'),"".concat(Sj,'="').concat(Fj,'"')].filter(Boolean)," ");return"<style ".concat(r,">").concat(e,"</style>")},this.getStyleTags=function(){if(t.sealed)throw pD(2);return t._emitSheetCSS()},this.getStyleElement=function(){var e;if(t.sealed)throw pD(2);var n=t.instance.toString();if(!n)return[];var r=((e={})[Cj]="",e[Sj]=Fj,e.dangerouslySetInnerHTML={__html:n},e),i=CD();return i&&(r.nonce=i),[BU().createElement("style",OU({},r,{key:"sc-0-0"}))]},this.seal=function(){t.sealed=!0},this.instance=new ND({isServer:!0}),this.sealed=!1}t.prototype.collectStyles=function(t){if(this.sealed)throw pD(2);return BU().createElement(KD,{sheet:this.instance},t)},t.prototype.interleaveWithNodeStream=function(t){throw pD(3)}}(),"__sc-".concat(Cj,"__");var cR,lR,AR,fR,dR=uR.div(cR||(cR=kU(["\n  ","\n\n  .arrow-count-icon-bar {\n    ","\n    background-color: ",";\n  }\n\n  .arrow-count-icon-circle {\n    width: 16px;\n    height: 16px;\n    color: #fff;\n    font-weight: 600;\n    font-size: 10px;\n    line-height: ",";\n    text-align: center;\n    background-color: ",";\n    border-radius: 50%;\n  }\n\n  .arrow-count-icon-circle-arrow {\n    width: 16px;\n    height: 16px;\n    transform: ",";\n  }\n\n  display: ",";\n\n  .collapsible-node-wrapper:hover & {\n    display: flex;\n  }\n"])),function(t){switch(t.$placement){case"top":return"transform: translate(-50%, -100%); flex-direction: column-reverse;";case"right":return"transform: translate(0, -50%);";case"left":return"transform: translate(-100%, -50%); flex-direction: row-reverse;";default:return"transform: translate(-50%, 0); flex-direction: column;"}},function(t){var e=t.$placement;return"top"===e||"bottom"===e?"width: 3px; height: 8px; margin: 0 7px;":"width: 8px; height: 3px; margin: 7px 0;"},function(t){return t.$color},function(t){return t.$isCollapsed?"16px":"14px"},function(t){return t.$color},function(t){var e=t.$isCollapsed,n=t.$placement;if(e)return"none";switch(n){case"top":return"translateY(1px) rotate(-90deg)";case"right":return"translateX(-1px) rotate(0deg)";case"left":return"translateX(1px) rotate(180deg)";default:return"translateY(-1px) rotate(90deg)"}},function(t){return t.$isCollapsed?"flex":"none"}),hR=function(t){var e,n=t.className,r=t.style,i=t.graph,o=t.data,a=t.isCollapsed,s=t.countType,u=void 0===s?"descendant":s,c=t.placement,l=void 0===c?"bottom":c,A=(null===(e=i.getNodeData(o.id).style)||void 0===e?void 0:e.color)||"#99ADD1",f=("descendant"===u?i.getDescendantsData(o.id):i.getChildrenData(o.id)).length;return BU().createElement(dR,{$color:A,$isCollapsed:a,$placement:l,className:"arrow-count-icon ".concat(a?"arrow-count-icon-collapsed":""," ").concat(n||""),style:r},BU().createElement("div",{className:"arrow-count-icon-bar"}),BU().createElement("div",{className:"arrow-count-icon-circle"},a?f:BU().createElement("div",{className:"arrow-count-icon-circle-arrow"},BU().createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},BU().createElement("path",{d:"M11,4 L5.5,8 L11,12",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})))))},pR=uR.div(lR||(lR=kU(["\n  height: 16px;\n  width: 16px;\n  transform: translate(-50%, -50%);\n  background: #fff;\n  border-radius: 50%;\n  border: 2px solid #99add1;\n  color: #99add1;\n  font-weight: 800;\n  line-height: 14px;\n  text-align: center;\n  box-sizing: content-box;\n"]))),vR=function(t){var e=t.isCollapsed,n=t.style,r=t.className;return BU().createElement(pR,{className:r,style:n},e?"+":"-")},gR=uR.div(AR||(AR=kU(["\n  height: inherit;\n  width: inherit;\n  border-radius: 8px;\n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.12), 0 2px 4px 0 rgba(0, 0, 0, 0.1);\n  position: relative;\n  border: none;\n  background-color: #fff;\n  box-sizing: content-box;\n\n  ","\n\n  .org-chart-node-line {\n    width: 100%;\n    height: 6px;\n    background-color: ",";\n    border-radius: 8px 8px 0 0;\n  }\n\n  .org-chart-node-content {\n    height: calc(100% - 6px);\n    margin: 0 16px 3px;\n    display: flex;\n    align-items: center;\n\n    &-avatar {\n      width: 40px;\n      height: 40px;\n      border-radius: 50%;\n      margin-right: 16px;\n      background-color: ",";\n      font-weight: 600;\n      font-size: 18px;\n      text-align: center;\n      line-height: 40px;\n      color: #fff;\n    }\n\n    &-detail {\n      width: calc(100% - 56px);\n    }\n\n    &-name {\n      color: #242424;\n      font-weight: 600;\n      font-size: 18px;\n      margin-bottom: 5px;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n\n    &-post {\n      color: #616161;\n      font-size: 14px;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n  }\n"])),function(t){return t.$isActive&&oR(fR||(fR=kU(["\n      transform: translate(-3px, -3px);\n      border: 2px solid #1783ff;\n    "])))},function(t){return t.$color},function(t){return t.$color}),yR=function(t){var e=t.name,n=t.position,r=t.status,i=void 0===r?"online":r,o=t.isActive,a=t.className,s=t.style;return BU().createElement(gR,{$color:{online:"#1783FF",busy:"#00C9C9",offline:"#F08F56"}[i],$isActive:o,className:a,style:s},BU().createElement("div",{className:"org-chart-node-line"}),BU().createElement("div",{className:"org-chart-node-content"},BU().createElement("div",{className:"org-chart-node-content-avatar"},e.slice(0,1)),BU().createElement("div",{className:"org-chart-node-content-detail"},BU().createElement("div",{className:"org-chart-node-content-name"},e),n&&BU().createElement("div",{className:"org-chart-node-content-post"},n))))},mR=function(){return mR=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},mR.apply(this,arguments)},bR=mR({},AU),wR=bR.version;bR.render,bR.unmountComponentAtNode;try{Number((wR||"").split(".")[0])>=18&&bR.createRoot}catch(nct){}var xR=new Map;"undefined"!=typeof document&&xR.set("tooltip",document.createElement("div"));var ER,BR,kR,OR,CR,MR,SR,FR,TR,PR=function(t){var e=t.loadingTemplate,n=t.theme,r=void 0===n?"light":n,i=BU().useRef(null);return BU().useEffect(function(){!e&&i.current&&function(t){if("undefined"==typeof document)return"loading";var e=t.attachShadow({mode:"open"}),n=document.createElement("div"),r=document.createElement("style");r.innerHTML=".loading {\n    display: inline-block;\n    position: relative;\n    width: 80px;\n    height: 80px;\n  }\n  .loading div {\n    position: absolute;\n    top: 33px;\n    width: 13px;\n    height: 13px;\n    border-radius: 50%;\n    background: #ccc;\n    animation-timing-function: cubic-bezier(0, 1, 1, 0);\n  }\n  .loading div:nth-child(1) {\n    left: 8px;\n    animation: loading1 0.6s infinite;\n  }\n  .loading div:nth-child(2) {\n    left: 8px;\n    animation: loading2 0.6s infinite;\n  }\n  .loading div:nth-child(3) {\n    left: 32px;\n    animation: loading2 0.6s infinite;\n  }\n  .loading div:nth-child(4) {\n    left: 56px;\n    animation: loading3 0.6s infinite;\n  }\n  @keyframes loading1 {\n    0% {\n      transform: scale(0);\n    }\n    100% {\n      transform: scale(1);\n    }\n  }\n  @keyframes loading3 {\n    0% {\n      transform: scale(1);\n    }\n    100% {\n      transform: scale(0);\n    }\n  }\n  @keyframes loading2 {\n    0% {\n      transform: translate(0, 0);\n    }\n    100% {\n      transform: translate(24px, 0);\n    }\n  }\n  ",n.classList.add("loading"),n.innerHTML="<div></div><div></div><div></div><div></div>",e.appendChild(r),e.appendChild(n)}(i.current)},[]),BU().createElement("div",{className:"charts-loading-container",style:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,backgroundColor:"dark"===r?"rgb(20, 20, 20)":"rgb(255, 255, 255)"}},e||BU().createElement("div",{ref:i}))},IR=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),NR=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={hasError:!1},e.renderError=function(t){var n=e.props.errorTemplate;return"function"==typeof n?n(t):n||BU().createElement("h5",null," ",t.message)},e}return IR(e,t),e.getDerivedStateFromError=function(t){return{hasError:!0,error:t}},e.getDerivedStateFromProps=function(t,e){return e.children!==t.children?{children:t.children,hasError:!1,error:void 0}:null},e.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):BU().createElement(EU.Fragment,null,this.props.children)},e}(BU().Component),LR=(0,xU.memoize)(function(t,e){void 0===e&&(e={});var n=e.fontSize,r=e.fontFamily,i=void 0===r?"sans-serif":r,o=e.fontWeight,a=e.fontStyle,s=e.fontVariant,u=(ER||(ER=document.createElement("canvas").getContext("2d")),ER);return u.font=[a,o,s,"".concat(n,"px"),i].join(" "),u.measureText((0,xU.isString)(t)?t:"")},function(t,e){return void 0===e&&(e={}),function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}([t],(0,xU.values)(e),!0).join("")}),_R=function(t,e){return void 0===e&&(e={}),LR(t,e).width},QR=function(t,e){void 0===e&&(e={});var n=LR(t,e);return n.actualBoundingBoxAscent+n.actualBoundingBoxDescent},UR=uR.div(BR||(BR=kU(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  overflow-wrap: anywhere;\n  line-height: 1.5em;\n  text-align: center;\n  height: inherit;\n  width: inherit;\n  box-sizing: content-box;\n  font-size: 14px;\n\n  ","\n\n  ","\n"])),function(t){var e=t.$type,n=t.$color,r=t.$borderWidth;switch(e){case"normal":return"\n          color: ".concat(n,";\n        ");case"filled":return oR(kR||(kR=kU(["\n          color: #fff;\n          background-color: ",";\n          border-radius: 8px;\n        "])),n);case"outlined":return oR(OR||(OR=kU(["\n          height: calc(100% - 2 * ","px);\n          width: calc(100% - 2 * ","px);\n          color: ",";\n          background-color: #fff;\n          border: ","px solid ",";\n          border-radius: 8px;\n        "])),r,r,n,r,n);case"underlined":return oR(CR||(CR=kU(["\n          height: calc(100% - ","px / 2);\n          width: inherit;\n          border-bottom: ","px solid ",";\n          background-color: #fff;\n          color: ",";\n        "])),r,r,n,n)}},function(t){var e=t.$isActive,n=t.$isSelected,r=t.$borderWidth,i=t.$color;return(e||n)&&oR(MR||(MR=kU(["\n      height: calc(100% - 2 * ","px);\n      width: calc(100% - 2 * ","px);\n      border: ","px solid ",";\n      ","\n    "])),r,r,r,function(t){var e=0,n=0,r=0;4===t.length?(e=parseInt(t[1]+t[1],16),n=parseInt(t[2]+t[2],16),r=parseInt(t[3]+t[3],16)):7===t.length&&(e=parseInt(t[1]+t[2],16),n=parseInt(t[3]+t[4],16),r=parseInt(t[5]+t[6],16)),e=Math.max(0,e-100),n=Math.max(0,n-100),r=Math.max(0,r-100);var i=function(t){return t.toString(16).padStart(2,"0")};return"#".concat(i(e)).concat(i(n)).concat(i(r))}(i),n&&"box-shadow: 0 0 0 2px ".concat(function(t){var e=0,n=0,r=0;return 4===t.length?(e=parseInt(t[1]+t[1],16),n=parseInt(t[2]+t[2],16),r=parseInt(t[3]+t[3],16)):7===t.length&&(e=parseInt(t[1]+t[2],16),n=parseInt(t[3]+t[4],16),r=parseInt(t[5]+t[6],16)),"rgba(".concat(e,", ").concat(n,", ").concat(r,", ").concat(.1,")")}(i),";"))}),jR=function(t){var e=t.className,n=t.style,r=void 0===n?{}:n,i=t.type,o=void 0===i?"normal":i,a=t.text,s=void 0===a?"":a,u=t.font,c=t.color,l=void 0===c?"#1783ff":c,A=t.borderWidth,f=void 0===A?3:A,d=t.maxWidth,h=void 0===d?1/0:d,p=t.isActive,v=void 0!==p&&p,g=t.isSelected,y=void 0!==g&&g,m=_R(s,u)>h;return BU().createElement(UR,{$type:o,$color:l,$borderWidth:f,$isActive:v,$isSelected:y,className:"text-node text-node-".concat(o," ").concat(e||""),style:w(w({},r),u)},BU().createElement("div",{style:m?{width:"calc(100% - 12px)"}:{}},s))},DR=uR.div(SR||(SR=kU(["\n  position: relative;\n  height: inherit;\n  width: inherit;\n"]))),RR=uR.div(FR||(FR=kU(["\n  position: absolute;\n  z-index: 10;\n\n  &:hover {\n    cursor: pointer;\n  }\n\n  ","\n"])),function(t){var e=t.$placement,n=t.$offsetX,r=t.$offsetY,i={top:"left: calc(50% + ".concat(n,"px); top: ").concat(r,"px;"),bottom:"left: calc(50% + ".concat(n,"px); top: calc(100% + ").concat(r,"px);"),right:"left: calc(100% + ".concat(n,"px); top: calc(50% + ").concat(r,"px);"),left:"left: ".concat(n,"px; top: calc(50% + ").concat(r,"px);")};return oR(TR||(TR=kU(["\n      ","\n    "])),i[e])}),HR=["children"],zR={nodes:[],edges:[]};function KR(t){if("object"!=typeof t||null===t)return!1;if(!("id"in t))return!1;if("children"in t){if(!Array.isArray(t.children))return!1;var e,n=qn(t.children);try{for(n.s();!(e=n.n()).done;)if(!KR(e.value))return!1}catch(t){n.e(t)}finally{n.f()}}return!0}function GR(t){if("object"!=typeof t||null===t)return!1;if(!Object.keys(t).every(function(t){return["nodes","edges","combos"].includes(t)}))return!1;var e=t.nodes,n=void 0===e?[]:e,r=t.edges,i=void 0===r?[]:r,o=t.combos,a=void 0===o?[]:o;if(!Array.isArray(n)||!Array.isArray(i)||!Array.isArray(a))return!1;var s=new Set(n.map(function(t){return t.id}));return!!n.every(function(t){return"object"==typeof t&&null!==t&&"id"in t})&&!!i.every(function(t){return s.has(t.source)&&s.has(t.target)})}function VR(t,e){return KR(t)?ZQ(t,{getNodeData:function(t,n){if(t.depth=n,t.style||(t.style={}),e&&(t.style.collapsed=n>=e),!t.children)return t;var r=t.children;return w(w({},Zn(t,HR)),{},{children:r.map(function(t){return t.id})})}}):zR}function WR(t,e){if(!t)return zR;var n=GR(t)?function(t){if(GR(t)){var e,n=t.nodes,r=void 0===n?[]:n,i=t.edges,o=void 0===i?[]:i,a=Object.fromEntries(r.map(function(t){return[t.id,t]})),s=Object.fromEntries(r.map(function(t){return[t.id,0]})),u=Object.fromEntries(r.map(function(t){return[t.id,[]]})),c=qn(o);try{for(c.s();!(e=c.n()).done;){var l=e.value,A=l.source,f=l.target;u[A].push(f),s[f]=(s[f]||0)+1}}catch(t){c.e(t)}finally{c.f()}var d=Object.entries(s).filter(function(t){var e=v(t,2);return e[0],0===e[1]}).map(function(t){return v(t,1)[0]});if(1===d.length){var h=function(t){return w(w({},a[t]),{},{children:u[t].map(h)})};return h(d[0])}}}(t):t;return n?VR(n,e):zR}var YR=["enable"],XR=vR,qR=function(t){function e(t,n){return x(this,e),F(this,e,[t,Object.assign({},e.defaultOptions,n)])}return P(e,t),B(e,[{key:"afterLayout",value:function(){var t=this,e=this.context,n=e.graph,r=(e.element,e.model),i=n.getData(),o=i.nodes,a=void 0===o?[]:o,s=i.edges,u=void 0===s?[]:s,c=this.options,l=c.enable,A=Zn(c,YR);a.forEach(function(e){var n=Sm(e);if(!(e.children&&e.children.length>0)){var i=function(t,e,n){var r=function(){var n=v(arguments.length>0&&void 0!==arguments[0]&&arguments[0]?["target","source"]:["source","target"],2),r=n[0],i=n[1];return e.filter(function(e){return e[r]===t}).map(function(t){return t[i]})};return"out"===n?r():"in"===n?r(!0):r().concat(r(!0))}(n,u,t.options.direction);0!==i.length&&r.updateNodeData([{id:n,children:i}])}});var f=n.getOptions().node;if((0,xU.has)(f,"style.component")){var d=(0,xU.get)(f,"style.component");(0,xU.set)(f,"style.component",function(t){if(!("function"==typeof l?l(t):l))return d.call(n,t);var e,r=(e=d,function(t){var n=t.data,r=t.graph,i=t.trigger,o=t.iconRender,a=t.iconPlacement,s=t.iconOffsetX,u=t.iconOffsetY,c=t.iconClassName,l=t.iconStyle,A=t.refreshLayout,f=v((0,EU.useState)((0,xU.get)(n,"style.collapsed",!1)),2),d=f[0],h=f[1],p=(0,EU.useRef)(null),g=(0,EU.useRef)(null),y="icon"===i&&!(0,xU.isEmpty)(n.children),m=function(){var t=Xn((0,Dn.A)().m(function t(e){var i;return(0,Dn.A)().w(function(t){for(;;)switch(t.n){case 0:return e.stopPropagation(),i=d?"expandElement":"collapseElement",t.n=1,r[i](Sm(n));case 1:if(h(function(t){return!t}),!A){t.n=2;break}return t.n=2,r.layout();case 2:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}();(0,EU.useEffect)(function(){var t="icon"===i?g.current:"node"===i?p.current:i;return null==t||t.addEventListener("click",m),function(){null==t||t.removeEventListener("click",m)}},[i,d]);var b=function(t){return"function"==typeof t?t.call(r,n):t};return BU().createElement(DR,{ref:p,className:"collapsible-node-wrapper"},y&&BU().createElement(RR,{ref:g,$placement:b(a),$offsetX:b(s),$offsetY:b(u),className:c,style:l},null==o?void 0:o.call(r,d,n)),e.call(r,n))});return BU().createElement(r,w({data:t,graph:n},A))})}n.setNode(f),n.draw()}}])}(O_);m(qR,"defaultOptions",{enable:!0,trigger:"icon",direction:"out",iconRender:function(t){return BU().createElement(XR,{isCollapsed:t})},iconPlacement:"bottom",iconOffsetX:0,iconOffsetY:0,iconClassName:"",iconStyle:{},refreshLayout:!1});var ZR=function(t){function e(t,n){var r;return x(this,e),m(r=F(this,e,[t,Object.assign({},e.defaultOptions,n)]),"assignLineWidthByValue",function(t,e,n,r,i,o){var a=[e,n],s=[r,i];if(t<e||t>n||e===n)return s[0];if("function"==typeof o)return o(t,a,s);switch(o){case"linear":return function(t,e,n){var r=v(e,2),i=r[0],o=r[1],a=v(n,2),s=a[0],u=a[1];return o===i?s:s+(t-i)/(o-i)*(u-s)}(t,a,s);case"log":return function(t,e,n){var r=v(e,2),i=r[0],o=r[1],a=v(n,2),s=a[0],u=a[1];return s+Math.log(t-i+1)/Math.log(o-i+1)*(u-s)}(t,a,s);case"pow":return function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=v(e,2),o=i[0],a=i[1],s=v(n,2),u=s[0],c=s[1];return u+Math.pow((t-o)/(a-o),r)*(c-u)}(t,a,s,2);case"sqrt":return function(t,e,n){var r=v(e,2),i=r[0],o=r[1],a=v(n,2),s=a[0],u=a[1];return s+Math.sqrt((t-i)/(o-i))*(u-s)}(t,a,s);default:return s[0]}}),r}return P(e,t),B(e,[{key:"beforeDraw",value:function(t){var e=this,n=this.options,r=n.maxValue,i=n.minValue,o=n.maxLineWidth,a=n.minLineWidth,s=n.scale,u=n.value,c=this.context.model.getEdgeData(),l="function"==typeof u?u:function(){return u},A=Object.fromEntries(c.map(function(t){return[Sm(t),l(t)]})),f=t.add.edges,d=t.update.edges;return[].concat(O(f.values()),O(d.values())).forEach(function(t){var n=e.assignLineWidthByValue(A[Sm(t)]||0,"function"==typeof i?i(t,A):i,"function"==typeof r?r(t,A):r,"function"==typeof a?a(t):a,"function"==typeof o?o(t):o,s);t.style||(t.style={}),t.style.lineWidth=n}),t}}])}(O_);m(ZR,"defaultOptions",{minValue:function(t,e){return Math.min.apply(Math,O(Object.values(e)))},maxValue:function(t,e){return Math.max.apply(Math,O(Object.values(e)))},minLineWidth:1,maxLineWidth:10,scale:"linear"});var JR=function(t){function e(){return x(this,e),F(this,e,arguments)}return P(e,t),B(e,[{key:"beforeDraw",value:function(t){var e=this.context,n=e.graph,r=e.element,i=t.add.nodes,o=t.update.nodes;return[].concat(O(i.values()),O(o.values())).forEach(function(t){r.computeElementDefaultStyle("node",{graph:n,datum:t});var e=v(Jb(r.getDefaultStyle(t.id).size),2),i=e[0],o=e[1];t.style||(t.style={}),t.style.dx=-i/2,t.style.dy=-o/2}),t}}])}(O_),$R={node:{react:vU},edge:{indented:mU},behavior:{"hover-activate-neighbors":yU,"hover-activate-chain":gU},transform:{"translate-react-node-origin":JR,"collapse-expand-react-node":qR,"assign-color-by-branch":wU,"map-edge-line-width":ZR,"arrange-edge-z-index":bU}};Object.entries($R).forEach(function(t){var e=v(t,2),n=e[0],r=e[1];Object.entries(r).forEach(function(t){var e=v(t,2),r=e[0],i=e[1];__(n,r,i)})});var tH=BU().createContext({graph:null,isReady:!1}),eH=function(){return eH=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},eH.apply(this,arguments)},nH=function(){return nH=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},nH.apply(this,arguments)},rH=(0,EU.forwardRef)(function(t,e){var n=t.style,r=t.children,i=function(t){var e=t.onInit,n=t.onReady,r=t.onDestroy,i=t.options,o=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}((0,EU.useState)(!1),2),a=o[0],s=o[1],u=(0,EU.useRef)(null),c=(0,EU.useRef)(null);return(0,EU.useEffect)(function(){if(!u.current&&c.current){var t=new XQ(eH({container:c.current},i));return u.current=t,s(!0),null==e||e(u.current),function(){var t=u.current;t&&(t.destroy(),null==r||r(),u.current=null)}}},[]),(0,EU.useEffect)(function(){var t=c.current,e=u.current;i&&t&&e&&!e.destroyed&&(e.setOptions(i),e.render().then(function(){return null==n?void 0:n(e)}))},[i]),{graph:u.current,containerRef:c,isReady:a}}(function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["style","children"])),o=i.graph,a=i.containerRef,s=i.isReady;(0,EU.useImperativeHandle)(e,function(){return o},[o]);var u=nH({height:"inherit",position:"relative"},n);return r?BU().createElement(tH.Provider,{value:{graph:o,isReady:s}},BU().createElement("div",{ref:a,style:u},s&&r)):BU().createElement("div",{ref:a,style:u})}),iH=(0,EU.memo)(rH),oH=["children"],aH=["containerStyle","className","onInit","onReady","onDestroy","errorTemplate","loading","loadingTemplate"],sH=(0,EU.forwardRef)(function(t,e){var n=t.children,r=Zn(t,oH),i=r.containerStyle,o=r.className,a=r.onInit,s=r.onReady,u=r.onDestroy,c=r.errorTemplate,l=r.loading,A=r.loadingTemplate,f=Zn(r,aH),d=(0,EU.useRef)(null);return(0,EU.useImperativeHandle)(e,function(){return d.current}),BU().createElement(NR,{errorTemplate:c},l&&BU().createElement(PR,{loadingTemplate:A}),!(0,xU.isEmpty)(f.data)&&BU().createElement(iH,{ref:function(t){d.current=t},className:o,style:i,options:f,onInit:a,onReady:s,onDestroy:u},n))}),uH={autoResize:!0,behaviors:[{key:"zoom-canvas",type:"zoom-canvas"},{key:"drag-canvas",type:"drag-canvas"}]};function cH(){if(0===arguments.length)return{};for(var t=w({},arguments.length<=0?void 0:arguments[0]),e=1;e<arguments.length;e++){var n=e<0||arguments.length<=e?void 0:arguments[e],r=function(){if(n.hasOwnProperty(i)){var e=n[i],r=t[i];["component","data"].includes(i)?t[i]=e:"function"==typeof e?["plugins","behaviors","transforms"].includes(i)?t[i]=e(r||[]):t[i]=function(t){var n=e.call(this,t);return(0,xU.isPlainObject)(n)?cH(r,n):n}:(0,xU.isPlainObject)(e)&&(0,xU.isPlainObject)(r)?t[i]=cH(r,e):t[i]=e}};for(var i in n)r()}return t}function lH(t,e){var n=e?"function"==typeof e?e(t):(0,xU.get)(t,"data.".concat(e),t.id):t.id;return String(n)}var AH={node:{type:"circle",style:{labelText:function(t){return t.id}}}},fH=["children"],dH=["data","defaultExpandLevel","direction","compact","labelField"],hH=(0,EU.forwardRef)(function(t,e){var n=t.children,r=Zn(t,fH),i=(0,EU.useMemo)(function(){var t=r.data,e=r.defaultExpandLevel,n=r.direction,i=void 0===n?"horizontal":n,o=r.compact,a=void 0!==o&&o,s=r.labelField,u=Zn(r,dH);return cH(uH,AH,{data:WR(t,e)},function(t){var e=t.direction,n=t.labelField,r=function(t){return(0,xU.isEmpty)(t.children)},i=function(t){return lH(t,n)},o=t.compact?"compact-box":"dendrogram";return"vertical"===e?{node:{style:{labelText:i,labelBackground:!0,labelPlacement:"right",labelTransform:function(t){return r(t)?"rotate(90deg) translate(18px)":"translate(18px)"},ports:[{placement:"top"},{placement:"bottom"}]}},edge:{type:"cubic-vertical"},layout:{type:o,direction:"TB",nodeSep:40,rankSep:140,getVGap:function(){return 80},getHGap:function(){return 20}}}:"horizontal"===e?{node:{style:{labelText:i,labelBackground:!0,labelPlacement:function(t){return r(t)?"right":"left"},ports:[{placement:"left"},{placement:"right"}]}},edge:{type:"cubic-horizontal"},layout:{type:o,direction:"LR",nodeSep:40,rankSep:200,getVGap:function(){return 5},getHGap:function(){return 100}}}:{node:{style:{labelText:i,labelBackground:!0}},edge:{type:"cubic-radial"},layout:{type:o,direction:"RL",radial:!0,nodeSep:40,rankSep:200,getVGap:function(){return 30},getHGap:function(){return 60}},transforms:function(t){return[].concat(O(t),["place-radial-labels"])}}}({direction:i,compact:a,labelField:s}),u)},[r]);return BU().createElement(sH,w(w({},i),{},{ref:e}),n)});function pH(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{fontSize:16,fontFamily:"PingFang SC"},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0,o=QR(t,n),a=_R(t,n)+4,s=i===1/0?1:Math.ceil(a/i),u=v(e,2),c=u[0],l=u[1];return[Math.max(r,Math.min(i,a))+c,l+o+1.5*o*(s-1)]}var vH={node:{style:{size:10,labelPlacement:"center"}},edge:{type:"polyline"},layout:{type:"fishbone",hGap:40,vGap:60},animation:!1},gH="system-ui, sans-serif";var yH=["children"],mH=["data","defaultExpandLevel","type","labelField"],bH=(0,EU.forwardRef)(function(t,e){var n=t.children,r=Zn(t,yH),i=r.data,o=(r.defaultExpandLevel,r.type),a=void 0===o?"cause":o,s=r.labelField,u=Zn(r,mH),c=(0,EU.useMemo)(function(){return cH(uH,vH,{data:WR(i)},function(t){var e=t.type,n=t.labelField,r={node:{type:"rect",style:{fill:function(t){return function(t){var e,n=t.depth;return 0===n?"#EFF0F0":1===n?(null===(e=t.style)||void 0===e?void 0:e.color)||"#EFF0F0":"transparent"}(t)},labelFill:function(t){return 1===t.depth?"#fff":"#262626"},labelFillOpacity:1,labelFontSize:function(t){return 0===t.depth?24:1===t.depth?18:16},labelFontWeight:function(t){return 0===t.depth?600:400},labelLineHeight:function(t){return 0===t.depth?26:1===t.depth?20:18},labelText:function(t){return lH(t,n)},radius:8,size:function(t){return function(t,e){return 0===e?pH(t,[80,48],{fontSize:24,fontWeight:600,fontFamily:gH}):1===e?pH(t,[80,30],{fontSize:18,fontFamily:gH}):[2,30]}(t.id,t.depth)}}},edge:{type:"polyline",style:{lineWidth:3,stroke:function(t){var e=this.getNodeData(t.target);return(0,xU.get)(e,"style.color","#99ADD1")}}},transforms:function(t){return[].concat(O(t),[{type:"assign-color-by-branch",key:"assign-color-by-branch"},{type:"arrange-edge-z-index",key:"arrange-edge-z-index"}])}};return r.layout||(r.layout={}),"decision"===e?(r.node.style.labelPlacement=function(t){return 0===t.depth||1===t.depth?"center":"right"},Object.assign(r.layout,{direction:"LR"})):"cause"===e&&(r.node.style.labelPlacement=function(t){return 0===t.depth||1===t.depth?"center":"left"},Object.assign(r.layout,{direction:"RL"})),r}({type:a,labelField:s}),u)},[r]);return BU().createElement(sH,w(w({},c),{},{ref:e}),n)}),wH=jR,xH={node:{type:"react",state:{active:{halo:!1},selected:{halo:!1}}},edge:{type:"cubic-horizontal",style:{strokeOpacity:.5},state:{active:{strokeOpacity:1}}},layout:{type:"dagre",rankdir:"LR",animation:!1},transforms:["translate-react-node-origin"]},EH=["children"],BH=["labelField"],kH=(0,EU.forwardRef)(function(t,e){var n=t.children,r=Zn(t,EH),i=r.labelField,o=Zn(r,BH),a=(0,EU.useMemo)(function(){return cH(uH,xH,function(t){var e=t.labelField,n={node:{style:{component:function(t){var n=lH(t,e);return BU().createElement(wH,{type:"filled",text:n})},size:[100,40],ports:[{placement:"left"},{placement:"right"}]}}};return n}({labelField:i}),o)},[r]);return BU().createElement(sH,w(w({},a),{},{ref:e}),n)}),OH=jR,CH={node:{type:"react",state:{active:{halo:!1},selected:{halo:!1}}},edge:{type:"polyline",style:{lineWidth:2,endArrow:!0,radius:8,router:{type:"orth"}}},layout:{type:"dagre",animation:!1},transforms:["translate-react-node-origin"]},MH=["children"],SH=["direction","labelField"],FH=(0,EU.forwardRef)(function(t,e){var n=t.children,r=Zn(t,MH),i=(0,EU.useMemo)(function(){var t=r.direction,e=void 0===t?"horizontal":t,n=r.labelField,i=Zn(r,SH);return cH(uH,CH,function(t){var e=t.direction,n=t.labelField,r={node:{style:{component:function(t){var e=lH(t,n);return BU().createElement(OH,{type:"filled",text:e})},size:[100,40],ports:"vertical"===e?[{placement:"top"},{placement:"bottom"}]:[{placement:"left"},{placement:"right"}]}},layout:{type:"dagre",rankdir:"vertical"===e?"TB":"LR"}};return r}({direction:e,labelField:n}),i)},[r]);return BU().createElement(sH,w(w({},i),{},{ref:e}),n)}),TH=(0,xU.memoize)(function(t,e){if(!e)return"center";var n=pb(t)[0];return pb(e)[0]>n?"left":"right"},function(t,e){return e?[pb(t),pb(e)].flat().join("-"):"center"}),PH=function(t,e){var n=t.getParentData(Sm(e),"tree");return TH(e,n)},IH=(0,xU.memoize)(function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i={fontWeight:0===r?600:400,fontSize:0===r?24:16};return{font:i,size:pH(t,0===r?[64,30]:[12,12],i,e,n)}}),NH=(0,xU.memoize)(function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i={fontWeight:0===r||1===r?600:400,fontSize:0===r?24:16};return{font:i,size:pH(t,0===r?[64,30]:[36,24],i,e,n)}}),LH=hR,_H=jR,QH={node:{type:"react",state:{active:{halo:!1},selected:{halo:!1}}},edge:{type:"indented",style:{lineWidth:3}},transforms:function(t){return[].concat(O(t),[{type:"collapse-expand-react-node",key:"collapse-expand-react-node",enable:!1,trigger:"icon",iconRender:function(t,e){return BU().createElement(LH,{graph:this,data:e,isCollapsed:t})}}])},layout:{type:"indented",direction:"LR",indent:function(t){return UH(t,20)},getVGap:function(){return 14},preLayout:!1},animation:{duration:500}},UH=function(t,e){if(0===t.depth)return 0;for(var n=e,r=t.parent;r;)n+=r.width/2,r=r.parent;return n/t.depth},jH=function(t,e){var n=PH(t,e);return"left"===n?"right":"center"===n?"center":"left"},DH=["children"],RH=["data","defaultExpandLevel","type","nodeMinWidth","nodeMaxWidth","direction","labelField"],HH=(0,EU.forwardRef)(function(t,e){var n=t.children,r=Zn(t,DH),i=r.data,o=r.defaultExpandLevel,a=r.type,s=void 0===a?"default":a,u=r.nodeMinWidth,c=r.nodeMaxWidth,l=r.direction,A=void 0===l?"right":l,f=r.labelField,d=Zn(r,RH),h=(0,EU.useMemo)(function(){return cH(uH,QH,{data:WR(i,o)},function(t){var e,n=t.type,r=t.direction,i=t.labelField,o={},a=t.nodeMinWidth||0,s=t.nodeMaxWidth||300;if("boxed"===n)o={node:{style:{component:function(t){var e,n=t.depth,r=null===(e=t.style)||void 0===e?void 0:e.color,o=lH(t,i),u=NH(o,a,s,n).font,c={type:0===n||1===n?"filled":"outlined",text:o,color:0===n?"#f1f4f5":r,maxWidth:s,font:u,style:w({textAlign:jH(this,t)},0===n?{color:"#252525"}:{})};return BU().createElement(_H,w({},c))},size:function(t){var e=lH(t,i);return NH(e,a,s,t.depth).size}}},edge:{style:{stroke:function(t){var e=this.getNodeData(t.source);return(0,xU.get)(e,"style.color","#99ADD1")},radius:16}},transforms:function(t){return[].concat(O(t),[{type:"assign-color-by-branch",key:"assign-color-by-branch"}])},layout:{type:"indented",getWidth:function(t){var e=lH(t,i);return v(NH(e,a,s,t.depth).size,1)[0]},getHeight:function(t){var e=lH(t,i);return v(NH(e,a,s,t.depth).size,2)[1]}}};else if("linear"===n)o={node:{style:{component:function(t){var e,n=t.depth,r=null===(e=t.style)||void 0===e?void 0:e.color,o=lH(t,i),u=IH(o,a,s,n).font,c={text:o,color:r,maxWidth:s,font:u};return Object.assign(c,0===n?{type:"filled",color:"#f1f4f5",style:{color:"#252525"}}:{type:"underlined",style:{textAlign:jH(this,t)}}),BU().createElement(_H,w({},c))},size:function(t){var e=lH(t,i);return IH(e,a,s,t.depth).size},ports:function(t){var e=PH(this,t);return"left"===e?[{placement:"bottom"},{placement:"bottom-right"}]:"center"===e?[{placement:"bottom"}]:[{placement:"bottom"},{placement:"bottom-left"}]}}},edge:{style:{stroke:function(t){var e=this.getNodeData(t.target);return(0,xU.get)(e,"style.color","#99ADD1")},radius:24}},layout:{type:"indented",getWidth:function(t){var e=lH(t,i);return v(IH(e,a,s,t.depth).size,1)[0]},getHeight:function(t){var e=lH(t,i);return v(IH(e,a,s,t.depth).size,2)[1]},getVGap:function(){return 12}},transforms:function(t){return[].concat(O(t),[{type:"assign-color-by-branch",key:"assign-color-by-branch"},{type:"arrange-edge-z-index",key:"arrange-edge-z-index"}])}};else{var u=[24,16];o={node:{style:{component:function(t){var e=lH(t,i);return BU().createElement(_H,{type:"filled",text:e})},size:function(t){return pH(lH(t,i),u)}}},layout:{type:"indented",getWidth:function(t){return v(pH(lH(t,i),u),1)[0]},getHeight:function(t){return v(pH(lH(t,i),u),2)[1]}}}}return r&&((e=o).layout||(e.layout={}),Object.assign(o.layout,{direction:"alternate"===r?"H":"left"===r?"RL":"LR"})),o}({type:s,nodeMinWidth:u,nodeMaxWidth:c,direction:A,labelField:f}),d)},[r]);return BU().createElement(sH,w(w({},h),{},{ref:e}),n)}),zH=hR,KH=jR,GH={node:{type:"react",state:{active:{halo:!1},selected:{halo:!1}}},edge:{type:"cubic-horizontal",style:{lineWidth:3}},transforms:function(t){return[].concat(O(t),[{type:"collapse-expand-react-node",key:"collapse-expand-react-node",enable:!1,trigger:"icon",iconRender:function(t,e){var n=PH(this,e);return BU().createElement(zH,{graph:this,data:e,isCollapsed:t,placement:"left"===n?"left":"right"})},iconPlacement:function(t){return"left"===PH(this,t)?"left":"right"}}])},layout:{type:"mindmap",direction:"H",preLayout:!1,getWidth:function(){return 120},getHGap:function(){return 64}},animation:{duration:500}},VH=["children"],WH=["data","type","nodeMinWidth","nodeMaxWidth","direction","labelField","defaultExpandLevel"],YH=(0,EU.forwardRef)(function(t,e){var n=t.children,r=Zn(t,VH),i=(0,EU.useMemo)(function(){var t=r.data,e=r.type,n=void 0===e?"default":e,i=r.nodeMinWidth,o=r.nodeMaxWidth,a=r.direction,s=void 0===a?"alternate":a,u=r.labelField,c=r.defaultExpandLevel,l=Zn(r,WH),A=cH(uH,GH,{data:WR(t,c)},function(t){var e,n=t.type,r=t.direction,i=t.nodeMinWidth,o=t.nodeMaxWidth,a=t.labelField,s={};if("boxed"===n){var u=i||120,c=o||300;s={node:{style:{component:function(t){var e,n=t.depth,r=null===(e=t.style)||void 0===e?void 0:e.color,i=lH(t,a),o=NH(i,u,c,n).font,s={text:i,color:r,maxWidth:c,font:o};return Object.assign(s,0===n?{type:"filled",color:"#f1f4f5",style:{color:"#252525"}}:1===n?{type:"filled"}:{type:"outlined"}),BU().createElement(KH,w({},s))},size:function(t){var e=lH(t,a);return NH(e,u,c,t.depth).size},dx:function(t){var e=PH(this,t),n=lH(t,a),r=v(NH(n,u,c,t.depth).size,1)[0];return"left"===e?-r:"center"===e?-r/2:0},ports:[{placement:"left"},{placement:"right"}]}},edge:{style:{stroke:function(t){var e=this.getNodeData(t.source);return(0,xU.get)(e,"style.color","#99ADD1")}}},transforms:function(t){return[].concat(O(t),[{type:"assign-color-by-branch",key:"assign-color-by-branch"}])},layout:{type:"mindmap",getHeight:function(t){var e=lH(t,a);return v(NH(e,u,c,t.depth).size,2)[1]},getVGap:function(){return 14}}}}else if("linear"===n){var l=i||0,A=o||300;s={node:{style:{component:function(t){var e,n=PH(this,t),r=t.depth,i=null===(e=t.style)||void 0===e?void 0:e.color,o=lH(t,a),s=IH(o,l,A,r).font,u={text:o,color:i,maxWidth:A,font:s};return Object.assign(u,0===r?{type:"filled",color:"#f1f4f5",style:{color:"#252525"}}:{type:"underlined",style:"left"===n?{textAlign:"right"}:"center"===n?{textAlign:"center"}:{}}),BU().createElement(KH,w({},u))},size:function(t){var e=lH(t,a);return IH(e,l,A,t.depth).size},dx:function(t){var e=PH(this,t),n=lH(t,a),r=v(IH(n,l,A,t.depth).size,1)[0];return"left"===e?-r:"center"===e?-r/2:0},dy:function(t){var e=lH(t,a);return v(IH(e,l,A,t.depth).size,2)[1]/2},ports:function(t){return"center"===PH(this,t)?[{placement:"left"},{placement:"right"}]:[{placement:"left-bottom"},{placement:"right-bottom"}]}}},edge:{style:{stroke:function(t){var e=this.getNodeData(t.target);return(0,xU.get)(e,"style.color","#99ADD1")}}},layout:{type:"mindmap",getHeight:function(t){var e=lH(t,a);return v(IH(e,l,A,t.depth).size,2)[1]},getVGap:function(){return 12}},transforms:function(t){return[].concat(O(t.filter(function(t){return"collapse-expand-react-node"!==t.key})),[{type:"assign-color-by-branch",key:"assign-color-by-branch"},w(w({},t.find(function(t){return"collapse-expand-react-node"===t.key})),{},{iconOffsetY:function(t){if(0===t.depth)return 0;var e=lH(t,a);return v(IH(e,l,A,t.depth).size,2)[1]/2}})])}}}else{var f=[24,16];s={node:{style:{component:function(t){var e=lH(t,a);return BU().createElement(KH,{type:"filled",text:e})},size:function(t){return pH(lH(t,a),f)},dx:function(t){var e=PH(this,t),n=v(pH(lH(t,a),f),1)[0];return"left"===e?-n:"center"===e?-n/2:0},ports:[{placement:"left"},{placement:"right"}]}},layout:{type:"mindmap",getHeight:function(t){return v(pH(lH(t,a),f),2)[1]}}}}return r&&((e=s).layout||(e.layout={}),s.layout.direction="alternate"===r?"H":"left"===r?"RL":"LR"),s}({type:n,nodeMinWidth:i,nodeMaxWidth:o,direction:s,labelField:u}),l);return A},[r]);return BU().createElement(sH,w(w({},i),{},{ref:e}),n)}),XH={node:{type:"circle"},layout:{type:"d3-force",link:{distance:128},collide:{radius:32},manyBody:{strength:-704},x:{},y:{}}},qH=["children"],ZH=(0,EU.forwardRef)(function(t,e){var n=t.children,r=Zn(t,qH),i=(0,EU.useMemo)(function(){return cH(uH,XH,r)},[r]);return BU().createElement(sH,w(w({},i),{},{ref:e}),n)}),JH=jR,$H={node:{type:"react",state:{active:{halo:!1},selected:{halo:!1}}},edge:{type:"polyline",style:{lineWidth:2,router:{type:"orth"}}},layout:{type:"dagre",animation:!1},transforms:["translate-react-node-origin"]},tz=["children"],ez=["direction","labelField"],nz=(0,EU.forwardRef)(function(t,e){var n=t.children,r=Zn(t,tz),i=(0,EU.useMemo)(function(){var t=r.direction,e=void 0===t?"vertical":t,n=r.labelField,i=Zn(r,ez),o=cH(uH,$H,function(t){var e=t.direction,n=t.labelField,r={node:{style:{component:function(t){var e=lH(t,n);return BU().createElement(JH,{type:"filled",text:e})},size:[100,40],ports:"vertical"===e?[{placement:"top"},{placement:"bottom"}]:[{placement:"left"},{placement:"right"}]}},transforms:function(t){return[].concat(O(t),[{type:"collapse-expand-react-node",key:"collapse-expand-react-node",iconPlacement:"vertical"===e?"bottom":"right",enable:!1,refreshLayout:!0}])},layout:{type:"dagre",rankdir:"vertical"===e?"TB":"LR"}};return r}({direction:e,labelField:n}),i);return o},[r]);return BU().createElement(sH,w(w({},i),{},{ref:e}),n)}),rz=function(){return[["cartesian"]]};rz.props={};var iz=function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={startAngle:-Math.PI/2,endAngle:3*Math.PI/2,innerRadius:0,outerRadius:1},i=Object.assign(Object.assign({},r),n);return Object.assign(Object.assign({},i),(t=i.startAngle,e=i.endAngle,t%=2*Math.PI,e%=2*Math.PI,t<0&&(t=2*Math.PI+t),e<0&&(e=2*Math.PI+e),t>=e&&(e+=2*Math.PI),{startAngle:t,endAngle:e}))},oz=function(t){var e=iz(t);return[["translate",0,.5],["reflect.y"],["translate",0,-.5],["polar",e.startAngle,e.endAngle,e.innerRadius,e.outerRadius]]};oz.props={};var az=function(){return[["transpose"],["translate",.5,.5],["reflect.x"],["translate",-.5,-.5]]};az.props={transform:!0};var sz=function(t){var e=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={startAngle:-Math.PI/2,endAngle:3*Math.PI/2,innerRadius:0,outerRadius:1};return Object.assign(Object.assign({},e),t)}(t),n=e.startAngle,r=e.endAngle,i=e.innerRadius,o=e.outerRadius;return[].concat(O(az()),O(oz({startAngle:n,endAngle:r,innerRadius:i,outerRadius:o})))};sz.props={};var uz=function(){return[["parallel",0,1,0,1]]};uz.props={};var cz=function(t){var e=t.focusX,n=void 0===e?0:e,r=t.focusY,i=void 0===r?0:r,o=t.distortionX,a=void 0===o?2:o,s=t.distortionY,u=void 0===s?2:s,c=t.visual;return[["fisheye",n,i,a,u,void 0!==c&&c]]};cz.props={transform:!0};var lz=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={startAngle:-Math.PI/2,endAngle:3*Math.PI/2,innerRadius:0,outerRadius:1};return Object.assign(Object.assign({},e),t)},Az=function(t){var e=lz(t),n=e.startAngle,r=e.endAngle,i=e.innerRadius,o=e.outerRadius;return[["transpose"],["translate",.5,.5],["reflect"],["translate",-.5,-.5]].concat(O(oz({startAngle:n,endAngle:r,innerRadius:i,outerRadius:o})))};Az.props={};var fz=function(t){var e=t.startAngle,n=void 0===e?-Math.PI/2:e,r=t.endAngle,i=void 0===r?3*Math.PI/2:r,o=t.innerRadius,a=void 0===o?0:o,s=t.outerRadius,u=void 0===s?1:s;return[].concat(O(uz()),O(oz({startAngle:n,endAngle:i,innerRadius:a,outerRadius:u})))};fz.props={};var dz=function(t){var e=t.startAngle,n=void 0===e?0:e,r=t.endAngle,i=void 0===r?6*Math.PI:r,o=t.innerRadius,a=void 0===o?0:o,s=t.outerRadius;return[["translate",.5,.5],["reflect.y"],["translate",-.5,-.5],["helix",n,i,a,void 0===s?1:s]]};dz.props={};var hz=function(t){var e=t.value;return function(t){return t.map(function(){return e})}};hz.props={};var pz=function(t){var e=t.value;return function(t){return t.map(function(t){return t[e]})}};pz.props={};var vz=function(t){var e=t.value;return function(t){return t.map(e)}};vz.props={};var gz=function(t){var e=t.value;return function(){return e}};function yz(t,e){if(null!==t)return{type:"column",value:t,field:e}}function mz(t,e){var n=yz(t,e);return Object.assign(Object.assign({},n),{inferred:!0})}function bz(t,e){if(null!==t)return{type:"column",value:t,field:e,visual:!0}}function wz(t,e){var n=yz(t,e);return Object.assign(Object.assign({},n),{constant:!1})}function xz(t,e){var n,r=[],i=qn(t);try{for(i.s();!(n=i.n()).done;)r[n.value]=e}catch(t){i.e(t)}finally{i.f()}return r}function Ez(t,e){var n=t[e];if(!n)return[null,null];var r=n.value,i=n.field;return[r,void 0===i?null:i]}function Bz(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];if("string"!=typeof a)return[a,null];var s=v(Ez(t,a),2),u=s[0],c=s[1];if(null!==u)return[u,c]}return[null,null]}function kz(t){return!(t instanceof Date)&&"object"==typeof t}gz.props={};var Oz=function(){return function(t,e){return void 0!==e.encode.y1?[t,e]:[t,Xm({},e,{encode:{y1:mz(xz(t,0))}})]}};Oz.props={};var Cz=function(){return function(t,e){return void 0!==e.encode.x?[t,e]:[t,Xm({},e,{encode:{x:mz(xz(t,0))},scale:{x:{guide:null}}})]}};function Mz(t){return function(){return t}}Cz.props={};var Sz,Fz,Tz,Pz,Iz,Nz,Lz,_z,Qz,Uz,jz,Dz,Rz,Hz,zz=Math.abs,Kz=Math.atan2,Gz=Math.cos,Vz=Math.max,Wz=Math.min,Yz=Math.sin,Xz=Math.sqrt,qz=1e-12,Zz=Math.PI,Jz=Zz/2,$z=2*Zz;function tK(t){return t>=1?Jz:t<=-1?-Jz:Math.asin(t)}var eK=Math.PI,nK=2*eK,rK=1e-6,iK=nK-rK;function oK(t){this._+=t[0];for(var e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}var aK=function(){return B(function t(e){x(this,t),this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?oK:function(t){var e=Math.floor(t);if(!(e>=0))throw new Error("invalid digits: ".concat(t));if(e>15)return oK;var n=Math.pow(10,e);return function(t){this._+=t[0];for(var e=1,r=t.length;e<r;++e)this._+=Math.round(arguments[e]*n)/n+t[e]}}(e)},[{key:"moveTo",value:function(t,e){this._append(Sz||(Sz=kU(["M",",",""])),this._x0=this._x1=+t,this._y0=this._y1=+e)}},{key:"closePath",value:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append(Fz||(Fz=kU(["Z"]))))}},{key:"lineTo",value:function(t,e){this._append(Tz||(Tz=kU(["L",",",""])),this._x1=+t,this._y1=+e)}},{key:"quadraticCurveTo",value:function(t,e,n,r){this._append(Pz||(Pz=kU(["Q",",",",",",",""])),+t,+e,this._x1=+n,this._y1=+r)}},{key:"bezierCurveTo",value:function(t,e,n,r,i,o){this._append(Iz||(Iz=kU(["C",",",",",",",",",",",""])),+t,+e,+n,+r,this._x1=+i,this._y1=+o)}},{key:"arcTo",value:function(t,e,n,r,i){if(t=+t,e=+e,n=+n,r=+r,(i=+i)<0)throw new Error("negative radius: ".concat(i));var o=this._x1,a=this._y1,s=n-t,u=r-e,c=o-t,l=a-e,A=c*c+l*l;if(null===this._x1)this._append(Nz||(Nz=kU(["M",",",""])),this._x1=t,this._y1=e);else if(A>rK)if(Math.abs(l*s-u*c)>rK&&i){var f=n-o,d=r-a,h=s*s+u*u,p=f*f+d*d,v=Math.sqrt(h),g=Math.sqrt(A),y=i*Math.tan((eK-Math.acos((h+A-p)/(2*v*g)))/2),m=y/g,b=y/v;Math.abs(m-1)>rK&&this._append(_z||(_z=kU(["L",",",""])),t+m*c,e+m*l),this._append(Qz||(Qz=kU(["A",",",",0,0,",",",",",""])),i,i,+(l*f>c*d),this._x1=t+b*s,this._y1=e+b*u)}else this._append(Lz||(Lz=kU(["L",",",""])),this._x1=t,this._y1=e)}},{key:"arc",value:function(t,e,n,r,i,o){if(t=+t,e=+e,o=!!o,(n=+n)<0)throw new Error("negative radius: ".concat(n));var a=n*Math.cos(r),s=n*Math.sin(r),u=t+a,c=e+s,l=1^o,A=o?r-i:i-r;null===this._x1?this._append(Uz||(Uz=kU(["M",",",""])),u,c):(Math.abs(this._x1-u)>rK||Math.abs(this._y1-c)>rK)&&this._append(jz||(jz=kU(["L",",",""])),u,c),n&&(A<0&&(A=A%nK+nK),A>iK?this._append(Dz||(Dz=kU(["A",",",",0,1,",",",",","A",",",",0,1,",",",",",""])),n,n,l,t-a,e-s,n,n,l,this._x1=u,this._y1=c):A>rK&&this._append(Rz||(Rz=kU(["A",",",",0,",",",",",",",""])),n,n,+(A>=eK),l,this._x1=t+n*Math.cos(i),this._y1=e+n*Math.sin(i)))}},{key:"rect",value:function(t,e,n,r){this._append(Hz||(Hz=kU(["M",",","h","v","h","Z"])),this._x0=this._x1=+t,this._y0=this._y1=+e,n=+n,+r,-n)}},{key:"toString",value:function(){return this._}}])}();function sK(){return new aK}function uK(t){var e=3;return t.digits=function(n){if(!arguments.length)return e;if(null==n)e=null;else{var r=Math.floor(n);if(!(r>=0))throw new RangeError("invalid digits: ".concat(n));e=r}return t},function(){return new aK(e)}}function cK(t){return t.innerRadius}function lK(t){return t.outerRadius}function AK(t){return t.startAngle}function fK(t){return t.endAngle}function dK(t){return t&&t.padAngle}function hK(t,e,n,r,i,o,a){var s=t-n,u=e-r,c=(a?o:-o)/Xz(s*s+u*u),l=c*u,A=-c*s,f=t+l,d=e+A,h=n+l,p=r+A,v=(f+h)/2,g=(d+p)/2,y=h-f,m=p-d,b=y*y+m*m,w=i-o,x=f*p-h*d,E=(m<0?-1:1)*Xz(Vz(0,w*w*b-x*x)),B=(x*m-y*E)/b,k=(-x*y-m*E)/b,O=(x*m+y*E)/b,C=(-x*y+m*E)/b,M=B-v,S=k-g,F=O-v,T=C-g;return M*M+S*S>F*F+T*T&&(B=O,k=C),{cx:B,cy:k,x01:-l,y01:-A,x11:B*(i/w-1),y11:k*(i/w-1)}}function pK(){var t=cK,e=lK,n=Mz(0),r=null,i=AK,o=fK,a=dK,s=null,u=uK(c);function c(){var c,l,A,f=+t.apply(this,arguments),d=+e.apply(this,arguments),h=i.apply(this,arguments)-Jz,p=o.apply(this,arguments)-Jz,v=zz(p-h),g=p>h;if(s||(s=c=u()),d<f&&(l=d,d=f,f=l),d>qz)if(v>$z-qz)s.moveTo(d*Gz(h),d*Yz(h)),s.arc(0,0,d,h,p,!g),f>qz&&(s.moveTo(f*Gz(p),f*Yz(p)),s.arc(0,0,f,p,h,g));else{var y,m,b=h,w=p,x=h,E=p,B=v,k=v,O=a.apply(this,arguments)/2,C=O>qz&&(r?+r.apply(this,arguments):Xz(f*f+d*d)),M=Wz(zz(d-f)/2,+n.apply(this,arguments)),S=M,F=M;if(C>qz){var T=tK(C/f*Yz(O)),P=tK(C/d*Yz(O));(B-=2*T)>qz?(x+=T*=g?1:-1,E-=T):(B=0,x=E=(h+p)/2),(k-=2*P)>qz?(b+=P*=g?1:-1,w-=P):(k=0,b=w=(h+p)/2)}var I=d*Gz(b),N=d*Yz(b),L=f*Gz(E),_=f*Yz(E);if(M>qz){var Q,U=d*Gz(w),j=d*Yz(w),D=f*Gz(x),R=f*Yz(x);if(v<Zz)if(Q=function(t,e,n,r,i,o,a,s){var u=n-t,c=r-e,l=a-i,A=s-o,f=A*u-l*c;if(!(f*f<qz))return[t+(f=(l*(e-o)-A*(t-i))/f)*u,e+f*c]}(I,N,D,R,U,j,L,_)){var H=I-Q[0],z=N-Q[1],K=U-Q[0],G=j-Q[1],V=1/Yz(((A=(H*K+z*G)/(Xz(H*H+z*z)*Xz(K*K+G*G)))>1?0:A<-1?Zz:Math.acos(A))/2),W=Xz(Q[0]*Q[0]+Q[1]*Q[1]);S=Wz(M,(f-W)/(V-1)),F=Wz(M,(d-W)/(V+1))}else S=F=0}k>qz?F>qz?(y=hK(D,R,I,N,d,F,g),m=hK(U,j,L,_,d,F,g),s.moveTo(y.cx+y.x01,y.cy+y.y01),F<M?s.arc(y.cx,y.cy,F,Kz(y.y01,y.x01),Kz(m.y01,m.x01),!g):(s.arc(y.cx,y.cy,F,Kz(y.y01,y.x01),Kz(y.y11,y.x11),!g),s.arc(0,0,d,Kz(y.cy+y.y11,y.cx+y.x11),Kz(m.cy+m.y11,m.cx+m.x11),!g),s.arc(m.cx,m.cy,F,Kz(m.y11,m.x11),Kz(m.y01,m.x01),!g))):(s.moveTo(I,N),s.arc(0,0,d,b,w,!g)):s.moveTo(I,N),f>qz&&B>qz?S>qz?(y=hK(L,_,U,j,f,-S,g),m=hK(I,N,D,R,f,-S,g),s.lineTo(y.cx+y.x01,y.cy+y.y01),S<M?s.arc(y.cx,y.cy,S,Kz(y.y01,y.x01),Kz(m.y01,m.x01),!g):(s.arc(y.cx,y.cy,S,Kz(y.y01,y.x01),Kz(y.y11,y.x11),!g),s.arc(0,0,f,Kz(y.cy+y.y11,y.cx+y.x11),Kz(m.cy+m.y11,m.cx+m.x11),g),s.arc(m.cx,m.cy,S,Kz(m.y11,m.x11),Kz(m.y01,m.x01),!g))):s.arc(0,0,f,E,x,g):s.lineTo(L,_)}else s.moveTo(0,0);if(s.closePath(),c)return s=null,c+""||null}return c.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-Zz/2;return[Gz(r)*n,Yz(r)*n]},c.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:Mz(+e),c):t},c.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:Mz(+t),c):e},c.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:Mz(+t),c):n},c.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:Mz(+t),c):r},c.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:Mz(+t),c):i},c.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:Mz(+t),c):o},c.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:Mz(+t),c):a},c.context=function(t){return arguments.length?(s=null==t?null:t,c):s},c}function vK(t){var e=t.getOptions().transformations.map(function(t){return v(t,1)[0]}).filter(function(t){return"transpose"===t});return e.length%2!=0}function gK(t){return t.getOptions().transformations.some(function(t){return"polar"===v(t,1)[0]})}function yK(t){var e=t.getOptions().transformations;return e.some(function(t){return"reflect"===v(t,1)[0]})&&e.some(function(t){return v(t,1)[0].startsWith("transpose")})}function mK(t){return t.getOptions().transformations.some(function(t){return"helix"===v(t,1)[0]})}function bK(t){return t.getOptions().transformations.some(function(t){return"parallel"===v(t,1)[0]})}function wK(t){return t.getOptions().transformations.some(function(t){return"fisheye"===v(t,1)[0]})}function xK(t){return mK(t)||gK(t)}function EK(t){var e=t.getOptions().transformations.find(function(t){return"polar"===t[0]}),n=v(e,5);return[+n[3],+n[4]]}function BK(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t.getOptions().transformations.find(function(t){return"polar"===t[0]}),r=v(n,3),i=r[1],o=r[2];return e?[180*+i/Math.PI,180*+o/Math.PI]:[i,o]}sK.prototype=aK.prototype;var kK=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:SK;if(x(this,e),n=F(this,e),Object.defineProperties(n,{_intern:{value:new Map},_key:{value:r}}),null!=t){var i,o=qn(t);try{for(o.s();!(i=o.n()).done;){var a=v(i.value,2),s=a[0],u=a[1];n.set(s,u)}}catch(t){o.e(t)}finally{o.f()}}return n}return P(e,t),B(e,[{key:"get",value:function(t){return xn(e,"get",this,3)([OK(this,t)])}},{key:"has",value:function(t){return xn(e,"has",this,3)([OK(this,t)])}},{key:"set",value:function(t,n){return xn(e,"set",this,3)([CK(this,t),n])}},{key:"delete",value:function(t){return xn(e,"delete",this,3)([MK(this,t)])}}])}(QN(Map));function OK(t,e){var n=t._intern,r=(0,t._key)(e);return n.has(r)?n.get(r):e}function CK(t,e){var n=t._intern,r=(0,t._key)(e);return n.has(r)?n.get(r):(n.set(r,e),e)}function MK(t,e){var n=t._intern,r=(0,t._key)(e);return n.has(r)&&(e=n.get(r),n.delete(r)),e}function SK(t){return null!==t&&"object"==typeof t?t.valueOf():t}function FK(t){return t}function TK(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return LK(t,FK,FK,n)}function PK(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return LK(t,Array.from,FK,n)}function IK(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return LK(t,FK,e,r)}function NK(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return LK(t,Array.from,e,r)}function LK(t,e,n,r){return function t(i,o){if(o>=r.length)return n(i);var a,s=new kK,u=r[o++],c=-1,l=qn(i);try{for(l.s();!(a=l.n()).done;){var A=a.value,f=u(A,++c,i),d=s.get(f);d?d.push(A):s.set(f,[A])}}catch(t){l.e(t)}finally{l.f()}var h,p=qn(s);try{for(p.s();!(h=p.n()).done;){var g=v(h.value,2),y=g[0],m=g[1];s.set(y,t(m,o))}}catch(t){p.e(t)}finally{p.f()}return e(s)}(t,0)}function _K(t,e){var n=t.map,r=(0,t.initKey)(e);return n.has(r)?n.get(r):e}function QK(t,e){var n=t.map,r=(0,t.initKey)(e);return n.has(r)?n.get(r):(n.set(r,e),e)}function UK(t,e){var n=t.map,r=(0,t.initKey)(e);return n.has(r)&&(e=n.get(r),n.delete(r)),e}function jK(t){return"object"==typeof t?t.valueOf():t}var DK=function(t){function e(t){var n;if(x(this,e),(n=F(this,e)).map=new Map,n.initKey=jK,null!==t){var r,i=qn(t);try{for(i.s();!(r=i.n()).done;){var o=v(r.value,2),a=o[0],s=o[1];n.set(a,s)}}catch(t){i.e(t)}finally{i.f()}}return n}return P(e,t),B(e,[{key:"get",value:function(t){return xn(e,"get",this,3)([_K({map:this.map,initKey:this.initKey},t)])}},{key:"has",value:function(t){return xn(e,"has",this,3)([_K({map:this.map,initKey:this.initKey},t)])}},{key:"set",value:function(t,n){return xn(e,"set",this,3)([QK({map:this.map,initKey:this.initKey},t),n])}},{key:"delete",value:function(t){return xn(e,"delete",this,3)([UK({map:this.map,initKey:this.initKey},t)])}}])}(QN(Map)),RK=function(){return B(function t(e){var n;x(this,t),this.options=Xm({},this.getDefaultOptions()),this.update((null===(n=null==e?void 0:e.breaks)||void 0===n?void 0:n.length)?this.transformBreaks(e):e)},[{key:"transformBreaks",value:function(t){return t}},{key:"getOptions",value:function(){return this.options}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.breaks?this.transformBreaks(t):t;this.options=Xm({},this.options,e),this.rescale(e)}},{key:"rescale",value:function(t){}}])}(),HK=Symbol("defaultUnknown");function zK(t,e,n){for(var r=0;r<e.length;r+=1)t.has(e[r])||t.set(n(e[r]),r)}function KK(t){var e=t.value,n=t.from,r=t.to,i=t.mapper,o=t.notFoundReturn,a=i.get(e);if(void 0===a){if(o!==HK)return o;a=n.push(e)-1,i.set(e,a)}return r[a%r.length]}function GK(t){return t instanceof Date?function(t){return"".concat(t)}:"object"==typeof t?function(t){return JSON.stringify(t)}:function(t){return t}}var VK=function(t){function e(t){return x(this,e),F(this,e,[t])}return P(e,t),B(e,[{key:"getDefaultOptions",value:function(){return{domain:[],range:[],unknown:HK}}},{key:"map",value:function(t){return 0===this.domainIndexMap.size&&zK(this.domainIndexMap,this.getDomain(),this.domainKey),KK({value:this.domainKey(t),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}},{key:"invert",value:function(t){return 0===this.rangeIndexMap.size&&zK(this.rangeIndexMap,this.getRange(),this.rangeKey),KK({value:this.rangeKey(t),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}},{key:"rescale",value:function(t){var e=v(this.options.domain,1)[0],n=v(this.options.range,1)[0];if(this.domainKey=GK(e),this.rangeKey=GK(n),!this.rangeIndexMap)return this.rangeIndexMap=new Map,void(this.domainIndexMap=new Map);t&&!t.range||this.rangeIndexMap.clear(),(!t||t.domain||t.compare)&&(this.domainIndexMap.clear(),this.sortedDomain=void 0)}},{key:"clone",value:function(){return new e(this.options)}},{key:"getRange",value:function(){return this.options.range}},{key:"getDomain",value:function(){if(this.sortedDomain)return this.sortedDomain;var t=this.options,e=t.domain,n=t.compare;return this.sortedDomain=n?O(e).sort(n):e,this.sortedDomain}}])}(RK);function WK(t){return Math.round(1e12*t)/1e12}var YK=function(t){function e(t){return x(this,e),F(this,e,[t])}return P(e,t),B(e,[{key:"getDefaultOptions",value:function(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:HK,flex:[]}}},{key:"clone",value:function(){return new e(this.options)}},{key:"getStep",value:function(t){return void 0===this.valueStep?1:"number"==typeof this.valueStep?this.valueStep:void 0===t?Array.from(this.valueStep.values())[0]:this.valueStep.get(t)}},{key:"getBandWidth",value:function(t){return void 0===this.valueBandWidth?1:"number"==typeof this.valueBandWidth?this.valueBandWidth:void 0===t?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(t)}},{key:"getRange",value:function(){return this.adjustedRange}},{key:"getPaddingInner",value:function(){var t=this.options,e=t.padding,n=t.paddingInner;return e>0?e:n}},{key:"getPaddingOuter",value:function(){var t=this.options,e=t.padding,n=t.paddingOuter;return e>0?e:n}},{key:"rescale",value:function(){xn(e,"rescale",this,3)([]);var t=this.options,n=t.align,r=t.domain,i=function(t){var e,n=t.domain.length;if(0===n)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(null===(e=t.flex)||void 0===e?void 0:e.length)return function(t){for(var e=t.domain,n=t.range,r=t.paddingOuter,i=t.paddingInner,o=t.flex,a=t.round,s=t.align,u=e.length,c=function(t,e){var n=e-t.length;return n>0?[].concat(O(t),O(new Array(n).fill(1))):n<0?t.slice(0,e):t}(o,u),l=v(n,2),A=l[0],f=l[1]-A,d=f/(2/u*r+1-1/u*i),h=d*i/u,p=d-u*h,g=function(t){var e=t.reduce(function(t,e){return Math.min(t,e)},1/0);return e===1/0?[]:t.map(function(t){return t/e})}(c),y=g.reduce(function(t,e){return t+e}),m=p/y,b=new DK(e.map(function(t,e){var n=g[e]*m;return[t,a?Math.floor(n):n]})),w=new DK(e.map(function(t,e){var n=g[e]*m+h;return[t,a?Math.floor(n):n]})),x=Array.from(w.values()).reduce(function(t,e){return t+e}),E=A+(f-(x-x/u*i))*s,B=a?Math.round(E):E,k=new Array(u),C=0;C<u;C+=1){k[C]=WK(B);var M=e[C];B+=w.get(M)}return{valueBandWidth:b,valueStep:w,adjustedRange:k}}(t);var r,i,o=t.range,a=t.paddingOuter,s=t.paddingInner,u=t.round,c=t.align,l=o[0],A=o[1]-l,f=2*a,d=n-s;r=A/Math.max(1,f+d),u&&(r=Math.floor(r)),l+=(A-r*(n-s))*c,i=r*(1-s),u&&(l=Math.round(l),i=Math.round(i));var h=new Array(n).fill(0).map(function(t,e){return l+e*r});return{valueStep:r,valueBandWidth:i,adjustedRange:h}}({align:n,range:t.range,round:t.round,flex:t.flex,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:r}),o=i.adjustedRange,a=i.valueBandWidth,s=i.valueStep;this.valueStep=s,this.valueBandWidth=a,this.adjustedRange=o}}])}(VK),XK=Math.sqrt(50),qK=Math.sqrt(10),ZK=Math.sqrt(2);function JK(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=XK?10:o>=qK?5:o>=ZK?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=XK?10:o>=qK?5:o>=ZK?2:1)}function $K(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=XK?i*=10:o>=qK?i*=5:o>=ZK&&(i*=2),e<t?-i:i}var tG=function(t,e,n,r){var i,o,a=t,s=e;if(a===s&&n>0)return[a];var u=JK(a,s,n);if(0===u||!Number.isFinite(u))return[];if(u>0){a=Math.ceil(a/u),s=Math.floor(s/u),o=new Array(i=Math.ceil(s-a+1));for(var c=0;c<i;c+=1)o[c]=(a+c)*u}else{u=-u,a=Math.ceil(a*u),s=Math.floor(s*u),o=new Array(i=Math.ceil(s-a+1));for(var l=0;l<i;l+=1)o[l]=(a+l)/u}return function(t,e){if(!(null==e?void 0:e.length))return t;var n=[].concat(O(t),O(e.flatMap(function(t){return[t.start,t.end]}))),r=Array.from(new Set(n)).sort(function(t,e){return t-e}).filter(function(t){return!e.some(function(e){var n=e.start,r=e.end;return t>n&&t<r})});return r.length?r:t}(o,r)},eG=function(t){function e(){return x(this,e),F(this,e,arguments)}return P(e,t),B(e,[{key:"getDefaultOptions",value:function(){return{range:[0],domain:[0,1],unknown:void 0,tickCount:5,tickMethod:tG}}},{key:"map",value:function(t){var e=v(this.options.range,1)[0];return void 0!==e?e:this.options.unknown}},{key:"invert",value:function(t){var e=v(this.options.range,1)[0];return t===e&&void 0!==e?this.options.domain:[]}},{key:"getTicks",value:function(){var t=this.options,e=t.tickMethod,n=t.domain,r=t.tickCount,i=v(n,2),o=i[0],a=i[1];return de(o)&&de(a)?e(o,a,r):[]}},{key:"clone",value:function(){return new e(this.options)}}])}(RK);function nG(t){for(var e,n=t;n;){if("view"===(null===(e=n.attributes)||void 0===e?void 0:e.class))return n;n=n.parentNode}return null}function rG(t){var e=t.markType,n=t.nodeName;return"heatmap"===e&&"image"===n}function iG(t,e){var n=null!=e?e:nG(t).__data__,r=t.__data__,i=r.markKey,o=r.index,a=r.seriesIndex,s=r.normalized,u=void 0===s?{x:0}:s,c=n.markState,l=Array.from(c.keys()).find(function(t){return t.key===i});if(l)return a?a.map(function(t){return l.data[t]}):rG(t)?l.data[Math.round(l.data.length*u.x)]:l.data[o]}function oG(t){return aG(nG(t).__data__.scale,t.__data__)}function aG(t,e){var n=t.color,r=t.facet,i=void 0!==r&&r,o=e.color,a=e.series,s=function(t,e){var n,r,i,o,a=null!==(n=e.markKey)&&void 0!==n?n:null===(i=null===(r=e.element)||void 0===r?void 0:r.__data__)||void 0===i?void 0:i.markKey,s=Object.keys(t).find(function(e){if(e.startsWith("series")){var n=t[e].getOptions();return"series"===n.name&&n.markKey===a}});return null!==(o=t[s])&&void 0!==o?o:t.series}(t,e),u=function(t){return t&&t.invert&&!(t instanceof YK)&&!(t instanceof eG)};if(u(s))return s.clone().invert(a);if(a&&s instanceof YK&&s.invert(a)!==o&&!i)return s.invert(a);if(u(n)){var c=n.invert(o);return Array.isArray(c)?null:c}return null}function sG(t){return t}function uG(t){return t.reduce(function(t,e){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return e.apply(void 0,[t.apply(void 0,[n].concat(i))].concat(i))}},sG)}function cG(t){var e=this;return t.reduce(function(t,n){return function(r){return i=e,o=void 0,a=void 0,s=(0,Dn.A)().m(function e(){var i;return(0,Dn.A)().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t(r);case 1:return i=e.v,e.a(2,n(i))}},e)}),new(a||(a=Promise))(function(t,e){function n(t){try{u(s.next(t))}catch(t){e(t)}}function r(t){try{u(s.throw(t))}catch(t){e(t)}}function u(e){e.done?t(e.value):function(t){return t instanceof a?t:new a(function(e){e(t)})}(e.value).then(n,r)}u((s=s.apply(i,o||[])).next())});var i,o,a,s}},sG)}function lG(t){return t.replace(/( |^)[a-z]/g,function(t){return t.toUpperCase()})}function AG(){throw new Error(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}function fG(t,e){for(var n=e.attributes,r=new Set(["id","className"]),i=0,o=Object.entries(n);i<o.length;i++){var a=v(o[i],2),s=a[0],u=a[1];r.has(s)||t.attr(s,u)}}function dG(t){return null!=t&&!Number.isNaN(t)}function hG(t,e){return pG(t,e)||{}}function pG(t,e){var n=Object.entries(t||{}).filter(function(t){return v(t,1)[0].startsWith(e)}).map(function(t){var n=v(t,2),r=n[0],i=n[1];return[Wb(r.replace(e,"").trim()),i]}).filter(function(t){return!!v(t,1)[0]});return 0===n.length?null:Object.fromEntries(n)}function vG(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Object.fromEntries(Object.entries(t).filter(function(t){var e=v(t,1)[0];return n.every(function(t){return!e.startsWith(t)})}))}function gG(t,e){if(void 0===t)return null;if("number"==typeof t)return t;var n=+t.replace("%","");return Number.isNaN(n)?null:n/100*e}function yG(t){return!("object"!=typeof t||t instanceof Date||null===t||Array.isArray(t))}function mG(t){return null===t||!1===t}function bG(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!(r>=n)){for(var i=0,o=Object.keys(e);i<o.length;i++){var a=o[i],s=e[a];Vm(s)&&Vm(t[a])?bG(t[a],s,n,r+1):t[a]=s}return t}}function wG(t){return new xG([t],null,t,t.ownerDocument)}var xG=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[null,null,null,null,null],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[];x(this,t),this._elements=Array.from(e),this._data=n,this._parent=r,this._document=i,this._enter=o[0],this._update=o[1],this._exit=o[2],this._merge=o[3],this._split=o[4],this._transitions=a,this._facetElements=s}return B(t,[{key:"selectAll",value:function(e){return new t("string"==typeof e?this._parent.querySelectorAll(e):e,null,this._elements[0],this._document)}},{key:"selectFacetAll",value:function(e){var n="string"==typeof e?this._parent.querySelectorAll(e):e;return new t(this._elements,null,this._parent,this._document,void 0,void 0,n)}},{key:"select",value:function(e){var n="string"==typeof e?this._parent.querySelectorAll(e)[0]||null:e;return new t([n],null,n,this._document)}},{key:"append",value:function(e){var n=this,r="function"==typeof e?e:function(){return n.createElement(e)},i=[];if(null!==this._data){for(var o=0;o<this._data.length;o++){var a=this._data[o],s=v(Array.isArray(a)?a:[a,null],2),u=s[0],c=s[1],l=r(u,o);l.__data__=u,null!==c&&(l.__fromElements__=c),this._parent.appendChild(l),i.push(l)}return new t(i,null,this._parent,this._document)}for(var A=0;A<this._elements.length;A++){var f=this._elements[A],d=r(f.__data__,A);f.appendChild(d),i.push(d)}return new t(i,null,i[0],this._document)}},{key:"maybeAppend",value:function(e,n,r){var i=this._elements[0],o=i.getElementById(e);if(o)return new t([o],null,this._parent,this._document);var a="string"==typeof n?this.createElement(n):n();return a.id=e,r&&(a.className=r),i.appendChild(a),new t([a],null,this._parent,this._document)}},{key:"data",value:function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return null},i=[],o=[],a=new Set(this._elements),s=[],u=new Set,c=new Map(this._elements.map(function(t,e){return[n(t.__data__,e),t]})),l=new Map(this._facetElements.map(function(t,e){return[n(t.__data__,e),t]})),A=TK(this._elements,function(t){return r(t.__data__)}),f=0;f<e.length;f++){var d=e[f],h=n(d,f),p=r(d,f);if(c.has(h)){var v=c.get(h);v.__data__=d,v.__facet__=!1,o.push(v),a.delete(v),c.delete(h)}else if(l.has(h)){var g=l.get(h);g.__data__=d,g.__facet__=!0,o.push(g),l.delete(h)}else if(A.has(h)){var y=A.get(h);s.push([d,y]);var m,b=qn(y);try{for(b.s();!(m=b.n()).done;){var w=m.value;a.delete(w)}}catch(t){b.e(t)}finally{b.f()}A.delete(h)}else if(c.has(p)){var x=c.get(p);x.__toData__?x.__toData__.push(d):x.__toData__=[d],u.add(x),a.delete(x)}else i.push(d)}var E=[new t([],i,this._parent,this._document),new t(o,null,this._parent,this._document),new t(a,null,this._parent,this._document),new t([],s,this._parent,this._document),new t(u,null,this._parent,this._document)];return new t(this._elements,null,this._parent,this._document,E)}},{key:"merge",value:function(e){var n=[].concat(O(this._elements),O(e._elements)),r=[].concat(O(this._transitions),O(e._transitions));return new t(n,null,this._parent,this._document,void 0,r)}},{key:"createElement",value:function(e){if(this._document)return this._document.createElement(e,{});var n=t.registry[e];return n?new n:AG("Unknown node type: ".concat(e))}},{key:"join",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(t){return t},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t){return t.remove()},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(t){return t},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(t){return t.remove()},o=t(this._enter),a=e(this._update),s=n(this._exit),u=r(this._merge),c=i(this._split);return a.merge(o).merge(s).merge(u).merge(c)}},{key:"remove",value:function(){for(var e=this,n=function(t){var n=e._transitions[t];if(e._elements[t].__removed__=!0,n){var r=Array.isArray(n)?n:[n];Promise.all(r.map(function(t){return t.finished})).then(function(){var n=e._elements[t];n.__removed__&&n.remove()})}else{var i=e._elements[t];i.__removed__&&i.remove()}},r=0;r<this._elements.length;r++)n(r);return new t([],null,this._parent,this._document,void 0,this._transitions)}},{key:"each",value:function(t){for(var e=0;e<this._elements.length;e++){var n=this._elements[e];t(n.__data__,e,n)}return this}},{key:"attr",value:function(t,e){var n="function"!=typeof e?function(){return e}:e;return this.each(function(r,i,o){void 0!==e&&(o[t]=n(r,i,o))})}},{key:"style",value:function(t,e){var n="function"!=typeof e?function(){return e}:e;return this.each(function(r,i,o){void 0!==e&&(o.style[t]=n(r,i,o))})}},{key:"transition",value:function(t){var e="function"!=typeof t?function(){return t}:t,n=this._transitions;return this.each(function(t,r,i){n[r]=e(t,r,i)})}},{key:"on",value:function(t,e){return this.each(function(n,r,i){i.addEventListener(t,e)}),this}},{key:"call",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.apply(void 0,[this].concat(n)),this}},{key:"node",value:function(){return this._elements[0]}},{key:"nodes",value:function(){return this._elements}},{key:"transitions",value:function(){return this._transitions}},{key:"parent",value:function(){return this._parent}}])}();function EG(t,e){var n=v(t,2),r=n[0],i=n[1],o=v(e,2);return[r-o[0],i-o[1]]}function BG(t,e){var n=v(t,2),r=n[0],i=n[1],o=v(e,2);return[r+o[0],i+o[1]]}function kG(t,e){var n=v(t,2),r=n[0],i=n[1],o=v(e,2),a=o[0],s=o[1];return Math.sqrt(Math.pow(r-a,2)+Math.pow(i-s,2))}function OG(t){var e=v(t,2),n=e[0],r=e[1];return Math.atan2(r,n)}function CG(t){var e=v(t,2);return OG([e[0],e[1]])+Math.PI/2}function MG(t,e){var n=OG(t),r=OG(e);return n<r?r-n:2*Math.PI-(n-r)}function SG(t){var e,n=1/0,r=-1/0,i=1/0,o=-1/0,a=qn(t);try{for(a.s();!(e=a.n()).done;){var s=v(e.value,2),u=s[0],c=s[1];n=Math.min(u,n),r=Math.max(u,r),i=Math.min(c,i),o=Math.max(c,o)}}catch(t){a.e(t)}finally{a.f()}return[n,i,r-n,o-i]}function FG(t,e){var n=v(t,2),r=n[0],i=n[1],o=v(e,2);return[(r+o[0])/2,(i+o[1])/2]}function TG(t,e,n){return Math.max(e,Math.min(t,n))}function PG(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return"number"!=typeof t||Math.abs(t)<1e-15?t:parseFloat(t.toFixed(e))}function IG(t){if(Wg(t))return t[t.length-1]}function NG(t,e){return e-t?function(n){return(n-t)/(e-t)}:function(t){return.5}}function LG(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.reduce(function(t,e){return function(n){return t(e(n))}},t)}function _G(t,e,n,r,i){for(var o=n||0,a=r||t.length,s=i||function(t){return t};o<a;){var u=Math.floor((o+a)/2);s(t[u])>e?a=u:o=u+1}return o}function QG(t,e,n){var r=n;return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function UG(t){var e=gN().get(t);if(!e)return null;var n=e.model,r=e.value;return"rgb"===n?r:"hsl"===n?function(t){var e=t[0]/360,n=t[1]/100,r=t[2]/100,i=t[3];if(0===n)return[255*r,255*r,255*r,i];var o=r<.5?r*(1+n):r+n-r*n,a=2*r-o;return[255*QG(a,o,e+1/3),255*QG(a,o,e),255*QG(a,o,e-1/3),i]}(r):null}xG.registry={g:_u,rect:Yu,circle:Pu,path:zu,text:qu,ellipse:Lu,image:ju,line:Ru,polygon:Gu,polyline:Wu,html:Uu};var jG=function(t,e){return function(n){return t*(1-n)+e*n}},DG=function(t,e){return"number"==typeof t&&"number"==typeof e?jG(t,e):"string"==typeof t&&"string"==typeof e?function(t,e){var n=UG(t),r=UG(e);return null===n||null===r?n?function(){return t}:function(){return e}:function(t){for(var e=new Array(4),i=0;i<4;i+=1){var o=n[i],a=r[i];e[i]=o*(1-t)+a*t}var s=e[0],u=e[1],c=e[2],l=e[3];return"rgba(".concat(Math.round(s),", ").concat(Math.round(u),", ").concat(Math.round(c),", ").concat(l,")")}}(t,e):function(){return t}},RG=function(t,e){var n=jG(t,e);return function(t){return Math.round(n(t))}};function HG(t){return!pn(t)&&!EN(t)&&!Number.isNaN(t)}var zG=function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,i=[t,e],o=0,a=i.length-1,s=i[o],u=i[a];if(u<s){var c=[u,s];s=c[0],u=c[1];var l=[a,o];o=l[0],a=l[1]}return(n=JK(s,u,r))>0?n=JK(s=Math.floor(s/n)*n,u=Math.ceil(u/n)*n,r):n<0&&(n=JK(s=Math.ceil(s*n)/n,u=Math.floor(u*n)/n,r)),n>0?(i[o]=Math.floor(s/n)*n,i[a]=Math.ceil(u/n)*n):n<0&&(i[o]=Math.ceil(s*n)/n,i[a]=Math.floor(u*n)/n),i},KG=function(t,e,n){var r,i,o=v(t,2),a=o[0],s=o[1],u=v(e,2),c=u[0],l=u[1];return a<s?(r=NG(a,s),i=n(c,l)):(r=NG(s,a),i=n(l,c)),LG(i,r)},GG=function(t,e,n){for(var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=t[0]>t[r],s=a?O(t).reverse():t,u=a?O(e).reverse():e,c=0;c<r;c+=1)i[c]=NG(s[c],s[c+1]),o[c]=n(u[c],u[c+1]);return function(e){var n=_G(t,e,1,r)-1,a=i[n];return LG(o[n],a)(e)}},VG=function(t,e,n,r){return(Math.min(t.length,e.length)>2?GG:KG)(t,e,r?RG:n)},WG=function(t){function e(){return x(this,e),F(this,e,arguments)}return P(e,t),B(e,[{key:"getDefaultOptions",value:function(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:jG,tickCount:5}}},{key:"map",value:function(t){return HG(t)?this.output(t):this.options.unknown}},{key:"invert",value:function(t){return HG(t)?this.input(t):this.options.unknown}},{key:"nice",value:function(){if(this.options.nice&&!tn(this.options.breaks)){var t=hw(this.getTickMethodOptions()),e=t[0],n=t[1],r=t[2],i=d(t).slice(3);this.options.domain=this.chooseNice().apply(void 0,[e,n,r].concat(O(i)))}}},{key:"getTicks",value:function(){var t=this.options.tickMethod,e=hw(this.getTickMethodOptions()),n=e[0],r=e[1],i=e[2],o=d(e).slice(3);return t.apply(void 0,[n,r,i].concat(O(o)))}},{key:"getTickMethodOptions",value:function(){var t=this.options,e=t.domain,n=t.tickCount;return[e[0],e[e.length-1],n]}},{key:"chooseNice",value:function(){return zG}},{key:"rescale",value:function(){this.nice();var t=v(this.chooseTransforms(),2),e=t[0],n=t[1];this.composeOutput(e,this.chooseClamp(e)),this.composeInput(e,n,this.chooseClamp(n))}},{key:"chooseClamp",value:function(t){var e,n,r,i,o=this.options,a=o.clamp,s=o.range,u=this.options.domain.map(t),c=Math.min(u.length,s.length);return a?(e=u[0],n=u[c-1],r=n<e?n:e,i=e>n?e:n,function(t){return Math.min(Math.max(r,t),i)}):fN}},{key:"composeOutput",value:function(t,e){var n=this.options,r=n.domain,i=n.range,o=n.round,a=n.interpolate,s=VG(r.map(t),i,a,o);this.output=LG(s,e,t)}},{key:"composeInput",value:function(t,e,n){var r=this.options,i=r.domain,o=r.range,a=VG(o,i.map(t),jG);this.input=LG(e,n,a)}}])}(RK),YG=function(t){function e(){return x(this,e),F(this,e,arguments)}return P(e,t),B(e,[{key:"getDefaultOptions",value:function(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:DG,tickMethod:tG,tickCount:5}}},{key:"removeUnsortedValues",value:function(t,e,n){var r=-1/0,i=e.reduce(function(t,i,o){if(0===o)return t;var a=r>0?r:i;return r>0&&(n?i>r:i<r)?t.push(o):(a-e[o-1])*(n?-1:1)<0?(r<0&&(r=e[o-1]),t.push(o)):r=-1/0,t},[]);return i.slice().reverse().forEach(function(n){t.splice(n,1),e.splice(n,1)}),{breaksDomain:t,breaksRange:e}}},{key:"transformDomain",value:function(t){var e=[.2,.8],n=t.domain,r=void 0===n?[]:n,i=t.range,o=void 0===i?[1,0]:i,a=t.breaks,s=void 0===a?[]:a,u=t.tickCount,c=void 0===u?5:u,l=t.nice,A=[Math.min.apply(Math,O(r)),Math.max.apply(Math,O(r))],f=A[0],d=A[1],h=f,p=d;if(l&&s.length<2){var v=this.chooseNice()(f,d,c);h=v[0],p=v[v.length-1]}var g=Math.min(h,f),y=Math.max(p,d),m=s.filter(function(t){return t.end<y}).sort(function(t,e){return t.start-e.start}),b=tG(g,y,c,m);if(IG(b)<y){var w=zG(0,y-IG(b),3);b.push(IG(b)+IG(w)),y=IG(b)}var x=[o[0],IG(o)],E=x[0],B=x[1],k=y-g,C=Math.abs(B-E),M=E>B,S=b.map(function(t){var e=(t-g)/k;return M?E-e*C:E+e*C}),F=e[0],T=e[1];return m.forEach(function(t){var e=t.start,n=t.end,r=t.gap,i=void 0===r?.03:r,o=t.compress,a=void 0===o?"middle":o,s=b.indexOf(e),u=b.indexOf(n),c=(S[s]+S[u])/2;"start"===a&&(c=S[s]),"end"===a&&(c=S[u]);var l=i*C/2,A=M?c+l:c-l,f=M?c-l:c+l;A<F&&(f+=F-A,A=F),f>T&&(A-=f-T,f=T),A>T&&(f-=A-T,A=T),f<F&&(A+=F-f,f=F),S[s]=A,S[u]=f}),this.removeUnsortedValues(b,S,M)}},{key:"transformBreaks",value:function(t){var e=t.domain,n=t.breaks,r=void 0===n?[]:n;if(!tn(t.breaks))return t;var i=Math.max.apply(Math,O(e)),o=r.filter(function(t){return t.end<i}),a=w(w({},t),{},{breaks:o}),s=this.transformDomain(a),u=s.breaksDomain,c=s.breaksRange;return w(w({},t),{},{domain:u,range:c,breaks:o,tickMethod:function(){return O(u)}})}},{key:"chooseTransforms",value:function(){return[fN,fN]}},{key:"clone",value:function(){return new e(this.options)}}])}(WG);function XG(t,e){var n,r;if(void 0===e){var i,o=qn(t);try{for(o.s();!(i=o.n()).done;){var a=i.value;null!=a&&(void 0===n?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}}catch(t){o.e(t)}finally{o.f()}}else{var s,u=-1,c=qn(t);try{for(c.s();!(s=c.n()).done;){var l=s.value;null!=(l=e(l,++u,t))&&(void 0===n?l>=l&&(n=r=l):(n>l&&(n=l),r<l&&(r=l)))}}catch(t){c.e(t)}finally{c.f()}}return[n,r]}function qG(t,e){return Object.entries(t).reduce(function(n,r){var i=v(r,2),o=i[0],a=i[1];return n[o]=e(a,o,t),n},{})}function ZG(t){return t.map(function(t,e){return e})}function JG(t){return t[0]}function $G(t){return t[t.length-1]}function tV(t,e){var n=[[],[]];return t.forEach(function(t){n[e(t)?0:1].push(t)}),n}function eV(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.length;if(1===e)return t.map(function(t){return[t]});for(var n=[],r=function(r){eV(t.slice(r+1),e-1).forEach(function(e){n.push([t[r]].concat(O(e)))})},i=0;i<t.length;i++)r(i);return n}function nV(t,e){for(var n=0,r=Object.entries(e);n<r.length;n++){var i=v(r[n],2),o=i[0],a=i[1];t.style(o,a)}}function rV(t,e,n,r,i){var o=OG(EG(r,e))+Math.PI,a=OG(EG(r,n))+Math.PI;return t.arc(r[0],r[1],i,o,a,a-o<0),t}function iV(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"y",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"between",o="y"===r||!0===r?n:e,a=function(t,e){return"y"===t||!0===t?e?180:90:e?90:0}(r,arguments.length>5&&void 0!==arguments[5]&&arguments[5]),s=ZG(o),u=v(XG(s,function(t){return o[t]}),2),c=u[0],l=u[1],A=new YG({domain:[c,l],range:[0,100]}),f=function(t){return de(o[t])&&!Number.isNaN(o[t])?A.map(o[t]):0},d={between:function(e){return"".concat(t[e]," ").concat(f(e),"%")},start:function(e){return 0===e?"".concat(t[e]," ").concat(f(e),"%"):"".concat(t[e-1]," ").concat(f(e),"%, ").concat(t[e]," ").concat(f(e),"%")},end:function(e){return e===t.length-1?"".concat(t[e]," ").concat(f(e),"%"):"".concat(t[e]," ").concat(f(e),"%, ").concat(t[e+1]," ").concat(f(e),"%")}},h=s.sort(function(t,e){return f(t)-f(e)}).map(d[i]||d.between).join(",");return"linear-gradient(".concat(a,"deg, ").concat(h,")")}function oV(t){var e=v(t,4),n=e[0],r=e[1],i=e[2];return[e[3],n,r,i]}function aV(t,e,n){var r=v(vK(t)?oV(e):e,4),i=r[0],o=r[1],a=r[3],s=v(n,2),u=s[0],c=s[1],l=t.getCenter(),A=CG(EG(i,l)),f=CG(EG(o,l)),d=f===A&&u!==c?f+2*Math.PI:f,h=1e-4;return{startAngle:A+h,endAngle:(d-A>=0?d:2*Math.PI+d)-h,innerRadius:kG(a,l),outerRadius:kG(i,l)}}function sV(t){var e=t.colorAttribute,n=t.opacityAttribute;return"".concat(void 0===n?e:n,"Opacity")}function uV(t,e){if(!gK(t))return"";var n=t.getCenter(),r=e.transform;return"translate(".concat(n[0],", ").concat(n[1],") ").concat(r||"")}function cV(t){if(1===t.length)return t[0];var e=v(t,2),n=v(e[0],3),r=n[0],i=n[1],o=n[2],a=void 0===o?0:o,s=v(e[1],3),u=s[0],c=s[1],l=s[2];return[(r+u)/2,(i+c)/2,(a+(void 0===l?0:l))/2]}var lV=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function AV(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=i.inset,a=void 0===o?0:o,s=i.radius,u=void 0===s?0:s,c=i.insetLeft,l=void 0===c?a:c,A=i.insetTop,f=void 0===A?a:A,d=i.insetRight,h=void 0===d?a:d,p=i.insetBottom,g=void 0===p?a:p,y=i.radiusBottomLeft,m=void 0===y?u:y,b=i.radiusBottomRight,w=void 0===b?u:b,x=i.radiusTopLeft,E=void 0===x?u:x,B=i.radiusTopRight,k=void 0===B?u:B,O=i.minWidth,C=void 0===O?-1/0:O,M=i.maxWidth,S=void 0===M?1/0:M,F=i.minHeight,T=void 0===F?-1/0:F,P=lV(i,["inset","radius","insetLeft","insetTop","insetRight","insetBottom","radiusBottomLeft","radiusBottomRight","radiusTopLeft","radiusTopRight","minWidth","maxWidth","minHeight"]);if(!gK(r)&&!mK(r)){var I=!!vK(r),N=v(I?oV(e):e,3),L=N[0],_=N[2],Q=v(L,2),U=Q[0],j=Q[1],D=v(EG(_,L),2),R=D[0],H=D[1],z=(R>0?U:U+R)+l,K=(H>0?j:j+H)+f,G=Math.abs(R)-(l+h),V=Math.abs(H)-(f+g),W=I?TG(G,T,1/0):TG(G,C,S),Y=I?TG(V,C,S):TG(V,T,1/0),X=I?z:z-(W-G)/2,q=I?K-(Y-V)/2:K-(Y-V);return wG(t.createElement("rect",{})).style("x",X).style("y",q).style("width",W).style("height",Y).style("radius",[E,k,w,m]).call(nV,P).node()}var Z=n.y,J=n.y1,$=r.getCenter(),tt=aV(r,e,[Z,J]),et=pK().cornerRadius(u).padAngle(a*Math.PI/180);return wG(t.createElement("path",{})).style("d",et(tt)).style("transform","translate(".concat($[0],", ").concat($[1],")")).style("radius",u).style("inset",a).call(nV,P).node()}var fV=function(t,e){var n=t.colorAttribute,r=(t.opacityAttribute,t.first),i=void 0===r||r,o=t.last,a=void 0===o||o,s=lV(t,["colorAttribute","opacityAttribute","first","last"]),u=e.coordinate,c=e.document;return function(e,r,o){var l=o.color,A=o.radius,f=void 0===A?0:A,d=lV(o,["color","radius"]),h=d.lineWidth||1,p=s.stroke,v=s.radius,g=void 0===v?f:v,y=s.radiusTopLeft,m=void 0===y?g:y,b=s.radiusTopRight,w=void 0===b?g:b,x=s.radiusBottomRight,E=void 0===x?g:x,B=s.radiusBottomLeft,k=void 0===B?g:B,O=s.innerRadius,C=void 0===O?0:O,M=s.innerRadiusTopLeft,S=void 0===M?C:M,F=s.innerRadiusTopRight,T=void 0===F?C:F,P=s.innerRadiusBottomRight,I=void 0===P?C:P,N=s.innerRadiusBottomLeft,L=void 0===N?C:N,_=s.lineWidth,Q=void 0===_?"stroke"===n||p?h:0:_,U=s.inset,j=void 0===U?0:U,D=s.insetLeft,R=void 0===D?j:D,H=s.insetRight,z=void 0===H?j:H,K=s.insetBottom,G=void 0===K?j:K,V=s.insetTop,W=void 0===V?j:V,Y=s.minWidth,X=s.maxWidth,q=s.minHeight,Z=lV(s,["stroke","radius","radiusTopLeft","radiusTopRight","radiusBottomRight","radiusBottomLeft","innerRadius","innerRadiusTopLeft","innerRadiusTopRight","innerRadiusBottomRight","innerRadiusBottomLeft","lineWidth","inset","insetLeft","insetRight","insetBottom","insetTop","minWidth","maxWidth","minHeight"]),J=r.color,$=void 0===J?l:J,tt=r.opacity,et=[i?m:S,i?w:T,a?E:I,a?k:L],nt=["radiusTopLeft","radiusTopRight","radiusBottomRight","radiusBottomLeft"];vK(u)&&nt.push(nt.shift());var rt=Object.assign(Object.assign({radius:g},Object.fromEntries(nt.map(function(t,e){return[t,et[e]]}))),{inset:j,insetLeft:R,insetRight:z,insetBottom:G,insetTop:W,minWidth:Y,maxWidth:X,minHeight:q});return wG(AV(c,e,r,u,rt)).call(nV,d).style("fill","transparent").style(n,$).style(sV(t),tt).style("lineWidth",Q).style("stroke",void 0===p?$:p).call(nV,Z).node()}};fV.props={defaultEnterAnimation:"scaleInY",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var dV=function(t,e){return fV(Object.assign({colorAttribute:"fill"},t),e)};dV.props=Object.assign(Object.assign({},fV.props),{defaultMarker:"square"});var hV=function(t,e){return fV(Object.assign({colorAttribute:"stroke"},t),e)};function pV(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function vV(t){this._context=t}function gV(t){return new vV(t)}function yV(t){return t[0]}function mV(t){return t[1]}function bV(t,e){var n=Mz(!0),r=null,i=gV,o=null,a=uK(s);function s(s){var u,c,l,A=(s=pV(s)).length,f=!1;for(null==r&&(o=i(l=a())),u=0;u<=A;++u)!(u<A&&n(c=s[u],u,s))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+t(c,u,s),+e(c,u,s));if(l)return o=null,l+""||null}return t="function"==typeof t?t:void 0===t?yV:Mz(t),e="function"==typeof e?e:void 0===e?mV:Mz(e),s.x=function(e){return arguments.length?(t="function"==typeof e?e:Mz(+e),s):t},s.y=function(t){return arguments.length?(e="function"==typeof t?t:Mz(+t),s):e},s.defined=function(t){return arguments.length?(n="function"==typeof t?t:Mz(!!t),s):n},s.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),s):i},s.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),s):r},s}function wV(){}function xV(t){this._context=t}function EV(t){return new xV(t)}hV.props=Object.assign(Object.assign({},fV.props),{defaultMarker:"hollowSquare"}),Array.prototype.slice,vV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}},xV.prototype={areaStart:wV,areaEnd:wV,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};var BV=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function kV(t,e,n){var r=v(t,4),i=r[0],o=r[1],a=r[2],s=r[3];return vK(n)?[i,[e?e[0][0]:o[0],o[1]],[e?e[3][0]:a[0],a[1]],s]:[i,[o[0],e?e[0][1]:o[1]],[a[0],e?e[3][1]:a[1]],s]}var OV=function(t,e){return e/Math.tan(t/2)};var CV=function(t,e){var n=t.adjustPoints,r=void 0===n?kV:n,i=t.radius,o=t.radiusTopLeft,a=void 0===o?i:o,s=t.radiusTopRight,u=void 0===s?i:s,c=t.radiusBottomRight,l=void 0===c?i:c,A=t.radiusBottomLeft,f=void 0===A?i:A,d=t.innerRadius,h=void 0===d?0:d,p=t.innerRadiusTopLeft,g=void 0===p?h:p,y=t.innerRadiusTopRight,m=void 0===y?h:y,b=t.innerRadiusBottomRight,w=void 0===b?h:b,x=t.innerRadiusBottomLeft,E=void 0===x?h:x,B=t.first,k=void 0===B||B,O=t.last,C=void 0===O||O,M=BV(t,["adjustPoints","radius","radiusTopLeft","radiusTopRight","radiusBottomRight","radiusBottomLeft","innerRadius","innerRadiusTopLeft","innerRadiusTopRight","innerRadiusBottomRight","innerRadiusBottomLeft","first","last"]),S=e.coordinate,F=e.document;return function(t,e,n,i){var o=e.index,s=n.color,c=BV(n,["color"]),A=i[o+1],d=r(t,A,S),h=v(vK(S)?oV(d):d,4),p=h[0],y=h[1],b=h[2],x=h[3],B=e.color,O=void 0===B?s:B,T=e.opacity,P=[k&&null!=a?a:g,k&&null!=u?u:m,C&&null!=l?l:w,C&&null!=f?f:E],I=P.find(function(t){return t>0})?function(t,e){var n=v(t,4),r=n[0],i=n[1],o=n[2],a=n[3],s=v(e,4),u=s[0],c=s[1],l=s[2],A=s[3],f=i[0]-r[0]>o[0]-a[0],d=Math.atan2(Math.abs(i[1]-o[1]),Math.abs(i[0]-o[0])),h=f?[OV(d,u),OV(d,c),l,A]:[u,c,OV(d,l),OV(d,A)],p=f?1:-1,g=h.map(function(t){return function(t,e,n){return{x:Math.cos(t)*e*n,y:Math.sin(t)*e}}(d,t,p)});return["M".concat(r[0]+h[0]," ").concat(r[1]),"L".concat(i[0]-h[1]," ").concat(i[1]),"Q".concat(i[0]," ").concat(i[1]," ").concat(i[0]-g[1].x," ").concat(i[1]+g[1].y),"L".concat(o[0]+g[2].x," ").concat(o[1]-g[2].y),"Q".concat(o[0]," ").concat(o[1]," ").concat(o[0]-h[2]," ").concat(o[1]),"L".concat(a[0]+h[3]," ").concat(a[1]),"Q".concat(a[0]," ").concat(a[1]," ").concat(a[0]-g[3].x," ").concat(a[1]-g[3].y),"L".concat(r[0]+g[0].x," ").concat(r[1]+g[0].y),"Q".concat(r[0]," ").concat(r[1]," ").concat(r[0]+h[0]," ").concat(r[1]),"Z"].join(" ")}([p,y,b,x],P):bV().curve(EV)([p,y,b,x]);return wG(F.createElement("path",{})).call(nV,c).style("d",I).style("fill",O).style("fillOpacity",T).call(nV,M).node()}};function MV(t,e,n){var r=v(t,4),i=r[0],o=r[1],a=r[2],s=r[3];return vK(n)?[i,[e?e[0][0]:(o[0]+a[0])/2,o[1]],[e?e[3][0]:(o[0]+a[0])/2,a[1]],s]:[i,[o[0],e?e[0][1]:(o[1]+a[1])/2],[a[0],e?e[3][1]:(o[1]+a[1])/2],s]}CV.props={defaultMarker:"square"};var SV=function(t,e){return CV(Object.assign({adjustPoints:MV},t),e)};function FV(t){return Math.abs(t)>10?String(t):t.toString().padStart(2,"0")}SV.props={defaultMarker:"square"};var TV=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).channel,e=void 0===t?"x":t;return function(t,n){var r=n.encode,i=n.tooltip;if(mG(i))return[t,n];if(void 0!==i.title)return[t,n];var o=Object.keys(r).filter(function(t){return t.startsWith(e)}).filter(function(t){return!r[t].inferred}).map(function(t){return Ez(r,t)}).filter(function(t){return v(t,1)[0]}).map(function(t){return t[0]});if(0===o.length)return[t,n];var a,s=[],u=qn(t);try{var c=function(){var t=a.value;s[t]={value:o.map(function(e){return e[t]instanceof Date?function(t){var e=t.getFullYear(),n=FV(t.getMonth()+1),r=FV(t.getDate()),i="".concat(e,"-").concat(n,"-").concat(r),o=t.getHours(),a=t.getMinutes(),s=t.getSeconds();return o||a||s?"".concat(i," ").concat(FV(o),":").concat(FV(a),":").concat(FV(s)):i}(e[t]):e[t]}).join(", ")}};for(u.s();!(a=u.n()).done;)c()}catch(t){u.e(t)}finally{u.f()}return[t,Xm({},n,{tooltip:{title:s}})]}};TV.props={};var PV=function(t){var e=t.channel;return function(t,n){var r=n.encode,i=n.tooltip;if(mG(i))return[t,n];var o=i.items,a=void 0===o?[]:o;if(!a||a.length>0)return[t,n];var s=(Array.isArray(e)?e:[e]).flatMap(function(t){return Object.keys(r).filter(function(e){return e.startsWith(t)}).map(function(t){var e=r[t],n=e.field,i=e.value,o=e.inferred,a=void 0!==o&&o,s=e.aggregate;return a?null:s&&i?{channel:t}:n?{field:n}:i?{channel:t}:null}).filter(function(t){return null!==t})});return[t,Xm({},n,{tooltip:{items:s}})]}};PV.props={};var IV=function(){return function(t,e){var n=e.encode,r=n.key,i=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(n,["key"]);if(void 0!==r)return[t,e];var o=Object.values(i).map(function(t){return t.value}),a=t.map(function(t){return o.filter(Array.isArray).map(function(e){return e[t]}).join("-")});return[t,Xm({},e,{encode:{key:yz(a)}})]}};function NV(){return[{name:"color"},{name:"opacity"},{name:"shape",range:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).shapes},{name:"enterType"},{name:"enterDelay",scaleKey:"enter"},{name:"enterDuration",scaleKey:"enter"},{name:"enterEasing"},{name:"key",scale:"identity"},{name:"groupKey",scale:"identity"},{name:"label",scale:"identity"}]}function LV(){return[].concat(O(NV(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})),[{name:"title",scale:"identity"}])}function _V(){return[{type:TV,channel:"color"},{type:PV,channel:["x","y"]}]}function QV(){return[{type:TV,channel:"x"},{type:PV,channel:["y"]}]}function UV(){return NV(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function jV(){return[{type:IV}]}function DV(t,e){return t.getBandWidth(t.invert(e))}function RV(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.x,i=e.y,o=e.series,a=t.x,s=t.y,u=t.series,c=n.style,l=void 0===c?{}:c,A=l.bandOffset,f=void 0===A?u?0:.5:A,d=l.bandOffsetX,h=void 0===d?f:d,p=l.bandOffsetY,g=void 0===p?f:p,y=!!(null==a?void 0:a.getBandWidth),m=!!(null==s?void 0:s.getBandWidth),b=!!(null==u?void 0:u.getBandWidth);return y||m?function(t,e){var n=y?DV(a,r[e]):0,c=m?DV(s,i[e]):0,l=b&&o?(DV(u,o[e])/2+ +o[e])*n:0,A=v(t,2),f=A[0],d=A[1];return[f+h*n+l,d+g*c]}:function(t){return t}}function HV(t){return parseFloat(t)/100}function zV(t,e,n,r){var i=n.x,o=n.y,a=r.getOptions(),s=a.innerWidth,u=a.innerHeight,c=Array.from(t,function(t){var e=i[t],n=o[t];return[["string"==typeof e?HV(e)*s:+e,"string"==typeof n?HV(n)*u:+n]]});return[t,c]}function KV(t){return"function"==typeof t?t:function(e){return e[t]}}function GV(t,e){return Array.from(t,KV(e))}function VV(t,e){var n=function(t){return Array.isArray(t)?{links:t}:t&&"object"==typeof t?{links:t.links||[],nodes:t.nodes}:{links:[]}}(t),r=e.source,i=void 0===r?function(t){return t.source}:r,o=e.target,a=void 0===o?function(t){return t.target}:o,s=e.value,u=void 0===s?function(t){return t.value}:s,c=n.links,l=n.nodes;if(!c.length)return{links:[],nodes:l||[]};var A=GV(c,i),f=GV(c,a),d=GV(c,u);return{links:c.map(function(t,e){return{target:f[e],source:A[e],value:d[e]}}),nodes:l||Array.from(new Set([].concat(O(A),O(f))),function(t){return{key:t}})}}function WV(t,e){return t.getBandWidth(t.invert(e))}IV.props={};var YV={rect:dV,hollow:hV,funnel:CV,pyramid:SV},XV=function(){return function(t,e,n,r){var i=n.x,o=n.y1,a=n.series,s=n.size,u=n.y;u=u.map(function(t){return void 0!==t?t:1});var c=e.x,l=e.series,A=v(r.getSize(),1)[0],f=s?s.map(function(t){return+t/A}):null,d=s?function(t,e,n){var r=t+e/2,i=f[n];return[r-i/2,r+i/2]}:function(t,e,n){return[t,t+e]},h=Array.from(t,function(t){var e=WV(c,i[t]),n=e*(l?WV(l,null==a?void 0:a[t]):1),s=(+(null==a?void 0:a[t])||0)*e,A=+i[t]+s,f=v(d(A,n,t),2),h=f[0],p=f[1],g=+u[t],y=+o[t];return[[h,g],[p,g],[p,y],[h,y]].map(function(t){return r.map(t)})});return[t,h]}};XV.props={defaultShape:"rect",defaultLabelShape:"label",composite:!1,shape:YV,channels:[].concat(O(LV({shapes:Object.keys(YV)})),[{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"series",scale:"band"},{name:"size"}]),preInference:[].concat(O(jV()),[{type:Oz},{type:Cz}]),postInference:[].concat(O([]),O(QV())),interaction:{shareTooltip:!0}};var qV={rect:dV,hollow:hV},ZV=function(){return function(t,e,n,r){var i=n.x,o=n.x1,a=n.y,s=n.y1,u=Array.from(t,function(t){return[[+i[t],+a[t]],[+o[t],+a[t]],[+o[t],+s[t]],[+i[t],+s[t]]].map(function(t){return r.map(t)})});return[t,u]}};ZV.props={defaultShape:"rect",defaultLabelShape:"label",composite:!1,shape:qV,channels:[].concat(O(LV({shapes:Object.keys(qV)})),[{name:"x",required:!0},{name:"y",required:!0}]),preInference:[].concat(O(jV()),[{type:Oz}]),postInference:[].concat(O([]),O(QV())),interaction:{shareTooltip:!0}};var JV=tW(gV);function $V(t){this._curve=t}function tW(t){function e(e){return new $V(t(e))}return e._curve=t,e}function eW(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(tW(t)):e()._curve},t}function nW(t){var e="function"==typeof t?t:t.render;return function(t){function n(){return x(this,n),F(this,n,arguments)}return P(n,t),B(n,[{key:"connectedCallback",value:function(){this.draw()}},{key:"attributeChangedCallback",value:function(){this.draw()}},{key:"draw",value:function(){e(this)}}])}(Nu)}$V.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};var rW=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},iW=nW(function(t){var e=t.attributes,n=e.d1,r=e.d2,i=e.style1,o=e.style2,a=t.ownerDocument;wG(t).maybeAppend("line",function(){return a.createElement("path",{})}).style("d",n).call(nV,i),wG(t).maybeAppend("line1",function(){return a.createElement("path",{})}).style("d",r).call(nV,o)}),oW=function(t,e){var n=t.curve,r=t.gradient,i=void 0!==r&&r,o=t.gradientColor,a=void 0===o?"between":o,s=t.defined,u=void 0===s?function(t){return!Number.isNaN(t)&&null!=t}:s,c=t.connect,l=void 0!==c&&c,A=rW(t,["curve","gradient","gradientColor","defined","connect"]),f=e.coordinate,d=e.document;return function(t,e,r){var o,s=r.color,c=r.lineWidth,h=rW(r,["color","lineWidth"]),p=e.color,g=void 0===p?s:p,y=e.size,m=void 0===y?c:y,b=e.seriesColor,w=e.seriesX,x=e.seriesY,E=uV(f,e),B=vK(f),k=i&&b?iV(b,w,x,i,a,B):g,O=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},h),k&&{stroke:k}),m&&{lineWidth:m}),E&&{transform:E}),A);if(gK(f)){var C=f.getCenter();o=function(t){return eW(bV().curve(JV)).angle(function(e,n){return CG(EG(t[n],C))}).radius(function(e,n){return kG(t[n],C)}).defined(function(t){var e=v(t,2),n=e[0],r=e[1];return u(n)&&u(r)}).curve(n)(t)}}else o=bV().x(function(t){return t[0]}).y(function(t){return t[1]}).defined(function(t){var e=v(t,2),n=e[0],r=e[1];return u(n)&&u(r)}).curve(n);var M,S=function(t,e){var n,r=[],i=[],o=!1,a=null,s=qn(t);try{for(s.s();!(n=s.n()).done;){var u=n.value;e(u[0])&&e(u[1])?(r.push(u),o&&(o=!1,i.push([a,u])),a=u):o=!0}}catch(t){s.e(t)}finally{s.f()}return[r,i]}(t,u),F=v(S,2),T=F[0],P=F[1],I=hG(O,"connect"),N=!!P.length;return!N||l&&!Object.keys(I).length?wG(d.createElement("path",{})).style("d",o(T)||[]).call(nV,O).node():N&&!l?wG(d.createElement("path",{})).style("d",o(t)).call(nV,O).node():wG(new iW).style("style1",Object.assign(Object.assign({},O),I)).style("style2",O).style("d1",(M=P,M.map(o).join(","))).style("d2",o(t)).node()}};oW.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var aW=function(t,e){var n=e.coordinate;return function(){var r=gK(n)?EV:gV;return oW(Object.assign({curve:r},t),e).apply(void 0,arguments)}};function sW(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function uW(t,e){this._context=t,this._k=(1-e)/6}function cW(t,e){this._context=t,this._k=(1-e)/6}function lW(t,e,n){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>qz){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>qz){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,l=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*c+t._x1*t._l23_2a-e*t._l12_2a)/l,a=(a*c+t._y1*t._l23_2a-n*t._l12_2a)/l}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function AW(t,e){this._context=t,this._alpha=e}function fW(t,e){this._context=t,this._alpha=e}aW.props=Object.assign(Object.assign({},oW.props),{defaultMarker:"line"}),uW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:sW(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:sW(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}},function t(e){function n(t){return new uW(t,e)}return n.tension=function(e){return t(+e)},n}(0),cW.prototype={areaStart:wV,areaEnd:wV,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:sW(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}},function t(e){function n(t){return new cW(t,e)}return n.tension=function(e){return t(+e)},n}(0),AW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:lW(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}},function t(e){function n(t){return e?new AW(t,e):new uW(t,0)}return n.alpha=function(e){return t(+e)},n}(.5),fW.prototype={areaStart:wV,areaEnd:wV,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:lW(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const dW=function t(e){function n(t){return e?new fW(t,e):new cW(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function hW(t){return t<0?-1:1}function pW(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(hW(o)+hW(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function vW(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function gW(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function yW(t){this._context=t}function mW(t){this._context=new bW(t)}function bW(t){this._context=t}function wW(t){return new yW(t)}function xW(t){return new mW(t)}yW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:gW(this,this._t0,vW(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,gW(this,vW(this,n=pW(this,t,e)),n);break;default:gW(this,this._t0,n=pW(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(mW.prototype=Object.create(yW.prototype)).point=function(t,e){yW.prototype.point.call(this,e,t)},bW.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}};var EW=function(t,e){var n=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,[]),r=e.coordinate;return function(){var t=gK(r)?dW:vK(r)?xW:wW;return oW(Object.assign({curve:t},n),e).apply(void 0,arguments)}};function BW(t,e){this._context=t,this._t=e}function kW(t){return new BW(t,.5)}function OW(t){return new BW(t,0)}function CW(t){return new BW(t,1)}EW.props=Object.assign(Object.assign({},oW.props),{defaultMarker:"smooth"}),BW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var MW=function(t,e){return oW(Object.assign({curve:CW},t),e)};MW.props=Object.assign(Object.assign({},oW.props),{defaultMarker:"hv"});var SW=function(t,e){return oW(Object.assign({curve:OW},t),e)};SW.props=Object.assign(Object.assign({},oW.props),{defaultMarker:"vh"});var FW=function(t,e){return oW(Object.assign({curve:kW},t),e)};FW.props=Object.assign(Object.assign({},oW.props),{defaultMarker:"hvh"});function TW(t,e,n,r,i){var o=OG(EG(n,e)),a=o+Math.PI/2,s=[r/2*Math.cos(a),r/2*Math.sin(a)],u=[i/2*Math.cos(a),i/2*Math.sin(a)],c=[i/2*Math.cos(o),i/2*Math.sin(o)],l=[r/2*Math.cos(o),r/2*Math.sin(o)],A=BG(e,s),f=BG(n,u),d=BG(f,c),h=BG(n,c),p=EG(h,u),v=EG(n,u),g=EG(e,s),y=EG(g,l),m=EG(e,l),b=EG(A,l);t.moveTo.apply(t,O(A)),t.lineTo.apply(t,O(f)),t.arcTo.apply(t,O(d).concat(O(h),[i/2])),t.arcTo.apply(t,O(p).concat(O(v),[i/2])),t.lineTo.apply(t,O(g)),t.arcTo.apply(t,O(y).concat(O(m),[r/2])),t.arcTo.apply(t,O(b).concat(O(A),[r/2])),t.closePath()}var PW=function(t,e){var n=e.document;return function(e,r,i){for(var o=r.seriesSize,a=r.color,s=i.color,u=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(i,["color"]),c=sK(),l=0;l<e.length-1;l++){var A=e[l],f=e[l+1],d=o[l],h=o[l+1];[].concat(O(A),O(f)).every(dG)&&TW(c,A,f,d,h)}return wG(n.createElement("path",{})).call(nV,u).style("fill",a||s).style("d",c.toString()).call(nV,t).node()}};PW.props=Object.assign(Object.assign({},oW.props),{defaultMarker:"line"});var IW=function(){return function(t,e){var n=e.style,r=void 0===n?{}:n,i=e.encode.series;return!r.gradient||i?[t,e]:[t,Xm({},e,{encode:{series:bz(xz(t,void 0))}})]}};IW.props={};var NW=function(){return function(t,e){var n=e.encode,r=n.series,i=n.color;if(void 0!==r||void 0===i)return[t,e];var o=v(Ez(n,"color"),2),a=o[0],s=o[1];return[t,Xm({},e,{encode:{series:yz(a,s)}})]}};NW.props={};var LW={line:aW,smooth:EW,hv:MW,vh:SW,hvh:FW,trail:PW},_W=function(t,e,n,r){var i,o,a=n.series,s=n.x,u=n.y,c=e.x,l=e.y;if(void 0===s||void 0===u)throw new Error("Missing encode for x or y channel.");var A=a?Array.from(TK(t,function(t){return a[t]}).values()):[t],f=A.map(function(t){return t[0]}).filter(function(t){return void 0!==t}),d=((null===(i=null==c?void 0:c.getBandWidth)||void 0===i?void 0:i.call(c))||0)/2,h=((null===(o=null==l?void 0:l.getBandWidth)||void 0===o?void 0:o.call(l))||0)/2,p=Array.from(A,function(t){return t.map(function(t){return r.map([+s[t]+d,+u[t]+h])})});return[f,p,A]},QW=function(t,e,n,r){var i=Object.entries(n).filter(function(t){return v(t,1)[0].startsWith("position")}).map(function(t){return v(t,2)[1]});if(0===i.length)throw new Error("Missing encode for position channel.");return gK(r)&&i.push(i[0]),[t,Array.from(t,function(t){for(var e=i.map(function(e){return+e[t]}),n=r.map(e),o=[],a=0;a<n.length;a+=2)o.push([n[a],n[a+1]]);return o})]},UW=function(){return function(t,e,n,r){return(bK(r)?QW:_W)(t,e,n,r)}};UW.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:LW,channels:[].concat(O(LV({shapes:Object.keys(LW)})),[{name:"x"},{name:"y"},{name:"position",independent:!0},{name:"size"},{name:"series",scale:"band"}]),preInference:[].concat(O(jV()),[{type:IW},{type:NW}]),postInference:[].concat(O([]),O(QV()),O([{type:TV,channel:"color"},{type:PV,channel:["position"]}])),interaction:{shareTooltip:!0,seriesTooltip:!0,crosshairs:!0}};var jW=function(t,e,n){return[["M",t-n,e],["A",n,n,0,1,0,t+n,e],["A",n,n,0,1,0,t-n,e],["Z"]]};jW.style=["fill"];var DW=jW.bind(void 0);DW.style=["stroke","lineWidth"];var RW=function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]]};RW.style=["fill"];var HW=RW.bind(void 0);HW.style=["fill"];var zW=RW.bind(void 0);zW.style=["stroke","lineWidth"];var KW=function(t,e,n){var r=.618*n;return[["M",t-r,e],["L",t,e-n],["L",t+r,e],["L",t,e+n],["Z"]]};KW.style=["fill"];var GW=KW.bind(void 0);GW.style=["stroke","lineWidth"];var VW=function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e+r],["L",t,e-r],["L",t+n,e+r],["Z"]]};VW.style=["fill"];var WW=VW.bind(void 0);WW.style=["stroke","lineWidth"];var YW=function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e-r],["L",t+n,e-r],["L",t,e+r],["Z"]]};YW.style=["fill"];var XW=YW.bind(void 0);XW.style=["stroke","lineWidth"];var qW=function(t,e,n){var r=n/2*Math.sqrt(3);return[["M",t,e-n],["L",t+r,e-n/2],["L",t+r,e+n/2],["L",t,e+n],["L",t-r,e+n/2],["L",t-r,e-n/2],["Z"]]};qW.style=["fill"];var ZW=qW.bind(void 0);ZW.style=["stroke","lineWidth"];var JW=function(t,e,n){var r=n-1.5;return[["M",t-n,e-r],["L",t+n,e+r],["L",t+n,e-r],["L",t-n,e+r],["Z"]]};JW.style=["fill"];var $W=JW.bind(void 0);$W.style=["stroke","lineWidth"];var tY=function(t,e,n){return[["M",t,e+n],["L",t,e-n]]};tY.style=["stroke","lineWidth"];var eY=function(t,e,n){return[["M",t-n,e-n],["L",t+n,e+n],["M",t+n,e-n],["L",t-n,e+n]]};eY.style=["stroke","lineWidth"];var nY=function(t,e,n){return[["M",t-n/2,e-n],["L",t+n/2,e-n],["M",t,e-n],["L",t,e+n],["M",t-n/2,e+n],["L",t+n/2,e+n]]};nY.style=["stroke","lineWidth"];var rY=function(t,e,n){return[["M",t-n,e],["L",t+n,e],["M",t,e-n],["L",t,e+n]]};rY.style=["stroke","lineWidth"];var iY=function(t,e,n){return[["M",t-n,e],["L",t+n,e]]};iY.style=["stroke","lineWidth"];var oY=function(t,e,n){return[["M",t-n,e],["L",t+n,e]]};oY.style=["stroke","lineWidth"];var aY=oY.bind(void 0);aY.style=["stroke","lineWidth"];var sY=function(t,e,n){return[["M",t-n,e],["A",n/2,n/2,0,1,1,t,e],["A",n/2,n/2,0,1,0,t+n,e]]};sY.style=["stroke","lineWidth"];var uY=function(t,e,n){return[["M",t-n-1,e-2.5],["L",t,e-2.5],["L",t,e+2.5],["L",t+n+1,e+2.5]]};uY.style=["stroke","lineWidth"];var cY=function(t,e,n){return[["M",t-n-1,e+2.5],["L",t,e+2.5],["L",t,e-2.5],["L",t+n+1,e-2.5]]};cY.style=["stroke","lineWidth"];var lY=function(t,e,n){return[["M",t-(n+1),e+2.5],["L",t-n/2,e+2.5],["L",t-n/2,e-2.5],["L",t+n/2,e-2.5],["L",t+n/2,e+2.5],["L",t+n+1,e+2.5]]};lY.style=["stroke","lineWidth"];var AY=function(t,e,n){return[["M",t-5,e+2.5],["L",t-5,e],["L",t,e],["L",t,e-3],["L",t,e+3],["L",t+6.5,e+3]]};AY.style=["stroke","lineWidth"];var fY=new Map([["bowtie",JW],["cross",eY],["dash",aY],["diamond",KW],["dot",oY],["hexagon",qW],["hollowBowtie",$W],["hollowDiamond",GW],["hollowHexagon",ZW],["hollowPoint",DW],["hollowSquare",zW],["hollowTriangle",WW],["hollowTriangleDown",XW],["hv",uY],["hvh",lY],["hyphen",iY],["line",tY],["plus",rY],["point",jW],["rect",HW],["smooth",sY],["square",RW],["tick",nY],["triangleDown",YW],["triangle",VW],["vh",cY],["vhv",AY]]);function dY(t){return t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()})}function hY(t,e,n,r){if(1!==e.length){var i=n.size;if("fixed"===t)return i;if("normal"===t||wK(r)){var o=v(e,2),a=v(o[0],2),s=a[0],u=a[1],c=v(o[1],2),l=c[0],A=c[1],f=Math.abs((l-s)/2),d=Math.abs((A-u)/2);return Math.max(0,(f+d)/2)}return i}}var pY=function(t,e){var n=t.colorAttribute,r=t.symbol,i=t.mode,o=void 0===i?"auto":i,a=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["colorAttribute","symbol","mode"]),s=fY.get(dY(r))||fY.get("point"),u=e.coordinate,c=e.document;return function(e,r,i){var l=i.lineWidth,A=i.color,f=a.stroke?l||1:l,d=r.color,h=void 0===d?A:d,p=r.transform,g=r.opacity,y=v(cV(e),2),m=y[0],b=y[1],w=hY(o,e,r,u)||a.r||i.r;return wG(c.createElement("path",{})).call(nV,i).style("fill","transparent").style("d",s(m,b,w)).style("lineWidth",f).style("transform",p).style("transformOrigin","".concat(m-w," ").concat(b-w)).style("stroke",h).style(sV(t),g).style(n,h).call(nV,a).node()}};pY.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var vY=function(t,e){return pY(Object.assign({colorAttribute:"stroke",symbol:"point"},t),e)};vY.props=Object.assign({defaultMarker:"hollowPoint"},pY.props);var gY=function(t,e){return pY(Object.assign({colorAttribute:"stroke",symbol:"diamond"},t),e)};gY.props=Object.assign({defaultMarker:"hollowDiamond"},pY.props);var yY=function(t,e){return pY(Object.assign({colorAttribute:"stroke",symbol:"hexagon"},t),e)};yY.props=Object.assign({defaultMarker:"hollowHexagon"},pY.props);var mY=function(t,e){return pY(Object.assign({colorAttribute:"stroke",symbol:"square"},t),e)};mY.props=Object.assign({defaultMarker:"hollowSquare"},pY.props);var bY=function(t,e){return pY(Object.assign({colorAttribute:"stroke",symbol:"triangle-down"},t),e)};bY.props=Object.assign({defaultMarker:"hollowTriangleDown"},pY.props);var wY=function(t,e){return pY(Object.assign({colorAttribute:"stroke",symbol:"triangle"},t),e)};wY.props=Object.assign({defaultMarker:"hollowTriangle"},pY.props);var xY=function(t,e){return pY(Object.assign({colorAttribute:"stroke",symbol:"bowtie"},t),e)};xY.props=Object.assign({defaultMarker:"hollowBowtie"},pY.props);var EY=function(t,e){var n=t.colorAttribute,r=t.mode,i=void 0===r?"auto":r,o=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["colorAttribute","mode"]),a=e.coordinate,s=e.document;return function(e,r,u){var c=u.lineWidth,l=u.color,A=o.stroke?c||1:c,f=r.color,d=void 0===f?l:f,h=r.transform,p=r.opacity,g=v(cV(e),2),y=g[0],m=g[1],b=hY(i,e,r,a)||o.r||u.r;return wG(s.createElement("circle",{})).call(nV,u).style("fill","transparent").style("cx",y).style("cy",m).style("r",b).style("lineWidth",A).style("transform",h).style("transformOrigin","".concat(y," ").concat(m)).style("stroke",d).style(sV(t),p).style(n,d).call(nV,o).node()}},BY=function(t,e){return EY(Object.assign({colorAttribute:"fill"},t),e)};BY.props={defaultMarker:"circle",defaultEnterAnimation:"fadeIn",defaultExitAnimation:"fadeOut"};var kY=function(t,e){return EY(Object.assign({colorAttribute:"stroke"},t),e)};kY.props=Object.assign({defaultMarker:"hollowPoint"},BY.props);var OY=function(t,e){return pY(Object.assign({colorAttribute:"fill",symbol:"point"},t),e)};OY.props=Object.assign({defaultMarker:"point"},pY.props);var CY=function(t,e){return pY(Object.assign({colorAttribute:"stroke",symbol:"plus"},t),e)};CY.props=Object.assign({defaultMarker:"plus"},pY.props);var MY=function(t,e){return pY(Object.assign({colorAttribute:"fill",symbol:"diamond"},t),e)};MY.props=Object.assign({defaultMarker:"diamond"},pY.props);var SY=function(t,e){return pY(Object.assign({colorAttribute:"fill",symbol:"square"},t),e)};SY.props=Object.assign({defaultMarker:"square"},pY.props);var FY=function(t,e){return pY(Object.assign({colorAttribute:"fill",symbol:"triangle"},t),e)};FY.props=Object.assign({defaultMarker:"triangle"},pY.props);var TY=function(t,e){return pY(Object.assign({colorAttribute:"fill",symbol:"hexagon"},t),e)};TY.props=Object.assign({defaultMarker:"hexagon"},pY.props);var PY=function(t,e){return pY(Object.assign({colorAttribute:"stroke",symbol:"cross"},t),e)};PY.props=Object.assign({defaultMarker:"cross"},pY.props);var IY=function(t,e){return pY(Object.assign({colorAttribute:"fill",symbol:"bowtie"},t),e)};IY.props=Object.assign({defaultMarker:"bowtie"},pY.props);var NY=function(t,e){return pY(Object.assign({colorAttribute:"stroke",symbol:"hyphen"},t),e)};NY.props=Object.assign({defaultMarker:"hyphen"},pY.props);var LY=function(t,e){return pY(Object.assign({colorAttribute:"stroke",symbol:"line"},t),e)};LY.props=Object.assign({defaultMarker:"line"},pY.props);var _Y=function(t,e){return pY(Object.assign({colorAttribute:"stroke",symbol:"tick"},t),e)};_Y.props=Object.assign({defaultMarker:"tick"},pY.props);var QY=function(t,e){return pY(Object.assign({colorAttribute:"fill",symbol:"triangle-down"},t),e)};QY.props=Object.assign({defaultMarker:"triangleDown"},pY.props);var UY=function(){return function(t,e){return void 0!==e.encode.y?[t,e]:[t,Xm({},e,{encode:{y:mz(xz(t,0))},scale:{y:{guide:null}}})]}};UY.props={};var jY=function(){return function(t,e){return void 0!==e.encode.size?[t,e]:[t,Xm({},e,{encode:{size:bz(xz(t,3))}})]}};jY.props={};var DY={hollow:vY,hollowDiamond:gY,hollowHexagon:yY,hollowSquare:mY,hollowTriangleDown:bY,hollowTriangle:wY,hollowBowtie:xY,hollowCircle:kY,point:OY,plus:CY,diamond:MY,square:SY,triangle:FY,hexagon:TY,cross:PY,bowtie:IY,hyphen:NY,line:LY,tick:_Y,triangleDown:QY,circle:BY},RY=function(t){return function(e,n,r,i){var o=r.x,a=r.y,s=r.x1,u=r.y1,c=r.size,l=r.dx,A=r.dy,f=v(i.getSize(),2),d=f[0],h=f[1],p=RV(n,r,t),g=function(t){var e=+((null==l?void 0:l[t])||0),n=+((null==A?void 0:A[t])||0);return[(s?(+o[t]+ +s[t])/2:+o[t])+e,(u?(+a[t]+ +u[t])/2:+a[t])+n]},y=c?Array.from(e,function(t){var e=v(g(t),2),n=e[0],r=e[1],o=+c[t],a=o/d,s=o/h,u=[n-a,r-s],l=[n+a,r+s];return[i.map(p(u,t)),i.map(p(l,t))]}):Array.from(e,function(t){return[i.map(p(g(t),t))]});return[e,y]}};RY.props={defaultShape:"hollow",defaultLabelShape:"label",composite:!1,shape:DY,channels:[].concat(O(LV({shapes:Object.keys(DY)})),[{name:"x",required:!0},{name:"y",required:!0},{name:"series",scale:"band"},{name:"size",quantitative:"sqrt"},{name:"dx",scale:"identity"},{name:"dy",scale:"identity"}]),preInference:[].concat(O(jV()),[{type:Cz},{type:UY}]),postInference:[].concat(O([]),[{type:jY}],O(_V()))};var HY=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function zY(t){var e=t.getLocalBounds(),n=v(e.min,2),r=n[0],i=n[1],o=v(e.max,2),a=o[0],s=o[1],u=0,c=0;return r>0&&(u=r),a<0&&(u=a),i>0&&(c=i),s<0&&(c=s),[u,c]}var KY=nW(function(t){var e=t.attributes,n=e.className,r=(e.class,e.transform,e.rotate,e.labelTransform),i=e.labelTransformOrigin,o=e.x,a=e.y,s=e.x0,u=void 0===s?o:s,c=e.y0,l=void 0===c?a:c,A=e.text,f=e.background,d=e.connector,h=e.startMarker,p=e.endMarker,g=e.coordCenter,y=e.innerHTML,m=HY(e,["className","class","transform","rotate","labelTransform","labelTransformOrigin","x","y","x0","y0","text","background","connector","startMarker","endMarker","coordCenter","innerHTML"]);if(t.style.transform="translate(".concat(o,", ").concat(a,")"),[o,a,u,l].some(function(t){return!de(t)}))t.children.forEach(function(t){return t.remove()});else{var b,w=hG(m,"background"),x=w.padding,E=HY(w,["padding"]),B=hG(m,"connector"),k=B.points,C=void 0===k?[]:k,M=HY(B,["points"]);b=y?wG(t).maybeAppend("html","html",n).style("zIndex",0).style("innerHTML",y).call(nV,Object.assign({transform:r,transformOrigin:i},m)).node():wG(t).maybeAppend("text","text").style("zIndex",0).style("text",A).call(nV,Object.assign({textBaseline:"middle",transform:r,transformOrigin:i},m)).node();var S=wG(t).maybeAppend("background","rect").style("zIndex",-1).call(nV,function(t){var e=v(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],4),n=e[0],r=void 0===n?0:n,i=e[1],o=void 0===i?0:i,a=e[2],s=void 0===a?r:a,u=e[3],c=void 0===u?o:u,l=t.parentNode,A=l.getEulerAngles();l.setEulerAngles(0);var f=t.getLocalBounds(),d=f.min,h=f.halfExtents,p=v(d,2),g=p[0],y=p[1],m=v(h,2),b=m[0],w=m[1];return l.setEulerAngles(A),{x:g-c,y:y-r,width:2*b+c+o,height:2*w+r+s}}(b,x)).call(nV,f?E:{}).node(),F=function(t,e,n,r){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=function(t){return bV()(t)};if(!e[0]&&!e[1])return a([zY(t),e]);if(!n.length)return a([[0,0],e]);var s=v(n,2),u=s[0],c=s[1],l=O(c),A=O(u);if(c[0]!==u[0]){var f=i?-4:4;l[1]=c[1],o&&!i&&(l[0]=Math.max(u[0],c[0]-f),c[1]<u[1]?A[1]=l[1]:(A[1]=u[1],A[0]=Math.max(A[0],l[0]-f))),o||i||(l[0]=Math.max(u[0],c[0]-f),c[1]>u[1]?A[1]=l[1]:(A[1]=u[1],A[0]=Math.max(A[0],l[0]-f))),!o&&i&&(l[0]=Math.min(u[0],c[0]-f),c[1]>u[1]?A[1]=l[1]:(A[1]=u[1],A[0]=Math.min(A[0],l[0]-f))),o&&i&&(l[0]=Math.min(u[0],c[0]-f),c[1]<u[1]?A[1]=l[1]:(A[1]=u[1],A[0]=Math.min(A[0],l[0]-f)))}return a([c,l,A,u,e])}(S,[+u-+o,+l-+a],C,g,+u<g[0],+l<g[1]),T=h&&new HT({id:"startMarker",style:Object.assign({x:0,y:0},hG(m,"startMarker"))}),P=p&&new HT({id:"endMarker",style:Object.assign({x:0,y:0},hG(m,"endMarker"))});wG(t).maybeAppend("connector","path").style("zIndex",0).style("d",F).style("markerStart",T).style("markerEnd",P).call(nV,d?M:{})}}),GY=function(t,e){var n=e.coordinate;return function(e,r,i){var o=r.color,a=r.text,s=void 0===a?"":a,u=r.fontSize,c=r.rotate,l=void 0===c?0:c,A=r.transform,f=void 0===A?"":A,d={text:String(s),stroke:o,fill:o,fontSize:u},h=v(e,1),p=v(h[0],2),g=p[0],y=p[1];return wG(new KY).style("x",g).style("y",y).call(nV,i).style("transform","".concat(f,"rotate(").concat(+l,")")).style("coordCenter",n.getCenter()).call(nV,d).call(nV,t).node()}};GY.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var VY=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},WY=nW(function(t){var e=t.attributes,n=(e.class,e.x,e.y,e.transform,VY(e,["class","x","y","transform"])),r=hG(n,"marker"),i=r.size,o=void 0===i?24:i,a=function(){return function(t){var e=t/Math.sqrt(2),n=t*Math.sqrt(2);return[["M",-e,e-n],["A",t,t,0,1,1,e,e-n],["L",0,0],["Z"]]}(o/2)},s=function(t){var e=t.getLocalBounds(),n=e.min,r=e.max;return[.5*(n[0]+r[0]),.5*(n[1]+r[1])]}(wG(t).maybeAppend("marker",function(){return new HT({})}).call(function(t){return t.node().update(Object.assign({symbol:a},r))}).node()),u=v(s,2),c=u[0],l=u[1];wG(t).maybeAppend("text","text").style("x",c).style("y",l).call(nV,n)}),YY=function(t,e){var n=VY(t,[]);return function(t,e,r){var i=r.color,o=VY(r,["color"]),a=e.color,s=void 0===a?i:a,u=e.text,c={text:String(void 0===u?"":u),stroke:s,fill:s},l=v(t,1),A=v(l[0],2),f=A[0],d=A[1];return wG(new WY).call(nV,o).style("transform","translate(".concat(f,",").concat(d,")")).call(nV,c).call(nV,n).node()}};YY.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var XY=function(t,e){var n=e.coordinate;return function(e,r,i){var o=r.color,a=r.text,s=void 0===a?"":a,u=r.fontSize,c=r.rotate,l=void 0===c?0:c,A=r.transform,f=void 0===A?"":A,d={text:String(s),stroke:o,fill:o,fontSize:u,textAlign:"center",textBaseline:"middle"},h=v(e,1),p=v(h[0],2),g=p[0],y=p[1];return wG(new qu).style("x",g).style("y",y).call(nV,i).style("transformOrigin","center center").style("transform","".concat(f,"rotate(").concat(l,"deg)")).style("coordCenter",n.getCenter()).call(nV,d).call(nV,t).node()}};XY.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var qY=function(){return function(t,e){var n=e.data;if(!Array.isArray(n)||n.some(kz))return[t,e];var r=Array.isArray(n[0])?n:[n],i=r.map(function(t){return t[0]}),o=r.map(function(t){return t[1]});return[t,Xm({},e,{encode:{x:yz(i),y:yz(o)}})]}};qY.props={};var ZY=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},JY=function(){return function(t,e){e.data;var n=e.style,r=void 0===n?{}:n,i=ZY(e,["data","style"]),o=r.x,a=r.y,s=ZY(r,["x","y"]);if(null==o||null==a)return[t,e];var u=a||0;return[[0],Xm({},i,{data:[0],cartesian:!0,encode:{x:yz([o||0]),y:yz([u])},scale:{x:{type:"identity",independent:!0,guide:null},y:{type:"identity",independent:!0,guide:null}},style:s})]}};JY.props={};var $Y={text:GY,badge:YY,tag:XY},tX=function(t){var e=t.cartesian;return void 0!==e&&e?zV:function(e,n,r,i){var o=r.x,a=r.y,s=RV(n,r,t),u=Array.from(e,function(t){var e=[+o[t],+a[t]];return[i.map(s(e,t))]});return[e,u]}};tX.props={defaultShape:"text",defaultLabelShape:"label",composite:!1,shape:$Y,channels:[].concat(O(LV({shapes:Object.keys($Y)})),[{name:"x",required:!0},{name:"y",required:!0},{name:"text",scale:"identity"},{name:"fontSize",scale:"identity"},{name:"rotate",scale:"identity"}]),preInference:[].concat(O(jV()),[{type:qY},{type:JY}]),postInference:[].concat(O([]),O(_V()))};var eX=function(){return function(t,e){return[t,Xm({scale:{x:{padding:0},y:{padding:0}}},e)]}};eX.props={};var nX={cell:dV,hollow:hV},rX=function(){return function(t,e,n,r){var i=n.x,o=n.y,a=e.x,s=e.y,u=Array.from(t,function(t){var e=a.getBandWidth(a.invert(+i[t])),n=s.getBandWidth(s.invert(+o[t])),u=+i[t],c=+o[t];return[[u,c],[u+e,c],[u+e,c+n],[u,c+n]].map(function(t){return r.map(t)})});return[t,u]}};function iX(t,e,n){var r=null,i=Mz(!0),o=null,a=gV,s=null,u=uK(c);function c(c){var l,A,f,d,h,p=(c=pV(c)).length,v=!1,g=new Array(p),y=new Array(p);for(null==o&&(s=a(h=u())),l=0;l<=p;++l){if(!(l<p&&i(d=c[l],l,c))===v)if(v=!v)A=l,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),f=l-1;f>=A;--f)s.point(g[f],y[f]);s.lineEnd(),s.areaEnd()}v&&(g[l]=+t(d,l,c),y[l]=+e(d,l,c),s.point(r?+r(d,l,c):g[l],n?+n(d,l,c):y[l]))}if(h)return s=null,h+""||null}function l(){return bV().defined(i).curve(a).context(o)}return t="function"==typeof t?t:void 0===t?yV:Mz(+t),e="function"==typeof e?e:Mz(void 0===e?0:+e),n="function"==typeof n?n:void 0===n?mV:Mz(+n),c.x=function(e){return arguments.length?(t="function"==typeof e?e:Mz(+e),r=null,c):t},c.x0=function(e){return arguments.length?(t="function"==typeof e?e:Mz(+e),c):t},c.x1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:Mz(+t),c):r},c.y=function(t){return arguments.length?(e="function"==typeof t?t:Mz(+t),n=null,c):e},c.y0=function(t){return arguments.length?(e="function"==typeof t?t:Mz(+t),c):e},c.y1=function(t){return arguments.length?(n=null==t?null:"function"==typeof t?t:Mz(+t),c):n},c.lineX0=c.lineY0=function(){return l().x(t).y(e)},c.lineY1=function(){return l().x(t).y(n)},c.lineX1=function(){return l().x(r).y(e)},c.defined=function(t){return arguments.length?(i="function"==typeof t?t:Mz(!!t),c):i},c.curve=function(t){return arguments.length?(a=t,null!=o&&(s=a(o)),c):a},c.context=function(t){return arguments.length?(null==t?o=s=null:s=a(o=t),c):o},c}rX.props={defaultShape:"cell",defaultLabelShape:"label",shape:nX,composite:!1,channels:[].concat(O(LV({shapes:Object.keys(nX)})),[{name:"x",required:!0,scale:"band"},{name:"y",required:!0,scale:"band"}]),preInference:[].concat(O(jV()),[{type:Cz},{type:UY},{type:eX}]),postInference:[].concat(O([]),O(_V()))};var oX=nW(function(t){var e=t.attributes,n=e.areaPath,r=e.connectPath,i=e.areaStyle,o=e.connectStyle,a=t.ownerDocument;wG(t).maybeAppend("connect-path",function(){return a.createElement("path",{})}).style("d",r).call(nV,o),wG(t).maybeAppend("area-path",function(){return a.createElement("path",{})}).style("d",n).call(nV,i)}),aX=function(t,e){var n=t.curve,r=t.gradient,i=void 0!==r&&r,o=t.defined,a=void 0===o?function(t){return!Number.isNaN(t)&&null!=t}:o,s=t.connect,u=void 0!==s&&s,c=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["curve","gradient","defined","connect"]),l=e.coordinate,A=e.document;return function(t,e,r){var o=r.color,s=e.color,f=void 0===s?o:s,d=e.seriesColor,h=e.seriesX,p=e.seriesY,g=vK(l),y=uV(l,e),m=i&&d?iV(d,h,p,i,void 0,g):f,b=Object.assign(Object.assign(Object.assign(Object.assign({},r),{stroke:m,fill:m}),y&&{transform:y}),c),w=function(t,e){for(var n=[],r=[],i=[],o=!1,a=null,s=t.length/2,u=0;u<s;u++){var c=t[u],l=t[u+s];if([].concat(O(c),O(l)).some(function(t){return!e(t)}))o=!0;else{if(n.push(c),r.push(l),o&&a){o=!1;var A=v(a,2),f=A[0],d=A[1];i.push([f,c,d,l])}a=[c,l]}}return[n.concat(r),i]}(t,a),x=v(w,2),E=x[0],B=x[1],k=hG(b,"connect"),C=!!B.length,M=function(t){return wG(A.createElement("path",{})).style("d",t||"").call(nV,b).node()};if(gK(l)){var S=function(t){var e=l.getCenter(),r=t.slice(0,t.length/2),i=t.slice(t.length/2);return function(){var t=iX().curve(JV),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return eW(n())},delete t.lineX0,t.lineEndAngle=function(){return eW(r())},delete t.lineX1,t.lineInnerRadius=function(){return eW(i())},delete t.lineY0,t.lineOuterRadius=function(){return eW(o())},delete t.lineY1,t.curve=function(t){return arguments.length?e(tW(t)):e()._curve},t}().angle(function(t,n){return CG(EG(r[n],e))}).outerRadius(function(t,n){return kG(r[n],e)}).innerRadius(function(t,n){return kG(i[n],e)}).defined(function(t,e){return[].concat(O(r[e]),O(i[e])).every(a)}).curve(n)(i)};return!C||u&&!Object.keys(k).length?M(S(E)):C&&!u?M(S(t)):wG(new oX).style("areaStyle",b).style("connectStyle",Object.assign(Object.assign({},k),c)).style("areaPath",S(t)).style("connectPath",B.map(S).join("")).node()}var F=function(t){var e=t.slice(0,t.length/2),r=t.slice(t.length/2);return g?iX().y(function(t,n){return e[n][1]}).x1(function(t,n){return e[n][0]}).x0(function(t,e){return r[e][0]}).defined(function(t,n){return[].concat(O(e[n]),O(r[n])).every(a)}).curve(n)(e):iX().x(function(t,n){return e[n][0]}).y1(function(t,n){return e[n][1]}).y0(function(t,e){return r[e][1]}).defined(function(t,n){return[].concat(O(e[n]),O(r[n])).every(a)}).curve(n)(e)};return!C||u&&!Object.keys(k).length?M(F(E)):C&&!u?M(F(t)):wG(new oX).style("areaStyle",b).style("connectStyle",Object.assign(Object.assign({},k),c)).style("areaPath",F(t)).style("connectPath",B.map(F).join("")).node()}};aX.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var sX=function(t,e){var n=e.coordinate;return function(){var r=gK(n)?EV:gV;return aX(Object.assign({curve:r},t),e).apply(void 0,arguments)}};sX.props=Object.assign(Object.assign({},aX.props),{defaultMarker:"square"});var uX=function(t,e){var n=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,[]),r=e.coordinate;return function(){var t=gK(r)?dW:vK(r)?xW:wW;return aX(Object.assign({curve:t},n),e).apply(void 0,arguments)}};uX.props=Object.assign(Object.assign({},aX.props),{defaultMarker:"smooth"});var cX=function(t,e){return function(){return aX(Object.assign({curve:kW},t),e).apply(void 0,arguments)}};cX.props=Object.assign(Object.assign({},aX.props),{defaultMarker:"hvh"});var lX=function(t,e){return function(){return aX(Object.assign({curve:OW},t),e).apply(void 0,arguments)}};lX.props=Object.assign(Object.assign({},aX.props),{defaultMarker:"vh"});var AX=function(t,e){return function(){return aX(Object.assign({curve:CW},t),e).apply(void 0,arguments)}};AX.props=Object.assign(Object.assign({},aX.props),{defaultMarker:"hv"});var fX={area:sX,smooth:uX,hvh:cX,vh:lX,hv:AX},dX=function(){return function(t,e,n,r){var i,o,a=n.x,s=n.y,u=n.y1,c=n.series,l=e.x,A=e.y,f=c?Array.from(TK(t,function(t){return c[t]}).values()):[t],d=f.map(function(t){return t[0]}).filter(function(t){return void 0!==t}),h=((null===(i=null==l?void 0:l.getBandWidth)||void 0===i?void 0:i.call(l))||0)/2,p=((null===(o=null==A?void 0:A.getBandWidth)||void 0===o?void 0:o.call(A))||0)/2,v=Array.from(f,function(t){for(var e=t.length,n=new Array(2*e),i=0;i<t.length;i++){var o=t[i];n[i]=r.map([+a[o]+h,+s[o]+p]),n[e+i]=r.map([+a[o]+h,+u[o]+p])}return n});return[d,v,f]}};dX.props={defaultShape:"area",defaultLabelShape:"label",composite:!1,shape:fX,channels:[].concat(O(LV({shapes:Object.keys(fX)})),[{name:"x",required:!0},{name:"y",required:!0},{name:"size"},{name:"series",scale:"band"}]),preInference:[].concat(O(jV()),[{type:NW},{type:Oz},{type:eX}]),postInference:[].concat(O([]),O(QV())),interaction:{shareTooltip:!0,seriesTooltip:!0,crosshairs:!0}};var hX=function(){return function(t,e){var n=e.encode;if(n.y1)return[t,e];var r=v(Ez(n,"y"),1)[0];return[t,Xm({},e,{encode:{y1:yz(O(r))}})]}};hX.props={};var pX=function(){return function(t,e){var n=e.encode;if(n.x1)return[t,e];var r=v(Ez(n,"x"),1)[0];return[t,Xm({},e,{encode:{x1:yz(O(r))}})]}};pX.props={};var vX=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},gX=function(t,e){var n=t.arrow,r=void 0===n||n,i=t.arrowSize,o=void 0===i?"40%":i,a=vX(t,["arrow","arrowSize"]),s=e.document;return function(t,e,n){var i=n.defaultColor,u=vX(n,["defaultColor"]),c=e.color,l=void 0===c?i:c,A=e.transform,f=v(t,2),d=f[0],h=f[1],p=sK();if(p.moveTo.apply(p,O(d)),p.lineTo.apply(p,O(h)),r){var g=function(t,e,n){var r=n.arrowSize,i="string"==typeof r?+parseFloat(r)/100*kG(t,e):r,o=Math.PI/6,a=Math.atan2(e[1]-t[1],e[0]-t[0]),s=Math.PI/2-a-o,u=a-o;return[[e[0]-i*Math.sin(s),e[1]-i*Math.cos(s)],[e[0]-i*Math.cos(u),e[1]-i*Math.sin(u)]]}(d,h,{arrowSize:o}),y=v(g,2),m=y[0],b=y[1];p.moveTo.apply(p,O(m)),p.lineTo.apply(p,O(h)),p.lineTo.apply(p,O(b))}return wG(s.createElement("path",{})).call(nV,u).style("d",p.toString()).style("stroke",l).style("transform",A).call(nV,a).node()}};gX.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var yX=function(t,e){var n=t.arrow,r=void 0!==n&&n;return function(){return gX(Object.assign(Object.assign({},t),{arrow:r}),e).apply(void 0,arguments)}};yX.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var mX=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},bX=function(t,e){var n=mX(t,[]),r=e.coordinate,i=e.document;return function(t,e,o){var a=o.color,s=mX(o,["color"]),u=e.color,c=void 0===u?a:u,l=e.transform,A=v(t,2),f=A[0],d=A[1],h=sK();if(h.moveTo(f[0],f[1]),gK(r)){var p=r.getCenter();h.quadraticCurveTo(p[0],p[1],d[0],d[1])}else rV(h,f,d,FG(f,d),kG(f,d)/2);return wG(i.createElement("path",{})).call(nV,s).style("d",h.toString()).style("stroke",c).style("transform",l).call(nV,n).node()}};bX.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var wX=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},xX=function(t,e){var n=wX(t,[]),r=e.document;return function(t,e,i){var o=i.color,a=wX(i,["color"]),s=e.color,u=void 0===s?o:s,c=e.transform,l=v(t,2),A=l[0],f=l[1],d=sK();return d.moveTo(A[0],A[1]),d.bezierCurveTo(A[0]/2+f[0]/2,A[1],A[0]/2+f[0]/2,f[1],f[0],f[1]),wG(r.createElement("path",{})).call(nV,a).style("d",d.toString()).style("stroke",u).style("transform",c).call(nV,n).node()}};xX.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var EX=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},BX=function(t,e){var n=t.cornerRatio,r=void 0===n?1/3:n,i=EX(t,["cornerRatio"]),o=e.coordinate,a=e.document;return function(t,e,n){var s=n.defaultColor,u=EX(n,["defaultColor"]),c=e.color,l=void 0===c?s:c,A=e.transform,f=v(t,2),d=function(t,e,n,r){var i=sK();if(gK(n)){var o=n.getCenter(),a=kG(t,o),s=(kG(e,o)-a)*r+a;return i.moveTo(t[0],t[1]),rV(i,t,e,o,s),i.lineTo(e[0],e[1]),i}return vK(n)?(i.moveTo(t[0],t[1]),i.lineTo(t[0]+(e[0]-t[0])*r,t[1]),i.lineTo(t[0]+(e[0]-t[0])*r,e[1]),i.lineTo(e[0],e[1]),i):(i.moveTo(t[0],t[1]),i.lineTo(t[0],t[1]+(e[1]-t[1])*r),i.lineTo(e[0],t[1]+(e[1]-t[1])*r),i.lineTo(e[0],e[1]),i)}(f[0],f[1],o,r);return wG(a.createElement("path",{})).call(nV,u).style("d",d.toString()).style("stroke",l).style("transform",A).call(nV,i).node()}};BX.props={defaultMarker:"vhv",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var kX={link:yX,arc:bX,smooth:xX,vhv:BX},OX=function(t){return function(e,n,r,i){var o=r.x,a=r.y,s=r.x1,u=void 0===s?o:s,c=r.y1,l=void 0===c?a:c,A=RV(n,r,t),f=e.map(function(t){return[i.map(A([+o[t],+a[t]],t)),i.map(A([+u[t],+l[t]],t))]});return[e,f]}};OX.props={defaultShape:"link",defaultLabelShape:"label",composite:!1,shape:kX,channels:[].concat(O(LV({shapes:Object.keys(kX)})),[{name:"x",required:!0},{name:"y",required:!0}]),preInference:[].concat(O(jV()),[{type:hX},{type:pX}]),postInference:[].concat(O([]),O(_V()))};var CX=function(t,e){var n=e.coordinate,r=e.document;return function(e,i,o){var a=o.color,s=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(o,["color"]),u=i.color,c=void 0===u?a:u,l=i.src,A=void 0===l?"":l,f=i.size,d=void 0===f?32:f,h=i.transform,p=void 0===h?"":h,g=t.width,y=void 0===g?d:g,m=t.height,b=void 0===m?d:m,w=v(e,1),x=v(w[0],2),E=x[0],B=x[1],k=v(n.getSize(),2),O=k[0],C=k[1];y="string"==typeof y?HV(y)*O:y,b="string"==typeof b?HV(b)*C:b;var M=E-Number(y)/2,S=B-Number(b)/2;return wG(r.createElement("image",{})).call(nV,s).style("x",M).style("y",S).style("src",A).style("stroke",c).style("transform",p).call(nV,t).style("width",y).style("height",b).node()}};CX.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var MX={image:CX},SX=function(t){return t.cartesian?zV:function(e,n,r,i){var o=r.x,a=r.y,s=RV(n,r,t),u=Array.from(e,function(t){var e=[+o[t],+a[t]];return[i.map(s(e,t))]});return[e,u]}};SX.props={defaultShape:"image",defaultLabelShape:"label",composite:!1,shape:MX,channels:[].concat(O(LV({shapes:Object.keys(MX)})),[{name:"x",required:!0},{name:"y",required:!0},{name:"src",scale:"identity"},{name:"size"}]),preInference:[].concat(O(jV()),[{type:qY},{type:JY}]),postInference:[].concat(O([]),O(_V()))};var FX=function(t,e){var n=e.coordinate,r=e.document;return function(e,i,o){var a=o.color,s=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(o,["color"]),u=i.color,c=void 0===u?a:u,l=i.transform,A=function(t,e){var n=sK();if(gK(e)){var r=e.getCenter(),i=[].concat(O(t),[t[0]]),o=i.map(function(t){return kG(t,r)});return i.forEach(function(e,i){if(0!==i){var a=o[i],s=t[i-1],u=o[i-1];void 0!==u&&Math.abs(a-u)<1e-10?rV(n,s,e,r,a):n.lineTo(e[0],e[1])}else n.moveTo(e[0],e[1])}),n.closePath(),n}return function(t,e){return e.forEach(function(e,n){return 0===n?t.moveTo(e[0],e[1]):t.lineTo(e[0],e[1])}),t.closePath(),t}(n,t)}(e,n);return wG(r.createElement("path",{})).call(nV,s).style("d",A.toString()).style("stroke",c).style("fill",c).style("transform",l).call(nV,t).node()}};FX.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var TX=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},PX=function(t,e){var n=TX(t,[]),r=e.coordinate,i=e.document;return function(t,e,o){var a=o.color,s=TX(o,["color"]),u=e.color,c=void 0===u?a:u,l=e.transform,A=function(t,e){var n=v(t,4),r=n[0],i=n[1],o=n[2],a=n[3],s=sK();if(gK(e)){var u=e.getCenter(),c=kG(u,r);return s.moveTo(r[0],r[1]),s.quadraticCurveTo(u[0],u[1],o[0],o[1]),rV(s,o,a,u,c),s.quadraticCurveTo(u[0],u[1],i[0],i[1]),rV(s,i,r,u,c),s.closePath(),s}return s.moveTo(r[0],r[1]),s.bezierCurveTo(r[0]/2+o[0]/2,r[1],r[0]/2+o[0]/2,o[1],o[0],o[1]),s.lineTo(a[0],a[1]),s.bezierCurveTo(a[0]/2+i[0]/2,a[1],a[0]/2+i[0]/2,i[1],i[0],i[1]),s.lineTo(r[0],r[1]),s.closePath(),s}(t,r);return wG(i.createElement("path",{})).call(nV,s).style("d",A.toString()).style("fill",c||a).style("stroke",c||a).style("transform",l).call(nV,n).node()}};PX.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var IX={polygon:FX,ribbon:PX},NX=function(){return function(t,e,n,r){var i=Object.entries(n).filter(function(t){return v(t,1)[0].startsWith("x")}).map(function(t){return v(t,2)[1]}),o=Object.entries(n).filter(function(t){return v(t,1)[0].startsWith("y")}).map(function(t){return v(t,2)[1]}),a=t.map(function(t){for(var e=[],n=0;n<i.length;n++){var a=i[n][t];if(void 0===a)break;var s=o[n][t];e.push(r.map([+a,+s]))}return e});return[t,a]}};NX.props={defaultShape:"polygon",defaultLabelShape:"label",composite:!1,shape:IX,channels:[].concat(O(LV({shapes:Object.keys(IX)})),[{name:"x",required:!0},{name:"y",required:!0}]),preInference:O(jV()),postInference:[].concat(O([]),O(_V()))};var LX=function(t,e){var n=e.coordinate,r=e.document;return function(e,i,o){var a=i.color,s=i.transform,u=o.color,c=o.fill,l=void 0===c?u:c,A=o.stroke,f=void 0===A?u:A,d=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(o,["color","fill","stroke"]),h=function(t,e){var n=sK();if(gK(e)){var r=e.getCenter(),i=v(r,2),o=i[0],a=i[1],s=OG(EG(t[0],r)),u=OG(EG(t[1],r)),c=kG(r,t[2]),l=kG(r,t[3]),A=kG(r,t[8]),f=kG(r,t[10]),d=kG(r,t[11]);n.moveTo.apply(n,O(t[0])),n.arc(o,a,c,s,u),n.arc(o,a,c,u,s,!0),n.moveTo.apply(n,O(t[2])),n.lineTo.apply(n,O(t[3])),n.moveTo.apply(n,O(t[4])),n.arc(o,a,l,s,u),n.lineTo.apply(n,O(t[6])),n.arc(o,a,f,u,s,!0),n.closePath(),n.moveTo.apply(n,O(t[8])),n.arc(o,a,A,s,u),n.arc(o,a,A,u,s,!0),n.moveTo.apply(n,O(t[10])),n.lineTo.apply(n,O(t[11])),n.moveTo.apply(n,O(t[12])),n.arc(o,a,d,s,u),n.arc(o,a,d,u,s,!0)}else n.moveTo.apply(n,O(t[0])),n.lineTo.apply(n,O(t[1])),n.moveTo.apply(n,O(t[2])),n.lineTo.apply(n,O(t[3])),n.moveTo.apply(n,O(t[4])),n.lineTo.apply(n,O(t[5])),n.lineTo.apply(n,O(t[6])),n.lineTo.apply(n,O(t[7])),n.closePath(),n.moveTo.apply(n,O(t[8])),n.lineTo.apply(n,O(t[9])),n.moveTo.apply(n,O(t[10])),n.lineTo.apply(n,O(t[11])),n.moveTo.apply(n,O(t[12])),n.lineTo.apply(n,O(t[13]));return n}(e,n);return wG(r.createElement("path",{})).call(nV,d).style("d",h.toString()).style("stroke",f).style("fill",a||l).style("transform",s).call(nV,t).node()}};LX.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var _X=function(t,e){var n=e.coordinate,r=e.document;return function(e,i,o){var a=i.color,s=i.transform,u=o.color,c=o.fill,l=void 0===c?u:c,A=o.stroke,f=void 0===A?u:A,d=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(o,["color","fill","stroke"]),h=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,r=sK();if(!gK(e))return r.moveTo.apply(r,O(t[2])),r.lineTo.apply(r,O(t[3])),r.lineTo(t[3][0]-n,t[3][1]),r.lineTo(t[10][0]-n,t[10][1]),r.lineTo(t[10][0]+n,t[10][1]),r.lineTo(t[3][0]+n,t[3][1]),r.lineTo.apply(r,O(t[3])),r.closePath(),r.moveTo.apply(r,O(t[10])),r.lineTo.apply(r,O(t[11])),r.moveTo(t[3][0]+n/2,t[8][1]),r.arc(t[3][0],t[8][1],n/2,0,2*Math.PI),r.closePath(),r;var i=e.getCenter(),o=v(i,2),a=o[0],s=o[1],u=kG(i,t[3]),c=kG(i,t[8]),l=kG(i,t[10]),A=OG(EG(t[2],i)),f=Math.asin(n/c),d=A-f,h=A+f;r.moveTo.apply(r,O(t[2])),r.lineTo.apply(r,O(t[3])),r.moveTo(Math.cos(d)*u+a,Math.sin(d)*u+s),r.arc(a,s,u,d,h),r.lineTo(Math.cos(h)*l+a,Math.sin(h)*l+s),r.arc(a,s,l,h,d,!0),r.lineTo(Math.cos(d)*u+a,Math.sin(d)*u+s),r.closePath(),r.moveTo.apply(r,O(t[10])),r.lineTo.apply(r,O(t[11]));var p=(d+h)/2;return r.moveTo(Math.cos(p)*(c+n/2)+a,Math.sin(p)*(c+n/2)+s),r.arc(Math.cos(p)*c+a,Math.sin(p)*c+s,n/2,p,2*Math.PI+p),r.closePath(),r}(e,n,4);return wG(r.createElement("path",{})).call(nV,d).style("d",h.toString()).style("stroke",f).style("fill",a||l).style("transform",s).call(nV,t).node()}};_X.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var QX={box:LX,violin:_X},UX=function(){return function(t,e,n,r){var i=n.x,o=n.y,a=n.y1,s=n.y2,u=n.y3,c=n.y4,l=n.series,A=e.x,f=e.series,d=Array.from(t,function(t){var e=A.getBandWidth(A.invert(+i[t])),n=e*(f?f.getBandWidth(f.invert(+(null==l?void 0:l[t]))):1),d=(+(null==l?void 0:l[t])||0)*e,h=+i[t]+d+n/2,p=+o[t],v=+a[t],g=+s[t],y=+u[t],m=+c[t];return[[h-n/2,m],[h+n/2,m],[h,m],[h,y],[h-n/2,y],[h+n/2,y],[h+n/2,v],[h-n/2,v],[h-n/2,g],[h+n/2,g],[h,v],[h,p],[h-n/2,p],[h+n/2,p]].map(function(t){return r.map(t)})});return[t,d]}};UX.props={defaultShape:"box",defaultLabelShape:"label",composite:!1,shape:QX,channels:[].concat(O(LV({shapes:Object.keys(QX)})),[{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"series",scale:"band"}]),preInference:[].concat(O(jV()),[{type:Cz}]),postInference:[].concat(O([]),O(QV())),interaction:{shareTooltip:!0}};var jX={vector:gX},DX=function(){return function(t,e,n,r){var i=n.x,o=n.y,a=n.size,s=n.rotate,u=v(r.getSize(),2),c=u[0],l=u[1],A=t.map(function(t){var e=+s[t]/180*Math.PI,n=+a[t],u=n/l,A=n/c*Math.cos(e),f=-u*Math.sin(e);return[r.map([+i[t]-A/2,+o[t]-f/2]),r.map([+i[t]+A/2,+o[t]+f/2])]});return[t,A]}};DX.props={defaultShape:"vector",defaultLabelShape:"label",composite:!1,shape:jX,channels:[].concat(O(LV({shapes:Object.keys(jX)})),[{name:"x",required:!0},{name:"y",required:!0},{name:"rotate",required:!0,scale:"identity"},{name:"size",required:!0}]),preInference:O(jV()),postInference:[].concat(O([]),O(_V()))};var RX=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},HX=function(t,e){var n=t.arrow,r=t.arrowSize,i=void 0===r?4:r,o=RX(t,["arrow","arrowSize"]),a=e.coordinate,s=e.document;return function(t,e,r){var u=r.color,c=r.lineWidth,l=RX(r,["color","lineWidth"]),A=e.color,f=void 0===A?u:A,d=e.size,h=void 0===d?c:d,p=n?function(t,e,n){return t.createElement("path",{style:Object.assign({d:"M ".concat(e,",").concat(e," L -").concat(e,",0 L ").concat(e,",-").concat(e," L 0,0 Z"),transformOrigin:"center"},n)})}(s,i,Object.assign({fill:o.stroke||f,stroke:o.stroke||f},hG(o,"arrow"))):null,g=function(t,e){if(!gK(e))return bV().x(function(t){return t[0]}).y(function(t){return t[1]})(t);var n=e.getCenter();return pK()({startAngle:0,endAngle:2*Math.PI,outerRadius:kG(t[0],n),innerRadius:kG(t[1],n)})}(t,a),y=function(t,e){if(!gK(t))return e;var n=v(t.getCenter(),2),r=n[0],i=n[1];return"translate(".concat(r,", ").concat(i,") ").concat(e||"")}(a,e.transform);return wG(s.createElement("path",{})).call(nV,l).style("d",g).style("stroke",f).style("lineWidth",h).style("transform",y).style("markerEnd",p).call(nV,o).node()}};HX.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var zX=function(){return function(t,e){var n=e.data;return!Array.isArray(n)||n.some(kz)?[t,e]:[t,Xm({},e,{encode:{x:yz(n)}})]}};zX.props={};var KX={line:HX},GX=function(t){return function(e,n,r,i){var o=r.x,a=RV(n,r,Xm({style:{bandOffset:0}},t)),s=Array.from(e,function(t){return[[o[t],1],[o[t],0]].map(function(e){return i.map(a(e,t))})});return[e,s]}};GX.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:KX,channels:[].concat(O(UV({shapes:Object.keys(KX)})),[{name:"x",required:!0}]),preInference:[].concat(O(jV()),[{type:zX}]),postInference:O([])};var VX=function(){return function(t,e){var n=e.data;return!Array.isArray(n)||n.some(kz)?[t,e]:[t,Xm({},e,{encode:{y:yz(n)}})]}};VX.props={};var WX={line:HX},YX=function(t){return function(e,n,r,i){var o=r.y,a=RV(n,r,Xm({style:{bandOffset:0}},t)),s=Array.from(e,function(t){return[[0,o[t]],[1,o[t]]].map(function(e){return i.map(a(e,t))})});return[e,s]}};YX.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:WX,channels:[].concat(O(UV({shapes:Object.keys(WX)})),[{name:"y",required:!0}]),preInference:[].concat(O(jV()),[{type:VX}]),postInference:O([])};var XX=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function qX(t,e,n){return[["M",t,e],["L",t+2*n,e-n],["L",t+2*n,e+n],["Z"]]}var ZX=function(t,e){var n=t.offsetX,r=void 0===n?0:n,i=t.sourceOffsetX,o=void 0===i?r:i,a=t.targetOffsetX,s=void 0===a?r:a,u=t.offsetY,c=void 0===u?0:u,l=t.sourceOffsetY,A=void 0===l?c:l,f=t.targetOffsetY,d=void 0===f?c:f,h=t.connectLength1,p=t.endMarker,g=void 0===p||p,y=XX(t,["offsetX","sourceOffsetX","targetOffsetX","offsetY","sourceOffsetY","targetOffsetY","connectLength1","endMarker"]),m=e.coordinate;return function(t,e,n){var r=n.color,i=n.connectLength1,a=XX(n,["color","connectLength1"]),u=e.color,c=e.transform,l=function(t,e,n,r,i,o){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=v(e,2),u=v(s[0],2),c=u[0],l=u[1],A=v(s[1],2),f=A[0],d=A[1];if(vK(t)){var h=c+n,p=h+a,g=l+i,y=d+o;return[[h,g],[p,g],[p,y],[f+r,y]]}var m=l-n,b=m-a,w=c-i,x=f-o;return[[w,m],[w,b],[x,b],[x,d-r]]}(m,t,A,d,o,s,null!=h?h:i),f=hG(Object.assign(Object.assign({},y),n),"endMarker");return wG(new zu).call(nV,a).style("d",function(t){return bV().x(function(t){return t[0]}).y(function(t){return t[1]})(t)}(l)).style("stroke",u||r).style("transform",c).style("markerEnd",g?new HT({className:"marker",style:Object.assign(Object.assign({},f),{symbol:qX})}):null).call(nV,y).node()}};ZX.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var JX={connector:ZX},$X=function(){return OX.apply(void 0,arguments)};function tq(t,e,n,r){if(e)return function(){return[0,1]};var i=n[t],o=n["".concat(t,"1")];return function(t){var e,n=(null===(e=r.getBandWidth)||void 0===e?void 0:e.call(r,r.invert(+o[t])))||0;return[i[t],o[t]+n]}}function eq(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.extendX,n=void 0!==e&&e,r=t.extendY,i=void 0!==r&&r;return function(t,e,r,o){var a=tq("x",n,r,e.x),s=tq("y",i,r,e.y),u=Array.from(t,function(t){var e=v(a(t),2),n=e[0],r=e[1],i=v(s(t),2),u=i[0],c=i[1];return[[n,u],[r,u],[r,c],[n,c]].map(function(t){return o.map(t)})});return[t,u]}}$X.props={defaultShape:"connector",defaultLabelShape:"label",composite:!1,shape:JX,channels:[].concat(O(UV({shapes:Object.keys(JX)})),[{name:"x",required:!0},{name:"y",required:!0}]),preInference:O(jV()),postInference:O([])};var nq={range:dV},rq=function(){return eq()};rq.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:nq,channels:[].concat(O(UV({shapes:Object.keys(nq)})),[{name:"x",required:!0},{name:"y",required:!0}]),preInference:O(jV()),postInference:O([])};var iq=function(){return function(t,e){var n=e.data;if(Array.isArray(n)&&(n.every(Array.isArray)||!n.some(kz))){var r=function(t,e){return Array.isArray(t[0])?t.map(function(t){return t[e]}):[t[e]]};return[t,Xm({},e,{encode:{x:yz(r(n,0)),x1:yz(r(n,1))}})]}return[t,e]}};iq.props={};var oq={range:dV},aq=function(){return eq({extendY:!0})};aq.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:oq,channels:[].concat(O(UV({shapes:Object.keys(oq)})),[{name:"x",required:!0}]),preInference:[].concat(O(jV()),[{type:iq}]),postInference:O([])};var sq=function(){return function(t,e){var n=e.data;if(Array.isArray(n)&&(n.every(Array.isArray)||!n.some(kz))){var r=function(t,e){return Array.isArray(t[0])?t.map(function(t){return t[e]}):[t[e]]};return[t,Xm({},e,{encode:{y:yz(r(n,0)),y1:yz(r(n,1))}})]}return[t,e]}};sq.props={};var uq={range:dV},cq=function(){return eq({extendX:!0})};cq.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:uq,channels:[].concat(O(UV({shapes:Object.keys(uq)})),[{name:"y",required:!0}]),preInference:[].concat(O(jV()),[{type:sq}]),postInference:O([])};var lq=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},Aq=function(t,e){t.arrow;var n=t.colorAttribute,r=lq(t,["arrow","colorAttribute"]),i=e.coordinate,o=e.document;return function(t,e,a){var s=a.color,u=(a.stroke,lq(a,["color","stroke"])),c=e.d,l=e.color,A=void 0===l?s:l,f=v(i.getSize(),2),d=f[0],h=f[1];return wG(o.createElement("path",{})).call(nV,u).style("d","function"==typeof c?c({width:d,height:h}):c).style(n,A).call(nV,r).node()}};Aq.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var fq=function(t,e){return Aq(Object.assign({colorAttribute:"fill"},t),e)};fq.props={defaultMarker:"hvh",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var dq=function(t,e){return Aq(Object.assign({fill:"none",colorAttribute:"stroke"},t),e)};dq.props={defaultMarker:"hvh",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var hq={path:fq,hollow:dq},pq=function(t){return function(t,e,n,r){return[t,t.map(function(){return[[0,0]]})]}};pq.props={defaultShape:"path",defaultLabelShape:"label",shape:hq,composite:!1,channels:[].concat(O(LV({shapes:Object.keys(hq)})),[{name:"d",scale:"identity"}]),preInference:O(jV()),postInference:O([])};var vq=function(t,e){var n=t.render,r=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["render"]);return function(t){var i=v(t,1),o=v(i[0],2),a=o[0],s=o[1];return n(Object.assign(Object.assign({},r),{x:a,y:s}),e)}};vq.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var gq=function(){return function(t,e){var n=e.style,r=void 0===n?{}:n;return[t,Xm({},e,{style:Object.assign(Object.assign({},r),Object.fromEntries(Object.entries(r).filter(function(t){return"function"==typeof v(t,2)[1]}).map(function(t){var e=v(t,2),n=e[0],r=e[1];return[n,function(){return r}]})))})]}};gq.props={};var yq={shape:vq},mq=function(t){return t.cartesian?zV:function(e,n,r,i){var o=r.x,a=r.y,s=RV(n,r,t),u=Array.from(e,function(t){var e=[+o[t],+a[t]];return[i.map(s(e,t))]});return[e,u]}};mq.props={defaultShape:"shape",defaultLabelShape:"label",composite:!1,shape:yq,channels:[{name:"x",required:!0},{name:"y",required:!0}],preInference:[].concat(O(jV()),[{type:qY},{type:JY},{type:gq}])};var bq=function(t,e){var n=e.document;return function(e,r,i){var o=r.transform,a=i.color,s=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(i,["color"]),u=r.color,c=void 0===u?a:u,l=hw(e),A=l[0],f=d(l).slice(1),h=sK();return h.moveTo.apply(h,O(A)),f.forEach(function(t){var e=v(t,2),n=e[0],r=e[1];h.lineTo(n,r)}),h.closePath(),wG(n.createElement("path",{})).call(nV,s).style("d",h.toString()).style("stroke",c||a).style("fill",c||a).style("fillOpacity",.4).style("transform",o).call(nV,t).node()}};bq.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var wq={density:bq},xq=function(){return function(t,e,n,r){var i=n.x,o=n.series,a=Object.entries(n).filter(function(t){return v(t,1)[0].startsWith("y")}).map(function(t){return v(t,2)[1]}),s=Object.entries(n).filter(function(t){return v(t,1)[0].startsWith("size")}).map(function(t){return v(t,2)[1]});if(void 0===i||void 0===a||void 0===s)throw new Error("Missing encode for x or y or size channel.");var u=e.x,c=e.series,l=Array.from(t,function(e){var n=u.getBandWidth(u.invert(+i[e])),l=n*(c?c.getBandWidth(c.invert(+(null==o?void 0:o[e]))):1),A=(+(null==o?void 0:o[e])||0)*n,f=+i[e]+A+l/2;return[].concat(O(a.map(function(n,r){return[f+ +s[r][e]/t.length,+a[r][e]]})),O(a.map(function(n,r){return[f-+s[r][e]/t.length,+a[r][e]]}).reverse())).map(function(t){return r.map(t)})});return[t,l]}};function Eq(t,e){var n;if(void 0===e){var r,i=qn(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;null!=o&&(n>o||void 0===n&&o>=o)&&(n=o)}}catch(t){i.e(t)}finally{i.f()}}else{var a,s=-1,u=qn(t);try{for(u.s();!(a=u.n()).done;){var c=a.value;null!=(c=e(c,++s,t))&&(n>c||void 0===n&&c>=c)&&(n=c)}}catch(t){u.e(t)}finally{u.f()}}return n}function Bq(t,e){var n;if(void 0===e){var r,i=qn(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;null!=o&&(n<o||void 0===n&&o>=o)&&(n=o)}}catch(t){i.e(t)}finally{i.f()}}else{var a,s=-1,u=qn(t);try{for(u.s();!(a=u.n()).done;){var c=a.value;null!=(c=e(c,++s,t))&&(n<c||void 0===n&&c>=c)&&(n=c)}}catch(t){u.e(t)}finally{u.f()}}return n}function kq(t){var e,n,r,i=t||1;function o(t,o){++e>i&&(r=n,a(1),++e),n[t]=o}function a(t){e=0,n=Object.create(null),t||(r=Object.create(null))}return a(),{clear:a,has:function(t){return void 0!==n[t]||void 0!==r[t]},get:function(t){var e=n[t];return void 0!==e?e:void 0!==(e=r[t])?(o(t,e),e):void 0},set:function(t,e){void 0!==n[t]?n[t]=e:o(t,e)}}}function Oq(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return"".concat(arguments.length<=0?void 0:arguments[0])},n=kq(arguments.length>2&&void 0!==arguments[2]?arguments[2]:16);return function(){var r=e.apply(void 0,arguments),i=n.get(r);return n.has(r)?n.get(r):(i=t.apply(void 0,arguments),n.set(r,i),i)}}function Cq(t,e,n){var r=t?t():document.createElement("canvas");return r.width=e,r.height=n,r}xq.props={defaultShape:"density",defaultLabelShape:"label",composite:!1,shape:wq,channels:[].concat(O(LV({shapes:Object.keys(wq)})),[{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"size",required:!0},{name:"series",scale:"band"},{name:"size",required:!0,scale:"identity"}]),preInference:[].concat(O(jV()),[{type:Oz},{type:Cz}]),postInference:[].concat(O([]),O(QV())),interaction:{shareTooltip:!0}},kq(3);var Mq=Oq(function(t,e,n){var r=Cq(n,2*t,2*t),i=r.getContext("2d"),o=t,a=t;if(1===e)i.beginPath(),i.arc(o,a,t,0,2*Math.PI,!1),i.fillStyle="rgba(0,0,0,1)",i.fill();else{var s=i.createRadialGradient(o,a,t*e,o,a,t);s.addColorStop(0,"rgba(0,0,0,1)"),s.addColorStop(1,"rgba(0,0,0,0)"),i.fillStyle=s,i.fillRect(0,0,2*t,2*t)}return r},function(t){return"".concat(t)});function Sq(t,e,n,r,i,o,a){var s=Object.assign({blur:.85,minOpacity:0,opacity:.6,maxOpacity:1,gradient:[[.25,"rgb(0,0,255)"],[.55,"rgb(0,255,0)"],[.85,"yellow"],[1,"rgb(255,0,0)"]]},o);s.minOpacity*=255,s.opacity*=255,s.maxOpacity*=255;var u=Cq(a,t,e).getContext("2d"),c=function(t,e){var n=Cq(e,256,1).getContext("2d"),r=n.createLinearGradient(0,0,256,1);return function(t){return"string"==typeof t?t.split(" ").map(function(t){var e=v(t.split(":"),2);return[+e[0],e[1]]}):t}(t).forEach(function(t){var e=v(t,2),n=e[0],i=e[1];r.addColorStop(n,i)}),n.fillStyle=r,n.fillRect(0,0,256,1),n.getImageData(0,0,256,1).data}(s.gradient,a);u.clearRect(0,0,t,e),function(t,e,n,r,i,o){for(var a=i.blur,s=r.length;s--;){var u=r[s],c=u.x,l=u.y,A=u.value,f=u.radius,d=Math.min(A,n),h=c-f,p=l-f,v=Mq(f,1-a,o),g=(d-e)/(n-e);t.globalAlpha=Math.max(g,.001),t.drawImage(v,h,p)}}(u,n,r,i,s,a);var l=function(t,e,n,r,i){for(var o=i.minOpacity,a=i.opacity,s=i.maxOpacity,u=i.useGradientOpacity,c=e,l=n,A=t.getImageData(0,0,c,l),f=A.data,d=f.length,h=3;h<d;h+=4){var p=f[h],v=4*p;if(v){var g=a||Math.max(0,Math.min(s,Math.max(o,p)));f[h-3]=r[v],f[h-2]=r[v+1],f[h-1]=r[v+2],f[h]=u?r[v+3]:g}}return A}(u,t,e,c,s),A=Cq(a,t,e).getContext("2d");return A.putImageData(l,0,0),A}var Fq=function(t,e){var n=t.gradient,r=t.opacity,i=t.maxOpacity,o=t.minOpacity,a=t.blur,s=t.useGradientOpacity,u=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["gradient","opacity","maxOpacity","minOpacity","blur","useGradientOpacity"]),c=e.coordinate,l=e.createCanvas,A=e.document;return function(t,e,f){var d,h,p=e.transform,g=v(c.getSize(),2),y=g[0],m=g[1],b=t.map(function(t){return{x:t[0],y:t[1],value:t[2],radius:t[3]}}),w=Eq(t,function(t){return t[2]}),x=Bq(t,function(t){return t[2]}),E=y&&m?Sq(y,m,w,x,b,(d={gradient:n,opacity:r,minOpacity:o,maxOpacity:i,blur:a,useGradientOpacity:s},h=function(t){return void 0===t},Object.keys(d).reduce(function(t,e){var n=d[e];return h(n)||(t[e]=n),t},{})),l):{canvas:null};return wG(A.createElement("image",{})).call(nV,f).style("x",0).style("y",0).style("width",y).style("height",m).style("src",E.canvas.toDataURL()).style("transform",p).call(nV,u).node()}};Fq.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var Tq={heatmap:Fq},Pq=function(t){return function(t,e,n,r){var i=n.x,o=n.y,a=n.size,s=n.color,u=Array.from(t,function(t){var e=a?+a[t]:40;return[].concat(O(r.map([+i[t],+o[t]])),[s[t],e])});return[[0],[u]]}};Pq.props={defaultShape:"heatmap",defaultLabelShape:"label",composite:!1,shape:Tq,channels:[].concat(O(LV({shapes:Object.keys(Tq)})),[{name:"x",required:!0},{name:"y",required:!0},{name:"color",scale:"identity",required:!0},{name:"size"}]),preInference:[].concat(O(jV()),[{type:Cz},{type:UY}]),postInference:[].concat(O([]),O(_V()))};var Iq=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function Nq(t,e){var n=e.text,r=void 0===n?"text":n,i=e.value,o=void 0===i?"value":i;return t.map(function(t){return Object.assign(Object.assign({},t),{text:t[r],value:t[o]})})}var Lq=function(){return{axis:!1,type:"text",encode:{x:"x",y:"y",text:"text",rotate:"rotate",fontSize:"size",shape:"tag"},scale:{x:{range:[0,1]},y:{range:[0,1]}},style:{fontFamily:function(t){return t.fontFamily}},tooltip:{items:[function(t){return{name:t.text,value:t.value}}]}}},_q=function(t,e){return n=void 0,r=void 0,i=void 0,o=(0,Dn.A)().m(function n(){var r,i,o,a,s,u,c,l,A,f,d,h;return(0,Dn.A)().w(function(n){for(;;)if(0===n.n)return r=e.width,i=e.height,o=t.data,a=t.encode,s=void 0===a?{}:a,u=t.scale,c=t.style,l=void 0===c?{}:c,A=t.layout,f=void 0===A?{}:A,d=Iq(t,["data","encode","scale","style","layout"]),h=Nq(o,s),n.a(2,Xm({},Lq(),Object.assign(Object.assign({data:{value:h,transform:[Object.assign({type:"wordCloud",size:[r,i]},f)]},encode:s,scale:u,style:l},d),{axis:!1})))},n)}),new(i||(i=Promise))(function(t,e){function a(t){try{u(o.next(t))}catch(t){e(t)}}function s(t){try{u(o.throw(t))}catch(t){e(t)}}function u(e){e.done?t(e.value):function(t){return t instanceof i?t:new i(function(e){e(t)})}(e.value).then(a,s)}u((o=o.apply(n,r||[])).next())});var n,r,i,o};_q.props={};var Qq={hollow:vY,hollowDiamond:gY,hollowHexagon:yY,hollowSquare:mY,hollowTriangleDown:bY,hollowTriangle:wY,hollowBowtie:xY,hollowCircle:kY,point:OY,plus:CY,diamond:MY,square:SY,triangle:FY,hexagon:TY,cross:PY,bowtie:IY,hyphen:NY,line:LY,tick:_Y,triangleDown:QY,circle:BY},Uq=function(t){return function(e,n,r,i){var o=r.x,a=r.y,s=r.size;if(!o.length||!a.length)return[e,a.map(function(){return[[]]})];var u=v(i.getSize(),2),c=u[0],l=u[1],A=RV(n,r,t),f=Array.from(e,function(t){return{i:t,x:+o[t]*c,y:+a[t]*l,r:+s[t]||4}}),d=sM(f).stop().force("collide",fM().radius(function(t){return t.r+1}).strength(1));d.force("x",hM(function(t){return t.x}).strength(.5)),d.force("y",pM(function(t){return t.y}).strength(5));for(var h=0;h<200;h++)d.tick();d.stop();var p=function(t){var e=f.find(function(e){return e.i===t});return[e.x/c,e.y/l]},g=s?Array.from(e,function(t){var e=v(p(t),2),n=e[0],r=e[1],o=+s[t],a=o/c,u=o/l,f=[n-a,r-u],d=[n+a,r+u];return[i.map(A(f,t)),i.map(A(d,t))]}):Array.from(e,function(t){return[i.map(A(p(t),t))]});return[e,g]}};Uq.props={defaultShape:"point",defaultLabelShape:"label",composite:!1,shape:Qq,channels:[].concat(O(LV({shapes:Object.keys(Qq)})),[{name:"x",required:!0},{name:"y",required:!0},{name:"series",scale:"band"},{name:"size",quantitative:"sqrt"}]),preInference:[].concat(O(jV()),[{type:Cz},{type:UY}]),postInference:[].concat(O([]),[{type:jY}],O(_V()))};var jq=function(){return["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"]};jq.props={};var Dq=function(){return["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"]};Dq.props={};var Rq=function(t){return new YG(t)};Rq.props={};var Hq=function(t){return new VK(t)};Hq.props={};var zq=function(t){return new YK(t)};function Kq(t){return pe(t)?0:Wg(t)?t.length:Object.keys(t).length}zq.props={};const Gq=function(t,e){if(!Wg(t))return-1;var n=Array.prototype.indexOf;if(n)return n.call(t,e);for(var r=-1,i=0;i<t.length;i++)if(t[i]===e){r=i;break}return r};function Vq(t){return Math.abs(t)<1e-14?t:parseFloat(t.toFixed(14))}var Wq=[1,5,2,2.5,4,3],Yq=100*Number.EPSILON;function Xq(t,e,n,r,i,o){var a=Kq(e),s=Gq(e,t),u=0,c=function(t,e){return(t%e+e)%e}(r,o);return(c<Yq||o-c<Yq)&&r<=0&&i>=0&&(u=1),1-s/(a-1)-n+u}function qq(t,e,n){var r=Kq(e);return 1-Gq(e,t)/(r-1)-n+1}function Zq(t,e,n,r,i,o){var a=(t-1)/(o-i),s=(e-1)/(Math.max(o,r)-Math.min(n,i));return 2-Math.max(a/s,s/a)}function Jq(t,e){return t>=e?2-(t-1)/(e-1):1}function $q(t,e,n,r){var i=e-t;return 1-.5*(Math.pow(e-r,2)+Math.pow(t-n,2))/Math.pow(.1*i,2)}function tZ(t,e,n){var r=e-t;if(n>r){var i=(n-r)/2;return 1-Math.pow(i,2)/Math.pow(.1*r,2)}return 1}function eZ(){return 1}var nZ=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Wq,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[.25,.2,.5,.05],a=n<0?0:Math.round(n);if(Number.isNaN(t)||Number.isNaN(e)||"number"!=typeof t||"number"!=typeof e||!a)return[];if(e-t<1e-15||1===a)return[t];for(var s={score:-2,lmin:0,lmax:0,lstep:0},u=1;u<1/0;){for(var c=0;c<i.length;c+=1){var l=i[c],A=qq(l,i,u);if(o[0]*A+o[1]+o[2]+o[3]<s.score){u=1/0;break}for(var f=2;f<1/0;){var d=Jq(f,a);if(o[0]*A+o[1]+o[2]*d+o[3]<s.score)break;for(var h=(e-t)/(f+1)/u/l,p=Math.ceil(Math.log10(h));p<1/0;){var v=u*l*Math.pow(10,p),g=tZ(t,e,v*(f-1));if(o[0]*A+o[1]*g+o[2]*d+o[3]<s.score)break;var y=Math.floor(e/v)*u-(f-1)*u,m=Math.ceil(t/v)*u;if(y<=m)for(var b=m-y,w=0;w<=b;w+=1){var x=(y+w)*(v/u),E=x+v*(f-1),B=v,k=Xq(l,i,u,x,E,B),O=$q(t,e,x,E),C=Zq(f,a,t,e,x,E),M=eZ(),S=o[0]*k+o[1]*O+o[2]*C+o[3]*M;S>s.score&&(!r||x<=t&&E>=e)&&(s.lmin=x,s.lmax=E,s.lstep=B,s.score=S)}p+=1}f+=1}}u+=1}var F=Vq(s.lmax),T=Vq(s.lmin),P=Vq(s.lstep),I=Math.floor(function(t){return Math.round(1e12*t)/1e12}((F-T)/P))+1,N=new Array(I);N[0]=Vq(T);for(var L=1;L<I;L+=1)N[L]=Vq(N[L-1]+P);return N},rZ=function(t){function e(){return x(this,e),F(this,e,arguments)}return P(e,t),B(e,[{key:"getDefaultOptions",value:function(){return{domain:[0,1],range:[0,1],tickCount:5,unknown:void 0,tickMethod:nZ}}},{key:"map",value:function(t){return HG(t)?t:this.options.unknown}},{key:"invert",value:function(t){return this.map(t)}},{key:"clone",value:function(){return new e(this.options)}},{key:"getTicks",value:function(){var t=this.options,e=t.domain,n=t.tickCount,r=t.tickMethod,i=v(e,2),o=i[0],a=i[1];return de(o)&&de(a)?r(o,a,n):[]}}])}(RK),iZ=function(t){return new rZ(t)};iZ.props={};var oZ=function(t){function e(t){return x(this,e),F(this,e,[t])}return P(e,t),B(e,[{key:"getDefaultOptions",value:function(){return{domain:[],range:[0,1],align:.5,round:!1,padding:0,unknown:HK,paddingInner:1,paddingOuter:0}}},{key:"getPaddingInner",value:function(){return 1}},{key:"clone",value:function(){return new e(this.options)}},{key:"update",value:function(t){xn(e,"update",this,3)([t])}},{key:"getPaddingOuter",value:function(){return this.options.padding}}])}(YK),aZ=function(t){return new oZ(t)};aZ.props={};var sZ=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,uZ=/\[([^]*?)\]/gm;function cZ(t,e){for(var n=[],r=0,i=t.length;r<i;r++)n.push(t[r].substr(0,e));return n}var lZ=function(t){return function(e,n){var r=n[t].map(function(t){return t.toLowerCase()}),i=r.indexOf(e.toLowerCase());return i>-1?i:null}};function AZ(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];for(var a in o)t[a]=o[a]}return t}var fZ=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dZ=["January","February","March","April","May","June","July","August","September","October","November","December"],hZ=cZ(dZ,3),pZ=AZ({},{dayNamesShort:cZ(fZ,3),dayNames:fZ,monthNamesShort:hZ,monthNames:dZ,amPm:["am","pm"],DoFn:function(t){return t+["th","st","nd","rd"][t%10>3?0:(t-t%10!=10?1:0)*t%10]}}),vZ=function(t,e){for(void 0===e&&(e=2),t=String(t);t.length<e;)t="0"+t;return t},gZ={D:function(t){return String(t.getDate())},DD:function(t){return vZ(t.getDate())},Do:function(t,e){return e.DoFn(t.getDate())},d:function(t){return String(t.getDay())},dd:function(t){return vZ(t.getDay())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return String(t.getMonth()+1)},MM:function(t){return vZ(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},YY:function(t){return vZ(String(t.getFullYear()),4).substr(2)},YYYY:function(t){return vZ(t.getFullYear(),4)},h:function(t){return String(t.getHours()%12||12)},hh:function(t){return vZ(t.getHours()%12||12)},H:function(t){return String(t.getHours())},HH:function(t){return vZ(t.getHours())},m:function(t){return String(t.getMinutes())},mm:function(t){return vZ(t.getMinutes())},s:function(t){return String(t.getSeconds())},ss:function(t){return vZ(t.getSeconds())},S:function(t){return String(Math.round(t.getMilliseconds()/100))},SS:function(t){return vZ(Math.round(t.getMilliseconds()/10),2)},SSS:function(t){return vZ(t.getMilliseconds(),3)},a:function(t,e){return t.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(t,e){return t.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+vZ(100*Math.floor(Math.abs(e)/60)+Math.abs(e)%60,4)},Z:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+vZ(Math.floor(Math.abs(e)/60),2)+":"+vZ(Math.abs(e)%60,2)}},yZ=(lZ("monthNamesShort"),lZ("monthNames"),{default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"}),mZ=1e3,bZ=6e4,wZ=36e5,xZ=864e5,EZ=6048e5,BZ=2592e6,kZ=31536e6;function OZ(t,e,n,r){var i=function(t,i){i&&function(t,e){for(var i=function(t){return r(t)%e===0},o=e;o&&!i(t);)n(t,-1),o-=1}(t,i),e(t)},o=function(t,e){var r=new Date(+t-1);return i(r,e),n(r,e),i(r),r};return{ceil:o,floor:function(t,e){var n=new Date(+t);return i(n,e),n},range:function(t,e,r,a){for(var s=[],u=Math.floor(r),c=a?o(t,r):o(t);c<e;n(c,u),i(c))s.push(new Date(+c));return s},duration:t}}var CZ=OZ(1,function(t){return t},function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.setTime(+t+e)},function(t){return t.getTime()}),MZ=OZ(mZ,function(t){t.setMilliseconds(0)},function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.setTime(+t+mZ*e)},function(t){return t.getSeconds()}),SZ=OZ(bZ,function(t){t.setSeconds(0,0)},function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.setTime(+t+bZ*e)},function(t){return t.getMinutes()}),FZ=OZ(wZ,function(t){t.setMinutes(0,0,0)},function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.setTime(+t+wZ*e)},function(t){return t.getHours()}),TZ=OZ(xZ,function(t){t.setHours(0,0,0,0)},function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.setTime(+t+xZ*e)},function(t){return t.getDate()-1}),PZ=OZ(BZ,function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t.getMonth();t.setMonth(n+e)},function(t){return t.getMonth()}),IZ=OZ(EZ,function(t){t.setDate(t.getDate()-t.getDay()%7),t.setHours(0,0,0,0)},function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.setDate(t.getDate()+7*e)},function(t){var e=PZ.floor(t),n=new Date(+t);return Math.floor((+n-+e)/EZ)}),NZ=OZ(kZ,function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t.getFullYear();t.setFullYear(n+e)},function(t){return t.getFullYear()}),LZ={millisecond:CZ,second:MZ,minute:SZ,hour:FZ,day:TZ,week:IZ,month:PZ,year:NZ},_Z=OZ(1,function(t){return t},function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.setTime(+t+e)},function(t){return t.getTime()}),QZ=OZ(mZ,function(t){t.setUTCMilliseconds(0)},function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.setTime(+t+mZ*e)},function(t){return t.getUTCSeconds()}),UZ=OZ(bZ,function(t){t.setUTCSeconds(0,0)},function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.setTime(+t+bZ*e)},function(t){return t.getUTCMinutes()}),jZ=OZ(wZ,function(t){t.setUTCMinutes(0,0,0)},function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.setTime(+t+wZ*e)},function(t){return t.getUTCHours()}),DZ=OZ(xZ,function(t){t.setUTCHours(0,0,0,0)},function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.setTime(+t+xZ*e)},function(t){return t.getUTCDate()-1}),RZ=OZ(BZ,function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t.getUTCMonth();t.setUTCMonth(n+e)},function(t){return t.getUTCMonth()}),HZ=OZ(EZ,function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7)%7),t.setUTCHours(0,0,0,0)},function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.setTime(+t+EZ*e)},function(t){var e=RZ.floor(t),n=new Date(+t);return Math.floor((+n-+e)/EZ)}),zZ=OZ(kZ,function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t.getUTCFullYear();t.setUTCFullYear(n+e)},function(t){return t.getUTCFullYear()}),KZ={millisecond:_Z,second:QZ,minute:UZ,hour:jZ,day:DZ,week:HZ,month:RZ,year:zZ};function GZ(t,e,n,r,i){var o,a=+t,s=+e,u=function(t){var e=t?KZ:LZ,n=e.year,r=e.month,i=e.day,o=e.hour,a=e.minute,s=e.second;return{tickIntervals:[[s,1],[s,5],[s,15],[s,30],[a,1],[a,5],[a,15],[a,30],[o,1],[o,3],[o,6],[o,12],[i,1],[i,2],[e.week,1],[r,1],[r,3],[n,1]],year:n,millisecond:e.millisecond}}(i),c=u.tickIntervals,l=u.year,A=u.millisecond,f=function(t){var e=v(t,2),n=e[0],r=e[1];return n.duration*r},d=r?(s-a)/r:n||5,h=r||(s-a)/d,p=c.length,g=_G(c,h,0,p,f);if(g===p)o=[l,$K(a/l.duration,s/l.duration,d)];else if(g){var y=v(h/f(c[g-1])<f(c[g])/h?c[g-1]:c[g],2),m=y[0],b=y[1];o=[m,r?Math.ceil(r/m.duration):b]}else o=[A,Math.max($K(a,s,d),1)];return o}var VZ=function(t,e,n,r,i){var o=t>e,a=o?e:t,s=o?t:e,u=v(GZ(a,s,n,r,i),2),c=u[0],l=u[1],A=c.range(a,new Date(+s+1),l,!0);return o?A.reverse():A},WZ=function(t,e,n,r,i){var o=t>e,a=o?e:t,s=o?t:e,u=v(GZ(a,s,n,r,i),2),c=u[0],l=u[1],A=[c.floor(a,l),c.ceil(s,l)];return o?A.reverse():A};function YZ(t){var e=t.getTimezoneOffset(),n=new Date(t);return n.setMinutes(n.getMinutes()+e,n.getSeconds(),n.getMilliseconds()),n}var XZ=function(t){function e(){return x(this,e),F(this,e,arguments)}return P(e,t),B(e,[{key:"getDefaultOptions",value:function(){return{domain:[new Date(2e3,0,1),new Date(2e3,0,2)],range:[0,1],nice:!1,tickCount:5,tickInterval:void 0,unknown:void 0,clamp:!1,tickMethod:VZ,interpolate:jG,mask:void 0,utc:!1}}},{key:"chooseTransforms",value:function(){return[function(t){return+t},function(t){return new Date(t)}]}},{key:"chooseNice",value:function(){return WZ}},{key:"getTickMethodOptions",value:function(){var t=this.options,e=t.domain,n=t.tickCount,r=t.tickInterval,i=t.utc;return[e[0],e[e.length-1],n,r,i]}},{key:"getFormatter",value:function(){var t=this.options,e=t.mask,n=t.utc,r=n?KZ:LZ,i=n?YZ:fN;return function(t){return function(t,e,n){if(void 0===e&&(e=yZ.default),void 0===n&&(n={}),"number"==typeof t&&(t=new Date(t)),"[object Date]"!==Object.prototype.toString.call(t)||isNaN(t.getTime()))throw new Error("Invalid Date pass to format");var r=[];e=(e=yZ[e]||e).replace(uZ,function(t,e){return r.push(e),"@@@"});var i=AZ(AZ({},pZ),n);return(e=e.replace(sZ,function(e){return gZ[e](t,i)})).replace(/@@@/g,function(){return r.shift()})}(i(t),e||function(t,e){var n=e.minute,r=e.hour,i=e.day,o=e.week,a=e.month,s=e.year;return e.second.floor(t)<t?".SSS":n.floor(t)<t?":ss":r.floor(t)<t?"hh:mm":i.floor(t)<t?"hh A":a.floor(t)<t?o.floor(t)<t?"MMM DD":"ddd DD":s.floor(t)<t?"MMMM":"YYYY"}(t,r))}}},{key:"clone",value:function(){return new e(this.options)}}])}(WG),qZ=function(t){return new XZ(t)};qZ.props={};var ZZ=function(t){return function(e){return-t(-e)}},JZ=function(t,e){var n=Math.log(t),r=t===Math.E?Math.log:10===t?Math.log10:2===t?Math.log2:function(t){return Math.log(t)/n};return e?ZZ(r):r},$Z=function(t,e){var n=t===Math.E?Math.exp:function(e){return Math.pow(t,e)};return e?ZZ(n):n},tJ=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,i=t<0,o=$Z(r,i),a=JZ(r,i),s=e<t,u=s?e:t,c=s?t:e,l=a(u),A=a(c),f=[];if(!(r%1)&&A-l<n){if(l=Math.floor(l),A=Math.ceil(A),i)for(;l<=A;l+=1)for(var d=o(l),h=r-1;h>=1;h-=1){var p=d*h;if(p>c)break;p>=u&&f.push(p)}else for(;l<=A;l+=1)for(var v=o(l),g=1;g<r;g+=1){var y=v*g;if(y>c)break;y>=u&&f.push(y)}2*f.length<n&&(f=tG(u,c,n))}else{var m=-1===n?A-l:Math.min(A-l,n);f=tG(l,A,m).map(o)}return s?f.reverse():f},eJ=function(t,e,n,r){var i=t<0,o=JZ(r,i),a=$Z(r,i),s=t>e,u=s?e:t,c=s?t:e,l=[a(Math.floor(o(u))),a(Math.ceil(o(c)))];return s?l.reverse():l},nJ=function(t){function e(){return x(this,e),F(this,e,arguments)}return P(e,t),B(e,[{key:"getDefaultOptions",value:function(){return{domain:[1,10],range:[0,1],base:10,interpolate:DG,tickMethod:tJ,tickCount:5}}},{key:"chooseNice",value:function(){return eJ}},{key:"getTickMethodOptions",value:function(){var t=this.options,e=t.domain,n=t.tickCount,r=t.base;return[e[0],e[e.length-1],n,r]}},{key:"chooseTransforms",value:function(){var t=this.options,e=t.base,n=t.domain[0]<0;return[JZ(e,n),$Z(e,n)]}},{key:"clone",value:function(){return new e(this.options)}}])}(WG),rJ=function(t){return new nJ(t)};rJ.props={};var iJ=function(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)},oJ=function(t){function e(t){return x(this,e),F(this,e,[t])}return P(e,t),B(e,[{key:"getDefaultOptions",value:function(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,exponent:2,interpolate:DG,tickMethod:tG,tickCount:5}}},{key:"chooseTransforms",value:function(){var t=this.options.exponent;if(1===t)return[fN,fN];var e=.5===t?iJ:function(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}(t),n=function(t){return function(e){return e<0?-Math.pow(-e,1/t):Math.pow(e,1/t)}}(t);return[e,n]}},{key:"clone",value:function(){return new e(this.options)}}])}(WG),aJ=function(t){return new oJ(t)};aJ.props={};var sJ=function(t){function e(t){return x(this,e),F(this,e,[t])}return P(e,t),B(e,[{key:"getDefaultOptions",value:function(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:DG,tickMethod:tG,tickCount:5,exponent:.5}}},{key:"update",value:function(t){xn(e,"update",this,3)([t])}},{key:"clone",value:function(){return new e(this.options)}}])}(oJ),uJ=function(t){return new sJ(t)};uJ.props={};var cJ=function(t){function e(t){return x(this,e),F(this,e,[t])}return P(e,t),B(e,[{key:"getDefaultOptions",value:function(){return{domain:[.5],range:[0,1]}}},{key:"map",value:function(t){if(!HG(t))return this.options.unknown;var e=_G(this.thresholds,t,0,this.n);return this.options.range[e]}},{key:"invert",value:function(t){var e=this.options.range.indexOf(t),n=this.thresholds;return[n[e-1],n[e]]}},{key:"clone",value:function(){return new e(this.options)}},{key:"rescale",value:function(){var t=this.options,e=t.domain,n=t.range;this.n=Math.min(e.length,n.length-1),this.thresholds=e}}])}(RK),lJ=function(t){return new cJ(t)};function AJ(t,e){var n=t.length;if(n){if(n<2)return t[n-1];var r=(n-1)*e,i=Math.floor(r),o=t[i];return o+(t[i+1]-o)*(r-i)}}lJ.props={};var fJ=function(t){function e(t){return x(this,e),F(this,e,[t])}return P(e,t),B(e,[{key:"getDefaultOptions",value:function(){return{domain:[],range:[],tickCount:5,unknown:void 0,tickMethod:nZ}}},{key:"rescale",value:function(){var t=this.options,e=t.domain,n=t.range;this.n=n.length-1,this.thresholds=function(t,e){var n=t;arguments.length>2&&void 0!==arguments[2]&&arguments[2]||n.sort(function(t,e){return t-e});for(var r=[],i=1;i<e;i+=1)r.push(AJ(n,i/e));return r}(e,this.n+1,!1)}},{key:"invert",value:function(t){var n=v(xn(e,"invert",this,3)([t]),2),r=n[0],i=n[1],o=this.options.domain,a=o[0],s=o[o.length-1];return void 0===r&&void 0===i?[r,i]:[r||a,i||s]}},{key:"getThresholds",value:function(){return this.thresholds}},{key:"clone",value:function(){return new e(this.options)}},{key:"getTicks",value:function(){var t=this.options,e=t.tickCount,n=t.domain,r=t.tickMethod,i=n.length-1;return r(n[0],n[i],e)}}])}(cJ),dJ=function(t){return new fJ(t)};dJ.props={};var hJ=function(t){function e(t){return x(this,e),F(this,e,[t])}return P(e,t),B(e,[{key:"getDefaultOptions",value:function(){return{domain:[0,1],range:[.5],nice:!1,tickCount:5,tickMethod:nZ}}},{key:"nice",value:function(){if(this.options.nice){var t=v(this.getTickMethodOptions(),3),e=t[0],n=t[1],r=t[2];this.options.domain=zG(e,n,r)}}},{key:"getTicks",value:function(){var t=this.options.tickMethod,e=v(this.getTickMethodOptions(),3);return t(e[0],e[1],e[2])}},{key:"getTickMethodOptions",value:function(){var t=this.options,e=t.domain,n=t.tickCount;return[e[0],e[e.length-1],n]}},{key:"rescale",value:function(){this.nice();var t=this.options,e=t.range,n=v(t.domain,2),r=n[0],i=n[1];this.n=e.length-1,this.thresholds=new Array(this.n);for(var o=0;o<this.n;o+=1)this.thresholds[o]=((o+1)*i-(o-this.n)*r)/(this.n+1)}},{key:"invert",value:function(t){var n=v(xn(e,"invert",this,3)([t]),2),r=n[0],i=n[1],o=v(this.options.domain,2),a=o[0],s=o[1];return void 0===r&&void 0===i?[r,i]:[r||a,i||s]}},{key:"getThresholds",value:function(){return this.thresholds}},{key:"clone",value:function(){return new e(this.options)}}])}(cJ),pJ=function(t){return new hJ(t)};pJ.props={};var vJ,gJ=vJ=function(t){function e(t){return x(this,e),F(this,e,[t])}return P(e,t),B(e,[{key:"getDefaultOptions",value:function(){return{domain:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:fN,tickMethod:tG,tickCount:5}}},{key:"clone",value:function(){return new vJ(this.options)}}])}(YG);gJ=vJ=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}([function(t){t.prototype.rescale=function(){this.initRange(),this.nice();var t=v(this.chooseTransforms(),1)[0];this.composeOutput(t,this.chooseClamp(t))},t.prototype.initRange=function(){var t=this.options.interpolator;this.options.range=function(t){return[t(0),t(1)]}(t)},t.prototype.composeOutput=function(t,e){var n=this.getOptions(),r=n.domain,i=n.interpolator,o=n.round,a=function(t){var e=v(t,2),n=e[0],r=e[1];return LG(jG(0,1),NG(n,r))}(r.map(t)),s=o?function(t){return function(e){var n=t(e);return de(n)?Math.round(n):n}}(i):i;this.output=LG(s,a,e,t)},t.prototype.invert=void 0}],gJ);var yJ=function(t){return new gJ(t)};yJ.props={};var mJ=function(t){return new eG(t)};mJ.props={};var bJ="g2-";function wJ(t){return".".concat(bJ).concat(t)}var xJ=[["legendCategory",[[["color","discrete"],["opacity","discrete"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","constant"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","constant"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","discrete"]],[["color","discrete"],["opacity","discrete"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","discrete"]],[["color","discrete"],["opacity","constant"],["size","constant"]],[["color","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","constant"]],[["color","discrete"],["opacity","constant"],["shape","constant"]],[["color","constant"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","discrete"]],[["color","constant"],["opacity","discrete"],["size","constant"]],[["color","constant"],["opacity","constant"],["shape","discrete"]],[["color","constant"],["opacity","discrete"],["shape","constant"]],[["color","discrete"],["shape","discrete"]],[["color","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"]],[["color","discrete"],["opacity","constant"]],[["color","discrete"],["shape","constant"]],[["color","constant"],["shape","discrete"]],[["color","constant"],["size","constant"]],[["color","constant"],["opacity","discrete"]],[["color","discrete"]]]],["legendContinuousSize",[[["color","continuous"],["opacity","continuous"],["size","continuous"]],[["color","constant"],["opacity","continuous"],["size","continuous"]],[["color","continuous"],["size","continuous"]],[["color","constant"],["size","continuous"]],[["size","continuous"],["opacity","continuous"]],[["size","continuous"]]]],["legendContinuousBlockSize",[[["color","distribution"],["opacity","distribution"],["size","distribution"]],[["color","distribution"],["size","distribution"]]]],["legendContinuousBlock",[[["color","distribution"],["opacity","continuous"]],[["color","distribution"]]]],["legendContinuous",[[["color","continuous"],["opacity","continuous"]],[["color","continuous"]],[["opacity","continuous"]]]]],EJ=["lineX","lineY","rangeX","rangeY","range","connector"];function BJ(t){var e=t.colorDefault,n=t.colorBlack,r=t.colorWhite,i=t.colorStroke,o=t.colorBackground,a=t.padding1,s=t.padding2,u=(t.padding3,t.alpha90),c=t.alpha65,l=t.alpha45,A=(t.alpha25,t.alpha10),f=t.category10,d=t.category20,h=t.sizeDefault,p=void 0===h?1:h,v=t.padding,g=void 0===v?"auto":v,y=t.margin;return{padding:g,margin:void 0===y?16:y,size:p,color:e,category10:f,category20:d,enter:{duration:300,fill:"both",delay:0},update:{duration:300,fill:"both",delay:0},exit:{duration:300,fill:"both",delay:0},view:{viewFill:o,plotFill:"transparent",mainFill:"transparent",contentFill:"transparent"},line:{line:{fill:"",strokeOpacity:1,lineWidth:1,lineCap:"round"}},point:{point:{r:3,fillOpacity:.95,lineWidth:0},hollow:{r:3,strokeOpacity:.95,lineWidth:1},plus:{r:3,strokeOpacity:.95,lineWidth:3},diamond:{r:3,strokeOpacity:.95,lineWidth:1}},interval:{rect:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},area:{area:{fillOpacity:.85,lineWidth:0}},polygon:{polygon:{fillOpacity:.95}},cell:{cell:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},rect:{rect:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},link:{link:{fill:"",strokeOpacity:1}},vector:{vector:{fillOpacity:1}},box:{box:{fillOpacity:.95,stroke:n,lineWidth:1}},text:{text:{fill:"#1D2129",fontSize:12,lineWidth:0,connectorStroke:i,connectorStrokeOpacity:.45,connectorLineWidth:1,backgroundFill:i,backgroundFillOpacity:.15,backgroundPadding:[2,4],startMarkerSymbol:"circle",startMarkerSize:4,endMarkerSymbol:"circle",endMarkerSize:4},badge:{fill:"#1D2129",fillOpacity:.65,lineWidth:0,fontSize:10,textAlign:"center",textBaseline:"middle",markerFill:i,markerFillOpacity:.25,markerStrokeOpacity:0}},lineX:{line:{stroke:i,strokeOpacity:.45,lineWidth:1}},lineY:{line:{stroke:i,strokeOpacity:.45,lineWidth:1}},rangeX:{range:{fill:i,fillOpacity:.15,lineWidth:0}},rangeY:{range:{fill:i,fillOpacity:.15,lineWidth:0}},connector:{connector:{stroke:i,strokeOpacity:.45,lineWidth:1,connectLength1:12,endMarker:!0,endMarkerSize:6,endMarkerFill:i,endMarkerFillOpacity:.95}},axis:{arrow:!1,gridLineDash:[3,4],gridLineWidth:.5,gridStroke:n,gridStrokeOpacity:A,labelAlign:"horizontal",labelFill:n,labelOpacity:l,labelFontSize:12,labelFontWeight:"normal",labelSpacing:a,line:!1,lineLineWidth:.5,lineStroke:n,lineStrokeOpacity:l,tickLength:4,tickLineWidth:1,tickStroke:n,tickOpacity:l,titleFill:n,titleOpacity:u,titleFontSize:12,titleFontWeight:"normal",titleSpacing:12,titleTransformOrigin:"center",lineArrowOffset:6,lineArrowSize:6},axisTop:{gridDirection:"positive",labelDirection:"negative",tickDirection:"negative",titlePosition:"top",titleSpacing:12,labelSpacing:4,titleTextBaseline:"middle"},axisBottom:{gridDirection:"negative",labelDirection:"positive",tickDirection:"positive",titlePosition:"bottom",titleSpacing:12,labelSpacing:4,titleTextBaseline:"bottom",titleTransform:"translate(0, 8)"},axisLeft:{gridDirection:"positive",labelDirection:"negative",labelSpacing:4,tickDirection:"negative",titlePosition:"left",titleSpacing:12,titleTextBaseline:"middle",titleDirection:"vertical",titleTransform:"rotate(-90) translate(0, -8)",titleTransformOrigin:"center"},axisRight:{gridDirection:"negative",labelDirection:"positive",labelSpacing:4,tickDirection:"positive",titlePosition:"right",titleSpacing:12,titleTextBaseline:"top",titleDirection:"vertical",titleTransformOrigin:"center"},axisLinear:{girdClosed:!0,gridConnect:"arc",gridDirection:"negative",gridType:"surround",titlePosition:"top",titleSpacing:0},axisArc:{title:!1,titlePosition:"inner",line:!1,tick:!0,labelSpacing:4},axisRadar:{girdClosed:!0,gridStrokeOpacity:.3,gridType:"surround",tick:!1,titlePosition:"start"},legendCategory:{backgroundFill:"transparent",itemBackgroundFill:"transparent",itemLabelFill:n,itemLabelFillOpacity:u,itemLabelFontSize:12,itemLabelFontWeight:"normal",itemMarkerFillOpacity:1,itemMarkerSize:8,focusMarkerSize:12,itemSpacing:[a,a,a/2],itemValueFill:n,itemValueFillOpacity:.65,itemValueFontSize:12,itemValueFontWeight:"normal",navButtonFill:n,navButtonFillOpacity:.65,navPageNumFill:n,navPageNumFillOpacity:.45,navPageNumFontSize:12,padding:8,title:!1,titleFill:n,titleFillOpacity:.65,titleFontSize:12,titleFontWeight:"normal",titleSpacing:4,tickStroke:n,tickStrokeOpacity:.25,rowPadding:a,colPadding:s,maxRows:3,maxCols:3},legendContinuous:{handleHeight:12,handleLabelFill:n,handleLabelFillOpacity:l,handleLabelFontSize:12,handleLabelFontWeight:"normal",handleMarkerFill:n,handleMarkerFillOpacity:.6,handleMarkerLineWidth:1,handleMarkerStroke:n,handleMarkerStrokeOpacity:.25,handleWidth:10,labelFill:n,labelFillOpacity:l,labelFontSize:12,labelFontWeight:"normal",labelSpacing:3,tick:!0,tickLength:12,ribbonSize:12,ribbonFill:"#aaa",handle:!0,handleLabel:!1,handleShape:"slider",handleIconSize:12/1.8,indicator:!1,titleFontSize:12,titleSpacing:4,titleFontWeight:"normal",titleFillOpacity:u,tickStroke:n,tickStrokeOpacity:l},label:{fill:n,fillOpacity:.65,fontSize:12,fontWeight:"normal",stroke:void 0,offset:12,connectorStroke:n,connectorStrokeOpacity:.45,connectorLineWidth:1,connectorLength:12,connectorLength2:8,connectorDistance:4},innerLabel:{fill:r,fontSize:12,fillOpacity:.85,fontWeight:"normal",stroke:void 0,offset:0},htmlLabel:{fontSize:12,opacity:.65,color:n,fontWeight:"normal"},slider:{trackSize:16,trackFill:i,trackFillOpacity:1,selectionFill:e,selectionFillOpacity:.15,handleIconSize:10,handleIconFill:"#f7f7f7",handleIconFillOpacity:1,handleIconStroke:n,handleIconStrokeOpacity:.25,handleIconLineWidth:1,handleIconRadius:2,handleLabelFill:n,handleLabelFillOpacity:.45,handleLabelFontSize:12,handleLabelFontWeight:"normal"},scrollbar:{padding:[0,0,0,0],trackSize:6,isRound:!0,slidable:!0,scrollable:!0,trackFill:"#e5e5e5",trackFillOpacity:0,thumbFill:"#000",thumbFillOpacity:.15,thumbHighlightedFillOpacity:.2},title:{spacing:8,titleFill:n,titleFillOpacity:u,titleFontSize:16,titleFontWeight:"bold",titleTextBaseline:"top",subtitleFill:n,subtitleFillOpacity:c,subtitleFontSize:12,subtitleFontWeight:"normal",subtitleTextBaseline:"top"},tooltip:{css:m({},wJ("tooltip"),{"font-family":"sans-serif"})}}}var kJ=BJ({colorBlack:"#1D2129",colorWhite:"#ffffff",colorStroke:"#416180",colorDefault:"#1783FF",colorBackground:"transparent",category10:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F"],category20:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F","#AABA01","#BC7CFC","#237CBC","#2DE379","#CE8032","#FF7AF4","#545FD3","#AFE410","#D8C608","#FFA1E0"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.1}),OJ=function(t){return Xm({},kJ,t)};OJ.props={};var CJ=function(t){return Xm({},OJ(),{category10:"category10",category20:"category20"},t)};CJ.props={};var MJ=BJ({colorBlack:"#fff",colorWhite:"#000",colorStroke:"#416180",colorDefault:"#1783FF",colorBackground:"transparent",category10:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F"],category20:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F","#AABA01","#BC7CFC","#237CBC","#2DE379","#CE8032","#FF7AF4","#545FD3","#AFE410","#D8C608","#FFA1E0"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.25}),SJ=function(t){return Xm({},MJ,{tooltip:{crosshairsStroke:"#fff",crosshairsLineWidth:1,crosshairsStrokeOpacity:.25,css:m(m(m(m({},wJ("tooltip"),{background:"#1f1f1f",opacity:.95}),wJ("tooltip-title"),{color:"#A6A6A6"}),wJ("tooltip-list-item-name-label"),{color:"#A6A6A6"}),wJ("tooltip-list-item-value"),{color:"#A6A6A6"})}},t)},FJ=function(t){return Object.assign({},SJ(),{category10:"category10",category20:"category20"},t)};FJ.props={};var TJ=BJ({colorBlack:"#000",colorWhite:"#fff",colorStroke:"#888",colorDefault:"#4e79a7",colorBackground:"transparent",category10:["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab"],category20:["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.1}),PJ=function(t){return Xm({},TJ,{text:{text:{fontSize:10}},axis:{gridLineDash:[0,0],gridLineWidth:1,gridStroke:"#ddd",gridStrokeOpacity:1,labelOpacity:1,labelStrokeOpacity:1,labelFontSize:10,line:!0,lineLineWidth:1,lineStroke:"#888",lineStrokeOpacity:1,tickLength:5,tickStrokeOpacity:1,titleOpacity:1,titleStrokeOpacity:1,titleFillOpacity:1,titleFontSize:11,titleFontWeight:"bold"},axisLeft:{gridFilter:function(t,e){return 0!==e}},axisRight:{gridFilter:function(t,e){return 0!==e}},legendCategory:{itemLabelFillOpacity:1,itemLabelFontSize:10,itemValueFillOpacity:1,itemValueFontSize:10,titleFillOpacity:1,titleFontSize:11,titleFontWeight:"bold"},legendContinuous:{handleLabelFontSize:10,labelFillOpacity:.45,labelFontSize:10},label:{fontSize:10},innerLabel:{fontSize:10},htmlLabel:{fontSize:10},slider:{handleLabelFontSize:10,trackFillOpacity:.05}},t)};function IJ(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}PJ.props={};var NJ,LJ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function _J(t){if(!(e=LJ.exec(t)))throw new Error("invalid format: "+t);var e;return new QJ({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function QJ(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function UJ(t,e){var n=IJ(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}_J.prototype=QJ.prototype,QJ.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const jJ={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return UJ(100*t,e)},r:UJ,s:function(t,e){var n=IJ(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(NJ=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+IJ(t,Math.max(0,e+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function DJ(t){return t}var RJ,HJ,zJ=Array.prototype.map,KJ=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function GJ(t){for(var e=1/0,n=1/0,r=-1/0,i=-1/0,o=0;o<t.length;o++){var a=t[o],s=a.x,u=a.y,c=Be([s+a.width,u+a.height],2),l=c[0],A=c[1];s<e&&(e=s),u<n&&(n=u),l>r&&(r=l),A>i&&(i=A)}return new dT(e,n,r-e,i-n)}RJ=function(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?DJ:(e=zJ.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,o=[],a=0,s=e[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(t.substring(i-=s,i+s)),!((u+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?DJ:function(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}}(zJ.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";function A(t){var e=(t=_J(t)).fill,n=t.align,A=t.sign,f=t.symbol,d=t.zero,h=t.width,p=t.comma,v=t.precision,g=t.trim,y=t.type;"n"===y?(p=!0,y="g"):jJ[y]||(void 0===v&&(v=12),g=!0,y="g"),(d||"0"===e&&"="===n)&&(d=!0,e="0",n="=");var m="$"===f?i:"#"===f&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",b="$"===f?o:/[%p]/.test(y)?u:"",w=jJ[y],x=/[defgprs%]/.test(y);function E(t){var i,o,u,f=m,E=b;if("c"===y)E=w(t)+E,t="";else{var B=(t=+t)<0||1/t<0;if(t=isNaN(t)?l:w(Math.abs(t),v),g&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),B&&0===+t&&"+"!==A&&(B=!1),f=(B?"("===A?A:c:"-"===A||"("===A?"":A)+f,E=("s"===y?KJ[8+NJ/3]:"")+E+(B&&"("===A?")":""),x)for(i=-1,o=t.length;++i<o;)if(48>(u=t.charCodeAt(i))||u>57){E=(46===u?a+t.slice(i+1):t.slice(i))+E,t=t.slice(0,i);break}}p&&!d&&(t=r(t,1/0));var k=f.length+t.length+E.length,O=k<h?new Array(h-k+1).join(e):"";switch(p&&d&&(t=r(O+t,O.length?h-E.length:1/0),O=""),n){case"<":t=f+t+E+O;break;case"=":t=f+O+t+E;break;case"^":t=O.slice(0,k=O.length>>1)+f+t+E+O.slice(k);break;default:t=O+f+t+E}return s(t)}return v=void 0===v?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),E.toString=function(){return t+""},E}return{format:A,formatPrefix:function(t,e){var n,r=A(((t=_J(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor((n=e,((n=IJ(Math.abs(n)))?n[1]:NaN)/3)))),o=Math.pow(10,-i),a=KJ[8+i/3];return function(t){return r(o*t)+a}}}}({thousands:",",grouping:[3],currency:["$",""]}),HJ=RJ.format,RJ.formatPrefix;var VJ=function(t,e,n){var r=t.width,i=t.height,o=n.flexDirection,a=void 0===o?"row":o,s=(n.flexWrap,n.justifyContent),u=void 0===s?"flex-start":s,c=(n.alignContent,n.alignItems),l=void 0===c?"flex-start":c,A="row"===a,f="row"===a||"column"===a,d=A?f?[1,0]:[-1,0]:f?[0,1]:[0,-1],h=Be([0,0],2),p=h[0],v=h[1],g=e.map(function(t){var e,n=t.width,r=t.height,i=Be([p,v],2),o=i[0],a=i[1];return e=Be([p+n*d[0],v+r*d[1]],2),p=e[0],v=e[1],new dT(o,a,n,r)}),y=GJ(g),m={"flex-start":0,"flex-end":A?r-y.width:i-y.height,center:A?(r-y.width)/2:(i-y.height)/2},b=g.map(function(t){var e=t.x,n=t.y,r=dT.fromRect(t);return r.x=A?e+m[u]:e,r.y=A?n:n+m[u],r}),w=(GJ(b),function(t){var e=Be(A?["height",i]:["width",r],2),n=e[0],o=e[1];switch(l){case"flex-start":default:return 0;case"flex-end":return o-t[n];case"center":return o/2-t[n]/2}}),x=b.map(function(t){var e=t.x,n=t.y,r=dT.fromRect(t);return r.x=A?e:e+w(r),r.y=A?n+w(r):n,r}).map(function(e){var n,r,i=dT.fromRect(e);return i.x+=null!==(n=t.x)&&void 0!==n?n:0,i.y+=null!==(r=t.y)&&void 0!==r?r:0,i});return x},WJ=function(t,e,n){return[]},YJ=function(t){function e(e){var n=t.call(this,e)||this;n.layoutEvents=[Hs.BOUNDS_CHANGED,Hs.INSERTED,Hs.REMOVED],n.$margin=vT(0),n.$padding=vT(0);var r=e.style||{},i=r.margin,o=void 0===i?0:i,a=r.padding,s=void 0===a?0:a;return n.margin=o,n.padding=s,n.isMutationObserved=!0,n.bindEvents(),n}return me(e,t),Object.defineProperty(e.prototype,"margin",{get:function(){return this.$margin},set:function(t){this.$margin=vT(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"padding",{get:function(){return this.$padding},set:function(t){this.$padding=vT(t)},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var t=this.attributes,e=t.x,n=void 0===e?0:e,r=t.y,i=void 0===r?0:r,o=t.width,a=t.height,s=Be(this.$margin,4),u=s[0],c=s[1],l=s[2],A=s[3];return new dT(n-A,i-u,o+A+c,a+u+l)},e.prototype.appendChild=function(e,n){return e.isMutationObserved=!0,t.prototype.appendChild.call(this,e,n),e},e.prototype.getAvailableSpace=function(){var t=this.attributes,e=t.width,n=t.height,r=Be(this.$padding,4),i=r[0],o=r[1],a=r[2],s=r[3],u=Be(this.$margin,4),c=u[0],l=u[3];return new dT(s+l,i+c,e-s-o,n-i-a)},e.prototype.layout=function(){if(this.attributes.display&&this.isConnected&&!this.children.some(function(t){return!t.isConnected}))try{var t=this.attributes,e=t.x,n=t.y;this.style.transform="translate(".concat(e,", ").concat(n,")");var r=function(t,e,n){if(0===e.length)return[];var r={flex:VJ,grid:WJ},i=n.display in r?r[n.display]:null;return(null==i?void 0:i.call(null,t,e,n))||[]}(this.getAvailableSpace(),this.children.map(function(t){return t.getBBox()}),this.attributes);this.children.forEach(function(t,e){var n=r[e],i=n.x,o=n.y;t.style.transform="translate(".concat(i,", ").concat(o,")")})}catch(t){}},e.prototype.bindEvents=function(){var t=this;this.layoutEvents.forEach(function(e){t.addEventListener(e,function(e){e.target&&(e.target.isMutationObserved=!0,t.layout())})})},e.prototype.attributeChangedCallback=function(t,e,n){"margin"===t?this.margin=n:"padding"===t&&(this.padding=n),this.layout()},e}(_u);function XJ(t,e,n){return t.querySelector(e)?wG(t).select(e):wG(t).append(n)}function qJ(t){return Array.isArray(t)?t.join(", "):"".concat(t||"")}function ZJ(t,e){var n="row",r="flex-start",i="center",o={top:["row","flex-start","center"],bottom:["row","flex-start","center"],left:["column","flex-start","center"],right:["column","flex-start","center"],center:["column","center","center"]};if(t in o){var a=v(o[t],3);n=a[0],r=a[1],i=a[2]}return Object.assign({display:"flex",flexDirection:n,justifyContent:r,alignItems:i},e)}var JJ=function(t){function e(){return x(this,e),F(this,e,arguments)}return P(e,t),B(e,[{key:"child",get:function(){var t;return null===(t=this.children)||void 0===t?void 0:t[0]}},{key:"update",value:function(t){var e;this.attr(t);var n=t.subOptions;null===(e=this.child)||void 0===e||e.update(n)}}])}(YJ),$J=function(t){function e(){return x(this,e),F(this,e,arguments)}return P(e,t),B(e,[{key:"update",value:function(t){var e,n=t.subOptions;this.attr(t),null===(e=this.child)||void 0===e||e.update(n)}}])}(JJ);function t$(t,e){var n;return null===(n=t.filter(function(t){return t.getOptions().name===e}))||void 0===n?void 0:n[0]}function e$(t){return"vertical"===t||t===-Math.PI/2}function n$(t,e,n){var r=t.bbox,i=e.position,o=void 0===i?"top":i,a=e.size,s=e.length,u=["top","bottom","center"].includes(o),c=v(u?[r.height,r.width]:[r.width,r.height],2),l=c[0],A=c[1],f=n.props,d=f.defaultSize,h=f.defaultLength,p=a||d||l,g=s||h||A,y=u?"horizontal":"vertical",m=v(u?[g,p]:[p,g],2);return{orientation:y,width:m[0],height:m[1],size:p,length:g}}function r$(t){var e=["arrow","crosshairs","grid","handle","handleLabel","indicator","label","line","tick","tip","title","trunc"],n=t.style,r=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["style"]),i={};return Object.entries(r).forEach(function(t){var n=v(t,2),r=n[0],o=n[1];e.includes(r)?i["show".concat(Gg(r))]=o:i[r]=o}),Object.assign(Object.assign({},i),n)}var i$=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function o$(t,e){var n=e.eulerAngles,r=e.origin;r&&t.setOrigin(r),n&&t.rotate(n[0],n[1],n[2])}function a$(t){var e=t.getOptions();return[e.innerWidth,e.innerHeight,e.depth]}function s$(t,e,n,r,i,o,a,s){var u;void 0===n&&void 0===o||t.update(Object.assign(Object.assign({},n&&{tickCount:n}),o&&{tickMethod:o}));var c=function(t,e,n){if(t.getTicks)return t.getTicks();if(!n)return e;var r=XG(e,function(t){return+t}),i=v(r,2);return n(i[0],i[1],t.getOptions().tickCount)}(t,e,o),l=i?c.filter(i):c,A=function(t){return t instanceof Date?String(t):"object"==typeof t&&t?t:String(t)},f=r||(null===(u=t.getFormatter)||void 0===u?void 0:u.call(t))||A,d=function(t,e){if(gK(e))return function(t){return t};var n=e.getOptions(),r=n.innerWidth,i=n.innerHeight,o=n.insetTop,a=n.insetBottom,s=n.insetLeft,u=n.insetRight,c=v("left"===t||"right"===t?[o,a,i]:[s,u,r],3),l=c[0],A=c[1],f=c[2],d=new YG({domain:[0,1],range:[l/f,1-A/f]});return function(t){return d.map(t)}}(a,s),h=function(t,e){var n=e.getOptions(),r=n.width,i=n.height;return function(n){if(!wK(e))return n;var o="bottom"===t?[n,1]:[0,n],a=e.map(o);if("bottom"===t){var s=a[0];return new YG({domain:[0,r],range:[0,1]}).map(s)}if("left"===t){var u=a[1];return new YG({domain:[0,i],range:[0,1]}).map(u)}return n}}(a,s),p=function(t){return["left","right"].includes(t)};return gK(s)||vK(s)?l.map(function(e,n,r){var i,o,u=(null===(i=t.getBandWidth)||void 0===i?void 0:i.call(t,e))/2||0,c=d(t.map(e)+u);return{value:yK(s)&&"center"===a||vK(s)&&(null===(o=t.getTicks)||void 0===o?void 0:o.call(t))&&function(t){return["top","bottom","center","outer"].includes(t)}(a)||vK(s)&&p(a)?1-c:c,label:A(f(PG(e),n,r)),id:String(n)}}):l.map(function(e,n,r){var i,o=(null===(i=t.getBandWidth)||void 0===i?void 0:i.call(t,e))/2||0,s=h(d(t.map(e)+o));return{value:p(a)?1-s:s,label:A(f(PG(e),n,r)),id:String(n)}})}function u$(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;if(t.length>0)return t;var n=e.labelAutoRotate,r=e.labelAutoHide,i=e.labelAutoEllipsis,o=e.labelAutoWrap,a=[],s=function(t,e){e&&a.push(Object.assign(Object.assign({},t),e))};return s({type:"rotate",optionalAngles:[0,15,30,45,60,90]},n),s({type:"ellipsis",minLength:20},i),s({type:"hide"},r),s({type:"wrap",wordWrapWidth:100,maxLines:3,recoveryWhenFail:!0},o),a}function c$(t,e,n){return!function(t){return gK(t)&&vK(t)}(e)&&!bK(e)&&(void 0===t?!!n.getTicks:t)}var l$=function(t){return function(e){var n=e.labelFormatter,r=e.labelFilter,i=void 0===r?function(){return!0}:r;return function(r){var o,a=v(r.scales,1)[0],s=(null===(o=a.getTicks)||void 0===o?void 0:o.call(a))||a.getOptions().domain,u="string"==typeof n?HJ(n):n,c=Object.assign(Object.assign({},e),{labelFormatter:u,labelFilter:function(t,e,n){return i(s[e],e,s)},scale:a});return t(c)(r)}}},A$=l$(function(t){var e=t.direction,n=void 0===e?"left":e,r=t.important,i=void 0===r?{}:r,o=t.labelFormatter,a=(t.order,t.orientation),s=t.actualPosition,u=t.position,c=t.size,l=t.style,A=void 0===l?{}:l,f=t.title,d=t.tickCount,h=t.tickFilter,p=t.tickMethod,g=t.tickLength,y=t.transform,m=t.indexBBox,b=i$(t,["direction","important","labelFormatter","order","orientation","actualPosition","position","size","style","title","tickCount","tickFilter","tickMethod","tickLength","transform","indexBBox"]);return function(e){var r=e.scales,l=e.value,w=e.coordinate,x=e.theme,E=l.bbox,B=v(r,1)[0],k=B.getOptions(),O=k.domain,C=k.xScale,M=function(t,e,n,r,i,o){var a=function(t,e,n,r,i){var o=n.axis,a=["top","right","bottom","left"].includes(i)?n["axis".concat(lG(i))]:n.axisLinear,s=t.getOptions().name,u=n["axis".concat(Gg(s))]||{};return Object.assign({},o,a,u)}(t,0,n,0,i);return"center"===i?Object.assign(Object.assign(Object.assign(Object.assign({},a),{labelDirection:"right"===r?"negative":"positive"}),"center"===r?{labelTransform:"translate(50%,0)"}:null),{tickDirection:"right"===r?"negative":"positive",labelSpacing:"center"===r?0:4,titleSpacing:e$(o)?10:0,tick:"center"!==r&&void 0}):a}(B,0,x,n,u,a),S=Object.assign(Object.assign(Object.assign({},M),A),b),F=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"xy",r=v(a$(e),3),i=r[0],o=r[1],a=r[2];return"xy"===n?t.includes("bottom")||t.includes("top")?o:i:"xz"===n?t.includes("bottom")||t.includes("top")?a:i:t.includes("bottom")||t.includes("top")?o:a}(s||u,w,t.plane),T=function(t,e,n,r,i){var o=n.x,a=n.y,s=n.width,u=n.height;if("bottom"===t)return{startPos:[o,a],endPos:[o+s,a]};if("left"===t)return{startPos:[o+s,a+u],endPos:[o+s,a]};if("right"===t)return{startPos:[o,a+u],endPos:[o,a]};if("top"===t)return{startPos:[o,a+u],endPos:[o+s,a+u]};if("center"===t){if("vertical"===e)return{startPos:[o,a],endPos:[o,a+u]};if("horizontal"===e)return{startPos:[o,a],endPos:[o+s,a]};if("number"==typeof e){var c=v(r.getCenter(),2),l=c[0],A=c[1],f=v(EK(r),2),d=f[0],h=f[1],p=v(BK(r),2),g=p[0],y=p[1],m=Math.min(s,u)/2,b=r.getOptions(),w=d*m,x=h*m,E=l+o-b.insetLeft,B=A+a-b.insetTop,k=[Math.cos(e),Math.sin(e)],O=k[0],C=k[1],M=[E+x*O,B+x*C],S=[E+w*O,B+w*C],F=gK(r)&&i?i.getOptions().domain.length:3;return{startPos:M,endPos:S,gridClosed:Math.abs(y-g-360)<1e-6,gridCenter:[E,B],gridControlAngles:new Array(F).fill(0).map(function(t,e,n){return(y-g)/F*e})}}}return{}}(u,a,E,w,C),P=function(t){return t.getOptions().depth?{tickIsBillboard:!0,lineIsBillboard:!0,labelIsBillboard:!0,titleIsBillboard:!0,gridIsBillboard:!0}:{}}(w),I=s$(B,O,d,o,h,p,u,w),N=m?I.map(function(t,e){var n=m.get(e);return n?n[0]!==t.label?t:Object.assign(Object.assign({},t),{bbox:n[1]}):t}):I,L=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},S),{type:"linear",data:N,crossSize:c,titleText:qJ(f),labelOverlap:u$(y,S),grid:c$(S.grid,w,B),gridLength:F,line:!0,indexBBox:m,classNamePrefix:bJ}),void 0!==g?{tickLength:g}:null),S.line?null:{lineOpacity:0}),T),P),i),_=L.labelOverlap.find(function(t){return"hide"===t.type});return _&&(L.crossSize=!1),new uN({className:"axis",style:r$(L)})}}),f$=l$(function(t){t.order,t.size;var e=t.position,n=(t.orientation,t.labelFormatter),r=t.tickFilter,i=t.tickCount,o=t.tickMethod,a=t.tickLength,s=t.important,u=void 0===s?{}:s,c=(t.style,t.indexBBox),l=t.title,A=t.grid,f=void 0!==A&&A,d=i$(t,["order","size","position","orientation","labelFormatter","tickFilter","tickCount","tickMethod","tickLength","important","style","indexBBox","title","grid"]);return function(t){var s=v(t.scales,1)[0],A=t.value,h=t.coordinate,p=t.theme,g=A.bbox,y=s.getOptions(),m=s$(s,y.domain,i,n,r,o,e,h),b=c?m.map(function(t,e){var n=c.get(e);return n?n[0]!==t.label?t:Object.assign(Object.assign({},t),{bbox:n[1]}):t}):m,w=v(EK(h),2),x=w[0],E=w[1],B=function(t,e,n,r,i){var o=e.x,a=e.y,s=e.width,u=e.height,c=[o+s/2,a+u/2],l=Math.min(s,u)/2,A=v(BK(i),2),f=A[0],d=A[1],h=v(a$(i),2),p=h[0],g=h[1],y={center:c,radius:l,startAngle:f,endAngle:d,gridLength:(r-n)*(Math.min(p,g)/2)};if("inner"===t){var m=i.getOptions(),b=m.insetLeft,w=m.insetTop;return Object.assign(Object.assign({},y),{center:[c[0]-b,c[1]-w],labelAlign:"perpendicular",labelDirection:"positive",tickDirection:"positive",gridDirection:"negative"})}return Object.assign(Object.assign({},y),{labelAlign:"parallel",labelDirection:"negative",tickDirection:"negative",gridDirection:"positive"})}(e,g,x,E,h),k=p.axis,O=p.axisArc,C=r$(Xm({},k,void 0===O?{}:O,B,Object.assign(Object.assign(Object.assign({type:"arc",data:b,titleText:qJ(l),grid:f,classNamePrefix:bJ},void 0!==a?{tickLength:a}:null),d),u)));return new uN({style:oS(C,["transform"])})}});A$.props={defaultPosition:"center",defaultSize:45,defaultOrder:0,defaultCrossPadding:[12,12],defaultPadding:[12,12]},f$.props={defaultPosition:"outer",defaultOrientation:"vertical",defaultSize:45,defaultOrder:0,defaultCrossPadding:[12,12],defaultPadding:[12,12]};var d$=function(t){return function(){var e=A$(Object.assign({},{crossPadding:50},t)).apply(void 0,arguments);return o$(e,t),e}};d$.props=Object.assign(Object.assign({},A$.props),{defaultPosition:"bottom"});var h$=function(t){return function(){var e=A$(Object.assign({},{crossPadding:10},t)).apply(void 0,arguments);return o$(e,t),e}};function p$(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function v$(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");t=Array.from(t);var i,o,a=v(n,1)[0];if(a&&2!==a.length||n.length>1){var s=Uint32Array.from(t,function(t,e){return e});return n.length>1?(n=n.map(function(e){return t.map(e)}),s.sort(function(t,e){var r,i=qn(n);try{for(i.s();!(r=i.n()).done;){var o=r.value,a=y$(o[t],o[e]);if(a)return a}}catch(t){i.e(t)}finally{i.f()}})):(a=t.map(a),s.sort(function(t,e){return y$(a[t],a[e])})),i=t,o=s,Array.from(o,function(t){return i[t]})}return t.sort(g$(a))}function g$(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p$;if(t===p$)return y$;if("function"!=typeof t)throw new TypeError("compare is not a function");return function(e,n){var r=t(e,n);return r||0===r?r:(0===t(n,n))-(0===t(e,e))}}function y$(t,e){return(null==t||!(t>=t))-(null==e||!(e>=e))||(t<e?-1:t>e?1:0)}function m$(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function b$(t){var e,n,r;function i(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length;if(i<o){if(0!==e(r,r))return o;do{var a=i+o>>>1;n(t[a],r)<0?i=a+1:o=a}while(i<o)}return i}return 2!==t.length?(e=p$,n=function(e,n){return p$(t(e),n)},r=function(e,n){return t(e)-n}):(e=t===p$||t===m$?t:w$,n=t,r=t),{left:i,center:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=i(t,e,n,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length)-1);return o>n&&r(t[o-1],e)>-r(t[o],e)?o-1:o},right:function(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length;if(i<o){if(0!==e(r,r))return o;do{var a=i+o>>>1;n(t[a],r)<=0?i=a+1:o=a}while(i<o)}return i}}}function w$(){return 0}h$.props=Object.assign(Object.assign({},A$.props),{defaultPosition:"left"});var x$="main-layer",E$="label-layer",B$="element",k$="view",O$="plot",C$="component",M$="label",S$="area",F$="mask",T$="axis-breaks",P$="axis-breaks-group",I$=(0,Dn.A)().m(L$);function N$(t){return null===t?NaN:+t}function L$(t,e){var n,r,i,o,a,s,u,c,l;return(0,Dn.A)().w(function(A){for(;;)switch(A.p=A.n){case 0:if(void 0!==e){A.n=8;break}n=qn(t),A.p=1,n.s();case 2:if((r=n.n()).done){A.n=4;break}if(!(null!=(i=r.value)&&(i=+i)>=i)){A.n=3;break}return A.n=3,i;case 3:A.n=2;break;case 4:A.n=6;break;case 5:A.p=5,c=A.v,n.e(c);case 6:return A.p=6,n.f(),A.f(6);case 7:A.n=15;break;case 8:o=-1,a=qn(t),A.p=9,a.s();case 10:if((s=a.n()).done){A.n=12;break}if(u=s.value,!(null!=(u=e(u,++o,t))&&(u=+u)>=u)){A.n=11;break}return A.n=11,u;case 11:A.n=10;break;case 12:A.n=14;break;case 13:A.p=13,l=A.v,a.e(l);case 14:return A.p=14,a.f(),A.f(14);case 15:return A.a(2)}},I$,null,[[9,13,14,15],[1,5,6,7]])}var _$=b$(p$),Q$=_$.right,U$=_$.left,j$=b$(N$).center;const D$=Q$;function R$(t){return!!t.getBandWidth}function H$(t,e,n){if(!R$(t))return t.invert(e);var r=t.adjustedRange;if(r.includes(e))return t.invert(e);var i=t.getOptions().domain,o=n?-1:0,a=t.getStep(),s=n?r:r.map(function(t){return t+a}),u=function(t,e,n){return Math.min(n,Math.max(0,t))}(U$(s,e)+o,0,i.length-1);return i[u]}function z$(t,e,n){if(!e)return t.getOptions().domain;if(!R$(t)){var r=v$(e);if(!n)return r;var i=v(r,1)[0],o=v(t.getOptions().range,2),a=o[0]>o[1]?-1:1;return[i,t.invert(t.map(i)+a*n)]}var s=t.getOptions().domain,u=e[0],c=s.indexOf(u);if(n){var l=c+Math.round(s.length*n);return s.slice(c,l)}var A=e[e.length-1],f=s.indexOf(A);return s.slice(c,f+1)}function K$(t,e,n,r,i,o){var a=i.x,s=i.y,u=function(t,e){var n=v(o.invert(t),2),r=n[0],i=n[1];return[H$(a,r,e),H$(s,i,e)]},c=u([t,e],!0),l=u([n,r],!1);return[z$(a,[c[0],l[0]]),z$(s,[c[1],l[1]])]}function G$(t,e){var n=v(t,2),r=n[0],i=n[1];return[e.map(r),e.map(i)+function(t){return t.getStep?t.getStep():0}(e)]}var V$=function(t,e){var n,r,i=v(t,2),o=i[0],a=i[1],s=(null===(r=null===(n=e.getOptions)||void 0===n?void 0:n.call(e))||void 0===r?void 0:r.domain)||[],u=s.indexOf(o),c=s.indexOf(a);if(-1===u||-1===c)return[e.map(o),e.map(a)];var l=s.length;return l<=1?[0,1]:[u/(l-1),c/(l-1)]};function W$(t,e){if(e(t))return!0;if("g"===t.tagName){var n,r=t.childNodes,i=qn(void 0===r?[]:r);try{for(i.s();!(n=i.n()).done;)if(W$(n.value,e))return!0}catch(t){i.e(t)}finally{i.f()}}return!1}var Y$={visibility:"visible",opacity:1,fillOpacity:1,strokeOpacity:1};function X$(t,e){var n;return W$(t,function(t){var r;return"g"!==t.tagName&&void 0!==(null===(r=t.style)||void 0===r?void 0:r[e])&&(n=t.style[e],!0)}),null!=n?n:Y$[e]}function q$(t,e,n,r){t.style[e]=n,r&&t.children.forEach(function(t){return q$(t,e,n,r)})}function Z$(t){q$(t,"visibility","hidden",!0)}function J$(t){q$(t,"visibility","visible",!0)}var $$=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function t0(t){return wG(t).selectAll(".".concat(B$)).nodes().filter(function(t){return!t.__removed__})}function e0(t,e){return n0(t,e).flatMap(function(t){return t0(t.container)})}function n0(t,e){return e.filter(function(e){return e!==t&&e.options.parentKey===t.options.key})}function r0(t){return wG(t).select(".".concat(O$)).node()}function i0(t){if("g"===t.tagName)return t.getRenderBounds();var e=t.getGeometryBounds(),n=new ar;return n.setFromTransformedAABB(e,t.getWorldTransform()),n}function o0(t,e){var n=e.offsetX,r=e.offsetY,i=i0(t),o=v(i.min,2),a=o[0],s=o[1],u=v(i.max,2),c=u[0],l=u[1];return n<a||n>c||r<s||r>l?null:[n-a,r-s]}function a0(t,e){var n=e.offsetX,r=e.offsetY,i=function(t){var e=t.getRenderBounds(),n=v(e.min,2),r=n[0],i=n[1],o=v(e.max,2);return[r,i,o[0],o[1]]}(t),o=v(i,4),a=o[0],s=o[1],u=o[2],c=o[3];return[Math.min(u,Math.max(a,n))-a,Math.min(c,Math.max(s,r))-s]}function s0(t){return function(t){return t.__data__.color}}function u0(t){return function(t){return t.__data__.x}}function c0(t){var e=Array.isArray(t)?t:[t],n=new Map(e.flatMap(function(t){return Array.from(t.markState.keys()).map(function(e){return[p0(t.key,e.key),e.data]})}));return function(t){var e=t.__data__,r=e.index,i=e.markKey,o=e.viewKey;return n.get(p0(o,i))[r]}}var l0={selected:3,unselected:3,active:2,inactive:2,default:1},A0={selection:["selected","unselected"],highlight:["active","inactive"]},f0=function(t,e,n){W$(t,function(t){"setAttribute"in t&&"function"==typeof t.setAttribute&&t.setAttribute(e,n)})};function d0(t,e){return e.forEach(function(e){var n=e.__interactionStyle__;e.__interactionStyle__=n?Object.assign(Object.assign({},n),t):t}),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(t,e){return t};return h0(void 0,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:f0)}}function h0(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t,e){return t},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f0,r="__states__",i="__ordinal__",o=function(t){return l0[t]||l0.default},a=function(t){var e;return null===(e=Object.entries(A0).find(function(e){var n=v(e,2);return n[0],n[1].includes(t)}))||void 0===e?void 0:e[0]},s=function(a){var s,u,c=a[r],l=void 0===c?[]:c,A=a[i],f=void 0===A?{}:A,d=O(l).sort(function(t,e){return o(e)-o(t)}),h=new Map,p=qn(d);try{for(p.s();!(u=p.n()).done;)for(var g=u.value,y=(null===(s=null!=t?t:a.__interactionStyle__)||void 0===s?void 0:s[g])||{},m=0,b=Object.entries(y);m<b.length;m++){var w=v(b[m],2),x=w[0],E=w[1];h.has(x)||h.set(x,E)}}catch(t){p.e(t)}finally{p.f()}var B,k=Object.assign({},f),C=qn(h.entries());try{for(C.s();!(B=C.n()).done;){var M=v(B.value,2),S=M[0],F=M[1];k[S]=F}}catch(t){C.e(t)}finally{C.f()}if(0!==Object.keys(k).length){for(var T=0,P=Object.entries(k);T<P.length;T++){var I=v(P[T],2),N=I[0],L=I[1],_=X$(a,N),Q=e(L,a);n(a,N,Q),N in f||(f[N]=_)}a[i]=f}},u=function(t){t[r]||(t[r]=[])};return{setState:function(t){u(t);for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];t[r]=[].concat(n),s(t)},updateState:function(t){u(t);for(var e=t[r],n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];var c=new Set(i.map(function(t){return a(t)}).filter(function(t){return void 0!==t})),l=e.filter(function(t){return!c.has(a(t))});t[r]=[].concat(O(l),i),s(t)},removeState:function(t){u(t);for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];for(var o=0,a=n;o<a.length;o++){var c=a[o],l=t[r].indexOf(c);-1!==l&&t[r].splice(l,1)}s(t)},hasState:function(t,e){return u(t),-1!==t[r].indexOf(e)}}}function p0(t,e){return"".concat(t,",").concat(e)}function v0(t,e){var n,r=(Array.isArray(t)?t:[t]).flatMap(function(t){return t.marks.map(function(e){return[p0(t.key,e.key),e.state]})}),i={},o=qn(e);try{var a=function(){var t=n.value,e=v(Array.isArray(t)?t:[t,{}],2),o=e[0],a=e[1];i[o]=r.reduce(function(t,e){for(var n,r=v(e,2),i=r[0],s=r[1],u=void 0===s?{}:s,c=void 0===(n=u[o])||"object"==typeof n&&0===Object.keys(n).length?a:u[o],l=function(){var e=v(f[A],2),n=e[0],r=e[1],o=t[n];t[n]=function(t,e,n,a){var s=p0(a.__data__.viewKey,a.__data__.markKey);return i!==s?null==o?void 0:o(t,e,n,a):"function"!=typeof r?r:r(t,e,n,a)}},A=0,f=Object.entries(c);A<f.length;A++)l();return t},{})};for(o.s();!(n=o.n()).done;)a()}catch(t){o.e(t)}finally{o.f()}return i}function g0(t,e){var n=new Map(t.map(function(t,e){return[t,e]})),r=e?t.map(e):t;return function(t,i){if("function"!=typeof t)return t;var o=n.get(i);return t(e?e(i):i,o,r,i)}}function y0(t){var e=t.link,n=void 0!==e&&e,r=t.valueof,i=void 0===r?function(t,e){return t}:r,o=(t.coordinate,$$(t,["link","valueof","coordinate"]));if(!n)return[function(){},function(){}];var a=function(t){return t.__data__.points};return[function(t){var e;if(!(t.length<=1))for(var n=v$(t,function(t,e){return t.__data__.x-e.__data__.x}),r=function(){var t=sK(),r=n[s-1],u=n[s],c=function(t,e){var n=v(t,3),r=n[1],i=n[2],o=v(e,4);return[r,o[0],o[3],i]}(a(r),a(u)),l=v(c,4),A=l[0],f=l[1],d=l[2],h=l[3];t.moveTo.apply(t,O(A)),t.lineTo.apply(t,O(f)),t.lineTo.apply(t,O(d)),t.lineTo.apply(t,O(h)),t.closePath();var p=qG(o,function(t){return i(t,r)}),g=p.fill,y=void 0===g?r.getAttribute("fill"):g,m=$$(p,["fill"]),b=new zu({className:"element-link",style:Object.assign({d:t.toString(),fill:y,zIndex:-2},m)});null===(e=r.link)||void 0===e||e.remove(),r.parentNode.appendChild(b),r.link=b},s=1;s<n.length;s++)r()},function(t){var e;null===(e=t.link)||void 0===e||e.remove(),t.link=null}]}function m0(t,e,n){var r=function(e){var n=t.style.transform;return n?"".concat(n," ").concat(e):e};if(gK(n)){var i=t.__data__.points,o=v(vK(n)?oV(i):i,2),a=o[0],s=o[1],u=n.getCenter(),c=EG(a,u),l=EG(s,u),A=OG(c)+MG(c,l)/2,f=e*Math.cos(A),d=e*Math.sin(A);return r("translate(".concat(f,", ").concat(d,")"))}return vK(n)?r("translate(".concat(e,", 0)")):r("translate(0, ".concat(-e,")"))}function b0(t){var e=t.document,n=t.background,r=t.scale,i=t.coordinate,o=t.valueof,a=$$(t,["document","background","scale","coordinate","valueof"]),s="element-background";if(!n)return[function(){},function(){}];var u=function(t,e,n){var r=t.invert(e),i=e+t.getBandWidth(r)/2,o=t.getStep(r)/2,a=o*n;return[i-o+a,i+o-a]},c=function(t,n){var o=n.padding,a=function(t,e){var n=r.x;if(!R$(n))return[0,1];var i=t.__data__.x,o=v(u(n,i,e),2);return[o[0],o[1]]}(t,o),s=v(a,2),c=s[0],l=s[1],A=function(t,e){var n=r.y;if(!R$(n))return[0,1];var i=t.__data__.y,o=v(u(n,i,e),2);return[o[0],o[1]]}(t,o),f=v(A,2),d=f[0],h=f[1],p=[[c,d],[l,d],[l,h],[c,h]].map(function(t){return i.map(t)}),g=t.__data__,y=g.y,m=g.y1;return AV(e,p,{y,y1:m},i,n)},l=function(t,e){for(var n=e.transform,r=void 0===n?"scale(1.2, 1.2)":n,i=e.transformOrigin,o=void 0===i?"center center":i,a=e.stroke,s=void 0===a?"":a,u=$$(e,["transform","transformOrigin","stroke"]),c=Object.assign({transform:r,transformOrigin:o,stroke:s},u),l=t.cloneNode(!0),A=0,f=Object.entries(c);A<f.length;A++){var d=v(f[A],2),h=d[0],p=d[1];l.style[h]=p}return l};return[function(t){t.background&&t.background.remove();var e=qG(a,function(e){return o(e,t)}),n=e.fill,i=void 0===n?"#CCD6EC":n,u=e.fillOpacity,A=void 0===u?.3:u,f=e.zIndex,d=void 0===f?-2:f,h=e.padding,p=void 0===h?.001:h,v=e.lineWidth,g=void 0===v?0:v,y=$$(e,["fill","fillOpacity","zIndex","padding","lineWidth"]),m=Object.assign(Object.assign({},y),{fill:i,fillOpacity:A,zIndex:d,padding:p,lineWidth:g}),b=([r.x,r.y].some(R$)?c:l)(t,m);b.className=s,t.parentNode.parentNode.appendChild(b),t.background=b},function(t){var e;null===(e=t.background)||void 0===e||e.remove(),t.background=null},function(t){return t.className===s}]}function w0(t,e){var n=t.getRootNode().defaultView.getContextService().getDomElement();(null==n?void 0:n.style)&&(t.cursor=n.style.cursor,n.style.cursor=e)}function x0(t,e,n){return t.find(function(t){return Object.entries(e).every(function(e){var r=v(e,2),i=r[0],o=r[1];return n(t)[i]===o})})}function E0(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}function B0(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Xx(t,function(t){return!!t}).map(function(t,e){return[0===e?"M":"L"].concat(O(t))});return e&&n.push(["Z"]),n}function k0(t){return t.querySelectorAll(".element")}function O0(t,e){if(e(t))return t;for(var n=t.parent;n&&!e(n);)n=n.parent;return n}var C0=["interval","point","density"];function M0(t){var e,n,r=t.elementsof,i=t.root,o=t.coordinate,a=t.scale,s=t.validFindByXMarks,u=void 0===s?C0:s,c=r(i),l=function(t){return u.includes(t.markType)};if(c.find(l)){c=c.filter(l);var A=a.x,f=a.series,d=null!==(n=null===(e=null==A?void 0:A.getBandWidth)||void 0===e?void 0:e.call(A))&&void 0!==n?n:0,h=f?function(t){var e,n,r=Math.round(1/(null!==(e=f.valueBandWidth)&&void 0!==e?e:1));return t.__data__.x+(null!==(n=t.__data__.series)&&void 0!==n?n:0)*d+d/(2*r)}:function(t){return t.__data__.x+d/2};return c.sort(function(t,e){return h(t)-h(e)}),function(t){var e=o0(i,t);if(e){var n=v(o.invert(e),1)[0],r=(0,b$(h).center)(c,n);return c[r]}}}return function(t){return O0(t.target,function(t){return!!t.classList&&t.classList.includes("element")})}}function S0(t){var e=.01/Math.max(t,1e-4);return Math.max(.1,Math.min(100,e))}function F0(t){return!1===t||null==t}function T0(t){var e,n,r=[],i=[],o=[],a=t.markState;if(a){var s,u=qn(a.entries());try{for(u.s();!(s=u.n()).done;){var c=v(s.value,2),l=c[0],A=c[1];if(null==A?void 0:A.channels){var f,d={},h=qn(A.channels);try{for(h.s();!(f=h.n()).done;){var p=f.value;if("x"===(null==p?void 0:p.name)&&(null===(e=p.values)||void 0===e?void 0:e.length)>0){var g,y=[],m=qn(p.values);try{for(m.s();!(g=m.n()).done;){var b=g.value;(null==b?void 0:b.value)&&(y=y.concat(b.value),r.push(b.value))}}catch(t){m.e(t)}finally{m.f()}d.x=y}else if(p&&("y"===p.name||p.name.startsWith("y"))&&(null===(n=p.values)||void 0===n?void 0:n.length)>0){var w,x=p.name,E=[],B=qn(p.values);try{for(B.s();!(w=B.n()).done;){var k=w.value;if(null==k?void 0:k.value){var O=k.value;E.push(O),"y"!==x&&"y1"!==x||(Array.isArray(O)?i.push(O.flat()):i.push([O]))}}}catch(t){B.e(t)}finally{B.f()}d[x]=E}}}catch(t){h.e(t)}finally{h.f()}var C=d.x||[],M=d.y||[];C.length>0&&M.length>0&&o.push({markKey:l.key||"mark_".concat(o.length),channelData:d})}}}catch(t){u.e(t)}finally{u.f()}}return{xChannelValues:r.flat(),yChannelValues:i.flat(),markDataPairs:o}}function P0(t,e){var n,r=new Set,i=qn(e);try{for(i.s();!(n=i.n()).done;){var o=n.value.scale,a=null==o?void 0:o[t];if(a){if(a.independent)return!0;var s=a.key||"default";if(r.add(s),r.size>1)return!0}}}catch(t){i.e(t)}finally{i.f()}return!1}function I0(t){var e,n,r,i,o,a,s,u,c,l=Array.from(t.markState.keys()),A=P0("x",l),f=P0("y",l),d=[],h=[],p=[],g=[],y=new Map,m=new Map,b=new Map,w=new Map,x=1,E=1,B=qn(t.markState.entries());try{for(B.s();!(c=B.n()).done;){var k=v(c.value,1)[0],O=k.key,C=(null===(n=null===(e=null==k?void 0:k.scale)||void 0===e?void 0:e.x)||void 0===n?void 0:n.key)||"x";if((null===(i=null===(r=null==k?void 0:k.scale)||void 0===r?void 0:r.x)||void 0===i?void 0:i.independent)||A&&"x"!==C){h.push(O),b.has(C)||b.set(C,x++);var M=b.get(C);y.set(O,"x".concat(M))}else d.push(O),y.set(O,"x");var S=(null===(a=null===(o=null==k?void 0:k.scale)||void 0===o?void 0:o.y)||void 0===a?void 0:a.key)||"y";if((null===(u=null===(s=null==k?void 0:k.scale)||void 0===s?void 0:s.y)||void 0===u?void 0:u.independent)||f&&"y"!==S){g.push(O),w.has(S)||w.set(S,E++);var F=w.get(S);m.set(O,"y".concat(F))}else p.push(O),m.set(O,"y")}}catch(t){B.e(t)}finally{B.f()}return{hasIndependentX:A,hasIndependentY:f,marksWithSharedX:d,marksWithIndependentX:h,marksWithSharedY:p,marksWithIndependentY:g,markToXScaleMap:y,markToYScaleMap:m}}var N0=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())})},L0="legend-category",_0="legend-html-category",Q0="legend-continuous",U0="items-item",j0="legend-category-item-marker",D0="legend-category-item-label",R0="legend-category-item-focus-group";function H0(t){return t.getElementsByClassName(j0)[0]}function z0(t){return t.getElementsByClassName(D0)[0]}function K0(t){return t.getElementsByClassName(R0)[0]}function G0(t){return t.getElementsByClassName(U0)}function V0(t){return t.getElementsByClassName(L0)}function W0(t){return t.getElementsByClassName(Q0)}function Y0(t,e){[].concat(O(V0(t)),O(W0(t))).forEach(function(t){e(t,function(t){return t})})}function X0(t){for(var e=t.parentNode;e&&!e.__data__;)e=e.parentNode;return e.__data__}function q0(t,e,n){var r,i=Object.keys(t).find(function(r){if(r.startsWith(n)){var i=t[r].getOptions();return i.name===n&&i.markKey===e}});return null!==(r=t[i])&&void 0!==r?r:t[n]}function Z0(t,e){return N0(this,arguments,void 0,function(t,e){var n=e.legend,r=e.channel,i=e.value,o=e.ordinal,a=e.channels,s=e.allChannels,u=e.facet,c=void 0!==u&&u;return(0,Dn.A)().m(function e(){var u,l;return(0,Dn.A)().w(function(e){for(;;)switch(e.n){case 0:return u=t.view,l=t.update,(0,t.setState)(n,function(t){var e,l,A=t.marks,f=null===(l=null===(e=n.attributes)||void 0===e?void 0:e.scales)||void 0===l?void 0:l.find(function(t){return t.name===r}),d=A.map(function(e){var n,l;if((null!==(n=e.scale[r].key)&&void 0!==n?n:r)!==(null!==(l=null==f?void 0:f.key)&&void 0!==l?l:null==f?void 0:f.name))return e;if("legends"===e.type)return e;if(EJ.includes(e.type))return e;var A=e.transform,d=void 0===A?[]:A,h=e.data,p=void 0===h?[]:h,v=d.findIndex(function(t){var e=t.type;return e.startsWith("group")||e.startsWith("bin")}),g=O(d);p.length&&g.splice(v+1,0,m({type:"filter"},r,{value:i,ordinal:o}));var y=Object.fromEntries(a.map(function(e){return[e,{domain:q0(u.scale,t.key,e).getOptions().domain}]}));return Xm({},e,Object.assign(Object.assign({transform:g,scale:y},!o&&{animate:!1}),{legend:!c&&Object.fromEntries(s.map(function(t){return[t,{preserve:!0}]}))}))});return Object.assign(Object.assign({},t),{marks:d})}),e.n=1,l();case 1:return e.a(2)}},e)})()})}function J0(t,e){var n,r=qn(t);try{for(r.s();!(n=r.n()).done;)Z0(n.value,Object.assign(Object.assign({},e),{facet:!0}))}catch(t){r.e(t)}finally{r.f()}}function $0(){return function(t,e,n){var r=t.container,i=e.filter(function(e){return e!==t}),o=i.length>0,a=function(t){return X0(t).scales.map(function(t){return t.name})},s=[].concat(O(V0(r)),O(function(t){return t.getElementsByClassName(_0)}(r)),O(W0(r))),u=s.flatMap(a),c=Iy(o?J0:Z0,50,{trailing:!0}),l=s.map(function(e){var s=X0(e).scales[0],l=s.name,A=s.domain,f={legend:e,channel:l,channels:a(e),allChannels:u};return e.className===L0?function(t,e){for(var n=this,r=e.legends,i=e.marker,o=e.label,a=e.datum,s=e.filter,u=e.defaultSelect,c=e.emitter,l=e.channel,A=e.state,f=void 0===A?{}:A,d=new Map,h=new Map,p=new Map,v=new Map,g=f.unselected,y=void 0===g?{markerStroke:"#aaa",markerFill:"#aaa",labelFill:"#aaa"}:g,m={unselected:hG(y,"marker")},b={unselected:hG(y,"label")},w=h0(m,void 0),x=w.setState,E=w.removeState,B=h0(b,void 0),k=B.setState,O=B.removeState,C=Array.from(r(t)),M=C.map(a),S=function(){for(var t=0,e=C;t<e.length;t++){var n=e[t],r=a(n),s=i(n),u=o(n);M.includes(r)?(E(s,"unselected"),O(u,"unselected")):(x(s,"unselected"),k(u,"unselected"))}},F=function(){var e=P[T],r=function(){w0(t,"pointer")},i=function(){!function(t){w0(t,t.cursor)}(t)},o=function(t){return N0(n,void 0,void 0,(0,Dn.A)().m(function n(){var r,i,o,u;return(0,Dn.A)().w(function(n){for(;;)switch(n.n){case 0:return r=a(e),-1===(i=M.indexOf(r))?M.push(r):M.splice(i,1),n.n=1,s(M);case 1:if(S(),o=t.nativeEvent,u=void 0===o||o){n.n=2;break}return n.a(2);case 2:M.length===C.length?c.emit("legend:reset",{nativeEvent:u}):c.emit("legend:filter",Object.assign(Object.assign({},t),{nativeEvent:u,data:{channel:l,values:M}}));case 3:return n.a(2)}},n)}))};e.addEventListener("click",o),e.addEventListener("pointerenter",r),e.addEventListener("pointerout",i),d.set(e,o),h.set(e,r),p.set(e,i);var u=K0(e);if(u){var A=function(t){return N0(n,void 0,void 0,(0,Dn.A)().m(function n(){var r,i,o,u;return(0,Dn.A)().w(function(n){for(;;)switch(n.n){case 0:if(t.stopPropagation(),r=a(e),i=M.indexOf(r),o=t.nativeEvent,u=void 0===o||o,-1===i||1!==M.length){n.n=3;break}if(u){n.n=1;break}return n.a(2);case 1:return M=C.map(a),n.n=2,s(M);case 2:S(),c.emit("legend:reset",{nativeEvent:u}),n.n=6;break;case 3:return M=[r],n.n=4,s(M);case 4:if(S(),u){n.n=5;break}return n.a(2);case 5:c.emit("legend:focus",Object.assign(Object.assign({},t),{nativeEvent:u,data:{channel:l,value:r}}));case 6:return n.a(2)}},n)}))};u.addEventListener("click",A),v.set(e,A)}},T=0,P=C;T<P.length;T++)F();var I=function(t){return N0(n,void 0,void 0,(0,Dn.A)().m(function e(){var n,r,i;return(0,Dn.A)().w(function(e){for(;;)switch(e.n){case 0:if(!t.nativeEvent){e.n=1;break}return e.a(2);case 1:if(n=t.data,r=n.channel,i=n.value,r===l){e.n=2;break}return e.a(2);case 2:return M=[i],e.n=3,s(M);case 3:S();case 4:return e.a(2)}},e)}))},N=function(t){return N0(n,void 0,void 0,(0,Dn.A)().m(function e(){var n,r,i;return(0,Dn.A)().w(function(e){for(;;)switch(e.n){case 0:if(!t.nativeEvent){e.n=1;break}return e.a(2);case 1:if(n=t.data,r=n.channel,i=n.values,r===l){e.n=2;break}return e.a(2);case 2:return M=i,e.n=3,s(M);case 3:S();case 4:return e.a(2)}},e)}))},L=function(t){return N0(n,void 0,void 0,(0,Dn.A)().m(function e(){return(0,Dn.A)().w(function(e){for(;;)switch(e.n){case 0:if(!t.nativeEvent){e.n=1;break}return e.a(2);case 1:return M=C.map(a),e.n=2,s(M);case 2:S();case 3:return e.a(2)}},e)}))};return c.on("legend:filter",N),c.on("legend:focus",I),c.on("legend:reset",L),u&&c.emit("legend:filter",{data:{channel:l,values:u}}),function(){for(var t=0,e=C;t<e.length;t++){var n=e[t];n.removeEventListener("click",d.get(n)),n.removeEventListener("pointerenter",h.get(n)),n.removeEventListener("pointerout",p.get(n));var r=K0(n);r&&r.removeEventListener("click",v.get(n))}c.off("legend:focus",I),c.off("legend:filter",N),c.off("legend:reset",L)}}(e,{legends:G0,marker:H0,label:z0,datum:function(t){var e=t.__data__.index;return A[e]},filter:function(e){var n=Object.assign(Object.assign({},f),{value:e,ordinal:!0});c(o?i:t,n)},state:e.attributes.state,defaultSelect:e.attributes.defaultSelect,channel:l,emitter:n}):e.className===_0?function(t,e){var n,r,i=this,o=e.domain,a=e.filter,s=e.defaultSelect,u=e.emitter,c=e.channel,l=new Map,A=new Map,f=new Map,d=O(o),h=function(){var e,n=null===(e=t.ownerDocument)||void 0===e?void 0:e.defaultView;return n&&n.getContextService().getDomElement().parentElement||document.body},p=function(){h().querySelectorAll("[legend-value]").forEach(function(t){var e=t.getAttribute("legend-value");if(e&&o.includes(e)){var n=t;d.includes(e)?(n.style.opacity="1",n.classList.remove("legend-item-inactive")):(n.style.opacity="0.4",n.classList.add("legend-item-inactive"))}})};r=function(t){return N0(i,void 0,void 0,(0,Dn.A)().m(function e(){var r,i,s;return(0,Dn.A)().w(function(e){for(;;)switch(e.n){case 0:r=t.target;case 1:if(!r||r.hasAttribute("legend-value")){e.n=3;break}if((r=r.parentElement)!==n){e.n=2;break}return e.a(3,3);case 2:e.n=1;break;case 3:if(r&&r.hasAttribute("legend-value")){e.n=4;break}return e.a(2);case 4:if(t.preventDefault(),t.stopPropagation(),i=r.getAttribute("legend-value")){e.n=5;break}return e.a(2);case 5:return-1===(s=d.indexOf(i))?d.push(i):d.splice(s,1),e.n=6,a(d);case 6:p(),d.length===o.length?u.emit("legend:reset",{nativeEvent:!0}):u.emit("legend:filter",{nativeEvent:!0,data:{channel:c,values:d}});case 7:return e.a(2)}},e)}))},(n=h().querySelector(".legend-html")).addEventListener("click",r),l.set(n,r);var v=function(t){return N0(i,void 0,void 0,(0,Dn.A)().m(function e(){var n,r,i;return(0,Dn.A)().w(function(e){for(;;)switch(e.n){case 0:if(!t.nativeEvent){e.n=1;break}return e.a(2);case 1:if(n=t.data,r=n.channel,i=n.value,r===c){e.n=2;break}return e.a(2);case 2:return d=[i],e.n=3,a(d);case 3:p();case 4:return e.a(2)}},e)}))},g=function(t){return N0(i,void 0,void 0,(0,Dn.A)().m(function e(){var n,r,i;return(0,Dn.A)().w(function(e){for(;;)switch(e.n){case 0:if(!t.nativeEvent){e.n=1;break}return e.a(2);case 1:if(n=t.data,r=n.channel,i=n.values,r===c){e.n=2;break}return e.a(2);case 2:return d=i,e.n=3,a(d);case 3:p();case 4:return e.a(2)}},e)}))},y=function(t){return N0(i,void 0,void 0,(0,Dn.A)().m(function e(){return(0,Dn.A)().w(function(e){for(;;)switch(e.n){case 0:if(!t.nativeEvent){e.n=1;break}return e.a(2);case 1:return d=O(o),e.n=2,a(d);case 2:p();case 3:return e.a(2)}},e)}))};return u.on("legend:filter",g),u.on("legend:focus",v),u.on("legend:reset",y),s&&u.emit("legend:filter",{data:{channel:c,values:s}}),function(){h().querySelectorAll("[legend-value]").forEach(function(t){var e=t.getAttribute("legend-value");if(e&&o.includes(e)){var n=l.get(t),r=A.get(t),i=f.get(t);n&&t.removeEventListener("click",n),r&&t.removeEventListener("pointerenter",r),i&&t.removeEventListener("pointerout",i)}}),l.clear(),A.clear(),f.clear(),u.off("legend:filter",g),u.off("legend:focus",v),u.off("legend:reset",y)}}(r,{domain:A,filter:function(e){var n=Object.assign(Object.assign({},f),{value:e,ordinal:!0});c(o?i:t,n)},defaultSelect:e.attributes.defaultSelect,channel:l,emitter:n}):function(t,e){var n=e.legend,r=e.filter,i=e.emitter,o=e.channel,a=n.attributes,s=function(t){var e=t.detail.value.map(function(t){var e,n,r=null===(e=a.data)||void 0===e?void 0:e.find(function(e){return e.value===t});return r&&null!==(n=r.domainValue)&&void 0!==n?n:t});r(e),i.emit({nativeEvent:!0,data:{channel:o,values:e}})};return n.addEventListener("valuechange",s),function(){n.removeEventListener("valuechange",s)}}(0,{legend:e,filter:function(e){var n=Object.assign(Object.assign({},f),{value:e,ordinal:!1});c(o?i:t,n)},emitter:n,channel:l})});return function(){l.forEach(function(t){return t()})}}}function t1(t,e){var n,r=t$(t,"shape"),i=t$(t,"color"),o=r?r.clone():null,a=[],s=qn(e);try{var u=function(){var t=v(n.value,2),e=t[0],r=t[1],s=e.type,u=((null==i?void 0:i.getOptions().domain.length)>0?null==i?void 0:i.getOptions().domain:r.data).map(function(t,n){var i;return o?o.map(t||"point"):(null===(i=null==e?void 0:e.style)||void 0===i?void 0:i.shape)||r.defaultShape||"point"});"string"==typeof s&&a.push([s,u])};for(s.s();!(n=s.n()).done;)u()}catch(t){s.e(t)}finally{s.f()}if(0===a.length)return["point",["point"]];if(1===a.length)return a[0];if(!r)return a[0];var c=r.getOptions().range;return a.map(function(t){for(var e=v(t,2),n=e[0],r=e[1],i=0,o=0;o<a.length;o++){var s=c[o%c.length];r[o]===s&&i++}return[i/r.length,[n,r]]}).sort(function(t,e){return e[0]-t[0]})[0][1]}function e1(t,e){var n=e.scales,r=e.library,i=v(t1(n,e.markState),2),o=i[0],a=i[1],s=t.itemMarker,u=t.itemMarkerSize,c=function(t,e){var n,i,a,s=(null===(a=null===(i=null===(n=r["mark.".concat(o)])||void 0===n?void 0:n.props)||void 0===i?void 0:i.shape[t])||void 0===a?void 0:a.props.defaultMarker)||IG(t.split(".")),c="function"==typeof u?u(e):u;return function(){return function(t,e){var n=e.fill,r=e.lineWidth,i=e.stroke,o=e.color,a=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(e,["d","fill","lineWidth","path","stroke","color"]),s=fY.get(t)||fY.get("point");return function(){return new zu({style:Object.assign(Object.assign({},a),{d:s.apply(void 0,arguments),stroke:s.style.includes("stroke")?o||i:"",fill:s.style.includes("fill")?o||n:"",lineWidth:s.style.includes("lineWidth")?r||r||2:0})})}}(s,{color:e.color})(0,0,c)}},l=function(t){return"".concat(a[t])};return t$(n,"shape")&&!s?function(t,e){return c(l(e),t)}:"function"==typeof s?function(t,e){var n=s(t.id,e);return"string"==typeof n?c(n,t):n}:function(t,e){return c(s||l(e),t)}}function n1(t){var e=t$(t,"opacity");if(e){var n=e.getOptions().range;return function(t,e){return n[e]}}}function r1(t,e){var n=v(t1(e.scales,e.markState),2),r=(n[0],n[1]),i=t.itemMarker,o=t.itemMarkerLineWidth;if(void 0!==o)return o;var a=["line","hyphen","dash","smooth","hv","hvh","vh","vhv"];if("string"==typeof i&&a.includes(i))return 4;if("function"==typeof i)return function(t,e){var n=i(t.id,e);if("string"==typeof n&&a.includes(n))return 4};var s=(Array.isArray(r)?r:[r]).some(function(t){return a.includes(t)});return s?4:void 0}var i1=function(t){t.labelFormatter;var e=t.layout,n=(t.order,t.orientation,t.position),r=(t.size,t.title),i=t.cols,o=(t.itemMarker,t.render),a=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["labelFormatter","layout","order","orientation","position","size","title","cols","itemMarker","render"]),s=a.gridRow;return function(u){var c=u.value,l=u.theme,A=c.bbox,f=function(t,e,n){if("center"===e.position){var r=t.bbox;return{width:r.width,height:r.height}}var i=n$(t,e,n);return{width:i.width,height:i.height}}(c,t,i1),d=f.width,h=f.height,p=ZJ(n,e),v=Object.assign(Object.assign(Object.assign(Object.assign({orientation:["right","left","center"].includes(n)?"vertical":"horizontal",width:d,height:h,layout:void 0!==i?"grid":"flex"},void 0!==i&&{gridCol:i}),void 0!==s&&{gridRow:s}),{titleText:qJ(r)}),function(t,e){var n=t.labelFormatter,r=void 0===n?function(t){return"".concat(t)}:n,i=e.scales,o=function(t,e){var n=t$(t,"size");return n instanceof rZ?2*n.map(NaN):e}(i,e.theme.legendCategory.itemMarkerSize),a={itemMarker:e1(Object.assign(Object.assign({},t),{itemMarkerSize:o}),e),itemMarkerSize:o,itemMarkerOpacity:n1(i),itemMarkerLineWidth:r1(t,e)},s="string"==typeof r?HJ(r):r,u=t$(i,"color"),c=function(t){return t.find(function(t){return t.getOptions().domain.length>0}).getOptions().domain}(i),l=u?function(t){return u.map(t)}:function(){return e.theme.color};return Object.assign(Object.assign({},a),{data:c.map(function(t){return{id:t,label:s(t),color:l(t)}})})}(t,u)),g=l.legendCategory,y=void 0===g?{}:g,m=r$(Object.assign({},y,function(t){return Object.assign(Object.assign({},t),{data:(null==t?void 0:t.data.filter(function(t){return""!==t.id&&void 0!==t.id}))||[]})}(v),a,{classNamePrefix:bJ}));if(o)return new wP({className:_0,style:Object.assign(Object.assign({},m),{x:A.x,y:A.y,render:o})});var b=new $J({style:Object.assign(Object.assign({x:A.x,y:A.y,width:A.width,height:A.height},p),{subOptions:m})});return b.appendChild(new wP({className:"legend-category",style:m})),b}};function o1(t,e){var n=Be(function(t,e){for(var n=1;n<t.length;n+=1){var r=t[n-1],i=t[n];if(e>=r&&e<=i)return[r,i]}return[e,e]}(t,e),2),r=n[0],i=n[1];return{tick:e>(r+i)/2?i:r,range:[r,i]}}i1.props={defaultPosition:"top",defaultOrder:1,defaultSize:40,defaultCrossPadding:[12,12],defaultPadding:[12,12]};var a1=hT({trackGroup:"background-group",track:"background",selectionGroup:"ribbon-group",selection:"ribbon",clipPath:"clip-path"},"ribbon");function s1(t){var e=t.orientation,n=t.size,r=t.length;return zT(e,[r,n],[n,r])}function u1(t){var e=t.type,n=Be(s1(t),2),r=n[0],i=n[1];return"size"===e?[["M",0,i],["L",0+r,0],["L",0+r,i],["Z"]]:[["M",0,i],["L",0,0],["L",0+r,0],["L",0+r,i],["Z"]]}function c1(t){return u1(t)}function l1(t){var e=t.orientation,n=t.range;if(!n)return[];var r=Be(s1(t),2),i=r[0],o=r[1],a=Be(n,2),s=a[0],u=a[1],c=zT(e,s*i,0),l=zT(e,0,s*o),A=zT(e,u*i,i),f=zT(e,o,u*o);return[["M",c,l],["L",c,f],["L",A,f],["L",A,l],["Z"]]}var A1=function(t){function e(e){return t.call(this,e,{type:"color",orientation:"horizontal",size:30,range:[0,1],length:200,block:!1,partition:[],color:["#fff","#000"],trackFill:"#e5e5e5"})||this}return me(e,t),e.prototype.render=function(t,e){!function(t,e){var n=sT(e,"track"),r=e.classNamePrefix,i=yT(a1.track.name,"track",r);t.maybeAppendByClassName(a1.track,"path").attr("className",i).styles(be({d:u1(e)},n))}(fT(e).maybeAppendByClassName(a1.trackGroup,"g"),t),function(t,e){var n=sT(e,"selection"),r=function(t){var e,n=t.orientation,r=t.color,i=t.block,o=t.partition,a=(e=mn(r)?new Array(20).fill(0).map(function(t,e,n){return r(e/(n.length-1))}):r).length,s=e.map(function(t){return ao(t).toString()});return a?1===a?s[0]:i?function(t,e,n){var r=Array.from(e),i=t.length;return new Array(i).fill(0).reduce(function(e,n,o){var a=r[o%r.length];return e+" ".concat(t[o],":").concat(a).concat(o<i-1?" ".concat(t[o+1],":").concat(a):"")},"l(".concat("horizontal"===n?"0":"270",")"))}(o,s,n):s.reduce(function(t,e,n){return t+" ".concat(n/(a-1),":").concat(e)},"l(".concat(zT(n,"0","270"),")")):""}(e),i=e.classNamePrefix,o=yT(a1.selection.name,"selection",i),a=t.maybeAppendByClassName(a1.selection,"path").attr("className",o).styles(be({d:c1(e),fill:r},n)),s=a.maybeAppendByClassName(a1.clipPath,"path").styles({d:l1(e)}).node();a.style("clipPath",s)}(fT(e).maybeAppendByClassName(a1.selectionGroup,"g"),t)},e}(rT),f1=function(t){function e(e){var n=t.call(this,e,yP)||this;return n.eventToOffsetScale=new LN({}),n.innerRibbonScale=new LN({}),n.cacheLabelBBox=null,n.cacheHandleBBox=null,n.onHovering=function(t){var e=n.attributes,r=e.data,i=e.block;t.stopPropagation();var o=n.getValueByCanvasPoint(t);if(i){var a=o1(r.map(function(t){return t.value}),o).range,s=n.getRealSelection(a);n.showIndicator((a[0]+a[1])/2,"".concat(s[0],"-").concat(s[1])),n.dispatchIndicated(o,a)}else{var u=n.getTickValue(o);n.showIndicator(u,"".concat(n.getRealValue(u))),n.dispatchIndicated(u)}},n.onDragStart=function(t){return function(e){e.stopPropagation(),n.attributes.slidable&&(n.target=t,n.prevValue=n.getTickValue(n.getValueByCanvasPoint(e)),document.addEventListener("mousemove",n.onDragging),document.addEventListener("touchmove",n.onDragging),document.addEventListener("mouseleave",n.onDragEnd),document.addEventListener("mouseup",n.onDragEnd),document.addEventListener("mouseup",n.onDragEnd),document.addEventListener("touchend",n.onDragEnd))}},n.onDragging=function(t){var e=n.target;n.updateMouse();var r=Be(n.selection,2),i=r[0],o=r[1],a=n.getTickValue(n.getValueByCanvasPoint(t)),s=a-n.prevValue;"start"===e?i!==a&&n.updateSelection(a,o):"end"===e?o!==a&&n.updateSelection(i,a):"ribbon"===e&&0!==s&&(n.prevValue=a,n.updateSelection(s,s,!0))},n.onDragEnd=function(){n.style.cursor="pointer",document.removeEventListener("mousemove",n.onDragging),document.removeEventListener("touchmove",n.onDragging),document.removeEventListener("mouseup",n.onDragEnd),document.removeEventListener("touchend",n.onDragEnd)},n}return me(e,t),Object.defineProperty(e.prototype,"handleOffsetRatio",{get:function(){return this.ifHorizontal(.5,.5)},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var t=this.attributes,e=t.width,n=t.height;return new dT(0,0,e,n)},e.prototype.render=function(t,e){var n=this,r=t.classNamePrefix,i=e.className||"legend-continuous";r?e.attr("className","".concat(i," ").concat(r,"legend")):e.className||e.attr("className","legend-continuous");var o=t.showLabel;this.renderTitle(fT(e));var a=this.availableSpace,s=a.x,u=a.y,c=fT(e).maybeAppendByClassName(mP.contentGroup,"g").styles({transform:"translate(".concat(s,", ").concat(u,")")});gT(!!o,c.maybeAppendByClassName(mP.labelGroup,"g").styles({zIndex:1}),function(t){n.renderLabel(t)});var l=c.maybeAppendByClassName(mP.ribbonGroup,"g").styles({zIndex:0});this.handlesGroup=c.maybeAppendByClassName(mP.handlesGroup,"g").styles({zIndex:2}),this.renderHandles(),this.renderRibbon(l),this.renderIndicator(c),this.adjustLabel(),this.adjustHandles()},Object.defineProperty(e.prototype,"range",{get:function(){var t=this.attributes,e=t.data,n=t.domain;return n?{min:n[0],max:n[1]}:function(t){return{min:Math.min.apply(Math,ke([],Be(t.map(function(t){return t.value})),!1)),max:Math.max.apply(Math,ke([],Be(t.map(function(t){return t.value})),!1))}}(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ribbonScale",{get:function(){var t=this.range,e=t.min,n=t.max;return this.innerRibbonScale.update({domain:[e,n],range:[0,1]}),this.innerRibbonScale},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ribbonRange",{get:function(){var t=Be(this.selection,2),e=t[0],n=t[1],r=this.ribbonScale;return[r.map(e),r.map(n)]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selection",{get:function(){var t=this.range,e=t.min,n=t.max,r=this.attributes.defaultValue,i=Be(void 0===r?[e,n]:r,2);return[i[0],i[1]]},enumerable:!1,configurable:!0}),e.prototype.ifHorizontal=function(t,e){return zT(this.attributes.orientation,"function"==typeof t?t():t,"function"==typeof e?e():e)},e.prototype.renderTitle=function(t){var e=this.attributes,n=e.showTitle,r=e.titleText,i=e.width,o=e.height,a=e.classNamePrefix,s=sT(this.attributes,"title"),u=be(be({},s),{width:i,height:o,text:r,classNamePrefix:a}),c=this;t.selectAll(mP.title.class).data(n?[r]:[]).join(function(t){return t.append(function(){return new BT({style:u})}).attr("className",mP.title.name).each(function(){c.title=this})},function(t){return t.update(u)},function(t){return t.each(function(){c.title=void 0}).remove()})},Object.defineProperty(e.prototype,"availableSpace",{get:function(){if(this.title)return this.title.getAvailableSpace();var t=this.attributes,e=t.width,n=t.height;return new dT(0,0,e,n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelFixedSpacing",{get:function(){return this.attributes.showTick?5:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelPosition",{get:function(){var t=this.attributes,e=t.orientation,n=t.labelDirection;return{vertical:{positive:"right",negative:"left"},horizontal:{positive:"bottom",negative:"top"}}[e][n]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelBBox",{get:function(){var t;if(!this.attributes.showLabel)return new dT(0,0,0,0);if(this.cacheLabelBBox)return this.cacheLabelBBox;var e=(null===(t=this.label.querySelector(XP.labelGroup.class))||void 0===t?void 0:t.children.slice(-1)[0]).getBBox(),n=e.width,r=e.height;return this.cacheLabelBBox=new dT(0,0,n,r),this.cacheLabelBBox},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelShape",{get:function(){var t=this.attributes,e=t.showLabel,n=t.labelSpacing,r=void 0===n?0:n;if(!e)return{width:0,height:0,size:0,length:0};var i=this.labelBBox,o=i.width,a=i.height;return{width:o,height:a,size:this.ifHorizontal(a,o)+r+this.labelFixedSpacing,length:this.ifHorizontal(o,a)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ribbonBBox",{get:function(){var t,e=this.attributes,n=e.showHandle,r=e.ribbonSize,i=this.availableSpace,o=i.width,a=i.height,s=this.labelShape,u=s.size,c=s.length,l=Be(this.ifHorizontal([a,o],[o,a]),2),A=l[0],f=l[1],d=n?this.handleShape:{size:0,length:0},h=d.size,p=d.length,v=this.handleOffsetRatio,g=this.labelPosition;t=r||(["bottom","right"].includes(g)?Math.min(A-u,(A-h)/v):A*(1-v)>h?Math.max(A-u,0):Math.max((A-u-h)/v,0));var y=Math.max(p,c),m=f-y,b=Be(this.ifHorizontal([m,t],[t,m]),2),w=b[0],x=b[1],E=["top","left"].includes(g)?u:0,B=Be(this.ifHorizontal([y/2,E],[E,y/2]),2),k=B[0],O=B[1];return new dT(k,O,w,x)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ribbonShape",{get:function(){var t=this.ribbonBBox,e=t.width,n=t.height;return this.ifHorizontal({size:n,length:e},{size:e,length:n})},enumerable:!1,configurable:!0}),e.prototype.renderRibbon=function(t){var e=this.attributes,n=e.data,r=e.type,i=e.orientation,o=e.color,a=e.block,s=e.classNamePrefix,u=sT(this.attributes,"ribbon"),c=this.range,l=c.min,A=c.max,f=this.ribbonBBox,d=f.x,h=f.y,p=this.ribbonShape,v=p.length,g=p.size,y=$F({transform:"translate(".concat(d,", ").concat(h,")"),length:v,size:g,type:r,orientation:i,color:o,block:a,partition:n.map(function(t){return(t.value-l)/(A-l)}),range:this.ribbonRange,classNamePrefix:s},u),m=yT(mP.ribbon.name,"ribbon",s);this.ribbon=t.maybeAppendByClassName(mP.ribbon,function(){return new A1({style:y,className:m})}).update(y)},e.prototype.getHandleClassName=function(t){return"".concat(mP.prefix("".concat(t,"-handle")))},e.prototype.renderHandles=function(){var t=this.attributes,e=t.showHandle,n=t.orientation,r=t.classNamePrefix,i=sT(this.attributes,"handle"),o=Be(this.selection,2),a=o[0],s=o[1],u=be(be({},i),{orientation:n,classNamePrefix:r}),c=i.shape,l="basic"===(void 0===c?"slider":c)?pP:fL,A=this,f=yT(mP.handle.name,"handle",r);this.handlesGroup.selectAll(mP.handle.class).data(e?[{value:a,type:"start"},{value:s,type:"end"}]:[],function(t){return t.type}).join(function(t){return t.append(function(){return new l({style:u,className:f})}).attr("className",function(t){var e=t.type;return"".concat(f," ").concat(A.getHandleClassName(e))}).each(function(t){var e=t.type,n=t.value;this.update({labelText:n});var r="".concat(e,"Handle");A[r]=this,this.addEventListener("pointerdown",A.onDragStart(e))})},function(t){return t.update(u).each(function(t){var e=t.value;this.update({labelText:e})})},function(t){return t.each(function(t){var e=t.type,n="".concat(e,"Handle");A[n]=void 0}).remove()})},e.prototype.adjustHandles=function(){var t=Be(this.selection,2),e=t[0],n=t[1];this.setHandlePosition("start",e),this.setHandlePosition("end",n);var r=this.attributes,i=r.classNamePrefix,o=r.showHandle,a=sT(this.attributes,"handle").shape;o&&"slider"===(void 0===a?"slider":a)&&i&&(this.startHandle&&this.updateSliderHandleClassNames(this.startHandle,i),this.endHandle&&this.updateSliderHandleClassNames(this.endHandle,i))},e.prototype.updateSliderHandleClassNames=function(t,e){var n=t.container||t,r=n.querySelector(".handle-icon-rect");if(r){var i=yT("handle-icon-rect",bT,e);r.setAttribute("class",i),r.querySelectorAll("line").forEach(function(t){var n=yT((t.getAttribute("class")||"").split(" ")[0],bT,e);t.setAttribute("class",n)})}var o=n.querySelector(".handle-label");if(o){var a=yT("handle-label",wT,e);o.setAttribute("class",a)}},Object.defineProperty(e.prototype,"handleBBox",{get:function(){if(this.cacheHandleBBox)return this.cacheHandleBBox;if(!this.attributes.showHandle)return new dT(0,0,0,0);var t=this.startHandle.getBBox(),e=t.width,n=t.height,r=this.endHandle.getBBox(),i=r.width,o=r.height,a=Be([Math.max(e,i),Math.max(n,o)],2),s=a[0],u=a[1];return this.cacheHandleBBox=new dT(0,0,s,u),this.cacheHandleBBox},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"handleShape",{get:function(){var t=this.handleBBox,e=t.width,n=t.height,r=Be(this.ifHorizontal([n,e],[e,n]),2);return{width:e,height:n,size:r[0],length:r[1]}},enumerable:!1,configurable:!0}),e.prototype.setHandlePosition=function(t,e){var n=this.attributes.handleFormatter,r=this.ribbonBBox,i=r.x,o=r.y,a=this.ribbonShape.size,s=this.getOffset(e),u=Be(this.ifHorizontal([i+s,o+a*this.handleOffsetRatio],[i+a*this.handleOffsetRatio,o+s]),2),c=u[0],l=u[1],A=this.handlesGroup.select(".".concat(this.getHandleClassName(t))).node();null==A||A.update({transform:"translate(".concat(c,", ").concat(l,")"),formatter:n})},e.prototype.renderIndicator=function(t){var e=this.attributes.classNamePrefix,n=sT(this.attributes,"indicator"),r=yT(mP.indicator.name,"indicator",e);this.indicator=t.maybeAppendByClassName(mP.indicator,function(){return new vL({style:n,className:r})}).update(n)},Object.defineProperty(e.prototype,"labelData",{get:function(){var t=this;return this.attributes.data.reduce(function(e,n,r,i){var o,a,s=null!==(o=null==n?void 0:n.id)&&void 0!==o?o:r.toString();if(e.push(be(be({},n),{id:s,index:r,type:"value",label:null!==(a=null==n?void 0:n.label)&&void 0!==a?a:n.value.toString(),value:t.ribbonScale.map(n.value)})),r<i.length-1){var u=i[r+1],c=Be([n.value,u.value],2),l=c[0],A=c[1],f=(l+A)/2;e.push(be(be({},n),{id:s,index:r,type:"range",range:[l,A],label:[l,A].join("~"),value:t.ribbonScale.map(f)}))}return e},[])},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelStyle",{get:function(){var t=Be(["center","middle"],2),e=t[0],n=t[1],r=this.labelPosition;return"top"===r?n="bottom":"bottom"===r?n="top":"left"===r?e="end":"right"===r&&(e="start"),{labelTextAlign:e,labelTextBaseline:n}},enumerable:!1,configurable:!0}),e.prototype.renderLabel=function(t){var e=this.attributes,n=e.showTick,r=void 0!==n&&n,i=e.labelFilter,o=e.labelFormatter,a=sT(this.attributes,"tick"),s=sT(this.attributes,"label"),u=s.align,c=$F(be({showLine:!1,showGrid:!1,showTick:r,type:"linear",startPos:[0,0],endPos:[0,0],tickDirection:"negative",labelTransform:"rotate(0)"},this.labelStyle),uT(a,"tick"),uT(s,"label"),{data:this.labelData}),l={tickFilter:function(t,e,n){return"value"===(null==t?void 0:t.type)&&(!i||i(t,t.index,n.filter(function(t){return"value"!==t.type})))},labelFilter:function(t,e,n){return(null==t?void 0:t.type)===u&&(!i||i(t,t.index,n.filter(function(t){return t.type===u})))},labelFormatter:o},A=be(be(be({},c),l),{labelOverlap:[{type:"hide"}]});this.label=t.maybeAppendByClassName(mP.label,function(){return new uN({style:A})}).node(),this.label.update(A,!1)},Object.defineProperty(e.prototype,"labelAxisStyle",{get:function(){var t=this.attributes,e=t.showTick,n=t.labelDirection,r=t.labelSpacing,i=t.tickLength,o=this.ribbonShape.size,a=this.labelPosition,s=this.labelFixedSpacing,u=Be([0,0,0],3),c=u[0],l=u[1],A=u[2],f=null!=i?i:o;return e?(A=f,l=s,"positive"===n?"right"===a?(c=f,A=f):"bottom"===a&&(c=A):"negative"===n&&("top"===a||"left"===a)&&(c=o)):"positive"===n?"right"===a?l=f:"bottom"===a&&(c=o+s,l=r):"negative"===n&&("left"===a||"top"===a)&&(l=r),{offset:c,spacing:l,tickLength:A}},enumerable:!1,configurable:!0}),e.prototype.adjustLabel=function(){if(this.attributes.showLabel){var t=this.ribbonBBox,e=t.x,n=t.y,r=t.width,i=t.height,o=this.labelAxisStyle,a=o.offset,s=o.spacing,u=o.tickLength,c=Be(this.ifHorizontal([[e,n+a],[e+r,n+a]],[[e+a,n+i],[e+a,n]]),2),l=c[0],A=c[1];this.label.update({startPos:l,endPos:A,tickLength:u,labelSpacing:s},!1)}},e.prototype.bindEvents=function(){this.style.cursor="pointer",this.ribbon.on("pointerdown",this.onDragStart("ribbon")),this.ribbon.on("pointermove",this.onHovering),this.addEventListener("pointerout",this.hideIndicator)},e.prototype.showIndicator=function(t,e){if(void 0===e&&(e="".concat(t)),this.attributes.showIndicator&&"number"==typeof t){var n=this.range,r=n.min,i=n.max,o=this.ribbonBBox,a=o.x,s=o.y,u=ge(t,r,i),c=this.getOffset(u),l=this.ifHorizontal([c+a,s],[a,c+s]);this.indicator.update({x:l[0],y:l[1],position:this.ifHorizontal("top","left"),labelText:e}),XF(this.indicator.node())}else this.hideIndicator()},e.prototype.hideIndicator=function(){qF(this.indicator.node())},e.prototype.updateMouse=function(){this.attributes.slidable&&(this.style.cursor="grabbing")},e.prototype.setSelection=function(t,e){this.updateSelection(t,e)},e.prototype.updateSelection=function(t,e,n){var r;void 0===n&&(n=!1);var i=Be(this.selection,2),o=i[0],a=i[1],s=Be([t,e],2),u=s[0],c=s[1];n&&(u+=o,c+=a);var l=this.range;r=Be(function(t,e,n,r){var i;void 0===r&&(r=4);var o=Be(t,2),a=o[0],s=o[1],u=Be(e,2),c=u[0],l=u[1],A=Be(n,2),f=A[0],d=A[1],h=Be([c,l],2),p=h[0],v=h[1],g=v-p;return p>v&&(p=(i=Be([v,p],2))[0],v=i[1]),g>s-a?[a,s]:p<a?f===a&&d===v?[a,v]:[a,g+a]:v>s?d===s&&f===p?[p,s]:[s-g,s]:[p,v]}([l.min,l.max],[u,c],this.selection),2),u=r[0],c=r[1],this.update({defaultValue:[u,c]}),this.dispatchSelection()},Object.defineProperty(e.prototype,"step",{get:function(){var t=this.attributes.step,e=void 0===t?1:t,n=this.range,r=n.min,i=n.max;return pn(e)?AN(.01*(i-r),0):e},enumerable:!1,configurable:!0}),e.prototype.getTickValue=function(t){var e=this.attributes,n=e.data,r=e.block,i=this.range.min;return r?o1(n.map(function(t){return t.value}),t).tick:function(t,e,n){return n+Math.round((t-n)/e)*e}(t,this.step,i)},e.prototype.getValueByCanvasPoint=function(t){var e=this.range,n=e.min,r=e.max,i=Be(this.ribbon.node().getPosition(),2),o=i[0],a=i[1],s=this.ifHorizontal(o,a),u=this.ifHorizontal.apply(this,ke([],Be(cN(t)),!1))-s;return ge(this.getOffset(u,!0),n,r)},e.prototype.getOffset=function(t,e){void 0===e&&(e=!1);var n=this.range,r=n.min,i=n.max,o=this.ribbonShape.length,a=this.eventToOffsetScale;return a.update({domain:[r,i],range:[0,o]}),e?a.invert(t):a.map(t)},e.prototype.getRealSelection=function(t){var e=this.range.max,n=Be(t,2),r=n[0],i=n[1];return this.ifHorizontal([r,i],[e-i,e-r])},e.prototype.getRealValue=function(t){var e=this.range.max;return this.ifHorizontal(t,e-t)},e.prototype.dispatchSelection=function(){var t=this.getRealSelection(this.selection),e=new Is("valuechange",{detail:{value:t}});this.dispatchEvent(e)},e.prototype.dispatchIndicated=function(t,e){var n=this,r=this.range.max,i=this.ifHorizontal(function(){return{value:t,range:e}},function(){return{value:r-t,range:e?n.getRealSelection(e):void 0}}),o=new Is("indicate",{detail:i});this.dispatchEvent(o)},e}(rT);function d1(t){var e=t.getOptions().domain,n=[e[0],$G(e)];return[n[0],n[1]]}function h1(t,e,n,r,i,o){var a=t$(t,"color"),s=function(t,e,n){var r=e.size,i=n$(t,e,n);return function(t,e,n){return t.size=e,function(t){return"horizontal"===t||0===t}(n)?t.height=e:t.width=e,t}(i,r,i.orientation)}(n,r,i);if(a instanceof cJ){var u=a.getOptions().range,c=v(d1(a),2),l=c[0],A=c[1];return a instanceof hJ||a instanceof fJ?function(t,e,n,r,i){var o=e.thresholds,a=function(t){return function(e){return{value:e/t,label:String(e),domainValue:e}}}(r);return Object.assign(Object.assign({},t),{color:i,data:[n].concat(O(o),[r]).map(a)})}(s,a,l,A,u):function(t,e,n){var r=e.thresholds,i=[-1/0].concat(O(r),[1/0]).map(function(t,e){return{value:e,domainValue:t,label:t}});return Object.assign(Object.assign({},t),{data:i,color:n,labelFilter:function(t,e){return e>0&&e<i.length-1}})}(s,a,u)}return function(t,e,n,r,i,o){var a=t.length,s=n||r,u=i.color?o.legendContinuous.ribbonFill||"black":o.color,c=e||function(t,e){var n=t.getOptions(),r=t.clone();return r.update(Object.assign(Object.assign({},n),{range:[ao(e).toString()]})),r}(s,u),l=v(d1(c),2),A=l[0],f=l[1],d=d1([e,n,r].filter(function(t){return void 0!==t}).find(function(t){return!(t instanceof eG)})),h=v(d,2),p=h[0],g=h[1];return Object.assign(Object.assign({},t),{domain:[p,g],data:c.getTicks().map(function(t){return{value:t}}),color:new Array(Math.floor(a)).fill(0).map(function(t,e){var n=(f-A)/(a-1)*e+A,i=c.map(n)||u,o=r?r.map(n):1;return i.replace(/rgb[a]*\(([\d]{1,3}) *, *([\d]{1,3}) *, *([\d]{1,3})[\S\s]*\)/,function(t,e,n,r){return"rgba(".concat(e,", ").concat(n,", ").concat(r,", ").concat(o,")")})})})}(s,a,t$(t,"size"),t$(t,"opacity"),e,o)}var p1=function(t){var e=t.labelFormatter,n=t.layout,r=(t.order,t.orientation,t.position),i=(t.size,t.title),o=t.style,a=(t.crossPadding,t.padding,function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["labelFormatter","layout","order","orientation","position","size","title","style","crossPadding","padding"]));return function(s){var u=s.scales,c=s.value,l=s.theme,A=s.scale,f=c.bbox,d=f.x,h=f.y,p=f.width,v=f.height,g=ZJ(r,n),y=l.legendContinuous,m=void 0===y?{}:y,b=r$(Object.assign({},m,Object.assign(Object.assign(Object.assign({titleText:qJ(i),labelAlign:"value",labelFormatter:"string"==typeof e?function(t){return HJ(e)(t.label)}:e},h1(u,A,c,t,p1,l)),o),{classNamePrefix:bJ}),a)),w=new JJ({style:Object.assign(Object.assign({x:d,y:h,width:p,height:v},g),{subOptions:b})});return w.appendChild(new f1({className:"legend-continuous",style:b})),w}};p1.props={defaultPosition:"top",defaultOrientation:"vertical",defaultOrder:1,defaultSize:60,defaultLength:200,defaultLegendSize:60,defaultPadding:[20,10],defaultCrossPadding:[12,12]};var v1=function(t){return function(){return new _u}};v1.props={};function g1(t,e,n,r){switch(r){case"center":return{x:t+n/2,y:e,textAlign:"middle"};case"right":return{x:t+n,y:e,textAlign:"right"};default:return{x:t,y:e,textAlign:"left"}}}var y1,m1=(y1={render:function(t,e){var n=t.width,r=t.title,i=t.subtitle,o=t.spacing,a=void 0===o?2:o,s=t.align,u=void 0===s?"left":s,c=t.x,l=t.y,A=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["width","title","subtitle","spacing","align","x","y"]);e.style.transform="translate(".concat(c,", ").concat(l,")");var f=hG(A,"title"),d=hG(A,"subtitle"),h=XJ(e,".title","text").attr("className","title").call(nV,Object.assign(Object.assign(Object.assign({},g1(0,0,n,u)),{fontSize:14,textBaseline:"top",text:r}),f)).node().getLocalBounds();XJ(e,".sub-title","text").attr("className","sub-title").call(function(t){if(!i)return t.node().remove();t.node().attr(Object.assign(Object.assign(Object.assign({},g1(0,h.max[1]+a,n,u)),{fontSize:12,textBaseline:"top",text:i}),d))})}},function(t){function e(t){var n;return x(this,e),(n=F(this,e,[t])).descriptor=y1,n}return P(e,t),B(e,[{key:"connectedCallback",value:function(){var t,e;null===(e=(t=this.descriptor).render)||void 0===e||e.call(t,this.attributes,this)}},{key:"update",value:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.attr(Xm({},this.attributes,n)),null===(e=(t=this.descriptor).render)||void 0===e||e.call(t,this.attributes,this)}}])}(Nu)),b1=function(t){return function(e){var n=e.value,r=e.theme,i=n.bbox,o=i.x,a=i.y,s=i.width,u=i.height;return new m1({style:Xm({},r.title,Object.assign({x:o,y:a,width:s,height:u},t))})}};b1.props={defaultPosition:"top",defaultOrder:2,defaultSize:36,defaultCrossPadding:[20,20],defaultPadding:[12,12]};var w1=function(t){var e=t.orientation,n=t.labelFormatter,r=(t.size,t.style),i=void 0===r?{}:r,o=t.position,a=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["orientation","labelFormatter","size","style","position"]);return function(r){var s,u=v(r.scales,1)[0],c=r.value,l=r.theme,A=r.coordinate,f=c.bbox,d=f.width,h=f.height,p=l.slider,g=void 0===p?{}:p,y=(null===(s=u.getFormatter)||void 0===s?void 0:s.call(u))||function(t){return t+""},m="string"==typeof n?HJ(n):n,b="horizontal"===e,w=vK(A)&&b,x=i.trackSize,E=void 0===x?g.trackSize:x,B=function(t,e,n){var r=t.x,i=t.y,o=t.width,a=t.height;return"left"===e?[r+o-n,i]:"right"===e||"bottom"===e?[r,i]:"top"===e?[r,i+a-n]:void 0}(f,o,E),k=v(B,2),O=k[0],C=k[1];return new dL({className:"slider",style:Object.assign({},g,Object.assign(Object.assign({x:O,y:C,trackLength:b?d:h,orientation:e,formatter:function(t){return(m||y)(H$(u,w?1-t:t,!0))},sparklineData:x1(t,r)},i),a))})}};function x1(t,e){var n=e.markState;return tn(t.sparklineData)?t.sparklineData:function(t,e){var n=Array.from(t.entries()).filter(function(t){var e=v(t,1)[0];return"line"===e.type||"area"===e.type||"interval"===e.type}).filter(function(t){return v(t,1)[0].slider}).map(function(t){var n=v(t,1)[0],r=n.encode,i=n.slider;if(null==i?void 0:i.x)return Object.fromEntries(e.map(function(t){var e=r[t];return[t,e?e.value:void 0]}))}),r=v(n,1)[0];if(!(null==r?void 0:r.series))return null==r?void 0:r.y;var i=r.series.reduce(function(t,e,n){return t[e]=t[e]||[],t[e].push(r.y[n]),t},{});return Object.values(i)}(n,["y","series"])}w1.props={defaultPosition:"bottom",defaultSize:24,defaultOrder:1,defaultCrossPadding:[12,12],defaultPadding:[12,12]};var E1=function(t){return w1(Object.assign(Object.assign({},t),{orientation:"horizontal"}))};E1.props=Object.assign(Object.assign({},w1.props),{defaultPosition:"bottom"});var B1=function(t){return w1(Object.assign(Object.assign({},t),{orientation:"vertical"}))};B1.props=Object.assign(Object.assign({},w1.props),{defaultPosition:"left"});var k1=function(t){function e(e){var n=t.call(this,e,{x:0,y:0,isRound:!0,orientation:"vertical",padding:[2,2,2,2],scrollable:!0,slidable:!0,thumbCursor:"default",trackSize:10,value:0})||this;return n.range=[0,1],n.onValueChange=function(t){var e=n.attributes.value;if(t!==e){var r={detail:{oldValue:t,value:e}};n.dispatchEvent(new Is("scroll",r)),n.dispatchEvent(new Is("valuechange",r))}},n.onTrackClick=function(t){if(n.attributes.slidable){var e=Be(n.getLocalPosition(),2),r=e[0],i=e[1],o=Be(n.padding,4),a=o[0],s=o[3],u=n.getOrientVal([r+s,i+a]),c=(n.getOrientVal(cN(t))-u)/n.trackLength;n.setValue(c,!0)}},n.onThumbMouseenter=function(t){n.dispatchEvent(new Is("thumbMouseenter",{detail:t.detail}))},n.onTrackMouseenter=function(t){n.dispatchEvent(new Is("trackMouseenter",{detail:t.detail}))},n.onThumbMouseleave=function(t){n.dispatchEvent(new Is("thumbMouseleave",{detail:t.detail}))},n.onTrackMouseleave=function(t){n.dispatchEvent(new Is("trackMouseleave",{detail:t.detail}))},n}return me(e,t),Object.defineProperty(e.prototype,"padding",{get:function(){return vT(this.attributes.padding)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){var t=this.attributes.value,e=Be(this.range,2),n=e[0],r=e[1];return ge(t,n,r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trackLength",{get:function(){var t=this.attributes,e=t.viewportLength,n=t.trackLength;return void 0===n?e:n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"availableSpace",{get:function(){var t=this.attributes.trackSize,e=this.trackLength,n=Be(this.padding,4),r=n[0],i=n[1],o=n[2],a=n[3],s=Be(this.getOrientVal([[e,t],[t,e]]),2);return{x:a,y:r,width:+s[0]-(a+i),height:+s[1]-(r+o)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trackRadius",{get:function(){var t=this.attributes,e=t.isRound,n=t.trackSize;return e?n/2:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"thumbRadius",{get:function(){var t=this.attributes,e=t.isRound,n=t.thumbRadius;if(!e)return 0;var r=this.availableSpace,i=r.width,o=r.height;return n||this.getOrientVal([o,i])/2},enumerable:!1,configurable:!0}),e.prototype.getValues=function(t){void 0===t&&(t=this.value);var e=this.attributes,n=e.viewportLength/e.contentLength,r=Be(this.range,2),i=r[0],o=t*(r[1]-i-n);return[o,o+n]},e.prototype.getValue=function(){return this.value},e.prototype.renderSlider=function(t){var e=this.attributes,n=e.x,r=e.y,i=e.orientation,o=e.trackSize,a=e.padding,s=e.slidable,u=sT(this.attributes,"track"),c=sT(this.attributes,"thumb"),l=be(be({x:n,y:r,brushable:!1,orientation:i,padding:a,selectionRadius:this.thumbRadius,showHandle:!1,slidable:s,trackLength:this.trackLength,trackRadius:this.trackRadius,trackSize:o,values:this.getValues()},uT(u,"track")),uT(c,"selection"));this.slider=fT(t).maybeAppendByClassName("scrollbar",function(){return new dL({style:l})}).update(l).node()},e.prototype.render=function(t,e){this.renderSlider(e)},e.prototype.setValue=function(t,e){void 0===e&&(e=!1);var n=this.attributes.value,r=Be(this.range,2),i=r[0],o=r[1];this.slider.setValues(this.getValues(ge(t,i,o)),e),this.onValueChange(n)},e.prototype.bindEvents=function(){var t=this;this.slider.addEventListener("trackClick",function(e){e.stopPropagation(),t.onTrackClick(e.detail)}),this.onHover()},e.prototype.getOrientVal=function(t){return"horizontal"===this.attributes.orientation?t[0]:t[1]},e.prototype.onHover=function(){this.slider.addEventListener("selectionMouseenter",this.onThumbMouseenter),this.slider.addEventListener("trackMouseenter",this.onTrackMouseenter),this.slider.addEventListener("selectionMouseleave",this.onThumbMouseleave),this.slider.addEventListener("trackMouseleave",this.onTrackMouseleave)},e.tag="scrollbar",e}(rT),O1=function(t){var e=t.orientation,n=(t.labelFormatter,t.style),r=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["orientation","labelFormatter","style"]);return function(t){var i=v(t.scales,1)[0],o=t.value,a=t.theme,s=o.bbox,u=s.x,c=s.y,l=s.width,A=s.height,f=a.scrollbar,d=void 0===f?{}:f,h=i.getOptions(),p=h.ratio,g=h.range,y="horizontal"===e?l:A,m=y/p,b=v(g,2),w=b[0],x=b[1]>w?0:1;return new k1({className:"".concat(bJ,"scrollbar"),style:Object.assign({},d,Object.assign(Object.assign(Object.assign(Object.assign({},n),{x:u,y:c,trackLength:y,value:x}),r),{orientation:e,contentLength:m,viewportLength:y}))})}};O1.props={defaultPosition:"bottom",defaultSize:24,defaultOrder:1,defaultCrossPadding:[12,12],defaultPadding:[12,12]};var C1=function(t){return O1(Object.assign(Object.assign({},t),{orientation:"horizontal"}))};C1.props=Object.assign(Object.assign({},O1.props),{defaultPosition:"bottom"});var M1=function(t){return O1(Object.assign(Object.assign({},t),{orientation:"vertical"}))};M1.props=Object.assign(Object.assign({},O1.props),{defaultPosition:"left"});var S1=function(t,e){var n=1e-4,r=e.coordinate;return function(e,i,o){var a=v(e,1)[0],s=a.style,u=s.transform,c=void 0===u?"":u,l=s.fillOpacity,A=void 0===l?1:l,f=s.strokeOpacity,d=void 0===f?1:f,h=s.opacity,p=void 0===h?1:h,g=v(vK(r)?["left bottom","scale(1, ".concat(n,")")]:["left top","scale(".concat(n,", 1)")],2),y=g[0],m=g[1],b=[{transform:"".concat(c," ").concat(m).trimStart(),transformOrigin:y,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:"".concat(c," ").concat(m).trimStart(),transformOrigin:y,fillOpacity:A,strokeOpacity:d,opacity:p,offset:.01},{transform:"".concat(c," scale(1, 1)").trimStart(),transformOrigin:y,fillOpacity:A,strokeOpacity:d,opacity:p}];return a.animate(b,Object.assign(Object.assign({},o),t))}},F1=function(t,e){var n=1e-4,r=e.coordinate;return function(e,i,o){var a=v(e,1)[0],s=a.style,u=s.transform,c=void 0===u?"":u,l=s.fillOpacity,A=void 0===l?1:l,f=s.strokeOpacity,d=void 0===f?1:f,h=s.opacity,p=void 0===h?1:h,g=v(vK(r)?["left bottom","scale(1, ".concat(n,")")]:["left top","scale(".concat(n,", 1)")],2),y=g[0],m=g[1],b=[{transform:"".concat(c," scale(1, 1)").trimStart(),transformOrigin:y},{transform:"".concat(c," ").concat(m).trimStart(),transformOrigin:y,fillOpacity:A,strokeOpacity:d,opacity:p,offset:.99},{transform:"".concat(c," ").concat(m).trimStart(),transformOrigin:y,fillOpacity:0,strokeOpacity:0,opacity:0}];return a.animate(b,Object.assign(Object.assign({},o),t))}},T1=function(t,e){var n=1e-4,r=e.coordinate;return Ju({name:"scaleInYRadius",inherits:!1,initialValue:"",interpolable:!0,syntax:zr.NUMBER}),function(e,i,o){var a=v(e,1)[0];return gK(r)?function(e){var i=e.__data__,a=e.style,s=a.fillOpacity,u=void 0===s?1:s,c=a.strokeOpacity,l=void 0===c?1:c,A=a.opacity,f=void 0===A?1:A,d=i.points,h=i.y,p=i.y1,v=aV(r,d,[h,p]),g=v.innerRadius,y=v.outerRadius,m=[{scaleInYRadius:g+n,fillOpacity:0,strokeOpacity:0,opacity:0},{scaleInYRadius:g+n,fillOpacity:u,strokeOpacity:l,opacity:f,offset:.01},{scaleInYRadius:y,fillOpacity:u,strokeOpacity:l,opacity:f}];return e.animate(m,Object.assign(Object.assign({},o),t))}(a):function(e){var i=e.style,a=i.transform,s=void 0===a?"":a,u=i.fillOpacity,c=void 0===u?1:u,l=i.strokeOpacity,A=void 0===l?1:l,f=i.opacity,d=void 0===f?1:f,h=v(vK(r)?["left top","scale(".concat(n,", 1)")]:["left bottom","scale(1, ".concat(n,")")],2),p=h[0],g=h[1],y=[{transform:"".concat(s," ").concat(g).trimStart(),transformOrigin:p,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:"".concat(s," ").concat(g).trimStart(),transformOrigin:p,fillOpacity:c,strokeOpacity:A,opacity:d,offset:.01},{transform:"".concat(s," scale(1, 1)").trimStart(),transformOrigin:p,fillOpacity:c,strokeOpacity:A,opacity:d}];return e.animate(y,Object.assign(Object.assign({},o),t))}(a)}},P1=function(t,e){var n=1e-4,r=e.coordinate;return function(e,i,o){var a=v(e,1)[0],s=a.style,u=s.transform,c=void 0===u?"":u,l=s.fillOpacity,A=void 0===l?1:l,f=s.strokeOpacity,d=void 0===f?1:f,h=s.opacity,p=void 0===h?1:h,g=v(vK(r)?["left top","scale(".concat(n,", 1)")]:["left bottom","scale(1, ".concat(n,")")],2),y=g[0],m=g[1],b=[{transform:"".concat(c," scale(1, 1)").trimStart(),transformOrigin:y},{transform:"".concat(c," ").concat(m).trimStart(),transformOrigin:y,fillOpacity:A,strokeOpacity:d,opacity:p,offset:.99},{transform:"".concat(c," ").concat(m).trimStart(),transformOrigin:y,fillOpacity:0,strokeOpacity:0,opacity:0}];return a.animate(b,Object.assign(Object.assign({},o),t))}},I1=function(t,e){var n=1e-4;Ju({name:"waveInArcAngle",inherits:!1,initialValue:"",interpolable:!0,syntax:zr.NUMBER});var r=e.coordinate;return function(i,o,a){var s=v(i,1)[0];if(!gK(r))return S1(t,e)(i,o,a);var u=s.__data__,c=s.style,l=c.radius,A=void 0===l?0:l,f=c.inset,d=void 0===f?0:f,h=c.fillOpacity,p=void 0===h?1:h,g=c.strokeOpacity,y=void 0===g?1:g,m=c.opacity,b=void 0===m?1:m,w=u.points,x=u.y,E=u.y1,B=pK().cornerRadius(A).padAngle(d*Math.PI/180),k=aV(r,w,[x,E]),O=k.startAngle,C=k.endAngle,M=[{waveInArcAngle:O+n,fillOpacity:0,strokeOpacity:0,opacity:0},{waveInArcAngle:O+n,fillOpacity:p,strokeOpacity:y,opacity:b,offset:.01},{waveInArcAngle:C,fillOpacity:p,strokeOpacity:y,opacity:b}],S=s.animate(M,Object.assign(Object.assign({},a),t));return S.onframe=function(){s.style.d=B(Object.assign(Object.assign({},k),{endAngle:Number(s.style.waveInArcAngle)}))},S.onfinish=function(){s.style.d=B(Object.assign(Object.assign({},k),{endAngle:C}))},S}};I1.props={};var N1=function(t){return function(e,n,r){var i=v(e,1)[0],o=i.style,a=o.fillOpacity,s=void 0===a?1:a,u=o.strokeOpacity,c=void 0===u?1:u,l=o.opacity,A=[{fillOpacity:0,strokeOpacity:0,opacity:0},{fillOpacity:s,strokeOpacity:c,opacity:void 0===l?1:l}];return i.animate(A,Object.assign(Object.assign({},r),t))}};N1.props={};var L1=function(t){return function(e,n,r){var i=v(e,1)[0],o=i.style,a=o.fillOpacity,s=void 0===a?1:a,u=o.strokeOpacity,c=void 0===u?1:u,l=o.opacity,A=[{fillOpacity:s,strokeOpacity:c,opacity:void 0===l?1:l},{fillOpacity:0,strokeOpacity:0,opacity:0}];return i.animate(A,Object.assign(Object.assign({},r),t))}};L1.props={};var _1=function(t){var e=1e-4;return function(n,r,i){var o=v(n,1)[0],a=o.style,s=a.transform,u=void 0===s?"":s,c=a.fillOpacity,l=void 0===c?1:c,A=a.strokeOpacity,f=void 0===A?1:A,d=a.opacity,h=void 0===d?1:d,p="center center",g=[{transform:"".concat(u," scale(").concat(e,")").trimStart(),transformOrigin:p,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:"".concat(u," scale(").concat(e,")").trimStart(),transformOrigin:p,fillOpacity:l,strokeOpacity:f,opacity:h,offset:.01},{transform:"".concat(u," scale(1)").trimStart(),transformOrigin:p,fillOpacity:l,strokeOpacity:f,opacity:h}];return o.animate(g,Object.assign(Object.assign({},i),t))}},Q1=function(t){var e=1e-4;return function(n,r,i){var o=v(n,1)[0],a=o.style,s=a.transform,u=void 0===s?"":s,c=a.fillOpacity,l=void 0===c?1:c,A=a.strokeOpacity,f=void 0===A?1:A,d=a.opacity,h=void 0===d?1:d,p="center center",g=[{transform:"".concat(u," scale(1)").trimStart(),transformOrigin:p},{transform:"".concat(u," scale(").concat(e,")").trimStart(),transformOrigin:p,fillOpacity:l,strokeOpacity:f,opacity:h,offset:.99},{transform:"".concat(u," scale(").concat(e,")").trimStart(),transformOrigin:p,fillOpacity:0,strokeOpacity:0,opacity:0}];return o.animate(g,Object.assign(Object.assign({},i),t))}},U1=function(t){return function(e,n,r){var i,o,a=v(e,1)[0],s=(null===(o=(i=a).getTotalLength)||void 0===o?void 0:o.call(i))||0,u=[{lineDash:[0,s]},{lineDash:[s,0]}];return a.animate(u,Object.assign(Object.assign({},r),t))}};U1.props={};var j1={opacity:1,strokeOpacity:1,fillOpacity:1,lineWidth:0,x:0,y:0,cx:0,cy:0,r:0,rx:0,ry:0,width:0,height:0},D1=m(m(m(m(m(m(m({},Jn.CIRCLE,["cx","cy","r"]),Jn.ELLIPSE,["cx","cy","rx","ry"]),Jn.RECT,["x","y","width","height"]),Jn.IMAGE,["x","y","width","height"]),Jn.LINE,["x1","y1","x2","y2"]),Jn.POLYLINE,["points"]),Jn.POLYGON,["points"]);function R1(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i={},o=qn(e);try{for(o.s();!(n=o.n()).done;){var a=n.value,s=t.style[a];s?i[a]=s:r&&(i[a]=j1[a])}}catch(t){o.e(t)}finally{o.f()}return i}var H1=["fill","stroke","fillOpacity","strokeOpacity","opacity","lineWidth"];function z1(t){var e=t.getLocalBounds(),n=e.min,r=e.max,i=v(n,2),o=i[0],a=i[1],s=v(r,2);return[o,a,s[0]-o,s[1]-a]}function K1(t){var e=v(t,4),n=e[0],r=e[1],i=e[2],o=e[3];return"\n    M ".concat(n," ").concat(r,"\n    L ").concat(n+i," ").concat(r,"\n    L ").concat(n+i," ").concat(r+o,"\n    L ").concat(n," ").concat(r+o,"\n    Z\n  ")}function G1(t,e){for(var n=v(z1(t),4),r=n[0],i=n[1],o=n[2],a=n[3],s=a/o,u=Math.ceil(Math.sqrt(e/s)),c=[],l=a/Math.ceil(e/u),A=0,f=e;f>0;){for(var d=Math.min(f,u),h=o/d,p=0;p<d;p++){var g=r+p*h,y=i+A*l;c.push(K1([g,y,h,l]))}f-=d,A+=1}return c}function V1(t,e){t.__data__=e.__data__,t.className=e.className,t.markType=e.markType,e.parentNode.replaceChild(t,e)}function W1(t,e){return t.indexOf(e)===t.lastIndexOf(e)}function Y1(t){var e=function(t){var e,n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.getLocalTransform(),o=[];switch(t.nodeName){case Jn.LINE:var a=t.parsedStyle,s=a.x1,u=void 0===s?0:s,c=a.y1,l=void 0===c?0:c,A=a.x2,f=void 0===A?0:A,d=a.y2;o=function(t,e,n,r){return[["M",t,e],["L",n,r]]}(u,l,f,void 0===d?0:d);break;case Jn.CIRCLE:var h=t.parsedStyle,p=h.r,g=void 0===p?0:p,y=h.cx,m=void 0===y?0:y,b=h.cy;o=jo(g,g,m,void 0===b?0:b);break;case Jn.ELLIPSE:var w=t.parsedStyle,x=w.rx,E=void 0===x?0:x,B=w.ry,k=void 0===B?0:B,C=w.cx,M=void 0===C?0:C,S=w.cy;o=jo(E,k,M,void 0===S?0:S);break;case Jn.POLYLINE:case Jn.POLYGON:e=t.parsedStyle.points.points,n=t.nodeName===Jn.POLYGON,r=e.map(function(t,e){return[0===e?"M":"L",t[0],t[1]]}),n&&r.push(["Z"]),o=r;break;case Jn.RECT:var F=t.parsedStyle,T=F.width,P=void 0===T?0:T,I=F.height,N=void 0===I?0:I,L=F.x,_=void 0===L?0:L,Q=F.y,U=void 0===Q?0:Q,D=F.radius,R=D&&D.some(function(t){return 0!==t});o=function(t,e,n,r,i){if(i){var o=v(i,4),a=o[0],s=o[1],u=o[2],c=o[3],l=t>0?1:-1,A=e>0?1:-1,f=l+A!==0?1:0;return[["M",l*a+n,r],["L",t-l*s+n,r],s?["A",s,s,0,0,f,t+n,A*s+r]:null,["L",t+n,e-A*u+r],u?["A",u,u,0,0,f,t+n-l*u,e+r]:null,["L",n+l*c,e+r],c?["A",c,c,0,0,f,n,e+r-A*c]:null,["L",n,A*a+r],a?["A",a,a,0,0,f,l*a+n,r]:null,["Z"]].filter(function(t){return t})}return[["M",n,r],["L",n+t,r],["L",n+t,r+e],["L",n,r+e],["Z"]]}(P,N,_,U,R&&D.map(function(t){return ge(t,0,Math.min(Math.abs(P)/2,Math.abs(N)/2))}));break;case Jn.PATH:o=O(t.parsedStyle.d.absolutePath)}if(o.length)return function(t,e,n){return t.reduce(function(t,e){var r="";if("M"===e[0]||"L"===e[0]){var i=j(e[1],e[2],0);n&&Y(i,i,n),r="".concat(e[0]).concat(i[0],",").concat(i[1])}else if("Z"===e[0])r=e[0];else if("C"===e[0]){var o=j(e[1],e[2],0),a=j(e[3],e[4],0),s=j(e[5],e[6],0);n&&(Y(o,o,n),Y(a,a,n),Y(s,s,n)),r="".concat(e[0]).concat(o[0],",").concat(o[1],",").concat(a[0],",").concat(a[1],",").concat(s[0],",").concat(s[1])}else if("A"===e[0]){var u=j(e[6],e[7],0);n&&Y(u,u,n),r="".concat(e[0]).concat(e[1],",").concat(e[2],",").concat(e[3],",").concat(e[4],",").concat(e[5],",").concat(u[0],",").concat(u[1])}else if("Q"===e[0]){var c=j(e[1],e[2],0),l=j(e[3],e[4],0);n&&(Y(c,c,n),Y(l,l,n)),r="".concat(e[0]).concat(e[1],",").concat(e[2],",").concat(e[3],",").concat(e[4],"}")}return t+r},"")}(o,0,i)}(t);if(e&&!function(t){return!W1(t,"m")||!W1(t,"M")}(e))return e}function X1(t){if("path"===t.nodeName){var e=Gb(t,"attributes");return e.markerEnd||e.markerStart}return!1}function q1(t,e,n,r){var i=e.nodeName,o=n.nodeName,a=Y1(e),s=Y1(n),u=e.style,c=u.opacity,l=void 0===c?1:c,A=u.strokeOpacity,f=void 0===A?1:A,d=u.fillOpacity,h=void 0===d?1:d,p=n.style,g=p.opacity,y=void 0===g?1:g,m=p.strokeOpacity,b=void 0===m?1:m,w=p.fillOpacity,x=void 0===w?1:w,E=i===o&&"path"!==i,B=void 0===a||void 0===s,k=X1(e)||X1(n);if(E||B||k)return function(t,e,n){var r=t.style.transform,i=e.style.transform;V1(e,t);var o=H1;if(t.nodeName===Jn.GROUP){var a=v(z1(t),4),s=a[0],u=a[1],c=a[2],l=a[3],A=v(z1(e),4),f=A[0],d=u-A[1],h=c/A[2],p=l/A[3];r="translate(".concat(s-f,", ").concat(d,") scale(").concat(h,", ").concat(p,")")}else o=o.concat(D1[t.nodeName]||[]);var g=[Object.assign({transform:null!=r?r:"none"},R1(t,o,!0)),Object.assign({transform:null!=i?i:"none"},R1(e,o,!0))];return e.animate(g,n)}(e,n,r);var O=function(t,e){if("path"===t.nodeName)return t;var n=new zu({style:Object.assign(Object.assign({},R1(t,H1)),{d:e})});return V1(n,t),n}(t,a),C=Object.assign(Object.assign({},R1(e,H1)),{opacity:l,strokeOpacity:f,fillOpacity:h}),M=Object.assign(Object.assign({},R1(n,H1)),{opacity:y,strokeOpacity:b,fillOpacity:x}),S=[C,M];if(a!==s){S[0].d=a,S[1].d=s;var F=O.animate(S,r);return F.onfinish=function(){fG(O,n),O.style.d=s,O.style.transform="none"},O.style.transform="none",F}return Xg(C,M)?null:O.animate(S,r)}var Z1=function(t){return function(e,n,r){var i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"pack";return"function"==typeof t?t:G1}(t.split),o=Object.assign(Object.assign({},r),t),a=e.length,s=n.length;if(1===a&&1===s||a>1&&s>1){var u=v(e,1)[0];return q1(u,u,v(n,1)[0],o)}return 1===a&&s>1?function(t,e,n,r){t.style.visibility="hidden";var i=r(t,e.length);return e.map(function(e,r){return q1(e,new zu({style:Object.assign({d:i[r]},R1(t,H1))}),e,n)})}(v(e,1)[0],n,o,i):a>1&&1===s?function(t,e,n,r){var i=r(e,t.length),o=e.style,a=o.fillOpacity,s=void 0===a?1:a,u=o.strokeOpacity,c=void 0===u?1:u,l=o.opacity,A=[{fillOpacity:0,strokeOpacity:0,opacity:0},{fillOpacity:0,strokeOpacity:0,opacity:0,offset:.99},{fillOpacity:s,strokeOpacity:c,opacity:void 0===l?1:l}],f=e.animate(A,n),d=t.map(function(t,r){return q1(t,t,new zu({style:{d:i[r],fill:e.style.fill}}),n)});return[].concat(O(d),[f])}(e,v(n,1)[0],o,i):null}};Z1.props={};var J1=function(t,e){return function(n,r,i){var o=v(n,1)[0],a=o.getLocalBounds(),s=v(a.min,2),u=s[0],c=s[1],l=a.halfExtents,A=2*l[0],f=2*l[1],d=new zu({style:{d:"M".concat(u,",").concat(c,"L").concat(u+A,",").concat(c,"L").concat(u+A,",").concat(c+f,"L").concat(u,",").concat(c+f,"Z")}});return o.appendChild(d),o.style.clipPath=d,S1(t,e)([d],r,i)}};J1.props={};var $1=function(t,e){return function(n,r,i){var o=v(n,1)[0],a=o.getLocalBounds(),s=v(a.min,2),u=s[0],c=s[1],l=a.halfExtents,A=2*l[0],f=2*l[1],d=new zu({style:{d:"M".concat(u,",").concat(c,"L").concat(u+A,",").concat(c,"L").concat(u+A,",").concat(c+f,"L").concat(u,",").concat(c+f,"Z")}});return o.appendChild(d),o.style.clipPath=d,T1(t,e)([d],r,i)}};$1.props={};var t2=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function e2(t){var e=t.delay,n=t.createGroup,r=t.createRegionGroup,i=t.background,o=void 0!==i&&i,a=t.link,s=void 0!==a&&a,u=t2(t,["delay","createGroup","createRegionGroup","background","link"]);return function(t,i,a){var c=t.container,l=t.view,A=t.options,f=l.scale,d=l.coordinate;return function(t,e){var n,r,i,o=e.elements,a=e.datum,s=e.groupKey,u=void 0===s?function(t){return t}:s,c=e.regionGroupKey,l=void 0===c?function(t){return t}:c,A=e.link,f=void 0!==A&&A,d=e.background,h=void 0!==d&&d,p=e.delay,g=void 0===p?60:p,y=e.scale,m=e.coordinate,b=e.emitter,w=e.state,x=void 0===w?{}:w,E=e.region,B=void 0!==E&&E,k=e.regionEleFilter,O=void 0===k?function(t){return C0.includes(t.markType)}:k,C=null!==(n=o(t))&&void 0!==n?n:[],M=B?C.filter(O):C,S=new Set(M),F=B?l:u,T=TK(M,F),P=M0({elementsof:o,root:t,coordinate:m,scale:y}),I=g0(M,a),N=v(y0(Object.assign({elements:M,valueof:I,link:f,coordinate:m},hG(x.active,"link"))),2),L=N[0],_=N[1],Q=v(b0(Object.assign({document:t.ownerDocument,scale:y,coordinate:m,background:h,valueof:I},hG(x.active,"background"))),3),U=Q[0],j=Q[1],D=Q[2],R=Xm(x,{active:Object.assign({},(null===(r=x.active)||void 0===r?void 0:r.offset)&&{transform:function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=(t=x.active).offset.apply(t,n),o=n[1];return m0(M[o],i,m)}})}),H=d0(R,M)(I),z=H.updateState,K=H.removeState,G=H.hasState,V=function(t){var e=t.nativeEvent,n=void 0===e||e,r=t.target;if(B&&(r=P(t)),S.has(r)){i&&clearTimeout(i);var o,s=F(r),u=T.get(s),c=new Set(u),l=qn(M);try{for(l.s();!(o=l.n()).done;){var A=o.value;c.has(A)?G(A,"active")||z(A,"active"):(z(A,"inactive"),_(A)),A!==r&&j(A)}}catch(t){l.e(t)}finally{l.f()}U(r),L(u),n&&b.emit("element:highlight",{nativeEvent:n,data:{data:a(r),group:u.map(a)}})}},W=function(){i&&clearTimeout(i),i=setTimeout(function(){Y(),i=null},g)},Y=function(){var t,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=qn(M);try{for(n.s();!(t=n.n()).done;){var r=t.value;K(r,"active","inactive"),j(r),_(r)}}catch(t){n.e(t)}finally{n.f()}e&&b.emit("element:unhighlight",{nativeEvent:e})},X=function(t){var e=t.target;B&&(e=P(t)),e?h&&!D(e)||(h||S.has(e))&&(g>0?W():Y()):g>0?W():Y()},q=function(){Y()};t.addEventListener("pointerover",V),t.addEventListener("pointermove",V),t.addEventListener("pointerout",X),t.addEventListener("pointerleave",q);var Z=function(t){t.nativeEvent||Y(!1)},J=function(t){if(!t.nativeEvent){var e=t.data.data,n=x0(M,e,a);n&&V({target:n,nativeEvent:!1})}};return b.on("element:highlight",J),b.on("element:unhighlight",Z),function(){t.removeEventListener("pointerover",V),t.removeEventListener("pointermove",V),t.removeEventListener("pointerout",X),t.removeEventListener("pointerleave",q),b.off("element:highlight",J),b.off("element:unhighlight",Z);var e,n=qn(M);try{for(n.s();!(e=n.n()).done;){var r=e.value;j(r),_(r)}}catch(t){n.e(t)}finally{n.f()}}}(r0(c),Object.assign({elements:t0,datum:c0(l),groupKey:n?n(l):void 0,regionGroupKey:r?r(l):function(t){return t.__data__.x},coordinate:d,scale:f,state:v0(A,[["active",o?{}:{lineWidth:"1",stroke:"#000"}],"inactive"]),background:o,link:s,delay:e,emitter:a},u))}}function n2(t){return e2(Object.assign(Object.assign({},t),{createGroup:u0}))}function r2(t){return e2(Object.assign(Object.assign({},t),{createGroup:s0}))}e2.props={reapplyWhenUpdate:!0},n2.props={reapplyWhenUpdate:!0},r2.props={reapplyWhenUpdate:!0};var i2=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function o2(t){var e=t.delay,n=t.createGroup,r=t.scale,i=t.scaleOrigin,o=t.shadow,a=t.shadowColor,s=t.shadowBlur,u=t.shadowOffsetX,c=t.shadowOffsetY,l=t.zIndex,A=i2(t,["delay","createGroup","scale","scaleOrigin","shadow","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","zIndex"]);return function(t,f,d){var h=t.container,p=t.view,v=t.options,g=r0(h),y=c0(p);return function(t,e){var n,r=e.elements,i=e.datum,o=e.groupKey,a=void 0===o?function(t){return t}:o,s=e.scaleFactor,u=void 0===s?1.04:s,c=e.scaleOrigin,l=void 0===c?"center center":c,A=e.shadow,f=void 0===A||A,d=e.shadowColor,h=void 0===d?"rgba(0, 0, 0, 0.4)":d,p=e.shadowBlur,v=void 0===p?10:p,g=e.shadowOffsetX,y=void 0===g?0:g,m=e.shadowOffsetY,b=void 0===m?2:m,w=e.zIndex,x=void 0===w?10:w,E=e.delay,B=void 0===E?60:E,k=e.emitter,O=e.state,C=void 0===O?{}:O,M=function(){var e;return null!==(e=r(t))&&void 0!==e?e:[]},S=M(),F=g0(S,i),T=d0(Xm(C,{active:{}}),S)(F),P=T.updateState,I=T.removeState,N=T.hasState,L=new Map,_=new Set,Q=function(t){if(!_.has(t)){var e=t.style.transform||"",n=t.style.transformOrigin||"";L.set(t,{transform:e,transformOrigin:n,zIndex:t.style.zIndex||0,shadowColor:t.style.shadowColor||"",shadowBlur:t.style.shadowBlur||0,shadowOffsetX:t.style.shadowOffsetX||0,shadowOffsetY:t.style.shadowOffsetY||0});var r,i=e&&"none"!==e?e:"",o="scale(".concat(u,")");r=i&&!i.includes("scale")?"".concat(i," ").concat(o).trimStart():i&&i.includes("scale")?i.replace(/scale\([^)]+\)/g,o).trimStart():o,t.style.transformOrigin=l,t.style.transform=r,t.style.zIndex=x,f&&(t.style.shadowColor=h,t.style.shadowBlur=v,t.style.shadowOffsetX=y,t.style.shadowOffsetY=b),_.add(t)}},U=function(t){var e=L.get(t);e&&(t.style.transform=e.transform,t.style.transformOrigin=e.transformOrigin,t.style.zIndex=e.zIndex,t.style.shadowColor=e.shadowColor,t.style.shadowBlur=e.shadowBlur,t.style.shadowOffsetX=e.shadowOffsetX,t.style.shadowOffsetY=e.shadowOffsetY,_.delete(t),L.delete(t))},j=function(t){var e=t.nativeEvent,r=void 0===e||e,o=t.target,s=M();if(new Set(s).has(o)){n&&clearTimeout(n);var u=TK(s,a),c=a(o),l=u.get(c);if(l){var A,f=new Set(l),d=qn(s);try{for(d.s();!(A=d.n()).done;){var h=A.value;f.has(h)||(I(h,"active"),U(h))}}catch(t){d.e(t)}finally{d.f()}var p,v=qn(l);try{for(v.s();!(p=v.n()).done;){var g=p.value;N(g,"active")||P(g,"active"),Q(g)}}catch(t){v.e(t)}finally{v.f()}r&&k.emit("element:hoverscale",{nativeEvent:r,data:{data:i(o),group:l.map(i)}})}}},D=function(){var t,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=qn(M());try{for(n.s();!(t=n.n()).done;){var r=t.value;I(r,"active"),U(r)}}catch(t){n.e(t)}finally{n.f()}_.clear(),e&&k.emit("element:unhoverscale",{nativeEvent:e})},R=function(t){B>0?(n&&clearTimeout(n),n=setTimeout(function(){D(),n=null},B)):D()},H=function(){D()};t.addEventListener("pointerover",j),t.addEventListener("pointermove",j),t.addEventListener("pointerout",R),t.addEventListener("pointerleave",H);var z=function(t){t.nativeEvent||D(!1)},K=function(t){if(!t.nativeEvent){var e=t.data.data,n=x0(M(),e,i);n&&j({target:n,nativeEvent:!1})}};return k.on("element:hoverscale",K),k.on("element:unhoverscale",z),function(){t.removeEventListener("pointerover",j),t.removeEventListener("pointermove",j),t.removeEventListener("pointerout",R),t.removeEventListener("pointerleave",H),k.off("element:hoverscale",K),k.off("element:unhoverscale",z);var e,n=qn(M());try{for(n.s();!(e=n.n()).done;){var r=e.value;U(r)}}catch(t){n.e(t)}finally{n.f()}L.clear(),_.clear()}}(g,Object.assign({elements:t0,datum:y,groupKey:n?function(t){return n(p)(y(t))}:void 0,state:v0(v,["active"]),scaleFactor:r,scaleOrigin:i,shadow:o,shadowColor:a,shadowBlur:s,shadowOffsetX:u,shadowOffsetY:c,zIndex:l,delay:e,emitter:d},A))}}o2.props={reapplyWhenUpdate:!0};var a2=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function s2(t){var e=t.createGroup,n=t.createRegionGroup,r=t.background,i=void 0!==r&&r,o=t.link,a=void 0!==o&&o,s=a2(t,["createGroup","createRegionGroup","background","link"]);return function(t,r,o){var u=t.container,c=t.view,l=t.options,A=c.coordinate,f=c.scale;return function(t,e){var n,r=e.elements,i=e.datum,o=e.groupKey,a=void 0===o?function(t){return t}:o,s=e.regionGroupKey,u=void 0===s?function(t){return t}:s,c=e.link,l=void 0!==c&&c,A=e.single,f=void 0!==A&&A,d=e.multipleSelectHotkey,h=e.coordinate,p=e.background,g=void 0!==p&&p,y=e.scale,m=e.emitter,b=e.state,w=void 0===b?{}:b,x=e.region,E=void 0!==x&&x,B=e.regionEleFilter,k=void 0===B?function(t){return C0.includes(t.markType)}:B,C=r(t),M=new Set(C),S=M0({elementsof:r,root:t,coordinate:h,scale:y}),F=TK(C,a),T=TK(C,u),P=g0(C,i),I=v(y0(Object.assign({link:l,elements:C,valueof:P,coordinate:h},hG(w.selected,"link"))),2),N=I[0],L=I[1],_=v(b0(Object.assign({document:t.ownerDocument,background:g,coordinate:h,scale:y,valueof:P},hG(w.selected,"background"))),2),Q=_[0],U=_[1],j=Xm(w,{selected:Object.assign({},(null===(n=w.selected)||void 0===n?void 0:n.offset)&&{transform:function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=(t=w.selected).offset.apply(t,n),o=n[1];return m0(C[o],i,h)}})}),D=d0(j,C)(P),R=D.updateState,H=D.removeState,z=D.hasState,K=!f,G=null,V=function(){var t,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=qn(C);try{for(n.s();!(t=n.n()).done;){var r=t.value;H(r,"selected","unselected"),L(r),U(r)}}catch(t){n.e(t)}finally{n.f()}e&&m.emit("element:unselect",{nativeEvent:!0})},W=function(t){var e=t.event,n=t.element,r=t.nativeEvent,o=void 0===r||r,s=t.filter,u=void 0===s?function(t){return!0}:s,c=t.groupBy,l=void 0===c?a:c,A=t.groupMap,f=void 0===A?F:A,d=C.filter(u);if(z(n,"selected"))V();else{var h,p=l(n),v=f.get(p),g=new Set(v),y=qn(d);try{for(y.s();!(h=y.n()).done;){var b=h.value;g.has(b)?R(b,"selected"):(R(b,"unselected"),L(b)),b!==n&&U(b)}}catch(t){y.e(t)}finally{y.f()}if(N(v),Q(n),!o)return;m.emit("element:select",Object.assign(Object.assign({},e),{nativeEvent:o,data:{data:[i(n)].concat(O(v.map(i)))}}))}},Y=function(t){var e=t.event,n=t.element,r=t.nativeEvent,o=void 0===r||r,s=t.filter,u=void 0===s?function(t){return!0}:s,c=t.groupBy,A=void 0===c?a:c,f=t.groupMap,d=void 0===f?F:f,h=A(n),p=d.get(h),v=new Set(p),g=C.filter(u);if(z(n,"selected")){var y=C.some(function(t){return!v.has(t)&&z(t,"selected")});if(!y)return V();var b,w=qn(p);try{for(w.s();!(b=w.n()).done;){var x=b.value;R(x,"unselected"),L(x),U(x)}}catch(t){w.e(t)}finally{w.f()}}else{var E,B=p.some(function(t){return z(t,"selected")}),k=qn(g);try{for(k.s();!(E=k.n()).done;){var O=E.value;v.has(O)?R(O,"selected"):z(O,"selected")||R(O,"unselected")}}catch(t){k.e(t)}finally{k.f()}!B&&l&&N(p),Q(n)}o&&m.emit("element:select",Object.assign(Object.assign({},e),{nativeEvent:o,data:{data:C.filter(function(t){return z(t,"selected")}).map(i)}}))},X=function(t){if(M.has(t))return t;var e,n=qn(M);try{var r,i=function(){var n=e.value,r=null;if(W$(n,function(e){e===t&&(r=n)}),r)return{v:r}};for(n.s();!(e=n.n()).done;)if(r=i())return r.v}catch(t){n.e(t)}finally{n.f()}return t},q=function(t){var e=t.target,n=t.nativeEvent,r=void 0===n||n,i=K?Y:W,o=e,s=function(t){if(M.has(t))return!0;var e,n=qn(M);try{for(n.s();!(e=n.n()).done;)if(W$(e.value,function(e){return e===t}))return!0}catch(t){n.e(t)}finally{n.f()}return!1}(e);return!E||s?s?i({event:t,element:X(o),nativeEvent:r,groupBy:a}):V():(o=S(t),M.has(o)?i({event:t,element:o,nativeEvent:r,filter:k,groupBy:u,groupMap:T}):V())},Z=Array.isArray(d)?d:[d],J=function(t){Z.includes(t.code)&&!G&&(G=t.code,K=!0)},$=function(t){t.code===G&&(G=null,K=!1)};t.addEventListener("click",q),d&&(K=!1,document.addEventListener("keydown",J),document.addEventListener("keyup",$));var tt=function(t){var e=t.nativeEvent,n=t.data;if(!e){var r,o=qn(K?n.data:n.data.slice(0,1));try{for(o.s();!(r=o.n()).done;){var a=r.value,s=x0(C,a,i);q({target:s,nativeEvent:!1})}}catch(t){o.e(t)}finally{o.f()}}},et=function(){V(!1)};return m.on("element:select",tt),m.on("element:unselect",et),function(){var e,n=qn(C);try{for(n.s();!(e=n.n()).done;){var r=e.value;L(r)}}catch(t){n.e(t)}finally{n.f()}t.removeEventListener("click",q),d&&(document.removeEventListener("keydown",J),document.removeEventListener("keyup",$)),m.off("element:select",tt),m.off("element:unselect",et)}}(r0(u),Object.assign({elements:t0,datum:c0(c),groupKey:e?e(c):void 0,regionGroupKey:n?n(c):function(t){return t.__data__.x},coordinate:A,scale:f,state:v0(l,[["selected",i?{}:{lineWidth:"1",stroke:"#000"}],"unselected"]),background:i,link:a,emitter:o},s))}}function u2(t){return s2(Object.assign(Object.assign({},t),{createGroup:u0}))}function c2(t){return s2(Object.assign(Object.assign({},t),{createGroup:s0}))}function l2(t){var e=t.wait,n=void 0===e?30:e,r=t.leading,i=t.trailing,o=void 0!==i&&i;return function(t){t.options;var e=t.update,i=t.setState,a=r0(t.container),s=Iy(function(t){var n=o0(a,t);if(!n)return i("fisheye"),void e();i("fisheye",function(t){var e,r=Xm({},t,{interaction:{tooltip:{preserve:!0}}}),i=qn(r.marks);try{for(i.s();!(e=i.n()).done;)e.value.animate=!1}catch(t){i.e(t)}finally{i.f()}var o=v(n,2),a=o[0],s=o[1],u=function(t){var e=t.coordinate,n=void 0===e?{}:e,r=n.transform,i=void 0===r?[]:r,o=i.find(function(t){return"fisheye"===t.type});if(o)return o;var a={type:"fisheye"};return i.push(a),n.transform=i,t.coordinate=n,a}(r);return u.focusX=a,u.focusY=s,u.visual=!0,r}),e()},n,{leading:r,trailing:o});return a.addEventListener("pointerenter",s),a.addEventListener("pointermove",s),a.addEventListener("pointerleave",s),function(){a.removeEventListener("pointerenter",s),a.removeEventListener("pointermove",s),a.removeEventListener("pointerleave",s)}}}s2.props={reapplyWhenUpdate:!0},u2.props={reapplyWhenUpdate:!0},c2.props={reapplyWhenUpdate:!0};var A2=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())})},f2=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function d2(t){var e=t.transform,n=void 0===e?[]:e,r=n.find(function(t){return"normalizeY"===t.type});if(r)return r;var i={type:"normalizeY"};return n.push(i),t.transform=n,i}function h2(t){var e=this,n=t.wait,r=void 0===n?20:n,i=t.leading,o=t.trailing,a=void 0!==o&&o,s=t.labelFormatter,u=void 0===s?function(t){return"".concat(t)}:s,c=f2(t,["wait","leading","trailing","labelFormatter"]);return function(t){var n=t.view,o=t.container,s=t.update,l=t.setState,A=n.markState,f=n.scale,d=n.coordinate,h=function(t,e,n){var r=Array.from(t.entries()).filter(function(t){return"line"===v(t,1)[0].type}).map(function(t){var e=v(t,1)[0].encode;return Object.fromEntries(n.map(function(t){var n=e[t];return[t,n?n.value:void 0]}))});return v(r,1)[0]}(A,0,["x","y","series"]);if(h){var p=h.y,g=h.x,y=h.series,m=void 0===y?[]:y,b=p.map(function(t,e){return e}),w=v$(b.map(function(t){return g[t]})),x=r0(o),E=o.getElementsByClassName(B$),B=TK(o.getElementsByClassName(M$),function(t){return t.__data__.key.split("-")[0]}),k=new Ru({style:Object.assign({x1:0,y1:0,x2:0,y2:x.getAttribute("height"),stroke:"black",lineWidth:1},hG(c,"rule"))}),O=new qu({style:Object.assign({x:0,y:x.getAttribute("height"),text:"",fontSize:10},hG(c,"label"))});k.append(O),x.appendChild(k);var C,M=function(t,e,n){var r=v(t.invert(n),1)[0],i=e.invert(r);return w[j$(w,i)]},S=function(t,e){k.setAttribute("x1",t[0]),k.setAttribute("x2",t[0]),O.setAttribute("text",u(e))},F=Iy(function(t){var e=o0(x,t);e&&function(t){var e=C,n=e.scale,r=e.coordinate,i=n.x,o=n.y,a=M(r,i,t);S(t,a);var s,u=qn(E);try{for(u.s();!(s=u.n()).done;){var c=s.value,l=c.__data__,A=l.seriesIndex,f=l.key,d=A[b$(function(t){return g[+t]}).center(A,a)],h=[0,o.map(1)],y=[0,o.map(p[d]/p[A[0]])],m=v(r.map(h),2)[1]-v(r.map(y),2)[1];c.setAttribute("transform","translate(0, ".concat(m,")"));var b,w=qn(B.get(f)||[]);try{for(w.s();!(b=w.n()).done;)b.value.setAttribute("dy",m)}catch(t){w.e(t)}finally{w.f()}}}catch(t){u.e(t)}finally{u.f()}}(e)},r,{leading:i,trailing:a});return function(t){A2(e,void 0,void 0,(0,Dn.A)().m(function e(){var n,r,i;return(0,Dn.A)().w(function(e){for(;;)switch(e.n){case 0:return n=f.x,r=M(d,n,t),S(t,r),l("chartIndex",function(t){var e=Xm({},t),n=e.marks.find(function(t){return"line"===t.type}),i=Bq(IK(b,function(t){return Bq(t,function(t){return+p[t]})/Eq(t,function(t){return+p[t]})},function(t){return m[t]}).values());Xm(n,{scale:{y:{domain:[1/i,i]}}});var o=d2(n);o.groupBy="color",o.basis=function(t,e){return e[t[b$(function(t){return g[+t]}).center(t,r)]]};var a,s=qn(e.marks);try{for(s.s();!(a=s.n()).done;)a.value.animate=!1}catch(t){s.e(t)}finally{s.f()}return e}),e.n=1,s("chartIndex");case 1:i=e.v,C=i.view;case 2:return e.a(2)}},e)}))}([0,0]),x.addEventListener("pointerenter",F),x.addEventListener("pointermove",F),x.addEventListener("pointerleave",F),function(){k.remove(),x.removeEventListener("pointerenter",F),x.removeEventListener("pointermove",F),x.removeEventListener("pointerleave",F)}}}}function p2(t,e){var n,r=-1,i=-1;if(void 0===e){var o,a=qn(t);try{for(a.s();!(o=a.n()).done;){var s=o.value;++i,null!=s&&(n>s||void 0===n&&s>=s)&&(n=s,r=i)}}catch(t){a.e(t)}finally{a.f()}}else{var u,c=qn(t);try{for(c.s();!(u=c.n()).done;){var l=u.value;null!=(l=e(l,++i,t))&&(n>l||void 0===n&&l>=l)&&(n=l,r=i)}}catch(t){c.e(t)}finally{c.f()}}return r}function v2(t,e){var n=0,r=0;if(void 0===e){var i,o=qn(t);try{for(o.s();!(i=o.n()).done;){var a=i.value;null!=a&&(a=+a)>=a&&(++n,r+=a)}}catch(t){o.e(t)}finally{o.f()}}else{var s,u=-1,c=qn(t);try{for(c.s();!(s=c.n()).done;){var l=s.value;null!=(l=e(l,++u,t))&&(l=+l)>=l&&(++n,r+=l)}}catch(t){c.e(t)}finally{c.f()}}if(n)return r/n}function g2(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(mG(t))return t;if(Array.isArray(t)&&r)return t;var i=hG(t,e);return Xm(n,i)}function y2(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return mG(t)||Array.isArray(t)?t:m2(t)?Xm(e,t):t}function m2(t){if(0===Object.keys(t).length)return!0;var e=t.title,n=t.items;return void 0!==e||void 0!==n}function b2(t,e){return"object"==typeof t?hG(t,e):t}h2.props={reapplyWhenUpdate:!0};function w2(t,e,n,r){var i=t.radar,o=v(r,1)[0].getOptions().name,a=v(BK(n),2),s=a[0],u=a[1],c=e.axisRadar,l=void 0===c?{}:c;return Object.assign(Object.assign({},l),{grid:"position"===o,gridConnect:"line",gridControlAngles:new Array(i.count).fill(0).map(function(t,e){return(u-s)/i.count*e})})}var x2=function(t){var e=t.important,n=void 0===e?{}:e,r=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["important"]);return function(e){var i=e.theme,o=e.coordinate,a=e.scales;return A$(Object.assign(Object.assign(Object.assign({},r),function(t){var e=t%(2*Math.PI);return e===Math.PI/2?{titleTransform:"translate(0, 50%)"}:e>-Math.PI/2&&e<Math.PI/2?{titleTransform:"translate(50%, 0)"}:e>Math.PI/2&&e<3*Math.PI/2?{titleTransform:"translate(-50%, 0)"}:{}}(t.orientation)),{important:Object.assign(Object.assign({},w2(t,i,o,a)),n)}))(e)}};x2.props=Object.assign(Object.assign({},A$.props),{defaultPosition:"center"});var E2=function(t){return function(){return p1(Object.assign({},{block:!0},t)).apply(void 0,arguments)}};E2.props=Object.assign(Object.assign({},p1.props),{defaultPosition:"top",defaultOrientation:"horizontal"});var B2=function(t){return function(e){var n=t$(e.scales,"size");return p1(Object.assign({},{type:"size",data:n.getTicks().map(function(t,e){return{value:t,label:String(t)}})},t))(e)}};B2.props=Object.assign(Object.assign({},p1.props),{defaultPosition:"top",defaultOrientation:"horizontal"});var k2=function(t){return B2(Object.assign({},{block:!0},t))};k2.props=Object.assign(Object.assign({},p1.props),{defaultPosition:"top",defaultOrientation:"horizontal"});var O2=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).static,e=void 0!==t&&t;return function(t){var n=t.width,r=t.height,i=t.depth,o=t.paddingLeft,a=t.paddingRight,s=t.paddingTop,u=t.paddingBottom,c=t.padding,l=t.inset,A=t.insetLeft,f=t.insetTop,d=t.insetRight,h=t.insetBottom,p=t.margin,v=t.marginLeft,g=t.marginBottom,y=t.marginTop,m=t.marginRight,b=t.data,w=t.coordinate,x=t.theme,E=t.component,B=t.interaction,k=t.x,O=t.y,C=t.z,M=t.key,S=t.frame,F=t.labelTransform,T=t.parentKey,P=t.clip,I=t.viewStyle,N=t.title,L=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["width","height","depth","paddingLeft","paddingRight","paddingTop","paddingBottom","padding","inset","insetLeft","insetTop","insetRight","insetBottom","margin","marginLeft","marginBottom","marginTop","marginRight","data","coordinate","theme","component","interaction","x","y","z","key","frame","labelTransform","parentKey","clip","viewStyle","title"]);return[Object.assign(Object.assign({type:"standardView",x:k,y:O,z:C,key:M,width:n,height:r,depth:i,padding:c,paddingLeft:o,paddingRight:a,paddingTop:s,inset:l,insetLeft:A,insetTop:f,insetRight:d,insetBottom:h,paddingBottom:u,theme:x,coordinate:w,component:E,interaction:B,frame:S,labelTransform:F,margin:p,marginLeft:v,marginBottom:g,marginTop:y,marginRight:m,parentKey:T,clip:P,style:I},!e&&{title:N}),{marks:[Object.assign(Object.assign(Object.assign({},L),{key:"".concat(M,"-0"),data:b}),e&&{title:N})]})]}};O2.props={};function C2(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Xm({},t.apply(void 0,[e].concat(r)),e)}}function M2(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Xm({},e,t.apply(void 0,[e].concat(r)))}}function S2(t,e){if(!t)return e;if(Array.isArray(t))return t;if(function(t){return!(t instanceof Date)&&"object"==typeof t}(t)){var n=t.value,r=void 0===n?e:n,i=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["value"]);return Object.assign(Object.assign({},i),{value:r})}return t}var F2=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},T2=function(){return function(t){var e=t.children,n=F2(t,["children"]);if(!Array.isArray(e))return[];var r=n.data,i=n.scale,o=void 0===i?{}:i,a=n.axis,s=void 0===a?{}:a,u=n.legend,c=void 0===u?{}:u,l=n.encode,A=void 0===l?{}:l,f=n.transform,d=void 0===f?[]:f,h=n.slider,p=void 0===h?{}:h,v=F2(n,["data","scale","axis","legend","encode","transform","slider"]),g=e.map(function(t){var e=t.data,n=t.scale,i=void 0===n?{}:n,a=t.axis,u=void 0===a?{}:a,l=t.legend,f=void 0===l?{}:l,h=t.encode,v=void 0===h?{}:h,g=t.transform,y=void 0===g?[]:g,m=t.slider,b=void 0===m?{}:m,w=F2(t,["data","scale","axis","legend","encode","transform","slider"]);return Object.assign({data:S2(e,r),scale:Xm({},o,i),encode:Xm({},A,v),transform:[].concat(O(d),O(y)),axis:!(!u||!s)&&Xm({},s,u),legend:!(!f||!c)&&Xm({},c,f),slider:Xm({},p,b)},w)});return[Object.assign(Object.assign({},v),{marks:g,type:"standardView",slider:p})]}};function P2(t,e){var n,r=-1,i=-1;if(void 0===e){var o,a=qn(t);try{for(a.s();!(o=a.n()).done;){var s=o.value;++i,null!=s&&(n<s||void 0===n&&s>=s)&&(n=s,r=i)}}catch(t){a.e(t)}finally{a.f()}}else{var u,c=qn(t);try{for(c.s();!(u=c.n()).done;){var l=u.value;null!=(l=e(l,++i,t))&&(n<l||void 0===n&&l>=l)&&(n=l,r=i)}}catch(t){c.e(t)}finally{c.f()}}return r}function I2(t,e,n,r){var i=e.length/2,o=e.slice(0,i),a=e.slice(i),s=P2(o,function(t,e){return Math.abs(t[1]-a[e][1])}),u=function(t){return[o[t][0],(o[t][1]+a[t][1])/2]},c=u(s=Math.max(Math.min(s,i-2),1)),l=u(s-1),A=OG(EG(u(s+1),l))/Math.PI*180;return{x:c[0],y:c[1],transform:"rotate(".concat(A,")"),textAlign:"center",textBaseline:"middle"}}function N2(t,e,n,r){var i,o,a,s,u,c=v(n.bounds,2),l=v(c[0],2),A=l[0],f=l[1],d=v(c[1],2),h=d[0],p=d[1],g=h-A,y=p-f;return o=(i="left"===t?{x:0,y:y/2,textAlign:"start",textBaseline:"middle"}:"right"===t?{x:g,y:y/2,textAlign:"end",textBaseline:"middle"}:"top"===t?{x:g/2,y:0,textAlign:"center",textBaseline:"top"}:"bottom"===t?{x:g/2,y,textAlign:"center",textBaseline:"bottom"}:"top-left"===t?{x:0,y:0,textAlign:"start",textBaseline:"top"}:"top-right"===t?{x:g,y:0,textAlign:"end",textBaseline:"top"}:"bottom-left"===t?{x:0,y,textAlign:"start",textBaseline:"bottom"}:"bottom-right"===t?{x:g,y,textAlign:"end",textBaseline:"bottom"}:{x:g/2,y:y/2,textAlign:"center",textBaseline:"middle"}).x,a=i.y,s=gG(n.x,g),u=gG(n.y,y),Object.assign(Object.assign({},i),{x:(s||o)+A,y:(u||a)+f})}function L2(t,e,n,r){var i,o,a,s,u=n.y,c=n.y1,l=n.autoRotate,A=n.rotateToAlignArc,f=r.getCenter(),d=aV(r,e,[u,c]),h=d.innerRadius,p=d.outerRadius,g=d.startAngle,y=d.endAngle,m="inside"===t?(g+y)/2:y,b=Q2(m,l,A),w=(o=(i=v(e,2))[0],a=i[1],{x:(s=v("inside"===t?_2(f,m,h+.5*(p-h)):FG(o,a),2))[0],y:s[1]});return Object.assign(Object.assign({},w),{textAlign:"inside"===t?"center":"start",textBaseline:"middle",rotate:b})}function _2(t,e,n){return[t[0]+Math.sin(e)*n,t[1]-Math.cos(e)*n]}function Q2(t,e,n){if(!e)return 0;var r=n?0:Math.sin(t)<0?90:-90;return t/Math.PI*180+r}function U2(t,e,n,r){var i=n.y,o=n.y1,a=n.autoRotate,s=n.rotateToAlignArc,u=n.radius,c=void 0===u?.5:u,l=n.offset,A=void 0===l?0:l,f=aV(r,e,[i,o]),d=f.startAngle,h=f.endAngle,p=r.getCenter(),g=(d+h)/2,y={textAlign:"center",textBaseline:"middle",rotate:Q2(g,a,s)},m=f.innerRadius,b=v(_2(p,g,m+(f.outerRadius-m)*c+A),2),w=b[0],x=b[1];return Object.assign({x:w,y:x},y)}function j2(t){return void 0===t?null:t}function D2(t,e,n,r){var i=v(n.bounds,1)[0];return{x:j2(i[0]),y:j2(i[1])}}function R2(t,e,n,r){return 1===n.bounds.length?D2(0,0,n):(yK(r)?L2:xK(r)?U2:N2)(t,e,n,r)}function H2(t,e,n){var r=aV(n,t,[e.y,e.y1]),i=r.innerRadius;return i+(r.outerRadius-i)}function z2(t,e,n){var r=aV(n,t,[e.y,e.y1]);return(r.startAngle+r.endAngle)/2}function K2(t,e,n,r){var i=n.autoRotate,o=n.rotateToAlignArc,a=n.offset,s=void 0===a?0:a,u=n.connector,c=void 0===u||u,l=n.connectorLength,A=void 0===l?s:l,f=n.connectorLength2,d=void 0===f?0:f,h=n.connectorDistance,p=void 0===h?0:h,g=r.getCenter(),y=z2(e,n,r),m=Math.sin(y)>0?1:-1,b=Q2(y,i,o),w={textAlign:m>0||yK(r)?"start":"end",textBaseline:"middle",rotate:b},x=H2(e,n,r),E=function(t,e,n,r,i){var o=v(_2(t,e,n),2),a=o[0],s=o[1],u=v(_2(t,e,r),2),c=u[0],l=u[1];return[[a,s],[c,l],[c+(Math.sin(e)>0?1:-1)*i,l]]}(g,y,x,x+(c?A:s),c?d:0),B=v(E,3),k=v(B[0],2),O=k[0],C=k[1],M=v(B[1],2),S=M[0],F=M[1],T=v(B[2],2),P=T[0],I=T[1],N=c?+p*m:0,L=P+N,_={connector:c,connectorPoints:[[S-L,F-I],[P-L,I-I]]};return Object.assign(Object.assign({x0:O,y0:C,x:P+N,y:I},w),_)}function G2(t,e,n,r){return 1===n.bounds.length?D2(0,0,n):(yK(r)?L2:xK(r)?K2:N2)(t,e,n,r)}function V2(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.labelHeight,r=void 0===n?14:n,i=e.height,o=v$(t,function(t){return t.y}),a=o.length,s=new Array(a),u=0;u<a;u++){var c=o[u].y;s[u]={y:c,y1:c+r,labels:[c]}}for(var l=!0;l;){l=!1;for(var A=s.length-1;A>0;A--){var f=s[A],d=s[A-1];if(d.y1>f.y){var h;l=!0,(h=d.labels).push.apply(h,O(f.labels)),s.splice(A,1),d.y1+=f.y1-f.y;var p=d.y1-d.y;d.y1=Math.max(Math.min(d.y1,i),p),d.y=d.y1-p}}}for(var v=0,g=0,y=s;g<y.length;g++){var m,b=y[g],w=b.y-r,x=qn(b.labels);try{for(x.s();!(m=x.n()).done;){var E=m.value,B=o[v++],k=w+r-E;B.connectorPoints[0][1]-=k,B.y=w+r,w+=r}}catch(t){x.e(t)}finally{x.f()}}}function W2(t,e){var n=v$(t,function(t){return t.y}),r=e.height,i=e.labelHeight,o=void 0===i?14:i,a=Math.ceil(r/o);if(n.length<=a)return V2(n,e);for(var s=[],u=0;u<n.length;u++)u<n.length-a?(n[u].opacity=0,n[u].connector=!1):s.push(n[u]);V2(s,e)}T2.props={};var Y2=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},X2=new WeakMap;function q2(t,e,n,r,i,o){if(!xK(r))return{};if(X2.has(e))return X2.get(e);var a=o.map(function(t){return function(t,e,n){var r=e.connectorLength,i=e.connectorLength2,o=e.connectorDistance,a=Y2(K2(0,t,e,n),[]),s=n.getCenter(),u=H2(t,e,n),c=z2(t,e,n),l=u+r+i,A=Math.sin(c)>0?1:-1,f=s[0]+(l+ +o)*A-a.x;return a.x+=f,a.connectorPoints[0][0]-=f,a}(t,n,r)}),s=r.getOptions(),u=s.width,c=s.height,l=a.filter(function(t){return t.x<u/2}),A=a.filter(function(t){return t.x>=u/2}),f=Object.assign(Object.assign({},i),{height:c});return W2(l,f),W2(A,f),a.forEach(function(t,e){return X2.set(o[e],t)}),X2.get(e)}var Z2=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function J2(t,e,n,r){if(!xK(r))return{};var i=n.connectorLength,o=n.connectorLength2,a=n.connectorDistance,s=Z2(K2(0,e,n,r),[]),u=s.x0,c=s.y0,l=r.getCenter(),A=function(t){if(xK(t)){var e=v(t.getSize(),2),n=e[0],r=e[1],i=t.getOptions().transformations.find(function(t){return"polar"===t[0]});if(i)return Math.max(n,r)/2*i[4]}return 0}(r),f=A+i,d=CG([u-l[0],c-l[1]]),h=Math.sin(d)>0?1:-1,p=v(_2(l,d,f),2),g=p[0],y=p[1];return s.x=g+(o+a)*h,s.y=y,s}var $2=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};var t3=function(t,e){var n=e.coordinate,r=e.theme,i=t.render;return function(e,a,s,u){var c=a.text,l=(a.x,a.y,a.transform),A=void 0===l?"":l,f=a.transformOrigin,d=a.className,h=void 0===d?"":d,p=$2(a,["text","x","y","transform","transformOrigin","className"]),v=function(t,e,n,r,i,a){var s=e.position,u=i.render,c=function(t,e){return void 0!==t?t:xK(e)?"inside":vK(e)?"right":"top"}(s,n),l=r[u?"htmlLabel":"inside"===c?"innerLabel":"label"],A=Object.assign({},l,e),f=o[dY(c)];if(!f)throw new Error("Unknown position: ".concat(c));return Object.assign(Object.assign({},l),f(c,t,A,n,i,a))}(e,a,n,r,t,u),g=v.rotate,y=void 0===g?0:g,m=v.transform,b=void 0===m?"":m,w=$2(v,["rotate","transform"]);return wG(new KY).call(nV,w).style("text","".concat(c)).style("className","".concat(h," g2-label")).style("innerHTML",i?i(c,a.datum,a.index):void 0).style("labelTransform","".concat(b," rotate(").concat(+y,") ").concat(A).trim()).style("labelTransformOrigin",f).style("coordCenter",n.getCenter()).call(nV,p).node()}};t3.props={defaultMarker:"point"};var e3=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())})},n3={fill:"#fff",stroke:"#aaa",lineDash:"4 3",lineWidth:.5,fillOpacity:1,strokeOpacity:1},r3=function(t,e,n,r,i,o){for(var a=[],s=[],u=r-1,c=1;c<u;c++){var l=c/u*e,A=t+(c%2==0?n:-n);a.push("".concat(l,",").concat(A)),s.push("".concat(l,",").concat(i?A-o:A+o))}return a.push("".concat(e,",").concat(t)),s.push("".concat(e+o,",").concat(t)),[a,s]},i3=function(t,e){var n=e.context,r=e.selection,i=e.view,o=r.select(".".concat(O$)).node(),a=n.canvas.document,s=i.scale,u=new Map,c=function(t,e,r){return e3(void 0,void 0,void 0,(0,Dn.A)().m(function i(){var o,a;return(0,Dn.A)().w(function(i){for(;;)switch(i.n){case 0:return o=n.externals,a=o.update,(0,o.setState)("options",function(n){var i=n.marks;if(!i||!i.length)return n;var o=i.map(function(t){var n=Gb(t,"scale.y.breaks",[]),i=n.filter(function(t){return t.start!==e&&t.end!==r&&!t.collapsed});return n.forEach(function(t){t.start===e&&t.end===r&&(t.collapsed=!0)}),console.log("breaks group:",n,i),Xm({},t,{scale:{y:{breaks:i}}})});return u.set(t,{start:e,end:r}),Object.assign(Object.assign({},n),{marks:o})}),i.n=1,a();case 1:return i.a(2)}},i)}))},l=function(){return e3(void 0,void 0,void 0,(0,Dn.A)().m(function t(){var e,r;return(0,Dn.A)().w(function(t){for(;;)switch(t.n){case 0:if(u.size){t.n=1;break}return t.a(2);case 1:return e=n.externals,r=e.update,(0,e.setState)("options",function(t){var e=t.marks.map(function(t){var e=Gb(t,"scale.y.breaks",[]);return Vb(t,"scale.y.breaks",e.map(function(t){return Object.assign(Object.assign({},t),{collapsed:!1})})),t});return u.clear(),Object.assign(Object.assign({},t),{marks:e})}),t.n=2,r();case 2:return t.a(2)}},t)}))};return function(t){var e=t.key,n=t.start,r=t.end,i=(t.gap,t.vertices),u=void 0===i?50:i,A=t.lineWidth,f=void 0===A?.5:A,d=t.verticeOffset,h=void 0===d?3:d,p=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["key","start","end","gap","vertices","lineWidth","verticeOffset"]),g=a.createElement("g",{id:"break-group-".concat(e),className:P$}),y=Gb(s,"x.sortedDomain",[]),m=s.y.getOptions(),b=m.range,w=m.domain,x=w.indexOf(n),E=w.indexOf(r),B=o.getBBox(),k=B.width,C=B.height;if(-1===x||-1===E||!y.length)return g;var M,S=b[0]>b[1],F=b[x]*C,T="",P="",I=qn([{y:b[E]*C,isLower:!1},{y:F,isLower:!0}].entries());try{for(I.s();!(M=I.n()).done;){var N=v(M.value,2),L=N[0],_=N[1],Q=_.y,U=_.isLower,j=S?f:-f,D=v(r3(Q,k-0,h,u,U,j),2),R=D[0],H=D[1];0===L?(T="M ".concat(0,",").concat(Q," L ").concat(R.join(" L ")," "),P="M ".concat(0-f,",").concat(Q+j," L ").concat(H.join(" L ")," ")):(T+="L ".concat(k-0,",").concat(Q," L ").concat(O(R).reverse().join(" L ")," L ").concat(0,",").concat(Q," Z"),P+="L ".concat(k-0+f+2,",").concat(Q-j," L ").concat(O(H).reverse().join(" L ")," L ").concat(0-f,",").concat(Q-j," Z"))}}catch(t){I.e(t)}finally{I.f()}var z=Object.assign(Object.assign({},n3),p);try{var K=new zu({style:Object.assign(Object.assign({},z),{d:T})}),G=new zu({style:Object.assign(Object.assign({},z),{d:P,lineWidth:0,cursor:"pointer"})});G.addEventListener("click",function(t){return e3(void 0,void 0,void 0,(0,Dn.A)().m(function i(){return(0,Dn.A)().w(function(i){for(;;)switch(i.n){case 0:if(t.stopPropagation(),2!==t.detail){i.n=1;break}return i.n=1,c(e,n,r);case 1:return i.a(2)}},i)}))}),g.appendChild(K),g.appendChild(G),o.addEventListener("click",function(t){return e3(void 0,void 0,void 0,(0,Dn.A)().m(function e(){return(0,Dn.A)().w(function(e){for(;;)switch(e.n){case 0:if(2!==t.detail){e.n=1;break}return e.n=1,l();case 1:return e.a(2)}},e)}))}),o.appendChild(g)}catch(t){console.error("Failed to create break path:",t)}return g}};i3.props={};var o3={BEFORE_RENDER:"beforerender",AFTER_RENDER:"afterrender",BEFORE_PAINT:"beforepaint",AFTER_PAINT:"afterpaint",BEFORE_CHANGE_DATA:"beforechangedata",AFTER_CHANGE_DATA:"afterchangedata",BEFORE_CLEAR:"beforeclear",AFTER_CLEAR:"afterclear",BEFORE_DESTROY:"beforedestroy",AFTER_DESTROY:"afterdestroy",BEFORE_CHANGE_SIZE:"beforechangesize",AFTER_CHANGE_SIZE:"afterchangesize",POINTER_TAP:"pointertap",POINTER_DOWN:"pointerdown",POINTER_UP:"pointerup",POINTER_OVER:"pointerover",POINTER_OUT:"pointerout",POINTER_MOVE:"pointermove",POINTER_ENTER:"pointerenter",POINTER_LEAVE:"pointerleave",POINTER_UPOUTSIDE:"pointerupoutside",DRAG_START:"dragstart",DRAG:"drag",DRAG_END:"dragend",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"DROP",CLICK:"click",DBLCLICK:"dblclick"};function a3(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(t){return!0};return function(i){if(r(i)){n.emit("plot:".concat(t),i);var o=i.target;if(o){var a=o.className;if("plot"!==a){var s=function(t){return O0(t,function(t){return"element"===t.className})}(o),u=function(t){return O0(t,function(t){return"component"===t.className})}(o),c=function(t){return O0(t,function(t){return"label"===t.className})}(o),l=s||u||c;if(l){var A=l.className,f=l.markType,d=Object.assign(Object.assign({},i),{nativeEvent:!0});"element"===A?(d.data={data:iG(l,e)},n.emit("element:".concat(t),d),n.emit("".concat(f,":").concat(t),d)):"label"===A?(d.data={data:l.attributes.datum},n.emit("label:".concat(t),d),a.split(/\s+/).filter(Boolean).forEach(function(e){n.emit("".concat(e,":").concat(t),d)})):(n.emit("component:".concat(t),d),a.split(/\s+/).filter(Boolean).forEach(function(e){n.emit("".concat(e,":").concat(t),d)}))}}}}}}function s3(){return function(t,e,n){var r=t.container,i=t.view,o=a3(o3.CLICK,i,n,function(t){return 1===t.detail}),a=a3(o3.DBLCLICK,i,n,function(t){return 2===t.detail}),s=a3(o3.POINTER_TAP,i,n),u=a3(o3.POINTER_DOWN,i,n),c=a3(o3.POINTER_UP,i,n),l=a3(o3.POINTER_OVER,i,n),A=a3(o3.POINTER_OUT,i,n),f=a3(o3.POINTER_MOVE,i,n),d=a3(o3.POINTER_ENTER,i,n),h=a3(o3.POINTER_LEAVE,i,n),p=a3(o3.POINTER_UPOUTSIDE,i,n),v=a3(o3.DRAG_START,i,n),g=a3(o3.DRAG,i,n),y=a3(o3.DRAG_END,i,n),m=a3(o3.DRAG_ENTER,i,n),b=a3(o3.DRAG_LEAVE,i,n),w=a3(o3.DRAG_OVER,i,n),x=a3(o3.DROP,i,n);return r.addEventListener("click",o),r.addEventListener("click",a),r.addEventListener("pointertap",s),r.addEventListener("pointerdown",u),r.addEventListener("pointerup",c),r.addEventListener("pointerover",l),r.addEventListener("pointerout",A),r.addEventListener("pointermove",f),r.addEventListener("pointerenter",d),r.addEventListener("pointerleave",h),r.addEventListener("pointerupoutside",p),r.addEventListener("dragstart",v),r.addEventListener("drag",g),r.addEventListener("dragend",y),r.addEventListener("dragenter",m),r.addEventListener("dragleave",b),r.addEventListener("dragover",w),r.addEventListener("drop",x),function(){r.removeEventListener("click",o),r.removeEventListener("click",a),r.removeEventListener("pointertap",s),r.removeEventListener("pointerdown",u),r.removeEventListener("pointerup",c),r.removeEventListener("pointerover",l),r.removeEventListener("pointerout",A),r.removeEventListener("pointermove",f),r.removeEventListener("pointerenter",d),r.removeEventListener("pointerleave",h),r.removeEventListener("pointerupoutside",p),r.removeEventListener("dragstart",v),r.removeEventListener("drag",g),r.removeEventListener("dragend",y),r.removeEventListener("dragenter",m),r.removeEventListener("dragleave",b),r.removeEventListener("dragover",w),r.removeEventListener("drop",x)}}}s3.props={reapplyWhenUpdate:!0};var u3=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function c3(t,e){var n=Object.assign(Object.assign({},{"component.axisRadar":x2,"component.axisLinear":A$,"component.axisArc":f$,"component.legendContinuousBlock":E2,"component.legendContinuousBlockSize":k2,"component.legendContinuousSize":B2,"interaction.event":s3,"composition.mark":O2,"composition.view":T2,"shape.label.label":t3,"shape.break":i3}),e),r=function(e){if("string"!=typeof e)return e;var r="".concat(t,".").concat(e);return n[r]||AG("Unknown Component: ".concat(r))};return[function(t,e){var n=t.type,i=u3(t,["type"]);n||AG("Plot type is required!");var o=r(n);return null==o?void 0:o(i,e)},r]}function l3(t){var e=t.canvas,n=t.group;return(null==e?void 0:e.document)||(null==n?void 0:n.ownerDocument)||AG("Cannot find library document")}var A3=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())})},f3=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function d3(t,e,n){return A3(this,void 0,void 0,(0,Dn.A)().m(function r(){var i,o,a,s,u,c,l,A,f,d,h,p;return(0,Dn.A)().w(function(r){for(;;)switch(r.n){case 0:return r.n=1,h3(t,e,n);case 1:if(i=r.v,o=v(i,2),a=o[0],s=o[1],u=s.encode,c=s.scale,l=s.data,A=s.tooltip,f=s.key,!1!==Array.isArray(l)){r.n=2;break}return r.a(2,null);case 2:return d=e.channels,h=NK(Object.entries(u).filter(function(t){return dG(v(t,2)[1])}),function(t){return t.map(function(t){var e=v(t,2),n=e[0],r=e[1];return Object.assign({name:n},r)})},function(t){var e,n=v(t,1)[0],r=null===(e=/([^\d]+)\d*$/.exec(n))||void 0===e?void 0:e[1],i=d.find(function(t){return t.name===r});return(null==i?void 0:i.independent)?n:r}),p=d.filter(function(t){var e=t.name,n=t.required;if(h.find(function(t){return v(t,1)[0]===e}))return!0;if(n)throw new Error("Missing encoding for channel: ".concat(e,"."));return!1}).flatMap(function(t){var e=t.name,n=t.scale,r=t.scaleKey,i=t.range,o=t.quantitative,a=t.ordinal;return h.filter(function(t){return v(t,1)[0].startsWith(e)}).map(function(t,e){var s=v(t,2),u=s[0],l=s[1],A=l.some(function(t){return t.visual}),d=l.some(function(t){return t.constant}),h=c[u]||{},p=h.independent,g=void 0!==p&&p,y=h.key,m=void 0===y?r||u:y,b=h.type,w=void 0===b?d?"constant":A?"identity":n:b,x=f3(h,["independent","key","type"]),E="constant"===w,B=E?void 0:i;return{name:u,values:l,scaleKey:g||E?Symbol("independent"):m,scale:Object.assign(Object.assign({type:w,markKey:f,range:B},x),{quantitative:o,ordinal:a})}})}),r.a(2,[s,Object.assign(Object.assign({},e),{index:a,channels:p,tooltip:A})])}},r)}))}function h3(t,e,n){return A3(this,void 0,void 0,(0,Dn.A)().m(function r(){var i,o,a,s,u,c,l,A,f,d,h,p,g,y,m,b,w,x,E;return(0,Dn.A)().w(function(r){for(;;)switch(r.p=r.n){case 0:i=n.library,o=c3("transform",i),a=v(o,1),s=a[0],u=e.preInference,c=void 0===u?[]:u,l=e.postInference,A=void 0===l?[]:l,f=t.transform,d=void 0===f?[]:f,h=[c8,l8,A8,f8,d8,h8,g8,m8,y8,p8,b8].concat(O(c.map(s)),O(d.map(s)),O(A.map(s)),[v8]),p=[],g=t,y=qn(h),r.p=1,y.s();case 2:if((m=y.n()).done){r.n=5;break}return b=m.value,r.n=3,b(p,g,n);case 3:w=r.v,x=v(w,2),p=x[0],g=x[1];case 4:r.n=2;break;case 5:r.n=7;break;case 6:r.p=6,E=r.v,y.e(E);case 7:return r.p=7,y.f(),r.f(7);case 8:return r.a(2,[p,g])}},r,null,[[1,6,7,8]])}))}function p3(t){var e=t.type,n=t.value;return"field"===e&&"string"==typeof n?n:null}function v3(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}const g3=v3("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),y3=v3("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),m3=v3("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),b3=v3("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),w3=v3("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),x3=v3("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),E3=v3("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),B3=v3("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),k3=v3("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),O3=v3("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),C3=v3("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function M3(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function S3(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function F3(){}var T3=.7,P3=1/T3,I3="\\s*([+-]?\\d+)\\s*",N3="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",L3="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",_3=/^#([0-9a-f]{3,8})$/,Q3=new RegExp("^rgb\\(".concat(I3,",").concat(I3,",").concat(I3,"\\)$")),U3=new RegExp("^rgb\\(".concat(L3,",").concat(L3,",").concat(L3,"\\)$")),j3=new RegExp("^rgba\\(".concat(I3,",").concat(I3,",").concat(I3,",").concat(N3,"\\)$")),D3=new RegExp("^rgba\\(".concat(L3,",").concat(L3,",").concat(L3,",").concat(N3,"\\)$")),R3=new RegExp("^hsl\\(".concat(N3,",").concat(L3,",").concat(L3,"\\)$")),H3=new RegExp("^hsla\\(".concat(N3,",").concat(L3,",").concat(L3,",").concat(N3,"\\)$")),z3={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function K3(){return this.rgb().formatHex()}function G3(){return this.rgb().formatRgb()}function V3(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=_3.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?W3(e):3===n?new Z3(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Y3(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Y3(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Q3.exec(t))?new Z3(e[1],e[2],e[3],1):(e=U3.exec(t))?new Z3(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=j3.exec(t))?Y3(e[1],e[2],e[3],e[4]):(e=D3.exec(t))?Y3(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=R3.exec(t))?r4(e[1],e[2]/100,e[3]/100,1):(e=H3.exec(t))?r4(e[1],e[2]/100,e[3]/100,e[4]):z3.hasOwnProperty(t)?W3(z3[t]):"transparent"===t?new Z3(NaN,NaN,NaN,0):null}function W3(t){return new Z3(t>>16&255,t>>8&255,255&t,1)}function Y3(t,e,n,r){return r<=0&&(t=e=n=NaN),new Z3(t,e,n,r)}function X3(t){return t instanceof F3||(t=V3(t)),t?new Z3((t=t.rgb()).r,t.g,t.b,t.opacity):new Z3}function q3(t,e,n,r){return 1===arguments.length?X3(t):new Z3(t,e,n,null==r?1:r)}function Z3(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function J3(){return"#".concat(n4(this.r)).concat(n4(this.g)).concat(n4(this.b))}function $3(){var t=t4(this.opacity);return"".concat(1===t?"rgb(":"rgba(").concat(e4(this.r),", ").concat(e4(this.g),", ").concat(e4(this.b)).concat(1===t?")":", ".concat(t,")"))}function t4(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function e4(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function n4(t){return((t=e4(t))<16?"0":"")+t.toString(16)}function r4(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new o4(t,e,n,r)}function i4(t){if(t instanceof o4)return new o4(t.h,t.s,t.l,t.opacity);if(t instanceof F3||(t=V3(t)),!t)return new o4;if(t instanceof o4)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new o4(a,s,u,t.opacity)}function o4(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function a4(t){return(t=(t||0)%360)<0?t+360:t}function s4(t){return Math.max(0,Math.min(1,t||0))}function u4(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function c4(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}M3(F3,V3,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:K3,formatHex:K3,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return i4(this).formatHsl()},formatRgb:G3,toString:G3}),M3(Z3,q3,S3(F3,{brighter:function(t){return t=null==t?P3:Math.pow(P3,t),new Z3(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?T3:Math.pow(T3,t),new Z3(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},clamp:function(){return new Z3(e4(this.r),e4(this.g),e4(this.b),t4(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:J3,formatHex:J3,formatHex8:function(){return"#".concat(n4(this.r)).concat(n4(this.g)).concat(n4(this.b)).concat(n4(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:$3,toString:$3})),M3(o4,function(t,e,n,r){return 1===arguments.length?i4(t):new o4(t,e,n,null==r?1:r)},S3(F3,{brighter:function(t){return t=null==t?P3:Math.pow(P3,t),new o4(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?T3:Math.pow(T3,t),new o4(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Z3(u4(t>=240?t-240:t+120,i,r),u4(t,i,r),u4(t<120?t+240:t-120,i,r),this.opacity)},clamp:function(){return new o4(a4(this.h),s4(this.s),s4(this.l),t4(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=t4(this.opacity);return"".concat(1===t?"hsl(":"hsla(").concat(a4(this.h),", ").concat(100*s4(this.s),"%, ").concat(100*s4(this.l),"%").concat(1===t?")":", ".concat(t,")"))}}));const l4=function(t){return function(){return t}};function A4(t,e){return function(n){return t+n*e}}function f4(t,e){var n=e-t;return n?A4(t,n):l4(isNaN(t)?e:t)}function d4(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=q3(e[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}!function t(e){var n=function(t){return 1===(t=+t)?f4:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):l4(isNaN(e)?n:e)}}(e);function r(t,e){var r=n((t=q3(t)).r,(e=q3(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=f4(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);var h4=d4(function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return c4((n-r/e)*e,a,i,o,s)}});d4(function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return c4((n-r/e)*e,i,o,a,s)}});const p4=function(t){return h4(t[t.length-1])};var v4=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(v3);const g4=p4(v4);var y4=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(v3);const m4=p4(y4);var b4=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(v3);const w4=p4(b4);var x4=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(v3);const E4=p4(x4);var B4=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(v3);const k4=p4(B4);var O4=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(v3);const C4=p4(O4);var M4=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(v3);const S4=p4(M4);var F4=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(v3);const T4=p4(F4);var P4=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(v3);const I4=p4(P4);var N4=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(v3);const L4=p4(N4);var _4=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(v3);const Q4=p4(_4);var U4=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(v3);const j4=p4(U4);var D4=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(v3);const R4=p4(D4);var H4=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(v3);const z4=p4(H4);var K4=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(v3);const G4=p4(K4);var V4=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(v3);const W4=p4(V4);var Y4=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(v3);const X4=p4(Y4);var q4=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(v3);const Z4=p4(q4);var J4=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(v3);const $4=p4(J4);var t5=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(v3);const e5=p4(t5);var n5=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(v3);const r5=p4(n5);var i5=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(v3);const o5=p4(i5);var a5=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(v3);const s5=p4(a5);var u5=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(v3);const c5=p4(u5);var l5=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(v3);const A5=p4(l5);var f5=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(v3);const d5=p4(f5);var h5=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(v3);const p5=p4(h5);function v5(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"}var g5=Math.PI/180,y5=180/Math.PI,m5=-.29227,b5=-.90649,w5=1.97294;function x5(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof E5)return new E5(t.h,t.s,t.l,t.opacity);t instanceof Z3||(t=X3(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(-.6557636667999999*r+-1.7884503806*e-3.5172982438*n)/-5.9615122912,o=r-i,a=(w5*(n-i)-m5*o)/b5,s=Math.sqrt(a*a+o*o)/(w5*i*(1-i)),u=s?Math.atan2(a,o)*y5-120:NaN;return new E5(u<0?u+360:u,s,i,t.opacity)}(t):new E5(t,e,n,null==r?1:r)}function E5(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function B5(t){return function e(n){function r(e,r){var i=t((e=x5(e)).h,(r=x5(r)).h),o=f4(e.s,r.s),a=f4(e.l,r.l),s=f4(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=o(t),e.l=a(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,r.gamma=e,r}(1)}M3(E5,x5,S3(F3,{brighter:function(t){return t=null==t?P3:Math.pow(P3,t),new E5(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?T3:Math.pow(T3,t),new E5(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*g5,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new Z3(255*(e+n*(-.14861*r+1.78277*i)),255*(e+n*(m5*r+b5*i)),255*(e+n*(w5*r)),this.opacity)}})),B5(function(t,e){var n=e-t;return n?A4(t,n>180||n<-180?n-360*Math.round(n/360):n):l4(isNaN(t)?e:t)});var k5=B5(f4);const O5=k5(x5(300,.5,0),x5(-240,.5,1));var C5=k5(x5(-100,.75,.35),x5(80,1.5,.8)),M5=k5(x5(260,.75,.35),x5(80,1.5,.8)),S5=x5();function F5(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return S5.h=360*t-100,S5.s=1.5-1.5*e,S5.l=.8-.9*e,S5+""}var T5=q3(),P5=Math.PI/3,I5=2*Math.PI/3;function N5(t){var e;return t=(.5-t)*Math.PI,T5.r=255*(e=Math.sin(t))*e,T5.g=255*(e=Math.sin(t+P5))*e,T5.b=255*(e=Math.sin(t+I5))*e,T5+""}function L5(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"}function _5(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const Q5=_5(v3("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var U5=_5(v3("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),j5=_5(v3("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),D5=_5(v3("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function R5(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return t?e.reduce(function(t,e){return function(n){return e(t(n))}},t):vm}function H5(t){return t instanceof Float32Array||t instanceof Array}var z5=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},K5=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))};function G5(t,e,n){for(;t<e;)t+=2*Math.PI;for(;t>n;)t-=2*Math.PI;return t}var V5=function(t,e,n,r,i){var o=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}(t,2),a=o[0],s=o[1];return function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}(ee(),[a,s])},W5=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},Y5=function(t,e,n,r,i){var o=new LN({range:[e,e+r]}),a=new LN({range:[n,n+i]});return{transform:function(t){var e=W5(t,2),n=e[0],r=e[1];return[o.map(n),a.map(r)]},untransform:function(t){var e=W5(t,2),n=e[0],r=e[1];return[o.invert(n),a.invert(r)]}}},X5=function(t,e,n,r,i){return(0,function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}(t,1)[0])(e,n,r,i)},q5=function(t,e,n,r,i){var o=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}(t,1)[0];return o},Z5=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},J5=function(t,e,n,r,i){var o=Z5(t,4),a=o[0],s=o[1],u=o[2],c=o[3],l=new LN({range:[u,c]}),A=new LN({range:[a,s]}),f=i/r,d=f>1?1:f,h=f>1?1/f:1;return{transform:function(t){var e=Z5(t,2),n=e[0],r=e[1],i=A.map(n),o=l.map(r);return[o*Math.cos(i)*d*.5+.5,o*Math.sin(i)*h*.5+.5]},untransform:function(t){var e=Z5(t,2),n=e[0],r=e[1],i=2*(n-.5)/d,o=2*(r-.5)/h,u=Math.sqrt(Math.pow(i,2)+Math.pow(o,2)),c=G5(Math.atan2(o,i),a,s);return[A.invert(c),l.invert(u)]}}},$5=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},t6=function(t,e,n,r,i){return{transform:function(t){var e=$5(t,2),n=e[0];return[e[1],n]},untransform:function(t){var e=$5(t,2),n=e[0];return[e[1],n]}}},e6=function(t,e,n,r,i){var o=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}(t,2),a=o[0],s=o[1];return function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}(ee(),[a,s])},n6=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},r6=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},i6=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e6.apply(void 0,r6([[-1,-1]],n6(e),!1))},o6=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e6.apply(void 0,r6([[-1,1]],n6(e),!1))},a6=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e6.apply(void 0,r6([[1,-1]],n6(e),!1))},s6=function(t,e,n,r,i){var o=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}(t,1)[0];return function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}(ee(),o)},u6=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},c6=function(t,e,n,r,i){var o=u6(t,4),a=o[0],s=o[1],u=o[2],c=(o[3]-u)/((s-0)/(2*Math.PI)+1),l=c/(2*Math.PI),A=new LN({range:[u,u+.99*c]}),f=new LN({range:[a,s]}),d=i/r,h=d>1?1:d,p=d>1?1/d:1;return{transform:function(t){var e=u6(t,2),n=e[0],r=e[1],i=f.map(n),o=A.map(r);return[Math.cos(i)*(l*i+o)*h*.5+.5,Math.sin(i)*(l*i+o)*p*.5+.5]},untransform:function(t){var e=u6(t,2),n=e[0],r=e[1],i=2*(n-.5)/h,o=2*(r-.5)/p,u=Math.sqrt(Math.pow(i,2)+Math.pow(o,2)),d=G5(Math.atan2(o,i)+Math.floor(u/c)*Math.PI*2,a,s),v=u-l*d;return[f.invert(d),A.invert(v)]}}},l6=function(t){function e(t){return x(this,e),F(this,e,[t])}return P(e,t),B(e,[{key:"getDefaultOptions",value:function(){return{domain:[],range:[0,1],align:.5,round:!1,padding:0,unknown:zN,paddingInner:1,paddingOuter:0}}},{key:"getPaddingInner",value:function(){return 1}},{key:"clone",value:function(){return new e(this.options)}},{key:"update",value:function(t){xn(e,"update",this,3)([t])}},{key:"getPaddingOuter",value:function(){return this.options.padding}}])}(XN),A6=function(t,e,n,r,i){var o=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}(t,4),a=o[0],s=o[1],u=o[2],c=o[3],l=new LN({range:[u,c]});return{transform:function(t){for(var e=[],n=t.length,r=new l6({domain:new Array(n).fill(0).map(function(t,e){return e}),range:[a,s]}),i=0;i<n;i++){var o=t[i],u=r.map(i),c=l.map(o);e.push(u,c)}return e},untransform:function(t){for(var e=[],n=0;n<t.length;n+=2){var r=t[n+1];e.push(l.invert(r))}return e}}},f6=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a};function d6(t){return 1/Math.tan(t)}var h6=function(t,e,n,r,i){var o=d6(f6(t,1)[0]);return{transform:function(t){var e=f6(t,2),n=e[0],r=e[1];return[n+r*o,r]},untransform:function(t){var e=f6(t,2),n=e[0],r=e[1];return[n-r*o,r]}}},p6=function(t,e,n,r,i){var o=d6(f6(t,1)[0]);return{transform:function(t){var e=f6(t,2),n=e[0];return[n,e[1]+n*o]},untransform:function(t){var e=f6(t,2),n=e[0];return[n,e[1]-n*o]}}},v6=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a};function g6(t,e,n,r,i){var o=t<e,a=(o?e-r:i-e)||i-r,s=o?-1:1;return s*a*(n+1)/(n+a/((t-e)*s))+e}function y6(t,e,n,r,i){var o=t<e,a=(o?e-r:i-e)||i-r;return a/(a*(n+1)/(t-e)-n*(o?-1:1))+e}function m6(t,e,n){return n?new LN({range:[0,1],domain:[0,e]}).map(t):t}var b6=function(t,e,n,r,i){var o=v6(t,3),a=o[0],s=o[1],u=o[2],c=m6(a,r,void 0!==u&&u);return{transform:function(t){var e=v6(t,2),n=e[0],r=e[1];return[g6(n,c,s,0,1),r]},untransform:function(t){var e=v6(t,2),n=e[0],r=e[1];return[y6(n,c,s,0,1),r]}}},w6=function(t,e,n,r,i){var o=v6(t,3),a=o[0],s=o[1],u=o[2],c=m6(a,i,void 0!==u&&u);return{transform:function(t){var e=v6(t,2);return[e[0],g6(e[1],c,s,0,1)]},untransform:function(t){var e=v6(t,2);return[e[0],y6(e[1],c,s,0,1)]}}},x6=function(t,e,n,r,i){var o=v6(t,5),a=o[0],s=o[1],u=o[2],c=o[3],l=o[4],A=void 0!==l&&l,f=m6(a,r,A),d=m6(s,i,A);return{transform:function(t){var e=v6(t,2),n=e[0],r=e[1];return[g6(n,f,u,0,1),g6(r,d,c,0,1)]},untransform:function(t){var e=v6(t,2),n=e[0],r=e[1];return[y6(n,f,u,0,1),y6(r,d,c,0,1)]}}},E6=function(t,e,n,r,i){var o=v6(t,5),a=o[0],s=o[1],u=o[2],c=o[3],l=o[4],A=void 0!==l&&l,f=new LN({range:[0,r]}),d=new LN({range:[0,i]}),h=A?a:f.map(a),p=A?s:d.map(s);return{transform:function(t){var e=v6(t,2),n=e[0],r=e[1],i=f.map(n)-h,o=d.map(r)-p,a=Math.sqrt(i*i+o*o);if(a>u)return[n,r];var s=g6(a,0,c,0,u),l=Math.atan2(o,i),A=h+s*Math.cos(l),v=p+s*Math.sin(l);return[f.invert(A),d.invert(v)]},untransform:function(t){var e=v6(t,2),n=e[0],r=e[1],i=f.map(n)-h,o=d.map(r)-p,a=Math.sqrt(i*i+o*o);if(a>u)return[n,r];var s=y6(a,0,c,0,u),l=Math.atan2(o,i),A=h+s*Math.cos(l),v=p+s*Math.sin(l);return[f.invert(A),d.invert(v)]}}},B6=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},k6=function(t,e,n,r,i,o,a){var s=new LN({range:[e,e+i]}),u=new LN({range:[n,n+o]}),c=new LN({range:[r,r+a]});return{transform:function(t){var e=B6(t,3),n=e[0],r=e[1],i=e[2];return[s.map(n),u.map(r),c.map(i)]},untransform:function(t){var e=B6(t,3),n=e[0],r=e[1],i=e[2];return[s.invert(n),u.invert(r),c.invert(i)]}}},O6=function(t,e,n,r,i,o,a){var s=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}(t,3),u=s[0],c=s[1],l=s[2];return bt(rt(),[u,c,l])},C6=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},M6=function(t,e,n,r,i,o,a){return{transform:function(t){var e=C6(t,3),n=e[0];return[e[1],n,e[2]]},untransform:function(t){var e=C6(t,3),n=e[0];return[e[1],n,e[2]]}}},S6=function(t,e,n,r,i,o,a){var s=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}(t,3),u=s[0],c=s[1],l=s[2];return wt(rt(),[u,c,l])},F6=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},T6=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},P6=function(){function t(t){this.options={x:0,y:0,width:300,height:150,transformations:[]},this.transformers={cartesian:Y5,translate:V5,custom:X5,matrix:q5,polar:J5,transpose:t6,scale:e6,"shear.x":h6,"shear.y":p6,reflect:i6,"reflect.x":o6,"reflect.y":a6,rotate:s6,helix:c6,parallel:A6,fisheye:x6,"fisheye.x":b6,"fisheye.y":w6,"fisheye.circular":E6},this.update(t)}return t.prototype.update=function(t){this.options=pm({},this.options,t),this.recoordinate()},t.prototype.clone=function(){return new t(this.options)},t.prototype.getOptions=function(){return this.options},t.prototype.clear=function(){this.update({transformations:[]})},t.prototype.getSize=function(){var t=this.options;return[t.width,t.height]},t.prototype.getCenter=function(){var t=this.options,e=t.x,n=t.y;return[(2*e+t.width)/2,(2*n+t.height)/2]},t.prototype.transform=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.options.transformations;return this.update({transformations:T6(T6([],F6(n),!1),[T6([],F6(t),!1)],!1)}),this},t.prototype.map=function(t){return this.output(t)},t.prototype.invert=function(t){return this.input(t)},t.prototype.recoordinate=function(){this.output=this.compose(),this.input=this.compose(!0)},t.prototype.compose=function(t){var e,n;void 0===t&&(t=!1);var r=t?T6([],F6(this.options.transformations),!1).reverse():this.options.transformations,i=t?function(t){return t.untransform}:function(t){return t.transform},o=[],a=[],s=function(t,e){return void 0===e&&(e=!0),a.push(e?function(t){return function(e){for(var n=[],r=0;r<e.length-1;r+=2){var i=[e[r],e[r+1]],o=t(i);n.push.apply(n,K5([],z5(o),!1))}return n}}(t):t)};try{for(var u=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(r),c=u.next();!c.done;c=u.next()){var l=F6(c.value),A=l[0],f=l.slice(1),d=this.transformers[A];if(d){var h=this.options,p=h.x,v=h.y,g=h.width,y=h.height,m=d(T6([],F6(f),!1),p,v,g,y);H5(m)?o.push(m):(o.length&&(s(this.createMatrixTransform(o,t)),o.splice(0,o.length)),s(i(m)||vm,"parallel"!==A))}}}catch(t){e={error:t}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return o.length&&s(this.createMatrixTransform(o,t)),R5.apply(void 0,T6([],F6(a),!1))},t.prototype.createMatrixTransform=function(t,e){var n,r,i=ee();return e&&t.reverse(),t.forEach(function(t){return e=i,r=t,o=(n=i)[0],a=n[1],s=n[2],u=n[3],c=n[4],l=n[5],A=n[6],f=n[7],d=n[8],h=r[0],p=r[1],v=r[2],g=r[3],y=r[4],m=r[5],b=r[6],w=r[7],x=r[8],e[0]=h*o+p*u+v*A,e[1]=h*a+p*c+v*f,e[2]=h*s+p*l+v*d,e[3]=g*o+y*u+m*A,e[4]=g*a+y*c+m*f,e[5]=g*s+y*l+m*d,e[6]=b*o+w*u+x*A,e[7]=b*a+w*c+x*f,e[8]=b*s+w*l+x*d,e;var e,n,r,o,a,s,u,c,l,A,f,d,h,p,v,g,y,m,b,w,x}),e&&function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],A=l*a-s*c,f=-l*o+s*u,d=c*o-a*u,h=n*A+r*f+i*d;h&&(h=1/h,t[0]=A*h,t[1]=(-l*r+i*c)*h,t[2]=(s*r-i*a)*h,t[3]=f*h,t[4]=(l*n-i*u)*h,t[5]=(-s*n+i*o)*h,t[6]=d*h,t[7]=(-c*n+r*u)*h,t[8]=(a*n-r*o)*h)}(i,(n=i,(r=new L(9))[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r)),function(t){var e=[t[0],t[1],1];return X(e,e,i),[e[0],e[1]]}},t}(),I6=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},N6=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},L6=function(){function t(t){this.options={x:0,y:0,z:0,width:300,height:150,depth:150,transformations:[]},this.transformers={cartesian3D:k6,translate3D:O6,scale3D:S6,transpose3D:M6},this.update(t)}return t.prototype.update=function(t){this.options=pm({},this.options,t),this.recoordinate()},t.prototype.clone=function(){return new t(this.options)},t.prototype.getOptions=function(){return this.options},t.prototype.clear=function(){this.update({transformations:[]})},t.prototype.getSize=function(){var t=this.options;return[t.width,t.height,t.depth]},t.prototype.getCenter=function(){var t=this.options,e=t.x,n=t.y,r=t.z;return[(2*e+t.width)/2,(2*n+t.height)/2,(2*r+t.depth)/2]},t.prototype.transform=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.options.transformations;return this.update({transformations:N6(N6([],I6(n),!1),[N6([],I6(t),!1)],!1)}),this},t.prototype.map=function(t){return this.output(t)},t.prototype.invert=function(t){return this.input(t)},t.prototype.recoordinate=function(){this.output=this.compose(),this.input=this.compose(!0)},t.prototype.compose=function(t){var e,n;void 0===t&&(t=!1);var r=t?N6([],I6(this.options.transformations),!1).reverse():this.options.transformations,i=t?function(t){return t.untransform}:function(t){return t.transform},o=[],a=[],s=function(t,e){return void 0===e&&(e=!0),a.push(e?function(t){return function(e){for(var n=[],r=0;r<e.length-1;r+=3){var i=[e[r],e[r+1],e[r+2]],o=t(i);n.push.apply(n,K5([],z5(o),!1))}return n}}(t):t)};try{for(var u=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(r),c=u.next();!c.done;c=u.next()){var l=I6(c.value),A=l[0],f=l.slice(1),d=this.transformers[A];if(d){var h=this.options,p=h.x,v=h.y,g=h.z,y=h.width,m=h.height,b=h.depth,w=d(N6([],I6(f),!1),p,v,g,y,m,b);H5(w)?o.push(w):(o.length&&(s(this.createMatrixTransform(o,t)),o.splice(0,o.length)),s(i(w)||vm,!0))}}}catch(t){e={error:t}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return o.length&&s(this.createMatrixTransform(o,t)),R5.apply(void 0,N6([],I6(a),!1))},t.prototype.createMatrixTransform=function(t,e){var n=rt();return e&&t.reverse(),t.forEach(function(t){return $t(n,n,t)}),e&&lt(n,it(n)),function(t){var e=[t[0],t[1],t[2],1];return nt(e,e,n),[e[0],e[1],e[2]]}},t}(),_6=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function Q6(t,e){var n=t.coordinate,r=void 0===n?{}:n,i=t.coordinates,o=_6(t,["coordinate","coordinates"]);if(i)return t;var a=r.type,s=r.transform,u=void 0===s?[]:s,c=_6(r,["type","transform"]);if(!a)return Object.assign(Object.assign({},o),{coordinates:u});var l=((0,v(c3("coordinate",e),2)[1])(a).props||{}).transform;if(void 0!==l&&l)throw new Error("Unknown coordinate: ".concat(a,"."));return Object.assign(Object.assign({},o),{coordinates:[Object.assign({type:a},c)].concat(O(u))})}function U6(t,e){return t.filter(function(t){return t.type===e})}function j6(t){return U6(t,"polar").length>0}function D6(t){return U6(t,"transpose").length%2==1}function R6(t){return U6(t,"theta").length>0}function H6(t){return U6(t,"radial").length>0}function z6(t){return U6(t,"radar").length>0}function K6(t,e,n,r,i,o){var s=n.guide,u=void 0===s?{}:s,c=function(t,e,n){var r=n.type,i=n.domain,o=n.range,a=n.quantitative,s=n.ordinal;return void 0!==r?r:function(t){return o8(t,yG)}(e)?"identity":"string"==typeof o?"linear":(i||o||[]).length>2?t8(t,s):void 0!==i?r8([i])?t8(t,s):i8(e)?"time":e8(t,o,a):r8(e)?t8(t,s):i8(e)?"time":e8(t,o,a)}(t,e,n);if("string"!=typeof c)return n;var l=function(t,e,n,r){var i=r.domain;if(void 0!==i)return i;switch(t){case"linear":case"time":case"log":case"pow":case"sqrt":case"quantize":case"threshold":return n8(function(t,e){var n,r=e.zero,i=void 0!==r&&r,o=1/0,a=-1/0,s=qn(t);try{for(s.s();!(n=s.n()).done;){var u,c=qn(n.value);try{for(c.s();!(u=c.n()).done;){var l=u.value;dG(l)&&(o=Math.min(o,+l),a=Math.max(a,+l))}}catch(t){c.e(t)}finally{c.f()}}}catch(t){s.e(t)}finally{s.f()}return o===1/0?[]:i?[Math.min(0,o),a]:[o,a]}(n,r),r);case"band":case"ordinal":case"point":return function(t){return Array.from(new Set(t.flat()))}(n);case"quantile":return function(t){return t.flat().sort()}(n);case"sequential":return n8(function(t){var e,n=1/0,r=-1/0,i=qn(t);try{for(i.s();!(e=i.n()).done;){var o,a=qn(e.value);try{for(a.s();!(o=a.n()).done;){var s=o.value;dG(s)&&(n=Math.min(n,+s),r=Math.max(r,+s))}}catch(t){a.e(t)}finally{a.f()}}}catch(t){i.e(t)}finally{i.f()}return n===1/0?[]:[n<0?-r:n,r]}(n),r);default:return[]}}(c,0,e,n),A=function(t,e,n){var r=n.ratio;return null==r?e:q6({type:t})?function(t,e,n){var r=t.map(Number),i=new YG({domain:r,range:[r[0],r[0]+(r[r.length-1]-r[0])*e]});return"time"===n?t.map(function(t){return new Date(i.map(t))}):t.map(function(t){return i.map(t)})}(e,r,t):Z6({type:t})?function(t,e){var n=Math.round(t.length*e);return t.slice(0,n)}(e,r):e}(c,l,n);return Object.assign(Object.assign(Object.assign({},n),function(t,e,n,r,i){switch(t){case"linear":case"time":case"log":case"pow":case"sqrt":return function(t,e){var n=e.interpolate,r=void 0===n?DG:n,i=e.nice,o=void 0!==i&&i,a=e.tickCount,s=void 0===a?5:a;return Object.assign(Object.assign({},e),{interpolate:r,nice:o,tickCount:s})}(0,r);case"band":case"point":return function(t,e,n,r){if(void 0!==r.padding||void 0!==r.paddingInner||void 0!==r.paddingOuter)return Object.assign(Object.assign({},r),{unknown:NaN});var i=function(t,e,n){return"enterDelay"===e||"enterDuration"===e||"size"===e?0:"band"===t?R6(n)?0:.1:"point"===t?.5:0}(t,e,n),o=r.paddingInner,a=void 0===o?i:o,s=r.paddingOuter,u=void 0===s?i:s;return Object.assign(Object.assign({},r),{paddingInner:a,paddingOuter:u,padding:i,unknown:NaN})}(t,e,i,r);case"sequential":return function(t){var e=t.palette,n=void 0===e?"ylGnBu":e,r=t.offset,i=Gg(n),o=a["interpolate".concat(i)];if(!o)throw new Error("Unknown palette: ".concat(i));return{interpolator:r?function(t){return o(r(t))}:o}}(r);default:return r}}(c,t,0,n,r)),{domain:A,range:J6(c,t,e,n,A,i,o),expectedDomain:l,guide:u,name:t,type:c})}function G6(t,e){for(var n=Object.keys(t),r=function(){var e=o[i],r=e.getOptions().name;if(r in t){var a=n.filter(function(t){return t.startsWith(r)}).map(function(t){return+(t.replace(r,"")||0)}),s=Bq(a)+1,u="".concat(r).concat(s);t[u]=e,e.getOptions().key=u}else t[r]=e},i=0,o=Object.values(e);i<o.length;i++)r();return t}function V6(t,e){var n=v(c3("scale",e),1)[0],r=function(t){return t&&Array.isArray(t)?[function(r){var i;e=r.map.bind(r),n=null===(i=r.invert)||void 0===i?void 0:i.bind(r);var o=t.filter(function(t){return"function"==typeof v(t,1)[0]}),a=t.filter(function(t){return"function"!=typeof v(t,1)[0]}),s=new Map(a);if(r.map=function(t){var n,r=qn(o);try{for(r.s();!(n=r.n()).done;){var i=v(n.value,2),a=i[0],u=i[1];if(a(t))return u}}catch(t){r.e(t)}finally{r.f()}return s.has(t)?s.get(t):e(t)},!n)return r;var u=new Map(a.map(function(t){var e=v(t,2),n=e[0];return[e[1],n]})),c=new Map(o.map(function(t){var e=v(t,2),n=e[0];return[e[1],n]}));return r.invert=function(t){return c.has(t)?t:u.has(t)?u.get(t):n(t)},r},function(t){return null!==e&&(t.map=e),null!==n&&(t.invert=n),t}]:[sG,sG];var e,n}(t.relations);return(0,v(r,1)[0])(n(t))}function W6(t){var e=t.flatMap(function(t){return Array.from(t.values())}).flatMap(function(t){return t.channels.map(function(t){return t.scale})});X6(e,"x"),X6(e,"y")}function Y6(t){var e=t.channels,n=void 0===e?[]:e,r=t.type,i=t.scale,o=void 0===i?{}:i,a=["shape","color","opacity","size"];return 0!==n.length?n:"axisX"===r?["x"]:"axisY"===r?["y"]:"legends"===r?Object.keys(o).filter(function(t){return a.includes(t)}):[]}function X6(t,e){var n=t.filter(function(t){var n=t.name,r=t.facet;return(void 0===r||r)&&n===e}),r=n.flatMap(function(t){return t.domain}),i=n.every(q6)?XG(r):n.every(Z6)?Array.from(new Set(r)):null;if(null!==i){var o,a=qn(n);try{for(a.s();!(o=a.n()).done;)o.value.domain=i}catch(t){a.e(t)}finally{a.f()}}}function q6(t){var e=t.type;return"string"==typeof e&&["linear","log","pow","time"].includes(e)}function Z6(t){var e=t.type;return"string"==typeof e&&["band","point","ordinal"].includes(e)}function J6(t,e,n,r,i,o,a){var s=r.range;if("string"==typeof s)return function(t){return t.split("-")}(s);if(void 0!==s)return s;var u=r.rangeMin,c=r.rangeMax;switch(t){case"linear":case"time":case"log":case"pow":case"sqrt":var l=function(t,e){return"enterDelay"===t?[0,1e3]:"enterDuration"==t?[300,1e3]:t.startsWith("y")||t.startsWith("position")?[1,0]:"color"===t?[JG(e),$G(e)]:"opacity"===t?[0,1]:"size"===t?[1,10]:[0,1]}(e,$6(0,r,i,o,a)),A=v(l,2),f=A[0],d=A[1];return[null!=u?u:f,null!=c?c:d];case"band":case"point":return[null!=u?u:"size"===e?5:0,null!=c?c:"size"===e?10:1];case"ordinal":return $6(0,r,i,o,a);case"sequential":return;case"constant":return[n[0][0]];default:return[]}}function $6(t,e,n,r,i){var o=v(c3("palette",i),1)[0],s=r.category10,u=r.category20,c=function(t){return Array.from(new Set(t))}(n).length<=s.length?s:u,l=e.palette,A=void 0===l?c:l,f=e.offset;if(Array.isArray(A))return A;try{return o({type:A})}catch(t){var d=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t){return t};if(!t)return null;var r=Gg(t),i=a["scheme".concat(r)],o=a["interpolate".concat(r)];if(!i&&!o)return null;if(i){if(!i.some(Array.isArray))return i;var s=i[e.length];if(s)return s}return e.map(function(t,r){return o(n(r/e.length))})}(A,n,f);if(d)return d;throw new Error("Unknown Component: ".concat(A," "))}}function t8(t,e){return e||(function(t){return t.startsWith("x")||t.startsWith("y")||t.startsWith("position")||t.startsWith("size")}(t)?"point":"ordinal")}function e8(t,e,n){return n||("color"!==t||e?"linear":"sequential")}function n8(t,e){if(0===t.length)return t;var n=e.domainMin,r=e.domainMax,i=v(t,2),o=i[0],a=i[1];return[null!=n?n:o,null!=r?r:a]}function r8(t){return o8(t,function(t){var e=typeof t;return"string"===e||"boolean"===e})}function i8(t){return o8(t,function(t){return t instanceof Date})}function o8(t,e){var n,r=qn(t);try{for(r.s();!(n=r.n()).done;)if(n.value.some(e))return!0}catch(t){r.e(t)}finally{r.f()}return!1}var a8=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())})},s8=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},u8=Symbol("CALLBACK_ITEM");function c8(t,e,n){var r=e.encode,i=void 0===r?{}:r,o=e.scale,a=void 0===o?{}:o,s=e.transform,u=void 0===s?[]:s,c=s8(e,["encode","scale","transform"]);return[t,Object.assign(Object.assign({},c),{encode:i,scale:a,transform:u})]}function l8(t,e,n){return a8(this,void 0,void 0,(0,Dn.A)().m(function t(){var r,i,o,a,s,u,c,l,A,f,d,h,p;return(0,Dn.A)().w(function(t){for(;;)switch(t.n){case 0:return r=n.library,i=e.data,o=c3("data",r),a=v(o,1),s=a[0],u=w8(i),c=u.transform,l=void 0===c?[]:c,A=s8(u,["transform"]),f=[A].concat(O(l)),d=f.map(function(t){return s(t,n)}),t.n=1,cG(d)(i);case 1:return h=t.v,p=!i||Array.isArray(i)||Array.isArray(h)?h:{value:h},t.a(2,[Array.isArray(h)?ZG(h):[],Object.assign(Object.assign({},e),{data:p})])}},t)}))}function A8(t,e,n){var r=e.encode;if(!r)return[t,e];for(var i={},o=0,a=Object.entries(r);o<a.length;o++){var s=v(a[o],2),u=s[0],c=s[1];if(Array.isArray(c))for(var l=0;l<c.length;l++)i["".concat(u).concat(0===l?"":l)]=c[l];else i[u]=c}return[t,Object.assign(Object.assign({},e),{encode:i})]}function f8(t,e,n){var r=e.encode,i=e.data;if(!r)return[t,e];var o=qG(r,function(t){if(function(t){return!("object"!=typeof t||t instanceof Date||null===t)&&dG(t.type)}(t))return t;var e=function(t,e){return"function"==typeof e?"transform":"string"==typeof e&&function(t,e){return!!Array.isArray(t)&&t.some(function(t){return void 0!==t[e]})}(t,e)?"field":"constant"}(i,t);return{type:e,value:t}});return[t,Object.assign(Object.assign({},e),{encode:o})]}function d8(t,e,n){var r=e.encode;if(!r)return[t,e];var i=qG(r,function(t,e){return"constant"!==t.type||function(t){return t.startsWith("x")||t.startsWith("y")||t.startsWith("position")||"enterDelay"===t||"enterDuration"===t||"updateDelay"===t||"updateDuration"===t||"exitDelay"===t||"exitDuration"===t}(e)?t:Object.assign(Object.assign({},t),{constant:!0})});return[t,Object.assign(Object.assign({},e),{encode:i})]}function h8(t,e,n){var r=e.encode,i=e.data;if(!r)return[t,e];var o=function(t){var e=v(c3("encode",t),1)[0];return function(t,n){return void 0===n||void 0===t?null:Object.assign(Object.assign({},n),{type:"column",value:e(n)(t),field:p3(n)})}}(n.library),a=qG(r,function(t){return o(i,t)});return[t,Object.assign(Object.assign({},e),{encode:a})]}function p8(t,e,n){var r=e.tooltip,i=void 0===r?{}:r;return mG(i)?[t,e]:Array.isArray(i)?[t,Object.assign(Object.assign({},e),{tooltip:{items:i}})]:yG(i)&&m2(i)?[t,Object.assign(Object.assign({},e),{tooltip:i})]:[t,Object.assign(Object.assign({},e),{tooltip:{items:[i]}})]}function v8(t,e,n){var r=e.data,i=e.encode,o=e.tooltip,a=void 0===o?{}:o;if(mG(a))return[t,e];var s=function(e){if(!e)return e;if("string"==typeof e)return t.map(function(t){return{name:e,value:r[t][e]}});if(yG(e)){var n,o=e.field,a=e.channel,s=e.color,u=e.name,c=void 0===u?o:u,l=e.valueFormatter,A=void 0===l?function(t){return t}:l,f="string"==typeof A?HJ(A):A,d=a&&i[a],h=d&&i[a].field,p=c||h||a,v=[],g=qn(t);try{for(g.s();!(n=g.n()).done;){var y=n.value,b=o?r[y][o]:d?i[a].value[y]:null;v[y]={name:p,color:s,value:f(b)}}}catch(t){g.e(t)}finally{g.f()}return v}if("function"==typeof e){var w,x=[],E=qn(t);try{for(E.s();!(w=E.n()).done;){var B=w.value,k=e(r[B],B,r,i);yG(k)?x[B]=Object.assign(Object.assign({},k),m({},u8,!0)):x[B]={value:k}}}catch(t){E.e(t)}finally{E.f()}return x}return e},u=a.title,c=a.items,l=void 0===c?[]:c,A=s8(a,["title","items"]),f=Object.assign({title:s(u),items:Array.isArray(l)?l.map(s):[]},A);return[t,Object.assign(Object.assign({},e),{tooltip:f})]}function g8(t,e,n){var r=e.encode,i=s8(e,["encode"]);if(!r)return[t,e];var o=Object.entries(r),a=o.filter(function(t){var e=v(t,2)[1].value;return Array.isArray(e[0])}).flatMap(function(e){for(var n=v(e,2),r=n[0],i=n[1],o=[[r,new Array(t.length).fill(void 0)]],a=i.value,s=s8(i,["value"]),u=0;u<a.length;u++){var c=a[u];if(Array.isArray(c))for(var l=0;l<c.length;l++){var A=o[l]||["".concat(r).concat(l),new Array(t).fill(void 0)];A[1][u]=c[l],o[l]=A}}return o.map(function(t){var e=v(t,2),n=e[0],r=e[1];return[n,Object.assign({type:"column",value:r},s)]})}),s=Object.fromEntries([].concat(o,O(a)));return[t,Object.assign(Object.assign({},i),{encode:s})]}function y8(t,e,n){var r=e.axis,i=void 0===r?{}:r,o=e.legend,a=void 0===o?{}:o,s=e.slider,u=void 0===s?{}:s,c=e.scrollbar,l=void 0===c?{}:c,A=function(t,e){if("boolean"==typeof t)return t?{}:null;var n=t[e];return void 0===n||n?n:null},f="object"==typeof i?Array.from(new Set(["x","y","z"].concat(O(Object.keys(i))))):["x","y","z"];return Xm(e,{scale:Object.assign(Object.assign({},Object.fromEntries(f.map(function(t){var e=A(l,t);return[t,Object.assign({guide:A(i,t),slider:A(u,t),scrollbar:e},e&&{ratio:void 0===e.ratio?.5:e.ratio})]}))),{color:{guide:A(a,"color")},size:{guide:A(a,"size")},shape:{guide:A(a,"shape")},opacity:{guide:A(a,"opacity")}})}),[t,e]}function m8(t,e,n){var r=e.animate;return r||void 0===r||Xm(e,{animate:{enter:{type:null},exit:{type:null},update:{type:null}}}),[t,e]}function b8(t,e,n){var r,i;return Xm(e,{scale:{series:Object.assign({key:"DEFAULT_".concat(e.type,"_SERIES_KEY")},null!==(i=null===(r=null==e?void 0:e.scale)||void 0===r?void 0:r.series)&&void 0!==i?i:{})}}),[t,e]}function w8(t){if(de(t))return{type:"inline",value:t};if(!t)return{type:"inline",value:null};if(Array.isArray(t))return{type:"inline",value:t};var e=t.type,n=void 0===e?"inline":e,r=s8(t,["type"]);return Object.assign(Object.assign({},r),{type:n})}var x8=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},E8="tooltipLocked";function B8(t,e){var n;if(e)return"string"==typeof e?document.querySelector(e):e;var r=null===(n=t.ownerDocument)||void 0===n?void 0:n.defaultView;return r?r.getContextService().getDomElement().parentElement:void 0}function k8(t){var e,n,r,i=t.root,o=t.data,a=t.x,s=t.y,u=t.render,c=t.event,l=t.single,A=t.position,f=void 0===A?"right-bottom":A,d=t.enterable,h=void 0!==d&&d,p=t.css,g=t.mount,y=t.bounding,b=t.offset,w=B8(i,g),x=B8(i),E=l?x:i,B=y||function(t){var e=t.getRenderBounds(),n=v(e.min,2),r=n[0],i=n[1],o=v(e.max,2);return{x:r,y:i,width:o[0]-r,height:o[1]-i}}(i),k=(e=w,n=x.getBoundingClientRect(),r=e.getBoundingClientRect(),{x:n.x-r.x,y:n.y-r.y}),O=E.tooltipElement,C=void 0===O?function(t,e,n,r,i,o,a){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[10,10],c=m(m({},wJ("tooltip"),{}),wJ("tooltip-title"),{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}),l=new l_({className:"tooltip",style:{x:e,y:n,container:a,data:[],bounding:o,position:r,enterable:i,title:"",offset:u,template:{prefixCls:bJ},style:Xm(c,s)}});return t.appendChild(l.HTMLTooltipElement),l}(w,a,s,f,h,B,k,p,b):O,M=o.items,S=o.title,F=void 0===S?"":S;C.update(Object.assign({x:a,y:s,data:M.map(function(t){return Object.assign(Object.assign({},t),{value:t.value||0===t.value?t.value:""})}),title:F,position:f,enterable:h,container:k},void 0!==u&&{content:u(c,{items:M,title:F})})),E.tooltipElement=C}function O8(t){var e=t.root,n=t.single,r=t.emitter,i=t.nativeEvent,o=void 0===i||i,a=t.event,s=void 0===a?null:a;o&&r.emit("tooltip:hide",{nativeEvent:o});var u=B8(e),c=(n?u:e).tooltipElement;c&&c.hide(null==s?void 0:s.clientX,null==s?void 0:s.clientY),P8(e),I8(e),N8(e)}function C8(t){var e=t.root,n=t.single,r=B8(e),i=n?r:e;if(i){var o=i.tooltipElement;o&&(o.destroy(),i.tooltipElement=void 0),P8(e),I8(e),N8(e)}}function M8(t){var e=t.value;return Object.assign(Object.assign({},t),{value:void 0===e?"undefined":e})}function S8(t){var e=t.getAttribute("fill"),n=t.getAttribute("stroke"),r=t.__data__.color;return void 0===r?e&&"transparent"!==e?e:n:r}function F8(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t},n=new Map(t.map(function(t){return[e(t),t]}));return Array.from(n.values())}function T8(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.map(function(t){return t.__data__}),i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=function(t){return t instanceof Date?+t:t},a=F8(r.map(function(t){return t.title}),o).filter(dG),s=r.flatMap(function(r,o){var a=r.element||t[o],s=r.items,u=void 0===s?[]:s,c=r.title,l=u.filter(dG),A=void 0!==n?n:u.length<=1;return l.map(function(t){var n=t.color,o=void 0===n?S8(a)||i.color:n,s=t.name,u=x8(t,["color","name"]),l=aG(e,r),f=A&&!(u8 in u)?l||s:s||l;return Object.assign(Object.assign({},u),{color:o,name:f||c})})}).map(M8);return Object.assign(Object.assign({},a.length>0&&{title:a.join(",")}),{items:F8(s,function(t){return"(".concat(o(t.name),", ").concat(o(t.value),", ").concat(o(t.color),")")})})}function P8(t){t.ruleY&&(t.ruleY.remove(),t.ruleY=void 0)}function I8(t){t.ruleX&&(t.ruleX.remove(),t.ruleX=void 0)}function N8(t){t.markers&&(t.markers.forEach(function(t){return t.remove()}),t.markers=[])}function L8(t,e){return Array.from(t.values()).some(function(t){var n;return null===(n=t.interaction)||void 0===n?void 0:n[e]})}function _8(t,e){return void 0===t?e:t}function Q8(t){var e=t.title;return 0===t.items.length&&void 0===e}function U8(t){var e,n,r=t.root,i=t.event,o=t.elements,a=void 0===o?[]:o,s=t.coordinate,u=t.scale,c=t.shared,l=a.every(function(t){return"interval"===t.markType})&&!gK(s),A=u.x,f=function(t){var e=t.x;if(!e||!e.valueBandWidth)return!0;var n=e.valueBandWidth;return!!de(n)||1===new Set(n.values()).size}(u),d=u.series,h=null!==(n=null===(e=null==A?void 0:A.getBandWidth)||void 0===e?void 0:e.call(A))&&void 0!==n?n:0,p=d&&d.valueBandWidth?function(t){var e=Math.round(1/d.valueBandWidth);return t.__data__.x+t.__data__.series*h+h/(2*e)}:function(t){return t.__data__.x+h/2};l&&a.sort(function(t,e){return p(t)-p(e)});var g=function(t){var e=t.target;return O0(void 0===e?IG(a):e,function(e){return!!e.classList&&(rG(e)&&Vb(e,"__data__.normalized",function(t,e){var n=t.getOptions(),r=n.innerWidth,i=n.innerHeight,o=n.marginLeft,a=n.paddingLeft,s=n.insetLeft,u=n.marginTop,c=n.paddingTop,l=n.insetTop;return{x:(e.x-o-a-s)/r,y:(e.y-u-c-l)/i}}(s,{x:t.offsetX,y:t.offsetY})),e.classList.includes("element"))})},y=l?function(t){var e=o0(r,t);if(e){var n=v(s.invert(e),1)[0],i=b$(p).center,o=f?i(a,n):function(t,e){var n=t.adjustedRange,r=t.valueBandWidth,i=t.valueStep,o=Array.from(r.values()),a=Array.from(i.values()),s=n.map(function(t,e){var n=(a[e]-o[e])/2;return[t-n,t+o[e]+n]}),u=s.findIndex(function(t){var n=v(t,2),r=n[0],i=n[1];return r<=e&&e<=i});return-1!==u?u:e>.5?n.length-1:0}(A,n),u=a[o];if(!c){var l=a.find(function(t){return t!==u&&p(t)===p(u)});if(l)return g(t)||l}return u}}:g;return y(i)}function j8(t){var e,n=t.root,r=t.event,i=t.elements,o=t.coordinate,a=t.scale,s=t.startX,u=t.startY,c=vK(o),l=[],A=[],f=qn(i);try{for(f.s();!(e=f.n()).done;){var d=e.value,h=d.__data__,p=h.seriesX,g=h.title,y=h.items;p?l.push(d):(g||y)&&A.push(d)}}catch(t){f.e(t)}finally{f.f()}var m=A.length&&A.every(function(t){return"interval"===t.markType})&&!gK(o),b=function(t){return t.__data__.x},w=!!a.x.getBandWidth&&A.length>0;l.sort(function(t,e){var n=c?0:1,r=function(t){return t.getBounds().min[n]};return c?r(e)-r(t):r(t)-r(e)});var x=function(t){var e=c?1:0,n=t.getLocalBounds(),r=n.min,i=n.max;return v$([r[e],i[e]])};m?i.sort(function(t,e){return b(t)-b(e)}):A.sort(function(t,e){var n=v(x(t),2),r=n[0],i=n[1],o=v(x(e),2),a=(r+i)/2,s=(o[0]+o[1])/2;return c?s-a:a-s});var E=new Map(l.map(function(t){var e=t.__data__.seriesX;return[t,[v$(e.map(function(t,e){return e}),function(t){return e[+t]}),e]]})),B=a.x,k=(null==B?void 0:B.getBandWidth)?B.getBandWidth()/2:0,C=function(t){return v(o.invert(t),1)[0]-k},M=function(t,e,n,r){var i=t._x,o=void 0!==i?B.map(i):C(e),a=r.filter(dG),s=v(v$([a[0],a[a.length-1]]),2),u=s[0],c=s[1];return!w&&(o<u||o>c)&&u!==c?null:n[(0,b$(function(t){return r[+t]}).center)(n,o)]},S=m?function(t,e){var n=e[(0,b$(b).center)(e,C(t))];return TK(e,b).get(b(n))}:function(t,e){var n=t[c?1:0],r=e.filter(function(t){var e=v(x(t),2),r=e[0],i=e[1];return n>=r&&n<=i});if(!w||r.length>0)return r;var i=b$(function(t){var e=v(x(t),2);return(e[0]+e[1])/2}).center;return[e[i(e,n)]].filter(dG)},F=function(t,e){var n=t.__data__;return Object.fromEntries(Object.entries(n).filter(function(t){var e=v(t,1)[0];return e.startsWith("series")&&"series"!==e}).map(function(t){var n=v(t,2),r=n[0],i=n[1][e];return[Wb(r.replace("series","")),i]}))},T=o0(n,r);if(T){var P=[T[0]-s,T[1]-u];if(P){for(var I=S(P,A),N=[],L=[],_=0,Q=l;_<Q.length;_++){var U=Q[_],j=v(E.get(U),2),D=j[0],R=j[1],H=M(r,P,D,R);if(null!==H){N.push(U);var z=F(U,H),K=z.x,G=z.y,V=o.map([(K||0)+k,G||0]);L.push([Object.assign(Object.assign({},z),{element:U}),V])}}var W=Array.from(new Set(L.map(function(t){return t[0].x}))),Y=W[p2(W,function(t){return Math.abs(t-C(P))})],X=L.filter(function(t){return t[0].x===Y}),q=[].concat(O(X.map(function(t){return t[0]})),O(I.map(function(t){return t.__data__})));return{selectedElements:[].concat(N,O(I)),selectedData:q,filteredSeriesData:X,abstractX:C}}}}function D8(t,e){var n=e.elements,r=e.sort,i=e.filter,o=e.scale,a=e.coordinate,s=e.crosshairs,u=e.crosshairsX,c=e.crosshairsY,l=e.render,A=e.groupName,f=e.emitter,d=e.wait,h=void 0===d?50:d,p=e.leading,g=void 0===p||p,y=e.trailing,m=void 0!==y&&y,b=e.startX,w=void 0===b?0:b,x=e.startY,E=void 0===x?0:x,B=e.body,k=void 0===B||B,O=e.single,C=void 0===O||O,M=e.position,S=e.enterable,F=e.mount,T=e.bounding,P=e.theme,I=e.offset,N=e.disableNative,L=void 0!==N&&N,_=e.marker,Q=void 0===_||_,U=e.preserve,j=void 0!==U&&U,D=e.style,R=void 0===D?{}:D,H=e.css,z=void 0===H?{}:H,K=e.clickLock,G=void 0!==K&&K,V=e.disableAutoHide,W=void 0!==V&&V,Y=x8(e,["elements","sort","filter","scale","coordinate","crosshairs","crosshairsX","crosshairsY","render","groupName","emitter","wait","leading","trailing","startX","startY","body","single","position","enterable","mount","bounding","theme","offset","disableNative","marker","preserve","style","css","clickLock","disableAutoHide"]),X=n(t),q=Xm(R,Y),Z=gK(a),J=vK(a),$=a.getOptions(),tt=$.innerWidth,et=$.innerHeight,nt=$.width,rt=$.height,it=$.insetLeft,ot=$.insetTop,at=Iy(function(e){var n;if(!G||!t.getAttribute(E8)){var d=o0(t,e);if(d){var h=i0(t),p=h.min[0],g=h.min[1],y=j8({root:t,event:e,elements:X,coordinate:a,scale:o,startX:w,startY:E}),m=y.selectedElements,b=y.selectedData,x=y.filteredSeriesData,B=y.abstractX,O=T8(m,o,A,b,P);if(r&&O.items.sort(function(t,e){return r(t)-r(e)}),i&&(O.items=O.items.filter(i)),0===m.length||Q8(O))st(e);else{if(k&&k8({root:t,data:O,x:d[0]+p,y:d[1]+g,render:l,event:e,single:C,position:M,enterable:S,mount:F,bounding:T,css:z,offset:I}),s||u||c){var N=hG(q,"crosshairs"),L=Object.assign(Object.assign({},N),hG(q,"crosshairsX")),_=Object.assign(Object.assign({},N),hG(q,"crosshairsY")),U=x.map(function(t){return t[1]});u&&function(t,e,n,r){var i=r.plotWidth,o=r.plotHeight,a=r.mainWidth,s=r.mainHeight,u=r.startX,c=r.startY,l=r.transposed,A=r.polar,f=r.insetLeft,d=r.insetTop,h=x8(r,["plotWidth","plotHeight","mainWidth","mainHeight","startX","startY","transposed","polar","insetLeft","insetTop"]),p=Object.assign({lineWidth:1,stroke:"#1b1e23",strokeOpacity:.5},h),g=function(t,e){if(1===e.length)return e[0];var n=e.map(function(e){return kG(e,t)}),r=p2(n,function(t){return t});return e[r]}(n,e);if(A){var y=function(){var t=u+f+a/2,e=c+d+s/2;return[t,e,kG([t,e],g)]}(),m=v(y,3),b=m[0],w=m[1],x=m[2],E=t.ruleX||function(e,n,r){var i=new Pu({style:Object.assign({cx:e,cy:n,r},p)});return t.appendChild(i),i}(b,w,x);E.style.cx=b,E.style.cy=w,E.style.r=x,t.ruleX=E}else{var B=v(l?[u+g[0],u+g[0],c,c+o]:[u,u+i,g[1]+c,g[1]+c],4),k=B[0],O=B[1],C=B[2],M=B[3],S=t.ruleX||function(e,n,r,i){var o=new Ru({style:Object.assign({x1:e,x2:n,y1:r,y2:i},p)});return t.appendChild(o),o}(k,O,C,M);S.style.x1=k,S.style.x2=O,S.style.y1=C,S.style.y2=M,t.ruleX=S}}(t,U,d,Object.assign(Object.assign({},L),{plotWidth:tt,plotHeight:et,mainWidth:nt,mainHeight:rt,insetLeft:it,insetTop:ot,startX:w,startY:E,transposed:J,polar:Z})),c&&function(t,e,n){var r,i=n.plotWidth,o=n.plotHeight,a=n.mainWidth,s=n.mainHeight,u=n.startX,c=n.startY,l=n.transposed,A=n.polar,f=n.insetLeft,d=n.insetTop,h=x8(n,["plotWidth","plotHeight","mainWidth","mainHeight","startX","startY","transposed","polar","insetLeft","insetTop"]),p=Object.assign({lineWidth:1,stroke:"#1b1e23",strokeOpacity:.5},h),g=e.map(function(t){return t[1]}),y=e.map(function(t){return t[0]}),m=v2(g),b=v2(y),w=function(){if(A){var t=Math.min(a,s)/2,e=u+f+a/2,n=c+d+s/2,r=OG(EG([b,m],[e,n]));return[e,e+t*Math.cos(r),n,n+t*Math.sin(r)]}return l?[u,u+i,m+c,m+c]:[b+u,b+u,c,c+o]}(),x=v(w,4),E=x[0],B=x[1],k=x[2],O=x[3];if(y.length>0){var C=t.ruleY||(r=new Ru({style:Object.assign({x1:E,x2:B,y1:k,y2:O},p)}),t.appendChild(r),r);C.style.x1=E,C.style.x2=B,C.style.y1=k,C.style.y2=O,t.ruleY=C}}(t,U,Object.assign(Object.assign({},_),{plotWidth:tt,plotHeight:et,mainWidth:nt,mainHeight:rt,insetLeft:it,insetTop:ot,startX:w,startY:E,transposed:J,polar:Z}))}if(Q){var j=hG(q,"marker");!function(t,e){var n=e.data,r=e.style,i=e.theme;t.markers&&t.markers.forEach(function(t){return t.remove()});var o,a=r.type,s=void 0===a?"":a,u=n.filter(function(t){var e=v(t,1)[0],n=e.x,r=e.y;return dG(n)&&dG(r)}).map(function(t){var e=v(t,2),n=e[0],o=n.color,a=n.element,u=e[1],c=o||a.style.fill||a.style.stroke||i.color,l="hollow"===s?"transparent":c,A="hollow"===s?c:"#fff";return new Pu({className:"".concat(bJ,"tooltip-marker"),style:Object.assign({cx:u[0],cy:u[1],fill:l,r:4,stroke:A,lineWidth:2,pointerEvents:"none"},r)})}),c=qn(u);try{for(c.s();!(o=c.n()).done;){var l=o.value;t.appendChild(l)}}catch(t){c.e(t)}finally{c.f()}t.markers=u}(t,{data:x,style:j,theme:P})}var D=null===(n=x[0])||void 0===n?void 0:n[0].x,R=null!=D?D:B(focus);f.emit("tooltip:show",Object.assign(Object.assign({},e),{nativeEvent:!0,data:Object.assign(Object.assign({},O),{data:{x:H$(o.x,R,!0)}})}))}}}},h,{leading:g,trailing:m}),st=function(e){G&&t.getAttribute(E8)||W||O8({root:t,single:C,emitter:f,event:e})},ut=function(){C8({root:t,single:C})},ct=function(e){var n,r=e.nativeEvent,i=e.data,s=e.offsetX,u=e.offsetY,c=x8(e,["nativeEvent","data","offsetX","offsetY"]);if(!r){var l=null===(n=null==i?void 0:i.data)||void 0===n?void 0:n.x,A=o.x.map(l),f=v(a.map([A,.5]),2),d=f[0],h=f[1],p=i0(t),g=p.min[0],y=p.min[1];at(Object.assign(Object.assign({},c),{offsetX:void 0!==s?s:g+d,offsetY:void 0!==u?u:y+h,_x:l}))}},lt=function(){O8({root:t,single:C,emitter:f,nativeEvent:!1})},At=function(){vt(),ut()},ft=function(e){o0(t,e)||st(e)},dt=function(){pt()},ht=function(e){G&&t.setAttribute(E8,!t.getAttribute(E8)),at(e)},pt=function(){L||(t.addEventListener("pointerdown",ht),t.addEventListener("pointerenter",at),t.addEventListener("pointermove",at),t.addEventListener("pointerleave",ft),t.addEventListener("pointerup",st))},vt=function(){L||(t.removeEventListener("pointerdown",ht),t.removeEventListener("pointerenter",at),t.removeEventListener("pointermove",at),t.removeEventListener("pointerleave",ft),t.removeEventListener("pointerup",st))};return pt(),f.on("tooltip:show",ct),f.on("tooltip:hide",lt),f.on("tooltip:disable",At),f.on("tooltip:enable",dt),function(){vt(),f.off("tooltip:show",ct),f.off("tooltip:hide",lt),f.off("tooltip:disable",At),f.off("tooltip:enable",dt),j?O8({root:t,single:C,emitter:f,nativeEvent:!1}):ut()}}function R8(t){var e=t.shared,n=t.crosshairs,r=t.crosshairsX,i=t.crosshairsY,o=t.series,a=(t.name,t.item),s=void 0===a?function(){return{}}:a,u=t.facet,c=void 0!==u&&u,l=x8(t,["shared","crosshairs","crosshairsX","crosshairsY","series","name","item","facet"]);return function(t,a,u){var A=t.container,f=t.view,d=f.scale,h=f.markState,p=f.coordinate,v=f.theme,g=L8(h,"seriesTooltip"),y=L8(h,"crosshairs"),m=r0(A),b=_8(o,g),w=_8(n,y);if(l.clickLock&&!c&&m.setAttribute(E8,!1),b&&function(t){return Array.from(t.values()).some(function(t){var e;return(null===(e=t.interaction)||void 0===e?void 0:e.seriesTooltip)&&t.tooltip})}(h)&&!c)return D8(m,Object.assign(Object.assign({},l),{theme:v,elements:t0,scale:d,coordinate:p,crosshairs:w,crosshairsX:_8(_8(r,n),!1),crosshairsY:_8(i,w),item:s,emitter:u}));if(b&&c){var x=a.filter(function(e){return e!==t&&e.options.parentKey===t.options.key}),E=e0(t,a),B=x[0].view.scale,k=m.getBounds(),O=k.min[0],C=k.min[1];Object.assign(B,{facet:!0});var M=m.parentNode.parentNode;return l.clickLock&&M.setAttribute(E8,!1),D8(M,Object.assign(Object.assign({},l),{theme:v,elements:function(){return E},scale:B,coordinate:p,crosshairs:_8(n,y),crosshairsX:_8(_8(r,n),!1),crosshairsY:_8(i,w),item:s,startX:O,startY:C,emitter:u}))}return function(t,e){var n=e.elements,r=e.coordinate,i=e.scale,o=e.render,a=e.groupName,s=e.sort,u=e.filter,c=e.emitter,l=e.wait,A=void 0===l?50:l,f=e.leading,d=void 0===f||f,h=e.trailing,p=void 0!==h&&h,v=e.groupKey,g=void 0===v?function(t){return t}:v,y=e.single,m=void 0===y||y,b=e.position,w=e.enterable,x=e.datum,E=e.view,B=e.mount,k=e.bounding,O=e.theme,C=e.offset,M=e.shared,S=void 0!==M&&M,F=e.body,T=void 0===F||F,P=e.disableNative,I=void 0!==P&&P,N=e.preserve,L=void 0!==N&&N,_=e.css,Q=void 0===_?{}:_,U=e.clickLock,j=void 0!==U&&U,D=e.disableAutoHide,R=void 0!==D&&D,H=n(t),z=TK(H,g),K=Iy(function(e){if(!j||!t.getAttribute(E8)){var n=U8({root:t,event:e,elements:H,coordinate:r,scale:i,shared:S});if(n){var l=g(n),A=z.get(l);if(A){var f=1!==A.length||S?T8(A,i,a,void 0,O):function(t){var e=t.__data__;if(rG(t))return function(t){var e,n,r,i,o,a,s,u=t.__data__,c=u.title,l=u.items,A=void 0===l?[]:l;if(A.some(function(t){return u8 in t})){var f=A.filter(dG).map(function(e){var n=e.color,r=void 0===n?S8(t):n,i=x8(e,["color"]);return Object.assign(Object.assign({},i),{color:r})}).map(M8);return Object.assign(Object.assign({},c&&{title:c}),{items:f})}var d=null!==(n=null===(e=null==u?void 0:u.normalized)||void 0===e?void 0:e.x)&&void 0!==n?n:0,h=null===(r=t.parentNode)||void 0===r?void 0:r.__data__,p=null!==(i=null==h?void 0:h.encode)&&void 0!==i?i:{},v=p.x,g=void 0===v?{}:v,y=p.y,m=void 0===y?{}:y,b=p.color,w=void 0===b?{}:b,x=g.value,E=void 0===x?[]:x,B=m.value,k=void 0===B?[]:B,O=w.value,C=void 0===O?[]:O,M=Math.min(Math.round(E.length*d),E.length-1);return{title:"".concat(E[M],", ").concat(k[M]),items:[{name:null!==(o=w.field)&&void 0!==o?o:"value",value:C[M],color:(null===(a=t.style)||void 0===a?void 0:a.fill)||(null===(s=t.getAttribute)||void 0===s?void 0:s.call(t,"color"))||"#000"}]}}(t);var n=e.title,r=e.items,i=(void 0===r?[]:r).filter(dG).map(function(e){var n=e.color,r=void 0===n?S8(t):n,i=x8(e,["color"]);return Object.assign(Object.assign({},i),{color:r})}).map(M8);return Object.assign(Object.assign({},n&&{title:n}),{items:i})}(A[0]);if(s&&f.items.sort(function(t,e){return s(t)-s(e)}),u&&(f.items=f.items.filter(u)),Q8(f))R||O8({root:t,single:m,emitter:c,event:e});else{var d=e.offsetX,h=e.offsetY;T&&k8({root:t,data:f,x:d,y:h,render:o,event:e,single:m,position:b,enterable:w,mount:B,bounding:k,css:Q,offset:C}),c.emit("tooltip:show",Object.assign(Object.assign({},e),{nativeEvent:!0,data:Object.assign(Object.assign({},f),{data:iG(n,E)})}))}}}else R||O8({root:t,single:m,emitter:c,event:e})}},A,{leading:d,trailing:p}),G=function(e){R||O8({root:t,single:m,emitter:c,event:e})},V=function(e){j&&t.setAttribute(E8,!t.getAttribute(E8)),K(e)},W=function(){I||(t.addEventListener("pointerdown",V),t.addEventListener("pointermove",K),t.addEventListener("pointerleave",G),t.addEventListener("pointerup",G))},Y=function(){I||(t.removeEventListener("pointerdown",V),t.removeEventListener("pointermove",K),t.removeEventListener("pointerleave",G),t.removeEventListener("pointerup",G))},X=function(e){var n=e.nativeEvent,r=e.offsetX,i=e.offsetY,o=e.data;if(!n){var a=o.data,s=x0(H,a,x);if(s){var u=s.getBBox(),c=u.x,l=u.y,A=u.width,f=u.height,d=t.getBBox();K({target:s,offsetX:void 0!==r?r+d.x:c+A/2,offsetY:void 0!==i?i+d.y:l+f/2})}}},q=function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).nativeEvent||O8({root:t,single:m,emitter:c,nativeEvent:!1})},Z=function(){Y(),C8({root:t,single:m})},J=function(){W()};return c.on("tooltip:show",X),c.on("tooltip:hide",q),c.on("tooltip:enable",J),c.on("tooltip:disable",Z),W(),function(){Y(),c.off("tooltip:show",X),c.off("tooltip:hide",q),c.off("tooltip:enable",J),c.off("tooltip:disable",Z),L?O8({root:t,single:m,emitter:c,nativeEvent:!1}):C8({root:t,single:m})}}(m,Object.assign(Object.assign({},l),{datum:c0(f),elements:t0,scale:d,coordinate:p,groupKey:e?function(t){return t.__data__.x}:void 0,item:s,emitter:u,view:f,theme:v,shared:e}))}}function H8(){return function(t,e,n){var r,i=t.container,o=t.view,a=t.options,s=V0(i),u=t0(i),c=v0(a,["active","inactive"]),l=g0(u,c0(o)),A=[],f=qn(s);try{var d=function(){var t,e=r.value,i=function(t){return e.attributes.data[t.__data__.index].label},a=function(t){return X0(t).scales[0].name}(e),s=G0(e),f=function(t){return o.scale[t]}(a),d=TK(u,function(t){return f.invert(t.__data__[a])}),h=e.attributes.state,p=(void 0===h?{}:h).inactive,g=void 0===p?{}:p,y=h0(c,l),m=y.setState,b=y.removeState,w={inactive:hG(g,"marker")},x={inactive:hG(g,"label")},E=h0(w),B=E.setState,k=E.removeState,O=h0(x),C=O.setState,M=O.removeState,S=function(t){var e,n=qn(s);try{for(n.s();!(e=n.n()).done;){var r=e.value,i=H0(r),o=z0(r);r===t||null===t?(k(i,"inactive"),M(o,"inactive")):(B(i,"inactive"),C(o,"inactive"))}}catch(t){n.e(t)}finally{n.f()}},F=function(t,e){var r,o=i(e),s=new Set(d.get(o)),c=qn(u);try{for(c.s();!(r=c.n()).done;){var l=r.value;s.has(l)?m(l,"active"):m(l,"inactive")}}catch(t){c.e(t)}finally{c.f()}S(e);var A=t.nativeEvent,f=void 0===A||A;f&&n.emit("legend:highlight",Object.assign(Object.assign({},t),{nativeEvent:f,data:{channel:a,value:o}}))},T=new Map,P=qn(s);try{var I=function(){var e=t.value,n=function(t){F(t,e)};e.addEventListener("pointerover",n),T.set(e,n)};for(P.s();!(t=P.n()).done;)I()}catch(t){P.e(t)}finally{P.f()}var N=function(t){var e,r=qn(u);try{for(r.s();!(e=r.n()).done;){var i=e.value;b(i,"inactive","active")}}catch(t){r.e(t)}finally{r.f()}S(null);var o=t.nativeEvent,a=void 0===o||o;a&&n.emit("legend:unhighlight",{nativeEvent:a})},L=function(t){var e=t.nativeEvent,n=t.data;if(!e){var r=n.channel,o=n.value;if(r===a){var u=s.find(function(t){return i(t)===o});u&&F({nativeEvent:!1},u)}}},_=function(t){t.nativeEvent||N({nativeEvent:!1})};e.addEventListener("pointerleave",N),n.on("legend:highlight",L),n.on("legend:unhighlight",_),A.push(function(){e.removeEventListener(N),n.off("legend:highlight",L),n.off("legend:unhighlight",_);var t,r=qn(T);try{for(r.s();!(t=r.n()).done;){var i=v(t.value,2),o=i[0],a=i[1];o.removeEventListener(a)}}catch(t){r.e(t)}finally{r.f()}})};for(f.s();!(r=f.n()).done;)d()}catch(t){f.e(t)}finally{f.f()}return function(){return A.forEach(function(t){return t()})}}}R8.props={reapplyWhenUpdate:!0};var z8=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function K8(t,e){var n=v(t,4),r=n[0],i=n[1],o=n[2],a=n[3],s=v(e,4),u=s[0],c=s[1],l=s[2],A=s[3];return!(u>o||l<r||c>a||A<i)}function G8(t,e){for(var n=0,r=Object.entries(e);n<r.length;n++){var i=v(r[n],2),o=i[0],a=i[1];t.style(o,a)}}var V8=nW(function(t){var e=t.attributes,n=e.x,r=e.y,i=e.width,o=e.height,a=e.class,s=(e.renders,e.handleSize),u=void 0===s?10:s,c=e.document,l=z8(e,["x","y","width","height","class","renders","handleSize","document"]);if(c&&void 0!==i&&void 0!==o&&void 0!==n&&void 0!==r){var A=u/2,f=function(t,e,n){t.handle||(t.handle=n.createElement("rect"),t.append(t.handle));var r=t.handle;return r.attr(e),r},d=hG(vG(l,"handleNW","handleNE"),"handleN"),h=d.render,p=void 0===h?f:h,v=z8(d,["render"]),g=hG(l,"handleE"),y=g.render,m=void 0===y?f:y,b=z8(g,["render"]),w=hG(vG(l,"handleSE","handleSW"),"handleS"),x=w.render,E=void 0===x?f:x,B=z8(w,["render"]),k=hG(l,"handleW"),O=k.render,C=void 0===O?f:O,M=z8(k,["render"]),S=hG(l,"handleNW"),F=S.render,T=void 0===F?f:F,P=z8(S,["render"]),I=hG(l,"handleNE"),N=I.render,L=void 0===N?f:N,_=z8(I,["render"]),Q=hG(l,"handleSE"),U=Q.render,j=void 0===U?f:U,D=z8(Q,["render"]),R=hG(l,"handleSW"),H=R.render,z=void 0===H?f:H,K=z8(R,["render"]),G=function(t){return function(){var e=nW(function(e){return function(t,e){var n=t.id,r=e(t,t.attributes,c);r.id=n,r.style.draggable=!0}(e,t)});return new e({})}},V=wG(t).attr("className",a).style("transform","translate(".concat(n,", ").concat(r,")")).style("draggable",!0);V.maybeAppend("selection","rect").style("draggable",!0).style("fill","transparent").call(G8,Object.assign(Object.assign({width:i,height:o},vG(l,"handle")),{transform:void 0})),V.maybeAppend("handle-n",G(p)).style("x",A).style("y",-A).style("width",i-u).style("height",u).style("fill","transparent").call(G8,v),V.maybeAppend("handle-e",G(m)).style("x",i-A).style("y",A).style("width",u).style("height",o-u).style("fill","transparent").call(G8,b),V.maybeAppend("handle-s",G(E)).style("x",A).style("y",o-A).style("width",i-u).style("height",u).style("fill","transparent").call(G8,B),V.maybeAppend("handle-w",G(C)).style("x",-A).style("y",A).style("width",u).style("height",o-u).style("fill","transparent").call(G8,M),V.maybeAppend("handle-nw",G(T)).style("x",-A).style("y",-A).style("width",u).style("height",u).style("fill","transparent").call(G8,P),V.maybeAppend("handle-ne",G(L)).style("x",i-A).style("y",-A).style("width",u).style("height",u).style("fill","transparent").call(G8,_),V.maybeAppend("handle-se",G(j)).style("x",i-A).style("y",o-A).style("width",u).style("height",u).style("fill","transparent").call(G8,D),V.maybeAppend("handle-sw",G(z)).style("x",-A).style("y",o-A).style("width",u).style("height",u).style("fill","transparent").call(G8,K)}});function W8(t,e){var n=e.brushed,r=void 0===n?function(){}:n,i=e.brushended,o=void 0===i?function(){}:i,a=e.brushcreated,s=void 0===a?function(){}:a,u=e.brushstarted,c=void 0===u?function(){}:u,l=e.brushupdated,A=void 0===l?function(){}:l,f=e.extent,d=void 0===f?function(t){var e=t.getBBox();return[0,0,e.width,e.height]}(t):f,h=e.brushRegion,p=void 0===h?function(t,e,n,r,i){return[t,e,n,r]}:h,g=e.reverse,y=void 0!==g&&g,m=e.fill,b=void 0===m?"#777":m,w=e.fillOpacity,x=void 0===w?"0.3":w,E=e.stroke,B=void 0===E?"#fff":E,k=e.selectedHandles,O=void 0===k?["handle-n","handle-e","handle-s","handle-w","handle-nw","handle-ne","handle-se","handle-sw"]:k,C=z8(e,["brushed","brushended","brushcreated","brushstarted","brushupdated","extent","brushRegion","reverse","fill","fillOpacity","stroke","selectedHandles"]),M=null,S=null,F=null,T=null,P=null,I=!1,N=v(d,4),L=N[0],_=N[1],Q=N[2],U=N[3];w0(t,"crosshair"),t.style.draggable=!0;var j=function(t,e,n){if(c(n),T&&T.remove(),P&&P.remove(),M=[t,e],y)return D();R()},D=function(){P=new zu({style:Object.assign(Object.assign({},C),{fill:b,fillOpacity:x,stroke:B,pointerEvents:"none"})}),T=new V8({style:{x:0,y:0,width:0,height:0,draggable:!0,document:t.ownerDocument},className:"mask"}),t.appendChild(P),t.appendChild(T)},R=function(){T=new V8({style:Object.assign(Object.assign({document:t.ownerDocument,x:0,y:0},C),{fill:b,fillOpacity:x,stroke:B,draggable:!0}),className:"mask"}),t.appendChild(T)},H=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];T&&T.remove(),P&&P.remove(),M=null,S=null,F=null,I=!1,T=null,P=null,o(t)},z=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=function(t,e,n,r,i){var o=v(i,4),a=o[0],s=o[1],u=o[2],c=o[3];return[Math.max(a,Math.min(t,n)),Math.max(s,Math.min(e,r)),Math.min(u,Math.max(t,n)),Math.min(c,Math.max(e,r))]}(t[0],t[1],e[0],e[1],d),o=v(i,4),a=o[0],s=o[1],u=o[2],c=o[3],l=v(p(a,s,u,c,d),4),A=l[0],f=l[1],h=l[2],g=l[3];return y?G(A,f,h,g):K(A,f,h,g),r(A,f,h,g,n),[A,f,h,g]},K=function(t,e,n,r){T.style.x=t,T.style.y=e,T.style.width=n-t,T.style.height=r-e},G=function(t,e,n,r){P.style.d="\n      M".concat(L,",").concat(_,"L").concat(Q,",").concat(_,"L").concat(Q,",").concat(U,"L").concat(L,",").concat(U,"Z\n      M").concat(t,",").concat(e,"L").concat(t,",").concat(r,"L").concat(n,",").concat(r,"L").concat(n,",").concat(e,"Z\n    "),T.style.x=t,T.style.y=e,T.style.width=n-t,T.style.height=r-e},V={"handle-n":{vector:[0,1,0,0],cursor:"ns-resize"},"handle-e":{vector:[0,0,1,0],cursor:"ew-resize"},"handle-s":{vector:[0,0,0,1],cursor:"ns-resize"},"handle-w":{vector:[1,0,0,0],cursor:"ew-resize"},"handle-nw":{vector:[1,1,0,0],cursor:"nwse-resize"},"handle-ne":{vector:[0,1,1,0],cursor:"nesw-resize"},"handle-se":{vector:[0,0,1,1],cursor:"nwse-resize"},"handle-sw":{vector:[1,0,0,1],cursor:"nesw-resize"}},W=function(t){return X(t)||Y(t)},Y=function(t){var e=t.id;return-1!==O.indexOf(e)&&new Set(Object.keys(V)).has(e)},X=function(t){return t===T.getElementById("selection")},q=function(e){var n=e.target,r=v(a0(t,e),2),i=r[0],o=r[1];if(!T||!W(n))return j(i,o,e),void(I=!0);W(n)&&(F=[i,o])},Z=function(e){var n=e.target,r=a0(t,e);if(M){if(!F)return z(M,r);if(X(n))return function(t){var e=function(t,e,n,r,i){return t+e<r?r-e:t+n>i?i-n:t},n=t[0]-F[0],r=t[1]-F[1],i=e(n,M[0],S[0],L,Q),o=e(r,M[1],S[1],_,U),a=[M[0]+i,M[1]+o],s=[S[0]+i,S[1]+o];z(a,s)}(r);var i=r[0]-F[0],o=r[1]-F[1],a=n.id;if(V[a]){var s=v(V[a].vector,4),u=s[0],c=s[1],l=s[2],A=s[3];return z([M[0]+i*u,M[1]+o*c],[S[0]+i*l,S[1]+o*A])}}},J=function(e){if(F){F=null;var n=T.style,r=n.x,i=n.y,o=n.width,a=n.height;return M=[r,i],S=[r+o,i+a],void A(r,i,r+o,i+a,e)}S=a0(t,e);var u=v(z(M,S),4),c=u[0],l=u[1],f=u[2],d=u[3];I=!1,s(c,l,f,d,e)},$=function(t){var e=t.target;T&&!W(e)&&H()},tt=function(e){var n=e.target;T&&W(n)&&!I?X(n)?w0(t,"move"):Y(n)&&w0(t,V[n.id].cursor):w0(t,"crosshair")},et=function(){w0(t,"default")};return t.addEventListener("dragstart",q),t.addEventListener("drag",Z),t.addEventListener("dragend",J),t.addEventListener("click",$),t.addEventListener("pointermove",tt),t.addEventListener("pointerleave",et),{mask:T,move:function(t,e,n,r){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];T||j(t,e,{}),M=[t,e],S=[n,r],z([t,e],[n,r],i)},remove:function(){T&&H(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])},destroy:function(){T&&H(!1),w0(t,"default"),t.removeEventListener("dragstart",q),t.removeEventListener("drag",Z),t.removeEventListener("dragend",J),t.removeEventListener("click",$),t.removeEventListener("pointermove",tt),t.removeEventListener("pointerleave",et)}}}function Y8(t,e,n){return e.filter(function(e){if(e===t)return!1;var r=e.options.interaction,i=void 0===r?{}:r;return Object.values(i).find(function(t){return t.brushKey===n})})}function X8(t,e,n){return Y8(t,e,n).map(function(t){return t.options})}function q8(t,e){var n=e.elements,r=e.selectedHandles,i=e.siblings,o=void 0===i?function(t){return[]}:i,a=e.datum,s=e.brushRegion,u=e.extent,c=e.reverse,l=e.scale,A=e.coordinate,f=e.series,d=void 0!==f&&f,h=e.key,p=void 0===h?function(t){return t}:h,g=e.bboxOf,y=void 0===g?function(t){var e=t.style;return{x:e.x,y:e.y,width:e.width,height:e.height}}:g,m=e.state,b=void 0===m?{}:m,w=e.emitter,x=z8(e,["elements","selectedHandles","siblings","datum","brushRegion","extent","reverse","scale","coordinate","series","key","bboxOf","state","emitter"]),E=n(t),B=o(t),k=B.flatMap(n),C=g0(E,a),M=hG(x,"mask"),S=h0(b,C),F=S.setState,T=S.removeState,P=new Map,I=y(t),N=I.width,L=I.height,_=I.x,Q=void 0===_?0:_,U=I.y,j=void 0===U?0:U,D=u||[0,0,N,L],R=function(){for(var t=0,e=[].concat(O(E),O(k));t<e.length;t++){var n=e[t];T(n,"active","inactive")}},H=function(t,e,n,r){var i,o,a=qn(B);try{for(a.s();!(o=a.n()).done;)null===(i=o.value.brush)||void 0===i||i.remove()}catch(t){a.e(t)}finally{a.f()}var s,u=new Set,c=qn(E);try{for(c.s();!(s=c.n()).done;){var l=s.value,A=l.getLocalBounds(),f=A.min,d=A.max,h=v(f,2),g=h[0],y=h[1],m=v(d,2);K8([g,y,m[0],m[1]],[t,e,n,r])?(F(l,"active"),u.add(p(l))):F(l,"inactive")}}catch(t){c.e(t)}finally{c.f()}var b,w=qn(k);try{for(w.s();!(b=w.n()).done;){var x=b.value;u.has(p(x))?F(x,"active"):F(x,"inactive")}}catch(t){w.e(t)}finally{w.f()}},z=function(){var t,e=qn(E);try{for(e.s();!(t=e.n()).done;){var n=t.value;T(n,"inactive")}}catch(t){e.e(t)}finally{e.f()}var r,i=qn(P.values());try{for(i.s();!(r=i.n()).done;)r.value.remove()}catch(t){i.e(t)}finally{i.f()}P.clear()},K=function(e,n,r,i){var o=function(t){var e=t.cloneNode();return e.__data__=t.__data__,t.parentNode.appendChild(e),P.set(t,e),e},a=new Yu({style:{x:e+Q,y:n+j,width:r-e,height:i-n}});t.appendChild(a);var s,u=qn(E);try{for(u.s();!(s=u.n()).done;){var c=s.value,l=P.get(c)||o(c);l.style.clipPath=a,F(c,"inactive"),F(l,"active")}}catch(t){u.e(t)}finally{u.f()}},G=W8(t,Object.assign(Object.assign({},M),{extent:D,brushRegion:s,reverse:c,selectedHandles:r,brushended:function(t){var e=d?z:R;t&&w.emit("brush:remove",{nativeEvent:!0}),e()},brushed:function(t,e,n,r,i){var o=K$(t,e,n,r,l,A);i&&w.emit("brush:highlight",{nativeEvent:!0,data:{selection:o}}),(d?K:H)(t,e,n,r)},brushcreated:function(t,e,n,r,i){var o=K$(t,e,n,r,l,A);w.emit("brush:end",Object.assign(Object.assign({},i),{nativeEvent:!0,data:{selection:o}}))},brushupdated:function(t,e,n,r,i){var o=K$(t,e,n,r,l,A);w.emit("brush:end",Object.assign(Object.assign({},i),{nativeEvent:!0,data:{selection:o}}))},brushstarted:function(t){w.emit("brush:start",t)}})),V=function(t){var e=t.nativeEvent,n=t.data;if(!e){var r=function(t,e,n){var r=e.x,i=e.y,o=v(t,2),a=o[0],s=o[1],u=G$(a,r),c=G$(s,i),l=[u[0],c[0]],A=[u[1],c[1]],f=v(n.map(l),2),d=f[0],h=f[1],p=v(n.map(A),2);return[d,h,p[0],p[1]]}(n.selection,l,A),i=v(r,4),o=i[0],a=i[1],s=i[2],u=i[3];G.move(o,a,s,u,!1)}};w.on("brush:highlight",V);var W=function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).nativeEvent||G.remove(!1)};w.on("brush:remove",W);var Y=G.destroy.bind(G);return G.destroy=function(){w.off("brush:highlight",V),w.off("brush:remove",W),Y()},G}function Z8(t){var e=t.facet,n=t.brushKey,r=z8(t,["facet","brushKey"]);return function(t,i,o){var a=t.container,s=t.view,u=t.options,c=r0(a),l={maskFill:"#777",maskFillOpacity:"0.3",maskStroke:"#fff",reverse:!1},A=["active",["inactive",{opacity:.5}]],f=s.scale,d=s.coordinate;if(e){var h=c.getBounds(),p=h.min[0],v=h.min[1],g=h.max[0],y=h.max[1];return q8(c.parentNode.parentNode,Object.assign(Object.assign({elements:function(){return e0(t,i)},datum:c0(n0(t,i).map(function(t){return t.view})),brushRegion:function(t,e,n,r){return[t,e,n,r]},extent:[p,v,g,y],state:v0(n0(t,i).map(function(t){return t.options}),A),emitter:o,scale:f,coordinate:d,selectedHandles:void 0},l),r))}var m=q8(c,Object.assign(Object.assign({elements:t0,key:function(t){return t.__data__.key},siblings:function(){return function(t,e,n){return Y8(t,e,n).map(function(t){return r0(t.container)})}(t,i,n)},datum:c0([s].concat(O(Y8(t,i,n).map(function(t){return t.view})))),brushRegion:function(t,e,n,r){return[t,e,n,r]},extent:void 0,state:v0([u].concat(O(X8(t,i,n))),A),emitter:o,scale:f,coordinate:d,selectedHandles:void 0},l),r));return c.brush=m,function(){return m.destroy()}}}function J8(t,e,n,r,i){var o=v(i,4);return[t,o[1],n,o[3]]}function $8(t){return Z8(Object.assign(Object.assign({},t),{brushRegion:J8,selectedHandles:["handle-e","handle-w"]}))}function t9(t,e,n,r,i){var o=v(i,3);return[o[0],e,o[2],r]}function e9(t){return Z8(Object.assign(Object.assign({},t),{brushRegion:t9,selectedHandles:["handle-n","handle-s"]}))}Z8.props={reapplyWhenUpdate:!0};var n9=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},r9="axis",i9="axis-line",o9="axis-main-group",a9="axis-hot-area";function s9(t){return t.getElementsByClassName(r9)}function u9(t){return t.getElementsByClassName(i9)[0]}function c9(t){return function(t){return t.getElementsByClassName(o9)[0]}(t).getLocalBounds()}function l9(t,e){var n=e.cross,r=e.offsetX,i=(e.offsetY,n9(e,["cross","offsetX","offsetY"])),o=c9(t),a=v(u9(t).getLocalBounds().min,1)[0],s=v(o.min,2),u=s[0],c=s[1],l=v(o.max,2),A=l[0],f=l[1],d=2*(A-u);return{brushRegion:t9,hotZone:new Yu({className:a9,style:Object.assign({width:n?d/2:d,transform:"translate(".concat((n?u:a-d/2).toFixed(2),", ").concat(c,")"),height:f-c},i)}),extent:n?function(t,e,n,r){return[-1/0,e,1/0,r]}:function(t,e,n,i){return[Math.floor(u-r),e,Math.ceil(A-r),i]}}}function A9(t,e){var n=e.offsetY,r=(e.offsetX,e.cross),i=void 0!==r&&r,o=n9(e,["offsetY","offsetX","cross"]),a=c9(t),s=v(u9(t).getLocalBounds().min,2)[1],u=v(a.min,2),c=u[0],l=u[1],A=v(a.max,2),f=A[0],d=A[1],h=d-l;return{brushRegion:J8,hotZone:new Yu({className:a9,style:Object.assign({width:f-c,height:i?h:2*h,transform:"translate(".concat(c,", ").concat(i?l:s-h,")")},o)}),extent:i?function(t,e,n,r){return[t,-1/0,n,1/0]}:function(t,e,r,i){return[t,Math.floor(l-n),r,Math.ceil(d-n)]}}}function f9(t,e){var n=e.axes,r=e.elements,i=e.points,o=e.horizontal,a=e.datum,s=e.offsetY,u=e.offsetX,c=e.reverse,l=void 0!==c&&c,A=e.state,f=void 0===A?{}:A,d=e.emitter,h=e.coordinate,p=n9(e,["axes","elements","points","horizontal","datum","offsetY","offsetX","reverse","state","emitter","coordinate"]),g=r(t),y=n(t),m=h0(f,g0(g,a)),b=m.setState,w=m.removeState,x=new Map,E=hG(p,"mask"),B=function(t){return Array.from(x.values()).every(function(e){var n=v(e,4),r=n[0],i=n[1],o=n[2],a=n[3];return t.some(function(t){var e=v(t,2),n=e[0],s=e[1];return n>=r&&n<=o&&s>=i&&s<=a})})},k=y.map(function(t){return t.attributes.scale}),C=function(t){return t.length>2?[t[0],t[t.length-1]]:t},M=new Map,S=function(){M.clear();for(var t=0;t<y.length;t++){var e=k[t].getOptions().domain;M.set(t,C(e))}};S();for(var F=function(t,e){var n,r=[],o=qn(g);try{for(o.s();!(n=o.n()).done;){var a=n.value,s=i(a);B(s)?(b(a,"active"),r.push(a)):b(a,"inactive")}}catch(t){o.e(t)}finally{o.f()}M.set(t,T(r,t)),e&&d.emit("brushAxis:highlight",{nativeEvent:!0,data:{selection:function(){if(!P)return Array.from(M.values());var t,e=[],n=qn(M);try{for(n.s();!(t=n.n()).done;){var r=v(t.value,2),i=r[0],o=r[1];"x"===k[i].getOptions().name?e[0]=o:e[1]=o}}catch(t){n.e(t)}finally{n.f()}return e}()}})},T=function(t,e){var n=k[e],r=n.getOptions().name,i=t.map(function(t){var e=t.__data__;return n.invert(e[r])});return C(z$(n,i))},P=y.some(o)&&y.some(function(t){return!o(t)}),I=[],N=function(t){var e=y[t],n=(o(e)?A9:l9)(e,{offsetY:s,offsetX:u,cross:P,zIndex:999,fill:"transparent"}),r=n.hotZone,i=n.brushRegion,a=n.extent;e.parentNode.appendChild(r);var c=W8(r,Object.assign(Object.assign({},E),{reverse:l,brushRegion:i,brushended:function(n){x.delete(e),0===Array.from(x.entries()).length?function(t){var e,n=qn(g);try{for(n.s();!(e=n.n()).done;){var r=e.value;w(r,"active","inactive")}}catch(t){n.e(t)}finally{n.f()}S(),t&&d.emit("brushAxis:remove",{nativeEvent:!0})}(n):F(t,n)},brushed:function(n,r,i,o,s){x.set(e,a(n,r,i,o)),F(t,s)}}));I.push(c)},L=0;L<y.length;L++)N(L);var _=function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).nativeEvent||I.forEach(function(t){return t.remove(!1)})},Q=function(t,e,n){var r=v(t,2),i=r[0],a=r[1],s=U(i,e,n),u=U(a,e,n)+function(t){return t.getStep?t.getStep():0}(e);return o(n)?[s,-1/0,u,1/0]:[-1/0,s,1/0,u]},U=function(t,e,n){var r=h.getOptions(),i=r.height,a=r.width,s=e.clone();return o(n)?s.update({range:[0,a]}):s.update({range:[i,0]}),s.map(t)},j=function(t){if(!t.nativeEvent)for(var e=t.data.selection,n=0;n<I.length;n++){var r=e[n],i=I[n],o=y[n];if(r){var a=k[n];i.move.apply(i,O(Q(r,a,o)).concat([!1]))}else i.remove(!1)}};return d.on("brushAxis:remove",_),d.on("brushAxis:highlight",j),function(){I.forEach(function(t){return t.destroy()}),d.off("brushAxis:remove",_),d.off("brushAxis:highlight",j)}}function d9(t){return function(e,n,r){var i=e.container,o=e.view,a=e.options,s=r0(i).getBBox(),u=s.x,c=s.y,l=o.coordinate;return f9(i,Object.assign({elements:t0,axes:s9,offsetY:c,offsetX:u,points:function(t){return t.__data__.points},horizontal:function(t){var e=t.attributes,n=v(e.startPos,2),r=n[0],i=n[1],o=v(e.endPos,2),a=o[0],s=o[1];return r!==a&&i===s},datum:c0(o),state:v0(a,["active",["inactive",{opacity:.5}]]),coordinate:l,emitter:r},t))}}var h9=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())})},p9=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function v9(t){var e=this,n=t.hideX,r=void 0===n||n,i=t.hideY,o=void 0===i||i,a=p9(t,["hideX","hideY"]);return function(t,n,i){var s=t.container,u=t.view,c=t.options,l=t.update,A=t.setState,f=r0(s),d=!1,h=!1,p=u,g=u.scale,y=u.coordinate;return function(t,e){var n=e.filter,r=e.reset,i=e.brushRegion,o=e.extent,a=e.reverse,s=e.emitter,u=(e.scale,e.coordinate,e.selection),c=(e.series,hG(p9(e,["filter","reset","brushRegion","extent","reverse","emitter","scale","coordinate","selection","series"]),"mask")),l=t.getBBox(),A=l.width,f=l.height,d=o||[0,0,A,f],h=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,e=null;return function(n){var r=n.timeStamp;return null!==e&&r-e<t?(e=r,!0):(e=r,!1)}}(),p=W8(t,Object.assign(Object.assign({},c),{extent:d,brushRegion:i,reverse:a,brushcreated:function(t,e,r,i,o){t===r&&e===i||(o.nativeEvent=!0,n(u(t,e,r,i),o),p.remove())}}));function v(t){h(t)&&(t.nativeEvent=!0,r(t))}t.addEventListener("click",v);var g=function(t){var e=t.nativeEvent,r=t.data;if(!e){var i=r.selection;n(i,{nativeEvent:!1})}};return s.on("brush:filter",g),function(){p.destroy(),s.off("brush:filter",g),t.removeEventListener("click",v)}}(f,Object.assign(Object.assign({brushRegion:function(t,e,n,r){return[t,e,n,r]},selection:function(t,e,n,r){var i=p;return K$(t,e,n,r,i.scale,i.coordinate)},filter:function(t,n){return h9(e,void 0,void 0,(0,Dn.A)().m(function e(){var a,s,u,f;return(0,Dn.A)().w(function(e){for(;;)switch(e.n){case 0:if(!h){e.n=1;break}return e.a(2);case 1:return h=!0,a=v(t,2),s=a[0],u=a[1],A("brushFilter",function(t){var e=t.marks.map(function(t){return Xm({axis:Object.assign(Object.assign({},r&&{x:{transform:[{type:"hide"}]}}),o&&{y:{transform:[{type:"hide"}]}})},t,{scale:{x:{domain:s,nice:!1},y:{domain:u,nice:!1}}})});return Object.assign(Object.assign({},c),{marks:e,clip:!0})}),i.emit("brush:filter",Object.assign(Object.assign({},n),{data:{selection:[s,u]}})),e.n=2,l();case 2:f=e.v,p=f.view,h=!1,d=!0;case 3:return e.a(2)}},e)}))},reset:function(t){if(!h&&d){var e=u.scale,n=e.x,r=e.y,o=n.getOptions().domain,a=r.getOptions().domain;i.emit("brush:filter",Object.assign(Object.assign({},t),{data:{selection:[o,a]}})),d=!1,p=u,A("brushFilter"),l()}},extent:void 0,emitter:i,scale:g,coordinate:y},{maskFill:"#777",maskFillOpacity:"0.3",maskStroke:"#fff",unhighlightedOpacity:.5,reverse:!1}),a))}}function g9(t){return v9(Object.assign(Object.assign({hideX:!0},t),{brushRegion:J8}))}function y9(t){return v9(Object.assign(Object.assign({hideY:!0},t),{brushRegion:t9}))}function m9(t,e,n){var r=t?n:e,i=t?e:n,o=R$(r),a=R$(i),s=i.getOptions().domain;return{currentScale:r,targetScale:i,isSourceDiscrete:o,isTargetDiscrete:a,shouldPreserveZeroBaseline:!a&&s&&s.length>=2&&0===s[0]}}function b9(t){return t instanceof Date?t.getTime():"string"==typeof t?parseFloat(t):Number(t)}function w9(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"filter",a=arguments.length>6&&void 0!==arguments[6]&&arguments[6];if(F0(o))return[];var s,u=a?"y":"x",c=a?"x":"y",l=[],A=qn(t);try{for(A.s();!(s=A.n()).done;){var f=s.value.channelData,d=f[u]||[],h=f[c]||[],p=Array.isArray(d[0])?d[0]:d,v=Array.isArray(h[0]);if(0!==p.length)for(var g=p.length,y=0;y<g;y++){var m=p[y],b=!1;if(n)b=e.includes(m);else if(e.length>=2){var w=b9(m),x=b9(e[0]),E=b9(e[e.length-1]);isNaN(w)||isNaN(x)||isNaN(E)||(b=w>=x&&w<=E)}if("filter"===o&&b)if(v)for(var B=h.length,k=0;k<B;k++){var C=h[k];if(Array.isArray(C)&&y<C.length){var M=b9(C[y]);isNaN(M)||l.push(M)}}else if(y<h.length){var S=b9(h[y]);isNaN(S)||l.push(S)}}}}catch(t){A.e(t)}finally{A.f()}return l.length>0?function(t){var e,n=t.isTargetDiscrete,r=t.filteredValues,i=t.shouldPreserveZeroBaseline;if(n)return e=r,Array.from(new Set(e)).sort(function(t,e){return t-e});var o=Math.min.apply(Math,O(r)),a=Math.max.apply(Math,O(r));return i?[0,a]:[o,a]}({isTargetDiscrete:r,filteredValues:l,shouldPreserveZeroBaseline:i}):[]}function x9(t,e,n,r){r&&e instanceof Map?e.forEach(function(e,n){e&&Array.isArray(e)&&e.length>0&&(t[n]=e)}):!r&&Array.isArray(e)&&e.length>0&&(t[n?"x":"y"]=e)}var E9=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())})},B9="slider";function k9(t){var e,n,r,i;if(!(null==t?void 0:t.markState))return 0;var o,a=0,s=qn(t.markState.entries());try{for(s.s();!(o=s.n()).done;){var u=v(o.value,2),c=u[0],l=u[1];if("point"===c.type&&(null==l?void 0:l.channels)){var A=null===(e=l.channels)||void 0===e?void 0:e.find(function(t){return"size"===t.name});if(A)if((null===(r=null===(n=A.scale)||void 0===n?void 0:n.range)||void 0===r?void 0:r.length)>0){var f=Math.max.apply(Math,O(A.scale.range.filter(function(t){return"number"==typeof t})));a=Math.max(a,f)}else if((null===(i=A.values)||void 0===i?void 0:i.length)>0){var d=A.values.filter(function(t){return void 0!==t.value}).flatMap(function(t){return Array.isArray(t.value)?t.value:[t.value]}).filter(function(t){return"number"==typeof t&&!isNaN(t)});d.length>0&&(a=Math.max.apply(Math,[a].concat(O(d))))}}}}catch(t){s.e(t)}finally{s.f()}return a}function O9(t,e,n,r,i,o,a){if(a){var s=o?r:i.x,u=o?i.y:r;t.emit(e,Object.assign(Object.assign({},n),{nativeEvent:a,data:{selection:[M9(s),M9(u)]}}))}}function C9(t,e,n,r){var i=r.domain0,o=r.filteredDomain,a=r.channel0,s=r.channel1,u=r.prefix,c=r.hasState,l=r.isMultiAxis,A=r.markToScaleMap,f=r.enableAdaptiveFiltering;l&&o instanceof Map?t(e,function(t){return Object.assign({},function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"x",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"y",s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:new Map,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:new Map,c=t.marks,l=k9(e),A=c.map(function(t){var e,c,l="string"==typeof(null==t?void 0:t.key)?t.key:String((null==t?void 0:t.key)||""),A=s.get(l),f=u.get(A),d=f&&{y:Object.assign({domain:f,nice:!0},"y"!==A?{independent:!0}:void 0)};return Xm({axis:{x:{transform:[{type:"hide"}]},y:{transform:[{type:"hide"}]}}},t,m(m({scale:Object.assign(Object.assign({},n),d)},r,Object.assign(Object.assign({},(null===(e=t[r])||void 0===e?void 0:e[o])&&m({},o,Object.assign({preserve:!0},i&&{ratio:null}))),(null===(c=t[r])||void 0===c?void 0:c[a])&&m({},a,{preserve:!0}))),"animate",!1))});return Object.assign(Object.assign({},t),{marks:A,insetLeft:l,insetRight:l,insetTop:l,insetBottom:l,clip:!0,animate:!1})}(t,n,m({},a,{domain:i,nice:!1}),u,c,a,s,A||new Map,o))}):t(e,function(t){return Object.assign({},function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"x",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"y",s=t.marks,u=k9(e),c=s.map(function(t){var e,s;return Xm({axis:{x:{transform:[{type:"hide"}]},y:{transform:[{type:"hide"}]}}},t,m(m({scale:n},r,Object.assign(Object.assign({},(null===(e=t[r])||void 0===e?void 0:e[o])&&m({},o,Object.assign({preserve:!0},i&&{ratio:null}))),(null===(s=t[r])||void 0===s?void 0:s[a])&&m({},a,{preserve:!0}))),"animate",!1))});return Object.assign(Object.assign({},t),{marks:c,insetLeft:u,insetRight:u,insetTop:u,insetBottom:u,clip:!0,animate:!1})}(t,n,Object.assign(m({},a,{domain:i,nice:!1}),f&&Array.isArray(o)?m({},s,{domain:o,nice:!0}):{}),u,c,a,s))})}function M9(t){return[t[0],t[t.length-1]]}function S9(t){var e=t.initDomain,n=void 0===e?{}:e,r=t.className,i=void 0===r?B9:r,o=t.prefix,a=void 0===o?"slider":o,s=t.setValue,u=void 0===s?function(t,e){return t.setValues(e)}:s,c=t.hasState,l=void 0!==c&&c,A=t.wait,f=void 0===A?50:A,d=t.leading,h=void 0===d||d,p=t.trailing,g=void 0!==p&&p,y=t.adaptiveMode,m=void 0===y?"filter":y,b=t.getInitValues,w=void 0===b?function(t){var e,n=null===(e=null==t?void 0:t.attributes)||void 0===e?void 0:e.values;if(0!==n[0]||1!==n[1])return n}:b;return function(t,e,r){var o=t.container,s=t.view,c=t.update,A=t.setState,d=o.getElementsByClassName(i);if(!d.length)return function(){};var p,y=s.scale,b=s.coordinate,x=y.x,E=y.y,B=vK(b),k=function(t){var e="vertical"===t?"y":"x",n="vertical"===t?"x":"y";return B?[n,e]:[e,n]},O=new Map,C=new Set,M=I0(s),S=function(t,e,n,r,i){var o,a,s,u,c={x:e.x||n.getOptions().domain||[],y:e.y||r.getOptions().domain||[]},l=i||I0(t),A=l.hasIndependentX,f=l.hasIndependentY;if(A||f){var d,h=1,p=1,g=qn(t.markState.entries());try{for(g.s();!(d=g.n()).done;){var y=v(d.value,2),m=y[0],b=y[1];if(null==b?void 0:b.channels){if(A){var w=b.channels.find(function(t){return"x"===t.name});(null===(a=null===(o=null==m?void 0:m.scale)||void 0===o?void 0:o.x)||void 0===a?void 0:a.independent)&&(c["x".concat(h)]=w.scale.domain,h++)}if(f){var x=b.channels.find(function(t){return"y"===t.name});(null===(u=null===(s=null==m?void 0:m.scale)||void 0===s?void 0:s.y)||void 0===u?void 0:u.independent)&&(c["y".concat(p)]=x.scale.domain,p++)}}}}catch(t){g.e(t)}finally{g.f()}}return c}(s,n,x,E,M),F=Array.from(d),T=function(t){return F.some(function(e){var n=e.attributes.orientation;return v(k(n),1)[0]===t})},P=T("x")&&!T("y"),I=T("y")&&!T("x"),N=!F0(m)&&(P||I),L=qn(d);try{var _=function(){var t=p.value,e=t.attributes.orientation,n=v(k(e),2),i=n[0],o=n[1],d="".concat(a).concat(Gg(i),":filter"),b="x"===i,F=x.getOptions().ratio,T=E.getOptions().ratio,L=!1,_=function(t){var e=this,n=t.getFiltering,r=t.setFiltering,i=t.domainsOf,o=t.view,a=t.independentScaleInfo,s=t.enableAdaptiveFiltering,u=t.hasOnlyXSlider,c=t.hasOnlyYSlider,l=t.adaptiveMode,A=t.scaleX,f=t.scaleY,d=t.scale,h=t.channelDomain,p=t.channel0,g=t.channel1,y=t.isX,m=t.emitter,b=t.eventName,w=t.setState,x=t.slider,E=t.prefix,B=t.hasState,k=t.update;return Iy(function(t){return E9(e,void 0,void 0,(0,Dn.A)().m(function e(){var O,C,M,S,F,T,P,I,N,L,_,Q,U,j,D,R,H;return(0,Dn.A)().w(function(e){for(;;)switch(e.n){case 0:if(O=t.initValue,C=void 0!==O&&O,!n()||C){e.n=1;break}return e.a(2);case 1:return r(!0),M=t.nativeEvent,S=void 0===M||M,F=T0(o),T=F.markDataPairs,a["hasIndependent".concat(g.toUpperCase())]?(P=i(t),I=v(P,1),N=I[0],L=F9({view:o,domain0:N,shouldFilterXAxis:c&&!y,enableAdaptiveFiltering:s&&(u&&y||c&&!y),markDataPairs:T,adaptiveMode:l,scaleX:A,scaleY:f,scale:d,channelDomain:h,independentScaleInfo:a,channel0:p}),_=L.filteredDomain,Q=L.markToScaleMap,h[p]=N,O9(m,b,t,N,h,y,S),C9(w,x,o,{domain0:N,filteredDomain:_,channel0:p,channel1:g,prefix:E,hasState:B,isMultiAxis:!0,markToScaleMap:Q,enableAdaptiveFiltering:s})):(U=i(t),j=v(U,2),D=j[0],R=j[1],H=T9({domain0:D,domain1:R,shouldFilterXAxis:c&&!y,enableAdaptiveFiltering:s,markDataPairs:T,adaptiveMode:l,scaleX:A,scaleY:f,channelDomain:h,hasOnlyXSlider:u,hasOnlyYSlider:c,isX:y}),h[p]=D,O9(m,b,t,D,h,y,S),C9(w,x,o,{domain0:D,filteredDomain:H,channel0:p,channel1:g,prefix:E,hasState:B,isMultiAxis:!1,markToScaleMap:void 0,enableAdaptiveFiltering:s})),e.n=2,k();case 2:r(!1);case 3:return e.a(2)}},e)}))},t.wait,{leading:t.leading,trailing:t.trailing})}({getFiltering:function(){return L},setFiltering:function(t){L=t},domainsOf:function(t){if(t.data){var n=v(t.data.selection,2),r=n[0],a=void 0===r?M9(S.x):r,s=n[1],u=void 0===s?M9(S.y):s;return b?[z$(x,a,F),z$(E,u,T)]:[z$(E,u,T),z$(x,a,F)]}var c=function(t,e,n){var r=v(t,2),i=r[0],o=r[1],a=n?function(t){return 1-t}:function(t){return t};return z$(e,[H$(e,a(i),!0),H$(e,a(o),!1)])}(t.detail.value,y[i],B&&"horizontal"===e);return[c,S[o]]},view:s,independentScaleInfo:M,enableAdaptiveFiltering:N,hasOnlyXSlider:P,hasOnlyYSlider:I,adaptiveMode:m,scaleX:x,scaleY:E,scale:y,channelDomain:S,channel0:i,channel1:o,isX:b,emitter:r,eventName:d,setState:A,slider:t,prefix:a,hasState:l,update:c,wait:f,leading:h,trailing:g}),Q=function(e){if(!e.nativeEvent){var n=e.data,r=v(n.selection,2),i=r[0],o=r[1];t.dispatchEvent(new Is("valuechange",{data:n,nativeEvent:!1}));var a=b?V$(i,x):V$(o,E);u(t,a)}};r.on(d,Q),t.addEventListener("valuechange",_),O.set(t,_),C.add([d,Q]);var U=w(t);U&&t.dispatchEvent(new Is("valuechange",{detail:{value:U},nativeEvent:!1,initValue:!0}))};for(L.s();!(p=L.n()).done;)_()}catch(t){L.e(t)}finally{L.f()}return function(){var t,e=qn(O);try{for(e.s();!(t=e.n()).done;){var n=v(t.value,2),i=n[0],o=n[1];i.removeEventListener("valuechange",o)}}catch(t){e.e(t)}finally{e.f()}var a,s=qn(C);try{for(s.s();!(a=s.n()).done;){var u=v(a.value,2),c=u[0],l=u[1];r.off(c,l)}}catch(t){s.e(t)}finally{s.f()}}}}function F9(t){var e=t.view,n=t.domain0,r=t.shouldFilterXAxis,i=t.enableAdaptiveFiltering,o=t.markDataPairs,a=t.adaptiveMode,s=t.scaleX,u=t.scaleY,c=t.scale,l=t.channelDomain,A=t.independentScaleInfo,f=t.channel0,d=new Map,h=new Map;if(!i||0===o.length||!(null==n?void 0:n.length))return{filteredDomain:d,markToScaleMap:h};var p=Gb(e,"options.slider");if(Object.keys(p).length>0&&Object.prototype.hasOwnProperty.call(p,f)){var g=function(t,e,n,r,i){var o,a,s=t?r:n,u=(o=t?"x":"y",a={},Object.keys(i).forEach(function(t){(t===o||t.match(new RegExp("^".concat(o,"\\d+$"))))&&(a[t]=i[t])}),a),c=Object.keys(u),l=c.map(function(t){return e[t]}),A=R$(s),f=l.map(function(t){return R$(t)}),d=l.map(function(t,e){var n=t.getOptions().domain;return!f[e]&&n&&n.length>=2&&0===n[0]});return{currentScale:s,targetScales:l,isSourceDiscrete:A,isTargetDiscrete:f,shouldPreserveZeroBaseline:d,targetScaleKeys:c}}(r,c,s,u,l);(r?A.markToXScaleMap:A.markToYScaleMap).forEach(function(t,e){h.set(e,t)});var y=function(t){var e=t.markDataPairs,n=t.domain,r=t.scaleInfo,i=t.markToScaleMap,o=t.adaptiveMode,a=t.shouldFilterXAxis,s=void 0!==a&&a,u=new Map,c=r.isSourceDiscrete,l=r.isTargetDiscrete,A=r.shouldPreserveZeroBaseline,f=r.targetScaleKeys;return e.forEach(function(t){var e=i.get(t.markKey);if(e){var r=f.indexOf(e);if(-1!==r){var a=l[r],d=A[r],h=w9([t],n,c,a,d,o,s);u.set(e,h)}}}),u}({markDataPairs:o,domain:n,scaleInfo:g,markToScaleMap:h,adaptiveMode:a,isViewSlider:!0,shouldFilterXAxis:r});return x9(l,y,r,!0),{filteredDomain:y,markToScaleMap:h}}var m=function(t,e){var n,r=qn(t.markState.entries());try{for(r.s();!(n=r.n()).done;){var i=v(n.value,1)[0],o=Gb(i,"slider");if(Object.keys(o||{}).length>0&&Object.prototype.hasOwnProperty.call(o,e))return String(i.key||"")}}catch(t){r.e(t)}finally{r.f()}return null}(e,f);if(m){var b=m9(r,s,u),w=r?A.markToXScaleMap:A.markToYScaleMap,x=w.get(m)||"";if(x){h.set(m,x);var E=function(t,e,n,r,i,o){var a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7?arguments[7]:void 0,u=new Map;if(0===t.length||0===e.length)return u;var c=n.isSourceDiscrete,l=n.isTargetDiscrete,A=n.shouldPreserveZeroBaseline,f=s?t.filter(function(t){return s.get(t.markKey)===i}):t.filter(function(t){return t.markKey===r});if(0===f.length)return u;var d=w9(f,e,c,l,A,o,a);return u.set(i,d),u}(o,n,b,m,x,a,r,w);return{filteredDomain:E,markToScaleMap:h}}}return{filteredDomain:d,markToScaleMap:h}}function T9(t){var e=t.domain0,n=t.domain1,r=t.shouldFilterXAxis,i=t.enableAdaptiveFiltering,o=t.markDataPairs,a=t.adaptiveMode,s=t.scaleX,u=t.scaleY,c=t.channelDomain,l=t.hasOnlyXSlider,A=t.hasOnlyYSlider,f=t.isX,d=n;return i&&o.length>0&&(l&&f||A&&!f)&&(null==e?void 0:e.length)>0&&(d=function(t){var e=t.scaleInfo,n=t.adaptiveMode,r=t.shouldFilterXAxis,i=void 0!==r&&r;return w9(t.markDataPairs,t.domain,e.isSourceDiscrete,e.isTargetDiscrete,e.shouldPreserveZeroBaseline,n,i)}({markDataPairs:o,domain:e,scaleInfo:m9(r,s,u),adaptiveMode:a,shouldFilterXAxis:r}),x9(c,d,r,!1)),d}function P9(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.className,n=void 0===e?B9:e,r=t.setValue,i=void 0===r?function(t,e){return t.setValues(e)}:r,o=t.minRange,a=void 0===o?.01:o,s=t.wheelSensitivity,u=void 0===s?.05:s,c=t.x,l=void 0===c||c,A=t.y,f=void 0===A||A;return function(t){var e=t.container,r=vK(t.view.coordinate),o=function(t){var e;try{var n=null===(e=t.ownerDocument)||void 0===e?void 0:e.defaultView;if(!n||"function"!=typeof n.getContextService)return null;var r=n.getContextService().getDomElement();return r instanceof HTMLElement?r:null}catch(t){return null}}(e),s=Math.max(1e-6,Math.min(1,a)),c=e.getElementsByClassName(n);if(!c.length)return function(){};var A=function(t,e){return!0===t||!1!==t&&("shift"===t?e.shiftKey&&!e.ctrlKey&&!e.altKey:"ctrl"===t?e.ctrlKey&&!e.shiftKey&&!e.altKey:"alt"===t&&e.altKey&&!e.shiftKey&&!e.ctrlKey)},d=function(t,e){i(t,e),t.dispatchEvent(new Is("valuechange",{detail:{value:e},nativeEvent:!0}))},h=function(t,e,n,r,i){var o=(t-e)/n,a=Math.max(0,Math.min(1,o));return Math.max(r,Math.min(i,a))},p=function(t){if(o){var e=t.target;if(o.contains(e)){var n,i=o.getBoundingClientRect(),a=t.clientX-i.left,p=t.clientY-i.top,g=[],y=qn(c);try{for(y.s();!(n=y.n()).done;){var m=n.value,b=m.attributes,w=b.values,x=b.orientation;if(w){var E="horizontal"===x;A("x"==(r?E?"y":"x":E?"x":"y")?l:f,t)&&g.push(m)}}}catch(t){y.e(t)}finally{y.f()}if(0!==g.length){t.preventDefault(),t.stopPropagation();for(var B=0,k=g;B<k.length;B++){var O=k[B],C=O.attributes,M=C.values,S=C.orientation,F=C.x,T=C.y,P=C.trackLength,I=v(M,2),N=I[0],L=I[1],_=L-N,Q="horizontal"===S?h(a,F,P,N,L):h(p,T,P,N,L),U=u*S0(_),j=1+t.deltaY*U,D=Math.max(s,Math.min(1,_*j)),R=Q-D*((Q-N)/_),H=Q+D*((L-Q)/_);R<0?(R=0,H=Math.min(1,D)):H>1&&(H=1,R=Math.max(0,1-D)),d(O,[R,H])}}}}};return o&&o.addEventListener("wheel",p,{passive:!1,capture:!0}),function(){o&&o.removeEventListener("wheel",p,{capture:!0})}}}P9.props={reapplyWhenUpdate:!0};var I9="".concat(bJ,"scrollbar");function N9(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,n,r){var i=e.view;if(!e.container.getElementsByClassName(I9).length)return function(){};var o=i.scale,a=o.x,s=o.y,u={x:O(a.getOptions().domain),y:O(s.getOptions().domain)};return a.update({domain:a.getOptions().expectedDomain}),s.update({domain:s.getOptions().expectedDomain}),S9(Object.assign({initDomain:u,className:I9,prefix:"scrollbar",hasState:!0,setValue:function(t,e){return t.setValue(e[0])},getInitValues:function(t){var e=t.slider.attributes.values;if(0!==e[0]||1!==e[1])return e}},t))(e,n,r)}}var L9=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function _9(t,e,n){return"<".concat(t,' style="').concat(Object.entries(n).map(function(t){var e=v(t,2),n=e[0],r=e[1];return"".concat(function(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}(n),":").concat(r)}).join(";"),'">').concat(e,"</").concat(t,">")}var Q9={backgroundColor:"rgba(0,0,0,0.75)",color:"#fff",width:"max-content",padding:"1px 4px",fontSize:"12px",borderRadius:"2.5px",boxShadow:"0 3px 6px -4px rgba(0,0,0,0.12), 0 6px 16px 0 rgba(0,0,0,0.08), 0 9px 28px 8px rgba(0,0,0,0.05)"};function U9(t){return"text"===t.nodeName&&!!t.isOverflowing()}function j9(t){var e=t.offsetX,n=void 0===e?8:e,r=t.offsetY,i=void 0===r?8:r,o=L9(t,["offsetX","offsetY"]);return function(t){var e=t.container,r=v(e.getBounds().min,2),a=r[0],s=r[1],u=hG(o,"tip"),c=new Set,l=function(t){var r=t.target;if(U9(r)){var o=t.offsetX,l=t.offsetY,A=o+n-a,f=l+i-s;if(r.tip)return r.tip.style.x=A,void(r.tip.style.y=f);var d=r.style.text,h=new Uu({className:"poptip",style:{innerHTML:_9("div",d,Object.assign(Object.assign({},Q9),u)),x:A,y:f}});e.appendChild(h),r.tip=h,c.add(h)}else t.stopPropagation()},A=function(t){var e=t.target;U9(e)?e.tip&&(e.tip.remove(),e.tip=null,c.delete(e.tip)):t.stopPropagation()};return e.addEventListener("pointerover",l),e.addEventListener("pointerout",A),function(){e.removeEventListener("pointerover",l),e.removeEventListener("pointerout",A),c.forEach(function(t){return t.remove()})}}}j9.props={reapplyWhenUpdate:!0};const D9=Object.keys?function(t){return Object.keys(t)}:function(t){var e=[];return _x(t,function(n,r){mn(t)&&"prototype"===r||e.push(r)}),e},R9=function(t,e){if(!tn(t))return null;var n;if(mn(e)&&(n=e),Vm(e)&&(n=function(t){return function(t,e){var n=D9(e),r=n.length;if(pe(t))return!r;for(var i=0;i<r;i+=1){var o=n[i];if(e[o]!==t[o]||!(o in t))return!1}return!0}(t,e)}),n)for(var r=0;r<t.length;r+=1)if(n(t[r]))return t[r];return null};function H9(t){return null==t?null:z9(t)}function z9(t){if("function"!=typeof t)throw new Error;return t}function K9(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}var G9=(0,Dn.A)().m(V9);function V9(){var t,e,n,r,i,o;return(0,Dn.A)().w(function(a){for(;;)switch(a.n){case 0:n=[t=this];case 1:e=n.reverse(),n=[];case 2:if(!(t=e.pop())){a.n=4;break}return a.n=3,t;case 3:if(r=t.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);a.n=2;break;case 4:if(n.length){a.n=1;break}case 5:return a.a(2)}},G9,this)}function W9(t,e){t instanceof Map?(t=[void 0,t],void 0===e&&(e=X9)):void 0===e&&(e=Y9);for(var n,r,i,o,a,s=new J9(t),u=[s];n=u.pop();)if((i=e(n.data))&&(a=(i=Array.from(i)).length))for(n.children=i,o=a-1;o>=0;--o)u.push(r=i[o]=new J9(i[o])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(Z9)}function Y9(t){return t.children}function X9(t){return Array.isArray(t)?t[1]:null}function q9(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function Z9(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function J9(t){this.data=t,this.depth=this.height=0,this.parent=null}J9.prototype=W9.prototype=m({constructor:J9,count:function(){return this.eachAfter(K9)},each:function(t,e){var n,r=-1,i=qn(this);try{for(i.s();!(n=i.n()).done;){var o=n.value;t.call(e,o,++r,this)}}catch(t){i.e(t)}finally{i.f()}return this},eachAfter:function(t,e){for(var n,r,i,o=this,a=[o],s=[],u=-1;o=a.pop();)if(s.push(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r]);for(;o=s.pop();)t.call(e,o,++u,this);return this},eachBefore:function(t,e){for(var n,r,i=this,o=[i],a=-1;i=o.pop();)if(t.call(e,i,++a,this),n=i.children)for(r=n.length-1;r>=0;--r)o.push(n[r]);return this},find:function(t,e){var n,r=-1,i=qn(this);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(t.call(e,o,++r,this))return o}}catch(t){i.e(t)}finally{i.f()}},sum:function(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})},sort:function(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){return Array.from(this)},leaves:function(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t},links:function(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e},copy:function(){return W9(this).eachBefore(q9)}},Symbol.iterator,V9);var $9={depth:-1},t7={},e7={};function n7(t){return t.id}function r7(t){return t.parentId}function i7(){var t,e=n7,n=r7;function r(r){var i,o,a,s,u,c,l,A,f=Array.from(r),d=e,h=n,p=new Map;if(null!=t){var v,g=f.map(function(e,n){return function(t){var e=(t="".concat(t)).length;return a7(t,e-1)&&!a7(t,e-2)&&(t=t.slice(0,-1)),"/"===t[0]?t:"/".concat(t)}(t(e,n,r))}),y=g.map(o7),m=new Set(g).add(""),b=qn(y);try{for(b.s();!(v=b.n()).done;){var w=v.value;m.has(w)||(m.add(w),g.push(w),y.push(o7(w)),f.push(e7))}}catch(t){b.e(t)}finally{b.f()}d=function(t,e){return g[e]},h=function(t,e){return y[e]}}for(a=0,i=f.length;a<i;++a)o=f[a],c=f[a]=new J9(o),null!=(l=d(o,a,r))&&(l+="")&&(A=c.id=l,p.set(A,p.has(A)?t7:c)),null!=(l=h(o,a,r))&&(l+="")&&(c.parent=l);for(a=0;a<i;++a)if(l=(c=f[a]).parent){if(!(u=p.get(l)))throw new Error("missing: "+l);if(u===t7)throw new Error("ambiguous: "+l);u.children?u.children.push(c):u.children=[c],c.parent=u}else{if(s)throw new Error("multiple roots");s=c}if(!s)throw new Error("no root");if(null!=t){for(;s.data===e7&&1===s.children.length;)s=s.children[0],--i;for(var x=f.length-1;x>=0&&(c=f[x]).data===e7;--x)c.data=null}if(s.parent=$9,s.eachBefore(function(t){t.depth=t.parent.depth+1,--i}).eachBefore(Z9),s.parent=null,i>0)throw new Error("cycle");return s}return r.id=function(t){return arguments.length?(e=H9(t),r):e},r.parentId=function(t){return arguments.length?(n=H9(t),r):n},r.path=function(e){return arguments.length?(t=H9(e),r):t},r}function o7(t){var e=t.length;if(e<2)return"";for(;--e>1&&!a7(t,e););return t.slice(0,e)}function a7(t,e){if("/"===t[e]){for(var n=0;e>0&&"\\"===t[--e];)++n;if(!(1&n))return!0}return!1}function s7(t,e,n,r,i){var o,a,s=t.children,u=s.length,c=new Array(u+1);for(c[0]=a=o=0;o<u;++o)c[o+1]=a+=s[o].value;!function t(e,n,r,i,o,a,u){if(e>=n-1){var l=s[e];return l.x0=i,l.y0=o,l.x1=a,void(l.y1=u)}for(var A=c[e],f=r/2+A,d=e+1,h=n-1;d<h;){var p=d+h>>>1;c[p]<f?d=p+1:h=p}f-c[d-1]<c[d]-f&&e+1<d&&--d;var v=c[d]-A,g=r-v;if(a-i>u-o){var y=r?(i*g+a*v)/r:a;t(e,d,v,i,o,y,u),t(d,n,g,y,o,a,u)}else{var m=r?(o*g+u*v)/r:u;t(e,d,v,i,o,a,m),t(d,n,g,i,m,a,u)}}(0,u,t.value,e,n,r,i)}function u7(t,e,n,r,i){for(var o,a=t.children,s=-1,u=a.length,c=t.value&&(r-e)/t.value;++s<u;)(o=a[s]).y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*c}function c7(t,e,n,r,i){for(var o,a=t.children,s=-1,u=a.length,c=t.value&&(i-n)/t.value;++s<u;)(o=a[s]).x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*c}function l7(t,e,n,r,i){(1&t.depth?c7:u7)(t,e,n,r,i)}var A7=(1+Math.sqrt(5))/2;function f7(t,e,n,r,i,o){for(var a,s,u,c,l,A,f,d,h,p,v,g=[],y=e.children,m=0,b=0,w=y.length,x=e.value;m<w;){u=i-n,c=o-r;do{l=y[b++].value}while(!l&&b<w);for(A=f=l,v=l*l*(p=Math.max(c/u,u/c)/(x*t)),h=Math.max(f/v,v/A);b<w;++b){if(l+=s=y[b].value,s<A&&(A=s),s>f&&(f=s),v=l*l*p,(d=Math.max(f/v,v/A))>h){l-=s;break}h=d}g.push(a={value:l,dice:u<c,children:y.slice(m,b)}),a.dice?u7(a,n,r,i,x?r+=c*l/x:o):c7(a,n,r,x?n+=u*l/x:i,o),x-=l,m=b}return g}const d7=function t(e){function n(t,n,r,i,o){f7(e,t,n,r,i,o)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(A7),h7=function t(e){function n(t,n,r,i,o){if((a=t._squarify)&&a.ratio===e)for(var a,s,u,c,l,A=-1,f=a.length,d=t.value;++A<f;){for(u=(s=a[A]).children,c=s.value=0,l=u.length;c<l;++c)s.value+=u[c].value;s.dice?u7(s,n,r,i,d?r+=(o-r)*s.value/d:o):c7(s,n,r,d?n+=(i-n)*s.value/d:i,o),d-=s.value}else t._squarify=a=f7(e,t,n,r,i,o),a.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(A7);function p7(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function v7(){return 0}function g7(t){return function(){return t}}function y7(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[t.data.name];t.id=t.id||t.data.name,t.path=e,t.children&&t.children.forEach(function(n){n.id="".concat(t.id,"/").concat(n.data.name),n.path=[].concat(O(e),[n.data.name]),y7(n,n.path)})}function m7(t){var e=Gb(t,["data","name"]);e.replaceAll&&(t.path=e.replaceAll(".","/").split("/")),t.children&&t.children.forEach(function(t){m7(t)})}function b7(t,e,n){var r=n.value,i=function(t,e){var n={treemapBinary:s7,treemapDice:u7,treemapSlice:c7,treemapSliceDice:l7,treemapSquarify:d7,treemapResquarify:h7},r="treemapSquarify"===t?n[t].ratio(e):n[t];if(!r)throw new TypeError("Invalid tile method!");return r}(e.tile,e.ratio),o=function(t,e){return Array.isArray(t)?"function"==typeof e?i7().path(e)(t):i7()(t):W9(t)}(t,e.path);tn(t)?m7(o):y7(o),r?o.sum(function(t){return e.ignoreParentValue&&t.children?0:KV(r)(t)}).sort(e.sort):o.count(),function(){var t=d7,e=!1,n=1,r=1,i=[0],o=v7,a=v7,s=v7,u=v7,c=v7;function l(t){return t.x0=t.y0=0,t.x1=n,t.y1=r,t.eachBefore(A),i=[0],e&&t.eachBefore(p7),t}function A(e){var n=i[e.depth],r=e.x0+n,l=e.y0+n,A=e.x1-n,f=e.y1-n;A<r&&(r=A=(r+A)/2),f<l&&(l=f=(l+f)/2),e.x0=r,e.y0=l,e.x1=A,e.y1=f,e.children&&(n=i[e.depth+1]=o(e)/2,r+=c(e)-n,l+=a(e)-n,(A-=s(e)-n)<r&&(r=A=(r+A)/2),(f-=u(e)-n)<l&&(l=f=(l+f)/2),t(e,r,l,A,f))}return l.round=function(t){return arguments.length?(e=!!t,l):e},l.size=function(t){return arguments.length?(n=+t[0],r=+t[1],l):[n,r]},l.tile=function(e){return arguments.length?(t=z9(e),l):t},l.padding=function(t){return arguments.length?l.paddingInner(t).paddingOuter(t):l.paddingInner()},l.paddingInner=function(t){return arguments.length?(o="function"==typeof t?t:g7(+t),l):o},l.paddingOuter=function(t){return arguments.length?l.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):l.paddingTop()},l.paddingTop=function(t){return arguments.length?(a="function"==typeof t?t:g7(+t),l):a},l.paddingRight=function(t){return arguments.length?(s="function"==typeof t?t:g7(+t),l):s},l.paddingBottom=function(t){return arguments.length?(u="function"==typeof t?t:g7(+t),l):u},l.paddingLeft=function(t){return arguments.length?(c="function"==typeof t?t:g7(+t),l):c},l}().tile(i).size(e.size).round(e.round).paddingInner(e.paddingInner).paddingOuter(e.paddingOuter).paddingTop(e.paddingTop).paddingRight(e.paddingRight).paddingBottom(e.paddingBottom).paddingLeft(e.paddingLeft)(o);var a=o.descendants().map(function(t){return Object.assign(t,{id:t.id.replace(/^\//,""),x:[t.x0,t.x1],y:[t.y0,t.y1]})}),s=a.filter("function"==typeof e.layer?e.layer:function(t){return t.height===e.layer});return[s,a]}var w7=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())})},x7=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},E7={breadCrumbFill:"rgba(0, 0, 0, 0.85)",breadCrumbFontSize:12,breadCrumbY:12,activeFill:"rgba(0, 0, 0, 0.5)"};function B7(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.originData,r=void 0===n?[]:n,i=e.layout,o=x7(e,["originData","layout"]),a=Xm({},E7,o),s=hG(a,"breadCrumb"),u=hG(a,"active");return function(e){var n=e.update,o=e.setState,a=e.container,c=e.options,l=function(t){return wG(t).select(".".concat(O$)).node()}(a),A=c.marks[0].state,f=new _u;l.appendChild(f);var d=function(e,c){return w7(t,void 0,void 0,(0,Dn.A)().m(function t(){var A,h,p,v,g,y;return(0,Dn.A)().w(function(t){for(;;)switch(t.n){case 0:return f.removeChildren(),c&&(A="",h=s.y,p=0,v=[],g=l.getBBox().width,(y=e.map(function(t,n){A="".concat(A).concat(t,"/"),v.push(t);var r=new qu({name:A.replace(/\/$/,""),style:Object.assign(Object.assign({text:t,x:p,path:[].concat(v),depth:n},s),{y:h})});f.appendChild(r),p+=r.getBBox().width;var i=new qu({style:Object.assign(Object.assign({x:p,text:" / "},s),{y:h})});return f.appendChild(i),(p+=i.getBBox().width)>g&&(h=f.getBBox().height+s.y,p=0,r.attr({x:p,y:h}),p+=r.getBBox().width,i.attr({x:p,y:h}),p+=i.getBBox().width),n===Kq(e)-1&&i.remove(),r})).forEach(function(t,e){if(e!==Kq(y)-1){var n=Object.assign({},t.attributes);t.attr("cursor","pointer"),t.addEventListener("mouseenter",function(){t.attr(u)}),t.addEventListener("mouseleave",function(){t.attr(n)}),t.addEventListener("click",function(){d(Gb(t,["style","path"]),Gb(t,["style","depth"]))})}})),Y0(a,o),o("treemapDrillDown",function(t){var n=t.marks,o=e.join("/"),a=n.map(function(t){if("rect"!==t.type)return t;var e=r;if(c){var n=r.filter(function(t){var e=Gb(t,["id"]);return e&&(e.match("".concat(o,"/"))||o.match(e))}).map(function(t){return{value:0===t.height?Gb(t,["value"]):void 0,name:Gb(t,["id"])}}),a=i.paddingLeft,s=i.paddingBottom,u=i.paddingRight,l=Object.assign(Object.assign({},i),{paddingTop:(i.paddingTop||f.getBBox().height+10)/(c+1),paddingLeft:a/(c+1),paddingBottom:s/(c+1),paddingRight:u/(c+1),path:function(t){return t.name},layer:function(t){return t.depth===c+1}});e=b7(n,l,{value:"value"})[0]}else e=r.filter(function(t){return 1===t.depth});var A=[];return e.forEach(function(t){var e=t.path;A.push(IG(e))}),Xm({},t,{data:e,scale:{color:{domain:A}}})});return Object.assign(Object.assign({},t),{marks:a})}),t.n=1,n(void 0,["legendFilter"]);case 1:return t.a(2)}},t)}))},h=function(t){var e=t.target,n=e||{},i=n.markType,o=n.nodeName,a=n.attributes;if("rect"===i||o===Jn.TEXT){var s=o===Jn.TEXT&&!0===Gb(a,"isTreemapLabel")?function(t){return t.attributes.key.split("-")[0]}(e):function(t){return Gb(t,["__data__","key"])}(e),u=R9(r,function(t){return t.id===s});Gb(u,"height")&&d(Gb(u,"path"),Gb(u,"depth"))}};l.addEventListener("click",h);var p=D9(Object.assign(Object.assign({},A.active),A.inactive)),v=function(){k0(l).forEach(function(t){var e=Gb(t,["style","cursor"]),n=R9(r,function(e){return e.id===Gb(t,["__data__","key"])});if("pointer"!==e&&(null==n?void 0:n.height)){t.style.cursor="pointer";var i=Ux(t.attributes,p);t.addEventListener("mouseenter",function(){t.attr(A.active)}),t.addEventListener("mouseleave",function(){t.attr(Xm(i,A.inactive))})}})};return v(),l.addEventListener("mousemove",v),function(){f.remove(),l.removeEventListener("click",h),l.removeEventListener("mousemove",v)}}}var k7="partition",O7="markType",C7="path",M7="ancestor-node",S7="childNodeCount",F7={id:k7,encode:{x:"x",y:"y",key:C7,color:M7,value:"value",name:"name"},labels:[{style:{pointerEvents:"none"},text:"value",position:"inside",transform:[{type:"overflowHide"}]}],axis:{x:{title:"Time/Order",label:!0},y:!1},style:m(m({},O7,k7),S7,"childNodeCount"),state:{active:{zIndex:2},inactive:{zIndex:1}},legend:!1,coordinate:{type:"cartesian",grid:!1},interaction:{drillDown:!0}},T7=function(t){var e=t.encode,n=t.data,r=void 0===n?[]:n,i=t.layout,o=void 0===i?{}:i,a=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["encode","data","layout"]),s=o.fillParent,u=void 0===s||s,c=o.sort,l=Object.assign(Object.assign({},F7.encode),e),A=l.value,f=function(t){var e=t.data,n=t.encode,r=t.fillParent,i=t.sort,o=n.color;return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.valueField,r=void 0===n?"value":n,i=e.sort,o=e.fillParent,a=void 0===o||o,s=e.nameField,u=void 0===s?"name":s;if(!t||0===t.length)return[];var c=function(t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n={data:t,depth:e,parent:arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,children:[],x0:0,x1:0,value:t[r]||0};return t.children&&t.children.length>0&&(n.children=t.children.map(function(t){return c(t,n,e+1)})),n},l=[],A=0;return t.forEach(function(t){var e=c(t),n=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(r||0===t.depth)t.x0=r?e:0,t.x1=t.x0+t.value;else if(t.x0=e,a&&o>0){var s=t.parent?t.parent.children.reduce(function(t,e){return t+e.value},0):t.value,u=t.parent?t.parent.children.length:1,c=s>0?t.value/s:1/u;t.x1=e+o*c}else t.x1=e+t.value;var l=t.x0,A=t.x1-t.x0,f=i?O(t.children).sort(function(t,e){return i(t.data,e.data)}):t.children;if(a&&f.length>0){var d=t.children.reduce(function(t,e){return t+e.value},0);f.forEach(function(t){n(t,l,!1,A);var e=d>0?t.value/d:1/f.length;l+=A*e})}else f.forEach(function(t){n(t,l,!1,0),l+=t.x1-t.x0})};n(e,A,!0),A+=e.value;var o=function(t){l.push(function(t){for(var e,n,i,o=function(t){var e;return null!==(e=t[u])&&void 0!==e?e:t.name},a=[o(t.data)],s=t;s.parent;)a.unshift(o(s.parent.data)),s=s.parent;return Object.assign(Object.assign({},Ux(t.data,[r])),m(m(m(m(m(m(m(m({},C7,a),M7,null!==(i=null===(n=null===(e=s.parent)||void 0===e?void 0:e.data)||void 0===n?void 0:n[u])&&void 0!==i?i:t.data[u]),"name",t.data[u]),"depth",t.depth),"value",t.value),"x",[t.x0,t.x1]),"y",[t.depth,t.depth+1]),S7,t.children.length))}(t)),t.children.forEach(o)};o(e)}),l}(e,{valueField:n.value,fillParent:r,nameField:n.name,sort:i}).map(function(t){var e=Object.assign({},t);return o&&o!==M7&&(e[o]=t[o]),e})}({encode:l,data:r,fillParent:u,sort:c});return[Xm({},F7,Object.assign({type:"rect",data:f,encode:l,tooltip:{title:"path",items:[function(t){return{name:A,value:t[A]}}]},interaction:{elementHighlight:!0}},a))]};T7.props={};var P7=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())})},I7=function(t){return t.querySelectorAll(".element").filter(function(t){return(t.style||{})[O7]===k7})},N7={rootText:"root",style:{fill:"rgba(0, 0, 0, 0.6)",fontSize:11},y:4,active:{fill:"rgba(0, 0, 0, 0.4)"}};function L7(){var t=this,e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).breadCrumb,n=Xm({},N7,void 0===e?{}:e);return function(e){var r=e.update,i=e.setState,o=e.container,a=(e.view,e.options),s=o.ownerDocument,u=function(t){return wG(t).select(".".concat(O$)).node()}(o),c=a.marks.find(function(t){return t.id===k7});if(c){var l=c.state,A=s.createElement("g");A.style.transform="translate(".concat(n.x||0,"px, ").concat(n.y||0,"px)"),A.setAttribute("x","drilldown-breadcrumb"),u.appendChild(A);var f=function(e){return P7(t,void 0,void 0,(0,Dn.A)().m(function t(){var o,a,c,l,d,h,p;return(0,Dn.A)().w(function(t){for(;;)switch(t.n){case 0:return A.removeChildren(),e&&e.length>0&&(o=s.createElement("text",{style:Object.assign({text:n.rootText},n.style)}),A.appendChild(o),a="",c=e,l=n.style.y,d=o.getBBox().width,h=u.getBBox().width,p=c.map(function(t,e){var r=s.createElement("text",{style:Object.assign(Object.assign({x:d,text:" / "},n.style),{y:l})});A.appendChild(r),d+=r.getBBox().width,a="".concat(a).concat(t," / ");var i=s.createElement("text",{name:a.replace(/\s\/\s$/,""),style:Object.assign(Object.assign({text:t,x:d},n.style),{y:l})});return A.appendChild(i),(d+=i.getBBox().width)>h&&(l=A.getBBox().height,d=0,r.attr({x:d,y:l}),d+=r.getBBox().width,i.attr({x:d,y:l}),d+=i.getBBox().width),i}),[o].concat(O(p)).forEach(function(t,r){if(r!==p.length){var i=Object.assign({},t.attributes);t.attr("cursor","pointer"),t.addEventListener("mouseenter",function(){t.attr(n.active)}),t.addEventListener("mouseleave",function(){t.attr(i)}),t.addEventListener("click",function(){f(e.slice(0,r))})}})),i("drillDown",function(t){var n=t.marks.map(function(t){if(t.id!==k7&&"rect"!==t.type)return t;var n=t.data.filter(function(t){var n,r=null!==(n=t.path)&&void 0!==n?n:[];if(0===e.length)return!0;if(!Array.isArray(r)||r.length<e.length)return!1;for(var i=0;i<e.length;i++)if(r[i]!==e[i])return!1;return!0});return Xm({},t,{data:n})});return Object.assign(Object.assign({},t),{marks:n})}),t.n=1,r();case 1:return t.a(2)}},t)}))},d=function(t){var e,n,r=t.target,i=r.markType,o=r.style||{},a=o[O7],s=o[S7],u=r.__data__;if("rect"===i&&a===k7&&s){var c=null!==(n=null===(e=null==u?void 0:u.data)||void 0===e?void 0:e.path)&&void 0!==n?n:[];f(c)}};u.addEventListener("click",d);var h=D9(Object.assign(Object.assign({},l.active),l.inactive)),p=function(){I7(u).forEach(function(t){var e=Gb(t,["style",S7]);if("pointer"!==Gb(t,["style","cursor"])&&e){t.style.cursor="pointer";var n=Ux(t.attributes,h);t.addEventListener("mouseenter",function(){t.attr(l.active)}),t.addEventListener("mouseleave",function(){t.attr(Xm(n,l.inactive))})}})};return u.addEventListener("mousemove",p),function(){A.remove(),u.removeEventListener("click",d),u.removeEventListener("mousemove",p)}}}}var _7=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())})},Q7=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},U7={pointR:6,pointStrokeWidth:1,pointStroke:"#888",pointActiveStroke:"#f5f5f5",pathStroke:"#888",pathLineDash:[3,4],labelFontSize:12,labelFill:"#888",labelStroke:"#fff",labelLineWidth:1,labelY:-6,labelX:2},j7="movePoint",D7=function(t){var e=t.target,n=e.markType;"line"===n&&(e.attr("_lineWidth",e.attr("lineWidth")||1),e.attr("lineWidth",e.attr("_lineWidth")+3)),"interval"===n&&(e.attr("_opacity",e.attr("opacity")||1),e.attr("opacity",.7*e.attr("_opacity")))},R7=function(t){var e=t.target,n=e.markType;"line"===n&&e.attr("lineWidth",e.attr("_lineWidth")),"interval"===n&&e.attr("opacity",e.attr("_opacity"))},H7=function(t,e,n){return e.map(function(e){var r=["x","color"].reduce(function(r,i){var o=n[i];return o?e[o]===t[o]&&r:r},!0);return r?Object.assign(Object.assign({},e),t):e})},z7=function(t){var e=Gb(t,["__data__","y"]),n=Gb(t,["__data__","y1"])-e,r=t.parentNode,i=r.__data__,o=i.data,a=i.encode,s=i.transform,u=r.childNodes,c=R9(s,function(t){return"normalizeY"===t.type}),l=Gb(a,["y","field"]),A=o[u.indexOf(t)][l];return function(t){return c||arguments.length>1&&void 0!==arguments[1]&&arguments[1]?t/(1-t)/(n/(1-n))*A:t}},K7=function(t,e){var n=Gb(t,["__data__","seriesItems",e,"0","value"]),r=Gb(t,["__data__","seriesIndex",e]),i=t.parentNode.__data__,o=i.data,a=i.encode,s=i.transform,u=R9(s,function(t){return"normalizeY"===t.type}),c=Gb(a,["y","field"]),l=o[r][c];return function(t){return u?1===n?t:t/(1-t)/(n/(1-n))*l:t}},G7=function(t,e,n){t.forEach(function(t,r){t.attr("stroke",e[1]===r?n.activeStroke:n.stroke)})},V7=function(t,e,n,r){var i=new zu({style:n}),o=new qu({style:r});return e.appendChild(o),t.appendChild(i),[i,o]},W7=function(t,e){if(Gb(t,["options","range","indexOf"])){var n=t.options.range.indexOf(e);return t.sortedDomain[n]}},Y7=function(t,e,n){var r=E0(t,e),i=E0(t,n)/r;return[t[0]+(e[0]-t[0])*i,t[1]+(e[1]-t[1])*i]};function X7(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.selection,r=void 0===n?[]:n,i=e.precision,o=void 0===i?2:i,a=Q7(e,["selection","precision"]),s=Object.assign(Object.assign({},U7),a||{}),u=hG(s,"path"),c=hG(s,"label"),l=hG(s,"point");return function(e,n,i){var a,s=e.update,A=e.setState,f=e.container,d=e.view,h=e.options,p=h.marks,g=h.coordinate,y=r0(f),m=k0(y),b=r,w=g.transform,x=void 0===w?[]:w,E=g.type,B=!!R9(x,function(t){return"transpose"===t.type}),k="polar"===E,C="theta"===E,M=!!R9(m,function(t){return"area"===t.markType});M&&(m=m.filter(function(t){return"area"===t.markType}));var S=new _u({style:{zIndex:2}});y.appendChild(S);var F=function(){i.emit("element-point:select",{nativeEvent:!0,data:{selection:b}})},T=function(t,e){i.emit("element-point:moved",{nativeEvent:!0,data:{changeData:t,data:e}})},P=function(t){var e=t.target;b=[e.parentNode.childNodes.indexOf(e)],F(),N(e)},I=function(t){var e=t.data.selection;if(!t.nativeEvent){var n=Gb(m,[null==(b=e)?void 0:b[0]]);n&&N(n)}},N=function(e){var n=e.attributes,r=e.markType,i=e.__data__,h=n.stroke,g=i.points,y=i.seriesTitle,m=i.color,w=i.title,x=i.seriesX,E=i.y1;if(!B||"interval"===r){var P,I=(null==a?void 0:a.view)||d,L=I.scale,_=I.coordinate,Q=L.color,U=L.y,j=L.x,D=_.getCenter();S.removeChildren();var R=function(e,n,r,i){return _7(t,void 0,void 0,(0,Dn.A)().m(function t(){return(0,Dn.A)().w(function(t){for(;;)switch(t.n){case 0:return A("elementPointMove",function(t){var o,s=((null===(o=null==a?void 0:a.options)||void 0===o?void 0:o.marks)||p).map(function(t){if(!i.includes(t.type))return t;var o=t.data,a=t.encode,s=Object.keys(a).reduce(function(t,i){var o=a[i];return"x"===i&&(t[o]=e),"y"===i&&(t[o]=n),"color"===i&&(t[o]=r),t},{}),u=H7(s,o,a);return T(s,u),Xm({},t,{data:u,animate:!1})});return Object.assign(Object.assign({},t),{marks:s})}),t.n=1,s("elementPointMove");case 1:return t.a(2,t.v)}},t)}))};if(["line","area"].includes(r))g.forEach(function(n,r){var i=j.invert(x[r]);if(i){var s=new Pu({name:j7,style:Object.assign({cx:n[0],cy:n[1],fill:h},l)}),A=K7(e,r);s.addEventListener("mousedown",function(d){var h=_.output([x[r],0]),p=null==y?void 0:y.length;f.attr("cursor","move"),b[1]!==r&&(b[1]=r,F()),G7(S.childNodes,b,l);var w=v(V7(S,s,u,c),2),E=w[0],B=w[1],O=function(t){var e=n[1]+t.clientY-P[1];if(M)if(k){var i=n[0]+t.clientX-P[0],a=v(Y7(D,h,[i,e]),2),u=a[0],c=a[1],l=v(_.output([1,U.output(0)]),2)[1],f=v(_.invert([u,l-(g[r+p][1]-c)]),2)[1],d=(r+1)%p,m=B0([g[(r-1+p)%p],[u,c],y[d]&&g[d]]);B.attr("text",A(U.invert(f)).toFixed(o)),E.attr("d",m),s.attr("cx",u),s.attr("cy",c)}else{var b=v(_.output([1,U.output(0)]),2)[1],w=v(_.invert([n[0],b-(g[r+p][1]-e)]),2)[1],x=B0([g[r-1],[n[0],e],y[r+1]&&g[r+1]]);B.attr("text",A(U.invert(w)).toFixed(o)),E.attr("d",x),s.attr("cy",e)}else{var O=v(_.invert([n[0],e]),2)[1],C=B0([g[r-1],[n[0],e],g[r+1]]);B.attr("text",U.invert(O).toFixed(o)),E.attr("d",C),s.attr("cy",e)}};P=[d.clientX,d.clientY],window.addEventListener("mousemove",O);var C=function(){return _7(t,void 0,void 0,(0,Dn.A)().m(function t(){var n,r;return(0,Dn.A)().w(function(t){for(;;)switch(t.n){case 0:if(f.attr("cursor","default"),window.removeEventListener("mousemove",O),f.removeEventListener("mouseup",C),!pn(B.attr("text"))){t.n=1;break}return t.a(2);case 1:return n=Number(B.attr("text")),r=W7(Q,m),t.n=2,R(i,n,r,["line","area"]);case 2:a=t.v,B.remove(),E.remove(),N(e);case 3:return t.a(2)}},t)}))};f.addEventListener("mouseup",C)}),S.appendChild(s)}}),G7(S.childNodes,b,l);else if("interval"===r){var H=[(g[0][0]+g[1][0])/2,g[0][1]];B?H=[g[0][0],(g[0][1]+g[1][1])/2]:C&&(H=g[0]);var z=z7(e),K=new Pu({name:j7,style:Object.assign(Object.assign({cx:H[0],cy:H[1],fill:h},l),{stroke:l.activeStroke})});K.addEventListener("mousedown",function(n){f.attr("cursor","move");var i=W7(Q,m),s=v(V7(S,K,u,c),2),l=s[0],A=s[1],d=function(t){if(B){var e=H[0]+t.clientX-P[0],n=v(_.output([U.output(0),U.output(0)]),1)[0],r=v(_.invert([n+(e-g[2][0]),H[1]]),2)[1],i=B0([[e,g[0][1]],[e,g[1][1]],g[2],g[3]],!0);A.attr("text",z(U.invert(r)).toFixed(o)),l.attr("d",i),K.attr("cx",e)}else if(C){var a=H[1]+t.clientY-P[1],s=H[0]+t.clientX-P[0],u=v(Y7(D,[s,a],H),2),c=u[0],f=u[1],d=v(Y7(D,[s,a],g[1]),2),h=d[0],p=d[1],y=_.invert([c,f])[1],m=E-y;if(m<0)return;var b=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[["M"].concat(O(e[1]))],i=E0(t,e[1]),o=E0(t,e[0]);return 0===i?r.push(["L"].concat(O(e[3])),["A",o,o,0,n,1].concat(O(e[0])),["Z"]):r.push(["A",i,i,0,n,0].concat(O(e[2])),["L"].concat(O(e[3])),["A",o,o,0,n,1].concat(O(e[0])),["Z"]),r}(D,[[c,f],[h,p],g[2],g[3]],m>.5?1:0);A.attr("text",z(m,!0).toFixed(o)),l.attr("d",b),K.attr("cx",c),K.attr("cy",f)}else{var w=H[1]+t.clientY-P[1],x=v(_.output([1,U.output(0)]),2)[1],k=v(_.invert([H[0],x-(g[2][1]-w)]),2)[1],M=B0([[g[0][0],w],[g[1][0],w],g[2],g[3]],!0);A.attr("text",z(U.invert(k)).toFixed(o)),l.attr("d",M),K.attr("cy",w)}};P=[n.clientX,n.clientY],window.addEventListener("mousemove",d);var h=function(){return _7(t,void 0,void 0,(0,Dn.A)().m(function t(){var n;return(0,Dn.A)().w(function(t){for(;;)switch(t.n){case 0:if(f.attr("cursor","default"),f.removeEventListener("mouseup",h),window.removeEventListener("mousemove",d),!pn(A.attr("text"))){t.n=1;break}return t.a(2);case 1:return n=Number(A.attr("text")),t.n=2,R(w,n,i,[r]);case 2:a=t.v,A.remove(),l.remove(),N(e);case 3:return t.a(2)}},t)}))};f.addEventListener("mouseup",h)}),S.appendChild(K)}}};m.forEach(function(t,e){b[0]===e&&N(t),t.addEventListener("click",P),t.addEventListener("mouseenter",D7),t.addEventListener("mouseleave",R7)});var L=function(t){var e=null==t?void 0:t.target;e&&(e.name===j7||m.includes(e))||(b=[],F(),S.removeChildren())};return i.on("element-point:select",I),i.on("element-point:unselect",L),f.addEventListener("mousedown",L),function(){S.remove(),i.off("element-point:select",I),i.off("element-point:unselect",L),f.removeEventListener("mousedown",L),m.forEach(function(t){t.removeEventListener("click",P),t.removeEventListener("mouseenter",D7),t.removeEventListener("mouseleave",R7)})}}}var q7=function(){return function(t){var e=t.children;if(!Array.isArray(e))return[];var n=t.x,r=void 0===n?0:n,i=t.y,o=void 0===i?0:i,a=t.width,s=t.height,u=t.data;return e.map(function(t){var e=t.data,n=t.x,i=t.y,c=t.width,l=t.height,A=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["data","x","y","width","height"]);return Object.assign(Object.assign({},A),{data:S2(e,u),x:null!=n?n:r,y:null!=i?i:o,width:null!=c?c:a,height:null!=l?l:s})})}};q7.props={};var Z7=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},J7=function(){return function(t){var e=t.children;if(!Array.isArray(e))return[];for(var n=t.direction,r=void 0===n?"row":n,i=t.ratio,o=void 0===i?e.map(function(){return 1}):i,a=t.padding,s=void 0===a?0:a,u=t.data,c=v("col"===r?["y","height","width","x"]:["x","width","height","y"],4),l=c[0],A=c[1],f=c[2],d=c[3],h=o.reduce(function(t,e){return t+e}),p=t[A]-s*(e.length-1),g=o.map(function(t){return p*(t/h)}),y=[],b=t[l]||0,w=0;w<g.length;w+=1){var x=e[w],E=x.data,B=Z7(x,["data"]),k=S2(E,u);y.push(Object.assign(m(m(m(m(m({},l,b),A,g[w]),d,t[d]||0),f,t[f]),"data",k),B)),b+=g[w]+s}return y}};J7.props={};var $7=function(){function t(e){x(this,t),this.$value=e}return B(t,[{key:"call",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this.$value=t.apply(void 0,[this.$value].concat(n)),this}},{key:"value",value:function(){return this.$value}}],[{key:"of",value:function(e){return new t(e)}}])}(),ttt=C2(function(t){var e=t.encode,n=t.data,r=t.scale,i=t.shareSize,o=void 0!==i&&i,a=e.x,s=e.y,u=function(t,e){var i;if(void 0===t||!o)return{};var a=TK(n,function(e){return e[t]}),s=(null===(i=null==r?void 0:r[e])||void 0===i?void 0:i.domain)||Array.from(a.keys()),u=s.map(function(t){return a.has(t)?a.get(t).length:1});return{domain:s,flex:u}};return{scale:{x:Object.assign(Object.assign({paddingOuter:0,paddingInner:.1,guide:void 0===a?null:{position:"top"}},void 0===a&&{paddingInner:0}),u(a,"x")),y:Object.assign(Object.assign({range:[0,1],paddingOuter:0,paddingInner:.1,guide:void 0===s?null:{position:"right"}},void 0===s&&{paddingInner:0}),u(s,"y"))}}}),ett=M2(function(t){for(var e,n,r,i=t.data,o=t.scale,a=t.legend,s=[t];s.length;){var u=s.shift(),c=u.children,l=u.encode,A=void 0===l?{}:l,f=u.scale,d=void 0===f?{}:f,h=u.legend,p=void 0===h?{}:h,g=A.color,y=d.color,m=p.color;void 0!==g&&(e=g),void 0!==y&&(n=y),void 0!==m&&(r=m),Array.isArray(c)&&s.push.apply(s,O(c))}var b="string"==typeof e?e:"",w=function(){var t,n=null===(t=null==o?void 0:o.color)||void 0===t?void 0:t.domain;if(void 0!==n)return[n];if(void 0===e)return[void 0];var r="function"==typeof e?e:function(t){return t[e]},a=i.map(r);return a.some(function(t){return"number"==typeof t})?[XG(a)]:[Array.from(new Set(a)),"ordinal"]}(),x=v(w,2),E=x[0],B=x[1];return Object.assign({encode:{color:{type:"column",value:null!=E?E:[]}},scale:{color:Xm({},n,{domain:E,type:B})}},void 0===a&&{legend:{color:Xm({title:b},r)}})}),ntt=C2(function(){return{animate:{enterType:"fadeIn"}}}),rtt=M2(function(){return{frame:!1,encode:{shape:"hollow"},style:{lineWidth:0}}}),itt=M2(function(){return{type:"cell"}}),ott=M2(function(t){var e={type:"custom",callback:function(){var e=t.data,n=t.encode,r=n.x,i=n.y,o=r?Array.from(new Set(e.map(function(t){return t[r]}))):[],a=i?Array.from(new Set(e.map(function(t){return t[i]}))):[];return function(){if(o.length&&a.length){var t,e=[],n=qn(o);try{for(n.s();!(t=n.n()).done;){var s,u=t.value,c=qn(a);try{for(c.s();!(s=c.n()).done;){var l=s.value;e.push(m(m({},r,u),i,l))}}catch(t){c.e(t)}finally{c.f()}}}catch(t){n.e(t)}finally{n.f()}return e}return o.length?o.map(function(t){return m({},r,t)}):a.length?a.map(function(t){return m({},i,t)}):void 0}()}};return{data:{type:"inline",value:t.data,transform:[e]}}}),att=M2(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:stt,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ctt,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ltt,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=t.data,a=t.encode,s=t.children,u=t.scale,c=t.x,l=void 0===c?0:c,A=t.y,f=void 0===A?0:A,d=t.shareData,h=void 0!==d&&d,p=t.key,g=o.value,y=a.x,m=a.y,b=u.color.domain;return{children:function(t,o,a){var u=o.x,c=o.y,A=a.paddingLeft,d=a.paddingTop,w=a.marginLeft,x=a.marginTop,E=u.getOptions().domain,B=c.getOptions().domain,k=ZG(t),O=t.map(e),C=t.map(function(t){var e=t.x,n=t.y;return[u.invert(e),c.invert(n)]}),M=C.map(function(t){var e=v(t,2),n=e[0],r=e[1];return function(t){var e=t[y],i=t[m];return!(void 0!==y&&e!==n||void 0!==m&&i!==r)}}),S=M.map(function(t){return g.filter(t)}),F=h?Bq(S,function(t){return t.length}):void 0,T=C.map(function(t){var e=v(t,2),n=e[0],r=e[1];return{columnField:y,columnIndex:E.indexOf(n),columnValue:n,columnValuesLength:E.length,rowField:m,rowIndex:B.indexOf(r),rowValue:r,rowValuesLength:B.length}}),P=T.map(function(t){return Array.isArray(s)?s:[s(t)].flat(1)});return k.flatMap(function(t){var e=v(O[t],4),o=e[0],a=e[1],s=e[2],u=e[3],c=T[t],h=S[t];return P[t].map(function(e){var v,E,B=e.scale,k=e.key,O=e.facet,C=void 0===O||O,M=e.axis,S=void 0===M?{}:M,T=(e.legend,function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(e,["scale","key","facet","axis","legend"])),P=(null===(v=null==B?void 0:B.y)||void 0===v?void 0:v.guide)||S.y,I=(null===(E=null==B?void 0:B.x)||void 0===E?void 0:E.guide)||S.x,N={x:{tickCount:y?5:void 0},y:{tickCount:m?5:void 0}},L=C?h:0===h.length?[]:g,_={color:{domain:b}},Q={x:Att(I,n)(c,L),y:Att(P,r)(c,L)};return Object.assign(Object.assign({key:"".concat(k,"-").concat(t),data:L,margin:0,x:o+A+l+w,y:a+d+f+x,parentKey:p,width:s,height:u,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,frame:!!L.length,dataDomain:F,scale:Xm(N,B,_),axis:Xm({},S,Q),legend:!1},T),i)})})}}});function stt(t){return SG(t.points)}function utt(t,e){return e.length?Xm({title:!1,tick:null,label:null},t):Xm({title:!1,tick:null,label:null,grid:null},t)}function ctt(t){return function(e,n){var r=e.rowIndex,i=e.rowValuesLength,o=e.columnIndex,a=e.columnValuesLength;if(r!==i-1)return utt(t,n);var s=o===a-1&&void 0,u=n.length?void 0:null;return Xm({title:s,grid:u},t)}}function ltt(t){return function(e,n){var r=e.rowIndex;if(0!==e.columnIndex)return utt(t,n);var i=0===r&&void 0,o=n.length?void 0:null;return Xm({title:i,grid:o},t)}}function Att(t,e){return"function"==typeof t?t:null===t||!1===t?function(){return null}:e(t)}var ftt=function(){return function(t){return[$7.of(t).call(itt).call(ett).call(ntt).call(ttt).call(rtt).call(ott).call(att).value()]}};ftt.props={};var dtt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},htt=C2(function(t){return{scale:{x:{guide:null,paddingOuter:0,paddingInner:.1},y:{guide:null,range:[0,1],paddingOuter:0,paddingInner:.1}}}}),ptt=M2(function(t){var e=t.data,n=t.children,r=t.x,i=void 0===r?0:r,o=t.y,a=void 0===o?0:o,s=t.key;return{children:function(t,r,o){var u=r.x,c=r.y,l=o.paddingLeft,A=o.paddingTop,f=o.marginLeft,d=o.marginTop,h=u.getOptions().domain,p=c.getOptions().domain,g=ZG(t),y=t.map(function(t){return SG(t.points)}),m=t.map(function(t){var e=t.x,n=t.y;return[u.invert(e),c.invert(n)]}),b=m.map(function(t){var e=v(t,2),n=e[0],r=e[1];return{columnField:n,columnIndex:h.indexOf(n),columnValue:n,columnValuesLength:h.length,rowField:r,rowIndex:p.indexOf(r),rowValue:r,rowValuesLength:p.length}}),w=b.map(function(t){return Array.isArray(n)?n:[n(t)].flat(1)});return g.flatMap(function(t){var n=v(y[t],4),r=n[0],o=n[1],u=n[2],c=n[3],h=v(m[t],2),p=h[0],g=h[1],x=b[t];return w[t].map(function(n){var h,v,y,m=n.scale,b=n.key,w=n.encode,E=n.axis,B=n.interaction,k=dtt(n,["scale","key","encode","axis","interaction"]),O=null===(h=null==m?void 0:m.y)||void 0===h?void 0:h.guide,C={x:(y=null===(v=null==m?void 0:m.x)||void 0===v?void 0:v.guide,"function"==typeof y?y:null===y?function(){return null}:function(t,e){if(t.rowIndex!==t.rowValuesLength-1)return utt(y,e)})(x,e),y:gtt(O)(x,e)};return Object.assign({data:e,parentKey:s,key:"".concat(b,"-").concat(t),x:r+l+i+f,y:o+A+a+d,width:u,height:c,margin:0,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,frame:!0,scale:Xm({x:{facet:!1},y:{facet:!1}},m),axis:Xm({x:{tickCount:5},y:{tickCount:5}},E,C),legend:!1,encode:Xm({},w,{x:p,y:g}),interaction:Xm({},B,{legendFilter:!1})},k)})})}}}),vtt=M2(function(t){var e,n=t.encode,r=dtt(t,["encode"]),i=n.position,o=void 0===i?[]:i,a=n.x,s=void 0===a?o:a,u=n.y,c=void 0===u?O(o).reverse():u,l=dtt(n,["position","x","y"]),A=[],f=qn([s].flat(1));try{for(f.s();!(e=f.n()).done;){var d,h=e.value,p=qn([c].flat(1));try{for(p.s();!(d=p.n()).done;){var v=d.value;A.push({$x:h,$y:v})}}catch(t){p.e(t)}finally{p.f()}}}catch(t){f.e(t)}finally{f.f()}return Object.assign(Object.assign({},r),{data:A,encode:Object.assign(Object.assign({},l),{x:"$x",y:"$y"}),scale:Object.assign(Object.assign({},1===[s].flat(1).length&&{x:{paddingInner:0}}),1===[c].flat(1).length&&{y:{paddingInner:0}})})});function gtt(t){return"function"==typeof t?t:null===t?function(){return null}:function(e,n){if(0!==e.columnIndex)return utt(t,n)}}var ytt=function(){return function(t){return[$7.of(t).call(itt).call(ett).call(ptt).call(vtt).call(ntt).call(rtt).call(htt).value()]}},mtt=C2(function(t){return{scale:{x:{guide:{type:"axisArc"},paddingOuter:0,paddingInner:.1},y:{guide:null,range:[0,1],paddingOuter:0,paddingInner:.1}}}}),btt=C2(function(t){return{coordinate:{type:"polar"}}}),wtt=function(t){var e=t.encode,n=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["encode"]),r=e.position;return Object.assign(Object.assign({},n),{encode:{x:r}})};function xtt(t){return function(t){return null}}function Ett(t){var e=v(t.points,4),n=e[0],r=e[1],i=e[2],o=e[3],a=kG(n,o),s=EG(n,o),u=MG(s,EG(r,i)),c=1/Math.sin(u/2),l=a/(1+c),A=l*Math.sqrt(2),f=v(i,2),d=f[0],h=f[1],p=CG(s)+u/2,g=l*c;return[d+g*Math.sin(p)-A/2,h-g*Math.cos(p)-A/2,A,A]}var Btt=function(){return function(t){return[$7.of(t).call(itt).call(wtt).call(ett).call(btt).call(ott).call(att,Ett,xtt,xtt,{frame:!1}).call(ntt).call(rtt).call(mtt).value()]}};function ktt(t,e,n){var r=[0,n],i=[1-n,1];return"normal"===t?r:"reverse"===t?i:"alternate"===t?e%2==0?r:i:"reverse-alternate"===t?e%2==0?i:r:void 0}var Ott=function(){return function(t){var e=t.children,n=void 0===e?[]:e,r=t.duration,i=void 0===r?1e3:r,o=t.iterationCount,a=void 0===o?1:o,s=t.direction,u=void 0===s?"normal":s,c=t.easing,l=void 0===c?"ease-in-out-sine":c,A=n.length;if(!Array.isArray(n)||0===A)return[];var f=n[0].key,d=n.map(function(t){return Object.assign(Object.assign({},t),{key:f})}).map(function(t){return function(t,e,n){for(var r=[t];r.length;){var i=r.pop();i.animate=Xm({enter:{duration:e},update:{duration:e,easing:n,type:"morphing",fill:"both"},exit:{type:"fadeOut",duration:e}},i.animate||{});var o=i.children;Array.isArray(o)&&r.push.apply(r,O(o))}return t}(t,i,l)});return(0,Dn.A)().m(function t(){var e,n,r,i,o,s,c,l;return(0,Dn.A)().w(function(t){for(;;)switch(t.n){case 0:e=0;case 1:if(!("infinite"===a||e<a)){t.n=6;break}r=ktt(u,e,A),i=v(r,2),o=i[0],s=i[1],c=o;case 2:if(!(c<s)){t.n=5;break}if(l=Math.abs(c),n===l){t.n=3;break}return t.n=3,d[l];case 3:n=l;case 4:c+=1,t.n=2;break;case 5:e++,t.n=1;break;case 6:return t.a(2)}},t)})}};function Ctt(t,e,n){var r=n.encode;if(null===t)return[e];var i=function(t){return Array.isArray(t)?t:[t]}(t).map(function(t){var e;return[t,null===(e=Ez(r,t))||void 0===e?void 0:e[0]]}).filter(function(t){return dG(v(t,2)[1])});return Array.from(TK(e,function(t){return i.map(function(e){return v(e,2)[1][t]}).join("-")}).values())}function Mtt(t){return Array.isArray(t)?function(t){return function(e,n,r){return function(n,r){return t.reduce(function(t,i){return 0!==t?t:p$(e[n][i],e[r][i])},0)}}}(t):"function"==typeof t?function(t){return function(e,n,r){return Ltt(function(n){return t(e[n])})}}(t):"series"===t?Ttt:"value"===t?Ptt:"sum"===t?Itt:"maxIndex"===t?Ntt:null}function Stt(t,e){var n,r=qn(t);try{for(r.s();!(n=r.n()).done;)n.value.sort(e)}catch(t){r.e(t)}finally{r.f()}}function Ftt(t,e){return(null==e?void 0:e.domain)||Array.from(new Set(t))}function Ttt(t,e,n){return Ltt(function(t){return n[t]})}function Ptt(t,e,n){return Ltt(function(t){return e[t]})}function Itt(t,e,n){var r=ZG(t),i=Array.from(TK(r,function(t){return n[+t]}).entries()),o=new Map(i.map(function(t){var n=v(t,2);return[n[0],n[1].reduce(function(t,n){return t+ +e[n]})]}));return Ltt(function(t){return o.get(n[t])})}function Ntt(t,e,n){var r=ZG(t),i=Array.from(TK(r,function(t){return n[+t]}).entries()),o=new Map(i.map(function(t){var n=v(t,2);return[n[0],P2(n[1],function(t){return e[t]})]}));return Ltt(function(t){return o.get(n[t])})}function Ltt(t){return function(e,n){return p$(t(e),t(n))}}Ott.props={};var _tt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.groupBy,n=void 0===e?"x":e,r=t.orderBy,i=void 0===r?null:r,o=t.reverse,a=void 0!==o&&o,s=t.y,u=void 0===s?"y":s,c=t.y1,l=void 0===c?"y1":c,A=t.series,f=void 0===A||A;return function(t,e){var r,o=e.data,s=e.encode,c=e.style,A=void 0===c?{}:c,d=v(Ez(s,"y"),2),h=d[0],p=d[1],g=v(Ez(s,"y1"),2),y=g[0],m=g[1],b=v(f?Bz(s,"series","color"):Ez(s,"color"),1)[0],w=Ctt(n,t,e),x=(null!==(r=Mtt(i))&&void 0!==r?r:function(){return null})(o,h,b);x&&Stt(w,x);var E,B=new Array(t.length),k=new Array(t.length),O=new Array(t.length),C=[],M=[],S=qn(w);try{for(S.s();!(E=S.n()).done;){var F=E.value;a&&F.reverse();var T,P=y?+y[F[0]]:0,I=[],N=[],L=qn(F);try{for(L.s();!(T=L.n()).done;){var _=T.value,Q=O[_]=+h[_]-P;Q<0?N.push(_):Q>=0&&I.push(_)}}catch(t){L.e(t)}finally{L.f()}for(var U=I.length>0?I:N,j=N.length>0?N:I,D=I.length-1,R=0;D>0&&0===h[U[D]];)D--;for(;R<j.length-1&&0===h[j[R]];)R++;C.push(U[D]),M.push(j[R]);var H,z=P,K=qn(N.reverse());try{for(K.s();!(H=K.n()).done;){var G=H.value,V=O[G];z=B[G]=(k[G]=z)+V}}catch(t){K.e(t)}finally{K.f()}for(var W=P,Y=0,X=I;Y<X.length;Y++){var q=X[Y],Z=O[q];Z>0?W=B[q]=(k[q]=W)+Z:B[q]=k[q]=W}}}catch(t){S.e(t)}finally{S.f()}var J,$=new Set(C),tt=new Set(M),et="y"===u?B:k,nt="y"===l?B:k;return J="point"===e.type?{y0:mz(h,p),y:yz(et,p)}:{y0:mz(h,p),y:yz(et,p),y1:yz(nt,m)},[t,Xm({},e,{encode:Object.assign({},J),style:Object.assign({first:function(t,e){return $.has(e)},last:function(t,e){return tt.has(e)}},A)})]}};function Qtt(t,e){var n=0;if(void 0===e){var r,i=qn(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;null!=o&&(o=+o)>=o&&++n}}catch(t){i.e(t)}finally{i.f()}}else{var a,s=-1,u=qn(t);try{for(u.s();!(a=u.n()).done;){var c=a.value;null!=(c=e(c,++s,t))&&(c=+c)>=c&&++n}}catch(t){u.e(t)}finally{u.f()}}return n}function Utt(t,e){var n=function(t,e){var n,r=0,i=0,o=0;if(void 0===e){var a,s=qn(t);try{for(s.s();!(a=s.n()).done;){var u=a.value;null!=u&&(u=+u)>=u&&(o+=(n=u-i)*(u-(i+=n/++r)))}}catch(t){s.e(t)}finally{s.f()}}else{var c,l=-1,A=qn(t);try{for(A.s();!(c=A.n()).done;){var f=c.value;null!=(f=e(f,++l,t))&&(f=+f)>=f&&(o+=(n=f-i)*(f-(i+=n/++r)))}}catch(t){A.e(t)}finally{A.f()}}if(r>1)return o/(r-1)}(t,e);return n?Math.sqrt(n):n}_tt.props={};var jtt=Array.prototype,Dtt=jtt.slice;function Rtt(t){return function(){return t}}jtt.map;var Htt=Math.sqrt(50),ztt=Math.sqrt(10),Ktt=Math.sqrt(2);function Gtt(t,e,n){var r,i,o,a=(e-t)/Math.max(0,n),s=Math.floor(Math.log10(a)),u=a/Math.pow(10,s),c=u>=Htt?10:u>=ztt?5:u>=Ktt?2:1;return s<0?(o=Math.pow(10,-s)/c,(r=Math.round(t*o))/o<t&&++r,(i=Math.round(e*o))/o>e&&--i,o=-o):(o=Math.pow(10,s)*c,(r=Math.round(t/o))*o<t&&++r,(i=Math.round(e/o))*o>e&&--i),i<r&&.5<=n&&n<2?Gtt(t,e,2*n):[r,i,o]}function Vtt(t,e,n){return Gtt(t=+t,e=+e,n=+n)[2]}function Wtt(t){return Math.max(1,Math.ceil(Math.log(Qtt(t))/Math.LN2)+1)}function Ytt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,i=arguments.length>4?arguments[4]:void 0;if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=void 0===i?y$:g$(i);r>n;){if(r-n>600){var o=r-n+1,a=e-n+1,s=Math.log(o),u=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*u*(o-u)/o)*(a-o/2<0?-1:1);Ytt(t,e,Math.max(n,Math.floor(e-a*u/o+c)),Math.min(r,Math.floor(e+(o-a)*u/o+c)),i)}var l=t[e],A=n,f=r;for(Xtt(t,n,e),i(t[r],l)>0&&Xtt(t,n,r);A<f;){for(Xtt(t,A,f),++A,--f;i(t[A],l)<0;)++A;for(;i(t[f],l)>0;)--f}0===i(t[n],l)?Xtt(t,n,f):Xtt(t,++f,r),f<=e&&(n=f+1),e<=f&&(r=f-1)}return t}function Xtt(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function qtt(t,e,n){if((r=(t=Float64Array.from(L$(t,n))).length)&&!isNaN(e=+e)){if(e<=0||r<2)return Eq(t);if(e>=1)return Bq(t);var r,i=(r-1)*e,o=Math.floor(i),a=Bq(Ytt(t,o).subarray(0,o+1));return a+(Eq(t.subarray(o+1))-a)*(i-o)}}function Ztt(t,e){return qtt(t,.5,e)}function Jtt(t,e){return function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:N$;if(!isNaN(e=+e)){if(r=Float64Array.from(t,function(e,r){return N$(n(t[r],r,t))}),e<=0)return p2(r);if(e>=1)return P2(r);var r,i=Uint32Array.from(t,function(t,e){return e}),o=r.length-1,a=Math.floor(o*e);return Ytt(i,a,0,o,function(t,e){return y$(r[t],r[e])}),a=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p$,r=!1;if(1===n.length){var i,o,a=qn(t);try{for(a.s();!(o=a.n()).done;){var s=o.value,u=n(s);(r?p$(u,i)>0:0===p$(u,u))&&(e=s,i=u,r=!0)}}catch(t){a.e(t)}finally{a.f()}}else{var c,l=qn(t);try{for(l.s();!(c=l.n()).done;){var A=c.value;(r?n(A,e)>0:0===n(A,A))&&(e=A,r=!0)}}catch(t){l.e(t)}finally{l.f()}}return e}(i.subarray(0,a+1),function(t){return r[t]}),a>=0?a:-1}}(t,.5,e)}function $tt(t,e){var n=0;if(void 0===e){var r,i=qn(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;(o=+o)&&(n+=o)}}catch(t){i.e(t)}finally{i.f()}}else{var a,s=-1,u=qn(t);try{for(u.s();!(a=u.n()).done;){var c=a.value;(c=+e(c,++s,t))&&(n+=c)}}catch(t){u.e(t)}finally{u.f()}}return n}function tet(t){return function(e){return null===e?t:"".concat(t," of ").concat(e)}}function eet(){return[function(t,e){return v2(t,function(t){return+e[t]})},tet("mean")]}function net(){return[function(t,e){return Ztt(t,function(t){return+e[t]})},tet("median")]}function ret(){return[function(t,e){return Bq(t,function(t){return+e[t]})},tet("max")]}function iet(){return[function(t,e){return Eq(t,function(t){return+e[t]})},tet("min")]}function oet(){return[function(t,e){return t.length},tet("count")]}function aet(){return[function(t,e){return $tt(t,function(t){return+e[t]})},tet("sum")]}function set(){return[function(t,e){return e[t[0]]},tet("first")]}function uet(){return[function(t,e){return e[t[t.length-1]]},tet("last")]}var cet=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.groupBy,n=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["groupBy"]);return function(t,r){var i=r.data,o=r.encode,a=e(t,r);if(!a)return[t,r];var s=Object.entries(n).map(function(t){var e=v(t,2),n=e[0],r=e[1],s=function(t){if("function"==typeof t)return[t,null];var e={mean:eet,max:ret,count:oet,first:set,last:uet,sum:aet,min:iet,median:net}[t];if(!e)throw new Error("Unknown reducer: ".concat(t,"."));return e()}(r),u=v(s,2),c=u[0],l=u[1],A=v(Ez(o,n),2),f=A[0],d=function(t,e){if(t)return t;var n=e.from;return n?v(Ez(o,n),2)[1]:t}(A[1],r),h=a.map(function(t){return c(t,null!=f?f:i)});return[n,Object.assign(Object.assign({},wz(h,(null==l?void 0:l(d))||d)),{aggregate:!0})]}),u=Object.keys(o).map(function(t){var e=v(Ez(o,t),2),n=e[0],r=e[1],i=a.map(function(t){return n[t[0]]});return[t,yz(i,r)]}),c=a.map(function(t){return i[t[0]]});return[ZG(a),Xm({},r,{data:c,encode:Object.fromEntries([].concat(O(u),O(s)))})]}};cet.props={};var Aet="thresholds";var fet=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.groupChannels,n=void 0===e?["color"]:e,r=t.binChannels,i=void 0===r?["x","y"]:r,o=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["groupChannels","binChannels"]),a={};return cet(Object.assign(Object.assign(Object.assign({},Object.fromEntries(Object.entries(o).filter(function(t){return!v(t,1)[0].startsWith(Aet)}))),Object.fromEntries(i.flatMap(function(t){var e=function(e){var n=v(e,1)[0];return+a[t].get(n).split(",")[1]};return e.from=t,[[t,function(e){var n=v(e,1)[0];return+a[t].get(n).split(",")[0]}],["".concat(t,"1"),e]]}))),{groupBy:function(t,e){var r=e.encode,s=i.map(function(t){return v(Ez(r,t),1)[0]}),u=hG(o,Aet),c=t.filter(function(t){return s.every(function(e){return dG(e[t])})}),l=[].concat(O(n.map(function(t){return v(Ez(r,t),1)[0]}).filter(dG).map(function(t){return function(e){return t[e]}})),O(i.map(function(t,e){var n,r,i,o,l=s[e],A=u[t]||(r=v(XG(n=l),2),i=r[0],o=r[1],Math.min(200,function(t,e,n){var r=Qtt(t),i=Utt(t);return r&&i?Math.ceil((n-e)*Math.cbrt(r)/(3.49*i)):1}(n,i,o))),f=function(){var t=FK,e=XG,n=Wtt;function r(r){Array.isArray(r)||(r=Array.from(r));var i,o,a,s=r.length,u=new Array(s);for(i=0;i<s;++i)u[i]=t(r[i],i,r);var c=e(u),l=c[0],A=c[1],f=n(u,l,A);if(!Array.isArray(f)){var d=A,h=+f;if(e===XG){var p=function(t,e,n){for(var r;;){var i=Vtt(t,e,n);if(i===r||0===i||!isFinite(i))return[t,e];i>0?(t=Math.floor(t/i)*i,e=Math.ceil(e/i)*i):i<0&&(t=Math.ceil(t*i)/i,e=Math.floor(e*i)/i),r=i}}(l,A,h),g=v(p,2);l=g[0],A=g[1]}if(f=function(t,e,n){if(!((n=+n)>0))return[];if((t=+t)===(e=+e))return[t];var r=e<t,i=v(r?Gtt(e,t,n):Gtt(t,e,n),3),o=i[0],a=i[1],s=i[2];if(!(a>=o))return[];var u=a-o+1,c=new Array(u);if(r)if(s<0)for(var l=0;l<u;++l)c[l]=(a-l)/-s;else for(var A=0;A<u;++A)c[A]=(a-A)*s;else if(s<0)for(var f=0;f<u;++f)c[f]=(o+f)/-s;else for(var d=0;d<u;++d)c[d]=(o+d)*s;return c}(l,A,h),f[0]<=l&&(a=Vtt(l,A,h)),f[f.length-1]>=A)if(d>=A&&e===XG){var y=Vtt(l,A,h);isFinite(y)&&(y>0?A=(Math.floor(A/y)+1)*y:y<0&&(A=(Math.ceil(A*-y)+1)/-y))}else f.pop()}for(var m=f.length,b=0,w=m;f[b]<=l;)++b;for(;f[w-1]>A;)--w;(b||w<m)&&(f=f.slice(b,w),m=w-b);var x,E=new Array(m+1);for(i=0;i<=m;++i)(x=E[i]=[]).x0=i>0?f[i-1]:l,x.x1=i<m?f[i]:A;if(isFinite(a)){if(a>0)for(i=0;i<s;++i)null!=(o=u[i])&&l<=o&&o<=A&&E[Math.min(m,Math.floor((o-l)/a))].push(r[i]);else if(a<0)for(i=0;i<s;++i)if(null!=(o=u[i])&&l<=o&&o<=A){var B=Math.floor((l-o)*a);E[Math.min(m,B+(f[B]<=o))].push(r[i])}}else for(i=0;i<s;++i)null!=(o=u[i])&&l<=o&&o<=A&&E[D$(f,o,0,m)].push(r[i]);return E}return r.value=function(e){return arguments.length?(t="function"==typeof e?e:Rtt(e),r):t},r.domain=function(t){return arguments.length?(e="function"==typeof t?t:Rtt([t[0],t[1]]),r):e},r.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Rtt(Array.isArray(t)?Dtt.call(t):t),r):n},r}().thresholds(A).value(function(t){return+l[t]})(c),d=new Map(f.flatMap(function(t){var e=t.x0,n=t.x1,r="".concat(e,",").concat(n);return t.map(function(t){return[t,r]})}));return a[t]=d,function(t){return d.get(t)}})));return Array.from(TK(c,function(t){return l.map(function(e){return e(t)}).join("-")}).values())}}))};fet.props={};var det=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.thresholds;return fet(Object.assign(Object.assign({},t),{thresholdsX:e,groupChannels:["color"],binChannels:["x"]}))};det.props={};var het=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.groupBy,n=void 0===e?"x":e,r=t.reverse,i=void 0!==r&&r,o=t.orderBy,a=t.padding;return function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}}(t,["groupBy","reverse","orderBy","padding"]),function(t,e){var r=e.data,s=e.encode,u=e.scale.series,c=v(Ez(s,"y"),1)[0],l=v(Bz(s,"series","color"),1)[0],A=Ftt(l,u),f=Xm({},e,{scale:{series:{domain:A,paddingInner:a}}}),d=Ctt(n,t,e),h=Mtt(o);if(!h)return[t,Xm(f,{encode:{series:yz(l)}})];var p=h(r,c,l);p&&Stt(d,p);var g,y=new Array(t.length),m=qn(d);try{for(m.s();!(g=m.n()).done;){var b=g.value;i&&b.reverse();for(var w=0;w<b.length;w++)y[b[w]]=A[w]}}catch(t){m.e(t)}finally{m.f()}return[t,Xm(f,{encode:{series:yz(o?y:l)}})]}};function pet(t,e,n){if(null===t)return[-.5,.5];var r=Ftt(t,e),i=new YK({domain:r,range:[0,1],padding:n}).getBandWidth();return[-i/2,i/2]}function vet(t,e,n){return e*(1-t)+n*t}het.props={};var get=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.padding,n=void 0===e?0:e,r=t.paddingX,i=void 0===r?n:r,o=t.paddingY,a=void 0===o?n:o,s=t.random,u=void 0===s?Math.random:s;return function(t,e){var n=e.encode,r=e.scale,o=r.x,s=r.y,c=v(Ez(n,"x"),1)[0],l=v(Ez(n,"y"),1)[0],A=pet(c,o,i),f=pet(l,s,a),d=t.map(function(){return vet.apply(void 0,[u()].concat(O(f)))}),h=t.map(function(){return vet.apply(void 0,[u()].concat(O(A)))});return[t,Xm({scale:{x:{padding:.5},y:{padding:.5}}},e,{encode:{dy:yz(d),dx:yz(h)}})]}};get.props={};var yet=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.padding,n=void 0===e?0:e,r=t.random,i=void 0===r?Math.random:r;return function(t,e){var r=e.encode,o=e.scale.x,a=pet(v(Ez(r,"x"),1)[0],o,n),s=t.map(function(){return vet.apply(void 0,[i()].concat(O(a)))});return[t,Xm({scale:{x:{padding:.5}}},e,{encode:{dx:yz(s)}})]}};yet.props={};var met=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.padding,n=void 0===e?0:e,r=t.random,i=void 0===r?Math.random:r;return function(t,e){var r=e.encode,o=e.scale.y,a=pet(v(Ez(r,"y"),1)[0],o,n),s=t.map(function(){return vet.apply(void 0,[i()].concat(O(a)))});return[t,Xm({scale:{y:{padding:.5}}},e,{encode:{dy:yz(s)}})]}};met.props={};var bet=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).groupBy,e=void 0===t?"x":t;return function(t,n){for(var r=n.encode,i=n.style,o=void 0===i?{}:i,a=(r.x,function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(r,["x"])),s=Object.entries(a).filter(function(t){return v(t,1)[0].startsWith("y")}).map(function(t){var e=v(t,1)[0];return[e,Ez(r,e)[0]]}),u=s.map(function(e){return[v(e,1)[0],new Array(t.length)]}),c=Ctt(e,t,n),l=new Array(c.length),A=0;A<c.length;A++){var f=c[A].flatMap(function(t){return s.map(function(e){return+v(e,2)[1][t]})}),d=v(XG(f),2),h=d[0],p=d[1];l[A]=(h+p)/2}for(var g=Math.max.apply(Math,l),y=0;y<c.length;y++){var m,b=g-l[y],w=qn(c[y]);try{for(w.s();!(m=w.n()).done;)for(var x=m.value,E=0;E<s.length;E++){var B=v(s[E],2)[1];v(u[E],2)[1][x]=+B[x]+b}}catch(t){w.e(t)}finally{w.f()}}return[t,Xm({},n,{encode:Object.fromEntries(u.map(function(t){var e=v(t,2),n=e[0];return[n,yz(e[1],Ez(r,n)[1])]})),style:Object.assign({first:function(t,e){return 0===e},last:function(t,e){return e===c.length-1}},o)})]}};bet.props={};var wet=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).groupBy,e=void 0===t?"x":t;return function(t,n){var r,i=n.encode,o=v(Ez(i,"y"),1)[0],a=v(Ez(i,"y1"),2),s=(a[0],a[1]),u=Ctt(e,t,n),c=new Array(t.length),l=qn(u);try{for(l.s();!(r=l.n()).done;)for(var A=r.value,f=A.map(function(t){return+o[t]}),d=function(t){var e=A[t],n=Math.max.apply(Math,O(f.filter(function(e,n){return n!==t})));c[e]=+o[e]>n?n:o[e]},h=0;h<A.length;h++)d(h)}catch(t){l.e(t)}finally{l.f()}return[t,Xm({},n,{encode:{y1:yz(c,s)}})]}};wet.props={};var xet=function(t){var e=t.groupBy,n=void 0===e?["x"]:e,r=t.reducer,i=void 0===r?function(t,e){return e[t[0]]}:r,o=t.orderBy,a=void 0===o?null:o,s=t.reverse,u=void 0!==s&&s,c=t.duration;return function(t,e){var r=e.encode,o=(Array.isArray(n)?n:[n]).map(function(t){return[t,Ez(r,t)[0]]});if(0===o.length)return[t,e];var s,l=[t],A=qn(o);try{var f=function(){for(var t=v(s.value,2)[1],e=[],n=0,r=l;n<r.length;n++){var i=r[n],o=Array.from(TK(i,function(e){return t[e]}).values());e.push.apply(e,o)}l=e};for(A.s();!(s=A.n()).done;)f()}catch(t){A.e(t)}finally{A.f()}if(a){var d=v(Ez(r,a),1)[0];d&&l.sort(function(t,e){return i(t,d)-i(e,d)}),u&&l.reverse()}for(var h=(c||3e3)/l.length,p=v(c?[xz(t,h)]:Bz(r,"enterDuration",xz(t,h)),1)[0],g=v(Bz(r,"enterDelay",xz(t,0)),1)[0],y=new Array(t.length),m=0,b=0;m<l.length;m++){var w,x=l[m],E=Bq(x,function(t){return+p[t]}),B=qn(x);try{for(B.s();!(w=B.n()).done;){var k=w.value;y[k]=+g[k]+b}}catch(t){B.e(t)}finally{B.f()}b+=E}return[t,Xm({},e,{encode:{enterDuration:bz(p),enterDelay:bz(y)}})]}};xet.props={};var Eet=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.groupBy,n=void 0===e?"x":e,r=t.basis,i=void 0===r?"max":r;return function(t,e){var r,o=e.encode,a=e.tooltip,s=(o.x,function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(o,["x"])),u=Object.entries(s).filter(function(t){return v(t,1)[0].startsWith("y")}).map(function(t){var e=v(t,1)[0];return[e,Ez(o,e)[0]]}),c=u.find(function(t){return"y"===v(t,1)[0]}),l=v(c,2)[1],A=u.map(function(e){return[v(e,1)[0],new Array(t.length)]}),f=Ctt(n,t,e),d=function(t){if("function"==typeof t)return t;var e={min:function(t,e){return Eq(t,function(t){return e[+t]})},max:function(t,e){return Bq(t,function(t){return e[+t]})},first:function(t,e){return e[t[0]]},last:function(t,e){return e[t[t.length-1]]},mean:function(t,e){return v2(t,function(t){return e[+t]})},median:function(t,e){return Ztt(t,function(t){return e[+t]})},sum:function(t,e){return $tt(t,function(t){return e[+t]})},deviation:function(t,e){return Utt(t,function(t){return e[+t]})}};return e[t]||Bq}(i),h=qn(f);try{for(h.s();!(r=h.n()).done;){var p,g=r.value,y=d(g,l),m=qn(g);try{for(m.s();!(p=m.n()).done;)for(var b=p.value,w=0;w<u.length;w++){var x=v(u[w],2)[1];v(A[w],2)[1][b]=+x[b]/y}}catch(t){m.e(t)}finally{m.f()}}}catch(t){h.e(t)}finally{h.f()}var E=mG(a)||(null==a?void 0:a.items)&&0!==(null==a?void 0:a.items.length);return[t,Xm({},e,Object.assign({encode:Object.fromEntries(A.map(function(t){var e=v(t,2),n=e[0];return[n,yz(e[1],Ez(o,n)[1])]}))},!E&&o.y0&&{tooltip:{items:[{channel:"y0"}]}}))]}};function Bet(t,e){return[t[0]]}function ket(t,e){return[t[t.length-1]]}function Oet(t,e){return[t[P2(t,function(t){return e[t]})]]}function Cet(t,e){return[t[p2(t,function(t){return e[t]})]]}Eet.props={};var Met=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.groupBy,n=void 0===e?"series":e,r=t.channel,i=t.selector;return function(t,e){var o=e.encode,a=Ctt(n,t,e),s=v(Ez(o,r),1)[0],u=function(t){return"function"==typeof t?t:{first:Bet,last:ket,max:Oet,min:Cet}[t]||Bet}(i);return[a.flatMap(function(t){return u(t,s)}),e]}};Met.props={};var Fet=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.selector,n=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["selector"]);return Met(Object.assign({channel:"x",selector:e},n))};Fet.props={};var Tet=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.selector,n=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["selector"]);return Met(Object.assign({channel:"y",selector:e},n))};Tet.props={};var Pet=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.channels,n=void 0===e?["x","y"]:e,r=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["channels"]);return cet(Object.assign(Object.assign({},r),{groupBy:function(t,e){return Ctt(n,t,e)}}))};Pet.props={};var Iet=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Pet(Object.assign(Object.assign({},t),{channels:["x","color","series"]}))};Iet.props={};var Net=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Pet(Object.assign(Object.assign({},t),{channels:["y","color","series"]}))};Net.props={};var Let=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Pet(Object.assign(Object.assign({},t),{channels:["color"]}))};Let.props={};var _et=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,n){var r,i,o,a=t.reverse,s=t.slice,u=t.channel,c=t.by,l=t.ordinal,A=void 0===l||l,f=t.reducer,d=n.encode,h=n.scale,p=(void 0===h?{}:h)[u].domain,g=v(Ez(d,null!=c?c:u),1)[0],y=v(Ez(d,u),1)[0],b=function(t,e,n){var r=e.by,i=e.reducer,o=void 0===i?"max":i,a=v(Ez(n,void 0===r?t:r),1)[0];if("function"==typeof o)return function(t){return o(t,a)};if("max"===o)return function(t){return Bq(t,function(t){return+a[t]})};if("min"===o)return function(t){return Eq(t,function(t){return+a[t]})};if("sum"===o)return function(t){return $tt(t,function(t){return+a[t]})};if("median"===o)return function(t){return Ztt(t,function(t){return+a[t]})};if("mean"===o)return function(t){return v2(t,function(t){return+a[t]})};if("first"===o)return function(t){return a[t[0]]};if("last"===o)return function(t){return a[t[t.length-1]]};throw new Error("Unknown reducer: ".concat(o))}(u,{by:c,reducer:f},d),w=function(t,e,n){if(!Array.isArray(n))return t;var r=new Set(n);return t.filter(function(t){return r.has(e[t])})}(e,y,p),x=(r=w,o=function(t){return y[t]},(2!==(i=b).length?v$(IK(r,i,o),function(t,e){var n=v(t,2),r=n[0],i=n[1],o=v(e,2),a=o[0];return p$(i,o[1])||p$(r,a)}):v$(TK(r,o),function(t,e){var n=v(t,2),r=n[0],o=n[1],a=v(e,2),s=a[0],u=a[1];return i(o,u)||p$(r,s)})).map(function(t){return v(t,1)[0]})),E=A?e:v$(e,function(t){return g[t]});a&&(!A&&E.reverse(),x.reverse());var B="number"==typeof s?[0,s]:s,k=s?x.slice.apply(x,O(B)):x;return[E,Xm(n,{scale:m({},u,{domain:k})})]}};_et.props={};var Qet=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _et(Object.assign(Object.assign({},t),{channel:"x"}))};Qet.props={};var Uet=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _et(Object.assign(Object.assign({},t),{channel:"y"}))};Uet.props={};var jet=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _et(Object.assign(Object.assign({},t),{channel:"color"}))};jet.props={};var Det=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.field,n=t.channel,r=void 0===n?"y":n,i=t.reducer,o=void 0===i?"sum":i;return function(t,n){var i=n.data,a=n.encode,s=v(Ez(a,"x"),1)[0],u=e?function(t,e){return"string"==typeof e?t.map(function(t){return t[e]}):t.map(e)}(i,e):Ez(a,r)[0],c=function(t,e){if("function"==typeof t)return function(n){return t(n,e)};if("sum"===t)return function(t){return $tt(t,function(t){return+e[t]})};throw new Error("Unknown reducer: ".concat(t))}(o,u),l=NK(t,c,function(t){return s[t]}).map(function(t){return t[1]});return[t,Xm({},n,{scale:{x:{flex:l}}})]}};function Ret(t){var e=t.padding,n=void 0===e?0:e,r=t.direction,i=void 0===r?"col":r;return function(t,e,r){var o=t.length;if(0===o)return[];for(var a=r.innerWidth,s=r.innerHeight,u=s/a,c=Math.ceil(Math.sqrt(e/u)),l=a/c,A=Math.ceil(e/c),f=A*l;f>s;)l=a/(c+=1),f=(A=Math.ceil(e/c))*l;var d=s-A*l,h=A<=1?0:d/(A-1),p=v(A<=1?[(a-o*l)/(o-1),(s-l)/2]:[0,0],2),g=p[0],y=p[1];return t.map(function(t,e){var r=v(SG(t),4),o=r[0],a=r[1],s=r[2],u=r[3],f="col"===i?e%c:Math.floor(e/A),p="col"===i?Math.floor(e/c):e%A,m=(l-n)/s,b=(l-n)/u,w=(A-p-1)*l+d-a-h*p-y+.5*n;return"translate(".concat(f*l-o+g*f+.5*n,", ").concat(w,") scale(").concat(m,", ").concat(b,")")})}}Det.props={};var Het=function(t){return function(e,n){return[e,Xm({},n,{modifier:Ret(t),axis:!1})]}};function zet(t,e,n,r){var i=t.length;if(r>=i||0===r)return t;var o,a,s,u=function(n){return 1*e[t[n]]},c=function(e){return 1*n[t[e]]},l=[],A=(i-2)/(r-2),f=0;l.push(f);for(var d=0;d<r-2;d++){for(var h=0,p=0,v=Math.floor((d+1)*A)+1,g=Math.floor((d+2)*A)+1,y=(g=Math.min(g,i))-v;v<g;v++)h+=u(v),p+=c(v);h/=y,p/=y;var m=Math.floor((d+0)*A)+1,b=Math.floor((d+1)*A)+1,w=[u(f),c(f)];for(o=a=-1;m<b;m++)(a=.5*Math.abs((w[0]-h)*(u(m)-w[1])-(w[0]-c(m))*(p-w[0])))>o&&(o=a,s=m);l.push(s),f=s}return l.push(i-1),l.map(function(e){return t[e]})}Het.props={};var Ket=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.strategy,n=void 0===e?"median":e,r=t.thresholds,i=void 0===r?2e3:r,o=t.groupBy,a=void 0===o?["series","color"]:o,s=function(t){if("function"==typeof t)return t;if("lttb"===t)return zet;var e={first:function(t){return[t[0]]},last:function(t){return[t[t.length-1]]},min:function(t,e,n){return[t[p2(t,function(t){return n[t]})]]},max:function(t,e,n){return[t[P2(t,function(t){return n[t]})]]},median:function(t,e,n){return[t[Jtt(t,function(t){return n[t]})]]}},n=e[t]||e.median;return function(t,e,r,i){var o=function(t,e){for(var n=t.length,r=[],i=0;i<n;)r.push(t.slice(i,i+=e));return r}(t,Math.max(1,Math.floor(t.length/i)));return o.flatMap(function(t){return n(t,e,r)})}}(n);return function(t,e){var n=e.encode,r=Ctt(a,t,e),o=v(Ez(n,"x"),1)[0],u=v(Ez(n,"y"),1)[0];return[r.flatMap(function(t){return s(t,o,u,i)}),e]}};Ket.props={};var Get=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,n){var r=n.encode,i=n.data,o=Object.keys(t).length>0,a=Object.entries(t).map(function(t){var e=v(t,2),n=e[0],i=e[1],o=v(Ez(r,n),1)[0];if(!o)return null;var a=function(t){return"object"==typeof t?[t.value,t.ordinal]:[t,!0]}(i),s=v(a,2),u=s[0],c=s[1];if("function"==typeof u)return function(t){return u(o[t])};if(void 0===c||c){var l=Array.isArray(u)?u:[u];return 0===l.length?null:function(t){return l.includes(o[t])}}var A=v(u,2),f=A[0],d=A[1];return function(t){return o[t]>=f&&o[t]<=d}}).filter(dG),s=e.filter(function(t){return a.every(function(e){return e(t)})}),u=s.map(function(t,e){return e});if(0===a.length&&o){var c=function(t){var e,n,r=t.encode,i=Object.assign(Object.assign({},t),{encode:Object.assign(Object.assign({},t.encode),{y:Object.assign(Object.assign({},t.encode.y),{value:[]})})}),o=null===(e=null==r?void 0:r.color)||void 0===e?void 0:e.field;if(!r||!o)return i;for(var a=0,s=Object.entries(r);a<s.length;a++){var u=v(s[a],2),c=u[0],l=u[1];"x"!==c&&"y"!==c||l.field!==o||(n=Object.assign(Object.assign({},n),m({},c,Object.assign(Object.assign({},l),{value:[]}))))}return n?Object.assign(Object.assign({},t),{encode:Object.assign(Object.assign({},t.encode),n)}):i}(n);return[[],c]}var l=Object.entries(r).map(function(t){var e=v(t,2),n=e[0],r=e[1];return[n,Object.assign(Object.assign({},r),{value:u.map(function(t){return r.value[s[t]]}).filter(function(t){return void 0!==t})})]});return[u,Xm({},n,{encode:Object.fromEntries(l),data:s.map(function(t){return i[t]})})]}};Get.props={};var Vet={},Wet={};function Yet(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'}).join(",")+"}")}function Xet(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var r in t)r in e||n.push(e[r]=r)}),n}function qet(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function Zet(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var r,i=[],o=t.length,a=0,s=0,u=o<=0,c=!1;function l(){if(u)return Wet;if(c)return c=!1,Vet;var e,r,i=a;if(34===t.charCodeAt(i)){for(;a++<o&&34!==t.charCodeAt(a)||34===t.charCodeAt(++a););return(e=a)>=o?u=!0:10===(r=t.charCodeAt(a++))?c=!0:13===r&&(c=!0,10===t.charCodeAt(a)&&++a),t.slice(i+1,e-1).replace(/""/g,'"')}for(;a<o;){if(10===(r=t.charCodeAt(e=a++)))c=!0;else if(13===r)c=!0,10===t.charCodeAt(a)&&++a;else if(r!==n)continue;return t.slice(i,e)}return u=!0,t.slice(i,o)}for(10===t.charCodeAt(o-1)&&--o,13===t.charCodeAt(o-1)&&--o;(r=l())!==Wet;){for(var A=[];r!==Vet&&r!==Wet;)A.push(r),r=l();e&&null==(A=e(A,s++))||i.push(A)}return i}function i(e,n){return e.map(function(e){return n.map(function(t){return a(e[t])}).join(t)})}function o(e){return e.map(a).join(t)}function a(t){return null==t?"":t instanceof Date?(r=(n=t).getUTCHours(),i=n.getUTCMinutes(),o=n.getUTCSeconds(),a=n.getUTCMilliseconds(),isNaN(n)?"Invalid Date":function(t){return t<0?"-"+qet(-t,6):t>9999?"+"+qet(t,6):qet(t,4)}(n.getUTCFullYear())+"-"+qet(n.getUTCMonth()+1,2)+"-"+qet(n.getUTCDate(),2)+(a?"T"+qet(r,2)+":"+qet(i,2)+":"+qet(o,2)+"."+qet(a,3)+"Z":o?"T"+qet(r,2)+":"+qet(i,2)+":"+qet(o,2)+"Z":i||r?"T"+qet(r,2)+":"+qet(i,2)+"Z":"")):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t;var n,r,i,o,a}return{parse:function(t,e){var n,i,o=r(t,function(t,r){if(n)return n(t,r-1);i=t,n=e?function(t,e){var n=Yet(t);return function(r,i){return e(n(r),i,t)}}(t,e):Yet(t)});return o.columns=i||[],o},parseRows:r,format:function(e,n){return null==n&&(n=Xet(e)),[n.map(a).join(t)].concat(i(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=Xet(t)),i(t,e).join("\n")},formatRows:function(t){return t.map(o).join("\n")},formatRow:o,formatValue:a}}function Jet(t){for(var e in t){var n,r,i=t[e].trim();if(i)if("true"===i)i=!0;else if("false"===i)i=!1;else if("NaN"===i)i=NaN;else if(isNaN(n=+i)){if(!(r=i.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;$et&&r[4]&&!r[7]&&(i=i.replace(/-/g,"/").replace(/T/," ")),i=new Date(i)}else i=n;else i=null;t[e]=i}return t}var $et=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours(),tnt=function(t){var e=t.value,n=t.format,r=void 0===n?e.split(".").pop():n,i=t.delimiter,o=void 0===i?",":i,a=t.autoType,s=void 0===a||a;return function(){return t=void 0,n=void 0,i=void 0,a=(0,Dn.A)().m(function t(){var n,i;return(0,Dn.A)().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,fetch(e);case 1:if(n=t.v,"csv"!==r){t.n=3;break}return t.n=2,n.text();case 2:return i=t.v,t.a(2,Zet(o).parse(i,s?Jet:sG));case 3:if("json"!==r){t.n=5;break}return t.n=4,n.json();case 4:return t.a(2,t.v);case 5:throw new Error("Unknown format: ".concat(r,"."));case 6:return t.a(2)}},t)}),new(i||(i=Promise))(function(e,r){function o(t){try{u(a.next(t))}catch(t){r(t)}}function s(t){try{u(a.throw(t))}catch(t){r(t)}}function u(t){t.done?e(t.value):function(t){return t instanceof i?t:new i(function(e){e(t)})}(t.value).then(o,s)}u((a=a.apply(t,n||[])).next())});var t,n,i,a}};tnt.props={};var ent=function(t){var e=t.value;return function(){return e}};ent.props={};var nnt=function(t){var e,n=t.fields,r=(e=!0,(void 0===n?[]:n).map(function(t){if(Array.isArray(t)){var n=v(t,2),r=n[0],i=n[1];return[r,void 0===i?e:i]}return[t,e]}));return function(t){return O(t).sort(function(t,e){return r.reduce(function(n,r){var i=v(r,2),o=i[0],a=i[1];return 0!==n?n:void 0===a||a?t[o]<e[o]?-1:+(t[o]!==e[o]):t[o]>e[o]?-1:+(t[o]!==e[o])},0)})}};nnt.props={};var rnt=function(t){var e=t.callback;return function(t){return Array.isArray(t)?O(t).sort(e):t}};function int(t){return null!=t&&!Number.isNaN(t)}rnt.props={};var ont=function(t){var e=t.callback,n=void 0===e?int:e;return function(t){return t.filter(n)}};ont.props={};var ant=function(t){var e=t.fields;return function(t){return t.map(function(t){return function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).reduce(function(e,n){return n in t&&(e[n]=t[n]),e},{})}(t,e)})}};ant.props={};var snt=function(t){return function(e){return t&&(n=t,0!==Object.keys(n).length)?e.map(function(e){return Object.entries(e).reduce(function(e,n){var r=v(n,2),i=r[0],o=r[1];return e[t[i]||i]=o,e},{})}):e;var n}};snt.props={};var unt=function(t){var e=t.fields,n=t.key,r=void 0===n?"key":n,i=t.value,o=void 0===i?"value":i;return function(t){return(n=e)&&0!==Object.keys(n).length?t.flatMap(function(t){return e.map(function(e){return Object.assign(Object.assign({},t),m(m({},r,e),o,t[e]))})}):t;var n}};unt.props={};var cnt=function(t){var e=t.start,n=t.end;return function(t){return t.slice(e,n)}};cnt.props={};var lnt=function(t){var e=t.callback,n=void 0===e?sG:e;return function(t){return n(t)}};lnt.props={};var Ant=function(t){var e=t.callback,n=void 0===e?sG:e;return function(t){return Array.isArray(t)?t.map(n):t}};function fnt(t){return"string"==typeof t?function(e){return e[t]}:t}Ant.props={};var dnt=function(t){var e=t.join,n=t.on,r=t.select,i=void 0===r?[]:r,o=t.as,a=void 0===o?i:o,s=t.unknown,u=void 0===s?NaN:s,c=v(n,2),l=c[0],A=fnt(c[1]),f=fnt(l),d=IK(e,function(t){return v(t,1)[0]},function(t){return A(t)});return function(t){return t.map(function(t){var e=d.get(f(t));return Object.assign(Object.assign({},t),i.reduce(function(t,n,r){return t[a[r]]=e?e[n]:u,t},{}))})}};dnt.props={};var hnt=c(3837),pnt=c.n(hnt),vnt=function(t){var e=t.field,n=t.groupBy,r=t.as,i=void 0===r?["y","size"]:r,o=t.min,a=t.max,s=t.size,u=void 0===s?10:s,c=t.width,l=v(i,2),A=l[0],f=l[1];return function(t){var r=Array.from(TK(t,function(t){return n.map(function(e){return t[e]}).join("-")}).values());return r.map(function(t){var n=pnt().create(t.map(function(t){return t[e]}),{min:o,max:a,size:u,width:c}),r=n.map(function(t){return t.x}),i=n.map(function(t){return t.y});return Object.assign(Object.assign({},t[0]),m(m({},A,r),f,i))})}};vnt.props={};var gnt=function(){return function(t){return console.log("G2 data section:",t),t}};gnt.props={};function ynt(t,e){return{set:function(n,r,i){if(void 0===e[n])return this;var o=r?r.call(null,e[n]):e[n];return i?i.call(null,o):"function"==typeof t[n]?t[n](o):t[n]=o,this},setAsync:function(n,r,i){return o=this,a=void 0,s=void 0,u=(0,Dn.A)().m(function o(){var a,s;return(0,Dn.A)().w(function(o){for(;;)switch(o.n){case 0:if(void 0!==e[n]){o.n=1;break}return o.a(2,this);case 1:if(!r){o.n=3;break}return o.n=2,r.call(null,e[n]);case 2:s=o.v,o.n=4;break;case 3:s=e[n];case 4:return a=s,i?i.call(null,a):"function"==typeof t[n]?t[n](a):t[n]=a,o.a(2,this)}},o,this)}),new(s||(s=Promise))(function(t,e){function n(t){try{i(u.next(t))}catch(t){e(t)}}function r(t){try{i(u.throw(t))}catch(t){e(t)}}function i(e){e.done?t(e.value):function(t){return t instanceof s?t:new s(function(e){e(t)})}(e.value).then(n,r)}i((u=u.apply(o,a||[])).next())});var o,a,s,u}}}var mnt=Math.PI/180,bnt=2048;function wnt(t){return t.text}function xnt(){return"serif"}function Ent(){return"normal"}function Bnt(t){return t.value}function knt(){return 90*~~(2*Math.random())}function Ont(){return 1}function Cnt(){}function Mnt(t,e,n,r){if(!e.sprite){var i=t.context,o=t.ratio;i.clearRect(0,0,2048/o,bnt/o);var a=0,s=0,u=0,c=n.length;for(--r;++r<c;){e=n[r],i.save(),i.font=e.style+" "+e.weight+" "+~~((e.size+1)/o)+"px "+e.font;var l=i.measureText(e.text+"m").width*o,A=e.size<<1;if(e.rotate){var f=Math.sin(e.rotate*mnt),d=Math.cos(e.rotate*mnt),h=l*d,p=l*f,v=A*d,g=A*f;l=Math.max(Math.abs(h+g),Math.abs(h-g))+31>>5<<5,A=~~Math.max(Math.abs(p+v),Math.abs(p-v))}else l=l+31>>5<<5;if(A>u&&(u=A),a+l>=2048&&(a=0,s+=u,u=0),s+A>=bnt)break;i.translate((a+(l>>1))/o,(s+(A>>1))/o),e.rotate&&i.rotate(e.rotate*mnt),i.fillText(e.text,0,0),e.padding&&(i.lineWidth=2*e.padding,i.strokeText(e.text,0,0)),i.restore(),e.width=l,e.height=A,e.xoff=a,e.yoff=s,e.x1=l>>1,e.y1=A>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,a+=l}for(var y=i.getImageData(0,0,2048/o,bnt/o).data,m=[];--r>=0;)if((e=n[r]).hasText){for(var b=e.width,w=b>>5,x=e.y1-e.y0,E=0;E<x*w;E++)m[E]=0;if(null==(a=e.xoff))return;s=e.yoff;for(var B=0,k=-1,O=0;O<x;O++){for(var C=0;C<b;C++){var M=w*O+(C>>5),S=y[2048*(s+O)+(a+C)<<2]?1<<31-C%32:0;m[M]|=S,B|=S}B?k=O:(e.y0++,x--,O--,s++)}e.y1=e.y0+k,e.sprite=m.slice(0,(e.y1-e.y0)*w)}}}function Snt(t,e,n){n>>=5;for(var r,i=t.sprite,o=t.width>>5,a=t.x-(o<<4),s=127&a,u=32-s,c=t.y1-t.y0,l=(t.y+t.y0)*n+(a>>5),A=0;A<c;A++){r=0;for(var f=0;f<=o;f++)if((r<<u|(f<o?(r=i[A*o+f])>>>s:0))&e[l+f])return!0;l+=n}return!1}function Fnt(t,e){var n=t[0],r=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>r.x&&(r.x=e.x+e.x1),e.y+e.y1>r.y&&(r.y=e.y+e.y1)}function Tnt(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}function Pnt(t){var e=t[0]/t[1];return function(t){return[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function Int(t){for(var e=[],n=-1;++n<t;)e[n]=0;return e}function Nnt(){return document.createElement("canvas")}function Lnt(t){return"function"==typeof t?t:function(){return t}}var _nt={archimedean:Pnt,rectangular:function(t){var e=4*t[0]/t[1],n=0,r=0;return function(t){var i=t<0?-1:1;switch(Math.sqrt(1+4*i*t)-i&3){case 0:n+=e;break;case 1:r+=4;break;case 2:n-=e;break;default:r-=4}return[n,r]}}};function Qnt(){var t=[256,256],e=wnt,n=xnt,r=Bnt,i=Ent,o=knt,a=Ont,s=Pnt,u=Math.random,c=Cnt,l=[],A=null,f=1/0,d=Nnt,h=Ent,p={};function g(e,n,r){for(var i,o,a,c=n.x,l=n.y,A=Math.sqrt(t[0]*t[0]+t[1]*t[1]),f=s(t),d=u()<.5?1:-1,h=-d;(i=f(h+=d))&&(o=~~i[0],a=~~i[1],!(Math.min(Math.abs(o),Math.abs(a))>=A));)if(n.x=c+o,n.y=l+a,!(n.x+n.x0<0||n.y+n.y0<0||n.x+n.x1>t[0]||n.y+n.y1>t[1])&&(!r||!Snt(n,e,t[0]))&&(!r||Tnt(n,r))){for(var p=n.sprite,v=n.width>>5,g=t[0]>>5,y=n.x-(v<<4),m=127&y,b=32-m,w=n.y1-n.y0,x=void 0,E=(n.y+n.y0)*g+(y>>5),B=0;B<w;B++){x=0;for(var k=0;k<=v;k++)e[E+k]|=x<<b|(k<v?(x=p[B*v+k])>>>m:0);E+=g}return delete n.sprite,!0}return!1}return p.start=function(){var s=v(t,2),y=s[0],m=s[1],b=function(t){t.width=t.height=1;var e=Math.sqrt(t.getContext("2d").getImageData(0,0,1,1).data.length>>2);t.width=2048/e,t.height=bnt/e;var n=t.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",n.textBaseline="middle",{context:n,ratio:e}}(d()),w=p.board?p.board:Int((t[0]>>5)*t[1]),x=l.length,E=[],B=l.map(function(t,s,u){return t.text=e.call(this,t,s,u),t.font=n.call(this,t,s,u),t.style=h.call(this,t,s,u),t.weight=i.call(this,t,s,u),t.rotate=o.call(this,t,s,u),t.size=~~r.call(this,t,s,u),t.padding=a.call(this,t,s,u),t}).sort(function(t,e){return e.size-t.size}),k=-1,O=p.board?[{x:0,y:0},{x:y,y:m}]:void 0;function C(){for(var e=Date.now();Date.now()-e<f&&++k<x;){var n=B[k];n.x=y*(u()+.5)>>1,n.y=m*(u()+.5)>>1,Mnt(b,n,B,k),n.hasText&&g(w,n,O)&&(c.call(null,"word",{cloud:p,word:n}),E.push(n),O?p.hasImage||Fnt(O,n):O=[{x:n.x+n.x0,y:n.y+n.y0},{x:n.x+n.x1,y:n.y+n.y1}],n.x-=t[0]>>1,n.y-=t[1]>>1)}p._tags=E,p._bounds=O,k>=x&&(p.stop(),c.call(null,"end",{cloud:p,words:E,bounds:O}))}return A&&clearInterval(A),A=setInterval(C,0),C(),p},p.stop=function(){return A&&(clearInterval(A),A=null),p},p.createMask=function(e){var n=document.createElement("canvas"),r=v(t,2),i=r[0],o=r[1];if(i&&o){var a=i>>5,s=Int((i>>5)*o);n.width=i,n.height=o;var u=n.getContext("2d");u.drawImage(e,0,0,e.width,e.height,0,0,i,o);for(var c=u.getImageData(0,0,i,o).data,l=0;l<o;l++)for(var A=0;A<i;A++){var f=a*l+(A>>5),d=l*i+A<<2,h=c[d]>=250&&c[d+1]>=250&&c[d+2]>=250?1<<31-A%32:0;s[f]|=h}p.board=s,p.hasImage=!0}},p.timeInterval=function(t){f=null==t?1/0:t},p.words=function(t){l=t},p.size=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t=[+e[0],+e[1]]},p.text=function(t){e=Lnt(t)},p.font=function(t){n=Lnt(t)},p.fontWeight=function(t){i=Lnt(t)},p.rotate=function(t){o=Lnt(t)},p.canvas=function(t){d=Lnt(t)},p.spiral=function(t){s=_nt[t]||t},p.fontSize=function(t){r=Lnt(t)},p.padding=function(t){a=Lnt(t)},p.random=function(t){u=Lnt(t)},p.on=function(t){c=Lnt(t)},p}var Unt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},jnt={fontSize:[20,60],font:"Impact",padding:2,rotate:function(){return 30*(~~(6*Math.random())-3)}};function Dnt(t){return new Promise(function(e,n){if(t instanceof HTMLImageElement)e(t);else{if("string"==typeof t){var r=new Image;return r.crossOrigin="anonymous",r.src=t,r.onload=function(){return e(r)},void(r.onerror=function(){console.error("'image ".concat(t," load failed !!!'")),n()})}n()}})}function Rnt(t,e){if("function"==typeof t)return t;if(Array.isArray(t)){var n=v(t,2),r=n[0],i=n[1];if(!e)return function(){return(i+r)/2};var o=v(e,2),a=o[0],s=o[1];return s===a?function(){return(i+r)/2}:function(t){var e=t.value;return(i-r)/(s-a)*(e-a)+r}}return function(){return t}}var Hnt=function(t,e){return function(n){return r=void 0,i=void 0,o=void 0,a=(0,Dn.A)().m(function r(){var i,o,a,s,u,c,l,A,f,d,h,p,g,y,m,b,w,x,E,B;return(0,Dn.A)().w(function(r){for(;;)switch(r.n){case 0:return i=Object.assign({},jnt,t,{canvas:e.createCanvas}),o=Qnt(),r.n=1,ynt(o,i).set("fontSize",function(t){var e=n.map(function(t){return t.value});return Rnt(t,[Eq(e),Bq(e)])}).set("font").set("fontStyle").set("fontWeight").set("padding").set("rotate").set("size").set("spiral").set("timeInterval").set("random").set("text").set("on").set("canvas").setAsync("imageMask",Dnt,o.createMask);case 1:return o.words(O(n)),a=o.start(),s=v(i.size,2),u=s[0],c=s[1],l=[{x:0,y:0},{x:u,y:c}],A=a._bounds,f=void 0===A?l:A,d=a._tags,h=a.hasImage,p=d.map(function(t){var e=t.x,n=t.y,r=t.font,i=Unt(t,["x","y","font"]);return Object.assign(Object.assign({},i),{x:e+u/2,y:n+c/2,fontFamily:r})}),g=v(f,2),y=g[0],m=y.x,b=y.y,w=g[1],x=w.x,E=w.y,B={text:"",value:0,opacity:0,fontSize:0},p.push(Object.assign(Object.assign({},B),{x:h?0:m,y:h?0:b}),Object.assign(Object.assign({},B),{x:h?u:x,y:h?c:E})),r.a(2,p)}},r)}),new(o||(o=Promise))(function(t,e){function n(t){try{u(a.next(t))}catch(t){e(t)}}function s(t){try{u(a.throw(t))}catch(t){e(t)}}function u(e){e.done?t(e.value):function(t){return t instanceof o?t:new o(function(e){e(t)})}(e.value).then(n,s)}u((a=a.apply(r,i||[])).next())});var r,i,o,a}};Hnt.props={};var znt=function(t){var e=t.field,n=void 0===e?"y":e,r=t.alpha,i=void 0===r?.6:r,o=t.as,a=void 0===o?n:o;return function(t){var e=t.map(function(t){return t[n]}),r=function(t,e){if(e<0||e>1)throw new Error("alpha must be between 0 and 1.");if(0===t.length)return[];var n,r=t[0],i=[],o=qn(t);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(null!=a){null==r&&(r=a);var s=r*e+(1-e)*a;i.push(s),r=s}else i.push(a),console.warn("EMAThe value is null or undefined",t)}}catch(t){o.e(t)}finally{o.f()}return i}(e,i);return t.map(function(t,e){return Object.assign(Object.assign({},t),m({},a,r[e]))})}};function Knt(t){var e=t.min,n=t.max;return[[e[0],e[1]],[n[0],n[1]]]}function Gnt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01,r=v(t,2),i=r[0],o=r[1],a=v(e,2),s=a[0],u=a[1];return i>=s[0]-n&&i<=u[0]+n&&o>=s[1]-n&&o<=u[1]+n}function Vnt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01,r=v(t,2),i=r[0],o=r[1];return!(Gnt(i,e,n)&&Gnt(o,e,n))}znt.props={};var Wnt=function(t){var e=t.priority;return function(t){var n=[];return e&&t.sort(e),t.forEach(function(t){J$(t);var e=t.getLocalBounds(),r=n.some(function(t){return function(t,e){var n=v(t,2),r=n[0],i=n[1],o=v(e,2),a=o[0],s=o[1];return r[0]<s[0]&&i[0]>a[0]&&r[1]<s[1]&&i[1]>a[1]}(Knt(e),Knt(t.getLocalBounds()))});r?Z$(t):n.push(t)}),t}};function Ynt(t,e){var n=v(t,2),r=n[0],i=n[1],o=v(e,2),a=o[0];return o[1]>r&&i>a}function Xnt(){var t=new Map;return[function(e){return t.get(e)},function(e,n){return t.set(e,n)}]}function qnt(t){var e=t.cloneNode(!0),n=e.getElementById("connector");n&&e.removeChild(n);var r=e.getRenderBounds(),i=r.min,o=r.max;return e.destroy(),{min:i,max:o}}var Znt=function(t){var e=t.maxIterations,n=void 0===e?10:e,r=t.maxError,i=void 0===r?.1:r,o=t.padding,a=void 0===o?1:o;return function(t){var e=t.length;if(e<=1)return t;var r,o=v(Xnt(),2),s=o[0],u=o[1],c=v(Xnt(),2),l=c[0],A=c[1],f=v(Xnt(),2),d=f[0],h=f[1],p=v(Xnt(),2),g=p[0],y=p[1],m=qn(t);try{for(m.s();!(r=m.n()).done;){var b=r.value,w=qnt(b),x=w.min,E=w.max,B=v(x,2),k=B[0],O=B[1],C=v(E,2),M=C[0],S=C[1];u(b,O),A(b,O),h(b,S-O),y(b,[k,M])}}catch(t){m.e(t)}finally{m.f()}for(var F=0;F<n;F++){t.sort(function(t,e){return p$(l(t),l(e))});for(var T=0,P=0;P<e-1;P++){for(var I=t[P],N=P+1,L=void 0;(L=t[N])&&!Ynt(g(I),g(L));)N+=1;if(L){var _=l(I),Q=d(I),U=l(L),j=U-(_+Q);if(j<a){var D=(a-j)/2;T=Math.max(T,D),A(I,_-D),A(L,U+D)}}}if(T<i)break}var R,H=qn(t);try{for(H.s();!(R=H.n()).done;){var z=R.value;z.style.y+=l(z)-s(z)}}catch(t){H.e(t)}finally{H.f()}return t}},Jnt=function(){return function(t){return t.forEach(function(t){J$(t);var e=t.attr("bounds");Vnt(Knt(t.getLocalBounds()),e)&&Z$(t)}),t}};function $nt(t){return"object"==typeof t?t:ao(t)}function trt(t){var e=t/255;return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}function ert(t,e,n){return.2126*trt(t)+.7152*trt(e)+.0722*trt(n)}function nrt(t,e){if(!t||!e||t===e)return 1;var n=t.r,r=t.g,i=t.b,o=e.r,a=e.g,s=e.b,u=ert(n,r,i),c=ert(o,a,s);return(Math.max(u,c)+.05)/(Math.min(u,c)+.05)}function rrt(t,e){return e[P2(e,function(e){return nrt(t,$nt(e))})]}var irt=function(t){var e=t.threshold,n=void 0===e?4.5:e,r=t.palette,i=void 0===r?["#000","#fff"]:r;return function(t){return t.forEach(function(t){var e=t.attr("dependentElement").parsedStyle.fill;nrt(t.parsedStyle.fill,e)<n&&t.attr("fill",rrt(e,i))}),t}};function ort(t){var e,n=t.getAnimations();if(!n||0===n.length)return i0(t);var r=t.cloneNode(!0);r.style.visibility="hidden",n.forEach(function(t){var e=t.effect.getKeyframes();e&&e.length>0&&r.attr(e[e.length-1])}),null===(e=t.parentNode)||void 0===e||e.appendChild(r);var i=i0(r);return r.destroy(),i}var art=function(t){var e=t.palette,n=void 0===e?["#000","#fff"]:e,r=t.threshold,i=void 0===r?2:r;return function(t){return t.forEach(function(t){var e,r,o=t.attr("dependentElement"),a=null!==(r=null!==(e=t.attributes.fill)&&void 0!==e?e:t.parsedStyle.fill)&&void 0!==r?r:"#fff";if(Vnt(Knt(ort(t)),Knt(ort(o)),i)){var s=rrt($nt(a),n);t.attr("stroke",s)}else t.removeAttribute("stroke")}),t}},srt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,n){n.canvas;var r=n.layout,i=t.bounds,o=void 0===i?"view":i,a=t.offsetX,s=void 0===a?0:a,u=t.offsetY,c=void 0===u?0:u,l=function(){if("main"===o){var t=r.x,e=void 0===t?0:t,n=r.y,i=void 0===n?0:n,a=r.width,u=void 0===a?0:a,l=r.height,A=void 0===l?0:l,f=r.marginLeft,d=void 0===f?0:f,h=r.marginRight,p=void 0===h?0:h,v=r.marginTop,g=void 0===v?0:v,y=r.marginBottom,m=void 0===y?0:y,b=r.paddingLeft,w=void 0===b?0:b,x=r.paddingRight,E=void 0===x?0:x,B=r.paddingTop,k=void 0===B?0:B,O=r.paddingBottom;return[[e+d+w+s,i+g+k+c],[e+u-p-E-s,i+A-m-(void 0===O?0:O)-c]]}var C=r.x,M=void 0===C?0:C,S=r.y,F=void 0===S?0:S,T=r.width,P=void 0===T?0:T,I=r.height;return[[M+s,F+c],[M+P-s,F+(void 0===I?0:I)-c]]}();return e.forEach(function(t){J$(t);var e,n,r,i,o,a,s,u,c,A,f,d,h,p,g,y,m,b,w,x=(e=t.getRenderBounds(),n=t.getBounds(),e&&e.min&&e.max?n&&n.min&&n.max?{min:[Math.min(e.min[0],n.min[0]),Math.min(e.min[1],n.min[1])],max:[Math.max(e.max[0],n.max[0]),Math.max(e.max[1],n.max[1])]}:e:n&&n.min&&n.max?n:{min:[0,0],max:[0,0]}),E=x.max,B=x.min;if(E&&B&&(0!==E[0]||0!==E[1]||0!==B[0]||0!==B[1])){var k=v(E,2),O=k[0],C=k[1],M=v(B,2),S=(r=[[M[0],M[1]],[O,C]],i=v(l,2),o=v(i[0],2),a=o[0],s=o[1],u=v(i[1],2),c=u[0],A=u[1],f=v(r,2),d=v(f[0],2),h=d[0],p=d[1],g=v(f[1],2),y=g[0],m=g[1],b=0,w=0,h<a?b=a-h:y>c&&(b=c-y),p<s?w=s-p:m>A&&(w=A-m),[b,w]);t.style.connector&&t.style.connectorPoints&&(t.style.connectorPoints[0][0]-=S[0],t.style.connectorPoints[0][1]-=S[1]),t.style.x+=S[0],t.style.y+=S[1]}}),e}};function urt(){return{"data.fetch":tnt,"data.inline":ent,"data.sortBy":nnt,"data.sort":rnt,"data.filter":ont,"data.pick":ant,"data.rename":snt,"data.fold":unt,"data.slice":cnt,"data.custom":lnt,"data.map":Ant,"data.join":dnt,"data.kde":vnt,"data.log":gnt,"data.wordCloud":Hnt,"data.ema":znt,"transform.stackY":_tt,"transform.binX":det,"transform.bin":fet,"transform.dodgeX":het,"transform.jitter":get,"transform.jitterX":yet,"transform.jitterY":met,"transform.symmetryY":bet,"transform.diffY":wet,"transform.stackEnter":xet,"transform.normalizeY":Eet,"transform.select":Met,"transform.selectX":Fet,"transform.selectY":Tet,"transform.groupX":Iet,"transform.groupY":Net,"transform.groupColor":Let,"transform.group":Pet,"transform.sortX":Qet,"transform.sortY":Uet,"transform.sortColor":jet,"transform.flexX":Det,"transform.pack":Het,"transform.sample":Ket,"transform.filter":Get,"coordinate.cartesian":rz,"coordinate.polar":oz,"coordinate.transpose":az,"coordinate.theta":sz,"coordinate.parallel":uz,"coordinate.fisheye":cz,"coordinate.radial":Az,"coordinate.radar":fz,"coordinate.helix":dz,"encode.constant":hz,"encode.field":pz,"encode.transform":vz,"encode.column":gz,"mark.interval":XV,"mark.rect":ZV,"mark.line":UW,"mark.point":RY,"mark.text":tX,"mark.cell":rX,"mark.area":dX,"mark.link":OX,"mark.image":SX,"mark.polygon":NX,"mark.box":UX,"mark.vector":DX,"mark.lineX":GX,"mark.lineY":YX,"mark.connector":$X,"mark.range":rq,"mark.rangeX":aq,"mark.rangeY":cq,"mark.path":pq,"mark.shape":mq,"mark.density":xq,"mark.heatmap":Pq,"mark.wordCloud":_q,"mark.beeswarm":Uq,"palette.category10":jq,"palette.category20":Dq,"scale.linear":Rq,"scale.ordinal":Hq,"scale.band":zq,"scale.identity":iZ,"scale.point":aZ,"scale.time":qZ,"scale.log":rJ,"scale.pow":aJ,"scale.sqrt":uJ,"scale.threshold":lJ,"scale.quantile":dJ,"scale.quantize":pJ,"scale.sequential":yJ,"scale.constant":mJ,"theme.classic":CJ,"theme.classicDark":FJ,"theme.academy":PJ,"theme.light":OJ,"theme.dark":SJ,"component.axisX":d$,"component.axisY":h$,"component.legendCategory":i1,"component.legendContinuous":p1,"component.legends":v1,"component.title":b1,"component.sliderX":E1,"component.sliderY":B1,"component.scrollbarX":C1,"component.scrollbarY":M1,"animation.scaleInX":S1,"animation.scaleOutX":F1,"animation.scaleInY":T1,"animation.scaleOutY":P1,"animation.waveIn":I1,"animation.fadeIn":N1,"animation.fadeOut":L1,"animation.zoomIn":_1,"animation.zoomOut":Q1,"animation.pathIn":U1,"animation.morphing":Z1,"animation.growInX":J1,"animation.growInY":$1,"interaction.elementHighlight":e2,"interaction.elementHighlightByX":n2,"interaction.elementHighlightByColor":r2,"interaction.elementHoverScale":o2,"interaction.elementSelect":s2,"interaction.elementSelectByX":u2,"interaction.elementSelectByColor":c2,"interaction.fisheye":l2,"interaction.chartIndex":h2,"interaction.tooltip":R8,"interaction.legendFilter":$0,"interaction.legendHighlight":H8,"interaction.brushHighlight":Z8,"interaction.brushXHighlight":$8,"interaction.brushYHighlight":e9,"interaction.brushAxisHighlight":d9,"interaction.brushFilter":v9,"interaction.brushXFilter":g9,"interaction.brushYFilter":y9,"interaction.sliderFilter":S9,"interaction.sliderWheel":P9,"interaction.scrollbarFilter":N9,"interaction.poptip":j9,"interaction.treemapDrillDown":B7,"interaction.drillDown":L7,"interaction.elementPointMove":X7,"composition.spaceLayer":q7,"composition.spaceFlex":J7,"composition.facetRect":ftt,"composition.repeatMatrix":ytt,"composition.facetCircle":Btt,"composition.timingKeyframe":Ott,"labelTransform.overlapHide":Wnt,"labelTransform.overlapDodgeY":Znt,"labelTransform.overflowHide":Jnt,"labelTransform.contrastReverse":irt,"labelTransform.overflowStroke":art,"labelTransform.exceedAdjust":srt}}const crt=function(t){return t};function lrt(t,e){t&&frt.hasOwnProperty(t.type)&&frt[t.type](t,e)}var Art={Feature:function(t,e){lrt(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)lrt(n[r].geometry,e)}},frt={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){drt(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)drt(n[r],e,0)},Polygon:function(t,e){hrt(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)hrt(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)lrt(n[r],e)}};function drt(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function hrt(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)drt(t[n],e,1);e.polygonEnd()}function prt(t,e){t&&Art.hasOwnProperty(t.type)?Art[t.type](t,e):lrt(t,e)}var vrt=function(){return B(function t(){x(this,t),this._partials=new Float64Array(32),this._n=0},[{key:"add",value:function(t){for(var e=this._partials,n=0,r=0;r<this._n&&r<32;r++){var i=e[r],o=t+i,a=Math.abs(t)<Math.abs(i)?t-(o-i):i-(o-t);a&&(e[n++]=a),t=o}return e[n]=t,this._n=n+1,this}},{key:"valueOf",value:function(){var t,e,n,r=this._partials,i=this._n,o=0;if(i>0){for(o=r[--i];i>0&&(t=o,!(n=(e=r[--i])-((o=t+e)-t))););i>0&&(n<0&&r[i-1]<0||n>0&&r[i-1]>0)&&(e=2*n)==(t=o+e)-o&&(o=t)}return o}}])}(),grt=1e-6,yrt=1e-12,mrt=Math.PI,brt=mrt/2,wrt=mrt/4,xrt=2*mrt,Ert=180/mrt,Brt=mrt/180,krt=Math.abs,Ort=Math.atan,Crt=Math.atan2,Mrt=Math.cos,Srt=Math.ceil,Frt=Math.exp,Trt=(Math.floor,Math.hypot,Math.log),Prt=Math.pow,Irt=Math.sin,Nrt=Math.sign||function(t){return t>0?1:t<0?-1:0},Lrt=Math.sqrt,_rt=Math.tan;function Qrt(t){return t>1?0:t<-1?mrt:Math.acos(t)}function Urt(t){return t>1?brt:t<-1?-brt:Math.asin(t)}function jrt(){}var Drt,Rrt,Hrt,zrt,Krt=new vrt,Grt=new vrt,Vrt={point:jrt,lineStart:jrt,lineEnd:jrt,polygonStart:function(){Vrt.lineStart=Wrt,Vrt.lineEnd=qrt},polygonEnd:function(){Vrt.lineStart=Vrt.lineEnd=Vrt.point=jrt,Krt.add(krt(Grt)),Grt=new vrt},result:function(){var t=Krt/2;return Krt=new vrt,t}};function Wrt(){Vrt.point=Yrt}function Yrt(t,e){Vrt.point=Xrt,Drt=Hrt=t,Rrt=zrt=e}function Xrt(t,e){Grt.add(zrt*t-Hrt*e),Hrt=t,zrt=e}function qrt(){Xrt(Drt,Rrt)}const Zrt=Vrt;var Jrt=1/0,$rt=Jrt,tit=-Jrt,eit=tit,nit={point:function(t,e){t<Jrt&&(Jrt=t),t>tit&&(tit=t),e<$rt&&($rt=e),e>eit&&(eit=e)},lineStart:jrt,lineEnd:jrt,polygonStart:jrt,polygonEnd:jrt,result:function(){var t=[[Jrt,$rt],[tit,eit]];return tit=eit=-($rt=Jrt=1/0),t}};const rit=nit;var iit,oit,ait,sit,uit=0,cit=0,lit=0,Ait=0,fit=0,dit=0,hit=0,pit=0,vit=0,git={point:yit,lineStart:mit,lineEnd:xit,polygonStart:function(){git.lineStart=Eit,git.lineEnd=Bit},polygonEnd:function(){git.point=yit,git.lineStart=mit,git.lineEnd=xit},result:function(){var t=vit?[hit/vit,pit/vit]:dit?[Ait/dit,fit/dit]:lit?[uit/lit,cit/lit]:[NaN,NaN];return uit=cit=lit=Ait=fit=dit=hit=pit=vit=0,t}};function yit(t,e){uit+=t,cit+=e,++lit}function mit(){git.point=bit}function bit(t,e){git.point=wit,yit(ait=t,sit=e)}function wit(t,e){var n=t-ait,r=e-sit,i=Lrt(n*n+r*r);Ait+=i*(ait+t)/2,fit+=i*(sit+e)/2,dit+=i,yit(ait=t,sit=e)}function xit(){git.point=yit}function Eit(){git.point=kit}function Bit(){Oit(iit,oit)}function kit(t,e){git.point=Oit,yit(iit=ait=t,oit=sit=e)}function Oit(t,e){var n=t-ait,r=e-sit,i=Lrt(n*n+r*r);Ait+=i*(ait+t)/2,fit+=i*(sit+e)/2,dit+=i,hit+=(i=sit*t-ait*e)*(ait+t),pit+=i*(sit+e),vit+=3*i,yit(ait=t,sit=e)}const Cit=git;function Mit(t){this._context=t}Mit.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,xrt)}},result:jrt};var Sit,Fit,Tit,Pit,Iit,Nit=new vrt,Lit={point:jrt,lineStart:function(){Lit.point=_it},lineEnd:function(){Sit&&Qit(Fit,Tit),Lit.point=jrt},polygonStart:function(){Sit=!0},polygonEnd:function(){Sit=null},result:function(){var t=+Nit;return Nit=new vrt,t}};function _it(t,e){Lit.point=Qit,Fit=Pit=t,Tit=Iit=e}function Qit(t,e){Pit-=t,Iit-=e,Nit.add(Lrt(Pit*Pit+Iit*Iit)),Pit=t,Iit=e}const Uit=Lit;var jit,Dit,Rit,Hit,zit,Kit,Git,Vit,Wit=function(){return B(function t(e){x(this,t),this._append=null==e?Yit:function(t){var e=Math.floor(t);if(!(e>=0))throw new RangeError("invalid digits: ".concat(t));if(e>15)return Yit;if(e!==zit){var n=Math.pow(10,e);zit=e,Kit=function(t){var e=1;this._+=t[0];for(var r=t.length;e<r;++e)this._+=Math.round(arguments[e]*n)/n+t[e]}}return Kit}(e),this._radius=4.5,this._=""},[{key:"pointRadius",value:function(t){return this._radius=+t,this}},{key:"polygonStart",value:function(){this._line=0}},{key:"polygonEnd",value:function(){this._line=NaN}},{key:"lineStart",value:function(){this._point=0}},{key:"lineEnd",value:function(){0===this._line&&(this._+="Z"),this._point=NaN}},{key:"point",value:function(t,e){switch(this._point){case 0:this._append(jit||(jit=kU(["M",",",""])),t,e),this._point=1;break;case 1:this._append(Dit||(Dit=kU(["L",",",""])),t,e);break;default:if(this._append(Rit||(Rit=kU(["M",",",""])),t,e),this._radius!==Git||this._append!==Kit){var n=this._radius,r=this._;this._="",this._append(Hit||(Hit=kU(["m0,","a",","," 0 1,1 0,","a",","," 0 1,1 0,","z"])),n,n,n,-2*n,n,n,2*n),Git=n,Kit=this._append,Vit=this._,this._=r}this._+=Vit}}},{key:"result",value:function(){var t=this._;return this._="",t.length?t:null}}])}();function Yit(t){var e=1;this._+=t[0];for(var n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Xit(t,e){var n,r,i=3,o=4.5;function a(t){return t&&("function"==typeof o&&r.pointRadius(+o.apply(this,arguments)),prt(t,n(r))),r.result()}return a.area=function(t){return prt(t,n(Zrt)),Zrt.result()},a.measure=function(t){return prt(t,n(Uit)),Uit.result()},a.bounds=function(t){return prt(t,n(rit)),rit.result()},a.centroid=function(t){return prt(t,n(Cit)),Cit.result()},a.projection=function(e){return arguments.length?(n=null==e?(t=null,crt):(t=e).stream,a):t},a.context=function(t){return arguments.length?(r=null==t?(e=null,new Wit(i)):new Mit(e=t),"function"!=typeof o&&r.pointRadius(o),a):e},a.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(r.pointRadius(+t),+t),a):o},a.digits=function(t){if(!arguments.length)return i;if(null==t)i=null;else{var n=Math.floor(t);if(!(n>=0))throw new RangeError("invalid digits: ".concat(t));i=n}return null===e&&(r=new Wit(i)),a},a.projection(t).digits(i).context(e)}function qit(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o}function Zit(t,e,n){var r=qit(t,e-grt,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function Jit(t,e,n){var r=qit(t,e-grt,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function $it(){var t,e=[];return{point:function(e,n,r){t.push([e,n,r])},lineStart:function(){e.push(t=[])},lineEnd:jrt,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function tot(t,e){return krt(t[0]-e[0])<grt&&krt(t[1]-e[1])<grt}function eot(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function not(t,e,n,r,i){var o,a,s=[],u=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(tot(r,a)){if(!r[2]&&!a[2]){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);return void i.lineEnd()}a[0]+=2*grt}s.push(n=new eot(r,t,null,!0)),u.push(n.o=new eot(r,null,n,!1)),s.push(n=new eot(a,t,null,!1)),u.push(n.o=new eot(a,null,n,!0))}}),s.length){for(u.sort(e),rot(s),rot(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;for(var c,l,A=s[0];;){for(var f=A,d=!0;f.v;)if((f=f.n)===A)return;c=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(d)for(o=0,a=c.length;o<a;++o)i.point((l=c[o])[0],l[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(d)for(c=f.p.z,o=c.length-1;o>=0;--o)i.point((l=c[o])[0],l[1]);else r(f.x,f.p.x,-1,i);f=f.p}c=(f=f.o).z,d=!d}while(!f.v);i.lineEnd()}}}function rot(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function iot(t){return[Crt(t[1],t[0]),Urt(t[2])]}function oot(t){var e=t[0],n=t[1],r=Mrt(n);return[r*Mrt(e),r*Irt(e),Irt(n)]}function aot(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function sot(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function uot(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function cot(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function lot(t){var e=Lrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Aot(t){return krt(t[0])<=mrt?t[0]:Nrt(t[0])*((krt(t[0])+mrt)%xrt-mrt)}var fot=(0,Dn.A)().m(dot);function dot(t){var e,n,r,i;return(0,Dn.A)().w(function(o){for(;;)switch(o.p=o.n){case 0:e=qn(t),o.p=1,e.s();case 2:if((n=e.n()).done){o.n=4;break}return r=n.value,o.d(Vn(r),3);case 3:o.n=2;break;case 4:o.n=6;break;case 5:o.p=5,i=o.v,e.e(i);case 6:return o.p=6,e.f(),o.f(6);case 7:return o.a(2)}},fot,null,[[1,5,6,7]])}function hot(t){return Array.from(dot(t))}function pot(t,e,n,r){return function(i){var o,a,s,u=e(i),c=$it(),l=e(c),A=!1,f={point:d,lineStart:p,lineEnd:v,polygonStart:function(){f.point=g,f.lineStart=y,f.lineEnd=m,a=[],o=[]},polygonEnd:function(){f.point=d,f.lineStart=p,f.lineEnd=v,a=hot(a);var t=function(t,e){var n=Aot(e),r=e[1],i=Irt(r),o=[Irt(n),-Mrt(n),0],a=0,s=0,u=new vrt;1===i?r=brt+grt:-1===i&&(r=-brt-grt);for(var c=0,l=t.length;c<l;++c)if(f=(A=t[c]).length)for(var A,f,d=A[f-1],h=Aot(d),p=d[1]/2+wrt,v=Irt(p),g=Mrt(p),y=0;y<f;++y,h=b,v=x,g=E,d=m){var m=A[y],b=Aot(m),w=m[1]/2+wrt,x=Irt(w),E=Mrt(w),B=b-h,k=B>=0?1:-1,O=k*B,C=O>mrt,M=v*x;if(u.add(Crt(M*k*Irt(O),g*E+M*Mrt(O))),a+=C?B+k*xrt:B,C^h>=n^b>=n){var S=sot(oot(d),oot(m));lot(S);var F=sot(o,S);lot(F);var T=(C^B>=0?-1:1)*Urt(F[2]);(r>T||r===T&&(S[0]||S[1]))&&(s+=C^B>=0?1:-1)}}return(a<-grt||a<grt&&u<-yrt)^1&s}(o,r);a.length?(A||(i.polygonStart(),A=!0),not(a,got,t,n,i)):t&&(A||(i.polygonStart(),A=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),A&&(i.polygonEnd(),A=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(e,n){t(e,n)&&i.point(e,n)}function h(t,e){u.point(t,e)}function p(){f.point=h,u.lineStart()}function v(){f.point=d,u.lineEnd()}function g(t,e){s.push([t,e]),l.point(t,e)}function y(){l.lineStart(),s=[]}function m(){g(s[0][0],s[0][1]),l.lineEnd();var t,e,n,r,u=l.clean(),f=c.result(),d=f.length;if(s.pop(),o.push(s),s=null,d)if(1&u){if((e=(n=f[0]).length-1)>0){for(A||(i.polygonStart(),A=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}}else d>1&&2&u&&f.push(f.pop().concat(f.shift())),a.push(f.filter(vot))}return f}}function vot(t){return t.length>1}function got(t,e){return((t=t.x)[0]<0?t[1]-brt-grt:brt-t[1])-((e=e.x)[0]<0?e[1]-brt-grt:brt-e[1])}const yot=pot(function(){return!0},function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?mrt:-mrt,u=krt(o-n);krt(u-mrt)<grt?(t.point(n,r=(r+a)/2>0?brt:-brt),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&u>=mrt&&(krt(n-i)<grt&&(n-=i*grt),krt(o-s)<grt&&(o-=s*grt),r=function(t,e,n,r){var i,o,a=Irt(t-n);return krt(a)>grt?Ort((Irt(e)*(o=Mrt(r))*Irt(n)-Irt(r)*(i=Mrt(e))*Irt(t))/(i*o*a)):(e+r)/2}(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}},function(t,e,n,r){var i;if(null==t)i=n*brt,r.point(-mrt,i),r.point(0,i),r.point(mrt,i),r.point(mrt,0),r.point(mrt,-i),r.point(0,-i),r.point(-mrt,-i),r.point(-mrt,0),r.point(-mrt,i);else if(krt(t[0]-e[0])>grt){var o=t[0]<e[0]?mrt:-mrt;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])},[-mrt,-brt]);function mot(t,e){(e=oot(e))[0]-=t,lot(e);var n=Qrt(-e[1]);return((-e[2]<0?-n:n)+xrt-grt)%xrt}var bot=1e9,wot=-bot;function xot(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,s,c){var l=0,A=0;if(null==i||(l=a(i,s))!==(A=a(o,s))||u(i,o)<0^s>0)do{c.point(0===l||3===l?t:n,l>1?r:e)}while((l=(l+s+4)%4)!==A);else c.point(o[0],o[1])}function a(r,i){return krt(r[0]-t)<grt?i>0?0:3:krt(r[0]-n)<grt?i>0?2:1:krt(r[1]-e)<grt?i>0?1:0:i>0?3:2}function s(t,e){return u(t.x,e.x)}function u(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){var u,c,l,A,f,d,h,p,v,g,y,m=a,b=$it(),w={point:x,lineStart:function(){w.point=E,c&&c.push(l=[]),g=!0,v=!1,h=p=NaN},lineEnd:function(){u&&(E(A,f),d&&v&&b.rejoin(),u.push(b.result())),w.point=x,v&&m.lineEnd()},polygonStart:function(){m=b,u=[],c=[],y=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=c.length;n<i;++n)for(var o,a,s=c[n],u=1,l=s.length,A=s[0],f=A[0],d=A[1];u<l;++u)o=f,a=d,f=(A=s[u])[0],d=A[1],a<=r?d>r&&(f-o)*(r-a)>(d-a)*(t-o)&&++e:d<=r&&(f-o)*(r-a)<(d-a)*(t-o)&&--e;return e}(),n=y&&e,i=(u=hot(u)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&not(u,s,e,o,a),a.polygonEnd()),m=a,u=c=l=null}};function x(t,e){i(t,e)&&m.point(t,e)}function E(o,a){var s=i(o,a);if(c&&l.push([o,a]),g)A=o,f=a,d=s,g=!1,s&&(m.lineStart(),m.point(o,a));else if(s&&v)m.point(o,a);else{var u=[h=Math.max(wot,Math.min(bot,h)),p=Math.max(wot,Math.min(bot,p))],b=[o=Math.max(wot,Math.min(bot,o)),a=Math.max(wot,Math.min(bot,a))];!function(t,e,n,r,i,o){var a,s=t[0],u=t[1],c=0,l=1,A=e[0]-s,f=e[1]-u;if(a=n-s,A||!(a>0)){if(a/=A,A<0){if(a<c)return;a<l&&(l=a)}else if(A>0){if(a>l)return;a>c&&(c=a)}if(a=i-s,A||!(a<0)){if(a/=A,A<0){if(a>l)return;a>c&&(c=a)}else if(A>0){if(a<c)return;a<l&&(l=a)}if(a=r-u,f||!(a>0)){if(a/=f,f<0){if(a<c)return;a<l&&(l=a)}else if(f>0){if(a>l)return;a>c&&(c=a)}if(a=o-u,f||!(a<0)){if(a/=f,f<0){if(a>l)return;a>c&&(c=a)}else if(f>0){if(a<c)return;a<l&&(l=a)}return c>0&&(t[0]=s+c*A,t[1]=u+c*f),l<1&&(e[0]=s+l*A,e[1]=u+l*f),!0}}}}}(u,b,t,e,n,r)?s&&(m.lineStart(),m.point(o,a),y=!1):(v||(m.lineStart(),m.point(u[0],u[1])),m.point(b[0],b[1]),s||m.lineEnd(),y=!1)}h=o,p=a,v=s}return w}}function Eot(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function Bot(t,e){return krt(t)>mrt&&(t-=Math.round(t/xrt)*xrt),[t,e]}function kot(t,e,n){return(t%=xrt)?e||n?Eot(Cot(t),Mot(e,n)):Cot(t):e||n?Mot(e,n):Bot}function Oot(t){return function(e,n){return krt(e+=t)>mrt&&(e-=Math.round(e/xrt)*xrt),[e,n]}}function Cot(t){var e=Oot(t);return e.invert=Oot(-t),e}function Mot(t,e){var n=Mrt(t),r=Irt(t),i=Mrt(e),o=Irt(e);function a(t,e){var a=Mrt(e),s=Mrt(t)*a,u=Irt(t)*a,c=Irt(e),l=c*n+s*r;return[Crt(u*i-l*o,s*n-c*r),Urt(l*i+u*o)]}return a.invert=function(t,e){var a=Mrt(e),s=Mrt(t)*a,u=Irt(t)*a,c=Irt(e),l=c*i-u*o;return[Crt(u*i+c*o,s*n+l*r),Urt(l*n-s*r)]},a}function Sot(t){return function(e){var n=new Fot;for(var r in t)n[r]=t[r];return n.stream=e,n}}function Fot(){}function Tot(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),prt(n,t.stream(rit)),e(rit.result()),null!=r&&t.clipExtent(r),t}function Pot(t,e,n){return Tot(t,function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),a=+e[0][0]+(r-o*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(i-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([a,s])},n)}function Iot(t,e,n){return Pot(t,[[0,0],e],n)}function Not(t,e,n){return Tot(t,function(n){var r=+e,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,a=-i*n[0][1];t.scale(150*i).translate([o,a])},n)}function Lot(t,e,n){return Tot(t,function(n){var r=+e,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],a=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([o,a])},n)}Bot.invert=Bot,Fot.prototype={constructor:Fot,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var _ot=16,Qot=Mrt(30*Brt);function Uot(t,e){return+e?function(t,e){function n(r,i,o,a,s,u,c,l,A,f,d,h,p,v){var g=c-r,y=l-i,m=g*g+y*y;if(m>4*e&&p--){var b=a+f,w=s+d,x=u+h,E=Lrt(b*b+w*w+x*x),B=Urt(x/=E),k=krt(krt(x)-1)<grt||krt(o-A)<grt?(o+A)/2:Crt(w,b),O=t(k,B),C=O[0],M=O[1],S=C-r,F=M-i,T=y*S-g*F;(T*T/m>e||krt((g*S+y*F)/m-.5)>.3||a*f+s*d+u*h<Qot)&&(n(r,i,o,a,s,u,C,M,k,b/=E,w/=E,x,p,v),v.point(C,M),n(C,M,k,b,w,x,c,l,A,f,d,h,p,v))}}return function(e){var r,i,o,a,s,u,c,l,A,f,d,h,p={point:v,lineStart:g,lineEnd:m,polygonStart:function(){e.polygonStart(),p.lineStart=b},polygonEnd:function(){e.polygonEnd(),p.lineStart=g}};function v(n,r){n=t(n,r),e.point(n[0],n[1])}function g(){l=NaN,p.point=y,e.lineStart()}function y(r,i){var o=oot([r,i]),a=t(r,i);n(l,A,c,f,d,h,l=a[0],A=a[1],c=r,f=o[0],d=o[1],h=o[2],_ot,e),e.point(l,A)}function m(){p.point=v,e.lineEnd()}function b(){g(),p.point=w,p.lineEnd=x}function w(t,e){y(r=t,e),i=l,o=A,a=f,s=d,u=h,p.point=y}function x(){n(l,A,c,f,d,h,i,o,r,a,s,u,_ot,e),p.lineEnd=m,m()}return p}}(t,e):function(t){return Sot({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var jot=Sot({point:function(t,e){this.stream.point(t*Brt,e*Brt)}});function Dot(t,e,n,r,i,o){if(!o)return function(t,e,n,r,i){function o(o,a){return[e+t*(o*=r),n-t*(a*=i)]}return o.invert=function(o,a){return[(o-e)/t*r,(n-a)/t*i]},o}(t,e,n,r,i);var a=Mrt(o),s=Irt(o),u=a*t,c=s*t,l=a/t,A=s/t,f=(s*n-a*e)/t,d=(s*e+a*n)/t;function h(t,o){return[u*(t*=r)-c*(o*=i)+e,n-c*t-u*o]}return h.invert=function(t,e){return[r*(l*t-A*e+f),i*(d-A*t-l*e)]},h}function Rot(t){return Hot(function(){return t})()}function Hot(t){var e,n,r,i,o,a,s,u,c,l,A=150,f=480,d=250,h=0,p=0,v=0,g=0,y=0,m=0,b=1,w=1,x=null,E=yot,B=null,k=crt,O=.5;function C(t){return u(t[0]*Brt,t[1]*Brt)}function M(t){return(t=u.invert(t[0],t[1]))&&[t[0]*Ert,t[1]*Ert]}function S(){var t=Dot(A,0,0,b,w,m).apply(null,e(h,p)),r=Dot(A,f-t[0],d-t[1],b,w,m);return n=kot(v,g,y),s=Eot(e,r),u=Eot(n,s),a=Uot(s,O),F()}function F(){return c=l=null,C}return C.stream=function(t){return c&&l===t?c:c=jot(function(t){return Sot({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}(n)(E(a(k(l=t)))))},C.preclip=function(t){return arguments.length?(E=t,x=void 0,F()):E},C.postclip=function(t){return arguments.length?(k=t,B=r=i=o=null,F()):k},C.clipAngle=function(t){return arguments.length?(E=+t?function(t){var e=Mrt(t),n=2*Brt,r=e>0,i=krt(e)>grt;function o(t,n){return Mrt(t)*Mrt(n)>e}function a(t,n,r){var i=[1,0,0],o=sot(oot(t),oot(n)),a=aot(o,o),s=o[0],u=a-s*s;if(!u)return!r&&t;var c=e*a/u,l=-e*s/u,A=sot(i,o),f=cot(i,c);uot(f,cot(o,l));var d=A,h=aot(f,d),p=aot(d,d),v=h*h-p*(aot(f,f)-1);if(!(v<0)){var g=Lrt(v),y=cot(d,(-h-g)/p);if(uot(y,f),y=iot(y),!r)return y;var m,b=t[0],w=n[0],x=t[1],E=n[1];w<b&&(m=b,b=w,w=m);var B=w-b,k=krt(B-mrt)<grt;if(!k&&E<x&&(m=x,x=E,E=m),k||B<grt?k?x+E>0^y[1]<(krt(y[0]-b)<grt?x:E):x<=y[1]&&y[1]<=E:B>mrt^(b<=y[0]&&y[0]<=w)){var O=cot(d,(-h+g)/p);return uot(O,f),[y,iot(O)]}}}function s(e,n){var i=r?t:mrt-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return pot(o,function(t){var e,n,u,c,l;return{lineStart:function(){c=u=!1,l=1},point:function(A,f){var d,h=[A,f],p=o(A,f),v=r?p?0:s(A,f):p?s(A+(A<0?mrt:-mrt),f):0;if(!e&&(c=u=p)&&t.lineStart(),p!==u&&(!(d=a(e,h))||tot(e,d)||tot(h,d))&&(h[2]=1),p!==u)l=0,p?(t.lineStart(),d=a(h,e),t.point(d[0],d[1])):(d=a(e,h),t.point(d[0],d[1],2),t.lineEnd()),e=d;else if(i&&e&&r^p){var g;v&n||!(g=a(h,e,!0))||(l=0,r?(t.lineStart(),t.point(g[0][0],g[0][1]),t.point(g[1][0],g[1][1]),t.lineEnd()):(t.point(g[1][0],g[1][1]),t.lineEnd(),t.lineStart(),t.point(g[0][0],g[0][1],3)))}!p||e&&tot(e,h)||t.point(h[0],h[1]),e=h,u=p,n=v},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return l|(c&&u)<<1}}},function(e,r,i,o){!function(t,e,n,r,i,o){if(n){var a=Mrt(e),s=Irt(e),u=r*n;null==i?(i=e+r*xrt,o=e-u/2):(i=mot(a,i),o=mot(a,o),(r>0?i<o:i>o)&&(i+=r*xrt));for(var c,l=i;r>0?l>o:l<o;l-=u)c=iot([a,-s*Mrt(l),-s*Irt(l)]),t.point(c[0],c[1])}}(o,t,n,i,e,r)},r?[0,-t]:[-mrt,t-mrt])}(x=t*Brt):(x=null,yot),F()):x*Ert},C.clipExtent=function(t){return arguments.length?(k=null==t?(B=r=i=o=null,crt):xot(B=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),F()):null==B?null:[[B,r],[i,o]]},C.scale=function(t){return arguments.length?(A=+t,S()):A},C.translate=function(t){return arguments.length?(f=+t[0],d=+t[1],S()):[f,d]},C.center=function(t){return arguments.length?(h=t[0]%360*Brt,p=t[1]%360*Brt,S()):[h*Ert,p*Ert]},C.rotate=function(t){return arguments.length?(v=t[0]%360*Brt,g=t[1]%360*Brt,y=t.length>2?t[2]%360*Brt:0,S()):[v*Ert,g*Ert,y*Ert]},C.angle=function(t){return arguments.length?(m=t%360*Brt,S()):m*Ert},C.reflectX=function(t){return arguments.length?(b=t?-1:1,S()):b<0},C.reflectY=function(t){return arguments.length?(w=t?-1:1,S()):w<0},C.precision=function(t){return arguments.length?(a=Uot(s,O=t*t),F()):Lrt(O)},C.fitExtent=function(t,e){return Pot(C,t,e)},C.fitSize=function(t,e){return Iot(C,t,e)},C.fitWidth=function(t,e){return Not(C,t,e)},C.fitHeight=function(t,e){return Lot(C,t,e)},function(){return e=t.apply(this,arguments),C.invert=e.invert&&M,S()}}function zot(t){var e=0,n=mrt/3,r=Hot(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*Brt,n=t[1]*Brt):[e*Ert,n*Ert]},i}function Kot(t,e){var n=Irt(t),r=(n+Irt(e))/2;if(krt(r)<grt)return function(t){var e=Mrt(t);function n(t,n){return[t*e,Irt(n)/e]}return n.invert=function(t,n){return[t/e,Urt(n*e)]},n}(t);var i=1+n*(2*r-n),o=Lrt(i)/r;function a(t,e){var n=Lrt(i-2*r*Irt(e))/r;return[n*Irt(t*=r),o-n*Mrt(t)]}return a.invert=function(t,e){var n=o-e,a=Crt(t,krt(n))*Nrt(n);return n*r<0&&(a-=mrt*Nrt(t)*Nrt(n)),[a/r,Urt((i-(t*t+n*n)*r*r)/(2*r))]},a}function Got(){return zot(Kot).scale(155.424).center([0,33.6442])}function Vot(){return Got().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Wot(){var t,e,n,r,i,o,a=Vot(),s=Got().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=Got().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){o=[t,e]}};function l(t){var e=t[0],a=t[1];return o=null,n.point(e,a),o||(r.point(e,a),o)||(i.point(e,a),o)}function A(){return t=e=null,l}return l.invert=function(t){var e=a.scale(),n=a.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?u:a).invert(t)},l.stream=function(n){return t&&e===n?t:t=function(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}([a.stream(e=n),s.stream(n),u.stream(n)])},l.precision=function(t){return arguments.length?(a.precision(t),s.precision(t),u.precision(t),A()):a.precision()},l.scale=function(t){return arguments.length?(a.scale(t),s.scale(.35*t),u.scale(t),l.translate(a.translate())):a.scale()},l.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),o=+t[0],l=+t[1];return n=a.translate(t).clipExtent([[o-.455*e,l-.238*e],[o+.455*e,l+.238*e]]).stream(c),r=s.translate([o-.307*e,l+.201*e]).clipExtent([[o-.425*e+grt,l+.12*e+grt],[o-.214*e-grt,l+.234*e-grt]]).stream(c),i=u.translate([o-.205*e,l+.212*e]).clipExtent([[o-.214*e+grt,l+.166*e+grt],[o-.115*e-grt,l+.234*e-grt]]).stream(c),A()},l.fitExtent=function(t,e){return Pot(l,t,e)},l.fitSize=function(t,e){return Iot(l,t,e)},l.fitWidth=function(t,e){return Not(l,t,e)},l.fitHeight=function(t,e){return Lot(l,t,e)},l.scale(1070)}function Yot(t){return function(e,n){var r=Mrt(e),i=Mrt(n),o=t(r*i);return o===1/0?[2,0]:[o*i*Irt(e),o*Irt(n)]}}function Xot(t){return function(e,n){var r=Lrt(e*e+n*n),i=t(r),o=Irt(i),a=Mrt(i);return[Crt(e*o,r*a),Urt(r&&n*o/r)]}}var qot=Yot(function(t){return Lrt(2/(1+t))});function Zot(){return Rot(qot).scale(124.75).clipAngle(179.999)}qot.invert=Xot(function(t){return 2*Urt(t/2)});var Jot=Yot(function(t){return(t=Qrt(t))&&t/Irt(t)});function $ot(){return Rot(Jot).scale(79.4188).clipAngle(179.999)}function tat(t,e){return[t,Trt(_rt((brt+e)/2))]}function eat(){return nat(tat).scale(961/xrt)}function nat(t){var e,n,r,i=Rot(t),o=i.center,a=i.scale,s=i.translate,u=i.clipExtent,c=null;function l(){var o=mrt*a(),s=i(function(t){function e(e){return(e=t(e[0]*Brt,e[1]*Brt))[0]*=Ert,e[1]*=Ert,e}return t=kot(t[0]*Brt,t[1]*Brt,t.length>2?t[2]*Brt:0),e.invert=function(e){return(e=t.invert(e[0]*Brt,e[1]*Brt))[0]*=Ert,e[1]*=Ert,e},e}(i.rotate()).invert([0,0]));return u(null==c?[[s[0]-o,s[1]-o],[s[0]+o,s[1]+o]]:t===tat?[[Math.max(s[0]-o,c),e],[Math.min(s[0]+o,n),r]]:[[c,Math.max(s[1]-o,e)],[n,Math.min(s[1]+o,r)]])}return i.scale=function(t){return arguments.length?(a(t),l()):a()},i.translate=function(t){return arguments.length?(s(t),l()):s()},i.center=function(t){return arguments.length?(o(t),l()):o()},i.clipExtent=function(t){return arguments.length?(null==t?c=e=n=r=null:(c=+t[0][0],e=+t[0][1],n=+t[1][0],r=+t[1][1]),l()):null==c?null:[[c,e],[n,r]]},l()}function rat(t){return _rt((brt+t)/2)}function iat(t,e){var n=Mrt(t),r=t===e?Irt(t):Trt(n/Mrt(e))/Trt(rat(e)/rat(t)),i=n*Prt(rat(t),r)/r;if(!r)return tat;function o(t,e){i>0?e<-brt+grt&&(e=-brt+grt):e>brt-grt&&(e=brt-grt);var n=i/Prt(rat(e),r);return[n*Irt(r*t),i-n*Mrt(r*t)]}return o.invert=function(t,e){var n=i-e,o=Nrt(r)*Lrt(t*t+n*n),a=Crt(t,krt(n))*Nrt(n);return n*r<0&&(a-=mrt*Nrt(t)*Nrt(n)),[a/r,2*Ort(Prt(i/o,1/r))-brt]},o}function oat(){return zot(iat).scale(109.5).parallels([30,30])}function aat(t,e){return[t,e]}function sat(){return Rot(aat).scale(152.63)}function uat(t,e){var n=Mrt(t),r=t===e?Irt(t):(n-Mrt(e))/(e-t),i=n/r+t;if(krt(r)<grt)return aat;function o(t,e){var n=i-e,o=r*t;return[n*Irt(o),i-n*Mrt(o)]}return o.invert=function(t,e){var n=i-e,o=Crt(t,krt(n))*Nrt(n);return n*r<0&&(o-=mrt*Nrt(t)*Nrt(n)),[o/r,i-Nrt(r)*Lrt(t*t+n*n)]},o}function cat(){return zot(uat).scale(131.154).center([0,13.9389])}Jot.invert=Xot(function(t){return t}),tat.invert=function(t,e){return[t,2*Ort(Frt(e))-brt]},aat.invert=aat;var lat=1.340264,Aat=-.081106,fat=893e-6,dat=.003796,hat=Lrt(3)/2;function pat(t,e){var n=Urt(hat*Irt(e)),r=n*n,i=r*r*r;return[t*Mrt(n)/(hat*(lat+3*Aat*r+i*(7*fat+9*dat*r))),n*(lat+Aat*r+i*(fat+dat*r))]}function vat(){return Rot(pat).scale(177.158)}function gat(t,e){var n=Mrt(e),r=Mrt(t)*n;return[n*Irt(t)/r,Irt(e)/r]}function yat(){return Rot(gat).scale(144.049).clipAngle(60)}function mat(){var t,e,n,r,i,o,a,s=1,u=0,c=0,l=1,A=1,f=0,d=null,h=1,p=1,v=Sot({point:function(t,e){var n=m([t,e]);this.stream.point(n[0],n[1])}}),g=crt;function y(){return h=s*l,p=s*A,o=a=null,m}function m(n){var r=n[0]*h,i=n[1]*p;if(f){var o=i*t-r*e;r=r*t+i*e,i=o}return[r+u,i+c]}return m.invert=function(n){var r=n[0]-u,i=n[1]-c;if(f){var o=i*t+r*e;r=r*t-i*e,i=o}return[r/h,i/p]},m.stream=function(t){return o&&a===t?o:o=v(g(a=t))},m.postclip=function(t){return arguments.length?(g=t,d=n=r=i=null,y()):g},m.clipExtent=function(t){return arguments.length?(g=null==t?(d=n=r=i=null,crt):xot(d=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),y()):null==d?null:[[d,n],[r,i]]},m.scale=function(t){return arguments.length?(s=+t,y()):s},m.translate=function(t){return arguments.length?(u=+t[0],c=+t[1],y()):[u,c]},m.angle=function(n){return arguments.length?(e=Irt(f=n%360*Brt),t=Mrt(f),y()):f*Ert},m.reflectX=function(t){return arguments.length?(l=t?-1:1,y()):l<0},m.reflectY=function(t){return arguments.length?(A=t?-1:1,y()):A<0},m.fitExtent=function(t,e){return Pot(m,t,e)},m.fitSize=function(t,e){return Iot(m,t,e)},m.fitWidth=function(t,e){return Not(m,t,e)},m.fitHeight=function(t,e){return Lot(m,t,e)},m}function bat(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function wat(){return Rot(bat).scale(175.295)}function xat(t,e){return[Mrt(e)*Irt(t),Irt(e)]}function Eat(){return Rot(xat).scale(249.5).clipAngle(90+grt)}function Bat(t,e){var n=Mrt(e),r=1+Mrt(t)*n;return[n*Irt(t)/r,Irt(e)/r]}function kat(){return Rot(Bat).scale(250).clipAngle(142)}function Oat(t,e){return[Trt(_rt((brt+e)/2)),-t]}function Cat(){var t=nat(Oat),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)}pat.invert=function(t,e){for(var n,r=e,i=r*r,o=i*i*i,a=0;a<12&&(o=(i=(r-=n=(r*(lat+Aat*i+o*(fat+dat*i))-e)/(lat+3*Aat*i+o*(7*fat+9*dat*i)))*r)*i*i,!(krt(n)<yrt));++a);return[hat*t*(lat+3*Aat*i+o*(7*fat+9*dat*i))/Mrt(r),Urt(Irt(r)/hat)]},gat.invert=Xot(Ort),bat.invert=function(t,e){var n,r=e,i=25;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-e)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(krt(n)>grt&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]},xat.invert=Xot(Urt),Bat.invert=Xot(function(t){return 2*Ort(t)}),Oat.invert=function(t,e){return[-e,2*Ort(Frt(t))-brt]};function Mat(t){var e=t.data;if(Array.isArray(e))return Object.assign(Object.assign({},t),{data:{value:e}});var n=e.type;return"graticule10"===n?Object.assign(Object.assign({},t),{data:{value:[function(){var t,e,n,r,i,o,a,s,u,c,l,A,f=10,d=f,h=90,p=360,v=2.5;function g(){return{type:"MultiLineString",coordinates:y()}}function y(){return qit(Srt(r/h)*h,n,h).map(l).concat(qit(Srt(s/p)*p,a,p).map(A)).concat(qit(Srt(e/f)*f,t,f).filter(function(t){return krt(t%h)>grt}).map(u)).concat(qit(Srt(o/d)*d,i,d).filter(function(t){return krt(t%p)>grt}).map(c))}return g.lines=function(){return y().map(function(t){return{type:"LineString",coordinates:t}})},g.outline=function(){return{type:"Polygon",coordinates:[l(r).concat(A(a).slice(1),l(n).reverse().slice(1),A(s).reverse().slice(1))]}},g.extent=function(t){return arguments.length?g.extentMajor(t).extentMinor(t):g.extentMinor()},g.extentMajor=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],s=+t[0][1],a=+t[1][1],r>n&&(t=r,r=n,n=t),s>a&&(t=s,s=a,a=t),g.precision(v)):[[r,s],[n,a]]},g.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],o=+n[0][1],i=+n[1][1],e>t&&(n=e,e=t,t=n),o>i&&(n=o,o=i,i=n),g.precision(v)):[[e,o],[t,i]]},g.step=function(t){return arguments.length?g.stepMajor(t).stepMinor(t):g.stepMinor()},g.stepMajor=function(t){return arguments.length?(h=+t[0],p=+t[1],g):[h,p]},g.stepMinor=function(t){return arguments.length?(f=+t[0],d=+t[1],g):[f,d]},g.precision=function(f){return arguments.length?(v=+f,u=Zit(o,i,90),c=Jit(e,t,v),l=Zit(s,a,90),A=Jit(r,n,v),g):v},g.extentMajor([[-180,-90+grt],[180,90-grt]]).extentMinor([[-180,-80-grt],[180,80+grt]])}()()]}}):"sphere"===n?Object.assign(Object.assign({},t),{sphere:!0,data:{value:[{type:"Sphere"}]}}):t}function Sat(t){return"geoPath"===t.type}var Fat=function(){return function(t){var e=t.children,n=t.coordinate,r=void 0===n?{}:n;if(!Array.isArray(e))return[];var i,o=r.type,a=void 0===o?"equalEarth":o,u=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(r,["type"]),c=function(t){if("function"==typeof t)return t;var e="geo".concat(Gg(t)),n=s[e];if(!n)throw new Error("Unknown coordinate: ".concat(t));return n}(a),l=e.map(function(e){return Object.assign(Object.assign({},e),{data:S2(e.data,t.data)})}).map(Mat);return[Object.assign(Object.assign({},t),{type:"view",scale:{x:{type:"identity"},y:{type:"identity"}},axis:!1,coordinate:{type:function(){return[["custom",function(t,e,n,r){var o=c();(function(t,e,n,r){var i,o,a,s=r.outline,u=void 0===s?(a=(o=e.filter(Sat)).find(function(t){return t.sphere}),a?{type:"Sphere"}:(i=o.filter(function(t){return!t.sphere}).flatMap(function(t){return t.data.value}),{type:"FeatureCollection",features:i.flatMap(function(t){return function(t){if(!t||!t.type)return null;var e={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featureCollection"}[t.type];return e?"geometry"===e?{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:t}]}:"feature"===e?{type:"FeatureCollection",features:[t]}:"featureCollection"===e?t:void 0:null}(t).features})})):s,c=r.size,l=void 0===c?"fitExtent":c;"fitExtent"===l?function(t,e,n){var r=n.x,i=n.y,o=n.width,a=n.height;t.fitExtent([[r,i],[o,a]],e)}(t,u,n):"fitWidth"===l&&function(t,e,n){var r=n.width,i=n.height,o=v(Xit(t.fitWidth(r,e)).bounds(e),2),a=v(o[0],2),s=a[0],u=a[1],c=v(o[1],2),l=c[0],A=c[1],f=Math.ceil(A-u),d=Math.min(Math.ceil(l-s),f),h=t.scale()*(d-1)/d,p=v(t.translate(),2),g=p[0],y=p[1]+(i-f)/2;t.scale(h).translate([g,y]).precision(.2)}(t,u,n)})(o,l,{x:t,y:e,width:n,height:r},u),function(t,e){for(var n,r=0,i=Object.entries(e);r<i.length;r++){var o=v(i[r],2),a=o[0],s=o[1];null===(n=t[a])||void 0===n||n.call(t,s)}}(o,u),i=Xit(o);var a=new YG({domain:[t,t+n]}),s=new YG({domain:[e,e+r]});return{transform:function(t){return function(t){var e=o(t);if(!e)return[null,null];var n=v(e,2),r=n[0],i=n[1];return[a.map(r),s.map(i)]}(t)},untransform:function(t){return function(t){if(!t)return null;var e=v(t,2),n=e[0],r=e[1],i=[a.invert(n),s.invert(r)];return o.invert(i)}(t)}}}]]}},children:l.flatMap(function(t){return Sat(t)?function(t){var e=t.style,n=t.tooltip,r=void 0===n?{}:n;return Object.assign(Object.assign({},t),{type:"path",tooltip:y2(r,{title:"id",items:[{channel:"color"}]}),style:Object.assign(Object.assign({},e),{d:function(t){return i(t)||[]}})})}(t):t})})]}};Fat.props={};var Tat=function(){return function(t){t.type;var e=t.data,n=t.scale,r=t.encode,i=t.style,o=t.animate,a=t.key,s=t.state,u=t.tooltip,c=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["type","data","scale","encode","style","animate","key","state","tooltip"]);return[Object.assign(Object.assign({type:"geoView"},c),{children:[{type:"geoPath",key:"".concat(a,"-0"),data:{value:e},scale:n,encode:r,style:i,animate:o,state:s,tooltip:u}]})]}};function Pat(){return{"composition.geoView":Fat,"composition.geoPath":Tat}}Tat.props={};var Iat={joint:!0},Nat={type:"link",axis:!1,legend:!1,encode:{x:[function(t){return t.source.x},function(t){return t.target.x}],y:[function(t){return t.source.y},function(t){return t.target.y}]},style:{stroke:"#999",strokeOpacity:.6}},Lat={type:"point",axis:!1,legend:!1,encode:{x:"x",y:"y",size:5,color:"group",shape:"point"},style:{stroke:"#fff"}},_at={text:""},Qat=function(t){var e=t.data,n=t.encode,r=void 0===n?{}:n,i=t.scale,o=t.style,a=void 0===o?{}:o,s=t.layout,u=void 0===s?{}:s,c=t.nodeLabels,l=void 0===c?[]:c,A=t.linkLabels,f=void 0===A?[]:A,d=t.animate,h=void 0===d?{}:d,p=t.tooltip,v=void 0===p?{}:p,g=r.nodeKey,y=void 0===g?function(t){return t.id}:g,m=r.linkKey,b=void 0===m?function(t){return t.id}:m,w=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(r,["nodeKey","linkKey"]),x=Object.assign({nodeKey:y,linkKey:b},w),E=hG(x,"node"),B=hG(x,"link"),k=VV(e,x),C=function(t,e,n){var r=t.nodes,i=t.links,o=e.joint,a=e.nodeStrength,s=e.linkStrength,u=(n.nodeKey,n.linkKey),c=void 0===u?function(t){return t.id}:u,l=uM(),A=IC(i).id(KV(c));"function"==typeof a&&l.strength(a),"function"==typeof s&&A.strength(s);var f=sM(r).force("link",A).force("charge",l);o?f.force("center",cM()):f.force("x",hM()).force("y",pM()),f.stop();for(var d=Math.ceil(Math.log(f.alphaMin())/Math.log(1-f.alphaDecay())),h=0;h<d;h++)f.tick();return{nodesData:r,linksData:i}}({links:k.links,nodes:k.nodes},Xm({},Iat,u),x),M=C.nodesData,S=C.linksData,F=g2(v,"link",{items:[function(t){return{name:"source",value:KV(b)(t.source)}},function(t){return{name:"target",value:KV(b)(t.target)}}]}),T=g2(v,"node",{items:[function(t){return{name:"key",value:KV(y)(t)}}]},!0);return[Xm({},Nat,{data:S,encode:B,labels:f,style:hG(a,"link"),tooltip:F,animate:b2(h,"link")}),Xm({},Lat,{data:M,encode:Object.assign({},E),scale:i,style:hG(a,"node"),tooltip:T,labels:[Object.assign(Object.assign({},_at),hG(a,"label"))].concat(O(l)),animate:b2(h,"link")})]};function Uat(t,e){return t.parent===e.parent?1:2}function jat(t){var e=t.children;return e?e[0]:t.t}function Dat(t){var e=t.children;return e?e[e.length-1]:t.t}function Rat(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function Hat(t,e,n){return t.a.parent===e.parent?t.a:n}function zat(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function Kat(){var t=Uat,e=1,n=1,r=null;function i(i){var u=function(t){for(var e,n,r,i,o,a=new zat(t,0),s=[a];e=s.pop();)if(r=e._.children)for(e.children=new Array(o=r.length),i=o-1;i>=0;--i)s.push(n=e.children[i]=new zat(r[i],i)),n.parent=e;return(a.parent=new zat(null,0)).children=[a],a}(i);if(u.eachAfter(o),u.parent.m=-u.z,u.eachBefore(a),r)i.eachBefore(s);else{var c=i,l=i,A=i;i.eachBefore(function(t){t.x<c.x&&(c=t),t.x>l.x&&(l=t),t.depth>A.depth&&(A=t)});var f=c===l?1:t(c,l)/2,d=f-c.x,h=e/(l.x+f+d),p=n/(A.depth||1);i.eachBefore(function(t){t.x=(t.x+d)*h,t.y=t.depth*p})}return i}function o(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n){!function(t){for(var e,n=0,r=0,i=t.children,o=i.length;--o>=0;)(e=i[o]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(e);var o=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-o):e.z=o}else i&&(e.z=i.z+t(e._,i._));e.parent.A=function(e,n,r){if(n){for(var i,o=e,a=e,s=n,u=o.parent.children[0],c=o.m,l=a.m,A=s.m,f=u.m;s=Dat(s),o=jat(o),s&&o;)u=jat(u),(a=Dat(a)).a=e,(i=s.z+A-o.z-c+t(s._,o._))>0&&(Rat(Hat(s,e,r),e,i),c+=i,l+=i),A+=s.m,c+=o.m,f+=u.m,l+=a.m;s&&!Dat(a)&&(a.t=s,a.m+=A-l),o&&!jat(u)&&(u.t=o,u.m+=c-f,r=e)}return r}(e,i,e.parent.A||r[0])}function a(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function s(t){t.x*=e,t.y=t.depth*n}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i}function Gat(t,e){return t.parent===e.parent?1:2}function Vat(t,e){return t+e.x}function Wat(t,e){return Math.max(t,e.y)}function Yat(){var t=Gat,e=1,n=1,r=!1;function i(i){var o,a=0;i.eachAfter(function(e){var n=e.children;n?(e.x=function(t){return t.reduce(Vat,0)/t.length}(n),e.y=function(t){return 1+t.reduce(Wat,0)}(n)):(e.x=o?a+=t(e,o):0,e.y=0,o=e)});var s=function(t){for(var e;e=t.children;)t=e[0];return t}(i),u=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(i),c=s.x-t(s,u)/2,l=u.x+t(u,s)/2;return i.eachAfter(r?function(t){t.x=(t.x-i.x)*e,t.y=(i.y-t.y)*n}:function(t){t.x=(t.x-c)/(l-c)*e,t.y=(1-(i.y?t.y/i.y:1))*n})}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i}Qat.props={},zat.prototype=Object.create(J9.prototype);var Xat=function(t){return function(e){return function(n){var r=e.field,i=void 0===r?"value":r,o=e.nodeSize,a=e.separation,s=e.sortBy,u=e.as,c=v(void 0===u?["x","y"]:u,2),l=c[0],A=c[1],f=W9(n,function(t){return t.children}).sum(function(t){return t[i]}).sort(s),d=t();d.size([1,1]),o&&d.nodeSize(o),a&&d.separation(a),d(f);var h=[];f.each(function(t){t[l]=t.x,t[A]=t.y,t.name=t.data.name,h.push(t)});var p=f.links();return p.forEach(function(t){t[l]=[t.source[l],t.target[l]],t[A]=[t.source[A],t.target[A]]}),{nodes:h,edges:p}}}},qat=function(t){return Xat(Yat)(t)};qat.props={};var Zat=function(t){return Xat(Kat)(t)};Zat.props={};var Jat={sortBy:function(t,e){return e.value-t.value}},$at={axis:!1,legend:!1,type:"point",encode:{x:"x",y:"y",size:2,shape:"point"}},tst={type:"link",encode:{x:"x",y:"y",shape:"smooth"}},est={text:"",fontSize:10},nst=function(t){var e=t.data,n=t.encode,r=void 0===n?{}:n,i=t.scale,o=void 0===i?{}:i,a=t.style,s=void 0===a?{}:a,u=t.layout,c=void 0===u?{}:u,l=t.nodeLabels,A=void 0===l?[]:l,f=t.linkLabels,d=void 0===f?[]:f,h=t.animate,p=void 0===h?{}:h,v=t.tooltip,g=void 0===v?{}:v,y=null==r?void 0:r.value,m=Zat(Object.assign(Object.assign(Object.assign({},Jat),c),{field:y}))(e),b=m.nodes,w=m.edges,x=g2(g,"node",{title:"name",items:["value"]},!0),E=g2(g,"link",{title:"",items:[function(t){return{name:"source",value:t.source.name}},function(t){return{name:"target",value:t.target.name}}]});return[Xm({},tst,{data:w,encode:hG(r,"link"),scale:hG(o,"link"),labels:d,style:Object.assign({stroke:"#999"},hG(s,"link")),tooltip:E,animate:b2(p,"link")}),Xm({},$at,{data:b,scale:hG(o,"node"),encode:hG(r,"node"),labels:[Object.assign(Object.assign({},est),hG(s,"label"))].concat(O(A)),style:Object.assign({},hG(s,"node")),tooltip:x,animate:b2(p,"node")})]};nst.props={};var rst=4294967296;function ist(t,e){var n,r;if(sst(e,t))return[e];for(n=0;n<t.length;++n)if(ost(e,t[n])&&sst(cst(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(ost(cst(t[n],t[r]),e)&&ost(cst(t[n],e),t[r])&&ost(cst(t[r],e),t[n])&&sst(lst(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function ost(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function ast(t,e){var n=t.r-e.r+1e-9*Math.max(t.r,e.r,1),r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function sst(t,e){for(var n=0;n<e.length;++n)if(!ast(t,e[n]))return!1;return!0}function ust(t){switch(t.length){case 1:return{x:(e=t[0]).x,y:e.y,r:e.r};case 2:return cst(t[0],t[1]);case 3:return lst(t[0],t[1],t[2])}var e}function cst(t,e){var n=t.x,r=t.y,i=t.r,o=e.x,a=e.y,s=e.r,u=o-n,c=a-r,l=s-i,A=Math.sqrt(u*u+c*c);return{x:(n+o+u/A*l)/2,y:(r+a+c/A*l)/2,r:(A+i+s)/2}}function lst(t,e,n){var r=t.x,i=t.y,o=t.r,a=e.x,s=e.y,u=e.r,c=n.x,l=n.y,A=n.r,f=r-a,d=r-c,h=i-s,p=i-l,v=u-o,g=A-o,y=r*r+i*i-o*o,m=y-a*a-s*s+u*u,b=y-c*c-l*l+A*A,w=d*h-f*p,x=(h*b-p*m)/(2*w)-r,E=(p*v-h*g)/w,B=(d*m-f*b)/(2*w)-i,k=(f*g-d*v)/w,O=E*E+k*k-1,C=2*(o+x*E+B*k),M=x*x+B*B-o*o,S=-(Math.abs(O)>1e-6?(C+Math.sqrt(C*C-4*O*M))/(2*O):M/C);return{x:r+x+E*S,y:i+B+k*S,r:S}}function Ast(t,e,n){var r,i,o,a,s=t.x-e.x,u=t.y-e.y,c=s*s+u*u;c?(i=e.r+n.r,i*=i,a=t.r+n.r,i>(a*=a)?(r=(c+a-i)/(2*c),o=Math.sqrt(Math.max(0,a/c-r*r)),n.x=t.x-r*s-o*u,n.y=t.y-r*u+o*s):(r=(c+i-a)/(2*c),o=Math.sqrt(Math.max(0,i/c-r*r)),n.x=e.x+r*s-o*u,n.y=e.y+r*u+o*s)):(n.x=e.x+n.r,n.y=e.y)}function fst(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function dst(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,o=(e.y*n.r+n.y*e.r)/r;return i*i+o*o}function hst(t){this._=t,this.next=null,this.previous=null}function pst(t,e){if(!(a=(n=t,t="object"==typeof n&&"length"in n?n:Array.from(n)).length))return 0;var n,r,i,o,a,s,u,c,l,A,f,d;if((r=t[0]).x=0,r.y=0,!(a>1))return r.r;if(i=t[1],r.x=-i.r,i.x=r.r,i.y=0,!(a>2))return r.r+i.r;Ast(i,r,o=t[2]),r=new hst(r),i=new hst(i),o=new hst(o),r.next=o.previous=i,i.next=r.previous=o,o.next=i.previous=r;t:for(c=3;c<a;++c){Ast(r._,i._,o=t[c]),o=new hst(o),l=i.next,A=r.previous,f=i._.r,d=r._.r;do{if(f<=d){if(fst(l._,o._)){i=l,r.next=i,i.previous=r,--c;continue t}f+=l._.r,l=l.next}else{if(fst(A._,o._)){(r=A).next=i,i.previous=r,--c;continue t}d+=A._.r,A=A.previous}}while(l!==A.next);for(o.previous=r,o.next=i,r.next=i.previous=i=o,s=dst(r);(o=o.next)!==i;)(u=dst(o))<s&&(r=o,s=u);i=r.next}for(r=[i._],o=i;(o=o.next)!==i;)r.push(o._);for(o=function(t,e){for(var n,r,i=0,o=(t=function(t,e){for(var n,r,i=t.length;i;)r=e()*i--|0,n=t[i],t[i]=t[r],t[r]=n;return t}(Array.from(t),e)).length,a=[];i<o;)n=t[i],r&&ast(r,n)?++i:(r=ust(a=ist(a,n)),i=0);return r}(r,e),c=0;c<a;++c)(r=t[c]).x-=o.x,r.y-=o.y;return o.r}function vst(t){return Math.sqrt(t.value)}function gst(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function yst(t,e,n){return function(r){if(i=r.children){var i,o,a,s=i.length,u=t(r)*e||0;if(u)for(o=0;o<s;++o)i[o].r+=u;if(a=pst(i,n),u)for(o=0;o<s;++o)i[o].r-=u;r.r=a+u}}}function mst(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}var bst={text:"",position:"inside",textOverflow:"clip",wordWrap:!0,maxLines:1,wordWrapWidth:function(t){return 2*t.r}},wst={title:function(t){return t.data.name},items:[{field:"value"}]},xst=function(t,e){var n=e.width,r=e.height,i=t.data,o=t.encode,a=void 0===o?{}:o,s=t.scale,u=void 0===s?{}:s,c=t.style,l=void 0===c?{}:c,A=t.layout,f=void 0===A?{}:A,d=t.labels,h=void 0===d?[]:d,p=t.tooltip,v=void 0===p?{}:p,g=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["data","encode","scale","style","layout","labels","tooltip"]),y=function(t,e,n){return{type:"point",axis:!1,legend:!1,scale:{x:{domain:[0,t]},y:{domain:[0,e]},size:{type:"identity"}},encode:{x:"x",y:"y",size:"r",shape:"point"},style:{fill:n.color?void 0:function(t){return 0===t.height?"#ddd":"#fff"},stroke:n.color?void 0:function(t){return 0===t.height?"":"#000"}}}}(n,r,a),m=function(t,e,n){var r=n.value,i=tn(t)?i7().path(e.path)(t):W9(t);return r?i.sum(function(t){return KV(r)(t)}).sort(e.sort):i.count(),function(){var t=null,e=1,n=1,r=v7;function i(i){var o=function(){var t=1;return function(){return(t=(1664525*t+1013904223)%rst)/rst}}();return i.x=e/2,i.y=n/2,t?i.eachBefore(gst(t)).eachAfter(yst(r,.5,o)).eachBefore(mst(1)):i.eachBefore(gst(vst)).eachAfter(yst(v7,1,o)).eachAfter(yst(r,i.r/Math.min(e,n),o)).eachBefore(mst(Math.min(e,n)/(2*i.r))),i}return i.radius=function(e){return arguments.length?(t=H9(e),i):t},i.size=function(t){return arguments.length?(e=+t[0],n=+t[1],i):[e,n]},i.padding=function(t){return arguments.length?(r="function"==typeof t?t:g7(+t),i):r},i}().size(e.size).padding(e.padding)(i),i.descendants()}(i,Xm({},function(t,e){return{size:[t,e],padding:0,sort:function(t,e){return e.value-t.value}}}(n,r),f),Xm({},y.encode,a)),b=hG(l,"label");return Xm({},y,Object.assign(Object.assign({data:m,encode:a,scale:u,style:l,labels:[Object.assign(Object.assign({},bst),b)].concat(O(h))},g),{tooltip:y2(v,wst),axis:!1}))};function Est(t){return t.target.depth}function Bst(t,e){return t.sourceLinks.length?t.depth:e-1}function kst(t){return function(){return t}}function Ost(t,e){return Mst(t.source,e.source)||t.index-e.index}function Cst(t,e){return Mst(t.target,e.target)||t.index-e.index}function Mst(t,e){return t.y0-e.y0}function Sst(t){return t.value}function Fst(t){return t.index}function Tst(t){return t.nodes}function Pst(t){return t.links}function Ist(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function Nst(t){var e,n=qn(t.nodes);try{for(n.s();!(e=n.n()).done;){var r,i=e.value,o=i.y0,a=o,s=qn(i.sourceLinks);try{for(s.s();!(r=s.n()).done;){var u=r.value;u.y0=o+u.width/2,o+=u.width}}catch(t){s.e(t)}finally{s.f()}var c,l=qn(i.targetLinks);try{for(l.s();!(c=l.n()).done;){var A=c.value;A.y1=a+A.width/2,a+=A.width}}catch(t){l.e(t)}finally{l.f()}}}catch(t){n.e(t)}finally{n.f()}}xst.props={};var Lst={nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodes:function(t){return t.nodes},links:function(t){return t.links},nodeSort:void 0,linkSort:void 0,iterations:6},_st={left:function(t){return t.depth},right:function(t,e){return e-1-t.height},center:function(t){return t.targetLinks.length?t.depth:t.sourceLinks.length?Eq(t.sourceLinks,Est)-1:0},justify:Bst},Qst=function(t){return function(e){var n=Object.assign({},Lst,t),r=n.nodeId,i=n.nodeSort,o=n.nodeAlign,a=n.nodeWidth,s=n.nodePadding,u=n.nodeDepth,c=n.nodes,l=n.links,A=n.linkSort,f=n.iterations,d=function(){var t,e,n,r,i=0,o=0,a=1,s=1,u=24,c=8,l=Fst,A=Bst,f=Tst,d=Pst,h=6;function p(p){var y={nodes:f(p),links:d(p)};return function(t){var e=t.nodes,n=t.links;e.forEach(function(t,e){t.index=e,t.sourceLinks=[],t.targetLinks=[]});var i=new Map(e.map(function(t){return[l(t),t]}));if(n.forEach(function(t,e){t.index=e;var n=t.source,r=t.target;"object"!=typeof n&&(n=t.source=Ist(i,n)),"object"!=typeof r&&(r=t.target=Ist(i,r)),n.sourceLinks.push(t),r.targetLinks.push(t)}),null!=r){var o,a=qn(e);try{for(a.s();!(o=a.n()).done;){var s=o.value,u=s.sourceLinks,c=s.targetLinks;u.sort(r),c.sort(r)}}catch(t){a.e(t)}finally{a.f()}}}(y),function(t){var e,n=qn(t.nodes);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.value=void 0===r.fixedValue?Math.max($tt(r.sourceLinks,Sst),$tt(r.targetLinks,Sst)):r.fixedValue}}catch(t){n.e(t)}finally{n.f()}}(y),function(t){for(var n=t.nodes,r=n.length,i=new Set(n),o=new Set,a=0;i.size;){if(i.forEach(function(t){t.depth=a;var e,n=qn(t.sourceLinks);try{for(n.s();!(e=n.n()).done;){var r=e.value.target;o.add(r)}}catch(t){n.e(t)}finally{n.f()}}),++a>r)throw new Error("circular link");i=o,o=new Set}if(e)for(var s,u=Math.max(Bq(n,function(t){return t.depth})+1,0),c=0;c<n.length;c++)(s=n[c]).depth=e.call(null,s,u)}(y),function(t){for(var e=t.nodes,n=e.length,r=new Set(e),i=new Set,o=0;r.size;){if(r.forEach(function(t){t.height=o;var e,n=qn(t.targetLinks);try{for(n.s();!(e=n.n()).done;){var r=e.value.source;i.add(r)}}catch(t){n.e(t)}finally{n.f()}}),++o>n)throw new Error("circular link");r=i,i=new Set}}(y),function(e){var r=function(t){var e,r=t.nodes,o=Math.max(Bq(r,function(t){return t.depth})+1,0),s=(a-i-u)/(o-1),c=new Array(o).fill(0).map(function(){return[]}),l=qn(r);try{for(l.s();!(e=l.n()).done;){var f=e.value,d=Math.max(0,Math.min(o-1,Math.floor(A.call(null,f,o))));f.layer=d,f.x0=i+d*s,f.x1=f.x0+u,c[d]?c[d].push(f):c[d]=[f]}}catch(t){l.e(t)}finally{l.f()}if(n){var h,p=qn(c);try{for(p.s();!(h=p.n()).done;)h.value.sort(n)}catch(t){p.e(t)}finally{p.f()}}return c}(e);t=Math.min(c,(s-o)/(Bq(r,function(t){return t.length})-1)),function(e){var n,r=Eq(e,function(e){return(s-o-(e.length-1)*t)/$tt(e,Sst)}),i=qn(e);try{for(i.s();!(n=i.n()).done;){var a,u=n.value,c=o,l=qn(u);try{for(l.s();!(a=l.n()).done;){var A=a.value;A.y0=c,A.y1=c+A.value*r,c=A.y1+t;var f,d=qn(A.sourceLinks);try{for(d.s();!(f=d.n()).done;){var h=f.value;h.width=h.value*r}}catch(t){d.e(t)}finally{d.f()}}}catch(t){l.e(t)}finally{l.f()}c=(s-c+t)/(u.length+1);for(var p=0;p<u.length;++p){var v=u[p];v.y0+=c*(p+1),v.y1+=c*(p+1)}x(u)}}catch(t){i.e(t)}finally{i.f()}}(r);for(var l=0;l<h;++l){var f=Math.pow(.99,l),d=Math.max(1-f,(l+1)/h);g(r,f,d),v(r,f,d)}}(y),Nst(y),y}function v(t,e,r){for(var i=1,o=t.length;i<o;++i){var a,s=t[i],u=qn(s);try{for(u.s();!(a=u.n()).done;){var c,l=a.value,A=0,f=0,d=qn(l.targetLinks);try{for(d.s();!(c=d.n()).done;){var h=c.value,p=h.source,v=h.value*(l.layer-p.layer);A+=E(p,l)*v,f+=v}}catch(t){d.e(t)}finally{d.f()}if(f>0){var g=(A/f-l.y0)*e;l.y0+=g,l.y1+=g,w(l)}}}catch(t){u.e(t)}finally{u.f()}void 0===n&&s.sort(Mst),s.length&&y(s,r)}}function g(t,e,r){for(var i=t.length-2;i>=0;--i){var o,a=t[i],s=qn(a);try{for(s.s();!(o=s.n()).done;){var u,c=o.value,l=0,A=0,f=qn(c.sourceLinks);try{for(f.s();!(u=f.n()).done;){var d=u.value,h=d.target,p=d.value*(h.layer-c.layer);l+=B(c,h)*p,A+=p}}catch(t){f.e(t)}finally{f.f()}if(A>0){var v=(l/A-c.y0)*e;c.y0+=v,c.y1+=v,w(c)}}}catch(t){s.e(t)}finally{s.f()}void 0===n&&a.sort(Mst),a.length&&y(a,r)}}function y(e,n){var r=e.length>>1,i=e[r];b(e,i.y0-t,r-1,n),m(e,i.y1+t,r+1,n),b(e,s,e.length-1,n),m(e,o,0,n)}function m(e,n,r,i){for(;r<e.length;++r){var o=e[r],a=(n-o.y0)*i;a>1e-6&&(o.y0+=a,o.y1+=a),n=o.y1+t}}function b(e,n,r,i){for(;r>=0;--r){var o=e[r],a=(o.y1-n)*i;a>1e-6&&(o.y0-=a,o.y1-=a),n=o.y0-t}}function w(t){var e=t.sourceLinks,n=t.targetLinks;if(void 0===r){var i,o=qn(n);try{for(o.s();!(i=o.n()).done;)i.value.source.sourceLinks.sort(Cst)}catch(t){o.e(t)}finally{o.f()}var a,s=qn(e);try{for(s.s();!(a=s.n()).done;)a.value.target.targetLinks.sort(Ost)}catch(t){s.e(t)}finally{s.f()}}}function x(t){if(void 0===r){var e,n=qn(t);try{for(n.s();!(e=n.n()).done;){var i=e.value,o=i.sourceLinks,a=i.targetLinks;o.sort(Cst),a.sort(Ost)}}catch(t){n.e(t)}finally{n.f()}}}function E(e,n){var r,i=e.y0-(e.sourceLinks.length-1)*t/2,o=qn(e.sourceLinks);try{for(o.s();!(r=o.n()).done;){var a=r.value,s=a.target,u=a.width;if(s===n)break;i+=u+t}}catch(t){o.e(t)}finally{o.f()}var c,l=qn(n.targetLinks);try{for(l.s();!(c=l.n()).done;){var A=c.value,f=A.source,d=A.width;if(f===e)break;i-=d}}catch(t){l.e(t)}finally{l.f()}return i}function B(e,n){var r,i=n.y0-(n.targetLinks.length-1)*t/2,o=qn(n.targetLinks);try{for(o.s();!(r=o.n()).done;){var a=r.value,s=a.source,u=a.width;if(s===e)break;i+=u+t}}catch(t){o.e(t)}finally{o.f()}var c,l=qn(e.sourceLinks);try{for(l.s();!(c=l.n()).done;){var A=c.value,f=A.target,d=A.width;if(f===n)break;i-=d}}catch(t){l.e(t)}finally{l.f()}return i}return p.update=function(t){return Nst(t),t},p.nodeId=function(t){return arguments.length?(l="function"==typeof t?t:kst(t),p):l},p.nodeAlign=function(t){return arguments.length?(A="function"==typeof t?t:kst(t),p):A},p.nodeDepth=function(t){return arguments.length?(e=t,p):e},p.nodeSort=function(t){return arguments.length?(n=t,p):n},p.nodeWidth=function(t){return arguments.length?(u=+t,p):u},p.nodePadding=function(e){return arguments.length?(c=t=+e,p):c},p.nodes=function(t){return arguments.length?(f="function"==typeof t?t:kst(t),p):f},p.links=function(t){return arguments.length?(d="function"==typeof t?t:kst(t),p):d},p.linkSort=function(t){return arguments.length?(r=t,p):r},p.size=function(t){return arguments.length?(i=o=0,a=+t[0],s=+t[1],p):[a-i,s-o]},p.extent=function(t){return arguments.length?(i=+t[0][0],a=+t[1][0],o=+t[0][1],s=+t[1][1],p):[[i,o],[a,s]]},p.iterations=function(t){return arguments.length?(h=+t,p):h},p}().nodeSort(i).linkSort(A).links(l).nodes(c).nodeWidth(a).nodePadding(s).nodeDepth(u).nodeAlign(function(t){var e=typeof t;return"string"===e?_st[t]||Bst:"function"===e?t:Bst}(o)).iterations(f).extent([[0,0],[1,1]]);"function"==typeof r&&d.nodeId(r);var h=d(e),p=h.nodes,v=h.links,g=p.map(function(t){var e=t.x0,n=t.x1,r=t.y0,i=t.y1;return Object.assign(Object.assign({},t),{x:[e,n,n,e],y:[r,r,i,i]})}),y=v.map(function(t){var e=t.source,n=t.target,r=e.x1,i=n.x0,o=t.width/2;return Object.assign(Object.assign({},t),{x:[r,r,i,i],y:[t.y0+o,t.y0-o,t.y1+o,t.y1-o]})});return{nodes:g,links:y}}};Qst.props={};var Ust={nodeId:function(t){return t.key},nodeWidth:.02,nodePadding:.02},jst={type:"polygon",axis:!1,legend:!1,encode:{shape:"polygon",x:"x",y:"y"},scale:{x:{type:"identity"},y:{type:"identity"}},style:{stroke:"#000"}},Dst={type:"polygon",axis:!1,legend:!1,encode:{shape:"ribbon",x:"x",y:"y"},style:{fillOpacity:.5,stroke:void 0}},Rst={textAlign:function(t){return t.x[0]<.5?"start":"end"},position:function(t){return t.x[0]<.5?"right":"left"},fontSize:10},Hst=function(t){var e=t.data,n=t.encode,r=void 0===n?{}:n,i=t.scale,o=t.style,a=void 0===o?{}:o,s=t.layout,u=void 0===s?{}:s,c=t.nodeLabels,l=void 0===c?[]:c,A=t.linkLabels,f=void 0===A?[]:A,d=t.animate,h=void 0===d?{}:d,p=t.tooltip,g=void 0===p?{}:p,y=t.interaction,m=t.state,b=void 0===m?{}:m,w=t.viewStyle,x=void 0===w?{}:w,E=VV(e,r),B=E.links,k=E.nodes;if(!B||0===B.length)return[Xm({},jst,{data:[],encode:{},scale:i,style:hG(a,"node"),viewStyle:x,labels:[],tooltip:!1,animate:!1,axis:!1,interaction:y,state:{}}),Xm({},Dst,{data:[],encode:{},labels:[],style:hG(a,"link"),tooltip:!1,animate:!1,interaction:y,state:{}})];var C=hG(r,"node"),M=hG(r,"link"),S=C.key,F=void 0===S?function(t){return t.key}:S,T=C.color,P=void 0===T?F:T,I=Qst(Object.assign(Object.assign(Object.assign({},Ust),{nodeId:KV(F)}),u))({links:B,nodes:k}),N=I.links,L=I.nodes,_=hG(a,"label"),Q=_.text,U=void 0===Q?F:Q,j=_.spacing,D=void 0===j?5:j,R=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(_,["text","spacing"]),H=KV(F),z=g2(g,"node",{title:H,items:[{field:"value"}]},!0),K=g2(g,"link",{title:"",items:[function(t){return{name:"source",value:H(t.source)}},function(t){return{name:"target",value:H(t.target)}}]}),G=Object.entries(b).reduce(function(t,e){var n=v(e,2),r=n[0],i=n[1],o=vG(i,"node","link"),a=hG(i,"node");t[0][r]=Object.assign(Object.assign({},o),a);var s=hG(i,"link");return t[1][r]=Object.assign(Object.assign({},o),s),t},[{},{}]),V=v(G,2),W=V[0],Y=V[1];return[Xm({},jst,{data:L,encode:Object.assign(Object.assign({},C),{color:P}),scale:i,style:hG(a,"node"),viewStyle:x,labels:[Object.assign(Object.assign(Object.assign({},Rst),{text:U,dx:function(t){return t.x[0]<.5?D:-D}}),R)].concat(O(l)),tooltip:z,animate:b2(h,"node"),axis:!1,interaction:y,state:W}),Xm({},Dst,{data:N,encode:M,labels:f,style:Object.assign({fill:M.color?void 0:"#aaa",lineWidth:0},hG(a,"link")),tooltip:K,animate:b2(h,"link"),interaction:y,state:Y})]};function zst(t,e){return e.value-t.value}function Kst(t,e){return e.frequency-t.frequency}function Gst(t,e){return"".concat(t.id).localeCompare("".concat(e.id))}function Vst(t,e){return"".concat(t.name).localeCompare("".concat(e.name))}Hst.props={};var Wst={y:0,thickness:.05,weight:!1,marginRatio:.1,id:function(t){return t.id},source:function(t){return t.source},target:function(t){return t.target},sourceWeight:function(t){return t.value||1},targetWeight:function(t){return t.value||1},sortBy:null};var Yst=function(t){return function(e){return function(t){var e=Object.assign(Object.assign({},Wst),t),n=e.y,r=e.thickness,i=e.weight,o=e.marginRatio,a=e.id,s=e.source,c=e.target,l=e.sourceWeight,A=e.targetWeight,f=e.sortBy;return function(t){var e=t.nodes.map(function(t){return Object.assign({},t)}),d=t.edges.map(function(t){return Object.assign({},t)});return function(t,e){e.forEach(function(t){t.source=s(t),t.target=c(t),t.sourceWeight=l(t),t.targetWeight=A(t)});var n=TK(e,function(t){return t.source}),r=TK(e,function(t){return t.target});t.forEach(function(t){t.id=a(t);var e=n.has(t.id)?n.get(t.id):[],i=r.has(t.id)?r.get(t.id):[];t.frequency=e.length+i.length,t.value=$tt(e,function(t){return t.sourceWeight})+$tt(i,function(t){return t.targetWeight})})}(e,d),function(t){var e="function"==typeof f?f:u[f];e&&t.sort(e)}(e),function(t,e){var a=t.length;if(!a)throw AG("Invalid nodes: it's empty!");if(!i){var s=1/a;return t.forEach(function(t,e){t.x=(e+.5)*s,t.y=n}),{nodes:t,edges:e}}var u=o/(2*a),c=t.reduce(function(t,e){return t+e.value},0);t.reduce(function(t,e){e.weight=e.value/c,e.width=e.weight*(1-o),e.height=r;var i=u+t,a=i+e.width,s=n-r/2,l=s+r;return e.x=[i,a,a,i],e.y=[s,s,l,l],t+e.width+2*u},0)}(e,d),function(t,e){var r=new Map(t.map(function(t){return[t.id,t]}));if(!i)return e.forEach(function(t){var e=s(t),n=c(t),i=r.get(e),o=r.get(n);i&&o&&(t.x=[i.x,o.x],t.y=[i.y,o.y])}),{nodes:t,edges:e};e.forEach(function(t){t.x=[0,0,0,0],t.y=[n,n,n,n]});var o=TK(e,function(t){return t.source}),a=TK(e,function(t){return t.target});t.forEach(function(t){t.edges;var e=t.width,n=t.x,r=(t.y,t.value),i=t.id,s=o.get(i)||[],u=a.get(i)||[],c=0;s.map(function(t){var i=t.sourceWeight/r*e;t.x[0]=n[0]+c,t.x[1]=n[0]+c+i,c+=i}),u.forEach(function(t){var i=t.targetWeight/r*e;t.x[3]=n[0]+c,t.x[2]=n[0]+c+i,c+=i})})}(e,d),{nodes:e,edges:d}}}(t)(e)}};Yst.props={};var Xst=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},qst={y:0,thickness:.05,marginRatio:.1,id:function(t){return t.key},source:function(t){return t.source},target:function(t){return t.target},sourceWeight:function(t){return t.value||1},targetWeight:function(t){return t.value||1},sortBy:null},Zst={type:"polygon",axis:!1,legend:!1,encode:{shape:"polygon",x:"x",y:"y"},scale:{x:{type:"identity"},y:{type:"identity"}},style:{opacity:1,fillOpacity:1,lineWidth:1}},Jst={type:"polygon",axis:!1,legend:!1,encode:{shape:"ribbon",x:"x",y:"y"},style:{opacity:.5,lineWidth:1}},$st={position:"outside",fontSize:10},tut=function(t,e){var n=t.data,r=t.encode,i=void 0===r?{}:r,o=t.scale,a=t.style,s=void 0===a?{}:a,u=t.layout,c=void 0===u?{}:u,l=t.nodeLabels,A=void 0===l?[]:l,f=t.linkLabels,d=void 0===f?[]:f,h=t.animate,p=void 0===h?{}:h,v=t.tooltip,g=void 0===v?{}:v,y=VV(n,i),m=y.nodes,b=y.links,w=hG(i,"node"),x=hG(i,"link"),E=w.key,B=void 0===E?function(t){return t.key}:E,k=w.color,C=void 0===k?B:k,M=x.linkEncodeColor,S=void 0===M?function(t){return t.source}:M,F=c.nodeWidthRatio,T=void 0===F?qst.thickness:F,P=c.nodePaddingRatio,I=void 0===P?qst.marginRatio:P,N=Xst(c,["nodeWidthRatio","nodePaddingRatio"]),L=Yst(Object.assign(Object.assign(Object.assign(Object.assign({},qst),{id:KV(B),thickness:T,marginRatio:I}),N),{weight:!0}))({nodes:m,edges:b}),_=L.nodes,Q=L.edges,U=hG(s,"label"),j=U.text,D=void 0===j?B:j,R=Xst(U,["text"]),H=g2(g,"node",{title:"",items:[function(t){return{name:t.key,value:t.value}}]},!0),z=g2(g,"link",{title:"",items:[function(t){return{name:"".concat(t.source," -> ").concat(t.target),value:t.value}}]}),K=e.height,G=e.width,V=Math.min(K,G);return[Xm({},Jst,{data:Q,encode:Object.assign(Object.assign({},x),{color:S}),labels:d,style:Object.assign({fill:S?void 0:"#aaa"},hG(s,"link")),tooltip:z,animate:b2(p,"link")}),Xm({},Zst,{data:_,encode:Object.assign(Object.assign({},w),{color:C}),scale:o,style:hG(s,"node"),coordinate:{type:"polar",outerRadius:(V-20)/V,startAngle:2*-Math.PI,endAngle:0},labels:[Object.assign(Object.assign(Object.assign({},$st),{text:D}),R)].concat(O(A)),tooltip:H,animate:b2(p,"node"),axis:!1})]};tut.props={};var eut={fontSize:10,text:function(t){return IG(t.path)},position:"inside",fill:"#000",textOverflow:"clip",wordWrap:!0,maxLines:1,wordWrapWidth:function(t){return t.x1-t.x0},isTreemapLabel:!0},nut={title:function(t){var e,n;return null===(n=null===(e=t.path)||void 0===e?void 0:e.join)||void 0===n?void 0:n.call(e,".")},items:[{field:"value"}]},rut={title:function(t){return IG(t.path)},items:[{field:"value"}]},iut=function(t,e){var n=e.width,r=e.height,i=e.options,o=t.data,a=t.encode,s=void 0===a?{}:a,u=t.scale,c=t.style,l=void 0===c?{}:c,A=t.layout,f=void 0===A?{}:A,d=t.labels,h=void 0===d?[]:d,p=t.tooltip,g=void 0===p?{}:p,y=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["data","encode","scale","style","layout","labels","tooltip"]),m=Gb(i,["interaction","treemapDrillDown"])||Gb(i,["marks",0,"interaction","treemapDrillDown"]),b=Xm({},function(t,e){return{tile:"treemapSquarify",ratio:.5*(1+Math.sqrt(5)),size:[t,e],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,sort:function(t,e){return e.value-t.value},layer:0}}(n,r),f,{layer:m?function(t){return 1===t.depth}:f.layer}),w=v(b7(o,b,s),2),x=w[0],E=w[1],B=hG(l,"label");return Xm({},function(t,e){return{type:"rect",axis:!1,encode:{x:"x",y:"y",key:"id",color:function(t){return t.path[1]}},scale:{x:{domain:[0,t],range:[0,1]},y:{domain:[0,e],range:[0,1]}},style:{stroke:"#fff"},state:{active:{opacity:.6},inactive:{opacity:1}}}}(n,r),Object.assign(Object.assign({data:x,scale:u,style:l,labels:[Object.assign(Object.assign(Object.assign({},eut),B),m&&{cursor:"pointer"})].concat(O(h))},y),{encode:s,tooltip:y2(g,nut),axis:!1}),m?{interaction:Object.assign(Object.assign({},y.interaction),{treemapDrillDown:m?Object.assign(Object.assign({},m),{originData:E,layout:b}):void 0}),encode:Object.assign({color:function(t){return IG(t.path)}},s),tooltip:y2(g,rut)}:{})};function out(){return{"data.arc":Yst,"data.cluster":qat,"mark.forceGraph":Qat,"mark.tree":nst,"mark.pack":xst,"mark.sankey":Hst,"mark.chord":tut,"mark.treemap":iut,"mark.partition":T7}}iut.props={};var aut=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function sut(t,e){return Eq(t,function(t){return e[t]})}function uut(t,e){return Bq(t,function(t){return e[t]})}function cut(t,e){var n=2.5*lut(t,e)-1.5*fut(t,e);return Eq(t,function(t){return e[t]>=n?e[t]:NaN})}function lut(t,e){return qtt(t,.25,function(t){return e[t]})}function Aut(t,e){return qtt(t,.5,function(t){return e[t]})}function fut(t,e){return qtt(t,.75,function(t){return e[t]})}function dut(t,e){var n=2.5*fut(t,e)-1.5*lut(t,e);return Bq(t,function(t){return e[t]<=n?e[t]:NaN})}function hut(){return function(t,e){var n=e.encode,r=n.y,i=n.x,o=r.value,a=i.value,s=Array.from(TK(t,function(t){return a[+t]}).values()).flatMap(function(t){var e=cut(t,o),n=dut(t,o);return t.filter(function(t){return o[t]<e||o[t]>n})});return[s,e]}}var put=function(t){var e=t.data,n=t.encode,r=t.style,i=void 0===r?{}:r,o=t.tooltip,a=void 0===o?{}:o,s=(t.transform,t.animate),u=aut(t,["data","encode","style","tooltip","transform","animate"]),c=i.point,l=void 0===c||c,A=aut(i,["point"]),f=n.y,d={y:f,y1:f,y2:f,y3:f,y4:f},h={y1:lut,y2:Aut,y3:fut},p=g2(a,"box",{items:[{channel:"y",name:"min"},{channel:"y1",name:"q1"},{channel:"y2",name:"q2"},{channel:"y3",name:"q3"},{channel:"y4",name:"max"}]},!0),v=g2(a,"point",{title:{channel:"x"},items:[{name:"outlier",channel:"y"}]});if(!l)return Object.assign({type:"box",data:e,transform:[Object.assign(Object.assign({type:"groupX",y:sut},h),{y4:uut})],encode:Object.assign(Object.assign({},n),d),style:A,tooltip:p},u);var g=hG(A,"box"),y=hG(A,"point");return[Object.assign({type:"box",data:e,transform:[Object.assign(Object.assign({type:"groupX",y:cut},h),{y4:dut})],encode:Object.assign(Object.assign({},n),d),style:g,tooltip:p,animate:b2(s,"box")},u),{type:"point",data:e,transform:[{type:hut}],encode:n,style:Object.assign({},y),tooltip:v,animate:b2(s,"point")}]};put.props={};var vut=function(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))/2},gut=function(t,e){if(e){var n=e.coordinate;if(null==n?void 0:n.getCenter){var r=n.getCenter();return function(n,i,o){var a=e.canvas.document,s=i.color,u=i.index,c=a.createElement("g",{}),l=vut(n[0],n[1]),A=2*vut(n[0],r),f=function(t,e,n){var r=Math.atan2(t[1]-n[1],t[0]-n[0]),i=Math.atan2(e[1]-n[1],e[0]-n[0])-r;return i<0&&(i+=2*Math.PI),i}(n[3],n[0],r)>Math.PI,d=a.createElement("path",{style:Object.assign(Object.assign(Object.assign({d:[["M"].concat(O(n[0])),["A",l,l,0,1,0].concat(O(n[1])),["A",A+2*l,A+2*l,0,f?1:0,0].concat(O(n[2])),["A",l,l,0,1,0===u?0:1].concat(O(n[3])),["A",A,A,0,f?1:0,1].concat(O(n[0])),["Z"]]},o),oS(t,["shape","last","first"])),{fill:s||o.color})});return c.appendChild(d),c}}}},yut=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},mut={coordinate:{type:"radial",innerRadius:.9,outerRadius:1,startAngle:-1.1*Math.PI,endAngle:.1*Math.PI},axis:{x:!1},legend:!1,tooltip:!1,encode:{x:"x",y:"y",color:"color"},scale:{color:{range:["#30BF78","#D0D0D0"]}}},but={style:{shape:function(t,e){t.shape;var n=t.radius,r=yut(t,["shape","radius"]),i=hG(r,"pointer"),o=hG(r,"pin"),a=i.shape,s=yut(i,["shape"]),u=o.shape,c=yut(o,["shape"]),l=e.coordinate,A=e.theme;return function(t,e){var i=t.map(function(t){return l.invert(t)}),o=function(t){var e=t.getOptions().transformations.find(function(t){return"polar"===t[0]});return d(hw(e)).slice(1)}(l),f=v(o,3),h=f[0],p=f[1],g=f[2],y=l.clone(),m=e.color,b=Az({startAngle:h,endAngle:p,innerRadius:g,outerRadius:n});b.push(["cartesian"]),y.update({transformations:b});var w=i.map(function(t){return y.map(t)}),x=v(cV(w),2),E=x[0],B=x[1],k=v(l.getCenter(),2),O=k[0],C=k[1],M=Object.assign(Object.assign({x1:E,y1:B,x2:O,y2:C,stroke:m},s),r),S=Object.assign(Object.assign({cx:O,cy:C,stroke:m},c),r),F=wG(new _u);return mG(a)||("function"==typeof a?F.append(function(){return a(w,e,y,A)}):F.append("line").call(nV,M).node()),mG(u)||("function"==typeof u?F.append(function(){return u(w,e,y,A)}):F.append("circle").call(nV,S).node()),F.node()}},lineWidth:4,pointerLineCap:"round",pinR:10,pinFill:"#fff",radius:.6}},wut={type:"text",style:{x:"50%",y:"60%",textAlign:"center",textBaseline:"middle",fontSize:20,fontWeight:800,fill:"#888"},tooltip:!1};function xut(t,e){var n=e.target,r=e.total,i=t.content;return i?i(n,r):n.toString()}var Eut=function(t){var e=t.data,n=void 0===e?{}:e,r=t.scale,i=void 0===r?{}:r,o=t.style,a=void 0===o?{}:o,s=t.animate,u=void 0===s?{}:s,c=(t.transform,yut(t,["data","scale","style","animate","transform"])),l=function(t,e){var n=function(t){if(de(t)){var e=Math.max(0,Math.min(t,1));return{percent:e,target:e,total:1}}return t}(t),r=n.name,i=void 0===r?"score":r,o=n.target,a=n.total,s=n.percent,u=n.thresholds,c=void 0===u?[]:u,l=s||o,A=s?1:a,f=Object.assign({y:{domain:[0,A]}},e);return c.length?{targetData:[{x:i,y:l,color:"target"}],totalData:c.map(function(t,e){return{x:i,y:e>=1?t-c[e-1]:t,color:e}}),target:l,total:A,scale:f}:{targetData:[{x:i,y:l,color:"target"}],totalData:[{x:i,y:l,color:"target"},{x:i,y:A-l,color:"total"}],target:l,total:A,scale:f}}(n,i),A=l.targetData,f=l.totalData,d=l.target,h=l.total,p=l.scale,g=hG(a,"text"),y=g.tooltip,m=yut(g,["tooltip"]),b=function(t,e){return Object.fromEntries(Object.entries(t).filter(function(t){var n=v(t,1)[0];return e.find(function(t){return n.startsWith(t)})}))}(a,["pointer","pin"]),w=hG(a,"arc"),x=w.shape;return[Xm({},mut,Object.assign({type:"interval",transform:[{type:"stackY"}],data:f,scale:p,style:"round"===x?Object.assign(Object.assign({},w),{shape:gut}):w,animate:"object"==typeof u?hG(u,"arc"):u},c)),Xm({},mut,but,Object.assign({type:"point",data:A,scale:p,style:b,animate:"object"==typeof u?hG(u,"indicator"):u},c)),Xm({},wut,{style:Object.assign({text:xut(m,{target:d,total:h})},m),tooltip:y,animate:"object"==typeof u?hG(u,"text"):u})]};function But(t,e,n){return t+(e-t)*n}function kut(t,e,n,r){return 0===e?[[t+.5*n/Math.PI/2,r/2],[t+.5*n/Math.PI,r],[t+n/4,r]]:1===e?[[t+.5*n/Math.PI/2*(Math.PI-2),r],[t+.5*n/Math.PI/2*(Math.PI-1),r/2],[t+n/4,0]]:2===e?[[t+.5*n/Math.PI/2,-r/2],[t+.5*n/Math.PI,-r],[t+n/4,-r]]:[[t+.5*n/Math.PI/2*(Math.PI-2),-r],[t+.5*n/Math.PI/2*(Math.PI-1),-r/2],[t+n/4,0]]}function Out(t,e,n,r,i,o,a){for(var s=4*Math.ceil(2*t/n*4),u=[],c=r;c<2*-Math.PI;)c+=2*Math.PI;for(;c>0;)c-=2*Math.PI;var l=o-t+(c=c/Math.PI/2*n)-2*t;u.push(["M",l,e]);for(var A=0,f=0;f<s;++f){var d=kut(f*n/4,f%4,n,i);u.push(["C",d[0][0]+l,-d[0][1]+e,d[1][0]+l,-d[1][1]+e,d[2][0]+l,-d[2][1]+e]),f===s-1&&(A=d[2][0])}return u.push(["L",A+l,a+t]),u.push(["L",l,a+t]),u.push(["Z"]),u}Eut.props={};var Cut={pin:function(t,e,n){var r=4*n/3,i=Math.max(r,2*n),o=r/2,a=t,s=o+e-i/2,u=Math.asin(o/(.85*(i-o))),c=Math.sin(u)*o,l=Math.cos(u)*o,A=a-l,f=s+c,d=t,h=s+o/Math.sin(u);return"\n      M ".concat(A," ").concat(f,"\n      A ").concat(o," ").concat(o," 0 1 1 ").concat(A+2*l," ").concat(f,"\n      Q ").concat(d," ").concat(h," ").concat(t," ").concat(e+i/2,"\n      Q ").concat(d," ").concat(h," ").concat(A," ").concat(f,"\n      Z \n    ")},rect:function(t,e,n){var r=.618*n;return"\n      M ".concat(t-r," ").concat(e-n,"\n      L ").concat(t+r," ").concat(e-n,"\n      L ").concat(t+r," ").concat(e+n,"\n      L ").concat(t-r," ").concat(e+n,"\n      Z\n    ")},circle:function(t,e,n){return"\n      M ".concat(t," ").concat(e-n," \n      a ").concat(n," ").concat(n," 0 1 0 0 ").concat(2*n,"\n      a ").concat(n," ").concat(n," 0 1 0 0 ").concat(2*-n,"\n      Z\n    ")},diamond:function(t,e,n){return"\n      M ".concat(t," ").concat(e-n,"\n      L ").concat(t+n," ").concat(e,"\n      L ").concat(t," ").concat(e+n,"\n      L ").concat(t-n," ").concat(e,"\n      Z\n    ")},triangle:function(t,e,n){return"\n      M ".concat(t," ").concat(e-n,"\n      L ").concat(t+n," ").concat(e+n,"\n      L ").concat(t-n," ").concat(e+n,"\n      Z\n    ")}},Mut=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},Sut=function(t,e){if(e){var n=e.coordinate,r=t.liquidOptions,i=t.styleOptions,o=r.liquidShape,a=r.percent,s=i.background,u=i.outline,c=void 0===u?{}:u,l=i.wave,A=void 0===l?{}:l,f=Mut(i,["background","outline","wave"]),d=c.border,h=void 0===d?2:d,p=c.distance,g=void 0===p?0:p,y=Mut(c,["border","distance"]),m=A.length,b=void 0===m?192:m,w=A.count,x=void 0===w?3:w;return function(t,r,i){var u=e.canvas.document,c=i.color,l=i.fillOpacity,A=Object.assign(Object.assign({fill:c},i),f),d=u.createElement("g",{}),p=v(n.getCenter(),2),m=p[0],w=p[1],E=n.getSize(),B=Math.min.apply(Math,O(E))/2,k=mn(o)?o:function(){return Cut[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"circle"]||Cut.circle}(o),C=k.apply(void 0,[m,w,B].concat(O(E))),M=k.apply(void 0,[m,w,B+h/2].concat(O(E)));if(Object.keys(s).length){var S=u.createElement("path",{style:Object.assign({d:C,fill:"#fff"},s)});d.appendChild(S)}if(a>0){var F=u.createElement("path",{style:{d:M}});d.appendChild(F),d.style.clipPath=F,function(t,e,n,r,i,o,a,s,u,c,l){for(var A=i.fill,f=i.fillOpacity,d=i.opacity,h=0;h<r;h++){var p=r<=1?1:h/(r-1),v=Out(s,a+s*n,u,0,s/40,t,e),g=l.createElement("path",{style:{d:v,fill:A,opacity:But(.2,.9,p)*Number(d||f)}});o.appendChild(g);try{0;var y=[{transform:"translate(0, 0)"},{transform:"translate(".concat(2*u,", 0)")}];g.animate(y,{duration:2*But(2500,5e3,p),iterations:1/0})}catch(t){console.warn("off-screen group animate error!")}}}(m,w,1-a,x,A,d,F.getBBox().y,2*B,b,0,u)}var T=u.createElement("path",{style:{d:C,fill:"transparent",lineWidth:h+2*g,stroke:"#fff"}}),P=u.createElement("path",{style:Object.assign(Object.assign(Object.assign({d:C,stroke:c,strokeOpacity:l,lineWidth:h},A),y),{fill:"transparent"})});return d.appendChild(T),d.appendChild(P),d}}};Sut.props={};var Fut={axis:{x:!1,y:!1},legend:!1,tooltip:!1,encode:{x:"type",y:"percent"},scale:{y:{domain:[0,1]}},style:{shape:Sut},animate:{enter:{type:"fadeIn"}}},Tut={type:"text",style:{x:"50%",y:"50%",textAlign:"center",textBaseline:"middle",fontSize:20,fontWeight:800,fill:"#888"},animate:{enter:{type:"fadeIn"}}},Put=function(t){var e=t.data,n=void 0===e?{}:e,r=t.style,i=void 0===r?{}:r,o=t.animate,a=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["data","style","animate"]),s=Math.max(0,de(n)?n:null==n?void 0:n.percent),u=[{percent:s,type:"liquid"}],c=Object.assign(Object.assign({},hG(i,"text")),hG(i,"content")),l=hG(i,"outline"),A=hG(i,"wave"),f=hG(i,"background");return[Xm({},Fut,Object.assign({type:"interval",data:u,style:{liquidOptions:{percent:s,liquidShape:null==i?void 0:i.shape},styleOptions:Object.assign(Object.assign({},i),{outline:l,wave:A,background:f})},animate:o},a)),Xm({},Tut,{style:Object.assign({text:"".concat(PG(100*s)," %")},c),animate:o})]};function Iut(t){for(var e=new Array(t),n=0;n<t;++n)e[n]=0;return e}function Nut(t,e){return Iut(t).map(function(){return Iut(e)})}function Lut(t,e){for(var n=0,r=0;r<t.length;++r)n+=t[r]*e[r];return n}function _ut(t){return Math.sqrt(Lut(t,t))}function Qut(t,e,n){for(var r=0;r<e.length;++r)t[r]=e[r]*n}function Uut(t,e,n,r,i){for(var o=0;o<t.length;++o)t[o]=e*n[o]+r*i[o]}function jut(t,e,n,r,i,o,a){var s=n.fx,u=Lut(n.fxprime,e),c=s,l=s,A=u,f=0;function d(l,f,d){for(var h=0;h<16;++h)if(i=(l+f)/2,Uut(r.x,1,n.x,i,e),c=r.fx=t(r.x,r.fxprime),A=Lut(r.fxprime,e),c>s+o*i*u||c>=d)f=i;else{if(Math.abs(A)<=-a*u)return i;A*(f-l)>=0&&(f=l),l=i,d=c}return 0}i=i||1,o=o||1e-6,a=a||.1;for(var h=0;h<10;++h){if(Uut(r.x,1,n.x,i,e),c=r.fx=t(r.x,r.fxprime),A=Lut(r.fxprime,e),c>s+o*i*u||h&&c>=l)return d(f,i,l);if(Math.abs(A)<=-a*u)return i;if(A>=0)return d(i,f,c);l=c,f=i,i*=2}return i}function Dut(t,e,n){var r,i={x:e.slice(),fx:0,fxprime:e.slice()},o={x:e.slice(),fx:0,fxprime:e.slice()},a=e.slice(),s=1,u=(n=n||{}).maxIterations||20*e.length;i.fx=t(i.x,i.fxprime);var c=i.fxprime.slice();Qut(c,i.fxprime,-1);for(var l=0;l<u;++l){if(s=jut(t,c,i,o,s),n.history&&n.history.push({x:i.x.slice(),fx:i.fx,fxprime:i.fxprime.slice(),alpha:s}),s){Uut(a,1,o.fxprime,-1,i.fxprime);var A=Lut(i.fxprime,i.fxprime);Uut(c,Math.max(0,Lut(a,o.fxprime)/A),c,-1,o.fxprime),r=i,i=o,o=r}else Qut(c,i.fxprime,-1);if(_ut(i.fxprime)<=1e-5)break}return n.history&&n.history.push({x:i.x.slice(),fx:i.fx,fxprime:i.fxprime.slice(),alpha:s}),i}Put.props={};function Rut(t,e){var n,r=function(t){for(var e=[],n=0;n<t.length;++n)for(var r=n+1;r<t.length;++r)for(var i=Gut(t[n],t[r]),o=0;o<i.length;++o){var a=i[o];a.parentIndex=[n,r],e.push(a)}return e}(t),i=r.filter(function(e){return function(t,e){for(var n=0;n<e.length;++n)if(zut(t,e[n])>e[n].radius+1e-10)return!1;return!0}(e,t)}),o=0,a=0,s=[];if(i.length>1){var u=function(t){for(var e={x:0,y:0},n=0;n<t.length;++n)e.x+=t[n].x,e.y+=t[n].y;return e.x/=t.length,e.y/=t.length,e}(i);for(n=0;n<i.length;++n){var c=i[n];c.angle=Math.atan2(c.x-u.x,c.y-u.y)}i.sort(function(t,e){return e.angle-t.angle});var l=i[i.length-1];for(n=0;n<i.length;++n){var A=i[n];a+=(l.x+A.x)*(A.y-l.y);for(var f={x:(A.x+l.x)/2,y:(A.y+l.y)/2},d=null,h=0;h<A.parentIndex.length;++h)if(l.parentIndex.indexOf(A.parentIndex[h])>-1){var p=t[A.parentIndex[h]],v=Math.atan2(A.x-p.x,A.y-p.y),g=Math.atan2(l.x-p.x,l.y-p.y),y=g-v;y<0&&(y+=2*Math.PI);var m=g-y/2,b=zut(f,{x:p.x+p.radius*Math.sin(m),y:p.y+p.radius*Math.cos(m)});b>2*p.radius&&(b=2*p.radius),(null===d||d.width>b)&&(d={circle:p,width:b,p1:A,p2:l})}null!==d&&(s.push(d),o+=Hut(d.circle.radius,d.width),l=A)}}else{var w=t[0];for(n=1;n<t.length;++n)t[n].radius<w.radius&&(w=t[n]);var x=!1;for(n=0;n<t.length;++n)if(zut(t[n],w)>Math.abs(w.radius-t[n].radius)){x=!0;break}x?o=a=0:(o=w.radius*w.radius*Math.PI,s.push({circle:w,p1:{x:w.x,y:w.y+w.radius},p2:{x:w.x-1e-10,y:w.y+w.radius},width:2*w.radius}))}return a/=2,e&&(e.area=o+a,e.arcArea=o,e.polygonArea=a,e.arcs=s,e.innerPoints=i,e.intersectionPoints=r),o+a}function Hut(t,e){return t*t*Math.acos(1-e/t)-(t-e)*Math.sqrt(e*(2*t-e))}function zut(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))}function Kut(t,e,n){if(n>=t+e)return 0;if(n<=Math.abs(t-e))return Math.PI*Math.min(t,e)*Math.min(t,e);var r=e-(n*n-t*t+e*e)/(2*n);return Hut(t,t-(n*n-e*e+t*t)/(2*n))+Hut(e,r)}function Gut(t,e){var n=zut(t,e),r=t.radius,i=e.radius;if(n>=r+i||n<=Math.abs(r-i))return[];var o=(r*r-i*i+n*n)/(2*n),a=Math.sqrt(r*r-o*o),s=t.x+o*(e.x-t.x)/n,u=t.y+o*(e.y-t.y)/n,c=-(e.y-t.y)*(a/n),l=-(e.x-t.x)*(a/n);return[{x:s+c,y:u-l},{x:s-c,y:u+l}]}var Vut=1e-10;function Wut(t,e,n){return Math.min(t,e)*Math.min(t,e)*Math.PI<=n+Vut?Math.abs(t-e):function(t,e,n,r){var i=(r=r||{}).maxIterations||100,o=r.tolerance||1e-10,a=t(e),s=t(n),u=n-e;if(a*s>0)throw"Initial bisect points must have opposite signs";if(0===a)return e;if(0===s)return n;for(var c=0;c<i;++c){var l=e+(u/=2),A=t(l);if(A*a>=0&&(e=l),Math.abs(u)<o||0===A)return l}return e+u}(function(r){return Kut(t,e,r)-n},0,t+e)}function Yut(t,e){var n=function(t,e){for(var n,r=e&&e.lossFunction?e.lossFunction:Xut,i={},o={},a=0;a<t.length;++a){var s=t[a];1==s.sets.length&&(n=s.sets[0],i[n]={x:1e10,y:1e10,rowid:Object.keys(i).length,size:s.size,radius:Math.sqrt(s.size/Math.PI)},o[n]=[])}t=t.filter(function(t){return 2==t.sets.length});for(var u=0;u<t.length;++u){var c=t[u],l=c.hasOwnProperty("weight")?c.weight:1,A=c.sets[0],f=c.sets[1];c.size+Vut>=Math.min(i[A].size,i[f].size)&&(l=0),o[A].push({set:f,size:c.size,weight:l}),o[f].push({set:A,size:c.size,weight:l})}var d=[];for(n in o)if(o.hasOwnProperty(n)){for(var h=0,p=0;p<o[n].length;++p)h+=o[n][p].size*o[n][p].weight;d.push({set:n,size:h})}function v(t,e){return e.size-t.size}d.sort(v);var g={};function y(t){return t.set in g}function m(t,e){i[e].x=t.x,i[e].y=t.y,g[e]=!0}m({x:0,y:0},d[0].set);for(var b=1;b<d.length;++b){var w=d[b].set,x=o[w].filter(y);if(n=i[w],x.sort(v),0===x.length)throw"ERROR: missing pairwise overlap information";for(var E=[],B=0;B<x.length;++B){var k=i[x[B].set],O=Wut(n.radius,k.radius,x[B].size);E.push({x:k.x+O,y:k.y}),E.push({x:k.x-O,y:k.y}),E.push({y:k.y+O,x:k.x}),E.push({y:k.y-O,x:k.x});for(var C=B+1;C<x.length;++C)for(var M=i[x[C].set],S=Wut(n.radius,M.radius,x[C].size),F=Gut({x:k.x,y:k.y,radius:O},{x:M.x,y:M.y,radius:S}),T=0;T<F.length;++T)E.push(F[T])}for(var P=1e50,I=E[0],N=0;N<E.length;++N){i[w].x=E[N].x,i[w].y=E[N].y;var L=r(i,t);L<P&&(P=L,I=E[N])}m(I,w)}return i}(t,e),r=e.lossFunction||Xut;if(t.length>=8){var i=function(t,e){var n,r=(e=e||{}).restarts||10,i=[],o={};for(n=0;n<t.length;++n){var a=t[n];1==a.sets.length&&(o[a.sets[0]]=i.length,i.push(a))}var s=function(t,e,n){var r=Nut(e.length,e.length),i=Nut(e.length,e.length);return t.filter(function(t){return 2==t.sets.length}).map(function(t){var o=n[t.sets[0]],a=n[t.sets[1]],s=Wut(Math.sqrt(e[o].size/Math.PI),Math.sqrt(e[a].size/Math.PI),t.size);r[o][a]=r[a][o]=s;var u=0;t.size+1e-10>=Math.min(e[o].size,e[a].size)?u=1:t.size<=1e-10&&(u=-1),i[o][a]=i[a][o]=u}),{distances:r,constraints:i}}(t,i,o),u=s.distances,c=s.constraints,l=_ut(u.map(_ut))/u.length;u=u.map(function(t){return t.map(function(t){return t/l})});var A,f,d=function(t,e){return function(t,e,n,r){var i,o=0;for(i=0;i<e.length;++i)e[i]=0;for(i=0;i<n.length;++i)for(var a=t[2*i],s=t[2*i+1],u=i+1;u<n.length;++u){var c=t[2*u],l=t[2*u+1],A=n[i][u],f=r[i][u],d=(c-a)*(c-a)+(l-s)*(l-s),h=Math.sqrt(d),p=d-A*A;f>0&&h<=A||f<0&&h>=A||(o+=2*p*p,e[2*i]+=4*p*(a-c),e[2*i+1]+=4*p*(s-l),e[2*u]+=4*p*(c-a),e[2*u+1]+=4*p*(l-s))}return o}(t,e,u,c)};for(n=0;n<r;++n)f=Dut(d,Iut(2*u.length).map(Math.random),e),(!A||f.fx<A.fx)&&(A=f);var h=A.x,p={};for(n=0;n<i.length;++n){var v=i[n];p[v.sets[0]]={x:h[2*n]*l,y:h[2*n+1]*l,radius:Math.sqrt(v.size/Math.PI)}}if(e.history)for(n=0;n<e.history.length;++n)Qut(e.history[n].x,l);return p}(t,e);r(i,t)+1e-8<r(n,t)&&(n=i)}return n}function Xut(t,e){var n=0;function r(e){return e.map(function(e){return t[e]})}for(var i=0;i<e.length;++i){var o=e[i],a=void 0;if(1!=o.sets.length){if(2==o.sets.length){var s=t[o.sets[0]],u=t[o.sets[1]];a=Kut(s.radius,u.radius,zut(s,u))}else a=Rut(r(o.sets));n+=(o.hasOwnProperty("weight")?o.weight:1)*(a-o.size)*(a-o.size)}}return n}var qut=function(t){var e=t.sets,n=void 0===e?"sets":e,r=t.size,i=void 0===r?"size":r,o=t.as,a=void 0===o?["key","path"]:o,s=t.padding,u=void 0===s?0:s,c=v(a,2),l=c[0],A=c[1];return function(t){var e=t.map(function(t){return Object.assign(Object.assign({},t),m({sets:t[n],size:t[i]},l,t.sets.join("&")))});e.sort(function(t,e){return t.sets.length-e.sets.length});var r,o=function(t,e){(e=e||{}).maxIterations=e.maxIterations||500;var n=e.initialLayout||Yut,r=e.lossFunction||Xut;t=function(t){t=t.slice();var e,n,r,i,o=[],a={};for(e=0;e<t.length;++e){var s=t[e];1==s.sets.length?o.push(s.sets[0]):2==s.sets.length&&(a[[r=s.sets[0],i=s.sets[1]]]=!0,a[[i,r]]=!0)}for(o.sort(function(t,e){return t>e?1:-1}),e=0;e<o.length;++e)for(r=o[e],n=e+1;n<o.length;++n)[r,i=o[n]]in a||t.push({sets:[r,i],size:0});return t}(t);var i,o=n(t,e),a=[],s=[];for(i in o)o.hasOwnProperty(i)&&(a.push(o[i].x),a.push(o[i].y),s.push(i));for(var u=function(t,e,n){var r,i=(n=n||{}).maxIterations||200*e.length,o=n.nonZeroDelta||1.05,a=n.zeroDelta||.001,s=n.minErrorDelta||1e-6,u=n.minErrorDelta||1e-5,c=void 0!==n.rho?n.rho:1,l=void 0!==n.chi?n.chi:2,A=void 0!==n.psi?n.psi:-.5,f=void 0!==n.sigma?n.sigma:.5,d=e.length,h=new Array(d+1);h[0]=e,h[0].fx=t(e),h[0].id=0;for(var p=0;p<d;++p){var v=e.slice();v[p]=v[p]?v[p]*o:a,h[p+1]=v,h[p+1].fx=t(v),h[p+1].id=p+1}function g(t){for(var e=0;e<t.length;e++)h[d][e]=t[e];h[d].fx=t.fx}for(var y=function(t,e){return t.fx-e.fx},m=e.slice(),b=e.slice(),w=e.slice(),x=e.slice(),E=0;E<i;++E){if(h.sort(y),n.history){var B=h.map(function(t){var e=t.slice();return e.fx=t.fx,e.id=t.id,e});B.sort(function(t,e){return t.id-e.id}),n.history.push({x:h[0].slice(),fx:h[0].fx,simplex:B})}r=0;for(var k=0;k<d;++k)r=Math.max(r,Math.abs(h[0][k]-h[1][k]));if(Math.abs(h[0].fx-h[d].fx)<s&&r<u)break;for(var O=0;O<d;++O){m[O]=0;for(var C=0;C<d;++C)m[O]+=h[C][O];m[O]/=d}var M=h[d];if(Uut(b,1+c,m,-c,M),b.fx=t(b),b.fx<h[0].fx)Uut(x,1+l,m,-l,M),x.fx=t(x),x.fx<b.fx?g(x):g(b);else if(b.fx>=h[d-1].fx){var S=!1;if(b.fx>M.fx?(Uut(w,1+A,m,-A,M),w.fx=t(w),w.fx<M.fx?g(w):S=!0):(Uut(w,1-A*c,m,A*c,M),w.fx=t(w),w.fx<b.fx?g(w):S=!0),S){if(f>=1)break;for(var F=1;F<h.length;++F)Uut(h[F],1-f,h[0],f,h[F]),h[F].fx=t(h[F])}}else g(b)}return h.sort(y),{fx:h[0].fx,x:h[0]}}(function(e){for(var n={},i=0;i<s.length;++i){var a=s[i];n[a]={x:e[2*i],y:e[2*i+1],radius:o[a].radius}}return r(n,t)},a,e),c=u.x,l=0;l<s.length;++l)i=s[l],o[i].x=c[2*l],o[i].y=c[2*l+1];return o}(e);return e.map(function(t){var e=t[n];return Object.assign(Object.assign({},t),m({},A,function(t){var n=t.width,i=t.height;r=r||function(t,e,n,r){var i=[],o=[];for(var a in t)t.hasOwnProperty(a)&&(o.push(a),i.push(t[a]));e-=2*r,n-=2*r;var s=function(t){var e=function(e){return{max:Math.max.apply(null,t.map(function(t){return t[e]+t.radius})),min:Math.min.apply(null,t.map(function(t){return t[e]-t.radius}))}};return{xRange:e("x"),yRange:e("y")}}(i),u=s.xRange,c=s.yRange;if(u.max==u.min||c.max==c.min)return console.log("not scaling solution: zero size detected"),t;for(var l=e/(u.max-u.min),A=n/(c.max-c.min),f=Math.min(A,l),d=(e-(u.max-u.min)*f)/2,h=(n-(c.max-c.min)*f)/2,p={},v=0;v<i.length;++v){var g=i[v];p[o[v]]={radius:f*g.radius,x:r+d+(g.x-u.min)*f,y:r+h+(g.y-c.min)*f}}return p}(o,n,i,u);var a=function(t){var e={};Rut(t,e);var n=e.arcs;if(0===n.length)return"M 0 0";if(1==n.length){var r=n[0].circle;return function(t,e,n){var r=[],i=t-n,o=e;return r.push("M",i,o),r.push("A",n,n,0,1,0,i+2*n,o),r.push("A",n,n,0,1,0,i,o),r.join(" ")}(r.x,r.y,r.radius)}for(var i=["\nM",n[0].p2.x,n[0].p2.y],o=0;o<n.length;++o){var a=n[o],s=a.circle.radius,u=a.width>s;i.push("\nA",s,s,0,u?1:0,1,a.p1.x,a.p1.y)}return i.join(" ")}(e.map(function(t){return r[t]}));return/[zZ]$/.test(a)||(a+=" Z"),a}))})}};function Zut(){return{"data.venn":qut,"mark.boxplot":put,"mark.gauge":Eut,"mark.wordCloud":_q,"mark.liquid":Put}}function Jut(){return Object.assign(Object.assign(Object.assign(Object.assign({},Pat()),out()),Zut()),urt())}function $ut(){return{"data.inline":ent,"coordinate.cartesian":rz,"encode.constant":hz,"encode.field":pz,"encode.transform":vz,"encode.column":gz,"mark.interval":XV,"shape.label.label":t3,"palette.category10":jq,"palette.category20":Dq,"scale.linear":Rq,"scale.ordinal":Hq,"scale.band":zq,"scale.identity":iZ,"scale.point":aZ,"scale.time":qZ,"scale.log":rJ,"scale.pow":aJ,"scale.sqrt":uJ,"scale.threshold":lJ,"scale.quantile":dJ,"scale.quantize":pJ,"scale.sequential":yJ,"scale.constant":mJ,"theme.classic":CJ,"component.axisX":d$,"component.axisY":h$,"component.axisRadar":x2,"component.axisLinear":A$,"component.axisArc":f$,"component.legendCategory":i1,"component.legendContinuous":p1,"component.legendContinuousBlock":E2,"component.legendContinuousBlockSize":k2,"component.legendContinuousSize":B2,"component.legends":v1,"component.title":b1,"component.sliderX":E1,"component.sliderY":B1,"component.scrollbarX":C1,"component.scrollbarY":M1,"animation.scaleInX":S1,"animation.scaleOutX":F1,"animation.scaleInY":T1,"animation.scaleOutY":P1,"animation.waveIn":I1,"animation.fadeIn":N1,"animation.fadeOut":L1,"animation.morphing":Z1,"interaction.tooltip":R8,"interaction.legendFilter":$0,"interaction.legendHighlight":H8,"interaction.sliderFilter":S9,"interaction.scrollbarFilter":N9,"interaction.poptip":j9,"interaction.event":s3,"composition.mark":O2,"composition.view":T2}}function tct(t,e){return function(t){function n(t){return x(this,n),F(this,n,[Object.assign(Object.assign({},t),{lib:e})])}return P(n,t),B(n)}(t)}qut.props={};var ect,nct,rct={abs:Math.abs,ceil:Math.ceil,floor:Math.floor,max:Math.max,min:Math.min,round:Math.round,sqrt:Math.sqrt,pow:Math.pow},ict=function(t){function e(t,n,r){var i;return x(this,e),(i=F(this,e,[t])).position=n,i.token=r,i.name="ExpressionError",i}return P(e,t),B(e)}(QN(Error));(nct=ect||(ect={}))[nct.STRING=0]="STRING",nct[nct.NUMBER=1]="NUMBER",nct[nct.BOOLEAN=2]="BOOLEAN",nct[nct.NULL=3]="NULL",nct[nct.IDENTIFIER=4]="IDENTIFIER",nct[nct.OPERATOR=5]="OPERATOR",nct[nct.FUNCTION=6]="FUNCTION",nct[nct.DOT=7]="DOT",nct[nct.BRACKET_LEFT=8]="BRACKET_LEFT",nct[nct.BRACKET_RIGHT=9]="BRACKET_RIGHT",nct[nct.PAREN_LEFT=10]="PAREN_LEFT",nct[nct.PAREN_RIGHT=11]="PAREN_RIGHT",nct[nct.COMMA=12]="COMMA",nct[nct.QUESTION=13]="QUESTION",nct[nct.COLON=14]="COLON",nct[nct.DOLLAR=15]="DOLLAR";var oct,act,sct=new Set([32,9,10,13]),uct=new Set([43,45,42,47,37,33,38,124,61,60,62]),cct=new Map([["true",ect.BOOLEAN],["false",ect.BOOLEAN],["null",ect.NULL]]),lct=new Map([["===",!0],["!==",!0],["<=",!0],[">=",!0],["&&",!0],["||",!0],["+",!0],["-",!0],["*",!0],["/",!0],["%",!0],["!",!0],["<",!0],[">",!0]]),Act=new Map([[46,ect.DOT],[91,ect.BRACKET_LEFT],[93,ect.BRACKET_RIGHT],[40,ect.PAREN_LEFT],[41,ect.PAREN_RIGHT],[44,ect.COMMA],[63,ect.QUESTION],[58,ect.COLON],[36,ect.DOLLAR]]),fct=new Map,dct=qn(Act.entries());try{for(dct.s();!(oct=dct.n()).done;){var hct=v(oct.value,2),pct=hct[0],vct=hct[1];fct.set(pct,{type:vct,value:String.fromCharCode(pct)})}}catch(t){dct.e(t)}finally{dct.f()}function gct(t){return t>=48&&t<=57}function yct(t){return t>=97&&t<=122||t>=65&&t<=90||95===t}function mct(t){return yct(t)||gct(t)}function bct(t){return uct.has(t)}!function(t){t[t.Program=0]="Program",t[t.Literal=1]="Literal",t[t.Identifier=2]="Identifier",t[t.MemberExpression=3]="MemberExpression",t[t.CallExpression=4]="CallExpression",t[t.BinaryExpression=5]="BinaryExpression",t[t.UnaryExpression=6]="UnaryExpression",t[t.ConditionalExpression=7]="ConditionalExpression"}(act||(act={}));var wct=new Map([["||",2],["&&",3],["===",4],["!==",4],[">",5],[">=",5],["<",5],["<=",5],["+",6],["-",6],["*",7],["/",7],["%",7],["!",8]]),xct={type:act.Literal,value:null},Ect={type:act.Literal,value:!0},Bct={type:act.Literal,value:!1},kct=function(t){var e=0,n=t.length,r=function(){return e>=n?null:t[e]},i=function(){return t[e++]},o=function(t){var e=r();return null!==e&&e.type===t},a=function(t){return t.type===ect.OPERATOR?wct.get(t.value)||-1:t.type===ect.DOT||t.type===ect.BRACKET_LEFT?9:t.type===ect.QUESTION?1:-1},s=function(t){var n,a;if(i().type===ect.DOT){if(!o(ect.IDENTIFIER)){var s=r();throw new ict("Expected property name",e,s?s.value:"<end of input>")}var u=i();n={type:act.Identifier,name:u.value},a=!1}else{if(n=c(0),!o(ect.BRACKET_RIGHT)){var l=r();throw new ict("Expected closing bracket",e,l?l.value:"<end of input>")}i(),a=!0}return{type:act.MemberExpression,object:t,property:n,computed:a}},u=function(){var t=r();if(!t)throw new ict("Unexpected end of input",e,"<end of input>");if(t.type===ect.OPERATOR&&("!"===t.value||"-"===t.value)){i();var n=u();return{type:act.UnaryExpression,operator:t.value,argument:n,prefix:!0}}switch(t.type){case ect.NUMBER:return i(),{type:act.Literal,value:Number(t.value)};case ect.STRING:return i(),{type:act.Literal,value:t.value};case ect.BOOLEAN:return i(),"true"===t.value?Ect:Bct;case ect.NULL:return i(),xct;case ect.IDENTIFIER:return i(),{type:act.Identifier,name:t.value};case ect.FUNCTION:return function(){var t=i(),n=[];if(!o(ect.PAREN_LEFT)){var a=r();throw new ict("Expected opening parenthesis after function name",e,a?a.value:"<end of input>")}for(i();;){if(o(ect.PAREN_RIGHT)){i();break}if(!r()){var s=r();throw new ict("Expected closing parenthesis",e,s?s.value:"<end of input>")}if(n.length>0){if(!o(ect.COMMA)){var u=r();throw new ict("Expected comma between function arguments",e,u?u.value:"<end of input>")}i()}var l=c(0);n.push(l)}return{type:act.CallExpression,callee:{type:act.Identifier,name:t.value},arguments:n}}();case ect.PAREN_LEFT:i();var a=c(0);if(!o(ect.PAREN_RIGHT)){var s=r();throw new ict("Expected closing parenthesis",e,s?s.value:"<end of input>")}return i(),a;default:throw new ict("Unexpected token: ".concat(t.type),e,t.value)}},c=function(){for(var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,A=u();e<n;){var f=t[e],d=a(f);if(d<=l)break;if(f.type!==ect.QUESTION)if(f.type!==ect.OPERATOR){if(f.type!==ect.DOT&&f.type!==ect.BRACKET_LEFT)break;A=s(A)}else{i();var h=c(d);A={type:act.BinaryExpression,operator:f.value,left:A,right:h}}else{i();var p=c(0);if(!o(ect.COLON)){var v=r();throw new ict("Expected : in conditional expression",e,v?v.value:"<end of input>")}i();var g=c(0);A={type:act.ConditionalExpression,test:A,consequent:p,alternate:g}}}return A},l=c();return{type:act.Program,body:l}},Oct=function(t,e,n){var r=e;n&&(r=w(w({},e),{},{context:w(w({},e.context),n)}));var i=function(t){switch(t.type){case act.Literal:return function(t){return t.value}(t);case act.Identifier:return function(t){if(!(t.name in r.context))throw new ict("Undefined variable: ".concat(t.name));return r.context[t.name]}(t);case act.MemberExpression:return function(t){var e=i(t.object);if(null==e)throw new ict("Cannot access property of null or undefined");return e[t.computed?i(t.property):t.property.name]}(t);case act.CallExpression:return function(t){var e=r.functions[t.callee.name];if(!e)throw new ict("Undefined function: ".concat(t.callee.name));return e.apply(void 0,O(t.arguments.map(function(t){return i(t)})))}(t);case act.BinaryExpression:return function(t){if("&&"===t.operator){var e=i(t.left);return e?i(t.right):e}if("||"===t.operator)return i(t.left)||i(t.right);var n=i(t.left),r=i(t.right);switch(t.operator){case"+":return n+r;case"-":return n-r;case"*":return n*r;case"/":return n/r;case"%":return n%r;case"===":return n===r;case"!==":return n!==r;case">":return n>r;case">=":return n>=r;case"<":return n<r;case"<=":return n<=r;default:throw new ict("Unknown operator: ".concat(t.operator))}}(t);case act.UnaryExpression:return function(t){var e=i(t.argument);if(t.prefix)switch(t.operator){case"!":return!e;case"-":if("number"!=typeof e)throw new ict("Cannot apply unary - to non-number: ".concat(e));return-e;default:throw new ict("Unknown operator: ".concat(t.operator))}throw new ict("Postfix operators are not supported: ".concat(t.operator))}(t);case act.ConditionalExpression:return function(t){var e=i(t.test);return i(e?t.consequent:t.alternate)}(t);default:throw new ict("Evaluation error: Unsupported node type: ".concat(t.type))}};return i(t.body)};var Cct=function(t){return t};const Mct=function(t,e){void 0===e&&(e=Cct);var n={};return bn(t)&&!pe(t)&&Object.keys(t).forEach(function(r){n[r]=e(t[r],r)}),n};var Sct=["style","encode","labels","children"],Fct=Oq(function(t){var e=function(t){var e=function(t){var e,n=t,r=n.length,i=new Array(Math.ceil(r/3)),o=0,a=0;function s(t){var e=a+1;a++;for(var i="",o=!1;a<r;){var s=n.charCodeAt(a);if(s===t)return o||(i=n.substring(e,a)),a++,{type:ect.STRING,value:i};92===s?(o||(i=n.substring(e,a),o=!0),a++,i+=n[a]):o&&(i+=n[a]),a++}throw new ict("Unterminated string starting with ".concat(String.fromCharCode(t)),a,n.substring(Math.max(0,a-10),a))}function u(){var t=a;for(45===n.charCodeAt(a)&&a++;a<r&&gct(n.charCodeAt(a));)a++;if(a<r&&46===n.charCodeAt(a))for(a++;a<r&&gct(n.charCodeAt(a));)a++;var e=n.slice(t,a);return{type:ect.NUMBER,value:e}}function c(){var t=++a;if(a<r&&yct(n.charCodeAt(a)))for(a++;a<r&&mct(n.charCodeAt(a));)a++;var e=n.slice(t,a);return{type:ect.FUNCTION,value:e}}function l(){for(var t=a++;a<r&&mct(n.charCodeAt(a));)a++;var e=n.slice(t,a),i=cct.get(e);return i?{type:i,value:e}:{type:ect.IDENTIFIER,value:e}}function A(){if(a+2<r){var t=n.substring(a,a+3);if(lct.has(t))return a+=3,{type:ect.OPERATOR,value:t}}if(a+1<r){var e=n.substring(a,a+2);if(lct.has(e))return a+=2,{type:ect.OPERATOR,value:e}}var i=n[a];if(lct.has(i))return a++,{type:ect.OPERATOR,value:i};throw new ict("Unknown operator at position ".concat(a,": ").concat(n.substring(a,a+1)),a,n.substring(Math.max(0,a-10),a))}for(;a<r;){var f=n.charCodeAt(a);if(e=f,sct.has(e))a++;else{var d=fct.get(f);if(d)i[o++]=d,a++;else if(34!==f&&39!==f)if(gct(f)||45===f&&a+1<r&&gct(n.charCodeAt(a+1)))i[o++]=u();else if(64!==f)if(yct(f))i[o++]=l();else{if(!bct(f))throw new ict("Unexpected character: ".concat(n[a]),a,n.substring(Math.max(0,a-10),a));i[o++]=A()}else i[o++]=c();else i[o++]=s(f)}}return o===i.length?i:i.slice(0,o)}(t),n=kct(e),r=function(){return{context:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},functions:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}}}({},rct);return function(){return Oct(n,r,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}}(t);return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Array.from({length:n.length},function(t,e){return String.fromCharCode(97+e)}),o=Object.fromEntries(n.map(function(t,e){return[i[e],t]}));return e(Object.assign(Object.assign({},o),{global:Object.assign({},o)}))}},function(t){return t},128);function Tct(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(Array.isArray(t))return t.map(function(n,r){return Tct(t[r],e)});if("object"==typeof t&&t)return Mct(t,function(t,n){return e&&Sct.includes(n)?Tct(t,"children"===n):e?t:Tct(t,!1)});if("string"==typeof t){var n=t.trim();if(n.startsWith("{")&&n.endsWith("}"))return Fct(n.slice(1,-1))}return t}var Pct={linear:"linear",identity:"identity",log:"log",pow:"pow",sqrt:"sqrt",sequential:"sequential"},Ict={threshold:"threshold",quantize:"quantize",quantile:"quantile"},Nct={ordinal:"ordinal",band:"band",point:"point"},Lct={constant:"constant"},_ct=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function Qct(t,e,n,r,i){var o=v(c3("component",r),1)[0],a=t.scaleInstances,s=t.scale,u={bbox:t.bbox,library:r};return o(_ct(t,["scaleInstances","scale","bbox"]))({coordinate:e,library:r,markState:i,scales:a,theme:n,value:u,scale:s})}function Uct(t,e){var n=["left","right","bottom","top"],r=PK(t,function(t){var e=t.type,r=t.position,i=t.group;return n.includes(r)?void 0===i?e.startsWith("legend")?"legend-".concat(r):Symbol("independent"):"independent"===i?Symbol("independent"):i:Symbol("independent")});return r.flatMap(function(t){var n=v(t,2)[1];if(1===n.length)return n[0];if(void 0!==e){var r=n.filter(function(t){return void 0!==t.length}).map(function(t){return t.length}),i=$tt(r);if(i>e)return n.forEach(function(t){return t.group=Symbol("independent")}),n;var o=(e-i)/(n.length-r.length);n.forEach(function(t){void 0===t.length&&(t.length=o)})}var a=Bq(n,function(t){return t.size}),s=Bq(n,function(t){return t.order}),u=Bq(n,function(t){return t.crossPadding});return{type:"group",size:a,order:s,position:n[0].position,children:n,crossPadding:u}})}function jct(t){var e=t.type;return"string"!=typeof e?null:e in Pct?"continuous":e in Nct?"discrete":e in Ict?"distribution":e in Lct?"constant":null}function Dct(t){var e=U6(t,"polar");if(e.length){var n=e[e.length-1],r=iz(n);return[r.startAngle,r.endAngle]}var i=U6(t,"radial");if(i.length){var o=i[i.length-1],a=lz(o);return[a.startAngle,a.endAngle]}return[-Math.PI/2,Math.PI/2*3]}function Rct(t,e,n,r,i,o,a){var s=v(Dct(a),1)[0],u=[r.position||e,null!=s?s:n];return"string"==typeof t&&t.startsWith("axis")?function(t,e,n,r,i){var o=n[0].name;if("axisRadar"===t){var a=r.filter(function(t){return t.name.startsWith("position")}),s=function(t){var e=/position(\d*)/g.exec(t);return e?+e[1]:null}(o);if(null===s)return[null,null];var u=v(Dct(i),2),c=u[0];return["center",(u[1]-c)/(z6(i)?a.length:a.length-1)*s+c]}return"axisY"===t&&function(t){return U6(t,"parallel").length>0}(i)?D6(i)?["center","horizontal"]:["center","vertical"]:"axisLinear"===t?["center",v(Dct(i),1)[0]]:"axisArc"===t?"inner"===e[0]?["inner",null]:["outer",null]:j6(i)||H6(i)?["center",null]:"axisX"===t&&function(t){return U6(t,"reflect").length>0}(i)||"axisX"===t&&function(t){return U6(t,"reflectY").length>0}(i)?["top",null]:e}(t,u,i,o,a):"string"==typeof t&&t.startsWith("legend")&&j6(a)&&"center"===r.position?["center","vertical"]:u}function Hct(t,e,n,r,i,o){var a=t.type;if(["left","right","bottom","top"].includes(r)&&"string"==typeof a){var s=a;return(s.startsWith("axis")?Wct:s.startsWith("group")?zct:s.startsWith("legendContinuous")?Yct:"legendCategory"===s?Xct:s.startsWith("slider")?Vct:"title"===s?Gct:s.startsWith("scrollbar")?Kct:function(){})(t,e,n,r,i,o)}}function zct(t,e,n,r,i,o){var a=t.children,s=Bq(a,function(t){return t.crossPadding});a.forEach(function(t){return t.crossPadding=s}),a.forEach(function(t){return Hct(t,e,n,r,i,o)});var u=Bq(a,function(t){return t.size});t.size=u,a.forEach(function(t){return t.size=u})}function Kct(t,e,n,r,i,o){var a=Xm({},i.scrollbar,t).trackSize,s=void 0===a?6:a;t.size=s}function Gct(t,e,n,r,i,o){var a=Xm({},i.title,t),s=a.title,u=a.subtitle,c=a.spacing,l=void 0===c?0:c,A=_ct(a,["title","subtitle","spacing"]);if(s){var f=elt(s,hG(A,"title"));t.size=f.height}if(u){var d=elt(u,hG(A,"subtitle"));t.size+=l+d.height}}function Vct(t,e,n,r,i,o){var a,s=(a=i.slider,Xm({},a,t)),u=s.trackSize,c=s.handleIconSize,l=Math.max(u,2.4*c);t.size=l}function Wct(t,e,n,r,i,o){var a,s;t.transform=t.transform||[{type:"hide"}];var u="left"===r||"right"===r,c=$ct(t,r,i),l=c.tickLength,A=void 0===l?0:l,f=c.labelSpacing,d=void 0===f?0:f,h=c.titleSpacing,p=void 0===h?0:h,g=c.labelAutoRotate,y=_ct(c,["tickLength","labelSpacing","titleSpacing","labelAutoRotate"]),m=qct(t,o),b=Zct(y,m),w=A;if("function"==typeof t.tickLength){var x=((null===(a=m.getTicks)||void 0===a?void 0:a.call(m))||m.getOptions().domain).map(function(e,n,r){return t.tickLength(e,n,r)});w=Math.max.apply(Math,O(x).concat([0]))}var E=w+d;if(b&&b.length){var B=Bq(b,function(t){return t.width}),k=Bq(b,function(t){return t.height});if(u)t.size=B+E;else{var C=t.tickFilter,M=t.labelTransform;!function(t,e,n,r,i){var o=$tt(e,function(t){return t.width});if(o>n)return!0;var a=t.clone();a.update({range:[0,n]});for(var s=tlt(t,i),u=s.map(function(t){return a.map(t)+function(t,e){return t.getBandWidth?t.getBandWidth(e)/2:0}(a,t)}),c=s.map(function(t,e){return e}),l=-r[0],A=n+r[1],f=function(t,e){var n=e.width;return[t-n/2,t+n/2]},d=0;d<c.length;d++){var h=v(f(u[d],e[d]),2),p=h[0],g=h[1];if(p<l||g>A)return!0;var y=u[d+1];if(y&&g>v(f(y,e[d+1]),1)[0])return!0}return!1}(m,b,e,n,C)||M||!1===g||null===g?(t.labelTransform=null!==(s=t.labelTransform)&&void 0!==s?s:"rotate(0)",t.size=k+E):(t.labelTransform="rotate(90)",t.size=B+E)}}else t.size=w;var S=Jct(y);S&&(t.size+=u?p+S.width:p+S.height)}function Yct(t,e,n,r,i,o){var a,s=(a=i.legendContinuous,Xm({},a,t)),u=s.labelSpacing,c=void 0===u?0:u,l=s.titleSpacing,A=void 0===l?0:l,f=_ct(s,["labelSpacing","titleSpacing"]),d="left"===r||"right"===r,h=hG(f,"ribbon").size,p=hG(f,"handleIcon").size,v=Math.max(h,2.4*p);t.size=v;var g=Zct(f,qct(t,o));if(g){var y=d?"width":"height",m=Bq(g,function(t){return t[y]});t.size+=m+c}var b=Jct(f);b&&(d?t.size=Math.max(t.size,b.width):t.size+=A+b.height)}function Xct(t,e,n,r,i,o){var a,s,u,c,l,A,f,d=(a=i.legendCategory,s=t.title,c=(u=v(Array.isArray(s)?[s,void 0]:[void 0,s],2))[0],l=u[1],Xm({title:c},a,Object.assign(Object.assign({},t),{title:l}))),h=d.focus,p=d.itemSpacing,g=d.focusMarkerSize,y=d.itemMarkerSize,m=d.titleSpacing,b=d.rowPadding,w=d.colPadding,x=d.maxCols,E=void 0===x?1/0:x,B=d.maxRows,k=void 0===B?1/0:B,O=_ct(d,["focus","itemSpacing","focusMarkerSize","itemMarkerSize","titleSpacing","rowPadding","colPadding","maxCols","maxRows"]),C=t.cols,M=t.length,S=function(t){return Math.min(t,k)},F=function(t){return Math.min(t,E)},T="left"===r||"right"===r,P=void 0===M?e+(T?0:n[0]+n[1]):M,I=Jct(O),N=Zct(O,qct(t,o),"itemLabel"),L=Math.max(N[0].height,y)+b,_=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return y+t+p[0]+e+(h?g+p[2]:0)};T?function(){var e,n=-1/0,r=0,i=1,o=0,a=-1/0,s=-1/0,u=I?I.height:0,c=P-u,l=qn(N);try{for(l.s();!(e=l.n()).done;){var A=e.value.width,f=_(A,w);n=Math.max(n,f),r+L>c?(i++,a=Math.max(a,o),s=Math.max(s,r),o=1,r=L):(r+=L,o++)}}catch(t){l.e(t)}finally{l.f()}i<=1&&(a=o,s=r),t.size=n*F(i),t.length=s+u,Xm(t,{cols:F(i),gridRow:a})}():"number"==typeof C?(A=Math.ceil(N.length/C),f=Bq(N,function(t){return _(t.width)})*C,t.size=L*S(A)-b,t.length=Math.min(f,P)):function(){var e,n=1,r=0,i=-1/0,o=qn(N);try{for(o.s();!(e=o.n()).done;){var a=e.value.width,s=_(a,w);r+s>P?(i=Math.max(i,r),r=s,n++):r+=s}}catch(t){o.e(t)}finally{o.f()}1===n&&(i=r),t.size=L*S(n)-b,t.length=i}(),I&&(T?t.size=Math.max(t.size,I.width):t.size+=m+I.height)}function qct(t,e){var n=v(c3("scale",e),1)[0],r=t.scales,i=t.tickCount,o=t.tickMethod,a=r.find(function(t){return"constant"!==t.type&&"identity"!==t.type});return void 0!==i&&(a.tickCount=i),void 0!==o&&(a.tickMethod=o),n(a)}function Zct(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"label",r=t.labelFormatter,i=t.tickFilter,o=t.label,a=void 0===o||o,s=_ct(t,["labelFormatter","tickFilter","label"]);if(!a)return null;var u=function(t,e,n){var r=tlt(t,n).map(function(t){return"number"==typeof t?PG(t):t}),i=e?"string"==typeof e?HJ(e):e:t.getFormatter?t.getFormatter():function(t){return"".concat(t)};return r.map(i)}(e,r,i),c=hG(s,n),l=u.map(function(t,e){return Object.fromEntries(Object.entries(c).map(function(n){var r=v(n,2),i=r[0],o=r[1];return[i,"function"==typeof o?o(t,e):o]}))}),A=u.map(function(t,e){return elt(t,l[e])}),f=l.some(function(t){return t.transform});if(!f){var d=u.map(function(t,e){return e});t.indexBBox=new Map(d.map(function(t){return[t,[u[t],A[t]]]}))}return A}function Jct(t){var e,n=t.title,r=_ct(t,["title"]);if(!1===(e=n)||null===e||void 0===n)return null;var i=hG(r,"title"),o=i.direction,a=i.transform,s=Array.isArray(n)?n.join(","):n;return"string"!=typeof s?null:elt(s,Object.assign(Object.assign({},i),{transform:a||("vertical"===o?"rotate(-90)":"")}))}function $ct(t,e,n){var r=t.title,i=v(Array.isArray(r)?[r,void 0]:[void 0,r],2),o=i[0],a=i[1],s=n.axis,u=n["axis".concat(lG(e))];return Xm({title:o},s,u,Object.assign(Object.assign({},t),{title:a}))}function tlt(t,e){var n=t.getTicks?t.getTicks():t.getOptions().domain;return e?n.filter(e):n}function elt(t,e){var n=function(t){return t instanceof Tu?t:new qu({style:{text:"".concat(t)}})}(t),r=(e.filter,_ct(e,["filter"]));return n.attr(Object.assign(Object.assign({},r),{visibility:"none"})),n.getBBox()}var nlt=16;function rlt(t){var e=t.height,n=t.width,r=t.padding,i=void 0===r?0:r,o=t.paddingLeft,a=void 0===o?i:o,s=t.paddingRight,u=void 0===s?i:s,c=t.paddingTop,l=void 0===c?i:c,A=t.paddingBottom,f=void 0===A?i:A,d=t.margin,h=void 0===d?16:d,p=t.marginLeft,v=void 0===p?h:p,g=t.marginRight,y=void 0===g?h:g,m=t.marginTop,b=void 0===m?h:m,w=t.marginBottom,x=void 0===w?h:w,E=t.inset,B=void 0===E?0:E,k=t.insetLeft,O=void 0===k?B:k,C=t.insetRight,M=void 0===C?B:C,S=t.insetTop,F=void 0===S?B:S,T=t.insetBottom,P=void 0===T?B:T,I=function(t){return"auto"===t?20:t};return{width:n-I(a)-I(u)-v-y-O-M,height:e-I(l)-I(f)-b-x-F-P}}function ilt(t,e,n,r,i,o,a){var s,u=TK(t,function(t){return t.position}),c=i.padding,l=void 0===c?o.padding:c,A=i.paddingLeft,f=void 0===A?l:A,d=i.paddingRight,h=void 0===d?l:d,p=i.paddingBottom,v=void 0===p?l:p,g=i.paddingTop,y={paddingBottom:v,paddingLeft:f,paddingTop:void 0===g?l:g,paddingRight:h},m=qn(r);try{var b=function(){var t=s.value,r="padding".concat(lG(dY(t))),i=u.get(t)||[],c=y[r],l=function(t){void 0===t.size&&(t.size=t.defaultSize)},A="bottom"===t||"top"===t,f=Eq(i,function(t){return t.order}),d=i.filter(function(t){return t.type.startsWith("axis")&&t.order==f});if(d.length&&(d[0].crossPadding=0),"number"==typeof c)i.forEach(l),i.forEach(function(t){t.type.startsWith("axis")&&void 0===t.labelAutoHide&&(t.labelAutoHide=!0)});else if(0===i.length)y[r]=0;else{var h=Uct(i,A?e+n[0]+n[1]:e);h.forEach(function(r){r.size||("auto"!==c?function(t){"group"===t.type?(t.children.forEach(l),t.size=Bq(t.children,function(t){return t.size})):t.size=t.defaultSize}(r):(Hct(r,e,n,t,o,a),l(r)))});var p=h.reduce(function(t,e){var n=e.size,r=e.crossPadding;return t+n+(void 0===r?12:r)},0);y[r]=p}};for(m.s();!(s=m.n()).done;)b()}catch(t){m.e(t)}finally{m.f()}return y}function olt(t){var e=t.width,n=t.height,r=t.paddingLeft,i=t.paddingRight,o=t.paddingTop,a=t.paddingBottom,s=t.marginLeft,u=t.marginTop,c=t.marginBottom,l=t.marginRight,A=t.innerHeight,f=t.innerWidth,d=t.insetBottom,h=t.insetLeft,p=t.insetRight,v=t.insetTop,g=r+s,y=o+u,m=i+l,b=a+c,w=e-s-l,x=[g+h,y+v,f-h-p,A-v-d,"center",null,null];return{top:[g,0,f,y,"vertical",!0,p$,s,w],right:[e-m,y,m,A,"horizontal",!1,p$],bottom:[g,n-b,f,b,"vertical",!1,p$,s,w],left:[0,y,g,A,"horizontal",!0,p$],"top-left":[g,0,f,y,"vertical",!0,p$],"top-right":[g,0,f,y,"vertical",!0,p$],"bottom-left":[g,n-b,f,b,"vertical",!1,p$],"bottom-right":[g,n-b,f,b,"vertical",!1,p$],center:x,inner:x,outer:x}}var alt=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())})},slt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function ult(t,e,n){return alt(this,void 0,void 0,(0,Dn.A)().m(function r(){var i,o,a,s,u,c,l,A,f,d,h,p,g,y,m,b,w,x,E,B,k,C,M,S,F,T,P,I,N,L,_,Q,U,j,D,R,H,z,K,G,V,W,Y,X,q,Z,J,$,tt,et,nt,rt,it,ot,at,st,ut,ct,lt,At=this;return(0,Dn.A)().w(function(r){for(;;)switch(r.n){case 0:o=n.library,a=c3("composition",o),s=v(a,1),u=s[0],c=c3("interaction",o),l=v(c,1),A=l[0],f=new Set(Object.keys(o).map(function(t){var e;return null===(e=/mark\.(.*)/.exec(t))||void 0===e?void 0:e[1]}).filter(dG)),d=new Set(Object.keys(o).map(function(t){var e;return null===(e=/component\.(.*)/.exec(t))||void 0===e?void 0:e[1]}).filter(dG)),h=function(t){var e=t.type;if("function"==typeof e){var n=e.props,r=(void 0===n?{}:n).composite;if(void 0===r||r)return"mark"}return"string"!=typeof e?e:f.has(e)||d.has(e)?"mark":e},p=function(t){return"mark"===h(t)},g=function(t){return"standardView"===h(t)},y=function(t){var e=t.type;return"string"==typeof e&&!!d.has(e)},m=function(t){if(g(t))return[t];var e=h(t);return u({type:e,static:y(t)})(t)},b=[],w=new Map,x=new Map,E=[t],B=[];case 1:if(!E.length){r.n=12;break}if(k=E.shift(),!g(k)){r.n=7;break}if(!(C=x.get(k))){r.n=2;break}ct=glt(C,k,o),r.n=4;break;case 2:return r.n=3,flt(k,n);case 3:ct=r.v;case 4:if(M=v(ct,2),S=M[0],F=M[1],w.set(S,k),b.push(S),T=F.flatMap(m).map(function(t){return Q6(t,o)}),E.push.apply(E,O(T)),!T.every(g)){r.n=6;break}return r.n=5,Promise.all(T.map(function(t){return plt(t,n)}));case 5:for(W6(P=r.v),I=0;I<T.length;I++)N=T[I],L=P[I],x.set(N,L);case 6:r.n=11;break;case 7:if(!p(k)){r.n=8;break}lt=k,r.n=10;break;case 8:return r.n=9,Nlt(k,n);case 9:lt=r.v;case 10:_=m(lt),Array.isArray(_)?E.push.apply(E,O(_)):"function"==typeof _&&B.push(_());case 11:r.n=1;break;case 12:n.emitter.emit(o3.BEFORE_PAINT),Q=new Map,U=new Map,j=[],e.selectAll(Ult(k$)).data(b,function(t){return t.key}).join(function(t){return t.append("g").attr("className",k$).attr("id",function(t){return t.key}).call(clt).each(function(t,e,r){ylt(t,wG(r),j,n),Q.set(t,r)})},function(t){return t.call(clt).each(function(t,e,r){ylt(t,wG(r),j,n),U.set(t,r)})},function(t){return t.each(function(t,e,n){var r,i=qn(n.nameInteraction.values());try{for(i.s();!(r=i.n()).done;)r.value.destroy()}catch(t){i.e(t)}finally{i.f()}}).remove()}),D=function(t,e,r){return Array.from(t.entries()).map(function(i){var o=v(i,2),a=o[0],s=o[1],u=r||new Map,c=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t};return u.set(t,e)},l=w.get(a),A=llt(wG(s),l,n),f={view:a,container:s,options:l,setState:c,update:function(n,r){return alt(At,void 0,void 0,(0,Dn.A)().m(function i(){var o,a;return(0,Dn.A)().w(function(i){for(;;)switch(i.n){case 0:return o=uG(Array.from(u.values())),a=o(l),i.n=1,A(a,n,function(){tn(r)&&e(t,r,u)});case 1:return i.a(2,i.v)}},i)}))}};return n.externals.update=f.update,n.externals.setState=c,f})},R=function(){var t,e,r=arguments.length>1?arguments[1]:void 0,i=D(arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,R,arguments.length>2?arguments[2]:void 0),o=qn(i);try{for(o.s();!(e=o.n()).done;){var a=e.value,s=a.options,u=a.container.nameInteraction,c=Ilt(s);r&&(c=c.filter(function(t){return r.includes(t[0])}));var l,f=qn(c);try{for(f.s();!(l=f.n()).done;){var d=v(l.value,2),h=d[0],p=d[1],g=u.get(h);if(g&&(null===(t=g.destroy)||void 0===t||t.call(g)),p){var y=vlt(a.view,h,p,A)(a,i,n.emitter);u.set(h,{destroy:y})}}}catch(t){f.e(t)}finally{f.f()}}}catch(t){o.e(t)}finally{o.f()}},H=D(Q,R),z=qn(H);try{for(z.s();!(K=z.n()).done;){G=K.value,V=G.options,W=new Map,G.container.nameInteraction=W,Y=qn(Ilt(V));try{for(Y.s();!(X=Y.n()).done;)q=X.value,Z=v(q,2),J=Z[0],($=Z[1])&&(tt=vlt(G.view,J,$,A),et=tt(G,H,n.emitter),W.set(J,{destroy:et}))}catch(t){Y.e(t)}finally{Y.f()}}}catch(t){z.e(t)}finally{z.f()}R(),nt=t.width,rt=t.height,it=[],ot=(0,Dn.A)().m(function t(){var r,i;return(0,Dn.A)().w(function(t){for(;;)switch(t.n){case 0:r=st[at],i=new Promise(function(t){return alt(At,void 0,void 0,(0,Dn.A)().m(function i(){var o,a,s,u,c;return(0,Dn.A)().w(function(i){for(;;)switch(i.p=i.n){case 0:o=qn(r),i.p=1,o.s();case 2:if((a=o.n()).done){i.n=4;break}return s=a.value,u=Object.assign({width:nt,height:rt},s),i.n=3,ult(u,e,n);case 3:i.n=2;break;case 4:i.n=6;break;case 5:i.p=5,c=i.v,o.e(c);case 6:return i.p=6,o.f(),i.f(6);case 7:t();case 8:return i.a(2)}},i,null,[[1,5,6,7]])}))}),it.push(i);case 1:return t.a(2)}},t)}),at=0,st=B;case 13:if(!(at<st.length)){r.n=15;break}return r.d(Vn(ot()),14);case 14:at++,r.n=13;break;case 15:return n.views=b,null===(i=n.animations)||void 0===i||i.forEach(function(t){return null==t?void 0:t.cancel()}),n.animations=j,n.emitter.emit(o3.AFTER_PAINT),ut=j.filter(dG).map(Slt).map(function(t){return t.finished}),r.a(2,Promise.all([].concat(O(ut),it)))}},r)}))}function clt(t){t.style("transform",function(t){return"translate(".concat(t.layout.x,", ").concat(t.layout.y,")")})}function llt(t,e,n){var r=this,i=function(t){var e=v(c3("interaction",t),2)[1];return function(t){var n=v(t,2),r=n[0],i=n[1];try{return[r,e(r)]}catch(t){return[r,i.type]}}}(n.library),o=Ilt(e).map(i).filter(function(t){return t[1]&&t[1].props&&t[1].props.reapplyWhenUpdate}).map(function(t){return t[0]});return function(e,i,a){return alt(r,void 0,void 0,(0,Dn.A)().m(function r(){var s,u,c,l,A,f,d,h,p;return(0,Dn.A)().w(function(r){for(;;)switch(r.n){case 0:return s=[],r.n=1,flt(e,n);case 1:u=r.v,c=v(u,2),l=c[0],A=c[1],ylt(l,t,s,n),f=qn(o.filter(function(t){return t!==i}));try{for(f.s();!(d=f.n()).done;)Alt(d.value,t,e,l,n)}catch(t){f.e(t)}finally{f.f()}h=qn(A);try{for(h.s();!(p=h.n()).done;)ult(p.value,t,n)}catch(t){h.e(t)}finally{h.f()}return a(),r.a(2,{options:e,view:l})}},r)}))}}function Alt(t,e,n,r,i){var o,a=v(c3("interaction",i.library),1)[0],s=e.node().nameInteraction,u=Ilt(n).find(function(e){return v(e,1)[0]===t}),c=s.get(t);if(c&&(null===(o=c.destroy)||void 0===o||o.call(c),u[1])){var l=vlt(r,t,u[1],a),A={options:n,view:r,container:e.node(),update:function(t){return Promise.resolve(t)}},f=l(A,[],i.emitter);s.set(t,{destroy:f})}}function flt(t,e){return alt(this,void 0,void 0,(0,Dn.A)().m(function n(){var r,i,o,a,s;return(0,Dn.A)().w(function(n){for(;;)switch(n.n){case 0:return r=e.library,n.n=1,hlt(t,e);case 1:return i=n.v,o=dlt(i),t.interaction=o.interaction,t.coordinate=o.coordinate,t.marks=[].concat(O(o.marks),O(o.components)),a=Q6(o,r),n.n=2,plt(a,e);case 2:return s=n.v,n.a(2,glt(s,a,r))}},n)}))}function dlt(t){var e=t.coordinate,n=void 0===e?{}:e,r=t.interaction,i=void 0===r?{}:r,o=t.style,a=void 0===o?{}:o,s=t.marks,u=slt(t,["coordinate","interaction","style","marks"]),c=s.map(function(t){return t.coordinate||{}}),l=s.map(function(t){return t.interaction||{}}),A=s.map(function(t){return t.viewStyle||{}}),f=[].concat(O(c),[n]).reduceRight(function(t,e){return Xm(t,e)},{}),d=[i].concat(O(l)).reduce(function(t,e){return Xm(t,e)},{}),h=[].concat(O(A),[a]).reduce(function(t,e){return Xm(t,e)},{});return Object.assign(Object.assign({},u),{marks:s,coordinate:f,interaction:d,style:h})}function hlt(t,e){return alt(this,void 0,void 0,(0,Dn.A)().m(function n(){var r,i,o,a,s,u,c,l,A,f,d,h,p,g,y;return(0,Dn.A)().w(function(n){for(;;)switch(n.n){case 0:r=e.library,i=c3("mark",r),o=v(i,2),a=o[0],s=o[1],u=new Set(Object.keys(r).map(function(t){var e;return null===(e=/component\.(.*)/.exec(t))||void 0===e?void 0:e[1]}).filter(dG)),c=t.marks,l=[],A=[],f=O(c),d=rlt(t),h=d.width,p=d.height,g={options:t,width:h,height:p},y=(0,Dn.A)().m(function t(){var n,r,i,o,c,d,h,p,y,m,b,w,x,E;return(0,Dn.A)().w(function(t){for(;;)switch(t.n){case 0:return n=f.splice(0,1),r=v(n,1),i=r[0],t.n=1,Nlt(i,e);case 1:if(o=t.v,c=o.type,d=void 0===c?AG("G2Mark type is required."):c,h=o.key,!u.has(d)){t.n=2;break}A.push(o),t.n=5;break;case 2:if(p=s(d),y=p.props,void 0===(m=(void 0===y?{}:y).composite)||m){t.n=3;break}l.push(o),t.n=5;break;case 3:return b=o.data,w=Object.assign(Object.assign({},o),{data:b?Array.isArray(b)?b:b.value:b}),t.n=4,a(w,g);case 4:x=t.v,E=Array.isArray(x)?x:[x],f.unshift.apply(f,O(E.map(function(t,e){return Object.assign(Object.assign({},t),{key:"".concat(h,"-").concat(e)})})));case 5:return t.a(2)}},t)});case 1:if(!f.length){n.n=3;break}return n.d(Vn(y()),2);case 2:n.n=1;break;case 3:return n.a(2,Object.assign(Object.assign({},t),{marks:l,components:A}))}},n)}))}function plt(t,e){return alt(this,void 0,void 0,(0,Dn.A)().m(function n(){var r,i,o,a,s,u,c,l,A,f,d,h,p,g,y,m,b,w,x,E,B,k,O,C,M,S,F,T,P,I;return(0,Dn.A)().w(function(n){for(;;)switch(n.p=n.n){case 0:r=e.library,i=c3("theme",r),o=v(i,1),a=o[0],s=c3("mark",r),u=v(s,2),c=u[1],l=t.theme,A=t.marks,f=t.coordinates,d=void 0===f?[]:f,h=a(Plt(l)),p=new Map,g=qn(A),n.p=1,g.s();case 2:if((y=g.n()).done){n.n=5;break}return m=y.value,b=m.type,w=c(b),x=w.props,E=void 0===x?{}:x,n.n=3,d3(m,E,e);case 3:(B=n.v)&&(k=v(B,2),O=k[0],C=k[1],p.set(O,C));case 4:n.n=2;break;case 5:n.n=7;break;case 6:n.p=6,P=n.v,g.e(P);case 7:return n.p=7,g.f(),n.f(7);case 8:M=TK(Array.from(p.values()).flatMap(function(t){return t.channels}),function(t){return t.scaleKey}),S=qn(M.values()),n.p=9,T=(0,Dn.A)().m(function t(){var e,n,i,o,a,s,u,c,l;return(0,Dn.A)().w(function(t){for(;;)switch(t.n){case 0:e=F.value,n=e.reduce(function(t,e){var n=e.scale;return Xm(t,n)},{}),i=e[0].scaleKey,o=e[0].values,a=Array.from(new Set(o.map(function(t){return t.field}).filter(dG))),s=Xm({guide:{title:0===a.length?void 0:a},field:a[0]},n),u=e[0].name,c=e.flatMap(function(t){return t.values.map(function(t){return t.value})}),l=Object.assign(Object.assign({},K6(u,c,s,d,h,r)),{uid:Symbol("scale"),key:i}),e.forEach(function(t){return t.scale=l});case 1:return t.a(2)}},t)}),S.s();case 10:if((F=S.n()).done){n.n=12;break}return n.d(Vn(T()),11);case 11:n.n=10;break;case 12:n.n=14;break;case 13:n.p=13,I=n.v,S.e(I);case 14:return n.p=14,S.f(),n.f(14);case 15:return n.a(2,p)}},n,null,[[9,13,14,15],[1,6,7,8]])}))}function vlt(t,e,n,r){var i=t.theme,o="string"==typeof e&&i[e]||{};return r(Xm(o,Object.assign({type:e},n)))}function glt(t,e,n){var r,i=v(c3("mark",n),1)[0],o=v(c3("theme",n),1)[0],a=v(c3("labelTransform",n),1)[0],s=e.key,u=e.frame,c=void 0!==u&&u,l=e.theme,A=e.clip,f=e.style,d=void 0===f?{}:f,h=e.labelTransform,p=void 0===h?[]:h,g=o(Plt(l)),y=Array.from(t.values()),b=function(t,e){var n,r,i=e.components,o=void 0===i?[]:i,a=["scale","encode","axis","legend","data","transform"],s=Array.from(new Set(t.flatMap(function(t){return t.channels.map(function(t){return t.scale})}))),u=new Map(s.map(function(t){return[t.name,t]})),c=qn(o);try{for(c.s();!(r=c.n()).done;){var l,A=r.value,f=qn(Y6(A));try{for(f.s();!(l=f.n()).done;){var d=l.value,h=u.get(d),p=(null===(n=A.scale)||void 0===n?void 0:n[d])||{},v=p.independent;if(!h||void 0!==v&&v){var g=Object.assign(Object.assign({},p),{expectedDomain:p.domain,name:d,guide:oS(A,a)});s.push(g)}else{var y=h.guide,m="boolean"==typeof y?{}:y;h.guide=Xm({},m,A),Object.assign(h,p)}}}catch(t){f.e(t)}finally{f.f()}}}catch(t){c.e(t)}finally{c.f()}return s}(y,e),w=function(t){return t.map(function(t){var e=Xm(t,t.style);return delete e.style,e})}(function(t,e,n){var r=e.coordinates,i=void 0===r?[]:r,o=e.title,a=v(c3("component",n),2)[1],s=t.filter(function(t){return null!==t.guide}),u=[],c=function(t,e,n){var r=v(c3("component",n),2)[1],i=t.coordinates;function o(t,e,n,o){var a=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return"x"===t?D6(n)?"".concat(e,"Y"):"".concat(e,"X"):"y"===t?D6(n)?"".concat(e,"X"):"".concat(e,"Y"):null}(e,t,i);if(o&&a){var s=r(a).props,u=s.defaultPosition,c=s.defaultSize,l=s.defaultOrder,A=v(s.defaultCrossPadding,1)[0];return Object.assign(Object.assign({position:u,defaultSize:c,order:l,type:a,crossPadding:A},o),{scales:[n]})}}return e.filter(function(t){return t.slider||t.scrollbar}).flatMap(function(t){var e=t.slider,n=t.scrollbar,r=t.name;return[o("slider",r,t,e),o("scrollbar",r,t,n)]}).filter(function(t){return!!t})}(e,t,n);if(u.push.apply(u,O(c)),o){var l=a("title").props,A=l.defaultPosition,f=l.defaultOrientation,d=l.defaultOrder,h=l.defaultSize,p=l.defaultCrossPadding,g="string"==typeof o?{title:o}:o;u.push(Object.assign({type:"title",position:A,orientation:f,order:d,crossPadding:p[0],defaultSize:h},g))}var y=function(t,e){var n=t.filter(function(t){return function(t){if(!t||!t.type)return!1;if("function"==typeof t.type)return!0;var e=t.type,n=t.domain,r=t.range,i=t.interpolator,o=n&&n.length>0,a=r&&r.length>0;return!!(["linear","sqrt","log","time","pow","threshold","quantize","quantile","ordinal","band","point"].includes(e)&&o&&a)||!(!["sequential"].includes(e)||!o||!a&&!i)||!(!["constant","identity"].includes(e)||!a)}(t)});return[].concat(O(function(t){var e=["shape","size","color","opacity"],n=t.filter(function(t){var n=t.type,r=t.name;return"string"==typeof n&&e.includes(r)&&!function(t,e){return"constant"===t&&"size"===e}(n,r)}),r=n.filter(function(t){return"constant"===t.type}),i=PK(n.filter(function(t){return"constant"!==t.type}),function(t){return t.field?t.field:Symbol("independent")}).map(function(t){var e=v(t,2),n=e[0],i=e[1];return[n,[].concat(O(i),O(r))]}).filter(function(t){return v(t,2)[1].some(function(t){return"constant"!==t.type})}),o=new Map(i);if(0===o.size)return[];var a=function(t){return t.sort(function(t,e){var n=v(t,1)[0],r=v(e,1)[0];return n.localeCompare(r)})},s=Array.from(o).map(function(t){var e,n=function(t){if(1===t.length)return[t];for(var e=[],n=1;n<=t.length;n++)e.push.apply(e,O(eV(t,n)));return e}(v(t,2)[1]).sort(function(t,e){return e.length-t.length}),r=n.map(function(t){return{combination:t,option:t.map(function(t){return[t.name,jct(t)]})}}),i=qn(r);try{for(i.s();!(e=i.n()).done;){var o=e.value,s=o.option,u=o.combination;if(!s.every(function(t){return"constant"===t[1]})&&s.every(function(t){return"discrete"===t[1]||"constant"===t[1]}))return["legendCategory",u]}}catch(t){i.e(t)}finally{i.f()}var c,l=qn(xJ);try{for(l.s();!(c=l.n()).done;){var A,f=v(c.value,2),d=f[0],h=f[1],p=qn(r);try{var g,y=function(){var t=A.value,e=t.option,n=t.combination;if(h.some(function(t){return Xg(a(t),a(e))}))return{v:[d,n]}};for(p.s();!(A=p.n()).done;)if(g=y())return g.v}catch(t){p.e(t)}finally{p.f()}}}catch(t){l.e(t)}finally{l.f()}return null}).filter(dG);return s}(n)),O(function(t,e){return t.map(function(t){var n=t.name;if(function(t){return U6(t,"helix").length>0}(e)||R6(e))return null;if(D6(e)&&(j6(e)||H6(e)))return null;if(n.startsWith("x"))return j6(e)?["axisArc",[t]]:H6(e)?["axisLinear",[t]]:[D6(e)?"axisY":"axisX",[t]];if(n.startsWith("y"))return j6(e)?["axisLinear",[t]]:H6(e)?["axisArc",[t]]:[D6(e)?"axisX":"axisY",[t]];if(n.startsWith("z"))return["axisZ",[t]];if(n.startsWith("position")){if(z6(e))return["axisRadar",[t]];if(!j6(e))return["axisY",[t]]}return null}).filter(dG)}(n,e)))}(s,i);return y.forEach(function(t){var e,n=v(t,2),r=n[0],o=n[1],c=a(r).props,l=c.defaultPosition,A=c.defaultPlane,f=void 0===A?"xy":A,d=c.defaultOrientation,h=c.defaultSize,p=c.defaultOrder,g=c.defaultLength,y=c.defaultPadding,m=void 0===y?[0,0]:y,b=c.defaultCrossPadding,w=void 0===b?[0,0]:b,x=Xm.apply(void 0,[{}].concat(O(o))),E=x.guide,B=x.field,k=qn(Array.isArray(E)?E:[E]);try{for(k.s();!(e=k.n()).done;){var C=e.value,M=v(Rct(r,l,d,C,o,s,i),2),S=M[0],F=M[1];if(S||F){var T="left"===S||"right"===S,P=T?m[1]:m[0],I=T?w[1]:w[0],N=C.size,L=C.order,_=void 0===L?p:L,Q=C.length,U=void 0===Q?g:Q,j=C.padding,D=void 0===j?P:j,R=C.crossPadding,H=void 0===R?I:R;u.push(Object.assign(Object.assign({title:B},C),{defaultSize:h,length:U,position:S,plane:f,orientation:F,padding:D,order:_,crossPadding:H,size:N,type:r,scales:o}))}}}catch(t){k.e(t)}finally{k.f()}}),u}(function(t,e,n){var r,i,o=qn(n.entries());try{for(o.s();!(i=o.n()).done;)if("cell"===v(i.value,1)[0].type)return t.filter(function(t){return"shape"!==t.name})}catch(t){o.e(t)}finally{o.f()}if(1!==e.length||t.some(function(t){return"shape"===t.name}))return t;var a=e[0].defaultShape;if(!["point","line","rect","hollow"].includes(a))return t;var s=(null===(r=t.find(function(t){return"color"===t.name}))||void 0===r?void 0:r.field)||null,u={field:s,name:"shape",type:"constant",domain:[],range:[{point:"point",line:"hyphen",rect:"square",hollow:"hollow"}[a]]};return[].concat(O(t),[u])}(Array.from(b),y,t),e,n)),x=function(t,e,n,r){var i,o,a,s,u=function(t,e,n,r){var i=e.coordinates;if(!j6(i)&&!H6(i))return e;var o=t.filter(function(t){return"string"==typeof t.type&&t.type.startsWith("axis")});if(0===o.length)return e;var a=o.map(function(t){return $ct(t,"axisArc"===t.type?"arc":"linear",n)}),s=Bq(a,function(t){var e;return null!==(e=t.labelSpacing)&&void 0!==e?e:0}),u=Bq(o.flatMap(function(t,e){return Zct(a[e],qct(t,r))}).filter(dG),function(t){return t.height})+s,c=o.flatMap(function(t,e){return Jct(a[e])}).filter(function(t){return null!==t}),l=0===c.length?0:Bq(c,function(t){return t.height}),A=e.inset,f=void 0===A?u:A,d=e.insetLeft,h=void 0===d?f:d,p=e.insetBottom,v=void 0===p?f:p,g=e.insetTop,y=void 0===g?f+l:g,m=e.insetRight,b=void 0===m?f:m;return Object.assign(Object.assign({},e),{insetLeft:h,insetBottom:v,insetTop:y,insetRight:b})}(t,e,n,r),c=u.width,l=u.height,A=u.depth,f=u.x,d=void 0===f?0:f,h=u.y,p=void 0===h?0:h,g=u.z,y=void 0===g?0:g,m=u.inset,b=void 0===m?null!==(i=n.inset)&&void 0!==i?i:0:m,w=u.insetLeft,x=void 0===w?b:w,E=u.insetTop,B=void 0===E?b:E,k=u.insetBottom,O=void 0===k?b:k,C=u.insetRight,M=void 0===C?b:C,S=u.margin,F=void 0===S?null!==(o=n.margin)&&void 0!==o?o:0:S,T=u.marginLeft,P=void 0===T?F:T,I=u.marginBottom,N=void 0===I?F:I,L=u.marginTop,_=void 0===L?F:L,Q=u.marginRight,U=void 0===Q?F:Q,j=u.padding,D=void 0===j?n.padding:j,R=u.paddingBottom,H=void 0===R?D:R,z=u.paddingLeft,K=void 0===z?D:z,G=u.paddingRight,V=void 0===G?D:G,W=u.paddingTop,Y=void 0===W?D:W,X=P===nlt&&"auto"===K,q=U===nlt&&"auto"===V,Z=Gb(e,"coordinates",[]).some(function(t){return"transpose"===t.type}),J=t.find(function(t){return"axisX"===t.type}),$=J||{},tt=$.size,et=$.labelTransform,nt=function(t,n,r,i,o){if(0===e.marks.length)return[i,o];if(t-i-o-.25*t>0)return[i,o];var a=.75*t;return["auto"===n?a*i/(i+o):i,"auto"===r?a*o/(i+o):o]},rt=function(t){return"auto"===t?20:null!=t?t:20},it=rt(Y),ot=rt(H),at=ilt(t,l-it-ot,[it+_,ot+N],["left","right"],e,n,r),st=c-P-U,ut=v(nt(st,K,V,at.paddingLeft,at.paddingRight),2),ct=ut[0],lt=ut[1],At=st-ct-lt,ft=ilt(t,At,[ct+P,lt+U],["bottom","top"],e,n,r),dt=ft.paddingTop,ht=l-N-_,pt=v(nt(ht,H,Y,ft.paddingBottom,dt),2),vt=pt[0],gt=pt[1],yt=ht-vt-gt;if(tt&&!Z&&!et){var mt=J.fontSize,bt=void 0===mt?12:mt,wt=J.fontFamily,xt=void 0===wt?"sans-serif":wt,Et=J.scales,Bt=void 0===Et?[]:Et,kt=null!==(s=null===(a=null==Bt?void 0:Bt[0])||void 0===a?void 0:a.domain)&&void 0!==s?s:[];if(!kt.length)return;var Ot=function(t,e,n,r){var i=YT(e,{fontSize:bt,fontFamily:xt}),o=i/2-n-r;o>0&&(At-=o,"left"===t?ct+=i/2-n:lt+=i/2-n)};X&&Ot("left",function(t){if(Wg(t))return t[0]}(kt),P,ct),q&&Ot("right",IG(kt),U,lt)}return{width:c,height:l,depth:A,insetLeft:x,insetTop:B,insetBottom:O,insetRight:M,innerWidth:At,innerHeight:yt,paddingLeft:ct,paddingRight:lt,paddingTop:gt,paddingBottom:vt,marginLeft:P,marginBottom:N,marginTop:_,marginRight:U,x:d,y:p,z:y}}(w,e,g,n),E=function(t,e,n){var r,i=v(c3("coordinate",n),1)[0],o=t.innerHeight,a=t.innerWidth,s=t.insetLeft,u=t.insetTop,c=t.insetRight,l=t.insetBottom,A=e.coordinates,f=(r=void 0===A?[]:A).find(function(t){return"cartesian"===t.type||"cartesian3D"===t.type})?r:[].concat(O(r),[{type:"cartesian"}]),d="cartesian3D"===f[0].type,h=Object.assign(Object.assign({},t),{x:s,y:u,width:a-s-c,height:o-l-u,transformations:f.flatMap(i)});return d?new L6(h):new P6(h)}(x,e,n),B=c?Xm({mainLineWidth:1,mainStroke:"#000"},d):d;(function(t,e,n){var r,i=TK(t,function(t){return"".concat(t.plane||"xy","-").concat(t.position)}),o=n.paddingLeft,a=n.paddingRight,s=n.paddingTop,u=n.paddingBottom,c=n.marginLeft,l=n.marginTop,A=n.marginBottom,f=n.marginRight,d=n.innerHeight,h=n.innerWidth,p=n.insetBottom,g=n.insetLeft,y=n.insetRight,b=n.insetTop,w=n.height,x=n.width,E=n.depth,B={xy:olt({width:x,height:w,paddingLeft:o,paddingRight:a,paddingTop:s,paddingBottom:u,marginLeft:c,marginTop:l,marginBottom:A,marginRight:f,innerHeight:d,innerWidth:h,insetBottom:p,insetLeft:g,insetRight:y,insetTop:b}),yz:olt({width:E,height:w,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,marginLeft:0,marginTop:0,marginBottom:0,marginRight:0,innerWidth:E,innerHeight:w,insetBottom:0,insetLeft:0,insetRight:0,insetTop:0}),xz:olt({width:x,height:E,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,marginLeft:0,marginTop:0,marginBottom:0,marginRight:0,innerWidth:x,innerHeight:E,insetBottom:0,insetLeft:0,insetRight:0,insetTop:0})},k=qn(i.entries());try{var O=function(){var t=v(r.value,2),n=t[0],i=t[1],o=v(n.split("-"),2),a=o[0],s=o[1],u=B[a][s],c=v(tV(i,function(t){return"string"==typeof t.type&&("center"===s||!(!t.type.startsWith("axis")||!["inner","outer"].includes(s)))}),2),l=c[0],A=c[1];l.length&&function(t,e,n,r){var i=v(tV(t,function(t){return!("string"!=typeof t.type||!t.type.startsWith("axis"))}),2),o=i[0],a=i[1];(function(t,e,n,r){"center"===r?function(t){return bK(t)&&gK(t)}(e)?function(t,e,n){var r,i=v(n,4),o=i[0],a=i[1],s=i[2],u=i[3],c=qn(t);try{for(c.s();!(r=c.n()).done;){var l=r.value;l.bbox={x:o,y:a,width:s,height:u},l.radar={index:t.indexOf(l),count:t.length}}}catch(t){c.e(t)}finally{c.f()}}(t,0,n):gK(e)?function(t,e,n){var r,i=v(n,4),o=i[0],a=i[1],s=i[2],u=i[3],c=qn(t);try{for(c.s();!(r=c.n()).done;)r.value.bbox={x:o,y:a,width:s,height:u}}catch(t){c.e(t)}finally{c.f()}}(t,0,n):bK(e)&&function(t,e,n,r){"horizontal"===r?function(t,e,n){for(var r=v(n,3),i=r[0],o=r[1],a=r[2],s=new Array(t.length).fill(0),u=e.map(s).filter(function(t,e){return e%2==1}).map(function(t){return t+o}),c=0;c<t.length;c++){var l=t[c],A=u[c],f=u[c+1]-A;l.bbox={x:i,y:A,width:a,height:f}}}(t,e,n):"vertical"===r&&function(t,e,n){for(var r=v(n,4),i=r[0],o=r[1],a=r[3],s=new Array(t.length).fill(0),u=e.map(s).filter(function(t,e){return e%2==0}).map(function(t){return t+i}),c=0;c<t.length;c++){var l=t[c],A=u[c],f=u[c+1]-A;l.bbox={x:A,y:o,width:f,height:a}}}(t,e,n)}(t,e,n,t[0].orientation):"inner"===r?function(t,e,n){for(var r=v(n,4),i=r[0],o=r[1],a=r[3],s=v(e.getCenter(),2),u=s[0],c=s[1],l=v(EK(e),1)[0]*(a/2),A=u-l,f=c-l,d=0;d<t.length;d++)t[d].bbox={x:i+A,y:o+f,width:2*l,height:2*l}}(t,e,n):"outer"===r&&function(t,e,n){var r,i=v(n,4),o=i[0],a=i[1],s=i[2],u=i[3],c=qn(t);try{for(c.s();!(r=c.n()).done;)r.value.bbox={x:o,y:a,width:s,height:u}}catch(t){c.e(t)}finally{c.f()}}(t,0,n)})(o,e,n,r),function(t,e,n){if(0!==t.length)for(var r=v(n,4),i=r[0],o=r[1],a=r[2],s=r[3],u=s/2*v(EK(e),1)[0]/Math.sqrt(2),c=i+a/2,l=o+s/2,A=0;A<t.length;A++)t[A].bbox={x:c-u,y:l-u,width:2*u,height:2*u}}(a,e,n)}(l,e,u,s),A.length&&function(t,e,n){var r=v(n,9),i=r[0],o=r[1],a=r[2],s=r[3],u=r[4],c=r[5],l=r[6],A=r[7],f=r[8],d=v("vertical"===u?["y",o,"x",i,"height",s,"width",a]:["x",i,"y",o,"width",a,"height",s],8),h=d[0],p=d[1],g=d[2],y=d[3],b=d[4],w=d[5],x=d[6],E=d[7];t.sort(function(t,e){return null==l?void 0:l(t.order,e.order)});for(var B=function(t){return"title"===t||"group"===t||t.startsWith("legend")},k=function(t,e,n){return void 0===n?e:B(t)?n:e},O=function(t,e,n){return void 0===n?e:B(t)?n:e},C=0,M=c?p+w:p;C<t.length;C++){var S=t[C],F=S.crossPadding,T=void 0===F?0:F,P=S.type,I=S.size;S.bbox=m(m(m(m({},h,c?M-I-T:M+T),g,O(P,y,A)),b,I),x,k(P,E,f)),M+=(I+T)*(c?-1:1)}var N,L=t.filter(function(t){return"group"===t.type}),_=qn(L);try{var Q=function(){for(var t=N.value,e=t.bbox,n=t.children,r=e[x],i=r/n.length,o=n.reduce(function(t,e){var n;return(null===(n=e.layout)||void 0===n?void 0:n.justifyContent)||t},"flex-start"),a=n.map(function(t,e){var r=t.length,o=void 0===r?i:r,a=t.padding,s=void 0===a?0:a;return o+(e===n.length-1?0:s)}),s=r-$tt(a),u="flex-start"===o?0:"center"===o?s/2:s,c=0,l=e[g]+u;c<n.length;c++){var A=n[c],f=A.padding,d=void 0===f?0:f,p=c===n.length-1?0:d;A.bbox=m(m(m(m({},b,e[b]),h,e[h]),g,l),x,a[c]-p),Xm(A,{layout:{justifyContent:o}}),l+=a[c]}};for(_.s();!(N=_.n()).done;)Q()}catch(t){_.e(t)}finally{_.f()}}(i,0,u)};for(k.s();!(r=k.n()).done;)O()}catch(t){k.e(t)}finally{k.f()}})(Uct(w),E,x),function(t){var e=t.find(function(t){return"axisX"===t.type}),n=t.find(function(t){return"axisY"===t.type}),r=t.find(function(t){return"axisZ"===t.type});e&&n&&r&&(e.plane="xy",n.plane="xy",r.plane="yz",r.origin=[e.bbox.x,e.bbox.y,0],r.eulerAngles=[0,-90,0],r.bbox.x=e.bbox.x,r.bbox.y=e.bbox.y,t.push(Object.assign(Object.assign({},e),{plane:"xz",showLabel:!1,showTitle:!1,origin:[e.bbox.x,e.bbox.y,0],eulerAngles:[-90,0,0]})),t.push(Object.assign(Object.assign({},n),{plane:"yz",showLabel:!1,showTitle:!1,origin:[n.bbox.x+n.bbox.width,n.bbox.y,0],eulerAngles:[0,-90,0]})),t.push(Object.assign(Object.assign({},r),{plane:"xz",actualPosition:"left",showLabel:!1,showTitle:!1,eulerAngles:[90,-90,0]})))}(w);var k=new Map(Array.from(t.values()).flatMap(function(t){return t.channels.map(function(t){var e=t.scale;return[e.uid,V6(e,n)]})}));!function(t,e){var n=Array.from(t.values()).flatMap(function(t){return t.channels}),r=NK(n,function(t){return t.map(function(t){return e.get(t.scale.uid)})},function(t){return t.name}).filter(function(t){var e=v(t,2)[1];return e.some(function(t){return"function"==typeof t.getOptions().groupTransform})&&e.every(function(t){return t.getTicks})}).map(function(t){return t[1]});r.forEach(function(t){var e=t.map(function(t){return t.getOptions().groupTransform})[0];e(t)})}(t,k);var C,M={},S=qn(w);try{for(S.s();!(C=S.n()).done;){var F,T=C.value,P=T.scales,I=[],N=qn(void 0===P?[]:P);try{for(N.s();!(F=N.n()).done;){var L=F.value,_=L.name,Q=L.uid,U=null!==(r=k.get(Q))&&void 0!==r?r:V6(L,n);I.push(U),"y"===_&&U.update(Object.assign(Object.assign({},U.getOptions()),{xScale:M.x})),G6(M,m({},_,U))}}catch(t){N.e(t)}finally{N.f()}T.scaleInstances=I}}catch(t){S.e(t)}finally{S.f()}var j,D=[],R=new Map,H=qn(t.entries());try{var z=function(){var t=v(j.value,2),e=t[0],n=t[1],r=e.children,o=e.dataDomain,a=e.modifier,u=e.key,c=e.data;R.set(u,c);var l=n.index,A=n.channels,f=n.tooltip,d=qG(Object.fromEntries(A.map(function(t){return[t.name,t.scale]})),function(t){var e=t.uid;return k.get(e)});G6(M,d);var h=function(t,e){var n,r={},i=qn(t);try{var o=function(){var t,i=n.value,o=i.values,a=i.name,s=e[a],u=qn(o);try{for(u.s();!(t=u.n()).done;){var c=t.value,l=c.name,A=c.value;r[l]=A.map(function(t){return s.map(t)})}}catch(t){u.e(t)}finally{u.f()}};for(i.s();!(n=i.n()).done;)o()}catch(t){i.e(t)}finally{i.f()}return r}(A,d),p=function(t){var e=v(t,3),n=e[0],r=e[1],i=e[2];if(i)return[n,r,i];for(var o=[],a=[],s=0;s<n.length;s++){var u=n[s],c=r[s];c.every(function(t){var e=v(t,2),n=e[0],r=e[1];return dG(n)&&dG(r)})&&(o.push(u),a.push(c))}return[o,a]}(i(e)(l,d,h,E)),g=v(p,3),y=g[0],m=g[1],b=g[2],w=o||y.length,B=a?a(m,w,x):[],C=function(t){var e,n;return null===(n=null===(e=f.title)||void 0===e?void 0:e[t])||void 0===n?void 0:n.value},S=function(t){return f.items.map(function(e){return e[t]})},F=y.map(function(t,e){for(var n=Object.assign({points:m[e],transform:B[e],index:t,markKey:u,viewKey:s,data:c[t]},f&&{title:C(t),items:S(t)}),r=function(){var r=v(o[i],2),a=r[0],s=r[1];n[a]=s[t],b&&(n["series".concat(Gg(a))]=b[e].map(function(t){return s[t]}))},i=0,o=Object.entries(h);i<o.length;i++)r();return b&&(n.seriesIndex=b[e]),b&&f&&(n.seriesItems=b[e].map(function(t){return S(t)}),n.seriesTitle=b[e].map(function(t){return C(t)})),n});n.data=F,n.index=y;var T=null==r?void 0:r(F,d,x);D.push.apply(D,O(T||[]))};for(H.s();!(j=H.n()).done;)z()}catch(t){H.e(t)}finally{H.f()}return[{layout:x,theme:g,coordinate:E,markState:t,key:s,clip:A,scale:M,style:B,components:w,data:R,options:e,labelTransform:uG(p.map(a))},D]}function ylt(t,e,n,r){return alt(this,void 0,void 0,(0,Dn.A)().m(function i(){var o,a,s,u,c,l,A,f,d,h,p,g,y,m,b,w,x,E,B,k,C,M,S,F,T,P,I,N,L,_,Q,U,j,D;return(0,Dn.A)().w(function(i){for(;;)switch(i.p=i.n){case 0:o=r.library,a=t.components,s=t.theme,u=t.layout,c=t.markState,l=t.coordinate,A=t.key,f=t.style,d=t.clip,h=t.scale,u.x,u.y,p=u.width,g=u.height,y=slt(u,["x","y","width","height"]),b=(m=["view","plot","main","content"]).map(function(t,e){return e}),w=["a","margin","padding","inset"],x=m.map(function(t){return pG(Object.assign({},s.view,f),t)}),E=w.map(function(t){return hG(y,t)}),B=function(t){return t.style("x",function(t){return F[t].x}).style("y",function(t){return F[t].y}).style("width",function(t){return F[t].width}).style("height",function(t){return F[t].height}).each(function(t,e,n){Dlt(wG(n),x[t])})},k=0,C=0,M=p,S=g,F=b.map(function(t){var e=E[t],n=e.left,r=void 0===n?0:n,i=e.top,o=void 0===i?0:i,a=e.bottom,s=void 0===a?0:a,u=e.right;return{x:k+=r,y:C+=o,width:M-=r+(void 0===u?0:u),height:S-=o+s}}),e.selectAll(Ult(S$)).data(b.filter(function(t){return dG(x[t])}),function(t){return m[t]}).join(function(t){return t.append("rect").attr("className",S$).style("zIndex",-2).call(B)},function(t){return t.call(B)},function(t){return t.remove()}),T=xlt(c),P=!!T&&{duration:T[1]},I=qn(PK(a,function(t){return"".concat(t.type,"-").concat(t.position)}));try{for(I.s();!(N=I.n()).done;)v(N.value,2)[1].forEach(function(t,e){return t.index=e})}catch(t){I.e(t)}finally{I.f()}L=e.selectAll(Ult(C$)).data(a,function(t){return"".concat(t.type,"-").concat(t.position,"-").concat(t.index)}).join(function(t){return t.append("g").style("zIndex",function(t){return t.zIndex||-1}).attr("className",C$).append(function(t){return Qct(Xm({animate:P,scale:h},t),l,s,o,c)})},function(t){return t.transition(function(t,e,n){var r=t.preserve;if(void 0===r||!r){var i=Qct(Xm({animate:P,scale:h},t),l,s,o,c).attributes;return v(n.childNodes,1)[0].update(i,!1)}})}).transitions(),n.push.apply(n,O(L.flat().filter(dG))),_=e.selectAll(Ult(O$)).data([u],function(){return A}).join(function(t){return t.append("rect").style("zIndex",0).style("fill","transparent").attr("className",O$).call(Llt).call(Qlt,Array.from(c.keys())).call(jlt,d)},function(t){return t.call(Qlt,Array.from(c.keys())).call(Llt).call(jlt,d)}).transitions(),n.push.apply(n,O(_.flat())),Q=qn(c.entries()),i.p=1,j=(0,Dn.A)().m(function i(){var a,s,u,c,l,A,f,d,h,p,g,y,m,b;return(0,Dn.A)().w(function(i){for(;;)switch(i.n){case 0:a=v(U.value,2),s=a[0],u=a[1],c=u.data,l=s.key,A=s.class,f=s.type,d=e.select("#".concat(l)),h=klt(s,u,t,r),p=Mlt(s,u,t,o),g=Flt(s,u,t,o),y=Tlt(s,u,t,o),m=Elt(e,d,A,"element"),b=d.selectAll(Ult(B$)).selectFacetAll(m).data(c,function(t){return t.key},function(t){return t.groupKey}).join(function(t){return t.append(h).attr("className",B$).attr("markType",f).transition(function(t,e,n){return p(t,[n])})},function(t){return t.call(function(t){var e,n,r=t.parent(),i=(e=function(t){var e=v(t.getBounds().min,2);return[e[0],e[1]]},n=new Map,function(t){if(n.has(t))return n.get(t);var r=e(t);return n.set(t,r),r});t.transition(function(t,e,n){Blt(n,r,i);var o=h(t,e),a=g(t,[n],[o]);return(null==a?void 0:a.length)||(n.nodeName===o.nodeName&&"g"!==o.nodeName?fG(n,o):(n.parentNode.replaceChild(o,n),o.className=B$,o.markType=f,o.__data__=n.__data__)),a}).each(function(t,e,n){n.__removed__&&(n.__removed__=!1)}).attr("markType",f).attr("className",B$)})},function(t){return t.each(function(t,e,n){n.__removed__=!0}).transition(function(t,e,n){return y(t,[n])}).remove()},function(t){return t.append(h).attr("className",B$).attr("markType",f).transition(function(t,e,n){var r=n.__fromElements__,i=g(t,r,[n]);return new xG(r,null,n.parentNode).transition(i).remove(),i})},function(t){return t.transition(function(t,e,n){var r=new xG([],n.__toData__,n.parentNode).append(h).attr("className",B$).attr("markType",f).nodes();return g(t,[n],r)}).remove()}).transitions(),n.push.apply(n,O(b.flat()));case 1:return i.a(2)}},i)}),Q.s();case 2:if((U=Q.n()).done){i.n=4;break}return i.d(Vn(j()),3);case 3:i.n=2;break;case 4:i.n=6;break;case 5:i.p=5,D=i.v,Q.e(D);case 6:return i.p=6,Q.f(),i.f(6);case 7:mlt(t,e,0,o,r),blt(t,e,o,r);case 8:return i.a(2)}},i,null,[[1,5,6,7]])}))}function mlt(t,e,n,r,i){var o,a=v(c3("labelTransform",r),1)[0],s=t.markState,u=t.labelTransform,c=e.select(Ult(E$)).node(),l=new Map,A=new Map,f=Array.from(s.entries()).flatMap(function(n){var o=v(n,2),a=o[0],s=o[1],u=a.labels,c=void 0===u?[]:u,f=a.key,d=function(t,e,n,r,i){var o=v(c3("shape",r),1)[0],a=t.data,s=t.encode,u=e.data,c=e.defaultLabelShape,l=u.map(function(t){return t.points}),A=qG(s,function(t){return t.value}),f=n.theme,d=n.coordinate,h=Object.assign(Object.assign({},i),{document:l3(i),theme:f,coordinate:d});return function(t){var e=t.index,n=t.points,r=a[e],i=t.formatter,s=void 0===i?function(t){return"".concat(t)}:i,u=(t.transform,t.style),d=t.render,p=(t.selector,t.element),v=slt(t,["formatter","transform","style","render","selector","element"]),g=qG(Object.assign(Object.assign({},v),u),function(t){return wlt(t,r,e,a,{channel:A,element:p})}),y=g.shape,m=void 0===y?c:y,b=g.text,w=slt(g,["shape","text"]),x="string"==typeof s?HJ(s):s,E=Object.assign(Object.assign({},w),{text:x(b,r,e,a),datum:r}),B=Object.assign({type:"label.".concat(m),render:d},w);return o(B,h)(n,E,Olt(f,"label",m,"label"),l)}}(a,s,t,r,i),h=e.select("#".concat(f)).selectAll(Ult(B$)).nodes().filter(function(t){var e;return!t.__removed__&&!("hidden"===(null===(e=t.style)||void 0===e?void 0:e.visibility)||t.children&&t.children.some(function(t){var e;return"hidden"===(null===(e=t.style)||void 0===e?void 0:e.visibility)}))});return c.flatMap(function(t,e){t.transform;var n=slt(t,["transform"]);return h.flatMap(function(r){var i=function(t,e,n){var r=n.__data__,i=r.seriesIndex,o=r.seriesKey,a=r.points,s=r.key,u=r.index,c=function(t){var e=t.cloneNode(!0),n=t.getAnimations();e.style.visibility="hidden",n.forEach(function(t){var n=t.effect.getKeyframes();e.attr(n[n.length-1])}),t.parentNode.appendChild(e);var r=e.getLocalBounds();return e.destroy(),[r.min,r.max]}(n);if(!i)return[Object.assign(Object.assign({},t),{key:"".concat(s,"-").concat(e),bounds:c,index:u,points:a,dependentElement:n})];var l=function(t){var e=t.selector;if(!e)return null;if("function"==typeof e)return e;if("first"===e)return function(t){return[t[0]]};if("last"===e)return function(t){return[t[t.length-1]]};throw new Error("Unknown selector: ".concat(e))}(t),A=i.map(function(r,i){return Object.assign(Object.assign({},t),{key:"".concat(o[i],"-").concat(e),bounds:[a[i]],index:r,points:a,dependentElement:n})});return l?l(A):A}(n,e,r);return i.forEach(function(e){l.set(e,function(t){return d(Object.assign(Object.assign({},t),{element:r}))}),A.set(e,t)}),i})})}),d=wG(c).selectAll(Ult(M$)).data(f,function(t){return t.key}).join(function(t){return t.append(function(t){return l.get(t)(t)}).attr("className",M$)},function(t){return t.each(function(t,e,n){fG(n,l.get(t)(t))})},function(t){return t.remove()}).nodes(),h=TK(d,function(t){return A.get(t.__data__)}),p=t.coordinate,g=t.layout,y={canvas:i.canvas,coordinate:p,layout:g},m=qn(h);try{for(m.s();!(o=m.n()).done;){var b=v(o.value,2),w=b[0],x=b[1],E=w.transform;uG((void 0===E?[]:E).map(a))(x,y)}}catch(t){m.e(t)}finally{m.f()}u&&u(d,y)}function blt(t,e,n,r){var i=t.scale,o=Gb(i,"y.options.breaks",[]),a=r.canvas.document;if([T$,P$].forEach(function(t){a.getElementsByClassName(t).forEach(function(t){t.remove()})}),o.length){var s=e.select(Ult(O$)).node(),u=v(c3("shape",n),1)[0],c=new Map;o.forEach(function(n,i){c.set(n,u({type:"break"},{view:t,selection:e,context:r}))}),wG(s).selectAll(Ult(T$)).data(o,function(t){return t.key}).join(function(t){return t.append(function(t,e){return c.get(t)(t,e)}).attr("className",T$)},function(t){return t.each(function(t,e,n){fG(n,c.get(t)(t,e))})},function(t){return t.remove()}).nodes()}}function wlt(t,e,n,r,i){return"function"==typeof t?t(e,n,r,i):"string"!=typeof t?t:yG(e)&&void 0!==e[t]?e[t]:t}function xlt(t){var e,n=-1/0,r=1/0,i=qn(t);try{for(i.s();!(e=i.n()).done;){var o,a=v(e.value,2),s=a[0],u=a[1],c=s.animate,l=void 0===c?{}:c,A=u.data,f=l.enter,d=void 0===f?{}:f,h=l.update,p=void 0===h?{}:h,g=l.exit,y=void 0===g?{}:g,m=p.type,b=p.duration,w=void 0===b?300:b,x=p.delay,E=void 0===x?0:x,B=d.type,k=d.duration,O=void 0===k?300:k,C=d.delay,M=void 0===C?0:C,S=y.type,F=y.duration,T=void 0===F?300:F,P=y.delay,I=void 0===P?0:P,N=qn(A);try{for(N.s();!(o=N.n()).done;){var L=o.value,_=L.updateType,Q=void 0===_?m:_,U=L.updateDuration,j=void 0===U?w:U,D=L.updateDelay,R=void 0===D?E:D,H=L.enterType,z=void 0===H?B:H,K=L.enterDuration,G=void 0===K?O:K,V=L.enterDelay,W=void 0===V?M:V,Y=L.exitDuration,X=void 0===Y?T:Y,q=L.exitDelay,Z=void 0===q?I:q,J=L.exitType,$=void 0===J?S:J;(void 0===Q||Q)&&(n=Math.max(n,j+R),r=Math.min(r,R)),(void 0===$||$)&&(n=Math.max(n,X+Z),r=Math.min(r,Z)),(void 0===z||z)&&(n=Math.max(n,G+W),r=Math.min(r,W))}}catch(t){N.e(t)}finally{N.f()}}}catch(t){i.e(t)}finally{i.f()}return n===-1/0?null:[r,n-r]}function Elt(t,e,n,r){var i=t.node().parentElement;return i&&"function"==typeof i.findAll?i.findAll(function(t){return void 0!==t.style.facet&&t.style.facet===n&&t!==e.node()}).flatMap(function(t){return t.getElementsByClassName(r)}):[]}function Blt(t,e,n){if(t.__facet__){var r=t.parentNode.parentNode,i=e.parentNode,o=v(n(r),2),a=o[0],s=o[1],u=v(n(i),2),c=u[0],l=u[1];!function(t,e){var n=t.style.transform,r=function(t){return"none"===t||void 0===t}(n)?"":n;t.style.transform="".concat(r," ").concat(e).trimStart()}(t,"translate(".concat(a-c,", ").concat(s-l,")")),e.append(t)}}function klt(t,e,n,r){var i=v(c3("shape",r.library),1)[0],o=t.data,a=t.encode,s=e.defaultShape,u=e.data,c=e.shape,l=qG(a,function(t){return t.value}),A=u.map(function(t){return t.points}),f=n.theme,d=n.coordinate,h=t.type,p=t.style,g=void 0===p?{}:p,y=Object.assign(Object.assign({},r),{document:l3(r),coordinate:d,theme:f});return function(e){var n=g.shape,r=void 0===n?s:n,a=e.shape,u=void 0===a?r:a,d=e.points,p=e.seriesIndex,v=e.index,m=slt(e,["shape","points","seriesIndex","index"]),b=Object.assign(Object.assign({},m),{index:v}),w=p?p.map(function(t){return o[t]}):o[v],x=p||v,E=qG(g,function(t){return wlt(t,w,x,o,{channel:l})});return(c[u]?c[u](E,y):i(Object.assign(Object.assign({},E),{type:_lt(t,u)}),y))(d,b,Olt(f,h,u,s),A)}}function Olt(t,e,n,r){if("string"==typeof e){var i=t.color,o=t[e]||{},a=o[n]||o[r];return Object.assign({color:i},a)}}function Clt(t,e,n,r,i){var o,a,s=v(c3("shape",i),2)[1],u=v(c3("animation",i),1)[0],c=n.defaultShape,l=n.shape,A=r.theme,f=r.coordinate,d=Gg(t),h="default".concat(d,"Animation"),p=((null===(o=l[c])||void 0===o?void 0:o.props)||s(_lt(e,c)).props)[h],g=A[t],y=void 0===g?{}:g,m=(null===(a=e.animate)||void 0===a?void 0:a[t])||{},b={coordinate:f};return function(e,n,r){var i=e["".concat(t,"Type")],o=e["".concat(t,"Delay")],a=e["".concat(t,"Duration")],s=e["".concat(t,"Easing")],c=Object.assign({type:i||p},m);if(!c.type)return null;var l=u(c,b)(n,r,Xm(y,{delay:o,duration:a,easing:s}));return(Array.isArray(l)?l:[l]).filter(Boolean)}}function Mlt(t,e,n,r){return Clt("enter",t,e,n,r)}function Slt(t){return t.finished.then(function(){t.cancel()}),t}function Flt(t,e,n,r){return Clt("update",t,e,n,r)}function Tlt(t,e,n,r){return Clt("exit",t,e,n,r)}function Plt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("string"==typeof t)return{type:t};var e=t.type,n=void 0===e?"light":e,r=slt(t,["type"]);return Object.assign(Object.assign({},r),{type:n})}function Ilt(t){var e=t.interaction,n=void 0===e?{}:e;return Object.entries(Xm({event:!0,tooltip:!0,sliderFilter:!0,legendFilter:!0,scrollbarFilter:!0},n)).reverse()}function Nlt(t,e){return alt(this,void 0,void 0,(0,Dn.A)().m(function n(){var r,i,o,a,s;return(0,Dn.A)().w(function(n){for(;;)switch(n.n){case 0:if(r=t.data,i=slt(t,["data"]),null!=r){n.n=1;break}return n.a(2,t);case 1:return n.n=2,l8([],{data:r},e);case 2:return o=n.v,a=v(o,2),s=a[1].data,n.a(2,Object.assign({data:s},i))}},n)}))}function Llt(t){t.style("transform",function(t){return"translate(".concat(t.paddingLeft+t.marginLeft,", ").concat(t.paddingTop+t.marginTop,")")}).style("width",function(t){return t.innerWidth}).style("height",function(t){return t.innerHeight})}function _lt(t,e){var n=t.type;return"string"==typeof e?"".concat(n,".").concat(e):e}function Qlt(t,e){var n=function(t){return void 0!==t.class?"".concat(t.class):""};0!==t.nodes().length&&(t.selectAll(Ult(x$)).data(e,function(t){return t.key}).join(function(t){return t.append("g").attr("className",x$).attr("id",function(t){return t.key}).style("facet",n).style("fill","transparent").style("zIndex",function(t){var e;return null!==(e=t.zIndex)&&void 0!==e?e:0})},function(t){return t.style("facet",n).style("fill","transparent").style("zIndex",function(t){var e;return null!==(e=t.zIndex)&&void 0!==e?e:0})},function(t){return t.remove()}),t.select(Ult(E$)).node()||t.append("g").attr("className",E$).style("zIndex",0))}function Ult(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.map(function(t){return".".concat(t)}).join("")}function jlt(t,e){t.node()&&t.style("clipPath",function(t){if(!e)return null;var n=t.paddingTop,r=t.paddingLeft,i=t.marginLeft,o=t.marginTop,a=t.innerWidth,s=t.innerHeight;return new Yu({style:{x:r+i,y:n+o,width:a,height:s}})})}function Dlt(t,e){for(var n=0,r=Object.entries(e);n<r.length;n++){var i=v(r[n],2),o=i[0],a=i[1];t.style(o,a)}}function Rlt(t){var e=t.style,n=t.scale,r=t.type,i={},o=Gb(e,"columnWidthRatio");return o&&"interval"===r&&(i.x=Object.assign(Object.assign({},null==n?void 0:n.x),{padding:1-o})),Object.assign(Object.assign({},t),{scale:Object.assign(Object.assign({},n),i)})}var Hlt=function(t){if(!t||"string"!=typeof t)return t;var e=t.endsWith("%")?parseFloat(t.slice(0,-1))/100:parseFloat(t);if(isNaN(e)||e<0||e>1)throw new Error("Invalid gap value: ".concat(t,". It should be between 0 and 1."));return e};function zlt(t){var e=t.axis,n=Gb(e,"y.breaks");return n&&Vb(t,"scale.y.breaks",n.map(function(t){return Object.assign(Object.assign({key:"break-".concat(t.start,"-").concat(t.end)},t),{gap:Hlt(t.gap)})})),t}function Klt(t){var e=function(t){return function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduce(function(t,e){return e(t)},t)}}(Rlt,zlt)(t)}(t);return e.children&&Array.isArray(e.children)&&(e.children=e.children.map(function(t){return Klt(t)})),e}function Glt(t){for(var e=Xm({},t),n=new Map([[e,null]]),r=new Map([[null,-1]]),i=[e];i.length;){var o=i.shift();if(void 0===o.key){var a=n.get(o),s=r.get(o),u=null===a?"".concat(0):"".concat(a.key,"-").concat(s);o.key=u}var c=o.children,l=void 0===c?[]:c;if(Array.isArray(l))for(var A=0;A<l.length;A++){var f=Xm({},l[A]);l[A]=f,n.set(f,o),r.set(f,A),i.push(f)}}return e}function Vlt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(t){throw t},i=Tct(t),o=i.width,a=void 0===o?640:o,s=i.height,u=void 0===s?480:s,c=i.depth,l=void 0===c?0:c,A=Glt(Klt(i)),f=e.canvas,d=void 0===f?function(t,e){var n=new Lx;return n.registerPlugin(new U_),new Ac({width:t,height:e,container:document.createElement("div"),renderer:n})}(a,u):f,h=e.emitter,p=void 0===h?new gB:h;e.library,e.canvas=d,e.emitter=p,e.externals={};var g=d.getConfig(),y=g.width,m=g.height;y===a&&m===u||d.resize(a,u),p.emit(o3.BEFORE_RENDER);var b,w=wG(d.document.documentElement);return d.ready.then(function(){return ult(Object.assign(Object.assign({},A),{width:a,height:u,depth:l}),w,e)}).then(function(){if(l){var t=v(d.document.documentElement.getPosition(),2),e=t[0],r=t[1];d.document.documentElement.setPosition(e,r,-l/2)}d.requestAnimationFrame(function(){d.requestAnimationFrame(function(){p.emit(o3.AFTER_RENDER),null==n||n()})})}).catch(function(t){null==r||r(t)}),"string"==typeof(b=d.getConfig().container)?document.getElementById(b):b}function Wlt(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(t){throw t},o=t.width,a=void 0===o?640:o,s=t.height,u=void 0===s?480:s,c=Glt(t),l=n.group,A=void 0===l?new _u:l,f=n.emitter,d=void 0===f?new gB:f;n.library,(null==A?void 0:A.parentElement)||AG("renderToMountedElement can't render chart to unmounted group.");var h=wG(A);return n.group=A,n.emitter=d,n.externals={},n.canvas=n.canvas||(null===(e=null==A?void 0:A.ownerDocument)||void 0===e?void 0:e.defaultView),d.emit(o3.BEFORE_RENDER),ult(Object.assign(Object.assign({},c),{width:a,height:u}),h,n).then(function(){var t;null===(t=n.canvas)||void 0===t||t.requestAnimationFrame(function(){d.emit(o3.AFTER_RENDER),null==r||r()})}).catch(function(t){null==i||i(t)}),A}function Ylt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=e.canvas,o=e.emitter;i&&(function(t){var e=t.getRoot().querySelectorAll(".".concat(k$));null==e||e.forEach(function(t){var e=t.nameInteraction,n=void 0===e?new Map:e;(null==n?void 0:n.size)>0&&Array.from(null==n?void 0:n.values()).forEach(function(t){null==t||t.destroy()})})}(i),n?i.destroy():i.destroyChildren()),r&&o.off()}var Xlt=function(t){return t?parseInt(t):0};function qlt(t,e){for(var n=[t];n.length;){var r=n.shift();e&&e(r);var i,o=qn(r.children||[]);try{for(o.s();!(i=o.n()).done;){var a=i.value;n.push(a)}}catch(t){o.e(t)}finally{o.f()}}}var Zlt=function(){return B(function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;x(this,t),this.parentNode=null,this.children=[],this.index=0,this.type=n,this.value=e},[{key:"map",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(t){return t})(this.value);return this.value=t,this}},{key:"attr",value:function(t,e){return 1===arguments.length?this.value[t]:this.map(function(n){return n[t]=e,n})}},{key:"append",value:function(t){var e=new t({});return e.children=[],this.push(e),e}},{key:"push",value:function(t){return t.parentNode=this,t.index=this.children.length,this.children.push(t),this}},{key:"remove",value:function(){var t=this,e=this.parentNode;if(e){var n=e.children,r=n.findIndex(function(e){return e===t});n.splice(r,1)}return this}},{key:"getNodeByKey",value:function(t){var e=null;return qlt(this,function(n){t===n.attr("key")&&(e=n)}),e}},{key:"getNodesByType",value:function(t){var e=[];return qlt(this,function(n){t===n.type&&e.push(n)}),e}},{key:"getNodeByType",value:function(t){var e=null;return qlt(this,function(n){e||t===n.type&&(e=n)}),e}},{key:"call",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.apply(void 0,[this.map()].concat(n)),this}},{key:"getRoot",value:function(){for(var t=this;t&&t.parentNode;)t=t.parentNode;return t}}])}(),Jlt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},$lt=["width","height","depth","padding","paddingLeft","paddingRight","paddingBottom","paddingTop","inset","insetLeft","insetRight","insetTop","insetBottom","margin","marginLeft","marginRight","marginTop","marginBottom","autoFit","theme","title","interaction"],tAt="__remove__",eAt="__callback__";function nAt(t){return Object.assign(Object.assign({},t.value),{type:t.type})}function rAt(t,e){var n=t.width,r=t.height,i=t.autoFit,o=t.depth,a=void 0===o?0:o,s=640,u=480;if(i){var c=function(t){var e=getComputedStyle(t),n=t.clientWidth||Xlt(e.width),r=t.clientHeight||Xlt(e.height);return{width:n-(Xlt(e.paddingLeft)+Xlt(e.paddingRight)),height:r-(Xlt(e.paddingTop)+Xlt(e.paddingBottom))}}(e);s=c.width||s,u=c.height||u}return s=n||s,u=r||u,{width:Math.max(de(s)?s:1,1),height:Math.max(de(u)?u:1,1),depth:a}}function iAt(t,e,n,r,i){var o=t.type,a=e.type,s=void 0===a?n||o:a;if(function(t,e){return"function"!=typeof t&&new Set(Object.keys(e)).has(t)}(s,i)){var u,c=qn($lt);try{for(c.s();!(u=c.n()).done;){var l=u.value;void 0!==t.attr(l)&&void 0===e[l]&&(e[l]=t.attr(l))}}catch(t){c.e(t)}finally{c.f()}return e}if(function(t,e){return"function"==typeof t||new Set(Object.keys(e)).has(t)}(s,r)){var A,f={type:"view"},d=Object.assign({},e),h=qn($lt);try{for(h.s();!(A=h.n()).done;){var p=A.value;void 0!==d[p]&&(f[p]=d[p],delete d[p])}}catch(t){h.e(t)}finally{h.f()}return Object.assign(Object.assign({},f),{children:[d]})}return e}function oAt(t,e,n){if("function"==typeof t){var r=new Zlt;return r.value=t,r.type=eAt,r}var i=t.type,o=(t.children,Jlt(t,["type","children"])),a=function(t,e,n){if("function"==typeof t)return e.mark;var r=Object.assign(Object.assign({},e),n)[t];if(!r)throw new Error("Unknown mark: ".concat(t,"."));return r}(i,e,n),s=new a;return s.value=o,s.type=i,s}function aAt(t,e){var n=e.type,r=(e.children,Jlt(e,["type","children"]));t.type===n||void 0===n?bG(t.value,r):"string"==typeof n&&(t.type=n,t.value=r)}function sAt(t,e,n,r){if(t)for(var i=[[t,e]];i.length;){var o=v(i.shift(),2),a=o[0],s=o[1],u=oAt(s,n,r);Array.isArray(a.children)&&a.push(u);var c=s.children;if(Array.isArray(c)){var l,A=qn(c);try{for(A.s();!(l=A.n()).done;){var f=l.value;i.push([u,f])}}catch(t){A.e(t)}finally{A.f()}}else"function"==typeof c&&i.push([u,c])}}function uAt(t,e,n){var r=n.key,i=void 0===r?e:r;t.prototype[e]=function(t){return 0===arguments.length?this.attr(i):this.attr(i,t)}}function cAt(t,e,n){var r=n.key,i=void 0===r?e:r;t.prototype[e]=function(t){if(0===arguments.length)return this.attr(i);if(Array.isArray(t))return this.attr(i,t);var e=[].concat(O(this.attr(i)||[]),[t]);return this.attr(i,e)}}function lAt(t,e,n){var r=n.key,i=void 0===r?e:r;t.prototype[e]=function(t,e){if(0===arguments.length)return this.attr(i);if(1===arguments.length&&"string"!=typeof t)return this.attr(i,t);var n=this.attr(i)||{};return n[t]=1===arguments.length||e,this.attr(i,n)}}function AAt(t,e,n){t.prototype[e]=function(t){if(0===arguments.length)return this.attr(e);if(Array.isArray(t))return this.attr(e,{items:t});if(yG(t)&&(void 0!==t.title||void 0!==t.items))return this.attr(e,t);if(null===t||!1===t)return this.attr(e,t);var n=this.attr(e)||{},r=n.items,i=void 0===r?[]:r;return i.push(t),n.items=i,this.attr(e,n)}}function fAt(t,e,n){var r=n.ctor;t.prototype[e]=function(t){var n=this.append(r);return"mark"===e&&(n.type=t),n}}function dAt(t,e,n){var r=n.ctor;t.prototype[e]=function(){return this.type=null,this.append(r)}}function hAt(t){return function(e){for(var n=0,r=Object.entries(t);n<r.length;n++){var i=v(r[n],2),o=i[0],a=i[1],s=a.type;"value"===s?uAt(e,o,a):"array"===s?cAt(e,o,a):"object"===s?lAt(e,o,a):"node"===s?fAt(e,o,a):"container"===s?dAt(e,o,a):"mix"===s&&AAt(e,o)}return e}}function pAt(t){return Object.fromEntries(Object.entries(t).map(function(t){var e=v(t,2);return[e[0],{type:"node",ctor:e[1]}]}))}var vAt={encode:{type:"object"},scale:{type:"object"},data:{type:"value"},transform:{type:"array"},style:{type:"object"},animate:{type:"object"},coordinate:{type:"object"},interaction:{type:"object"},label:{type:"array",key:"labels"},axis:{type:"object"},legend:{type:"object"},slider:{type:"object"},scrollbar:{type:"object"},state:{type:"object"},layout:{type:"object"},theme:{type:"object"},title:{type:"value"}},gAt=Object.assign(Object.assign({},vAt),{tooltip:{type:"mix"},viewStyle:{type:"object"}}),yAt=Object.assign(Object.assign({},vAt),{labelTransform:{type:"array"}}),mAt=function(t){function e(){return x(this,e),F(this,e,arguments)}return P(e,t),B(e,[{key:"changeData",value:function(t){var e,n=this.getRoot();if(n)return this.attr("data",t),(null===(e=this.children)||void 0===e?void 0:e.length)&&this.children.forEach(function(e){e.attr("data",t)}),null==n?void 0:n.render()}},{key:"getView",value:function(){var t=this,e=this.getRoot().getContext().views;if(null==e?void 0:e.length)return e.find(function(e){return e.key===t._key})}},{key:"getScale",value:function(){var t;return null===(t=this.getView())||void 0===t?void 0:t.scale}},{key:"getScaleByChannel",value:function(t){var e=this.getScale();if(e)return e[t]}},{key:"getCoordinate",value:function(){var t;return null===(t=this.getView())||void 0===t?void 0:t.coordinate}},{key:"getTheme",value:function(){var t;return null===(t=this.getView())||void 0===t?void 0:t.theme}},{key:"getGroup",value:function(){var t=this._key;if(t)return this.getRoot().getContext().canvas.getRoot().getElementById(t)}},{key:"show",value:function(){var t=this.getGroup();t&&!t.isVisible()&&J$(t)}},{key:"hide",value:function(){var t=this.getGroup();t&&t.isVisible()&&Z$(t)}}])}(Zlt);mAt=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}([hAt(yAt)],mAt);var bAt=function(t){function e(){return x(this,e),F(this,e,arguments)}return P(e,t),B(e,[{key:"changeData",value:function(t){var e=this.getRoot();if(e)return this.attr("data",t),null==e?void 0:e.render()}},{key:"getMark",value:function(){var t,e=this,n=null===(t=this.getRoot())||void 0===t?void 0:t.getView();if(n){var r=n.markState,i=Array.from(r.keys()).find(function(t){return t.key===e.attr("key")});return r.get(i)}}},{key:"getScale",value:function(){var t,e=null===(t=this.getRoot())||void 0===t?void 0:t.getView();if(e)return null==e?void 0:e.scale}},{key:"getScaleByChannel",value:function(t){var e,n,r=null===(e=this.getRoot())||void 0===e?void 0:e.getView();if(r)return null===(n=null==r?void 0:r.scale)||void 0===n?void 0:n[t]}},{key:"getGroup",value:function(){var t=this.attr("key");if(t)return this.getRoot().getContext().canvas.getRoot().getElementById(t)}}])}(Zlt);bAt=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}([hAt(gAt)],bAt);var wAt={};function xAt(t,e){var n,r;t.startsWith("symbol.")?(n=t.split(".").pop(),r=e,fY.set(n,r)):Object.assign(wAt,m({},t,e))}var EAt=function(t){function e(t){var n;x(this,e);var r=t.container,i=t.canvas,o=t.renderer,a=t.plugins,s=t.lib,u=t.createCanvas,c=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["container","canvas","renderer","plugins","lib","createCanvas"]);return(n=F(this,e,[c,"view"]))._hasBindAutoFit=!1,n._rendering=!1,n._trailingClear=null,n._trailing=!1,n._trailingResolve=null,n._trailingReject=null,n._previousDefinedType=null,n._onResize=AB(function(){n.forceFit()},300),n._renderer=o||new Lx,n._plugins=a||[],n._container=function(t){if(void 0===t){var e=document.createElement("div");return e[tAt]=!0,e}return"string"==typeof t?document.getElementById(t):t}(r),n._emitter=new gB,n._context={library:Object.assign(Object.assign({},s),wAt),emitter:n._emitter,canvas:i,createCanvas:u},n._create(),n}return P(e,t),B(e,[{key:"render",value:function(){var t=this;if(this._rendering)return this._addToTrailing();this._context.canvas||this._createCanvas(),this._bindAutoFit(),this._rendering=!0;var e=new Promise(function(e,n){return Vlt(t._computedOptions(),t._context,t._createResolve(e),t._createReject(n))}),n=function(){var t,e;return[new Promise(function(n,r){e=n,t=r}),e,t]}(),r=v(n,3),i=r[0],o=r[1],a=r[2];return e.then(o).then(function(){if(t._trailingClear){var e=t.options();t._trailingClear(),t._trailing&&t.options(e)}}).catch(a).then(function(){t._trailingClear=null,t._renderTrailing()}),i}},{key:"options",value:function(t){if(0===arguments.length)return function(t){var e=function(t){if(null!==t.type)return t;var e,n=t.children[t.children.length-1],r=qn($lt);try{for(r.s();!(e=r.n()).done;){var i=e.value;n.attr(i,t.attr(i))}}catch(t){r.e(t)}finally{r.f()}return n}(t),n=[e],r=new Map;for(r.set(e,nAt(e));n.length;){var i,o=n.pop(),a=r.get(o),s=o.children,u=qn(void 0===s?[]:s);try{for(u.s();!(i=u.n()).done;){var c=i.value;if(c.type===eAt)a.children=c.value;else{var l=nAt(c),A=a.children,f=void 0===A?[]:A;f.push(l),n.push(c),r.set(c,l),a.children=f}}}catch(t){u.e(t)}finally{u.f()}}return r.get(e)}(this);var e=t.type;return e&&(this._previousDefinedType=e),function(t,e,n,r,i){for(var o=[[null,t,iAt(t,e,n,r,i)]];o.length;){var a=v(o.shift(),3),s=a[0],u=a[1],c=a[2];if(u)if(c){aAt(u,c);var l=c.children,A=u.children;if(Array.isArray(l)&&Array.isArray(A))for(var f=Math.max(l.length,A.length),d=0;d<f;d++){var h=l[d],p=A[d];o.push([u,p,h])}else"function"==typeof l&&o.push([u,null,l])}else u.remove();else sAt(s,c,r,i)}}(this,t,this._previousDefinedType,this._marks,this._compositions),this}},{key:"getContainer",value:function(){return this._container}},{key:"getContext",value:function(){return this._context}},{key:"on",value:function(t,e,n){return this._emitter.on(t,e,n),this}},{key:"once",value:function(t,e){return this._emitter.once(t,e),this}},{key:"emit",value:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(e=this._emitter).emit.apply(e,[t].concat(r)),this}},{key:"off",value:function(t,e){return this._emitter.off(t,e),this}},{key:"clear",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this._rendering)return this._trailingClear=function(){t.clear(e)},void this._reset();var n=this.options();this.emit(o3.BEFORE_CLEAR),this._reset(),Ylt(n,this._context,!1,e),this.emit(o3.AFTER_CLEAR)}},{key:"destroy",value:function(){var t,e,n=this.options();this.emit(o3.BEFORE_DESTROY),this._unbindAutoFit(),this._reset(),Ylt(n,this._context,!0),this._container[tAt]&&((e=(t=this._container).parentNode)&&e.removeChild(t)),this.emit(o3.AFTER_DESTROY)}},{key:"forceFit",value:function(){var t=this;this.options.autoFit=!0;var e=rAt(this.options(),this._container),n=e.width,r=e.height;if(n===this._width&&r===this._height)return Promise.resolve(this);this.emit(o3.BEFORE_CHANGE_SIZE);var i=this.render();return i.then(function(){t.emit(o3.AFTER_CHANGE_SIZE)}),i}},{key:"changeSize",value:function(t,e){var n=this;if(t===this._width&&e===this._height)return Promise.resolve(this);this.emit(o3.BEFORE_CHANGE_SIZE),this.attr("width",t),this.attr("height",e);var r=this.render();return r.then(function(){n.emit(o3.AFTER_CHANGE_SIZE)}),r}},{key:"getDataByXY",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.shared,r=void 0!==n&&n,i=e.series,o=e.facet,a=void 0!==o&&o,s=e.startX,u=void 0===s?0:s,c=e.startY,l=void 0===c?0:c,A=this._context,f=A.canvas,d=A.views,h=f.document,p=t.x,v=t.y,g=d[0],y=g.coordinate,m=g.scale,b=g.markState,w=g.data,x=g.key,E=h.getElementsByClassName(B$),B=r?function(t){return t.__data__.x}:function(t){return t},k=TK(E,B),O=r0(h.getElementsByClassName(k$)[0]),C=function(t){return Array.from(t.values()).some(function(t){var e,n;return(null===(e=t.interaction)||void 0===e?void 0:e.seriesTooltip)||(null===(n=t.channels)||void 0===n?void 0:n.some(function(t){return"series"===t.name&&void 0!==t.values}))})},M=_8(i,C(b)),S=function(t){return Gb(t,"__data__.data",null)};try{if(M&&C(b)&&!a){var F=j8({root:O,event:{offsetX:p,offsetY:v},elements:E,coordinate:y,scale:m,startX:u,startY:l}).selectedData,T=w.get("".concat(x,"-0"));return F.map(function(t){var e=t.index;return T[e]})}var P=U8({root:O,event:{offsetX:p,offsetY:v},elements:E,coordinate:y,scale:m,shared:r});if(rG(P))return iG(P,w.get(x));var I=B(P),N=k.get(I);return N?N.map(S):[]}catch(t){var L=f.document.elementFromPointSync(p,v);return L?S(L):[]}}},{key:"_create",value:function(){var t=this,e=this._context.library,n=["mark.mark"].concat(O(Object.keys(e).filter(function(t){return t.startsWith("mark.")||"component.axisX"===t||"component.axisY"===t||"component.legends"===t})));this._marks={};var r,i=qn(n);try{var o=function(){var e=r.value.split(".").pop(),n=function(t){function n(){return x(this,n),F(this,n,[{},e])}return P(n,t),B(n)}(bAt);t._marks[e]=n,t[e]=function(t){var r=this.append(n);return"mark"===e&&(r.type=t),r}};for(i.s();!(r=i.n()).done;)o()}catch(t){i.e(t)}finally{i.f()}var a=["composition.view"].concat(O(Object.keys(e).filter(function(t){return t.startsWith("composition.")&&"composition.mark"!==t})));this._compositions=Object.fromEntries(a.map(function(e){var n=e.split(".").pop(),r=function(t){function e(){return x(this,e),F(this,e,[{},n])}return P(e,t),B(e)}(mAt);return r=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}([hAt(pAt(t._marks))],r),[n,r]}));for(var s=0,u=Object.values(this._compositions);s<u.length;s++){var c=u[s];hAt(pAt(this._compositions))(c)}var l,A=qn(a);try{var f=function(){var e=l.value.split(".").pop();t[e]=function(){var t=this._compositions[e];return this.type=null,this.append(t)}};for(A.s();!(l=A.n()).done;)f()}catch(t){A.e(t)}finally{A.f()}}},{key:"_reset",value:function(){var t=["theme","type","width","height","autoFit"];this.type="view",this.value=Object.fromEntries(Object.entries(this.value).filter(function(e){var n=v(e,1)[0];return n.startsWith("margin")||n.startsWith("padding")||n.startsWith("inset")||t.includes(n)})),this.children=[]}},{key:"_renderTrailing",value:function(){var t=this;this._trailing&&(this._trailing=!1,this.render().then(function(){var e=t._trailingResolve.bind(t);t._trailingResolve=null,e(t)}).catch(function(e){var n=t._trailingReject.bind(t);t._trailingReject=null,n(e)}))}},{key:"_createResolve",value:function(t){var e=this;return function(){e._rendering=!1,t(e)}}},{key:"_createReject",value:function(t){var e=this;return function(n){e._rendering=!1,t(n)}}},{key:"_computedOptions",value:function(){var t=this.options(),e=t.key,n=void 0===e?"G2_CHART_KEY":e,r=rAt(t,this._container),i=r.width,o=r.height,a=r.depth;return this._width=i,this._height=o,this._key=n,Object.assign(Object.assign({key:this._key},t),{width:i,height:o,depth:a})}},{key:"_createCanvas",value:function(){var t,e,n=this,r=rAt(this.options(),this._container),i=r.width,o=r.height;this._plugins.push(new U_),this._plugins.forEach(function(t){return n._renderer.registerPlugin(t)}),this._context.canvas=new Ac({container:this._container,width:i,height:o,renderer:this._renderer});var a=null===(e=null===(t=this._context.canvas)||void 0===t?void 0:t.getContextService())||void 0===e?void 0:e.getDomElement();a&&(a.style.display="block")}},{key:"_addToTrailing",value:function(){var t,e=this;return null===(t=this._trailingResolve)||void 0===t||t.call(this,this),this._trailing=!0,new Promise(function(t,n){e._trailingResolve=t,e._trailingReject=n})}},{key:"_bindAutoFit",value:function(){var t=this.options().autoFit;this._hasBindAutoFit?t||this._unbindAutoFit():t&&(this._hasBindAutoFit=!0,window.addEventListener("resize",this._onResize))}},{key:"_unbindAutoFit",value:function(){this._hasBindAutoFit&&(this._hasBindAutoFit=!1,window.removeEventListener("resize",this._onResize))}}])}(mAt);function BAt(t){var e=t.type;return"string"==typeof e&&["stackY","dodgeX","groupX"].includes(e)}var kAt=function(t){return function(e,n,r){var i=n.encode,o=n.transform;if((void 0===o?[]:o).some(BAt))return[e,n];var a=i.x,s=i.y;if(void 0===a||void 0===s)return[e,n];var u=t.series;return _tt({groupBy:u?["x","series"]:"x"})(e,n,r)}};kAt.props={};var OAt=function(){return function(t,e){return void 0!==e.encode.z?[t,e]:[t,Xm({},e,{encode:{z:mz(xz(t,0))},scale:{z:{guide:null}}})]}};OAt.props={};var CAt,MAt,SAt=Object.assign({},Jut()),FAt=tct(EAt,SAt),TAt=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())})},PAt=function(t,e){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},IAt="__rc_react_root__",NAt=!1;function LAt(){return TAt(this,void 0,void 0,function(){var t,e,n,r;return PAt(this,function(i){switch(i.label){case 0:if(NAt)return[2];NAt=!0,i.label=1;case 1:return i.trys.push([1,6,,7]),t=EU.version||"",parseInt(t.split(".")[0],10)>=18?[4,c.e(829).then(c.t.bind(c,3829,19))]:[3,3];case 2:return e=i.sent(),CAt=e.createRoot,[3,5];case 3:return[4,Promise.resolve().then(c.t.bind(c,6003,23))];case 4:n=i.sent(),MAt=n.render,n.unmountComponentAtNode,i.label=5;case 5:return[3,7];case 6:return r=i.sent(),console.warn("[react-render] Failed to load ReactDOM API:",r),[3,7];case 7:return[2]}})})}var _At=new Map;"undefined"!=typeof document&&_At.set("tooltip",document.createElement("div"));var QAt,UAt=function(){return UAt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},UAt.apply(this,arguments)},jAt=function(t){var e=t.loadingTemplate,n=t.theme,r=void 0===n?"light":n,i=t.loading,o=BU().useRef(null),a="object"==typeof i?i:{},s=a.container,u=void 0===s?{}:s,c=a.icon,l=void 0===c?{}:c;return BU().useEffect(function(){!e&&o.current&&function(t,e){if(void 0===e&&(e={}),"undefined"==typeof document)return"loading";var n="";e&&Object.keys(e).forEach(function(t){n+="".concat(t,": ").concat(e[t],";\n")});var r=t.attachShadow({mode:"open"}),i=document.createElement("div"),o=document.createElement("style");o.innerHTML=".loading {\n    display: inline-block;\n    position: relative;\n    width: 80px;\n    height: 80px;\n  }\n  .loading div {\n    position: absolute;\n    top: 33px;\n    width: 13px;\n    height: 13px;\n    border-radius: 50%;\n    background: #ccc;\n    animation-timing-function: cubic-bezier(0, 1, 1, 0);\n    ".concat(n,"\n  }\n  .loading div:nth-child(1) {\n    left: 8px;\n    animation: loading1 0.6s infinite;\n  }\n  .loading div:nth-child(2) {\n    left: 8px;\n    animation: loading2 0.6s infinite;\n  }\n  .loading div:nth-child(3) {\n    left: 32px;\n    animation: loading2 0.6s infinite;\n  }\n  .loading div:nth-child(4) {\n    left: 56px;\n    animation: loading3 0.6s infinite;\n  }\n  @keyframes loading1 {\n    0% {\n      transform: scale(0);\n    }\n    100% {\n      transform: scale(1);\n    }\n  }\n  @keyframes loading3 {\n    0% {\n      transform: scale(1);\n    }\n    100% {\n      transform: scale(0);\n    }\n  }\n  @keyframes loading2 {\n    0% {\n      transform: translate(0, 0);\n    }\n    100% {\n      transform: translate(24px, 0);\n    }\n  }\n  "),i.classList.add("loading"),i.innerHTML="<div></div><div></div><div></div><div></div>",r.appendChild(o),r.appendChild(i)}(o.current,l)},[]),BU().createElement("div",{className:"charts-loading-container",style:UAt({position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,background:"dark"===r?"rgb(20, 20, 20)":"rgb(255, 255, 255)"},u)},e||BU().createElement("div",{ref:o}))},DAt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),RAt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={hasError:!1},e.renderError=function(t){var n=e.props.errorTemplate;return"function"==typeof n?n(t):n||BU().createElement("h5",null," ",t.message)},e}return DAt(e,t),e.getDerivedStateFromError=function(t){return{hasError:!0,error:t}},e.getDerivedStateFromProps=function(t,e){return e.children!==t.children?{children:t.children,hasError:!1,error:void 0}:null},e.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):BU().createElement(EU.Fragment,null,this.props.children)},e}(BU().Component),HAt=(0,xU.memoize)(function(t,e){void 0===e&&(e={});var n=e.fontSize,r=e.fontFamily,i=void 0===r?"sans-serif":r,o=e.fontWeight,a=e.fontStyle,s=e.fontVariant,u=(QAt||(QAt=document.createElement("canvas").getContext("2d")),QAt);return u.font=[a,o,s,"".concat(n,"px"),i].join(" "),u.measureText((0,xU.isString)(t)?t:"")},function(t,e){return void 0===e&&(e={}),function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}([t],(0,xU.values)(e),!0).join("")}),zAt=function(t,e){return void 0===e&&(e={}),HAt(t,e).width},KAt=function(){return KAt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},KAt.apply(this,arguments)};function GAt(t,e){var n=(0,EU.useRef)(null),r=(0,EU.useRef)(null),i=(0,EU.useRef)(null),o=e.onReady,a=e.onEvent,s=function(t,e){var n;void 0===t&&(t="image/png");var r=null===(n=i.current)||void 0===n?void 0:n.getElementsByTagName("canvas")[0];return null==r?void 0:r.toDataURL(t,e)},u=function(t,e,n){void 0===t&&(t="download"),void 0===e&&(e="image/png");var r=t;-1===t.indexOf(".")&&(r="".concat(t,".").concat(e.split("/")[1]));var i=s(e,n),o=document.createElement("a");return o.href=i,o.download=r,document.body.appendChild(o),o.click(),document.body.removeChild(o),o=null,r},c=function(t,e){void 0===e&&(e=!1);var n=Object.keys(t),r=e;n.forEach(function(n){var i=t[n];"tooltip"===n&&(r=!0),(0,xU.isFunction)(i)&&function(t){var e=new Set(["g","circle","ellipse","image","rect","line","polyline","polygon","text","path","html","mesh"]);if([/\breact\b/i,/\.jsx/,/children:\s*\[/,/\*\s*[#@]__PURE__\s*\*/].some(function(e){return e.test(t)}))return!0;var n=t.match(/(\w+)?\.createElement\(\s*(['"`])([^'"`]+)\2/g);return!!n&&n.some(function(t){var n=t.match(/\.createElement\(\s*(['"`])([^'"`]+)\1/);return n&&!e.has(n[2].toLowerCase())})}("".concat(i))?t[n]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(t,e){void 0===e&&(e=!1);var n=null;if(e)n=_At.get("tooltip");else if(n=document.createElement("div"),null==t?void 0:t.key){var r=_At.get(t.key);r?n=r:_At.set(t.key,n)}return function(t,e){TAt(this,void 0,void 0,function(){return PAt(this,function(n){switch(n.label){case 0:return[4,LAt()];case 1:return n.sent(),CAt?function(t,e){e[IAt]||(e[IAt]=CAt(e)),e[IAt].render(t)}(t,e):function(t,e){if(!MAt)throw new Error("ReactDOM.render not available");MAt(t,e)}(t,e),[2]}})})}(t,n),n}(i.apply(void 0,t),r)}:(0,xU.isArray)(i)?i.forEach(function(t){c(t,r)}):(0,xU.isObject)(i)?c(i,r):r=e})};return(0,EU.useEffect)(function(){n.current&&!(0,xU.isEqual)(r.current,e)&&(r.current=(0,xU.cloneDeep)(e),c(e),n.current.update(e),n.current.render())},[e]),(0,EU.useEffect)(function(){if(!i.current)return function(){return null};r.current||(r.current=(0,xU.cloneDeep)(e)),c(e);var l=new t(i.current,KAt({},e));l.toDataURL=s,l.downloadImage=u,l.render(),n.current=l,o&&o(l);var A=function(t){a&&a(l,t)};return l.on("*",A),function(){n.current&&(n.current.destroy(),n.current.off("*",A),n.current=void 0)}},[]),{chart:n,container:i}}var VAt={field:"value",size:[1,1],round:!1,padding:0,sort:function(t,e){return e.value-t.value},as:["x","y"],ignoreParentValue:!0},WAt="childNodeCount",YAt="Invalid field: it must be a string!";function XAt(t,e){var n,r=(e=tP({},VAt,e)).as;if(!tn(r)||2!==r.length)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');try{n=function(t){var e=t.field,n=t.fields;if(ve(e))return e;if(tn(e))return console.warn(YAt),e[0];if(console.warn("".concat(YAt," will try to get fields instead.")),ve(n))return n;if(tn(n)&&n.length)return n[0];throw new TypeError(YAt)}(e)}catch(t){console.warn(t)}var i=function(t){return function(){var t=1,e=1,n=0,r=!1;function i(i){var o=i.height+1;return i.x0=i.y0=n,i.x1=t,i.y1=e/o,i.eachBefore(function(t,e){return function(r){r.children&&u7(r,r.x0,t*(r.depth+1)/e,r.x1,t*(r.depth+2)/e);var i=r.x0,o=r.y0,a=r.x1-n,s=r.y1-n;a<i&&(i=a=(i+a)/2),s<o&&(o=s=(o+s)/2),r.x0=i,r.y0=o,r.x1=a,r.y1=s}}(e,o)),r&&i.eachBefore(p7),i}return i.round=function(t){return arguments.length?(r=!!t,i):r},i.size=function(n){return arguments.length?(t=+n[0],e=+n[1],i):[t,e]},i.padding=function(t){return arguments.length?(n=+t,i):n},i}().size(e.size).round(e.round).padding(e.padding)(W9(t).sum(function(t){return Kq(t.children)?e.ignoreParentValue?0:t[n]-iS(t.children,function(t,e){return t+e[n]},0):t[n]}).sort(e.sort))}(t),o=r[0],a=r[1];return i.each(function(t){var e,n;t[o]=[t.x0,t.x1,t.x1,t.x0],t[a]=[t.y1,t.y1,t.y0,t.y0],t.name=t.name||(null===(e=t.data)||void 0===e?void 0:e.name)||(null===(n=t.data)||void 0===n?void 0:n.label),t.data.name=t.name,["x0","x1","y0","y1"].forEach(function(e){-1===r.indexOf(e)&&delete t[e]})}),function(t){var e,n,r=[];return t&&t.each?t.each(function(t){var i,o;t.parent!==e?(e=t.parent,n=0):n+=1;var a=Xx(((null===(i=t.ancestors)||void 0===i?void 0:i.call(t))||[]).map(function(t){return r.find(function(e){return e.name===t.name})||t}),function(e){var n=e.depth;return n>0&&n<t.depth});t.nodeAncestor=a,t[WAt]=(null===(o=t.children)||void 0===o?void 0:o.length)||0,t.nodeIndex=n,r.push(t)}):t&&t.eachNode&&t.eachNode(function(t){r.push(t)}),r}(i)}var qAt="sunburst",ZAt="markType",JAt="path",$At="ancestor-node",tft={id:qAt,encode:{x:"x",y:"y",key:JAt,color:$At,value:"value"},axis:{x:!1,y:!1},style:m(m(m(m(m(m({},ZAt,qAt),"stroke","#fff"),"lineWidth",.5),"fillOpacity","fillOpacity"),WAt,WAt),"depth","depth"),state:{active:{zIndex:2,stroke:"#000"},inactive:{zIndex:1,stroke:"#fff"}},legend:!1,interaction:{drillDown:!0},coordinate:{type:"polar",innerRadius:.2}},eft=function(t){var e=t.encode,n=t.data,r=void 0===n?[]:n,i=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["encode","data"]),o=Object.assign(Object.assign({},i.coordinate),{innerRadius:Math.max(Gb(i,["coordinate","innerRadius"],.2),1e-5)}),a=Object.assign(Object.assign({},tft.encode),e),s=a.value,u=function(t){var e=t.data,n=t.encode,r=n.color,i=n.value,o=XAt(e,{field:i,type:"hierarchy.".concat("partition"),as:["x","y"]}),a=[];return o.forEach(function(t){var e,n,o,s;if(0===t.depth)return null;for(var u=t.data.name,c=[u],l=Object.assign({},t);l.depth>1;)u="".concat(null===(e=l.parent.data)||void 0===e?void 0:e.name," / ").concat(u),c.unshift(null===(n=l.parent.data)||void 0===n?void 0:n.name),l=l.parent;var A=Object.assign(Object.assign(Object.assign({},Ux(t.data,[i])),m(m({},JAt,u),$At,l.data.name)),t);r&&r!==$At&&(A[r]=t.data[r]||(null===(s=null===(o=t.parent)||void 0===o?void 0:o.data)||void 0===s?void 0:s[r])),a.push(A)}),a.map(function(t){var e=t.x.slice(0,2),n=[t.y[2],t.y[0]];return e[0]===e[1]&&(n[0]=n[1]=(t.y[2]+t.y[0])/2),Object.assign(Object.assign({},t),{x:e,y:n,fillOpacity:Math.pow(.85,t.depth)})})}({encode:a,data:r});return[Xm({},tft,Object.assign(Object.assign({type:"rect",data:u,encode:a,tooltip:{title:"path",items:[function(t){return{name:s,value:t[s]}}]}},i),{coordinate:o}))]};eft.props={};var nft={rootText:"root",style:{fill:"rgba(0, 0, 0, 0.85)",fontSize:12,y:1},active:{fill:"rgba(0, 0, 0, 0.5)"}};var rft=function(){return rft=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},rft.apply(this,arguments)},ift=tct(EAt,rft(rft({},Jut()),{"interaction.drillDown":function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.breadCrumb,r=void 0===n?{}:n,i=e.isFixedColor,o=void 0!==i&&i,a=Xm({},nft,r);return function(e){var n=e.update,r=e.setState,i=e.container,s=e.view,u=e.options,c=i.ownerDocument,l=function(t){return wG(t).select(".".concat(O$)).node()}(i),A=u.marks.find(function(t){return t.id===qAt}),f=A.state,d=c.createElement("g");l.appendChild(d);var h=function(e,i){return u=t,A=void 0,f=void 0,p=(0,Dn.A)().m(function t(){var u,A,f,p,v,g,y;return(0,Dn.A)().w(function(t){for(;;)switch(t.n){case 0:return d.removeChildren(),e&&(u=c.createElement("text",{style:Object.assign({x:0,text:a.rootText,depth:0},a.style)}),d.appendChild(u),A="",f=null==e?void 0:e.split(" / "),p=a.style.y,v=d.getBBox().width,g=l.getBBox().width,y=f.map(function(t,e){var n=c.createElement("text",{style:Object.assign(Object.assign({x:v,text:" / "},a.style),{y:p})});d.appendChild(n),v+=n.getBBox().width,A="".concat(A).concat(t," / ");var r=c.createElement("text",{name:A.replace(/\s\/\s$/,""),style:Object.assign(Object.assign({text:t,x:v,depth:e+1},a.style),{y:p})});return d.appendChild(r),(v+=r.getBBox().width)>g&&(p=d.getBBox().height,v=0,n.attr({x:v,y:p}),v+=n.getBBox().width,r.attr({x:v,y:p}),v+=r.getBBox().width),r}),[u].concat(O(y)).forEach(function(t,e){if(e!==y.length){var n=Object.assign({},t.attributes);t.attr("cursor","pointer"),t.addEventListener("mouseenter",function(){t.attr(a.active)}),t.addEventListener("mouseleave",function(){t.attr(n)}),t.addEventListener("click",function(){h(t.name,Gb(t,["style","depth"]))})}})),r("drillDown",function(t){var n=t.marks.map(function(t){if(t.id!==qAt&&"rect"!==t.type)return t;var n=t.data,r=Object.fromEntries(["color"].map(function(t){return[t,{domain:s.scale[t].getOptions().domain}]})),a=n.filter(function(t){var n=t.path;return o||(t[$At]=n.split(" / ")[i]),!e||new RegExp("^".concat(e,".+")).test(n)});return Xm({},t,o?{data:a,scale:r}:{data:a})});return Object.assign(Object.assign({},t),{marks:n})}),t.n=1,n();case 1:return t.a(2)}},t)}),new(f||(f=Promise))(function(t,e){function n(t){try{i(p.next(t))}catch(t){e(t)}}function r(t){try{i(p.throw(t))}catch(t){e(t)}}function i(e){e.done?t(e.value):function(t){return t instanceof f?t:new f(function(e){e(t)})}(e.value).then(n,r)}i((p=p.apply(u,A||[])).next())});var u,A,f,p},p=function(t){var e=t.target;if(Gb(e,["style",ZAt])===qAt&&"rect"===Gb(e,["markType"])&&Gb(e,["style",WAt])){var n=Gb(e,["__data__","key"]),r=Gb(e,["style","depth"]);e.style.cursor="pointer",h(n,r)}};l.addEventListener("click",p);var v=D9(Object.assign(Object.assign({},f.active),f.inactive)),g=function(){var t=function(t){return t.querySelectorAll(".element").filter(function(t){return Gb(t,["style",ZAt])===qAt})}(l);t.forEach(function(t){var e=Gb(t,["style",WAt]);if("pointer"!==Gb(t,["style","cursor"])&&e){t.style.cursor="pointer";var n=Ux(t.attributes,v);t.addEventListener("mouseenter",function(){t.attr(f.active)}),t.addEventListener("mouseleave",function(){t.attr(Xm(n,f.inactive))})}})};return l.addEventListener("mousemove",g),function(){d.remove(),l.removeEventListener("click",p),l.removeEventListener("mousemove",g)}}},"mark.sunburst":eft})),oft=function(){return oft=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},oft.apply(this,arguments)},aft=["renderer","plugins"],sft=["width","height","autoFit","theme","inset","insetLeft","insetRight","insetTop","insetBottom","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","margin","marginTop","marginRight","marginBottom","marginLeft","depth","title","clip","children","type","data","direction","plugins"],uft="__transform__",cft=function(t,e){return(0,xU.isBoolean)(e)?{type:t,available:e}:oft({type:t},e)},lft={xField:"encode.x",yField:"encode.y",colorField:"encode.color",angleField:"encode.y",keyField:"encode.key",y1Field:"encode.y1",sizeField:"encode.size",setsField:"encode.sets",shapeField:"encode.shape",seriesField:"encode.series",positionField:"encode.position",textField:"encode.text",valueField:"encode.value",binField:"encode.x",srcField:"encode.src",linkColorField:"encode.linkColor",fontSizeField:"encode.fontSize",coordinateType:"coordinate.type",radius:"coordinate.outerRadius",innerRadius:"coordinate.innerRadius",startAngle:"coordinate.startAngle",endAngle:"coordinate.endAngle",focusX:"coordinate.focusX",focusY:"coordinate.focusY",distortionX:"coordinate.distortionX",distortionY:"coordinate.distortionY",visual:"coordinate.visual",stack:{target:"transform",value:function(t){return cft("stackY",t)}},normalize:{target:"transform",value:function(t){return cft("normalizeY",t)}},percent:{target:"transform",value:function(t){return cft("normalizeY",t)}},group:{target:"transform",value:function(t){return cft("dodgeX",t)}},sort:{target:"transform",value:function(t){return cft("sortX",t)}},symmetry:{target:"transform",value:function(t){return cft("symmetryY",t)}},diff:{target:"transform",value:function(t){return cft("diffY",t)}},meta:{target:"scale",value:function(t){return t}},label:{target:"labels",value:function(t){return t}},shape:"style.shape",connectNulls:{target:"style",value:function(t){return(0,xU.isBoolean)(t)?{connect:t}:t}},transpose:{target:"transpose",value:function(t){return cft("transpose",t)}}},Aft=["xField","yField","seriesField","colorField","shapeField","keyField","positionField","meta","tooltip","animate","stack","normalize","percent","group","sort","symmetry","diff"],fft=[{key:"annotations",extendedProperties:[]},{key:"line",type:"line",extendedProperties:Aft},{key:"connector",type:"connector",extendedProperties:[]},{key:"point",type:"point",extendedProperties:Aft,defaultShapeConfig:{shapeField:"circle"}},{key:"area",type:"area",extendedProperties:Aft}],dft=[{key:"transform",callback:function(t,e,n){var r;t[e]=t[e]||[];var i=n.available,o=void 0===i||i,a=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(n,["available"]);if(o)t[e].push(oft(((r={})[uft]=!0,r),a));else{var s=t[e].indexOf(function(t){return t.type===n.type});-1!==s&&t[e].splice(s,1)}}},{key:"labels",callback:function(t,e,n){var r;n&&!(0,xU.isArray)(n)?(n.text||(n.text=t.yField),t[e]=t[e]||[],t[e].push(oft(((r={})[uft]=!0,r),n))):t[e]=n||[]}},{key:"transpose",callback:function(t,e,n){var r;n.available?t.coordinate={transform:[oft((r={},r[uft]=!0,r),n)]}:t.coordinate={}}}],hft=[{key:"conversionTag",shape:"ConversionTag"},{key:"axisText",shape:"BidirectionalBarAxisText"}],pft=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),vft=function(){return vft=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},vft.apply(this,arguments)},gft=function(t){function e(e){void 0===e&&(e={});var n=e.style,r=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(e,["style"]);return t.call(this,vft({style:vft({fill:"#eee"},n)},r))||this}return pft(e,t),e}(Gu),yft=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),mft=function(){return mft=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},mft.apply(this,arguments)},bft=function(t){function e(e){void 0===e&&(e={});var n=e.style,r=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(e,["style"]);return t.call(this,mft({style:mft({text:"",fontSize:12,textBaseline:"middle",textAlign:"center",fill:"#000",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1},n)},r))||this}return yft(e,t),e}(qu),wft=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},xft=function(t,e){if((0,xU.isArray)(e))return e},Eft=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return xU.mergeWith.apply(void 0,wft(wft([],t,!1),[xft],!1))},Bft=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),kft=function(t){function e(e,n,r){var i=t.call(this,{style:Eft(r,n)})||this;return i.chart=e,i}return Bft(e,t),e.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this)},e.prototype.disconnectedCallback=function(){},e.prototype.attributeChangedCallback=function(t){},e.prototype.update=function(t,e){var n;return this.attr(Eft({},this.attributes,t||{})),null===(n=this.render)||void 0===n?void 0:n.call(this,this.attributes,this,e)},e.prototype.clear=function(){this.removeChildren()},e.prototype.getElementsLayout=function(){var t=this.chart.getContext().canvas.document.getElementsByClassName("element"),e=[];return t.forEach(function(t){var n=t.getBBox(),r=n.x,i=n.y,o=n.width,a=n.height,s=t.__data__;e.push({bbox:n,x:r,y:i,width:o,height:a,key:s.key,data:s})}),e},e.prototype.bindEvents=function(t,e){},e}(Nu),Oft=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Cft=function(){return Cft=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Cft.apply(this,arguments)},Mft=function(t){function e(n,r){return t.call(this,n,r,{type:e.tag})||this}return Oft(e,t),e.prototype.getConversionTagLayout=function(){var t="vertical"===this.direction,e=Array.from(this.getElementsLayout()).sort(function(e,n){return t?e.y-n.y:e.x-n.x}),n=e[0],r=n.x,i=n.y,o=n.height,a=n.width,s=n.data,u=["items",0,"value"],c=(0,xU.get)(s,u),l=t?e[1].y-i-o:e[1].x-r-a,A=[],f=this.attributes,d=f.size,h=void 0===d?40:d,p=f.arrowSize,v=void 0===p?20:p,g=f.spacing,y=void 0===g?4:g;return e.forEach(function(e,n){if(n>0){var r=e.x,i=e.y,o=e.height,a=e.width,s=e.data,f=e.key,d=(0,xU.get)(s,u),p=h/2;if(t){var g=r+a/2,m=i;A.push({points:[[g+p,m-l+y],[g+p,m-v-y],[g,m-y],[g-p,m-v-y],[g-p,m-l+y]],center:[g,m-l/2],width:l,value:[c,d],key:f})}else g=r,m=i+o/2,A.push({points:[[r-l+y,m-p],[r-v-y,m-p],[g-y,m],[r-v-y,m+p],[r-l+y,m+p]],center:[g-l/2,m],width:l,value:[c,d],key:f});c=d}}),A},e.prototype.render=function(){this.setDirection(),this.drawConversionTag()},e.prototype.setDirection=function(){var t=this.chart.getCoordinate(),e=(0,xU.get)(t,"options.transformations"),n="horizontal";e.forEach(function(t){t.includes("transpose")&&(n="vertical")}),this.direction=n},e.prototype.drawConversionTag=function(){var t=this,e=this.getConversionTagLayout(),n=this.attributes,r=n.style,i=n.text,o=i.style,a=i.formatter;e.forEach(function(e){var n=e.points,i=e.center,s=e.value,u=e.key,c=s[0],l=s[1],A=i[0],f=i[1],d=new gft({style:Cft({points:n,fill:"#eee"},r),id:"polygon-".concat(u)}),h=new bft({style:Cft({x:A,y:f,text:(0,xU.isFunction)(a)?a(c,l):(l/c*100).toFixed(2)+"%"},o),id:"text-".concat(u)});t.appendChild(d),t.appendChild(h)})},e.prototype.update=function(){this.clear(),this.drawConversionTag()},e.prototype.destroy=function(){this.clear()},e.tag="ConversionTag",e}(kft),Sft=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fft=function(){return Fft=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Fft.apply(this,arguments)},Tft=function(t){function e(n,r){return t.call(this,n,r,{type:e.tag})||this}return Sft(e,t),e.prototype.render=function(){this.drawText()},e.prototype.getBidirectionalBarAxisTextLayout=function(){var t="vertical"===this.attributes.layout,e=this.getElementsLayout(),n=t?(0,xU.uniqBy)(e,"x"):(0,xU.uniqBy)(e,"y"),r=["title"],i=[],o=this.chart.getContext().views,a=(0,xU.get)(o,[0,"layout"]),s=a.width,u=a.height;return n.forEach(function(e){var n=e.x,o=e.y,a=e.height,c=e.width,l=e.data,A=e.key,f=(0,xU.get)(l,r);t?i.push({x:n+c/2,y:u,text:f,key:A}):i.push({x:s,y:o+a/2,text:f,key:A})}),(0,xU.uniqBy)(i,"text").length!==i.length&&(i=Object.values((0,xU.groupBy)(i,"text")).map(function(e){var n,r=e.reduce(function(e,n){return e+(t?n.x:n.y)},0);return Fft(Fft({},e[0]),((n={})[t?"x":"y"]=r/e.length,n))})),i},e.prototype.transformLabelStyle=function(t){var e={},n=/^label[A-Z]/;return Object.keys(t).forEach(function(r){n.test(r)&&(e[r.replace("label","").replace(/^[A-Z]/,function(t){return t.toLowerCase()})]=t[r])}),e},e.prototype.drawText=function(){var t=this,e=this.getBidirectionalBarAxisTextLayout(),n=this.attributes,r=n.layout,i=n.labelFormatter,o=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(n,["layout","labelFormatter"]);e.forEach(function(e){var n=e.x,a=e.y,s=e.text,u=e.key,c=new bft({style:Fft({x:n,y:a,text:(0,xU.isFunction)(i)?i(s):s,wordWrap:!0,wordWrapWidth:"horizontal"===r?64:120,maxLines:2,textOverflow:"ellipsis"},t.transformLabelStyle(o)),id:"text-".concat(u)});t.appendChild(c)})},e.prototype.destroy=function(){this.clear()},e.prototype.update=function(){this.destroy(),this.drawText()},e.tag="BidirectionalBarAxisText",e}(kft),Pft={ConversionTag:Mft,BidirectionalBarAxisText:Tft},Ift=function(){function t(t,e){this.container=new Map,this.chart=t,this.config=e,this.init()}return t.prototype.init=function(){var t=this;hft.forEach(function(e){var n,r=e.key,i=e.shape,o=t.config[r];if(o){var a=new Pft[i](t.chart,o);t.chart.getContext().canvas.appendChild(a),t.container.set(r,a)}else null===(n=t.container.get(r))||void 0===n||n.clear()})},t.prototype.update=function(){var t=this;this.container.size&&hft.forEach(function(e){var n=e.key,r=t.container.get(n);null==r||r.update()})},t.prototype.destroy=function(){this.container.forEach(function(t){t.destroy()}),this.container.clear()},t}(),Nft=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Lft=function(){return Lft=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Lft.apply(this,arguments)},_ft="data-chart-source-type",Qft=function(t){function e(e,n){var r=t.call(this)||this;return r.eventListeners=[],r.bindedEvents=!1,r.container="string"==typeof e?document.getElementById(e):e,r.options=r.mergeOption(n),r.createG2(),r.bindEvents(),r}return Nft(e,t),e.prototype.getChartOptions=function(){return Lft(Lft({},(0,xU.pick)(this.options,aft)),{container:this.container})},e.prototype.getSpecOptions=function(){return"base"===this.type||this.__skipDelCustomKeys__?Lft(Lft({},this.options),this.getChartOptions()):this.options},e.prototype.createG2=function(){if(!this.container)throw Error("The container is not initialized!");this.chart=new ift(this.getChartOptions()),this.container.setAttribute(_ft,"Ant Design Charts")},e.prototype.bindEvents=function(){var t=this;if(this.chart){var e=function(e){(null==e?void 0:e.type)&&t.emit(e.type,e)};this.chart.on("*",e),this.eventListeners.push(function(){var n;null===(n=t.chart)||void 0===n||n.off("*",e)})}},e.prototype.getBaseOptions=function(){return{type:"view",autoFit:!0}},e.prototype.getDefaultOptions=function(){},e.prototype.render=function(){var t=this;"base"!==this.type&&this.execAdaptor(),this.chart.options(this.getSpecOptions()),this.chart.render().then(function(){t.annotation?t.annotation.update():t.annotation=new Ift(t.chart,t.options),t.bindSizeSensor()})},e.prototype.update=function(t){this.options=this.mergeOption(t)},e.prototype.mergeOption=function(t){return Eft({},this.getBaseOptions(),this.getDefaultOptions(),t)},e.prototype.changeData=function(t){this.chart.changeData(t)},e.prototype.changeSize=function(t,e){this.chart.changeSize(t,e)},e.prototype.destroy=function(){this.eventListeners.forEach(function(t){return t()}),this.eventListeners=[],this.annotation&&"function"==typeof this.annotation.destroy&&this.annotation.destroy(),this.annotation=null,this.chart.destroy(),this.off(),this.bindedEvents=!1,this.container.removeAttribute(_ft)},e.prototype.execAdaptor=function(){this.getSchemaAdaptor()({chart:this.chart,options:this.options})},e.prototype.triggerResize=function(){this.chart.forceFit()},e.prototype.bindSizeSensor=function(){var t=this;if(!this.bindedEvents){var e=this.options.autoFit;if(void 0===e||e){var n=function(){t.annotation&&t.annotation.update()};this.chart.on(o3.AFTER_CHANGE_SIZE,n),this.eventListeners.push(function(){var e;null===(e=t.chart)||void 0===e||e.off(o3.AFTER_CHANGE_SIZE,n)}),this.bindedEvents=!0}}},e}(gB),Uft=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),jft=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="base",e}return Uft(e,t),e.getDefaultOptions=function(){return{type:"view",children:[{type:"line"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return function(t){return t}},e}(Qft),Dft=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},Rft=function(){return Rft=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Rft.apply(this,arguments)},Hft=function(t){var e=function(t){var e=t.options,n=e.children;return(void 0===n?[]:n).forEach(function(t){Object.keys(t).forEach(function(e){(0,xU.isArray)(t[e])&&"data"!==e&&(t[e]=t[e].filter(function(t){return!t[uft]}))})}),e}(t),n=e.children,r=void 0===n?[]:n,i=(0,xU.omit)(e,[].concat(sft,fft.map(function(t){return t.key}))),o=function(t){Object.keys(t).forEach(function(e){if(t[e]){var n=fft.find(function(t){return t.key===e});if(n){var i=n.type,o=n.extendedProperties,s=n.defaultShapeConfig,u=void 0===s?{}:s;if(i){var c=t[e].tooltip;r.push(a(Eft({},(0,xU.pick)(t,o),u,{type:i},t[e],{tooltip:c||!1})))}else if((0,xU.isArray)(t[e])){var l=t[e].some(function(t){return"text"===t.type});t[e].forEach(function(t){r.push(a(Rft(Rft(Rft({},l?{data:[]}:{}),{tooltip:!1}),t)))})}}}})},a=function(t){return o(t),Object.keys(lft).forEach(function(e){var n=lft[e];if(!(0,xU.isUndefined)(t[e]))if((0,xU.isObject)(n)){var r=n.value,i=n.target,o=r(t[e]);!function(t,e,n){var r=function(t){var e;return null===(e=dft.find(function(e){return e.key===t}))||void 0===e?void 0:e.callback}(e);r?r(t,e,n):t[e]=Eft({},t[e],n)}(t,i,o)}else(0,xU.set)(t,n,t[e])}),t};return r.forEach(function(t){var e=Eft({},i,t);a(Eft(t,e))}),o(e),function(t){var e=t.children,n=void 0===e?[]:e,r=Object.keys(lft).concat(fft.map(function(t){return t.key}));r.forEach(function(e){delete t[e]}),n.forEach(function(t){Object.keys(t).forEach(function(e){r.includes(e)&&delete t[e]})}),Object.keys(t).forEach(function(e){Dft(Dft([],sft,!0),hft.map(function(t){return t.key}),!0).includes(e)||delete t[e]})}(e),t},zft=function(){return zft=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},zft.apply(this,arguments)};function Kft(t){var e=t.options,n=e.stack,r=e.tooltip,i=e.xField;if(!n)return t;var o=fft.map(function(t){return t.type}).filter(function(t){return!!t}),a=!1;return o.forEach(function(t){e[t]&&(a=!0,(0,xU.set)(e,[t,"stack"],zft({y1:"y"},"object"==typeof n?n:{})))}),!a||(0,xU.isBoolean)(r)||r||(0,xU.set)(e,"tooltip",{title:i,items:[{channel:"y"}]}),t}function Gft(t){return(0,xU.flow)(Kft)(t)}function Vft(t){return(0,xU.flow)(Gft,Hft)(t)}var Wft=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Yft=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="area",e}return Wft(e,t),e.getDefaultOptions=function(){return{type:"view",children:[{type:"area"}],scale:{y:{nice:!0}},axis:{y:{title:!1},x:{title:!1}},interaction:{tooltip:{shared:!0}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Vft},e}(Qft),Xft=function(){return Xft=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Xft.apply(this,arguments)};function qft(t){return(0,xU.flow)(function(t){var e=t.options;(0,xU.get)(e,"children.length")>1&&(0,xU.set)(e,"children",[{type:"interval"}]);var n=e.scale,r=e.markBackground,i=e.data,o=e.children,a=e.yField,s=(0,xU.get)(n,"y.domain",[]);if(r&&s.length&&(0,xU.isArray)(i)){var u="domainMax",c=i.map(function(t){var e;return Xft(Xft({originData:Xft({},t)},(0,xU.omit)(t,a)),((e={})[u]=s[s.length-1],e))});o.unshift(Xft({type:"interval",data:c,yField:u,tooltip:!1,style:{fill:"#eee"},label:!1},r))}return t},Gft,Hft)(t)}var Zft=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();xAt("shape.interval.bar25D",function(t,e){return function(n){var r=t.fill,i=void 0===r?"#2888FF":r,o=t.stroke,a=t.fillOpacity,s=void 0===a?1:a,u=t.strokeOpacity,c=void 0===u?.2:u,l=t.pitch,A=void 0===l?8:l,f=n[0],d=n[1],h=n[2],p=n[3],v=(d[1]-f[1])/2,g=e.document,y=g.createElement("g",{}),m=g.createElement("polygon",{style:{points:[f,[f[0]-A,f[1]+v],[h[0]-A,f[1]+v],p],fill:i,fillOpacity:s,stroke:o,strokeOpacity:c,inset:30}}),b=g.createElement("polygon",{style:{points:[[f[0]-A,f[1]+v],d,h,[h[0]-A,f[1]+v]],fill:i,fillOpacity:s,stroke:o,strokeOpacity:c}}),w=g.createElement("polygon",{style:{points:[f,[f[0]-A,f[1]+v],d,[f[0]+A,f[1]+v]],fill:i,fillOpacity:s-.2}});return y.appendChild(m),y.appendChild(b),y.appendChild(w),y}});var Jft=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="Bar",e}return Zft(e,t),e.getDefaultOptions=function(){return{type:"view",coordinate:{transform:[{type:"transpose"}]},children:[{type:"interval"}],scale:{y:{nice:!0}},axis:{y:{title:!1},x:{title:!1}},interaction:{tooltip:{shared:!0},elementHighlight:{background:!0}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return qft},e}(Qft),$ft=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();xAt("shape.interval.column25D",function(t,e){return function(n){var r=t.fill,i=void 0===r?"#2888FF":r,o=t.stroke,a=t.fillOpacity,s=void 0===a?1:a,u=t.strokeOpacity,c=void 0===u?.2:u,l=t.pitch,A=void 0===l?8:l,f=(n[1][0]-n[0][0])/2+n[0][0],d=e.document,h=d.createElement("g",{}),p=d.createElement("polygon",{style:{points:[[n[0][0],n[0][1]],[f,n[1][1]+A],[f,n[3][1]+A],[n[3][0],n[3][1]]],fill:i,fillOpacity:s,stroke:o,strokeOpacity:c,inset:30}}),v=d.createElement("polygon",{style:{points:[[f,n[1][1]+A],[n[1][0],n[1][1]],[n[2][0],n[2][1]],[f,n[2][1]+A]],fill:i,fillOpacity:s,stroke:o,strokeOpacity:c}}),g=d.createElement("polygon",{style:{points:[[n[0][0],n[0][1]],[f,n[1][1]-A],[n[1][0],n[1][1]],[f,n[1][1]+A]],fill:i,fillOpacity:s-.2}});return h.appendChild(v),h.appendChild(p),h.appendChild(g),h}});var tdt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="column",e}return $ft(e,t),e.getDefaultOptions=function(){return{type:"view",scale:{y:{nice:!0}},interaction:{tooltip:{shared:!0},elementHighlight:{background:!0}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"interval"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return qft},e}(Qft);function edt(t){return(0,xU.flow)(function(t){var e=t.options,n=e.children,r=void 0===n?[]:n;return e.legend?(r.forEach(function(t){if(!(0,xU.get)(t,"colorField")){var e=(0,xU.get)(t,"yField");(0,xU.set)(t,"colorField",function(){return e})}}),t):t},function(t){var e=t.options,n=e.annotations,r=void 0===n?[]:n,i=e.children,o=void 0===i?[]:i,a=e.scale,s=!1;return(0,xU.get)(a,"y.key")||o.forEach(function(t,e){if(!(0,xU.get)(t,"scale.y.key")){var n="child".concat(e,"Scale");(0,xU.set)(t,"scale.y.key",n);var i=t.annotations,o=void 0===i?[]:i;o.length>0&&((0,xU.set)(t,"scale.y.independent",!1),o.forEach(function(t){(0,xU.set)(t,"scale.y.key",n)})),!s&&r.length>0&&void 0===(0,xU.get)(t,"scale.y.independent")&&(s=!0,(0,xU.set)(t,"scale.y.independent",!1),r.forEach(function(t){(0,xU.set)(t,"scale.y.key",n)}))}}),t},Gft,Hft)(t)}var ndt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),rdt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="DualAxes",e}return ndt(e,t),e.getDefaultOptions=function(){return{type:"view",axis:{y:{title:!1,tick:!1},x:{title:!1}},scale:{y:{independent:!0,nice:!0}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return edt},e}(Qft);function idt(t){return(0,xU.flow)(function(t){var e=t.options,n=e.xField;return e.colorField||(0,xU.set)(e,"colorField",n),t},function(t){var e=t.options,n=e.compareField,r=e.transform,i=e.isTransposed,o=void 0===i||i,a=e.coordinate;return r||(n?(0,xU.set)(e,"transform",[]):(0,xU.set)(e,"transform",[{type:"symmetryY"}])),!a&&o&&(0,xU.set)(e,"coordinate",{transform:[{type:"transpose"}]}),t},function(t){var e=t.options,n=e.compareField,r=e.seriesField,i=e.data,o=e.children,a=e.yField,s=e.isTransposed,u=void 0===s||s;if(n||r){var c=Object.values((0,xU.groupBy)(i,function(t){return t[n||r]}));o[0].data=c[0],o.push({type:"interval",data:c[1],yField:function(t){return-t[a]}}),delete e.compareField,delete e.data}return r&&((0,xU.set)(e,"type","spaceFlex"),(0,xU.set)(e,"ratio",[1,1]),(0,xU.set)(e,"direction",u?"row":"col"),delete e.seriesField),t},function(t){var e=t.options,n=e.tooltip,r=e.xField,i=e.yField;return n||(0,xU.set)(e,"tooltip",{title:!1,items:[function(t){return{name:t[r],value:t[i]}}]}),t},Gft,Hft)(t)}var odt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),adt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="column",e}return odt(e,t),e.getDefaultOptions=function(){return{type:"view",scale:{x:{padding:0}},animate:{enter:{type:"fadeIn"}},axis:!1,shapeField:"funnel",label:{position:"inside",transform:[{type:"contrastReverse"}]},children:[{type:"interval"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return idt},e}(Qft);function sdt(t){return(0,xU.flow)(Gft,Hft)(t)}var udt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),cdt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="line",e}return udt(e,t),e.getDefaultOptions=function(){return{type:"view",scale:{y:{nice:!0}},interaction:{tooltip:{shared:!0}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"line"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return sdt},e}(Qft);function ldt(t){switch(typeof t){case"function":return t;case"string":return function(e){return(0,xU.get)(e,[t])};default:return function(){return t}}}var Adt=function(){return Adt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Adt.apply(this,arguments)};function fdt(t){return(0,xU.flow)(function(t){var e=t.options,n=e.angleField,r=e.data,i=e.label,o=e.tooltip,a=e.colorField,s=ldt(a);if((0,xU.isArray)(r)&&r.length>0)if(0===r.reduce(function(t,e){return t+e[n]},0)){var u=r.map(function(t){var e;return Adt(Adt({},t),((e={})[n]=1,e))});if((0,xU.set)(e,"data",u),i){var c=a===(0,xU.get)(i,"text");(0,xU.set)(e,"label",Adt(Adt({},i),c?{}:{formatter:function(){return 0}}))}!1!==o&&((0,xU.isFunction)(o)?(0,xU.set)(e,"tooltip",function(t,e,r){var i;return o(Adt(Adt({},t),((i={})[n]=0,i)),e,r.map(function(t){var e;return Adt(Adt({},t),((e={})[n]=0,e))}))}):(0,xU.set)(e,"tooltip",Adt(Adt({},o),{items:[function(t,e,n){return{name:s(t,e,n),value:0}}]})))}else(0,xU.set)(e,"tooltip",o),(0,xU.set)(e,"label",i);return t},Hft)(t)}var ddt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),hdt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="pie",e}return ddt(e,t),e.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"theta"},transform:[{type:"stackY",reverse:!0}],animate:{enter:{type:"waveIn"}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return fdt},e}(Qft);function pdt(t){return(0,xU.flow)(Gft,Hft)(t)}var vdt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),gdt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="scatter",e}return vdt(e,t),e.getDefaultOptions=function(){return{axis:{y:{title:!1},x:{title:!1}},legend:{size:!1},children:[{type:"point"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return pdt},e}(Qft);function ydt(t){return(0,xU.flow)(function(t){return(0,xU.set)(t,"options.coordinate",{type:(0,xU.get)(t,"options.coordinateType","polar")}),t},Hft)(t)}var mdt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),bdt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="radar",e}return mdt(e,t),e.getDefaultOptions=function(){return{axis:{x:{grid:!0,line:!0},y:{zIndex:1,title:!1,line:!0,nice:!0}},meta:{x:{padding:.5,align:0}},interaction:{tooltip:{style:{crosshairsLineDash:[4,4]}}},children:[{type:"line"}],coordinateType:"polar"}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return ydt},e}(Qft);function wdt(t){return(0,xU.flow)(function(t){var e=t.options,n=e.yField,r=e.children,i=e.style,o=void 0===i?{}:i,a=e.lineStyle,s=void 0===a?{}:a,u=n[0],c=n[1],l=n[2],A=n[3];return(0,xU.set)(r,[0,"yField"],[l,A]),(0,xU.set)(r,[0,"style"],s),(0,xU.set)(r,[1,"yField"],[u,c]),(0,xU.set)(r,[1,"style"],o),delete e.yField,delete e.lineStyle,delete e.style,t},Hft)(t)}var xdt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Edt=["#26a69a","#999999","#ef5350"],Bdt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="stock",e}return xdt(e,t),e.getDefaultOptions=function(){return{type:"view",scale:{color:{domain:[-1,0,1],range:Edt},y:{nice:!0}},children:[{type:"link"},{type:"interval"}],axis:{x:{title:!1,grid:!1},y:{title:!1,grid:!0,gridLineDash:null}},animate:{enter:{type:"scaleInY"}},interaction:{tooltip:{shared:!0,marker:!1,groupName:!1,crosshairs:!0}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return wdt},e}(Qft);function kdt(t){return(0,xU.flow)(Gft,Hft)(t)}var Odt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Cdt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="TinyLine",e}return Odt(e,t),e.getDefaultOptions=function(){return{type:"view",children:[{type:"line",axis:!1}],padding:0,margin:0,tooltip:!1}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return kdt},e}(Qft);function Mdt(t){return(0,xU.flow)(Gft,Hft)(t)}var Sdt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fdt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="TinyArea",e}return Sdt(e,t),e.getDefaultOptions=function(){return{type:"view",animate:{enter:{type:"growInX",duration:500}},children:[{type:"area",axis:!1}],padding:0,margin:0,tooltip:!1}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Mdt},e}(Qft);function Tdt(t){return(0,xU.flow)(Gft,Hft)(t)}var Pdt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Idt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="TinyColumn",e}return Pdt(e,t),e.getDefaultOptions=function(){return{type:"view",children:[{type:"interval",axis:!1}],padding:0,margin:0,tooltip:!1}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Tdt},e}(Qft),Ndt=function(){return Ndt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Ndt.apply(this,arguments)};function Ldt(t){return(0,xU.flow)(function(t){var e=t.options,n=e.percent,r=e.color,i=void 0===r?[]:r;if(!n)return t;var o={scale:{color:{range:i.length?i:[]}},data:[1,n]};return Object.assign(e,Ndt({},o)),t},Gft,Hft)(t)}var _dt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qdt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="TinyProgress",e}return _dt(e,t),e.getDefaultOptions=function(){return{type:"view",data:[],margin:0,padding:0,tooltip:!1,children:[{interaction:{tooltip:!1},coordinate:{transform:[{type:"transpose"}]},type:"interval",axis:!1,legend:!1,encode:{y:function(t){return t},color:function(t,e){return e}}}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Ldt},e}(Qft),Udt=function(){return Udt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Udt.apply(this,arguments)};function jdt(t){return(0,xU.flow)(function(t){var e=t.options.radius,n=void 0===e?.8:e;return(0,xU.set)(t,"options.coordinate.innerRadius",n),t},function(t){var e=t.options,n=e.percent,r=e.color,i=void 0===r?[]:r;if(!n)return t;var o={scale:{color:{range:i.length?i:[]}},data:[1,n]};return Object.assign(e,Udt({},o)),t},Gft,Hft)(t)}var Ddt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Rdt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="TinyRing",e}return Ddt(e,t),e.getDefaultOptions=function(){return{type:"view",data:[],margin:0,padding:0,coordinate:{type:"theta"},animate:{enter:{type:"waveIn"}},interaction:{tooltip:!1},tooltip:!1,children:[{type:"interval",axis:!1,legend:!1,encode:{y:function(t){return t},color:function(t,e){return e}}}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return jdt},e}(Qft);function Hdt(t){return(0,xU.flow)(Hft)(t)}var zdt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Kdt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="rose",e}return zdt(e,t),e.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"polar"},animate:{enter:{type:"waveIn"}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Hdt},e}(Qft),Gdt="__start__",Vdt="__end__",Wdt="__waterfall_value__",Ydt=function(){return Ydt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Ydt.apply(this,arguments)};function Xdt(t){return(0,xU.flow)(function(t){var e=t.options,n=e.data,r=void 0===n?[]:n,i=e.yField;return r.length?(r.reduce(function(t,e,n){var o,a=ldt(i),s=a(e,n,r);if(0===n||e.isTotal)e[Gdt]=0,e[Vdt]=s,e[Wdt]=s;else{var u=null!==(o=t[Vdt])&&void 0!==o?o:a(t,n,r);e[Gdt]=u,e[Vdt]=u+s,e[Wdt]=t[Vdt]}return e},[]),Object.assign(e,{yField:[Gdt,Vdt]}),t):t},function(t){var e=t.options,n=e.data,r=void 0===n?[]:n,i=e.xField,o=e.children,a=e.linkStyle,s=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}([],r,!0);return s.reduce(function(t,e,n){return n>0&&(e.x1=t[i],e.x2=e[i],e.y1=t[Vdt]),e},[]),s.shift(),o.push({type:"link",xField:["x1","x2"],yField:"y1",zIndex:-1,data:s,style:Ydt({stroke:"#697474"},a),label:!1,tooltip:!1}),t},Gft,function(t){var e=t.options,n=e.data,r=void 0===n?[]:n,i=e.connector;return i?((0,xU.set)(e,"connector",Ydt({xField:i.reverse?["x2","x1"]:["x1","x2"],yField:i.reverse?["y2","y1"]:["y1","y2"],data:[{x1:r[0].x,y1:r[0][Vdt],x2:r[r.length-1].x,y2:r[r.length-1][Vdt]}]},(0,xU.isObject)(i)?i:{})),t):t},Hft)(t)}var qdt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Zdt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="waterfall",e}return qdt(e,t),e.getDefaultOptions=function(){return{type:"view",legend:null,tooltip:{field:Wdt,valueFormatter:"~s",name:"value"},axis:{y:{title:null,labelFormatter:"~s"},x:{title:null}},children:[{type:"interval",interaction:{elementHighlight:{background:!0}}}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Xdt},e}(Qft);function Jdt(t){return(0,xU.flow)(function(t){var e=t.options,n=e.data,r=e.binNumber,i=e.binWidth,o=e.children,a=e.channel,s=void 0===a?"count":a,u=(0,xU.get)(o,"[0].transform[0]",{});return(0,xU.isNumber)(i)?((0,xU.assign)(u,{thresholds:(0,xU.ceil)((0,xU.divide)(n.length,i)),y:s}),t):(0,xU.isNumber)(r)?((0,xU.assign)(u,{thresholds:r,y:s}),t):t},Gft,Hft)(t)}var $dt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),tht=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="Histogram",e}return $dt(e,t),e.getDefaultOptions=function(){return{type:"view",autoFit:!0,axis:{y:{title:!1},x:{title:!1}},children:[{type:"rect",transform:[{type:"binX",y:"count"}],interaction:{elementHighlight:{background:!0}}}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Jdt},e}(Qft);function eht(t){return(0,xU.flow)(function(t){var e=t.options,n=e.tooltip,r=void 0===n?{}:n,i=e.colorField,o=e.sizeField;return r&&!r.field&&(r.field=i||o),t},function(t){var e=t.options,n=e.mark,r=e.children;return n&&(r[0].type=n),t},Gft,Hft)(t)}var nht=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),rht=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="heatmap",e}return nht(e,t),e.getDefaultOptions=function(){return{type:"view",legend:null,tooltip:{valueFormatter:"~s"},axis:{y:{title:null,grid:!0},x:{title:null,grid:!0}},children:[{type:"point"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return eht},e}(Qft);function iht(t){return(0,xU.flow)(function(t){var e=t.options.boxType,n=void 0===e?"box":e;return t.options.children[0].type=n,t},Gft,Hft)(t)}var oht=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),aht=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="box",e}return oht(e,t),e.getDefaultOptions=function(){return{type:"view",children:[{type:"box"}],axis:{y:{title:!1},x:{title:!1}},tooltip:{items:[{name:"min",channel:"y"},{name:"q1",channel:"y1"},{name:"q2",channel:"y2"},{name:"q3",channel:"y3"},{name:"max",channel:"y4"}]}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return iht},e}(Qft),sht=function(t){var e=t.options,n=e.data;return(0,xU.get)(n,"value")||"fetch"!==(0,xU.get)(n,"type")&&(0,xU.isPlainObject)(n)&&(0,xU.set)(e,"data.value",n),t},uht=function(t){var e=t.options,n=e.data,r=[{type:"custom",callback:function(t){return{links:t}}}];if((0,xU.isArray)(n))n.length>0?(0,xU.set)(e,"data",{value:n,transform:r}):delete e.children;else if("fetch"===(0,xU.get)(n,"type")&&(0,xU.get)(n,"value")){var i=(0,xU.get)(n,"transform");(0,xU.isArray)(i)||(0,xU.set)(n,"transform",r)}return t};function cht(t){return(0,xU.flow)(sht,uht,Gft,Hft)(t)}var lht=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Aht=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="sankey",e}return lht(e,t),e.getDefaultOptions=function(){return{type:"view",children:[{type:"sankey"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return cht},e}(Qft);function fht(t){!function(t){var e=t.options.layout,n=void 0===e?"horizontal":e;t.options.coordinate.transform="horizontal"!==n?void 0:[{type:"transpose"}]}(t);var e=t.options.layout,n=void 0===e?"horizontal":e;return t.options.children.forEach(function(t){var e;(null===(e=null==t?void 0:t.coordinate)||void 0===e?void 0:e.transform)&&(t.coordinate.transform="horizontal"!==n?void 0:[{type:"transpose"}])}),t}var dht=function(){return dht=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},dht.apply(this,arguments)},hht=["#f0efff","#5B8FF9","#3D76DD"];function pht(t,e,n,r){void 0===r&&(r=!0);var i=0,o=!1,a=(0,xU.map)(t,function(t){var a,s,u=(0,xU.get)(t,[e]);if((0,xU.isNil)(u))return[];if((0,xU.isString)(u)){var c=Number(u);return isNaN(c)?[]:((a={})[n]=t[n],a[e]=c,a)}return(0,xU.isArray)(u)?(o=!0,i=Math.max(i,u.length),(0,xU.map)(r?u.sort(function(t,e){return e-t}):u,function(r,i){var o;return(o={})[n]=t[n],o[e]=r,o.index=i,o})):(i=Math.max(1,i),(s={})[n]=t[n],s[e]=u,s)}).flat();return o?[a.map(function(t){return dht({index:0},t)}),i]:[a,i]}function vht(t,e){return new Array(t).fill("").map(function(t,n){return(0,xU.isArray)(e)?e[n%e.length]:e})}function ght(t){return(0,xU.flow)(function(t){var e=t.options,n=e.color,r=e.rangeField,i=void 0===r?"ranges":r,o=e.measureField,a=void 0===o?"measures":o,s=e.targetField,u=void 0===s?"targets":s,c=e.xField,l=void 0===c?"title":c,A=e.mapField,f=e.data,d=pht(f,i,l),h=d[0],p=d[1],v=pht(f,a,l,!1),g=v[0],y=v[1],m=pht(f,u,l,!1),b=m[0],w=m[1],x=(0,xU.get)(n,[i],hht[0]),E=(0,xU.get)(n,[a],hht[1]),B=(0,xU.get)(n,[u],hht[2]),k=[vht(p,x),vht(y,E),vht(w,B)].flat();return e.children=(0,xU.map)(e.children,function(t,e){var n=[h,g,b][e],r=[i,a,u][e];return dht(dht({},t),{data:n,encode:dht(dht({},t.encode||{}),{x:l,y:r,color:function(t){var e=t.index,n=(0,xU.isNumber)(e)?"".concat(r,"_").concat(e):r;return A?(0,xU.get)(A,[r,e],n):n}})})}),(0,xU.set)(e,"scale.color.range",k),(0,xU.get)(e,"legend.color")&&(0,xU.isNil)((0,xU.get)(e,"legend.color.itemMarker"))&&(e.legend.color.itemMarker=function(t){return A&&(0,xU.includes)(null==A?void 0:A[u],t)||(null==t?void 0:t.replace(/\_\d$/,""))===u?"line":"square"}),t},function(t){var e=t.options.transpose;return void 0===e||e||(0,xU.set)(t,"options.children[2].shapeField","hyphen"),t},function(t){var e=t.options,n=e.range,r=void 0===n?{}:n,i=e.measure,o=void 0===i?{}:i,a=e.target,s=void 0===a?{}:a,u=e.children;return e.children=[r,o,s].map(function(t,e){return Eft(u[e],t)}),t},fht,Hft)(t)}var yht=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),mht=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="bullet",e}return yht(e,t),e.getDefaultOptions=function(){return{type:"view",scale:{color:{range:hht}},legend:{color:{itemMarker:function(t){return"targets"===t?"line":"square"}}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"interval",style:{maxWidth:30,zIndex:-2},axis:{y:{grid:!0,gridLineWidth:2}}},{type:"interval",style:{maxWidth:20,zIndex:-1},transform:[{type:"stackY"}]},{type:"point",encode:{size:8,shape:"line"}}],interaction:{tooltip:{shared:!0}},coordinate:{transform:[{type:"transpose"}]}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return ght},e}(Qft);function bht(t){return(0,xU.flow)(function(t){var e=t.options.data;return t.options.data={value:e},t},Gft,Hft)(t)}var wht=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xht=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="Gauge",e}return wht(e,t),e.getDefaultOptions=function(){return{type:"view",legend:!1,children:[{type:"gauge"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return bht},e}(Qft);function Eht(t){return(0,xU.flow)(function(t){var e=t.options.percent;return(0,xU.isNumber)(e)&&((0,xU.set)(t,"options.data",e),delete t.options.percent),t},Gft,Hft)(t)}var Bht=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),kht=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="Liquid",e}return Bht(e,t),e.getDefaultOptions=function(){return{type:"view",children:[{type:"liquid"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Eht},e}(Qft);function Oht(t){return(0,xU.flow)(Gft,Hft)(t)}var Cht=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Mht=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="WordCloud",e}return Cht(e,t),e.getDefaultOptions=function(){return{type:"view",legend:!1,children:[{type:"wordCloud"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Oht},e}(Qft);function Sht(t){return(0,xU.flow)(sht,Gft,Hft)(t)}var Fht=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Tht=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="treemap",e}return Fht(e,t),e.getDefaultOptions=function(){return{type:"view",children:[{type:"treemap"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Sht},e}(Qft),Pht=function(){return Pht=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Pht.apply(this,arguments)};function Iht(t){return(0,xU.flow)(function(t){var e=t.options,n=e.startAngle,r=e.maxAngle,i=e.coordinate,o=(0,xU.isNumber)(n)?n/(2*Math.PI)*360:-90,a=(0,xU.isNumber)(r)?(Number(r)+o)/180*Math.PI:Math.PI;return(0,xU.set)(t,["options","coordinate"],Pht(Pht({},i),{endAngle:a,startAngle:null!=n?n:-Math.PI/2})),t},function(t){var e=t.options,n=e.tooltip,r=e.xField,i=e.yField,o=ldt(r),a=ldt(i);return n||(0,xU.set)(e,"tooltip",{title:!1,items:[function(t,e,n){return{name:o(t,e,n),value:a(t,e,n)}}]}),t},function(t){var e=t.options,n=e.markBackground,r=e.children,i=e.scale,o=e.coordinate,a=e.xField,s=(0,xU.get)(i,"y.domain",[]);if(n){var u=n.style,c=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(n,["style"]);r.unshift(Pht({type:"interval",xField:a,yField:s[s.length-1],style:Pht({fillOpacity:.4,fill:"#e0e4ee"},u),coordinate:Pht(Pht({},o),{startAngle:-Math.PI/2,endAngle:1.5*Math.PI}),animate:!1},c))}return t},Gft,Hft)(t)}var Nht=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Lht=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="radial",e}return Nht(e,t),e.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"radial",innerRadius:.1,outerRadius:1,endAngle:Math.PI},animate:{enter:{type:"waveIn",duration:800}},axis:{y:{nice:!0,labelAutoHide:!0,labelAutoRotate:!1},x:{title:!1,nice:!0,labelAutoRotate:!1,labelAutoHide:{type:"equidistance",cfg:{minGap:6}}}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Iht},e}(Qft);function _ht(t){return(0,xU.flow)(sht,Hft)(t)}var Qht=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Uht=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="CirclePacking",e}return Qht(e,t),e.getDefaultOptions=function(){return{legend:!1,type:"view",children:[{type:"pack",encode:{color:"depth"}}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return _ht},e}(Qft),jht=function(){return jht=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},jht.apply(this,arguments)};function Dht(t,e){return t||e}function Rht(t){return(0,xU.flow)(function(t){var e=t.options,n=e.xField,r=e.yField,i=e.colorField,o=e.seriesField,a=e.children,s=null==a?void 0:a.map(function(t){return jht(jht({},t),{xField:n,yField:r,seriesField:Dht(o,i),colorField:Dht(i,o),data:"density"===t.type?{transform:[{type:"kde",field:r,groupBy:[n,Dht(o,i)]}]}:t.data})}).filter(function(t){return e.box||"density"===t.type});return(0,xU.set)(e,"children",s),delete e.box,t},Gft,Hft)(t)}var Hht=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),zht=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="violin",e}return Hht(e,t),e.getDefaultOptions=function(){return{type:"view",children:[{type:"density",sizeField:"size",tooltip:!1},{type:"boxplot",shapeField:"violin",style:{opacity:.5,point:!1}}],animate:{enter:{type:"fadeIn"}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Rht},e}(Qft),Kht=function(){return Kht=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Kht.apply(this,arguments)};function Ght(t){return(0,xU.flow)(function(t){var e=t.options,n=e.yField;return e.children.forEach(function(t,e){(0,xU.set)(t,"yField",n[e])}),t},function(t){var e=t.options,n=e.yField,r=e.children,i=e.data;if((0,xU.isPlainObject)(i))return t;var o=(0,xU.isArray)((0,xU.get)(i,[0]))?i:[i,i];return r.forEach(function(t,e){(0,xU.set)(t,"data",function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}([],o[e].map(function(t){return Kht({groupKey:n[e]},t)}),!0))}),t},function(t){var e=t.options,n=e.yField,r=n[0],i=n[1];return e.tooltip||(0,xU.set)(e,"tooltip",{items:[{field:r,value:r},{field:i,value:i}]}),t},function(t){var e=t.options,n=e.children,r=e.layout,i=e.coordinate.transform,o=e.paddingBottom,a=void 0===o?48:o,s=e.paddingLeft,u=void 0===s?48:s,c=e.axis;(0,xU.set)(e,"axisText",Kht(Kht({},(null==c?void 0:c.x)||{}),{layout:r}));var l=n[0],A=n[1];if("vertical"===r)(0,xU.set)(e,"direction","col"),(0,xU.set)(e,"paddingLeft",u),(0,xU.set)(e,"coordinate.transform",i.filter(function(t){return"transpose"!==t.type})),(0,xU.set)(l,"paddingBottom",16),(0,xU.set)(A,"paddingTop",16),(0,xU.set)(A,"axis.x.position","top"),(0,xU.set)(A,"scale.y.range",[0,1]);else{(0,xU.set)(e,"paddingBottom",a),(0,xU.set)(l,"scale.y.range",[0,1]);var f=l.paddingRight,d=void 0===f?32:f,h=A.paddingLeft,p=void 0===h?32:h;(0,xU.set)(l,"paddingRight",d),(0,xU.set)(l,"axis.x.position","right"),(0,xU.set)(A,"paddingLeft",p)}return t},Gft,Hft)(t)}var Vht,Wht=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Yht=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="BidirectionalBar",e}return Wht(e,t),e.getDefaultOptions=function(){return{type:"spaceFlex",coordinate:{transform:[{type:"transpose"}]},scale:{y:{nice:!0}},direction:"row",layout:"horizontal",legend:!1,axis:{y:{title:!1},x:{title:!1,label:!1}},children:[{type:"interval"},{type:"interval"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Ght},e}(Qft);function Xht(t){return(0,xU.flow)(function(t){var e=t.options,n=e.data,r=e.setsField,i=e.sizeField;return(0,xU.isArray)(n)&&((0,xU.set)(e,"data",{type:"inline",value:n,transform:[{type:"venn",sets:r,size:i,as:[Vht.color,Vht.d]}]}),(0,xU.set)(e,"colorField",Vht.color),(0,xU.set)(e,["children","0","encode","d"],Vht.d)),t},Hft)(t)}!function(t){t.color="key",t.d="path"}(Vht||(Vht={}));var qht=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Zht=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="venn",e}return qht(e,t),e.getDefaultOptions=function(){return{type:"view",children:[{type:"path"}],legend:{color:{itemMarker:"circle"}},encode:{color:Vht.color,d:Vht.d}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Xht},e}(Qft);function Jht(t){return(0,xU.flow)(sht,Hft)(t)}var $ht=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),tpt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="Sunburst",e}return $ht(e,t),e.getDefaultOptions=function(){return{type:"view",children:[{type:"sunburst"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Jht},e}(Qft),ept={Base:jft,Line:cdt,Column:tdt,Pie:hdt,Area:Yft,Bar:Jft,DualAxes:rdt,Funnel:adt,Scatter:gdt,Radar:bdt,Rose:Kdt,Stock:Bdt,TinyLine:Cdt,TinyArea:Fdt,TinyColumn:Idt,TinyProgress:Qdt,TinyRing:Rdt,Waterfall:Zdt,Histogram:tht,Heatmap:rht,Box:aht,Sankey:Aht,Bullet:mht,Gauge:xht,Liquid:kht,WordCloud:Mht,Treemap:Tht,RadialBar:Lht,CirclePacking:Uht,Violin:zht,BidirectionalBar:Yht,Venn:Zht,Mix:rdt,Sunburst:tpt},npt=function(){return npt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},npt.apply(this,arguments)},rpt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},ipt=(0,EU.forwardRef)(function(t,e){var n=t.chartType,r=void 0===n?"Base":n,i=rpt(t,["chartType"]),o=i.containerStyle,a=void 0===o?{height:"inherit",flex:1}:o,s=i.containerAttributes,u=void 0===s?{}:s,c=i.className,l=i.loading,A=i.loadingTemplate,f=i.errorTemplate,d=i.onReady,h=rpt(i,["containerStyle","containerAttributes","className","loading","loadingTemplate","errorTemplate","onReady"]),p=GAt(ept[r],npt(npt({},h),{onReady:function(t){e&&("function"==typeof e?e(t):e.current=t),null==d||d(t)}})),v=(p.chart,p.container);return BU().createElement(RAt,{errorTemplate:f},l&&BU().createElement(jAt,{loadingTemplate:A,theme:i.theme,loading:l}),BU().createElement("div",npt({className:c,style:a,ref:v},u)))}),opt=(0,EU.createContext)({}),apt=function(){return apt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},apt.apply(this,arguments)};function spt(t){var e=t.yField,n=t.data,r=(0,xU.isArray)(n)&&n.length>0&&(0,xU.isString)(e)&&!(0,xU.get)(t,"scale.y.domainMax"),i=Object.isFrozen(t)?apt({},t):t;return r&&0===n.reduce(function(t,n){return t+n[e]},0)?(0,xU.set)(i,"scale.y.domainMax",1):r&&0!==n.reduce(function(t,n){return t+n[e]},0)&&(0,xU.set)(i,"scale.y.domainMax",void 0),i}var upt=function(){return upt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},upt.apply(this,arguments)};function cpt(t){return t.charAt(0).toLowerCase(),t.slice(1),(0,EU.forwardRef)(function(e,n){var r,i,o=(0,EU.useContext)(opt),a=(0,EU.useMemo)(function(){return t.charAt(0).toLowerCase()+t.slice(1)},[t]),s=(0,xU.flow)([spt])(e),u=upt(upt({},null!==(r=null==o?void 0:o.common)&&void 0!==r?r:{}),null!==(i=null==o?void 0:o[a])&&void 0!==i?i:{});return BU().createElement(ipt,upt({},u,s,{chartType:t,ref:n}))})}const lpt=cpt("Area"),Apt=cpt("Bar"),fpt=cpt("Column");var dpt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function hpt(t){var e=t.children,n=dpt(t,["children"]);return BU().createElement(opt.Provider,{value:n},e)}const ppt=cpt("DualAxes"),vpt=cpt("Funnel"),gpt=cpt("Line"),ypt=cpt("Pie"),mpt=cpt("Scatter"),bpt=cpt("Radar");var wpt={Line:cpt("TinyLine"),Area:cpt("TinyArea"),Column:cpt("TinyColumn"),Progress:cpt("TinyProgress"),Ring:cpt("TinyRing")};const xpt=cpt("Rose"),Ept=cpt("Waterfall"),Bpt=cpt("Histogram"),kpt=cpt("Heatmap"),Opt=cpt("Box"),Cpt=cpt("Sankey"),Mpt=cpt("Stock"),Spt=cpt("Bullet"),Fpt=cpt("Gauge"),Tpt=cpt("Liquid"),Ppt=cpt("WordCloud"),Ipt=cpt("Treemap"),Npt=cpt("RadialBar"),Lpt=cpt("CirclePacking"),_pt=cpt("Violin"),Qpt=cpt("BidirectionalBar"),Upt=cpt("Venn"),jpt=cpt("Mix"),Dpt=cpt("Sunburst")})(),l})());
//# sourceMappingURL=charts.min.js.map